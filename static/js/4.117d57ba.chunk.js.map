{"version":3,"sources":["../node_modules/tonva/dist/entry/tools.js","../node_modules/tonva/dist/img/logo.svg","../node_modules/tonva/dist/entry/login.js"],"names":["logo","tonvaTop","loginTop","className","src","alt","senders","type","caption","regex","getSender","un","find","v","test","module","exports","__extends","_extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","op","TypeError","call","pop","length","push","schema","name","required","maxLength","Login","_super","_this","arguments","res","uiSchema","items","username","placeholder","password","widget","login","onSubmit","context","values","pwd","user","sender","_a","form","data","undefined","guest","console","log","token","userLogined","props","callback","onEnter","render","footer","href","style","margin","privacyEntry","header","withBack","onButtonClick","requiredFlag"],"mappings":"kHAAA,uFAGIA,EAAO,EAAQ,KAEZ,SAASC,IACd,OAAO,MAAIC,SAAS,gBAAoB,MAAO,CAC7CC,UAAW,+CACV,gBAAoB,MAAO,CAC5BA,UAAW,kCACXC,IAAKJ,EACLK,IAAK,QACH,gBAAoB,MAAO,CAC7BF,UAAW,4BACV,gBAAoB,OAAQ,CAC7BA,UAAW,qBACV,UAAW,gBAAoB,OAAQ,CACxCA,UAAW,eACV,aAEL,IAAIG,EAAU,CAAC,CACbC,KAAM,SACNC,QAAS,qBACTC,MAAO,eACN,CACDF,KAAM,QACNC,QAAS,eACTC,MAAO,eAEF,SAASC,EAAUC,GAIxB,OAHaL,EAAQM,MAAK,SAAUC,GAClC,OAA4B,IAArBA,EAAEJ,MAAMK,KAAKH,Q,oBC/BxBI,EAAOC,QAAU,IAA0B,kC,iCCA3C,mDAAIC,EAAsC,WACxC,IAAIC,EAAiB,SAAuBC,EAAGC,GAW7C,OAVAF,EAAiBG,OAAOC,gBAAkB,CACxCC,UAAW,cACAC,OAAS,SAAUL,EAAGC,GACjCD,EAAEI,UAAYH,IACX,SAAUD,EAAGC,GAChB,IAAK,IAAIK,KAAKL,EACRA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MAIhBN,EAAGC,IAG3B,OAAO,SAAUD,EAAGC,GAGlB,SAASO,IACPC,KAAKC,YAAcV,EAHrBD,EAAeC,EAAGC,GAMlBD,EAAEW,UAAkB,OAANV,EAAaC,OAAOU,OAAOX,IAAMO,EAAGG,UAAYV,EAAEU,UAAW,IAAIH,IAtBzC,GA0BtCK,EAAsC,SAAUC,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAI9DO,EAA0C,SAAUjB,EAASkB,GAC/D,IASIC,EACAC,EACAC,EACAC,EAZAC,EAAI,CACNC,MAAO,EACPC,KAAM,WACJ,GAAW,EAAPJ,EAAE,GAAQ,MAAMA,EAAE,GACtB,OAAOA,EAAE,IAEXK,KAAM,GACNC,IAAK,IAMP,OAAOL,EAAI,CACTZ,KAAMkB,EAAK,GACX,MAASA,EAAK,GACd,OAAUA,EAAK,IACI,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WACvD,OAAOnC,OACL2B,EAEJ,SAASM,EAAKG,GACZ,OAAO,SAAUnD,GACf,OAIJ,SAAcoD,GACZ,GAAIb,EAAG,MAAM,IAAIc,UAAU,mCAE3B,KAAOV,GACL,IACE,GAAIJ,EAAI,EAAGC,IAAMC,EAAY,EAARW,EAAG,GAASZ,EAAU,OAAIY,EAAG,GAAKZ,EAAS,SAAOC,EAAID,EAAU,SAAMC,EAAEa,KAAKd,GAAI,GAAKA,EAAEV,SAAWW,EAAIA,EAAEa,KAAKd,EAAGY,EAAG,KAAKlB,KAAM,OAAOO,EAG3J,OAFID,EAAI,EAAGC,IAAGW,EAAK,CAAS,EAARA,EAAG,GAAQX,EAAEb,QAEzBwB,EAAG,IACT,KAAK,EACL,KAAK,EACHX,EAAIW,EACJ,MAEF,KAAK,EAEH,OADAT,EAAEC,QACK,CACLhB,MAAOwB,EAAG,GACVlB,MAAM,GAGV,KAAK,EACHS,EAAEC,QACFJ,EAAIY,EAAG,GACPA,EAAK,CAAC,GACN,SAEF,KAAK,EACHA,EAAKT,EAAEI,IAAIQ,MAEXZ,EAAEG,KAAKS,MAEP,SAEF,QACE,KAAkBd,GAAZA,EAAIE,EAAEG,MAAYU,OAAS,GAAKf,EAAEA,EAAEe,OAAS,MAAkB,IAAVJ,EAAG,IAAsB,IAAVA,EAAG,IAAW,CACtFT,EAAI,EACJ,SAGF,GAAc,IAAVS,EAAG,MAAcX,GAAKW,EAAG,GAAKX,EAAE,IAAMW,EAAG,GAAKX,EAAE,IAAK,CACvDE,EAAEC,MAAQQ,EAAG,GACb,MAGF,GAAc,IAAVA,EAAG,IAAYT,EAAEC,MAAQH,EAAE,GAAI,CACjCE,EAAEC,MAAQH,EAAE,GACZA,EAAIW,EACJ,MAGF,GAAIX,GAAKE,EAAEC,MAAQH,EAAE,GAAI,CACvBE,EAAEC,MAAQH,EAAE,GAEZE,EAAEI,IAAIU,KAAKL,GAEX,MAGEX,EAAE,IAAIE,EAAEI,IAAIQ,MAEhBZ,EAAEG,KAAKS,MAEP,SAGJH,EAAKd,EAAKgB,KAAKlC,EAASuB,GACxB,MAAOZ,GACPqB,EAAK,CAAC,EAAGrB,GACTS,EAAI,EACJ,QACAD,EAAIE,EAAI,EAIZ,GAAY,EAARW,EAAG,GAAQ,MAAMA,EAAG,GACxB,MAAO,CACLxB,MAAOwB,EAAG,GAAKA,EAAG,QAAK,EACvBlB,MAAM,GAlFCL,CAAK,CAACsB,EAAGnD,OA4FlB0D,EAAS,CAAC,CACZC,KAAM,WACNjE,KAAM,SACNkE,UAAU,EACVC,UAAW,KACV,CACDF,KAAM,WACNjE,KAAM,SACNkE,UAAU,EACVC,UAAW,KACV,CACDF,KAAM,QACNjE,KAAM,WAGJoE,EAEJ,SAAUC,GAGR,SAASD,IACP,IAAIE,EAAmB,OAAXD,GAAmBA,EAAO3B,MAAMrB,KAAMkD,YAAclD,KAmGhE,OAjGAiD,EAAME,IAAM,kBAAQ,KACpBF,EAAMG,SAAW,CACfC,MAAO,CACLC,SAAU,CACRC,YAAa,+CACb1B,MAAO,4BAET2B,SAAU,CACRC,OAAQ,WACRF,YAAa,eACb1B,MAAO,gBAET6B,MAAO,CACLD,OAAQ,SACRlF,UAAW,iCACXsD,MAAO,kBAKboB,EAAMU,SAAW,SAAUf,EAAMgB,GAC/B,OAAOxD,EAAU6C,OAAO,OAAQ,GAAQ,WACtC,IAAIY,EAAQ9E,EAAI+E,EAAKC,EAAMC,EAC3B,OAAO1C,EAAYtB,MAAM,SAAUiE,GACjC,OAAQA,EAAGpC,OACT,KAAK,EAKH,OAJAgC,EAASD,EAAQM,KAAKC,KACtBpF,EAAK8E,EAAiB,cAGVO,KAFZN,EAAMD,EAAiB,UAGd,CAAC,EAEN,qCAGG,CAAC,EAEN,IAAQH,MAAM,CACdK,KAAMhF,EACN+E,IAAKA,EACLO,MAAO,MAAIA,SAGf,KAAK,EAGH,YAAaD,KAFbL,EAAOE,EAAGnC,SAGRkC,EAAS,YAAUjF,GAEZ,CAAC,QADUqF,IAAXJ,EAAuBA,EAAOpF,QAAU,sBAGtC,oCAGX0F,QAAQC,IAAI,gCAAiCR,EAAKnB,KAAMmB,EAAKS,OACtD,CAAC,EAEN,MAAIC,YAAYV,EAAM/D,KAAK0E,MAAMC,YAErC,KAAK,EAGH,OAFAV,EAAGnC,OAEI,CAAC,WAQlBmB,EAAM2B,QAAU,SAAUhC,EAAMgB,GAC9B,OAAOxD,EAAU6C,OAAO,OAAQ,GAAQ,WACtC,OAAO3B,EAAYtB,MAAM,SAAUiE,GACjC,OAAQA,EAAGpC,OACT,KAAK,EACH,MAAe,aAATe,EAA6B,CAAC,EAElC,GACK,CAAC,EAEN5C,KAAK2D,SAAS,QAASC,IAE3B,KAAK,EACH,MAAO,CAAC,EAENK,EAAGnC,QAEP,KAAK,EACH,MAAO,CAAC,WAQXmB,EA4DT,OAlKA5D,EAAU0D,EAAOC,GAqHjBD,EAAM7C,UAAU2E,OAAS,WACvB,IAAIC,EAAS,gBAAoB,MAAO,KAAM,gBAAoB,MAAO,CACvEvG,UAAW,WACV,gBAAoB,MAAO,CAC5BA,UAAW,eACV,gBAAoB,KAAI,CACzBwG,KAAM,YACNxG,UAAW,eACXyG,MAAO,CACLC,OAAQ,aAET,6BAA8B,MAAIC,iBACjCC,GAAS,EAMb,OAJ4B,IAAxBnF,KAAK0E,MAAMU,WACbD,EAAS,gBAGJ,gBAAoB,OAAM,CAC/BA,OAAQA,EACRL,OAAQA,GACP,gBAAoB,MAAO,CAC5BvG,UAAW,oEACV,gBAAoB,MAAO,CAC5BA,UAAW,cACT,gBAAoB,MAAO,CAC7BA,UAAW,SACV,cAAY,gBAAoB,MAAO,CACxCA,UAAW,SACT,gBAAoB,OAAM,CAC5BoE,OAAQA,EACRS,SAAUpD,KAAKoD,SACfiC,cAAerF,KAAK2D,SACpBiB,QAAS5E,KAAK4E,QACdU,cAAc,IACZ,gBAAoB,KAAI,CAC1B/G,UAAW,yBACXwG,KAAM,WACL,6BAA8B,gBAAoB,MAAO,CAC1DxG,UAAW,cACT,gBAAoB,MAAO,CAC7BA,UAAW,iBAIRwE,EAnKT,CAoKE,aAEa","file":"static/js/4.117d57ba.chunk.js","sourcesContent":["import * as React from 'react';\nimport { nav, mobileRegex, emailRegex } from '../components';\n\nvar logo = require('../img/logo.svg');\n\nexport function tonvaTop() {\n  return nav.loginTop(React.createElement(\"div\", {\n    className: \"d-flex align-items-center position-relative\"\n  }, React.createElement(\"img\", {\n    className: \"App-logo h-3c position-absolute\",\n    src: logo,\n    alt: \"img\"\n  }), React.createElement(\"div\", {\n    className: \"h3 flex-fill text-center\"\n  }, React.createElement(\"span\", {\n    className: \"text-primary mr-3\"\n  }, \"\\u540C\"), React.createElement(\"span\", {\n    className: \"text-danger\"\n  }, \"\\u82B1\"))));\n}\nvar senders = [{\n  type: 'mobile',\n  caption: '手机号',\n  regex: mobileRegex\n}, {\n  type: 'email',\n  caption: '邮箱',\n  regex: emailRegex\n}];\nexport function getSender(un) {\n  var sender = senders.find(function (v) {\n    return v.regex.test(un) === true;\n  });\n  return sender;\n}","module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport * as React from 'react';\nimport { nav, Page, Form, resLang, Ax } from '../components';\nimport { userApi } from '../net';\nimport { loginRes } from '../res';\nimport { tonvaTop, getSender } from './tools';\nvar schema = [{\n  name: 'username',\n  type: 'string',\n  required: true,\n  maxLength: 100\n}, {\n  name: 'password',\n  type: 'string',\n  required: true,\n  maxLength: 100\n}, {\n  name: 'login',\n  type: 'submit'\n}];\n\nvar Login =\n/** @class */\nfunction (_super) {\n  __extends(Login, _super);\n\n  function Login() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.res = resLang(loginRes);\n    _this.uiSchema = {\n      items: {\n        username: {\n          placeholder: '手机/邮箱/用户名',\n          label: '登录账号'\n        },\n        password: {\n          widget: 'password',\n          placeholder: '密码',\n          label: '密码'\n        },\n        login: {\n          widget: 'button',\n          className: 'btn btn-primary btn-block mt-3',\n          label: '登录'\n        }\n      }\n    };\n\n    _this.onSubmit = function (name, context) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var values, un, pwd, user, sender, type;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              values = context.form.data;\n              un = values['username'];\n              pwd = values['password'];\n\n              if (pwd === undefined) {\n                return [2\n                /*return*/\n                , 'something wrong, pwd is undefined'];\n              }\n\n              return [4\n              /*yield*/\n              , userApi.login({\n                user: un,\n                pwd: pwd,\n                guest: nav.guest\n              })];\n\n            case 1:\n              user = _a.sent();\n\n              if (user === undefined) {\n                sender = getSender(un);\n                type = sender !== undefined ? sender.caption : '用户名';\n                return [2\n                /*return*/\n                , type + '或密码错！'];\n              }\n\n              console.log(\"onLoginSubmit: user=%s pwd:%s\", user.name, user.token);\n              return [4\n              /*yield*/\n              , nav.userLogined(user, this.props.callback)];\n\n            case 2:\n              _a.sent();\n\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    _this.onEnter = function (name, context) {\n      return __awaiter(_this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              if (!(name === 'password')) return [3\n              /*break*/\n              , 2];\n              return [4\n              /*yield*/\n              , this.onSubmit('login', context)];\n\n            case 1:\n              return [2\n              /*return*/\n              , _a.sent()];\n\n            case 2:\n              return [2\n              /*return*/\n              ];\n          }\n        });\n      });\n    };\n\n    return _this;\n  }\n  /*\r\n  private clickReg = () => {\r\n      //nav.replace(<RegisterView />);\r\n      let register = new RegisterController(undefined);\r\n      register.start();\r\n  }\r\n  private clickForget = () => {\r\n      let forget = new ForgetController(undefined);\r\n      forget.start();\r\n  }\r\n  */\n\n\n  Login.prototype.render = function () {\n    var footer = React.createElement(\"div\", null, React.createElement(\"div\", {\n      className: \"d-block\"\n    }, React.createElement(\"div\", {\n      className: 'text-center'\n    }, React.createElement(Ax, {\n      href: \"/register\",\n      className: \"btn btn-link\",\n      style: {\n        margin: '0px auto'\n      }\n    }, \"\\u6CE8\\u518C\\u8D26\\u53F7\")), nav.privacyEntry()));\n    var header = false;\n\n    if (this.props.withBack === true) {\n      header = '登录';\n    }\n\n    return React.createElement(Page, {\n      header: header,\n      footer: footer\n    }, React.createElement(\"div\", {\n      className: \"d-flex p-5 flex-column justify-content-center align-items-center\"\n    }, React.createElement(\"div\", {\n      className: \"flex-fill\"\n    }), React.createElement(\"div\", {\n      className: \"w-20c\"\n    }, tonvaTop(), React.createElement(\"div\", {\n      className: \"h-2c\"\n    }), React.createElement(Form, {\n      schema: schema,\n      uiSchema: this.uiSchema,\n      onButtonClick: this.onSubmit,\n      onEnter: this.onEnter,\n      requiredFlag: false\n    }), React.createElement(Ax, {\n      className: \"btn btn-link btn-block\",\n      href: \"/forget\"\n    }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\")), React.createElement(\"div\", {\n      className: \"flex-fill\"\n    }), React.createElement(\"div\", {\n      className: \"flex-fill\"\n    })));\n  };\n\n  return Login;\n}(React.Component);\n\nexport default Login;"],"sourceRoot":""}