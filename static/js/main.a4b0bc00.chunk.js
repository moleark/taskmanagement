(this.webpackJsonptaskmanagement=this.webpackJsonptaskmanagement||[]).push([[0],[,,,,function(e,t,n){"use strict";var r=n(21);n.d(t,"PageItems",(function(){return r.b}));var a=n(17);n.d(t,"userApi",(function(){return a.r}));var i=n(11);n.o(i,"CAppBase")&&n.d(t,"CAppBase",(function(){return i.CAppBase})),n.o(i,"CBase")&&n.d(t,"CBase",(function(){return i.CBase})),n.o(i,"CSub")&&n.d(t,"CSub",(function(){return i.CSub})),n.o(i,"Controller")&&n.d(t,"Controller",(function(){return i.Controller})),n.o(i,"EasyDate")&&n.d(t,"EasyDate",(function(){return i.EasyDate})),n.o(i,"EasyTime")&&n.d(t,"EasyTime",(function(){return i.EasyTime})),n.o(i,"Edit")&&n.d(t,"Edit",(function(){return i.Edit})),n.o(i,"FA")&&n.d(t,"FA",(function(){return i.FA})),n.o(i,"Form")&&n.d(t,"Form",(function(){return i.Form})),n.o(i,"Image")&&n.d(t,"Image",(function(){return i.Image})),n.o(i,"LMR")&&n.d(t,"LMR",(function(){return i.LMR})),n.o(i,"List")&&n.d(t,"List",(function(){return i.List})),n.o(i,"NavView")&&n.d(t,"NavView",(function(){return i.NavView})),n.o(i,"Page")&&n.d(t,"Page",(function(){return i.Page})),n.o(i,"PropGrid")&&n.d(t,"PropGrid",(function(){return i.PropGrid})),n.o(i,"SearchBox")&&n.d(t,"SearchBox",(function(){return i.SearchBox})),n.o(i,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return i.TabCaptionComponent})),n.o(i,"Tabs")&&n.d(t,"Tabs",(function(){return i.Tabs})),n.o(i,"UserIcon")&&n.d(t,"UserIcon",(function(){return i.UserIcon})),n.o(i,"VPage")&&n.d(t,"VPage",(function(){return i.VPage})),n.o(i,"View")&&n.d(t,"View",(function(){return i.View})),n.o(i,"Widget")&&n.d(t,"Widget",(function(){return i.Widget})),n.o(i,"nav")&&n.d(t,"nav",(function(){return i.nav})),n.o(i,"start")&&n.d(t,"start",(function(){return i.start})),n.o(i,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return i.toUiSelectItems})),n.o(i,"tv")&&n.d(t,"tv",(function(){return i.tv}));n(123);var c=n(35);n.o(c,"CAppBase")&&n.d(t,"CAppBase",(function(){return c.CAppBase})),n.o(c,"CBase")&&n.d(t,"CBase",(function(){return c.CBase})),n.o(c,"CSub")&&n.d(t,"CSub",(function(){return c.CSub})),n.o(c,"Controller")&&n.d(t,"Controller",(function(){return c.Controller})),n.o(c,"EasyDate")&&n.d(t,"EasyDate",(function(){return c.EasyDate})),n.o(c,"EasyTime")&&n.d(t,"EasyTime",(function(){return c.EasyTime})),n.o(c,"Edit")&&n.d(t,"Edit",(function(){return c.Edit})),n.o(c,"FA")&&n.d(t,"FA",(function(){return c.FA})),n.o(c,"Form")&&n.d(t,"Form",(function(){return c.Form})),n.o(c,"Image")&&n.d(t,"Image",(function(){return c.Image})),n.o(c,"LMR")&&n.d(t,"LMR",(function(){return c.LMR})),n.o(c,"List")&&n.d(t,"List",(function(){return c.List})),n.o(c,"NavView")&&n.d(t,"NavView",(function(){return c.NavView})),n.o(c,"Page")&&n.d(t,"Page",(function(){return c.Page})),n.o(c,"PropGrid")&&n.d(t,"PropGrid",(function(){return c.PropGrid})),n.o(c,"SearchBox")&&n.d(t,"SearchBox",(function(){return c.SearchBox})),n.o(c,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return c.TabCaptionComponent})),n.o(c,"Tabs")&&n.d(t,"Tabs",(function(){return c.Tabs})),n.o(c,"UserIcon")&&n.d(t,"UserIcon",(function(){return c.UserIcon})),n.o(c,"VPage")&&n.d(t,"VPage",(function(){return c.VPage})),n.o(c,"View")&&n.d(t,"View",(function(){return c.View})),n.o(c,"Widget")&&n.d(t,"Widget",(function(){return c.Widget})),n.o(c,"nav")&&n.d(t,"nav",(function(){return c.nav})),n.o(c,"start")&&n.d(t,"start",(function(){return c.start})),n.o(c,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return c.toUiSelectItems})),n.o(c,"tv")&&n.d(t,"tv",(function(){return c.tv}));var s=n(109);n.o(s,"CAppBase")&&n.d(t,"CAppBase",(function(){return s.CAppBase})),n.o(s,"CBase")&&n.d(t,"CBase",(function(){return s.CBase})),n.o(s,"CSub")&&n.d(t,"CSub",(function(){return s.CSub})),n.o(s,"Controller")&&n.d(t,"Controller",(function(){return s.Controller})),n.o(s,"EasyDate")&&n.d(t,"EasyDate",(function(){return s.EasyDate})),n.o(s,"EasyTime")&&n.d(t,"EasyTime",(function(){return s.EasyTime})),n.o(s,"Edit")&&n.d(t,"Edit",(function(){return s.Edit})),n.o(s,"FA")&&n.d(t,"FA",(function(){return s.FA})),n.o(s,"Form")&&n.d(t,"Form",(function(){return s.Form})),n.o(s,"Image")&&n.d(t,"Image",(function(){return s.Image})),n.o(s,"LMR")&&n.d(t,"LMR",(function(){return s.LMR})),n.o(s,"List")&&n.d(t,"List",(function(){return s.List})),n.o(s,"NavView")&&n.d(t,"NavView",(function(){return s.NavView})),n.o(s,"Page")&&n.d(t,"Page",(function(){return s.Page})),n.o(s,"PropGrid")&&n.d(t,"PropGrid",(function(){return s.PropGrid})),n.o(s,"SearchBox")&&n.d(t,"SearchBox",(function(){return s.SearchBox})),n.o(s,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return s.TabCaptionComponent})),n.o(s,"Tabs")&&n.d(t,"Tabs",(function(){return s.Tabs})),n.o(s,"UserIcon")&&n.d(t,"UserIcon",(function(){return s.UserIcon})),n.o(s,"VPage")&&n.d(t,"VPage",(function(){return s.VPage})),n.o(s,"View")&&n.d(t,"View",(function(){return s.View})),n.o(s,"Widget")&&n.d(t,"Widget",(function(){return s.Widget})),n.o(s,"nav")&&n.d(t,"nav",(function(){return s.nav})),n.o(s,"start")&&n.d(t,"start",(function(){return s.start})),n.o(s,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return s.toUiSelectItems})),n.o(s,"tv")&&n.d(t,"tv",(function(){return s.tv}));var u=n(121);n.d(t,"CAppBase",(function(){return u.a})),n.d(t,"CBase",(function(){return u.b})),n.d(t,"CSub",(function(){return u.c})),n.d(t,"start",(function(){return u.d}))},,,,,,,function(e,t,n){"use strict";var r=n(18);n.d(t,"NavView",(function(){return r.a})),n.d(t,"nav",(function(){return r.b}));n(60);var a=n(23);n.d(t,"Page",(function(){return a.a}));var i=n(95);n.d(t,"Controller",(function(){return i.a})),n.d(t,"VPage",(function(){return i.b})),n.d(t,"View",(function(){return i.c}));var c=n(96);n.o(c,"CAppBase")&&n.d(t,"CAppBase",(function(){return c.CAppBase})),n.o(c,"CBase")&&n.d(t,"CBase",(function(){return c.CBase})),n.o(c,"CSub")&&n.d(t,"CSub",(function(){return c.CSub})),n.o(c,"EasyDate")&&n.d(t,"EasyDate",(function(){return c.EasyDate})),n.o(c,"EasyTime")&&n.d(t,"EasyTime",(function(){return c.EasyTime})),n.o(c,"Edit")&&n.d(t,"Edit",(function(){return c.Edit})),n.o(c,"FA")&&n.d(t,"FA",(function(){return c.FA})),n.o(c,"Form")&&n.d(t,"Form",(function(){return c.Form})),n.o(c,"Image")&&n.d(t,"Image",(function(){return c.Image})),n.o(c,"LMR")&&n.d(t,"LMR",(function(){return c.LMR})),n.o(c,"List")&&n.d(t,"List",(function(){return c.List})),n.o(c,"Muted")&&n.d(t,"Muted",(function(){return c.Muted})),n.o(c,"PropGrid")&&n.d(t,"PropGrid",(function(){return c.PropGrid})),n.o(c,"SearchBox")&&n.d(t,"SearchBox",(function(){return c.SearchBox})),n.o(c,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return c.TabCaptionComponent})),n.o(c,"Tabs")&&n.d(t,"Tabs",(function(){return c.Tabs})),n.o(c,"UserIcon")&&n.d(t,"UserIcon",(function(){return c.UserIcon})),n.o(c,"Widget")&&n.d(t,"Widget",(function(){return c.Widget})),n.o(c,"emailRegex")&&n.d(t,"emailRegex",(function(){return c.emailRegex})),n.o(c,"mobileRegex")&&n.d(t,"mobileRegex",(function(){return c.mobileRegex})),n.o(c,"resLang")&&n.d(t,"resLang",(function(){return c.resLang})),n.o(c,"start")&&n.d(t,"start",(function(){return c.start})),n.o(c,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return c.toUiSelectItems})),n.o(c,"tv")&&n.d(t,"tv",(function(){return c.tv}));var s=n(118);n.d(t,"Form",(function(){return s.a})),n.d(t,"Widget",(function(){return s.b}));var u=n(119);n.d(t,"Edit",(function(){return u.a}));var o=n(44);n.d(t,"resLang",(function(){return o.a}));var l=n(124);n.d(t,"TabCaptionComponent",(function(){return l.a})),n.d(t,"Tabs",(function(){return l.b}));n(64);var p=n(33);n.d(t,"Image",(function(){return p.a}));n(65);var h=n(100);n.d(t,"emailRegex",(function(){return h.a})),n.d(t,"mobileRegex",(function(){return h.b}));var d=n(120);n.d(t,"List",(function(){return d.a}));n(101);var f=n(102);n.d(t,"EasyDate",(function(){return f.a})),n.d(t,"EasyTime",(function(){return f.b}));var m=n(122);n.d(t,"PropGrid",(function(){return m.a}));var v=n(76);n.d(t,"FA",(function(){return v.a})),n.d(t,"LMR",(function(){return v.b})),n.d(t,"Muted",(function(){return v.c}));n(103);var b=n(104);n.d(t,"SearchBox",(function(){return b.a}));var y=n(105);n.d(t,"UserIcon",(function(){return y.a}))},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(11),h=n(46),d=n(72),f=function(e){function t(e,n,r,a){var i;Object(c.a)(this,t),(i=Object(u.a)(this,Object(o.a)(t).call(this,e,a))).entity=void 0,i.ui=void 0,Object.setPrototypeOf(i.x,e.x);var s=n.name,l=n.typeName;return i.entity=n,i.ui=r,i.label=i.res.label||s,i.icon=d.a[l],i}return Object(l.a)(t,e),Object(s.a)(t,[{key:"beforeStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.loadSchema();case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createForm",value:function(e,t,n){var r=this.buildFormOptions(n),a=new h.b(r,e);return a.setValues(t),a}},{key:"buildFormOptions",value:function(e){var t,n,r,a,i,c=this.entity,s=c.fields,u=c.arrFields;void 0!==this.res&&(t=this.res.none,n=this.res.submit,r=this.res.arrNew,a=this.res.arrEdit,i=this.res.arrTitleNewButton),void 0===t&&(t=this.cUq.res.none||"none"),void 0===n&&(n=this.cUq.res.submit||"Submit"),void 0===r&&(r=this.cUq.res.arrNew||"New"),void 0===a&&(a=this.cUq.res.arrEdit||"Edit"),void 0===i&&(i=this.cUq.res.arrTitleNewButton),void 0===e&&(e=h.a.new);var o=this.ui.form;return{fields:s,arrs:u,ui:o,res:this.res||{},inputs:this.buildInputs(o),none:t,submitCaption:n,arrNewCaption:r,arrEditCaption:a,arrTitleNewButton:i,mode:e}}},{key:"buildInputs",value:function(e){var t=this.entity,n=t.fields,r=t.arrFields,a={};if(this.buildFieldsInputs(a,n,void 0,e),void 0!==r){var i=!0,c=!1,s=void 0;try{for(var u,o=r[Symbol.iterator]();!(i=(u=o.next()).done);i=!0){var l=u.value,p=l.name,h=l.fields,d=e&&e.items;this.buildFieldsInputs(a,h,p,d&&d[p])}}catch(f){c=!0,s=f}finally{try{i||null==o.return||o.return()}finally{if(c)throw s}}}return a}},{key:"buildFieldsInputs",value:function(e,t,n,r){if(void 0!==n){var a=e[n];void 0===a&&(e[n]=a={},e=a)}var i=!0,c=!1,s=void 0;try{for(var u,o=t[Symbol.iterator]();!(i=(u=o.next()).done);i=!0){var l=u.value,p=l.name,h=l._tuid;if(void 0!==h){var d=h.tuid,f=r&&r.items&&r.items[p];e[p]={select:this.buildSelect(l,n,f),content:this.buildContent(l,n),placeHolder:this.cUq.getTuidPlaceHolder(d)}}}}catch(m){c=!0,s=m}finally{try{i||null==o.return||o.return()}finally{if(c)throw s}}}},{key:"buildSelect",value:function(e,t,n){return function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n._tuid,i.ownerField,c=void 0,e.abrupt("return");case 9:if(s=e.sent,c.removeCeased(),void 0!==s){e.next=13;break}return e.abrupt("return",void 0);case 13:return u=c.idFromItem(s),i.useId(u),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}},{key:"buildContent",value:function(e,t){}},{key:"cQuerySelect",value:function(e){return this.cUq.cQuerySelect(e)}}]),t}(n(73).a),m=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(o.a)(t).call(this,e))).entity=void 0,n.ui=void 0,n.entity=e.entity,n.ui=e.ui,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"createForm",value:function(e,t,n){return this.controller.createForm(e,t,n)}},{key:"label",get:function(){return this.controller.label}}]),t}(p.VPage)},function(e,t,n){"use strict";var r=n(34),a=n(59),i=n(1),c=n.n(i),s=n(2),u=n(3),o=n(5),l=n(7),p=n(6),h=n(8),d=n(38),f=n(29),m=new(function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"guest",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("",{});case 2:t=e.sent,e.t0=typeof t,e.next="string"===e.t0?7:"object"===e.t0?8:6;break;case 6:return e.abrupt("return");case 7:return e.abrupt("return",Object(d.a)(t));case 8:return n=Object(d.a)(t.token),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unitFromName",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(t);case 2:return n=e.sent,e.abrupt("return",n&&n.unit);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(f.a))("tv/guest/",void 0),v=function(){function e(t,n){Object(u.a)(this,e),this._params=void 0,this.method="POST",this.waiting=void 0,this._params=t,this.waiting=n}return Object(o.a)(e,[{key:"buildParams",value:function(){return this.params}},{key:"params",get:function(){return this._params}},{key:"headers",get:function(){}}]),e}(),b=n(26),y=n(39);n.d(t,"f",(function(){return r.a})),n.d(t,"m",(function(){return r.b})),n.d(t,"n",(function(){return a.b})),n.d(t,"i",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"l",(function(){return f.h})),n.d(t,"e",(function(){return f.d})),n.d(t,"d",(function(){return f.c})),n.d(t,"q",(function(){return f.j})),n.d(t,"p",(function(){return f.i})),n.d(t,"b",(function(){return f.a})),n.d(t,"c",(function(){return f.b})),n.d(t,"k",(function(){return f.g})),n.d(t,"r",(function(){return f.l})),n.d(t,"g",(function(){return b.a})),n.d(t,"h",(function(){return b.f})),n.d(t,"o",(function(){return y.b})),n.d(t,"j",(function(){return y.a}))},function(e,t,n){"use strict";var r,a,i=n(13),c=n(12),s=(n(19),n(1)),u=n.n(s),o=n(2),l=n(3),p=n(5),h=n(7),d=n(6),f=n(8),m=n(0),v=n(10),b=n(125),y=n.n(b),g=n(23),k=n(29),w=n(34),O=function(e,t){Object(k.i)(e,t),w.a.setCenterToken(t)},j=n(17),x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).reApi=Object(o.a)(u.a.mark((function e(){var t,r,a,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.props.clearError(),t=n.props,r=t.channel,a=t.url,i=t.options,c=t.resolve,s=t.reject,e.next=4,Object(j.n)(r,a,i,c,s);case 4:case"end":return e.stop()}}),e)}))),n.close=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.props.clearError();case 1:case"end":return e.stop()}}),e)}))),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.error,r=t.url;if("object"===typeof n){var a=[];for(var i in n)a.push(m.createElement("li",{key:i},m.createElement("label",null,i),m.createElement("div",{style:{wordWrap:"break-word"}},n[i])));e=m.createElement("ul",null,a)}else e=m.createElement("div",null,n);return m.createElement("li",null,m.createElement("article",{className:"page-container"},m.createElement("section",null,m.createElement("div",{className:"va-error"},m.createElement("div",null,"\u7f51\u7edc\u51fa\u73b0\u95ee\u9898"),m.createElement("div",null,"\u70b9\u51fb\u91cd\u65b0\u8bbf\u95ee"),m.createElement("div",{style:{wordWrap:"break-word"}},"url: ",r),e,m.createElement("div",{className:"p-3"},m.createElement("button",{type:"button",onClick:this.reApi},"\u91cd\u65b0API"),m.createElement("button",{type:"button",onClick:this.close},"\u5173\u95ed"))))))}}]),t}(m.Component),E=function(e){var t=e.message;return m.createElement(g.a,{header:"\u7cfb\u7edf\u63d0\u9192"},m.createElement("div",{className:"px-3"},t))},C=n(26),N=n(21),S=n(44),P=n(64),T=(n(94),n(128),n(141),n(142),n(76)),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).timerHandler=void 0,n.reload=function(){clearInterval(n.timerHandler),B.reload()},n.state={seconds:e.seconds},n.timerHandler=setInterval((function(){var e=n.state.seconds;--e<=0?n.reload():n.setState({seconds:e})}),1e3),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return m.createElement(g.a,{header:!1},m.createElement("div",{className:"text-center p-5"},m.createElement("div",{className:"text-info py-5"},"\u7a0b\u5e8f\u9700\u8981\u5347\u7ea7\uff0c",this.state.seconds,"\u79d2\u949f\u4e4b\u540e\u81ea\u52a8\u91cd\u542f\u52a8...",m.createElement("br",null),m.createElement("span",{className:"small text-muted"},this.props.message)),m.createElement("button",{className:"btn btn-danger",onClick:this.reload},"\u7acb\u523b\u5347\u7ea7")))}}]),t}(m.Component),I=function(e){return m.createElement(g.a,{header:"\u5f7b\u5e95\u5347\u7ea7",back:"none"},m.createElement("div",{className:"p-5 m-5 border bg-white rounded"},m.createElement("div",{className:"text-center text-info"},"\u6e05\u9664\u6240\u6709\u7f13\u51b2\u533a\u5185\u5bb9\uff0c\u5e76\u91cd\u65b0\u52a0\u8f7d\u7f51\u9875"),m.createElement("div",{className:"text-center mt-5"},m.createElement("button",{className:"btn btn-primary mr-3",onClick:function(){return e.confirm(!0)}},"\u786e\u8ba4\u5347\u7ea7"),m.createElement("button",{className:"btn btn-outline-primary",onClick:function(){return e.confirm(!1)}},"\u4e0d\u5347\u7ea7"))))};n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return B}));var F,q=new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i").test(navigator.userAgent),V=[],L=1,M=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).stack=void 0,n.htmlTitle=void 0,n.waitCount=0,n.waitTimeHandler=void 0,n.upgradeUq=function(){B.start()},n.isHistoryBack=!1,n.navBack=function(){var e=Date.now();n.isHistoryBack=!0,n.back(!0),n.isHistoryBack=!1,console.log("///\\\\ ".concat(Date.now()-e,"ms backbutton pressed - nav level: ").concat(n.stack.length))},n.back=Object(o.a)(u.a.mark((function e(){var t,r,a,i,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(c.length>0&&void 0!==c[0])||c[0],r=n.stack,0!==(a=r.length)){e.next=5;break}return e.abrupt("return");case 5:if(1!==a){e.next=8;break}return window.self!==window.top&&window.top.postMessage({type:"pop-app"},"*"),e.abrupt("return");case 8:if(i=r[a-1],!0!==t||!i.confirmClose){e.next=17;break}return e.next=12,i.confirmClose();case 12:if(e.t0=e.sent,!0!==e.t0){e.next=15;break}n.pop();case 15:e.next=18;break;case 17:n.pop();case 18:case"end":return e.stop()}}),e)}))),n.clearError=function(){n.setState({fetchError:void 0})},n.stack=[],n.state={stack:n.stack,wait:0,fetchError:void 0},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("popstate",this.navBack),B.set(this),e.next=4,B.start();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startWait",value:function(){var e=this;0===this.waitCount&&(this.setState({wait:1}),this.waitTimeHandler=N.c.setTimeout("NavView.startWait",(function(){e.waitTimeHandler=void 0,e.setState({wait:2})}),1e3)),++this.waitCount,this.setState({fetchError:void 0})}},{key:"endWait",value:function(){var e=this;N.c.setTimeout(void 0,(function(){--e.waitCount,0===e.waitCount&&(void 0!==e.waitTimeHandler&&(N.c.clearTimeout(e.waitTimeHandler),e.waitTimeHandler=void 0),e.setState({wait:0}))}),100)}},{key:"onError",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=t.error)){e.next=14;break}if(!0!==n.unauthorized){e.next=6;break}return e.next=5,B.showLogin(void 0);case 5:return e.abrupt("return");case 6:e.t0=n.type,e.next="unauthorized"===e.t0?9:"sheet-processing"===e.t0?12:14;break;case 9:return e.next=11,B.showLogin(void 0);case 11:return e.abrupt("return");case 12:return B.push(m.createElement(E,{message:"\u5355\u636e\u6b63\u5728\u5904\u7406\u4e2d\u3002\u8bf7\u91cd\u65b0\u64cd\u4f5c\uff01"})),e.abrupt("return");case 14:this.setState({fetchError:t});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(o.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.show(m.createElement(g.a,{header:!1},m.createElement("div",null,"UQ\u5347\u7ea7\u4e86\uff0c\u8bf7\u70b9\u51fb\u6309\u94ae\u5347\u7ea7 ",m.createElement("br",null),m.createElement("small",{className:"text-muted"},t," ver-",n),m.createElement("button",{className:"btn btn-primary",onClick:this.upgradeUq},"\u5347\u7ea7"))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"show",value:function(e,t){return this.clear(),this.push(e,t)}},{key:"push",value:function(e,t){this.removeCeased(),this.stack.length>0&&window.history.pushState("forward",null,null);var n=L++;return this.stack.push({key:n,view:e,ceased:!1,disposer:t}),this.refresh(),n}},{key:"replace",value:function(e,t){var n=void 0,r=this.stack;r.length>0&&(n=r.pop());var a=L++;return this.stack.push({key:a,view:e,ceased:!1,disposer:t}),void 0!==n&&this.dispose(n.disposer),this.refresh(),a}},{key:"ceaseTop",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack.length-1,n=0;n<e&&!(t<0);n++,t--){var r=this.stack[t];r.ceased=!0}}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.stack,n=t.length;if(!(e<=0||n<=1)){n<e&&(e=n);for(var r=0,a=0;a<e&&0!==t.length;a++)this.popAndDispose(),++r;r>=n&&r--,this.refresh(),this.isHistoryBack}}},{key:"popTo",value:function(e){if(void 0!==e&&void 0!==this.stack.find((function(t){return t.key===e})))for(;this.stack.length>0;){var t=this.stack.length;if(this.stack[t-1].key===e)break;this.pop()}}},{key:"topKey",value:function(){var e=this.stack.length;if(0!==e)return this.stack[e-1].key}},{key:"removeCeased",value:function(){for(;;){var e=this.stack.length-1;if(e<0)break;if(!1===this.stack[e].ceased)break;var t=this.stack.pop().disposer;this.dispose(t)}this.refresh()}},{key:"popAndDispose",value:function(){this.removeCeased();var e=this.stack.pop();if(void 0!==e){var t=e.disposer;return this.dispose(t),this.removeCeased(),e}}},{key:"dispose",value:function(e){void 0!==e&&(void 0===this.stack.find((function(t){return t.disposer===e}))&&e())}},{key:"clear",value:function(){for(this.stack.length;this.stack.length>0;)this.popAndDispose()}},{key:"regConfirmClose",value:function(e){var t=this.stack,n=t.length;0!==n&&(t[n-1].confirmClose=e)}},{key:"confirmBox",value:function(e){return window.confirm(e)}},{key:"render",value:function(){var e=this.state,t=e.wait,n=e.fetchError,r=this.state.stack,a=r.length-1,i=null,c=null;switch(t){case 1:i=m.createElement("li",{className:"va-wait va-wait1"});break;case 2:i=m.createElement("li",{className:"va-wait va-wait2"},m.createElement(P.a,null))}n&&(c=m.createElement(x,Object.assign({clearError:this.clearError},n)));var s=!0===B.testing&&m.createElement("span",{className:"cursor-pointer position-absolute",style:{lineHeight:0}},m.createElement(T.a,{className:"text-warning",name:"info-circle"}));return m.createElement("ul",{className:"va"},r.map((function(e,t){var n=e.key,r=e.view;return m.createElement("li",{key:n,style:t<a?{visibility:"hidden"}:void 0},r)})),i,c,s)}},{key:"refresh",value:function(){this.setState({stack:this.stack})}},{key:"level",get:function(){return this.stack.length}}]),t}(m.Component),B=new(r=function(){function e(){var t=this;Object(l.a)(this,e),this.nav=void 0,this.ws=void 0,this.wsHost=void 0,this.local=new N.a,this.navSettings=void 0,Object(i.a)(this,"user",a,this),this.testing=void 0,this.language=void 0,this.culture=void 0,this.resUrl=void 0,this.hashParam=void 0,this.centerHost=void 0,this.arrs=["/test","/test/"],this.windowOnError=function(e,t,n,r,a){console.error("windowOnError"),console.error(a)},this.windowOnUnhandledRejection=function(e){console.error("windowOnUnhandledRejection"),console.error(e.reason)},this.windowOnClick=function(e){console.error("windowOnClick")},this.windowOnMouseMove=function(e){console.log("navigator.userAgent: "+navigator.userAgent),console.log("mouse move (%s, %s)",e.x,e.y)},this.windowOnScroll=function(e){console.log("scroll event")},this.showPrivacyPage=function(){var e=t.getPrivacyContent();e?t.privacyPage(e):B.push(m.createElement(g.a,{header:"\u9690\u79c1\u653f\u7b56"},m.createElement("div",{className:"p-3"},"AppConfig \u4e2d\u6ca1\u6709\u5b9a\u4e49 privacy\u3002\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u5b57\u7b26\u4e32\uff0c\u6216\u8005url\u3002markdown\u683c\u5f0f")))},this.privacyPage=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPrivacy(n);case 2:r=e.sent,a={__html:y()(r)},B.push(m.createElement(g.a,{header:"\u9690\u79c1\u653f\u7b56"},m.createElement("div",{className:"p-3",dangerouslySetInnerHTML:a})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.reload=function(){window.document.location.reload()},this.resetAll=function(){t.push(m.createElement(I,{confirm:function(e){!0===e?(t.showReloadPage("\u5f7b\u5e95\u5347\u7ea7"),localStorage.clear(),console.log("localstoragecleard ",localStorage.length)):t.pop()}}))};var n=S.b.lang,r=S.b.district;this.language=n,this.culture=r,this.testing=!1}return Object(p.a)(e,[{key:"set",value:function(e){this.nav=e}},{key:"registerReceiveHandler",value:function(e){if(void 0!==this.ws)return this.ws.onWsReceiveAny(e)}},{key:"unregisterReceiveHandler",value:function(e){void 0!==this.ws&&void 0!==e&&this.ws.endWsReceive(e)}},{key:"onReceive",value:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.ws){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.ws.receive(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPredefinedUnitName",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=document.getElementById("unit.json").innerHTML,n=JSON.parse(t),e.abrupt("return",n.unit);case 6:return e.prev=6,e.t0=e.catch(0),e.prev=8,r=this.unitJsonPath(),e.next=12,fetch(r,{});case 12:return a=e.sent,e.next=15,a.json();case 15:return i=e.sent,e.abrupt("return",i.unit);case 19:return e.prev=19,e.t1=e.catch(8),this.local.unit.remove(),e.abrupt("return");case 23:case"end":return e.stop()}}),e,this,[[0,6],[8,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadPredefinedUnit",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UNIT)){e.next=3;break}return e.abrupt("return",Number(t));case 3:if(void 0===(r=this.local.unit.get())){e.next=16;break}if(!0===N.c.isDevelopment){e.next=7;break}return e.abrupt("return",r.id);case 7:return e.next=9,this.getPredefinedUnitName();case 9:if(void 0!==(n=e.sent)){e.next=12;break}return e.abrupt("return");case 12:if(r.name!==n){e.next=14;break}return e.abrupt("return",r.id);case 14:e.next=21;break;case 16:return e.next=18,this.getPredefinedUnitName();case 18:if(void 0!==(n=e.sent)){e.next=21;break}return e.abrupt("return");case 21:return e.next=23,j.i.unitFromName(n);case 23:return void 0!==(a=e.sent)&&this.local.unit.set({id:a,name:n}),e.abrupt("return",a);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(e){this.navSettings=e}},{key:"unitJsonPath",value:function(){var e=document.location,t=e.origin,n=e.pathname;n=n.toLowerCase();var r=!0,a=!1,i=void 0;try{for(var c,s=this.arrs[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;if(!0===n.endsWith(u)){n=n.substr(0,n.length-u.length);break}}}catch(o){a=!0,i=o}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!0!==n.endsWith("/")&&!0!==n.endsWith("\\")||(n=n.substr(0,n.length-1)),t+n+"/unit.json"}},{key:"start",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r,a,i,c,s,o,l,p,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,window.onerror=this.windowOnError,window.onunhandledrejection=this.windowOnUnhandledRejection,!0===q&&(document.onselectstart=function(){return!1},document.oncontextmenu=function(){return!1}),this.testing=N.c.testing,e.next=7,j.j.start(this.testing);case 7:if(void 0!==(t=document.location.hash)&&t.length>0&&((n=Object(C.g)())<0&&(n=void 0),this.hashParam=t.substring(1,n)),B.clear(),this.startWait(),r=j.j.url,a=j.j.ws,i=j.j.resHost,this.centerHost=r,this.resUrl=Object(j.o)(i),this.wsHost=a,Object(j.q)(r),void 0!==(c=this.local.guest.get())){e.next=21;break}return e.next=20,j.i.guest();case 20:c=e.sent;case 21:if(B.setGuest(c),s=Object(C.f)(),o=Object(C.j)(s),void 0===s||window===window.parent){e.next=30;break}if(void 0===o){e.next=30;break}return this.ws=w.d,console.log("this.ws = wsBridge in sub frame"),window.self!==window.parent&&window.parent.postMessage({type:"sub-frame-started",hash:o.hash},"*"),e.abrupt("return");case 30:return e.next=32,this.loadPredefinedUnit();case 32:if(l=e.sent,o.predefinedUnit=l,void 0!==(p=this.local.user.get())){e.next=45;break}if(void 0===(h=this.nav.props.notLogined)){e.next=42;break}return e.next=40,h();case 40:e.next=44;break;case 42:return e.next=44,B.showLogin(void 0);case 44:return e.abrupt("return");case 45:return e.next=47,B.logined(p);case 47:e.next=51;break;case 49:e.prev=49,e.t0=e.catch(0);case 51:return e.prev=51,this.endWait(),e.finish(51);case 54:case"end":return e.stop()}}),e,this,[[0,49,51,54]])})));return function(){return e.apply(this,arguments)}}()},{key:"showAppView",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.nav.props.onLogined)){e.next=4;break}return B.push(m.createElement("div",null,"NavView has no prop onLogined")),e.abrupt("return");case 4:return B.clear(),e.next=7,t();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setGuest",value:function(e){this.local.guest.set(e),O(0,e.token)}},{key:"saveLocalUser",value:function(){this.local.user.set(this.user)}},{key:"loadMe",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.r.me();case 2:t=e.sent,this.user.icon=t.icon,this.user.nick=t.nick;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logined",value:function(){var e=Object(o.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(j.l)(),console.log("logined: %s",JSON.stringify(t)),this.user=t,this.saveLocalUser(),O(t.id,t.token),void 0===n){e.next=9;break}n(t),e.next=11;break;case 9:return e.next=11,this.showAppView();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"wsConnect",value:function(){(this.ws=new j.f(this.wsHost,this.user.token)).connect()}},{key:"loginTop",value:function(e){return this.navSettings&&this.navSettings.loginTop||e}},{key:"privacyEntry",value:function(){if(this.getPrivacyContent())return m.createElement("div",{className:"text-center"},m.createElement("button",{className:"btn btn-sm btn-link",onClick:this.showPrivacyPage},m.createElement("small",{className:"text-muted"},"\u9690\u79c1\u653f\u7b56")))}},{key:"getPrivacyContent",value:function(){if(this.navSettings)return this.navSettings.privacy}},{key:"getPrivacy",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Headers({"Content-Type":"text/plain"}),!((r=t.indexOf("://"))>0)){e.next=18;break}if("http"!==(a=t.substring(0,r).toLowerCase())&&"https"!==a){e.next=18;break}return e.prev=5,e.next=8,fetch(t,{method:"GET",headers:n});case 8:return i=e.sent,e.next=11,i.text();case 11:return c=e.sent,e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(5),e.abrupt("return",e.t0.message);case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"showLogin",value:function(){var e=Object(o.a)(u.a.mark((function e(t,r){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(3).then(n.bind(null,164));case 2:a=e.sent,i=m.createElement(a.default,{withBack:r,callback:t}),!0!==r&&(this.nav.clear(),this.pop()),this.nav.push(i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"showLogout",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B.push(m.createElement(g.a,{header:"\u5b89\u5168\u9000\u51fa",back:"close"},m.createElement("div",{className:"m-5 border border-info bg-white rounded p-3 text-center"},m.createElement("div",null,"\u9000\u51fa\u5f53\u524d\u8d26\u53f7\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u5386\u53f2\u6570\u636e\uff0c\u4e0b\u6b21\u767b\u5f55\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\u672c\u8d26\u53f7"),m.createElement("div",{className:"mt-3"},m.createElement("button",{className:"btn btn-danger mr-3",onClick:function(){return n.logout(t)}},"\u5b89\u5168\u9000\u51fa"),m.createElement("button",{className:"btn btn-outline-danger",onClick:this.resetAll},"\u5f7b\u5e95\u5347\u7ea7")))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.g.unit=void 0,this.local.logoutClear(),this.user=void 0,Object(j.l)(),n=this.local.guest.get(),Object(j.p)(0,n&&n.token),this.ws=void 0,void 0!==t){e.next=12;break}return e.next=10,B.start();case 10:e.next=14;break;case 12:return e.next=14,t();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(4).then(n.bind(null,163));case 2:t=e.sent,B.push(m.createElement(t.ChangePasswordPage,null));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"startWait",value:function(){this.nav.startWait()}},{key:"endWait",value:function(){this.nav.endWait()}},{key:"onError",value:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nav.onError(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(o.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nav.showUpgradeUq(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"show",value:function(e,t){this.nav.show(e,t)}},{key:"push",value:function(e,t){this.nav.push(e,t)}},{key:"replace",value:function(e,t){this.nav.replace(e,t)}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.nav.pop(e)}},{key:"topKey",value:function(){return this.nav.topKey()}},{key:"popTo",value:function(e){this.nav.popTo(e)}},{key:"clear",value:function(){this.nav.clear()}},{key:"navBack",value:function(){this.nav.navBack()}},{key:"ceaseTop",value:function(e){this.nav.ceaseTop(e)}},{key:"removeCeased",value:function(){this.nav.removeCeased()}},{key:"back",value:function(){var e=Object(o.a)(u.a.mark((function e(){var t,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(n.length>0&&void 0!==n[0])||n[0],e.next=3,this.nav.back(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"regConfirmClose",value:function(e){this.nav.regConfirmClose(e)}},{key:"confirmBox",value:function(e){return this.nav.confirmBox(e)}},{key:"navToApp",value:function(){var e=Object(o.a)(u.a.mark((function e(t,n,r,a,i){var c=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){var u=!0===c.centerHost.includes("http://localhost:")?"sheet_debug":"sheet",o=void 0===i?Object(C.c)(t,n):Object(C.c)(t,n,u,[r,a,i]);console.log("navToApp: %s",JSON.stringify(o)),B.push(m.createElement("article",{className:"app-container"},m.createElement("span",{id:o.hash,onClick:function(){return c.back()}},m.createElement("i",{className:"fa fa-arrow-left"})),m.createElement("iframe",{src:o.url,title:String(i)})),(function(){e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"navToSite",value:function(e){window.open(e)}},{key:"log",value:function(e){V.push(e)}},{key:"logMark",value:function(){var e=new Date;F=e.getTime(),V.push("log-mark: "+e.toTimeString())}},{key:"logStep",value:function(e){V.push(e+": "+((new Date).getTime()-F))}},{key:"showReloadPage",value:function(e){this.push(m.createElement(A,{message:e,seconds:100})),N.c.setTimeout(void 0,this.reload,1e5)}},{key:"guest",get:function(){var e=this.local.guest;if(void 0===e)return 0;var t=e.get();return void 0===t?0:t.guest}},{key:"oem",get:function(){return this.navSettings&&this.navSettings.oem}},{key:"level",get:function(){return this.nav.level}},{key:"logs",get:function(){return V}}]),e}(),a=Object(c.a)(r.prototype,"user",[v.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),r)},,,function(e,t,n){"use strict";n(38),n(32);var r,a,i=n(63),c=n(1),s=n.n(c),u=n(2),o=n(13),l=n(3),p=n(5),h=n(12),d=(n(19),n(10)),f=(r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(l.a)(this,e),this.maxCount=void 0,this.arr=[],Object(o.a)(this,"dict",a,this),this.maxCount=t}return Object(p.a)(e,[{key:"loadIds",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value;if(null!==s){var u=this.dict.get(s);void 0===u&&(t.push(s),u={id:s},this.dict.set(s,u))}}}catch(o){r=!0,a=o}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}this.loadId(t)}},{key:"get",value:function(e){if(void 0===e||null===e)return null;var t=this.dict.get(e);return void 0===t&&(this.dict.set(e,{id:e}),this.loadId([e]),t=this.dict.get(e)),t}},{key:"setItem",value:function(e,t){void 0===t?(this.dict.set(e,null),this.arr.push({id:e})):(this.dict.set(e,t),this.arr.push(t)),this.arr.length>this.maxCount&&(t=this.arr.shift(),this.dict.delete(t.id))}},{key:"loadId",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,i,c,u,o,l,p,h,d,f,m,v,b=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadIds(t);case 2:if(void 0!==(n=e.sent)){e.next=36;break}r=!0,a=!1,i=void 0,e.prev=7,c=t[Symbol.iterator]();case 9:if(r=(u=c.next()).done){e.next=20;break}if(null!==(o=u.value)){e.next=13;break}return e.abrupt("continue",17);case 13:return e.next=15,this._loadId(o);case 15:l=e.sent,this.setItem(o,l);case 17:r=!0,e.next=9;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),a=!0,i=e.t0;case 26:e.prev=26,e.prev=27,r||null==c.return||c.return();case 29:if(e.prev=29,!a){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(26);case 34:e.next=56;break;case 36:for(p=!0,h=!1,d=void 0,e.prev=39,f=function(){var e=v.value,t=n.find((function(t){return t.id===e}));b.setItem(e,t)},m=t[Symbol.iterator]();!(p=(v=m.next()).done);p=!0)f();e.next=48;break;case 44:e.prev=44,e.t1=e.catch(39),h=!0,d=e.t1;case 48:e.prev=48,e.prev=49,p||null==m.return||m.return();case 51:if(e.prev=51,!h){e.next=54;break}throw d;case 54:return e.finish(51);case 55:return e.finish(48);case 56:case"end":return e.stop()}}),e,this,[[7,22,26,34],[27,,29,33],[39,44,48,56],[49,,51,55]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),a=Object(h.a)(r.prototype,"dict",[d.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),n(52),n(53)),m=function(){function e(){Object(l.a)(this,e),this.user=f.a.localDb.child("user"),this.guest=f.a.localDb.child("guest"),this.unit=f.a.localDb.child("unit")}return Object(p.a)(e,[{key:"logoutClear",value:function(){[this.user,this.unit].forEach((function(e){return e.remove()}))}}]),e}();n.d(t,"b",(function(){return i.a})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f.a}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r,a=n(1),i=n.n(a),c=n(2),s=n(7),u=n(6),o=n(8),l=n(3),p=n(5),h=n(0),d=n(9),f=n(15),m=n.n(f),v=n(20),b=n.n(v),y=n(60),g=function(){function e(t){Object(l.a)(this,e),this.el=void 0,this.el=t}return Object(p.a)(e,[{key:"scrollToTop",value:function(){var e=this;setTimeout((function(){return e.el.scrollTo(0,0)}),20)}},{key:"scrollToBottom",value:function(){var e=this;setTimeout((function(){return e.el.scrollTo(0,e.el.scrollTop+e.el.offsetHeight)}),20)}}]),e}(),k=100,w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).bottomTime=0,n.topTime=0,n.onScroll=function(){var e=Object(c.a)(i.a.mark((function e(t){var r,a,c,s,u,o,l,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props,a=r.onScroll,c=r.onScrollTop,s=r.onScrollBottom,a&&n.props.onScroll(t),u=t.target,o=new g(u),u.scrollTop<30&&void 0!==c&&(l=(new Date).getTime())-n.topTime>k&&(n.topTime=l,c(o)),u.scrollTop+u.offsetHeight>u.scrollHeight-30&&void 0!==s&&(p=(new Date).getTime())-n.bottomTime>k&&(n.bottomTime=p,s(o));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(o.a)(t,e),Object(p.a)(t,[{key:"eachChild",value:function(e,t){var n=this,r=e.props;if(void 0!==r){var a=r.children;void 0!==a&&h.Children.forEach(a,(function(e,r){var a=e._$scroll;a&&a(t),console.log(e.toString()),n.eachChild(e,t)}))}}},{key:"render",value:function(){return h.createElement("main",{className:this.props.className,onScroll:this.onScroll},this.props.children)}}]),t}(h.Component),O=Object(d.a)(r=function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).tabs=void 0;var r,a=e.tabs;if(void 0===a||0===a.length)return Object(s.a)(n);n.tabs=a;var i=[],c=!0,o=!1,p=void 0;try{for(var h,d=a[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var f=h.value,m=b.a.clone(f);void 0===r&&!0===m.isSelected?r=m:m.isSelected=!1,m.isMounted=!1,i.push(m)}}catch(v){o=!0,p=v}finally{try{c||null==d.return||d.return()}finally{if(o)throw p}}return n.state={cur:r,tabs:i},n}return Object(o.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.tabs){e.next=2;break}return e.abrupt("return");case 2:if(void 0!==(t=this.state.tabs.find((function(e){return!0===e.isSelected})))){e.next=7;break}if(void 0!==(t=this.state.tabs[0])){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,t.load;case 9:if(e.t0=e.sent,!e.t0){e.next=13;break}return e.next=13,t.load();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onTabClick",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,s,u,o,l,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t.isSelected){e.next=2;break}return e.abrupt("return");case 2:for(r=this.state.tabs,a=!0,c=!1,s=void 0,e.prev=6,u=r[Symbol.iterator]();!(a=(o=u.next()).done);a=!0)(l=o.value)===t?(l.isSelected=!0,n=l):l.isSelected=!1;e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),c=!0,s=e.t0;case 14:e.prev=14,e.prev=15,a||null==u.return||u.return();case 17:if(e.prev=17,!c){e.next=20;break}throw s;case 20:return e.finish(17);case 21:return e.finish(14);case 22:if(!0===n.isMounted){e.next=27;break}if(void 0===(p=n.load)){e.next=27;break}return e.next=27,p();case 27:this.setState({cur:n,tabs:r});case 28:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTouchStart",value:function(e){}},{key:"renderTabs",value:function(e){var t=this,n=this.props,r=n.header,a=n.back,i=n.right,c=n.keepHeader,s=n.headerClassName,u=n.tabPosition,o=this.state.cur,l=h.createElement("div",null,this.state.tabs.map((function(e,n){var r,a,i,c=e.icon,s=e.isSelected,u=e.title,o=e.redDot,l=e.className;if(void 0!==c&&(r=h.createElement("img",{src:c,alt:"tab icon"})),void 0!==o){var p=o.get();p<0?(i=m()("red-dot",l),a=h.createElement("u",null)):p>0&&(i=m()("red-dot","num",l),a=h.createElement("u",null,p))}return h.createElement("div",{key:n,className:m()("va-tab",{cur:s}),onClick:function(){return t.onTabClick(e)}},r,h.createElement("div",{className:i},u,a))}))),p=!1!==r&&h.createElement(y.a,{back:a,center:!0===c?r:o&&(o.header||o.title),right:i,className:s});return h.createElement("article",{className:"page-container"},p,"top"===u&&l,h.createElement("section",{className:"position-relative"},this.props.sideBar,this.state.tabs.map((function(e,t){var n=e.isSelected,r=e.isMounted,a=e.content;if(!0===n||!0===r)return e.isMounted=!0,h.createElement(w,{key:t,className:m()({invisible:!1===n}),onScroll:e.onScroll,onScrollTop:e.onScrollTop,onScrollBottom:e.onScrollBottom},"function"===typeof a?a():a)}))),"top"!==u&&l,e)}},{key:"renderSingle",value:function(e){var t=this.props,n=t.back,r=t.header,a=t.right,i=t.onScroll,c=t.onScrollTop,s=t.onScrollBottom,u=t.children,o=t.headerClassName,l=!1!==r&&h.createElement(y.a,{back:n,center:r,right:a,logout:this.props.logout,className:o});return h.createElement("article",{className:"page-container",onTouchStart:this.onTouchStart},l,h.createElement("section",{className:"position-relative"},this.props.sideBar,h.createElement(w,{onScroll:i,onScrollTop:c,onScrollBottom:s},u)),e)}},{key:"render",value:function(){var e=this.props.footer,t=void 0!==e&&h.createElement("footer",null,e);return void 0!==this.tabs?this.renderTabs(t):this.renderSingle(t)}}]),t}(h.Component))||r},,function(e,t,n){"use strict";function r(e,t){switch(e.substr(0,1)){default:return t;case"$":case"_":return}}function a(e){return JSON.stringify(e,r," ")}var i=n(0),c=function(e,t){return i.createElement(i.Fragment,null,"content: ",JSON.stringify(e))};n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}))},function(e,t,n){"use strict";n.d(t,"i",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"h",(function(){return g})),n.d(t,"j",(function(){return N})),n.d(t,"g",(function(){return S})),n.d(t,"f",(function(){return P})),n.d(t,"c",(function(){return T})),n.d(t,"e",(function(){return F})),n.d(t,"b",(function(){return V})),n.d(t,"d",(function(){return M}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(20),o=n.n(u),l=n(11),p=n(32),h=n(29),d=n(34),f=n(39),m={};function v(){for(var e in m)m[e]=void 0}var b={},y=new(function(){function e(){Object(c.a)(this,e),this.hash=void 0,this._unit=void 0,this.page=void 0,this.param=void 0}return Object(s.a)(e,[{key:"unit",get:function(){return this._unit},set:function(e){this._unit=e}}]),e}());function g(){return window.self!==window.parent}function k(e){var t=e.data,n=e.source;Object(d.c)(n),function(e){var t=document.getElementById(e);void 0!==t&&(t.hidden=!0)}(t.hash);var r=o.a.clone(l.nav.user);r.type="init-sub-win",n.postMessage(r,"*")}function w(e){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("initSubWin: set nav.user",t),n=l.nav.user=t,Object(h.i)(n.id,n.token),e.next=5,l.nav.showAppView();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,s,u,o,l,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=b[t])){e.next=3;break}return e.abrupt("return",{name:n,db:void 0,url:void 0,token:void 0});case 3:return i=r.unit,c=r.predefinedUnit,(i=i||c)||console.error("no unit defined in unit.json or not logined in",i),s=n.split("/"),u={unit:i,uqOwner:s[0],uqName:s[1]},console.log("uqTokenApi.uq onReceiveAppApiMessage",u),e.next=11,h.k.uq(u);case 11:return o=e.sent,l=o.db,p=o.url,d=o.token,e.abrupt("return",{name:n,db:l,url:p,token:d});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s,u,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.apiName,r=t.db,i=t.url,c=t.urlTest,s=t.token,void 0!==(u=I[n])){e.next=4;break}throw new Error("error app api return");case 4:o=f.a.getUrlOrTest(r,i,c),console.log("onAppApiReturn(message:any): url="+i+", real="+o),u.resolve({name:n,db:r,url:o,token:s});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){if(e){var t=e.split("-"),n=t.length;if(n>0){var r=1;y.hash=t[r++],n>0&&(y.unit=Number(t[r++])),n>1&&(y.page=t[r++]),n>2&&(y.param=t.slice(r++))}}return y}function S(){var e=document.location.hash;if(void 0!==e&&e.length>0){var t=e.lastIndexOf("#tv-");return t<0&&(t=e.lastIndexOf("#tvdebug-")),t}return-1}function P(){var e=S();if(!(e<0))return document.location.hash.substring(e)}function T(e,t,n,r){for(var a;;){if(a=Object(p.a)(),void 0===b[a]){b[a]={hash:a,unit:t};break}}if(e+="#tv-"+a+"-"+t,void 0!==n&&(e+="-"+n,void 0!==r))for(var i=0;i<r.length;i++)e+="-"+r[i];return{url:e,hash:a}}function A(){var e=y.unit,t=y.predefinedUnit,n=e||t;if(void 0===n)throw new Error("no unit defined in unit.json or not logined in");return n}window.addEventListener("message",function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,e.t0=n.type,e.next="sub-frame-started"===e.t0?4:"ws"===e.t0?6:"init-sub-win"===e.t0?9:"pop-app"===e.t0?12:"center-api"===e.t0?15:"center-api-return"===e.t0?18:"app-api"===e.t0?20:"app-api-return"===e.t0?25:30;break;case 4:return k(t),e.abrupt("break",32);case 6:return e.next=8,l.nav.onReceive(n.msg);case 8:return e.abrupt("break",32);case 9:return e.next=11,w(n);case 11:return e.abrupt("break",32);case 12:return this.console.log("///\\\\\\ pop-app"),l.nav.navBack(),e.abrupt("break",32);case 15:return e.next=17,R(t.source,n);case 17:return e.abrupt("break",32);case 18:return U(n),e.abrupt("break",32);case 20:return e.next=22,j(n.hash,n.apiName);case 22:return r=e.sent,t.source.postMessage({type:"app-api-return",apiName:n.apiName,db:r.db,url:r.url,token:r.token},"*"),e.abrupt("break",32);case 25:return console.log("app-api-return: %s",JSON.stringify(n)),console.log("await onAppApiReturn(message);"),e.next=29,E(n);case 29:return e.abrupt("break",32);case 30:return this.console.log("message: %s",JSON.stringify(n)),e.abrupt("break",32);case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}());var I={};function F(e,t,n){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(a.a.mark((function e(t,n,r){var c,s,u,o,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g()){e.next=12;break}return c=A(),e.next=4,h.k.uq({unit:c,uqOwner:n,uqName:r});case 4:return void 0===(s=e.sent).token&&(s.token=h.f),u=s.db,o=s.url,l=s.urlTest,p=f.a.getUrlOrTest(u,o,l),console.log("realUrl: %s",p),s.url=p,m[t]=s,e.abrupt("return",s);case 12:if(console.log("**** before buildAppUq ****",y),void 0===I[t]){e.next=16;break}return e.abrupt("return");case 16:return e.abrupt("return",new Promise((function(e,n){I[t]={resolve:function(){var n=Object(i.a)(a.a.mark((function n(r){var i,c,s,u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r;case 2:i=n.sent,c=i.db,s=i.url,u=i.token,m[t]={name:t,db:c,url:s,token:u},I[t]=void 0,console.log("**** after buildAppUq ****",y),e();case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),reject:n},(window.opener||window.parent).postMessage({type:"app-api",apiName:t,hash:y.hash},"*")})));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return m[e]}var L={};function M(e,t,n){return B.apply(this,arguments)}function B(){return(B=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("bridgeCenterApi: url=%s, method=%s",t,n),e.next=3,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(i,c){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(p.a)(),void 0!==L[s]){e.next=5;break}return L[s]={id:s,resolve:i,reject:c},e.abrupt("break",7);case 5:e.next=0;break;case 7:(window.opener||window.parent).postMessage({type:"center-api",callId:s,url:t,method:n,body:r},"*");case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return D.apply(this,arguments)}function D(){return(D=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.callId,i=n.url,c=n.method,s=n.body,e.next=3,h.e.directCall(i,c,s);case 3:u=e.sent,t.postMessage({type:"center-api-return",callId:r,result:u},"*");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){var t=e.callId,n=e.result,r=L[t];void 0!==r&&(L[t]=void 0,r.resolve(n))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=function(e){function t(e,n){var r,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(c.a)(this,t),(r=Object(u.a)(this,Object(o.a)(t).call(this,n,a))).tries=void 0,r._entity=void 0,r.tries=0,r._entity=e,r}return Object(l.a)(t,e),Object(s.a)(t,[{key:"request",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.loadSchema();case 2:return e.next=4,this.innerRequest();case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"innerCall",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.uqApi.xcall(this);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"innerRequest",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.innerCall();case 2:if(t=e.sent,n=t.$uq,r=t.$modify,i=t.res,this.entity.uq.pullModify(r),void 0!==n){e.next=8;break}return c=this.xresult(i),e.abrupt("return",c);case 8:return e.next=10,this.retry(n);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xresult",value:function(e){return e}},{key:"retry",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(++this.tries,!(this.tries>5)){e.next=3;break}throw new Error("can not get right uq response schema, 5 tries");case 3:return this.rebuildSchema(t),e.next=6,this.innerRequest();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rebuildSchema",value:function(e){var t=e.uq,n=e.entity;void 0!==t&&this.entity.uq.buildEntities(t),void 0!==n&&this.entity.setSchema(n)}},{key:"entity",get:function(){return this._entity}},{key:"headers",get:function(){var e=this.entity,t=e.ver,n=e.uq.uqVersion;return{uq:"".concat(n),en:"".concat(t)}}}]),t}(n(17).a),h=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"entity",get:function(){return this._entity}}]),t}(p),d=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"xresult",value:function(e){return this.entity.unpackReturns(e)}},{key:"buildParams",value:function(){return this.entity.buildParams(this.params)}},{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"query/".concat(this.entity.name)}}]),t}(p),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"buildParams",value:function(){var e,t=this.params,n=t.pageStart,r=t.pageSize,a=t.params;return(e=void 0===a?{key:""}:this.entity.buildParams(a)).$pageStart=n,e.$pageSize=r,e}},{key:"xresult",value:function(e){return this.entity.unpackReturns(e).$page}},{key:"params",get:function(){return this._params}},{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"query-page/".concat(this.entity.name)}}]),t}(p)},function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var r=n(3),a=n(5),i=n(0),c=n(9),s=n(25),u=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"render",value:function(e){return void 0===this.view?i.createElement("div",null,"??? viewModel \u5fc5\u987b\u5b9a\u4e49 view ???"):i.createElement(this.view,{vm:this,className:e})}}]),e}(),o=Object(c.a)(s.a),l=function(e){return i.createElement("div",{className:"px-3 py-2"},Object(s.b)(e))}},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(20),h=n.n(p),d=n(26),f=n(18),m=n(21),v=["POST","PUT"],b=function(){function e(t,n,r){var s=this;Object(c.a)(this,e),this.timeout=void 0,this.ui=void 0,this.hostUrl=void 0,this.apiToken=void 0,this.startWait=function(e){!0===e&&void 0!==s.ui&&s.ui.startWait()},this.endWait=function(e,t){void 0!==s.ui&&s.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===s.ui){e.next=3;break}return e.next=3,s.ui.showError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.hostUrl=t,this.apiToken=n,this.ui=r,this.timeout=!0===m.c.isDevelopment?5e5:5e4}return Object(s.a)(e,[{key:"used",value:function(){this.post("",{})}},{key:"xcall",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,s,u,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.buildOptions(),i=n.headers,c=n.path,s=n.method,void 0!==i)for(o in u=r.headers,i)u.append(o,encodeURI(i[o]));return r.method=s,l=n.buildParams(),v.indexOf(s)>=0&&void 0!==l&&(r.body=JSON.stringify(l)),e.next=8,this.innerFetch(t+c,r,n.waiting);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"innerFetchResult",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.innerFetch(t,n,r);case 2:return i=e.sent,e.abrupt("return",i.res);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s,u,o,l,p,h,d,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2?f[2]:void 0,!n){e.next=35;break}if(!((i=Object.keys(n)).length>0)){e.next=35;break}c="?",s=!0,u=!1,o=void 0,e.prev=9,l=i[Symbol.iterator]();case 11:if(s=(p=l.next()).done){e.next=21;break}if(h=p.value,void 0!==n[h]){e.next=16;break}return e.abrupt("continue",18);case 16:t+=c+h+"="+n[h],c="&";case 18:s=!0,e.next=11;break;case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(9),u=!0,o=e.t0;case 27:e.prev=27,e.prev=28,s||null==l.return||l.return();case 30:if(e.prev=30,!u){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(27);case 35:return(d=this.buildOptions()).method="GET",e.next=39,this.innerFetchResult(t,d,r);case 39:return e.abrupt("return",e.sent);case 40:case"end":return e.stop()}}),e,this,[[9,23,27,35],[28,,30,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=this.buildOptions()).method="POST",i.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,i,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=this.buildOptions()).method="PUT",i.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,i,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=this.buildOptions()).method="DELETE",i.body=JSON.stringify(n),e.next=5,this.innerFetchResult(t,i,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){function t(t,n,r,a,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,c,s){var u,o,l,p,h,d,v,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(e,t){switch(typeof e){case"string":void 0!==t&&(e+=" "+t);break;case"object":e={ex:t,message:e.message}}return{channel:u,url:o,options:n,resolve:c,reject:s,error:e}},u=this,this.startWait(r),o=t,e.prev=4,console.log("%s-%s %s",n.method,o,n.body||""),p=Date.now(),h=m.c.setTimeout(void 0,(function(){u.endWait(t+" timeout endWait: "+(Date.now()-p)+"ms",s)}),this.timeout),e.next=10,fetch(encodeURI(o),n);case 10:if(!1!==(d=e.sent).ok){e.next=17;break}throw m.c.clearTimeout(h),console.log("ok false endWait"),u.endWait(),console.log("call error %s",d.statusText),d.statusText;case 17:if(!((v=d.headers.get("content-type"))&&v.indexOf("json")>=0)){e.next=22;break}return e.abrupt("return",d.json().then(function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.c.clearTimeout(h),u.endWait(),!0!==t.ok){e.next=5;break}return"object"!==typeof t||Array.isArray(t),e.abrupt("return",c(t));case 5:if(void 0!==(n=t.error)){e.next=11;break}return e.next=9,u.showError(l("not valid tonva json"));case 9:e.next=14;break;case 11:return e.next=13,u.showError(l(n,"retJson.error"));case 13:s(n);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.showError(l(t,"catch res.json()"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:return e.next=24,d.text();case 24:b=e.sent,m.c.clearTimeout(h),console.log("text endWait"),u.endWait(),c(b);case 29:e.next=40;break;case 31:if(e.prev=31,e.t0=e.catch(4),this.endWait(t,s),"string"!==typeof e.t0){e.next=39;break}if(!0!==e.t0.toLowerCase().startsWith("unauthorized")){e.next=39;break}return f.b.logout(),e.abrupt("return");case 39:console.error("fecth error (no nav.showError): "+t);case 40:case 41:case"end":return e.stop()}}),e,this,[[4,31]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}())},{key:"callFetch",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var c,s=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=this.buildOptions()).method=n,c.body=r,e.next=5,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch(t,c,!0,n,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"buildOptions",value:function(){return{headers:this.buildHeaders(),method:void 0,body:void 0}}},{key:"buildHeaders",value:function(){var e=f.b.language,t=f.b.culture,n=new Headers;n.append("Content-Type","application/json;charset=UTF-8");var r=e;return t&&(r+="-"+t),n.append("Accept-Language",r),this.apiToken&&n.append("Authorization",this.apiToken),n}}]),e}(),y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"innerFetch",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var c,s=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=this.hostUrl+t,void 0!==this.apiToken||!Object(d.h)()){e.next=5;break}return e.next=4,Object(d.d)(c,n.method,n.body);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(t,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch(c,n,r,t,i);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(b),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"innerFetch",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var c,s=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=this.hostUrl+t,e.next=3,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(t,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.fetch(c,n,r,t,i);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(b),k=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"startWait",value:function(){f.b.startWait()}},{key:"endWait",value:function(){f.b.endWait()}},{key:"showError",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.b.endWait(),e.next=3,f.b.onError(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"showUpgradeUq",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.showUpgradeUq(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),w=n(59),O=n(39),j=n(38);n.d(t,"h",(function(){return C})),n.d(t,"d",(function(){return N})),n.d(t,"c",(function(){return T})),n.d(t,"j",(function(){return A})),n.d(t,"f",(function(){return q})),n.d(t,"i",(function(){return L})),n.d(t,"a",(function(){return M})),n.d(t,"k",(function(){return R})),n.d(t,"e",(function(){return D})),n.d(t,"b",(function(){return U})),n.d(t,"g",(function(){return z})),n.d(t,"l",(function(){return _}));var x={},E={};function C(){x={},E={},S={},Object(d.i)()}var N=function(e){function t(e,n,r,a,i){var s;return Object(c.a)(this,t),(s=Object(u.a)(this,Object(o.a)(t).call(this,e,i))).access=void 0,s.uqOwner=void 0,s.uqName=void 0,s.uq=void 0,r&&(s.uqOwner=n,s.uqName=r,s.uq=n+"/"+r),s.access=a,s.showWaiting=i,s}return Object(l.a)(t,e),Object(s.a)(t,[{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)(this.uq,this.uqOwner,this.uqName);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHttpChannel",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this.showWaiting||void 0===this.showWaiting?(t=x,n=new k):t=E,void 0===(r=t[this.uq])){e.next=4;break}return e.abrupt("return",r);case 4:if(i=Object(d.b)(this.uq)){e.next=9;break}return e.next=8,this.init();case 8:i=Object(d.b)(this.uq);case 9:return s=(c=i).url,u=c.token,this.token=u,r=new g(s,u,n),e.abrupt("return",t[this.uq]=r);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAccess",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0===this.access?"":this.access.join("|"),e.next=3,this.get("access",{acc:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"schema",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("schema/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queueModify",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("queue-modify",{start:t,page:n,entities:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(w.a),S={};var P,T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(o.a)(t).call(this,"tv/",void 0,void 0,void 0,!0))).unitId=void 0,n.unitId=e,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"getHttpChannel",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=S[this.unitId])){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,this.buildChannel();case 5:return e.abrupt("return",S[this.unitId]=e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildChannel",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c,s,u,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new k,n=new U("tv/",void 0),e.next=4,n.unitxUq(this.unitId);case 4:return r=e.sent,i=r.token,c=r.db,s=r.url,u=r.urlTest,o=O.a.getUrlOrTest(c,s,u),this.token=i,e.abrupt("return",new g(o,i,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(N);function A(e){console.log("setCenterUrl %s",e),P=e,q=void 0,F=void 0,I=void 0}var I,F,q=void 0,V=0;function L(e,t){V=e,q=t,console.log("setCenterToken %s",t),F=void 0,I=void 0}var M=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"getHttpChannel",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0===this.showWaiting||void 0===this.showWaiting?void 0!==I?I:I=new y(P,q,new k):void 0!==F?F:F=new y(P,q));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(w.a),B="uqTokens",R=new(function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).localMap=m.c.localDb.map(B),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"uq",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s,u,o,l,p,d,f,m,v,b,y,g,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uqOwner,r=t.uqName,i=n+"/"+r,c=this.localMap.child(i),e.prev=3,void 0!==(s=c.get())&&(o=(u=s).unit,l=u.user,o===t.unit&&l===V||(c.remove(),s=void 0)),p=Math.floor(Date.now()/1e3),void 0===s){e.next=11;break}if(f=(d=s).tick,!(void 0!==(m=d.value)&&p-f<86400)){e.next=11;break}return e.abrupt("return",h.a.clone(m));case 11:return(v=h.a.clone(t)).testing=O.a.testing,e.next=15,this.get("app-uq",v);case 15:if(void 0!==(b=e.sent)){e.next=20;break}throw y=t.unit,g=t.uqOwner,k=t.uqName,"center get app-uq(unit=".concat(y,", '").concat(g,"/").concat(k,"') - not exists or no unit-service");case 20:return s={unit:t.unit,user:V,tick:p,value:b},c.set(s),e.abrupt("return",h.a.clone(b));case 25:throw e.prev=25,e.t0=e.catch(3),c.remove(),e.t0;case 29:case"end":return e.stop()}}),e,this,[[3,25]])})));return function(t){return e.apply(this,arguments)}}()}]),t}(M))("tv/tie/",void 0),D=new(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"directCall",value:function(e,t,n){return this.call(e,t,n)}}]),t}(M))("",void 0),U=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"uqs",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/app-uqs",{appOwner:t,appName:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"uqsPure",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/app-uqs",{appOwner:t,appName:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unitxUq",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/unitx-uq",{unit:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePassword",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("tie/change-password",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(M);function z(e,t){return H.apply(this,arguments)}function H(){return(H=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new U("tv/",void 0),e.next=3,r.uqs(t,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=new(function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"login",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/login",t);case 2:n=e.sent,e.t0=typeof n,e.next="string"===e.t0?7:"object"===e.t0?8:6;break;case 6:return e.abrupt("return");case 7:return e.abrupt("return",Object(j.b)(n));case 8:return r=n.token,i=Object(j.b)(r),c=n.nick,s=n.icon,c&&(i.nick=c),s&&(i.icon=s),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendVerify",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/set-verify",{account:t,type:n,oem:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"checkVerify",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/check-verify",{account:t,verify:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isExists",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/is-exists",{account:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("user/reset-password",{account:t,password:n,verify:r,type:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"userSetProp",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("tie/user-set-prop",{prop:t,value:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"me",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/me");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"user",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user",{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(M))("tv/",void 0)},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(5),s=n(7),u=n(6),o=n(8),l=n(3),p=n(0),h=n(15),d=n.n(h),f=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this))).controller=void 0,n.icon=void 0,n.label=void 0,n.onClick=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.start();case 2:case"end":return e.stop()}}),e)}))),n.controller=e,n.icon=e.icon,n.label=e.label,n}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(e){return p.createElement("div",{className:d()("px-3","py-2","align-items-center","cursor-pointer",e),onClick:this.onClick},this.icon," \xa0 ",this.label)}}]),t}((function e(){Object(l.a)(this,e),this.onClick=void 0}));n.d(t,"a",(function(){return f}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=function(){function e(t,n,r){Object(c.a)(this,e),this.jName=void 0,this.schema=void 0,this.ver=0,this.sys=void 0,this.uq=void 0,this.name=void 0,this.typeId=void 0,this.cache=void 0,this.uqApi=void 0,this.fields=void 0,this.arrFields=void 0,this.returns=void 0,this.face=void 0,this.fieldMaps={},this.uq=t,this.name=n,this.typeId=r,this.sys=this.name.indexOf("$")>=0,this.cache=this.uq.localMap.item(this.name),this.uqApi=this.uq.uqApi}return Object(s.a)(e,[{key:"sName",get:function(){return this.jName||this.name}}]),Object(s.a)(e,[{key:"fieldMap",value:function(e){void 0===e&&(e="$");var t=this.fieldMaps[e];if(void 0===t){var n;if("$"===e)n=this.fields;else if(void 0!==this.arrFields){var r=this.arrFields.find((function(t){return t.name===e}));void 0!==r&&(n=r.fields)}else if(void 0!==this.returns){var a=this.returns.find((function(t){return t.name===e}));void 0!==a&&(n=a.fields)}if(void 0===n)return{};t={};var i=!0,c=!1,s=void 0;try{for(var u,o=n[Symbol.iterator]();!(i=(u=o.next()).done);i=!0){var l=u.value;t[l.name]=l}}catch(p){c=!0,s=p}finally{try{i||null==o.return||o.return()}finally{if(c)throw s}}this.fieldMaps[e]=t}return t}},{key:"loadSchema",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.schema){e.next=2;break}return e.abrupt("return");case 2:if(t=this.cache.get()){e.next=7;break}return e.next=6,this.uq.loadEntitySchema(this.name);case 6:t=e.sent;case 7:this.setSchema(t),this.buildFieldsTuid();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearSchema",value:function(){this.schema=void 0}},{key:"setSchema",value:function(e){if(void 0!==e){var t=e.name,n=e.version;this.ver=n||0,t!==this.name&&(this.jName=t),this.cache.set(e),this.schema=e}}},{key:"buildFieldsTuid",value:function(){var e=this.schema,t=e.fields,n=e.arrs,r=e.returns;this.uq.buildFieldTuid(this.fields=t),this.uq.buildArrFieldsTuid(this.arrFields=n,t),this.uq.buildArrFieldsTuid(this.returns=r,t)}},{key:"schemaStringify",value:function(){return JSON.stringify(this.schema,(function(e,t){if("_tuid"!==e)return t}),4)}},{key:"tuidFromName",value:function(e,t){if(void 0!==this.schema){var n=this.schema,r=n.fields,a=n.arrs,i=this.uq,c=e.toLowerCase();if(void 0===t)return o(c,r);if(void 0!==a){var s=t.toLowerCase(),u=a.find((function(e){return e.name===s}));if(void 0!==u)return o(c,u.fields)}}function o(e,t){if(void 0!==t){var n=t.find((function(t){return t.name===e}));if(void 0!==n)return i.getTuid(n.tuid)}}}},{key:"buildParams",value:function(e){var t={},n=this.fields;void 0!==n&&this.buildFieldsParams(t,n,e);var r=this.arrFields;if(void 0!==r){var a=!0,i=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var o=s.value,l=o.name,p=o.fields;if(void 0!==e[l]){var h=[];t[l]=h;var d=!0,f=!1,m=void 0;try{for(var v,b=e[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var y=v.value,g={};this.buildFieldsParams(g,p,y),h.push(g)}}catch(k){f=!0,m=k}finally{try{d||null==b.return||b.return()}finally{if(f)throw m}}}}}catch(k){i=!0,c=k}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}}return t}},{key:"buildFieldsParams",value:function(e,t,n){var r=!0,a=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value,o=u.name,l=u.type,p=n[o],h=void 0;if("datetime"===l)h=this.buildDateTimeParam(p);else switch(typeof p){default:h=p;break;case"object":var d=u._tuid;h=void 0===d?p.id:d.getIdFromObj(p)}e[o]=h}}catch(f){a=!0,i=f}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}},{key:"buildDateTimeParam",value:function(e){var t;switch(typeof e){default:throw new Error("escape datetime field in pack data error: value="+e);case"undefined":return;case"object":t=e;break;case"string":case"number":t=new Date(e)}return Math.floor(t.getTime()/1e3)}},{key:"buildDateParam",value:function(e){var t;switch(typeof e){default:throw new Error("escape datetime field in pack data error: value="+e);case"undefined":return;case"string":return e;case"object":t=e;break;case"number":t=new Date(e)}var n=t.toISOString(),r=n.indexOf("T");return r>0?n.substr(0,r):n}},{key:"pack",value:function(e){var t=[],n=this.fields;void 0!==n&&this.packRow(t,n,e);var r=this.arrFields;if(void 0!==r){var a=!0,i=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var o=s.value;this.packArr(t,o.fields,e[o.name])}}catch(l){i=!0,c=l}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}}return t.join("")}},{key:"escape",value:function(e,t){var n=e[t.name];switch(t.type){case"datetime":return this.buildDateTimeParam(n);default:switch(typeof n){default:return n;case"object":var r=t._tuid;return void 0===r?n.id:r.getIdFromObj(n);case"string":for(var a=n.length,i="",c=0,s=0;s<a;s++){switch(n.charCodeAt(s)){case 9:i+=n.substring(c,s)+"\\t",c=s+1;break;case 10:i+=n.substring(c,s)+"\\n",c=s+1}}return i+n.substring(c);case"undefined":return""}}}},{key:"packRow",value:function(e,t,n){var r=t.length;if(0!==r){var a="";a+=this.escape(n,t[0]);for(var i=1;i<r;i++){var c=t[i];a+="\t"+this.escape(n,c)}e.push(a+"\n")}}},{key:"packArr",value:function(e,t,n){if(void 0!==n){var r=!0,a=!1,i=void 0;try{for(var c,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;this.packRow(e,t,u)}}catch(o){a=!0,i=o}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}e.push("\n")}},{key:"cacheFieldsInValue",value:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value,u=s.name,o=s._tuid;if(void 0!==o){var l=e[u];e[u]=o.boxId(l)}}}catch(p){r=!0,a=p}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}}},{key:"unpackTuidIdsOfFields",value:function(e,t){if(void 0===t)return e;var n=[],r=!0,a=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;if(u)for(var o=u.length,l=0;l<o;){if(10===u.charCodeAt(l)){++l;break}var p={};l=this.unpackRow(p,t,u,l),n.push(p)}}}catch(h){a=!0,i=h}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}},{key:"unpackSheet",value:function(e){var t={},n=this.fields,r=0;void 0!==n&&(r=this.unpackRow(t,n,e,r));var a=this.arrFields;if(void 0!==a){var i=!0,c=!1,s=void 0;try{for(var u,o=a[Symbol.iterator]();!(i=(u=o.next()).done);i=!0){var l=u.value;r=this.unpackArr(t,l,e,r)}}catch(p){c=!0,s=p}finally{try{i||null==o.return||o.return()}finally{if(c)throw s}}}return t}},{key:"unpackReturns",value:function(e){var t={},n=0,r=this.returns;if(void 0!==r){var a=!0,i=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var o=s.value;n=this.unpackArr(t,o,e,n)}}catch(l){i=!0,c=l}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}}return t}},{key:"unpackRow",value:function(e,t,n,r){for(var a=0,i=0,c=r,s=0,u=n.length,o=t.length;r<u;r++)if(a=i,9===(i=n.charCodeAt(r))){var l=t[s],p=l.name;if(8!==a){if(r>c){var h=n.substring(c,r);e[p]=this.to(e,h,l)}}else e[p]=null;if(c=r+1,++s>=o)return(r=n.indexOf("\n",c))>=0?++r:r=u,r}else if(10===i){var d=t[s],f=d.name;if(8!==a){if(r>c){var m=n.substring(c,r);e[f]=this.to(e,m,d)}}else e[f]=null;return++s,++r}var v=t[s],b=v.name;if(8!==a){var y=n.substring(c);e[b]=this.to(e,y,v)}return u}},{key:"to",value:function(e,t,n){switch(n.type){default:return t;case"datetime":case"time":var r=Number(t);return!0===isNaN(r)?new Date(t):new Date(1e3*r);case"date":var a=t.split("-");return new Date(Number(a[0]),Number(a[1])-1,Number(a[2]));case"tinyint":case"smallint":case"int":case"bigint":case"dec":return Number(t);case"id":var i=Number(t),c=n._tuid;return void 0===c?i:c.boxId(i)}}},{key:"unpackArr",value:function(e,t,n,r){for(var a=[],i=n.length,c=t.name,s=t.fields;r<i;){if(10===n.charCodeAt(r)){++r;break}var u={};a.push(u),r=this.unpackRow(u,s,n,r)}return e[c]=a,r}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=8;function i(){for(var e=r.length,t="",n=0;n<a;n++)t+=r.charAt(Math.floor(Math.random()*e));return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n(15),i=n.n(a),c=n(18);function s(e){var t=e.className,n=e.style,a=e.src,s=e.altImage;return a?(!0===a.startsWith(":")&&(a=c.b.resUrl+a.substr(1)),r.createElement("img",{src:a,className:t,alt:"img",style:n,onError:function(e){e.currentTarget.src=s||"https://tv.jkchemical.com/imgs/0001.png"}})):r.createElement("div",{className:i()(t,"image-none"),style:n},r.createElement("i",{className:"fa fa-file-o"}))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return b}));var r,a=n(7),i=n(6),c=n(8),s=n(1),u=n.n(s),o=n(2),l=n(3),p=n(5);function h(e){r=e}function d(e){window.top.postMessage({type:"ws",msg:e},"*")}var f=function(){function e(){Object(l.a)(this,e),this.wsBaseId=void 0,this.handlerSeed=1,this.anyHandlers={},this.msgHandlers={}}return Object(p.a)(e,[{key:"onWsReceiveAny",value:function(e){var t=this.handlerSeed++;return this.anyHandlers[t]=e,t}},{key:"onWsReceive",value:function(e,t){var n=this.handlerSeed++;return this.msgHandlers[n]={type:e,handler:t},n}},{key:"endWsReceive",value:function(e){delete this.anyHandlers[e],delete this.msgHandlers[e]}},{key:"receive",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,i,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.$type,e.t0=u.a.keys(this.anyHandlers);case 2:if((e.t1=e.t0()).done){e.next=8;break}return r=e.t1.value,e.next=6,this.anyHandlers[r](t);case 6:e.next=2;break;case 8:e.t2=u.a.keys(this.msgHandlers);case 9:if((e.t3=e.t2()).done){e.next=18;break}if(a=e.t3.value,i=this.msgHandlers[a],c=i.type,s=i.handler,c===n){e.next=14;break}return e.abrupt("continue",9);case 14:return e.next=16,s(t);case 16:e.next=9;break;case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),m=1,v=new(function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(a.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).wsBaseId="WsBridge seed "+m++,n}return Object(c.a)(t,e),t}(f)),b=function(e){function t(e,n){var r;return Object(l.a)(this,t),(r=Object(a.a)(this,Object(i.a)(t).call(this))).wsBaseId="WSChannel seed "+m++,r.wsHost=void 0,r.token=void 0,r.ws=void 0,r.wsHost=e,r.token=n,r}return Object(c.a)(t,e),Object(p.a)(t,[{key:"connect",value:function(){var e=this;if(void 0===this.ws){var n=this;return new Promise((function(r,a){var i=new WebSocket(e.wsHost,e.token||t.centerToken);console.log("connect webSocket %s",e.wsHost),i.onopen=function(t){console.log("webSocket connected %s",e.wsHost),n.ws=i,r()},i.onerror=function(e){a("webSocket can't open!")},i.onmessage=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.wsMessage(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.onclose=function(e){n.ws=void 0,console.log("webSocket closed!")}}))}}},{key:"close",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=void 0)}},{key:"wsMessage",value:function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("websocket message: %s",t.data),n=JSON.parse(t.data),a=n,void 0!==r&&r.postMessage({type:"ws",msg:a},"*"),e.next=6,this.receive(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ws msg error: ",e.t0);case 11:case"end":return e.stop()}var a}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendWs",value:function(e){var t=this;this.connect().then((function(){t.ws.send(e)}))}}],[{key:"setCenterToken",value:function(e){t.centerToken=e}}]),t}(f);b.centerToken=void 0},function(e,t,n){"use strict";var r=n(66);n.d(t,"UqMan",(function(){return r.a})),n.d(t,"fieldDefaultValue",(function(){return r.b}));n(31),n(45),n(36),n(67);var a=n(54);n.o(a,"CAppBase")&&n.d(t,"CAppBase",(function(){return a.CAppBase})),n.o(a,"CBase")&&n.d(t,"CBase",(function(){return a.CBase})),n.o(a,"CSub")&&n.d(t,"CSub",(function(){return a.CSub})),n.o(a,"Controller")&&n.d(t,"Controller",(function(){return a.Controller})),n.o(a,"EasyDate")&&n.d(t,"EasyDate",(function(){return a.EasyDate})),n.o(a,"EasyTime")&&n.d(t,"EasyTime",(function(){return a.EasyTime})),n.o(a,"Edit")&&n.d(t,"Edit",(function(){return a.Edit})),n.o(a,"FA")&&n.d(t,"FA",(function(){return a.FA})),n.o(a,"Form")&&n.d(t,"Form",(function(){return a.Form})),n.o(a,"Image")&&n.d(t,"Image",(function(){return a.Image})),n.o(a,"LMR")&&n.d(t,"LMR",(function(){return a.LMR})),n.o(a,"List")&&n.d(t,"List",(function(){return a.List})),n.o(a,"NavView")&&n.d(t,"NavView",(function(){return a.NavView})),n.o(a,"Page")&&n.d(t,"Page",(function(){return a.Page})),n.o(a,"PropGrid")&&n.d(t,"PropGrid",(function(){return a.PropGrid})),n.o(a,"SearchBox")&&n.d(t,"SearchBox",(function(){return a.SearchBox})),n.o(a,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return a.TabCaptionComponent})),n.o(a,"Tabs")&&n.d(t,"Tabs",(function(){return a.Tabs})),n.o(a,"UQsMan")&&n.d(t,"UQsMan",(function(){return a.UQsMan})),n.o(a,"UserIcon")&&n.d(t,"UserIcon",(function(){return a.UserIcon})),n.o(a,"VPage")&&n.d(t,"VPage",(function(){return a.VPage})),n.o(a,"View")&&n.d(t,"View",(function(){return a.View})),n.o(a,"Widget")&&n.d(t,"Widget",(function(){return a.Widget})),n.o(a,"nav")&&n.d(t,"nav",(function(){return a.nav})),n.o(a,"start")&&n.d(t,"start",(function(){return a.start})),n.o(a,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return a.toUiSelectItems})),n.o(a,"tv")&&n.d(t,"tv",(function(){return a.tv}));n(68),n(70),n(69),n(71);var i=n(108);n.d(t,"UQsMan",(function(){return i.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r,a,i=n(24),c=n(13),s=n(14),u=n(22),o=n(12),l=(n(19),n(1)),p=n.n(l),h=n(2),d=n(3),f=n(5),m=n(7),v=n(6),b=n(8),y=n(10),g=n(21),k=n(31),w=n(27),O=(g.b,r=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).pageStart=void 0,n.pageSize=void 0,n.params=void 0,n.more=void 0,n.startField=void 0,Object(c.a)(n,"list",a,Object(s.a)(n)),n.returns=void 0,n.isPaged=void 0,n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"setSchema",value:function(e){Object(u.a)(Object(v.a)(t.prototype),"setSchema",this).call(this,e);var n=e.returns;this.isPaged=n&&void 0!==n.find((function(e){return"$page"===e.name}))}},{key:"resetPage",value:function(e,t){this.pageStart=void 0,this.pageSize=e,this.params=t,this.more=!1,this.list=void 0}},{key:"loadPage",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.pageSize){e.next=2;break}throw new Error("call resetPage(size:number, params:any) first");case 2:if(void 0===this.pageStart){e.next=10;break}e.t0=this.startField.type,e.next="date"===e.t0?8:"time"===e.t0?8:"datetime"===e.t0?8:6;break;case 6:return t=this.pageStart,e.abrupt("break",10);case 8:return t=this.pageStart.getTime(),e.abrupt("break",10);case 10:return e.next=12,this.page(this.params,t,this.pageSize+1);case 12:n=e.sent,this.list=y.l.array([],{deep:!1}),void 0!==n&&(n.length>this.pageSize?(this.more=!0,n.pop(),a=this.returns.find((function(e){return"$page"===e.name})),this.startField=a.fields[0],this.pageStart=n[n.length-1][this.startField.name]):this.more=!1,(r=this.list).push.apply(r,Object(i.a)(n)));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pageCaller",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new w.c(this,e,t)}},{key:"page",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){var a,i,c,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(s.length>3&&void 0!==s[3])||s[3],i={pageStart:n,pageSize:r+1,params:t},e.next=4,this.pageCaller(i,a).request();case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"queryCaller",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new w.d(this,e,t)}},{key:"query",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.queryCaller(t,n).request();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"table",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],e.next=3,this.query(t,n);case 3:r=e.sent,e.t0=p.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=10;break}return a=e.t1.value,e.abrupt("return",r[a]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"obj",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.table(t,n);case 3:if(!((r=e.sent).length>0)){e.next=6;break}return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scalar",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],e.next=3,this.obj(t,n);case 3:r=e.sent,e.t0=p.a.keys(r);case 5:if((e.t1=e.t0()).done){e.next=10;break}return a=e.t1.value,e.abrupt("return",r[a]);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"query"}},{key:"hasMore",get:function(){return this.more}}]),t}(k.a),a=Object(o.a)(r.prototype,"list",[y.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,a,i,c=n(1),s=n.n(c),u=n(2),o=n(13),l=n(3),p=n(5),h=n(12),d=(n(19),n(18)),f=n(10),m=(r=function(){function e(t,n,r,c){Object(l.a)(this,e),this.name=void 0,this.itemSchema=void 0,this.uiItem=void 0,this.value=void 0,this.label=void 0,Object(o.a)(this,"error",a,this),Object(o.a)(this,"isChanged",i,this),this.newValue=void 0,this.itemSchema=t,this.uiItem=n,this.value=c;var s=t.name;this.name=s,this.label=r}return Object(p.a)(e,[{key:"start",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalStart();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"end",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.internalEnd();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"internalEnd",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.b.pop();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"verifyValue",value:function(){if(void 0!==this.uiItem){var e=this.uiItem.rules;if(void 0!==e){var t=this.newValue;if(Array.isArray(e)){var n=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=u(i.value);if(void 0!==s){this.error=s;break}}}catch(o){r=!0,a=o}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}}else this.error=u(e)}}function u(e,n){var r=e(t);if(void 0!==r)return"object"!==typeof r?r:JSON.stringify(r)}}}]),e}(),a=Object(h.a)(r.prototype,"error",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(h.a)(r.prototype,"isChanged",[f.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(87),a=n.n(r);function i(e){var t=a()(e);return{id:t.id,name:t.name,guest:t.guest,token:e}}function c(e){return{id:0,guest:a()(e).guest,token:e}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return b}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(21),o=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_RES_HOST||"https://tv.jkchemical.com",l={centerhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_CENTER_DEBUG_HOST||"localhost:3000",local:!1},reshost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_RES_DEBUG_HOST||"localhost:3015",local:!1},uqhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_HOST||"localhost:3015",local:!1},unitxhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_HOST||"localhost:3015",local:!1},"uq-build":{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_BUILDER_HOST||"localhost:3009",local:!1}},p=["https://","http://"];function h(e){return!0===function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=p[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;if(!0===e.startsWith(c))return!0}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return!1}(e)?e.endsWith("/")?e:e+"/":"http://".concat(e,"/")}function d(e){return h(e)}function f(e){return!0===e.startsWith("https://")?(!0===(e=e.substr("https://".length)).endsWith("/")&&(e=e.substr(0,e.length-1)),"wss://"+e+"/tv/"):"ws://".concat(e,"/tv/")}function m(e){return h(e)+"res/"}var v={method:"GET",mode:"no-cors",headers:{"Content-Type":"text/plain"}},b=new(function(){function e(){Object(c.a)(this,e),this.testing=void 0,this.url=void 0,this.ws=void 0,this.resHost=void 0}return Object(s.a)(e,[{key:"start",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.testing=t,!0!==u.c.isDevelopment){e.next=4;break}return e.next=4,this.tryLocal();case 4:n=this.getCenterHost(),this.url=d(n),this.ws=f(n),this.resHost=this.getResHost();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"debugHostUrl",value:function(e){return"http://".concat(e,"/hello")}},{key:"tryLocal",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c,s,u,o,p,h,d,f,m,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in t=[],n=[],r=function(e){var t=l[e].value;n.findIndex((function(e){return e===t}))<0&&n.push(t)},l)r(i);for(c=0,s=n;c<s.length;c++)u=s[c],o=this.debugHostUrl(u),t.push(k(o));return e.next=7,Promise.all(t);case 7:for(p=e.sent,h=n.length,i=0;i<h;i++)for(m in d=p[i],f=n[i],l)(v=l[m]).value===f&&(v.local=d);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCenterHost",value:function(){var e=l.centerhost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")?t:!0===u.c.isDevelopment&&!0===n?t:"https://tv.jkchemical.com"}},{key:"getResHost",value:function(){var e=l.reshost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")?t:!0===u.c.isDevelopment&&!0===n?t:o}},{key:"getUrlOrDebug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"uqhost";if(!1===u.c.isDevelopment)return e;var n=l[t];if(void 0===n)return e;var r=n.value,a=n.local;return!1===a?e:"http://".concat(r,"/")}},{key:"getUrlOrTest",value:function(e,t,n){var r;return!0===this.testing?("-"!==n&&(t=n),r="uq/test/"+e+"/"):r="uq/prod/"+e+"/",(t=this.getUrlOrDebug(t))+r}},{key:"localCheck",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),y=200;function g(e){return new Promise((function(t,n){fetch(e,v).then((function(e){e.text().then(t).catch(n)})).catch(n);var r=new Error("Connection timed out");u.c.setTimeout("fetchLocalCheck",n,y,r)}))}function k(e){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return f}));var r=n(1),a=n.n(r),i=n(2),c=n(5),s=n(3),u=n(0),o=n(9),l=n(25),p=function e(t,n,r){Object(s.a)(this,e),this.tuid=void 0,this.ui=void 0,this.res=void 0,this.tuid=t,this.ui=n,this.res=r},h=function(){function e(t,n){Object(s.a)(this,e),this.id=void 0,this.tuidUR=void 0,this.isUndefined=void 0,this.tuidUR=t,this.id=n,this.isUndefined=void 0===this.tuidUR.tuid}return Object(c.a)(e,[{key:"equ",value:function(e){return void 0!==e&&null!==e&&("object"===typeof e?this.id===e.id:this.id===e)}},{key:"render",value:function(e,t){if(void 0!==this.id&&null!==this.id){var n=this.boxName,r=this.obj;if(!0===this.isUndefined)return void 0!==e?e(r,t):Object(l.a)(r,t);switch(typeof r){case"undefined":return u.createElement("del",{className:"text-black-50"},n," undefined");case"number":return u.createElement("del",{className:"text-black-50"},n," ",this.id)}if(void 0===e&&(e=this.tuidUR.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){var a=e(r,this.tuidUR.res);return void 0!==a?a:u.createElement("del",{className:"text-danger"},n," ",this.id)}return Object(l.a)(r)}}},{key:"assure",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidUR.tuid.assureBox(this.id);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"obj",get:function(){return this.tuidUR.tuid.valueFromId(this.id)}},{key:"boxName",get:function(){return this.tuidUR.tuid.name}}]),e}();var d=Object(o.a)((function(e){var t=e.tuidValue,n=e.ui,r=e.x,a=e.nullUI;if(void 0===t)return void 0===a?u.createElement(u.Fragment,null,"[undefined]"):a();if(null===t)return void 0===a?u.createElement(u.Fragment,null,"[null]"):a();var i=typeof t;switch(i){default:if(void 0===n)return u.createElement(u.Fragment,null,i,"-",t);var c=n(t,r);return void 0!==c?c:u.createElement(u.Fragment,null,t);case"object":var s=function(e,t,n){var r,a=e;switch(typeof e){case"undefined":r=u.createElement(u.Fragment,null,"boxId undefined");break;case"number":r=u.createElement(u.Fragment,null,"id:",e);break;default:if("function"!==typeof a.render){if(void 0!==t)return t(e,n);r=Object(l.a)(e,n)}}return void 0!==r?u.createElement("del",{className:"text-danger"},r):a.render(t,n)}(t,n,r);return void 0!==s?s:void 0===a?u.createElement(u.Fragment,null,"id null"):a();case"number":return u.createElement(u.Fragment,null,"id...",t)}})),f=function(e,t,n,r){return u.createElement(d,{tuidValue:e,ui:t,x:n,nullUI:r})}},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(20),h=n.n(p),d=n(16),f=n(0),m=n.n(f),v=n(11),b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).controller=void 0,n.onNew=function(){return n.event("new")},n.onList=function(){return n.event("list")},n.onSearch=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.event("list",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.view);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"entityRender",value:function(e,t){return e.render()}},{key:"entityClick",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onClick();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"view",get:function(){var e,t=this.controller,n=t.label;!1===t.isImport&&(e=f.createElement("button",{className:"btn btn-outline-success ml-2",onClick:this.onNew},"\u65b0\u589e"));var r=f.createElement(f.Fragment,null,e,f.createElement("button",{className:"btn btn-outline-info ml-2",onClick:this.onList},"\u5168\u90e8")),a=f.createElement(v.LMR,{className:"m-3",right:r},f.createElement(v.SearchBox,{className:"w-100",size:"md",onSearch:this.onSearch,placeholder:"\u641c\u7d22"+n}));return function(){return f.createElement(v.Page,{header:n},a)}}}]),t}(d.b),y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).vForm=void 0,n.id=void 0,n.next=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.vForm.reset(),n.closePage();case 2:case"end":return e.stop()}}),e)}))),n.finish=function(){n.closePage(2),n.event("edit-end")},n.onSubmit=Object(i.a)(a.a.mark((function e(){var t,r,i,c,s,u,o,l,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.vForm.getValues(),e.next=3,n.controller.entity.save(n.id,t);case 3:if(r=e.sent,!((i=r.id)<0)){e.next=28;break}if(void 0===(c=n.controller.entity.unique)){e.next=27;break}for(s=!0,u=!1,o=void 0,e.prev=11,l=c[Symbol.iterator]();!(s=(p=l.next()).done);s=!0)h=p.value,n.vForm.setError(h,"\u4e0d\u80fd\u91cd\u590d");e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),u=!0,o=e.t0;case 19:e.prev=19,e.prev=20,s||null==l.return||l.return();case 22:if(e.prev=22,!u){e.next=25;break}throw o;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.abrupt("return");case 28:if(!n.controller.isCalling){e.next=32;break}return n.returnCall(i),n.closePage(),e.abrupt("return");case 32:return n.openPageElement(f.createElement(v.Page,{header:n.label+"\u63d0\u4ea4\u6210\u529f",back:"none"},f.createElement("div",{className:"m-3"},f.createElement("span",{className:"text-success"},f.createElement(v.FA,{name:"check-circle",size:"lg"})," \u6210\u529f\u63d0\u4ea4\uff01"),f.createElement("div",{className:"mt-5"},f.createElement("button",{className:"btn btn-primary mr-3",onClick:n.next},"\u7ee7\u7eed\u5f55\u5165"),f.createElement("button",{className:"btn btn-outline-primary",onClick:n.finish},"\u4e0d\u7ee7\u7eed"))))),n.event("item-changed",{id:n.id,values:t}),e.abrupt("return");case 35:case"end":return e.stop()}}),e,null,[[11,15,19,27],[20,,22,26]])}))),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.vForm=this.createForm(this.onSubmit,t),void 0!==t&&(this.id=t.id),this.openPage(this.editView);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetForm",value:function(){this.vForm.reset()}},{key:"editView",get:function(){var e=this;return function(){return f.createElement(v.Page,{header:(void 0===e.id?"\u65b0\u589e":"\u7f16\u8f91")+" - "+e.label},e.vForm.render("py-3"))}}}]),t}(d.b),g=n(28),k=n(9),w=function(e){function t(){var e,n,r=this;Object(c.a)(this,t);for(var s=arguments.length,l=new Array(s),p=0;p<s;p++)l[p]=arguments[p];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).mainRowContent=void 0,n.divRowContent=void 0,n.mainView=Object(k.a)((function(){var e=m.a.createElement(v.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:n.onSearchMain,placeholder:"\u641c\u7d22"+n.label});return m.a.createElement(v.Page,{header:e,back:"close"},m.a.createElement(v.List,{items:n.controller.PageItems.items,item:{render:n.renderMainRow,onClick:n.clickMainRow},before:"\u641c\u7d22"+n.label+"\u8d44\u6599"}))})),n.onSearchMain=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.searchMain(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderMainRow=function(e,t){return m.a.createElement(r.mainRowContent,e)},n.clickMainRow=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ceasePage(),void 0!==n.controller.entity.hasDiv){e.next=4;break}return n.returnCall(t),e.abrupt("return");case 4:return e.next=6,n.showDiv(n.entity.getIdFromObj(t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.divView=function(e){return m.a.createElement(v.Page,{header:"\u9009\u62e9Div"},m.a.createElement(v.List,{items:e.items,item:{render:n.renderDivRow,onClick:n.clickDivRow}}))},n.renderDivRow=function(e,t){return m.a.createElement(r.divRowContent,e)},n.clickDivRow=function(e){n.ceasePage(),n.returnCall(e)},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=5;break}return e.next=3,this.showMain(t);case 3:e.next=7;break;case 5:return e.next=7,this.showDiv(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showMain",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mainRowContent=this.ui.rowContent||g.b,e.next=3,this.controller.searchMain(t);case 3:this.openPage(this.mainView);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showDiv",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==(n=this.ui.divs)&&(this.divRowContent=n[this.entity.name].rowContent),void 0===this.divRowContent&&(this.divRowContent=g.b),e.next=5,this.controller.getDivItems(t);case 5:r=e.sent,this.openPage(this.divView,{items:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.b),O=n(25),j=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),t}(function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).vForm=void 0,n.id=void 0,n.next=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.vForm.reset(),n.closePage();case 2:case"end":return e.stop()}}),e)}))),n.finish=function(){n.closePage(2)},n.onSubmit=Object(i.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.vForm.getValues(),e.next=3,n.entity.save(n.id,t);case 3:return(r=e.sent)&&alert("\u8fd9\u91cc\u8fd8\u8981\u5224\u65ad\u8fd4\u56de\u503c\uff0c\u5148\u4e0d\u5904\u7406\u4e86 \n"+Object(O.b)(r)),n.openPage((function(){return f.createElement(v.Page,{header:n.label+"\u63d0\u4ea4\u6210\u529f",back:"none"},f.createElement("div",{className:"m-3"},f.createElement("span",{className:"text-success"},f.createElement(v.FA,{name:"check-circle",size:"lg"})," \u6210\u529f\u63d0\u4ea4\uff01"),f.createElement("div",{className:"mt-5"},f.createElement("button",{className:"btn btn-primary mr-3",onClick:n.next},"\u7ee7\u7eed\u5f55\u5165"),f.createElement("button",{className:"btn btn-outline-primary",onClick:n.finish},"\u4e0d\u7ee7\u7eed"))))})),e.abrupt("return");case 7:case"end":return e.stop()}}),e)}))),n.view=function(){return f.createElement(v.Page,{header:n.label},n.vForm.render("py-3"))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"buildForm",value:function(e){this.vForm=this.createForm(void 0,e)}},{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.buildForm(t),this.openPage(this.view);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return this.buildForm(e),this.vForm.render()}},{key:"loadId",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.id=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetForm",value:function(){this.vForm.reset()}}]),t}(d.b)),x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(o.a)(t).call(this,!0))).tuid=void 0,n.tuid=e,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"load",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuid.search(t,n,r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(n(21).b),E=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"onSelected",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===this.controller.isImport?this.event("edit",t.id):this.event("info",t.id);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(function(e){function t(){var e,n,r=this;Object(c.a)(this,t);for(var s=arguments.length,l=new Array(s),p=0;p<s;p++)l[p]=arguments[p];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).rowContent=void 0,n.ownerId=void 0,n.onSearch=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.searchMain(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderRow=function(e,t){return f.createElement(r.rowContent,e)},n.clickRow=function(e){n.callOnSelected(e)},n.rowKey=function(e){return e.id},n.view=Object(k.a)((function(){var e=f.createElement(v.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:n.onSearch,placeholder:"\u641c\u7d22"+n.label});return f.createElement(v.Page,{header:e},f.createElement(v.List,{items:n.controller.PageItems.items,item:{render:n.renderRow,onClick:n.clickRow,key:n.rowKey},before:"\u641c\u7d22"+n.label+"\u8d44\u6599"}))})),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.rowContent=this.ui.rowContent||g.b,this.ownerId=Number(t),e.next=4,this.controller.searchMain("");case 4:this.openPage(this.view);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"callOnSelected",value:function(e){void 0!==this.onSelected?this.onSelected(e):alert("onSelect is undefined")}}]),t}(d.b)),C=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).PageItems=void 0,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"buildPageItems",value:function(){return new x(this.entity)}},{key:"searchMain",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.PageItems&&(this.PageItems=this.buildPageItems()),void 0===t){e.next=4;break}return e.next=4,this.PageItems.first(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDivItems",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.searchArr(t,void 0,0,1e3);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.a),N=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).isImport=void 0,n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"from",value:function(){return this}},{key:"cUqFrom",value:function(){return this.cUq}},{key:"cEditFrom",value:function(){return this.cUq.cTuidEditFromName(this.entity.name)}},{key:"cInfoFrom",value:function(){return this.cUq.cTuidInfoFromName(this.entity.name)}},{key:"cSelectFrom",value:function(){return this.cUq.cTuidSelectFromName(this.entity.name)}},{key:"getLable",value:function(e){if(e===this.entity)return this.label;var t=e.name,n=this.res.arrs;if(void 0!==n){var r=n[t];if(void 0!==r){var a=r.label;if(void 0!==a)return a}}return t}},{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isImport=this.entity.isImport,e.next=3,this.openVPage(this.VTuidMain);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEvent",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="new"===e.t0?4:"list"===e.t0?7:"edit"===e.t0?10:"item-changed"===e.t0?13:"info"===e.t0?15:3;break;case 3:return e.abrupt("return");case 4:return e.next=6,this.onNew();case 6:return e.abrupt("break",19);case 7:return e.next=9,this.onList();case 9:return e.abrupt("break",19);case 10:return e.next=12,this.onEdit(n);case 12:return e.abrupt("return");case 13:return this.itemChanged(n),e.abrupt("return");case 15:return r=new I(this.cUq,this.entity,this.ui,this.res),e.next=18,r.start(n);case 18:return e.abrupt("return");case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=this.ui&&this.ui.CTuidEdit)){e.next=6;break}return e.next=4,this.openVPage(this.VTuidEdit,t);case 4:e.next=8;break;case 6:return e.next=8,new n(this.cUq,this.entity,this.ui,this.res).start(t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onNew",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.edit(void 0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onList",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.ui&&this.ui.CTuidList)){e.next=6;break}return e.next=4,this.openVPage(this.VTuidList,void 0);case 4:e.next=8;break;case 6:return e.next=8,new t(this.cUq,this.entity,this.ui,this.res).start(void 0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onEdit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,void 0===t){e.next=5;break}return e.next=4,this.entity.load(t);case 4:n=e.sent;case 5:this.edit(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"itemChanged",value:function(e){var t=e.id,n=e.values;if(void 0!==this.PageItems){var r=this.PageItems.items.find((function(e){return e.id===t}));void 0!==r&&h.a.merge(r,n)}}},{key:"VTuidMain",get:function(){return b}},{key:"VTuidEdit",get:function(){return y}},{key:"VTuidList",get:function(){return E}}]),t}(C),S=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isImport=this.entity.isImport,e.next=3,this.openVPage(this.VTuidMain);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(N),P=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isImport=this.entity.isImport,"number"!==typeof t){e.next=6;break}return e.next=4,this.onEdit(t);case 4:e.next=8;break;case 6:return e.next=8,this.edit(t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VTuidEdit,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(N),T=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isImport=this.entity.isImport,e.next=3,this.openVPage(this.VTuidList);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(N),A=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VTuidSelect,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"beforeStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.loadSchema();case 2:return void 0!==this.PageItems&&this.PageItems.reset(),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"idFromItem",value:function(e){return e.id}},{key:"VTuidSelect",get:function(){return w}}]),t}(C),I=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.load(t);case 2:return n=e.sent,e.next=5,this.openVPage(this.VTuidInfo,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"VTuidInfo",get:function(){return j}}]),t}(C);n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return T})),n.d(t,"e",(function(){return A})),n.d(t,"b",(function(){return I}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(0),h=n(11),d=n(17),f=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).page=function(e){var t=e.predefinedUnit,r=h.nav.user,a=r?r.name:"[\u672a\u767b\u5f55]",i=n.controller.uqsMan,c=i.appOwner,s=i.appName;return p.createElement(h.Page,{header:"APP\u65e0\u6cd5\u8fd0\u884c",logout:!0},p.createElement("div",{className:"m-3 text-danger container"},p.createElement("div",{className:"form-group row"},p.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u767b\u5f55\u7528\u6237"),p.createElement("div",{className:"col-sm text-body"},a)),p.createElement("div",{className:"form-group row"},p.createElement("div",{className:"col-sm-3 font-weight-bold"},"App"),p.createElement("div",{className:"col-sm text-body"},"".concat(c,"/").concat(s))),p.createElement("div",{className:"form-group row"},p.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u9884\u8bbe\u5c0f\u53f7"),p.createElement("div",{className:"col-sm text-body"},t||p.createElement("small",{className:""},"[\u65e0\u9884\u8bbe\u5c0f\u53f7]"))),p.createElement("div",{className:"form-group row"},p.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u53ef\u80fd\u539f\u56e0",p.createElement(h.FA,{name:"exclamation-triangle"})),p.createElement("div",{className:"col-sm text-body"},p.createElement("ul",{className:"p-0"},p.createElement("li",null,"\u6ca1\u6709\u5c0f\u53f7\u8fd0\u884c ",s),p.createElement("li",null,"\u7528\u6237 ",p.createElement("b",null,a)," \u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u8fd0\u884c",s,"\u7684\u5c0f\u53f7"),t&&p.createElement("li",null,"\u9884\u8bbe\u5c0f\u53f7 ",p.createElement("b",null,t)," \u6ca1\u6709\u8fd0\u884cApp ",s)))),p.createElement("div",{className:"form-group row"},p.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u5c0f\u53f7",t),p.createElement("div",{className:"col-sm text-body"},"\u9884\u8bbe\u5c0f\u53f7\u5b9a\u4e49\u5728 public/unit.json \u6587\u4ef6\u4e2d\u3002 \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u7531url\u76f4\u63a5\u542f\u52a8\u3002 \u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95eeapp\u4e4b\u540e\uff0c\u4f1a\u7f13\u5b58\u5728localStorage\u91cc\u3002",p.createElement("br",null),"\u5982\u679c\u8981\u5220\u53bb\u7f13\u5b58\u7684\u9884\u5b9a\u4e49Unit\uff0clogout\u7136\u540e\u518dlogin\u3002"))))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{predefinedUnit:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(h.VPage),m=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).renderRow=function(e,t){var n=e.id,r=e.nick,a=e.name;return p.createElement(h.LMR,{className:"px-3 py-2",right:"id: "+n},p.createElement("div",null,r||a))},n.onRowClick=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.g.unit=t.id,e.next=3,n.controller.start();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=function(){return p.createElement(h.Page,{header:"\u9009\u62e9\u5c0f\u53f7",logout:!0},p.createElement(h.List,{items:n.controller.appUnits,item:{render:n.renderRow,onClick:n.onRowClick}}))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(h.VPage),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).page=function(e){return p.createElement(h.Page,{header:"ERROR"},p.createElement("div",{className:"m-3"},p.createElement("div",null,"Load Uqs \u53d1\u751f\u9519\u8bef\uff1a"),e.errors.map((function(e,t){return p.createElement("div",{key:t},e)}))))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{errors:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(h.VPage),b=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).page=function(e){var t=e.error;return p.createElement(h.Page,{header:"App start error!"},p.createElement("pre",null,"string"===typeof t?t:t.message))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{error:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(h.VPage)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(20),a=n.n(r),i={lang:void 0,district:void 0};function c(e){var t=i.lang,n=i.district,r={};if(void 0===e)return r;a.a.merge(r,e._);var c=e[t];if(void 0===c)return r;a.a.merge(r,c._);var s=c[n];if(void 0===s)return r;a.a.merge(r,s);var u=r.entity;if(void 0!==u)for(var o in u)u[o.toLowerCase()]=u[o];return r}!function(){var e,t,n=navigator.languages&&navigator.languages[0]||navigator.language;if(n){var r=n.split("-");e=r[0],r.length>1&&(t=r[1])}else e="zh",t="CN";!function(e,t){i.lang=e,i.district=t}(e,t)}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(31),h=n(27),d=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"submit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new f(this,t).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitReturns",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new m(this,t).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"action"}}]),t}(p.a),f=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"buildParams",value:function(){return{data:this.entity.pack(this.params)}}},{key:"path",get:function(){return"action/"+this.entity.name}}]),t}(h.a),m=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"xresult",value:function(e){for(var t=this.entity.returns,n=t.length,r={},a=0;a<n;a++){r[t[a].name]=e[a]}return r}},{key:"path",get:function(){return"action/"+this.entity.name+"/returns"}}]),t}(f)},function(e,t,n){"use strict";var r,a,i,c,s=n(24),u=n(1),o=n.n(u),l=n(2),p=n(3),h=n(5),d=n(12),f=n(0),m=n.n(f),v=n(9),b=n(7),y=n(6),g=n(8),k=function(){function e(t){Object(p.a)(this,e),this.label=void 0,this.view=function(){return f.createElement("div",null)},this.label=t}return Object(h.a)(e,[{key:"render",value:function(){return f.createElement("div",{key:this.key,className:"px-3"},f.createElement("div",{className:"form-group row"},f.createElement("label",{className:"col-sm-2 col-form-label"},this.label),f.createElement("div",{className:"col-sm-10"},this.renderContent())))}},{key:"setAddRow",value:function(e){}},{key:"getVFields",value:function(){}},{key:"getVArr",value:function(){}},{key:"getVSubmit",value:function(){}},{key:"renderContent",value:function(){return f.createElement("div",{className:"form-control form-control-plaintext bg-white border border-info rounded "},"content")}},{key:"key",get:function(){return this.label}}]),e}(),w=function(e){function t(e,n){var r;return Object(p.a)(this,t),(r=Object(b.a)(this,Object(y.a)(t).call(this,e))).vField=void 0,r.vField=n,r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getVFields",value:function(){return[this.vField]}},{key:"renderContent",value:function(){return this.vField.render()}},{key:"key",get:function(){return this.vField.name}}]),t}(k),O=function(e){function t(e,n){var r;return Object(p.a)(this,t),(r=Object(b.a)(this,Object(y.a)(t).call(this,e))).vArr=void 0,r.vArr=n,r}return Object(g.a)(t,e),Object(h.a)(t,[{key:"setAddRow",value:function(e){this.vArr.setAddRow(e)}},{key:"getVArr",value:function(){return this.vArr}},{key:"render",value:function(){return f.createElement(f.Fragment,{key:this.key},this.vArr&&this.vArr.render())}},{key:"key",get:function(){return this.vArr.name}}]),t}(k),j=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(b.a)(this,Object(y.a)(t).call(this,void 0))).vSubmit=void 0,n.vSubmit=e,n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"getVSubmit",value:function(){return this.vSubmit}},{key:"render",value:function(){return f.createElement("div",{key:"$submit",className:"px-3"},f.createElement("div",{className:"form-group row"},f.createElement("div",{className:"offset-sm-2 col-sm-10"},this.vSubmit.render())))}},{key:"key",get:function(){return"$submit"}}]),t}(k),x=n(13),E=n(14),C=(n(19),n(28)),N=n(10),S=(r=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(b.a)(this,Object(y.a)(t).call(this))).vForm=void 0,Object(x.a)(n,"caption",a,Object(E.a)(n)),Object(x.a)(n,"className",i,Object(E.a)(n)),n.onClickSubmit=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.vForm.submit();case 1:case"end":return e.stop()}}),e)}))),n.view=Object(v.a)((function(){var e=n.vForm.isOk;return f.createElement("button",{type:"button",onClick:n.onClickSubmit,className:n.className,disabled:!1===e},n.caption)})),n.vForm=e,n.caption=n.vForm.submitCaption,n.className="btn btn-primary w-25",n}return Object(g.a)(t,e),t}(C.c),a=Object(d.a)(r.prototype,"caption",[N.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(d.a)(r.prototype,"className",[N.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r),P=n(22),T=n(15),A=n.n(T),I=n(11),F=function e(){Object(p.a)(this,e)},q=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"check",value:function(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(!0===isNaN(t))return;break;case"undefined":}e.push("\u4e0d\u80fd\u4e3a\u7a7a")}}]),t}(F),V=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"check",value:function(e,t){if(void 0!==t&&null!==t){var n=Number(t);!0===isNaN(n)&&e.push("\u5fc5\u987b\u662f\u6570\u5b57")}}}]),t}(F),L=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"check",value:function(e,t){if(void 0!==t&&null!==t){var n=Number(t);!0!==Number.isNaN(n)&&!1!==Number.isInteger(n)||e.push("\u5fc5\u987b\u662f\u6574\u6570")}}}]),t}(F),M=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(b.a)(this,Object(y.a)(t).call(this))).min=void 0,n.min=e,n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"check",value:function(e,n){Object(P.a)(Object(y.a)(t.prototype),"check",this).call(this,e,n),Number(n)<this.min&&e.push("\u4e0d\u80fd\u5c0f\u4e8e"+this.min)}}]),t}(V),B=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(b.a)(this,Object(y.a)(t).call(this))).max=void 0,n.max=e,n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"check",value:function(e,n){Object(P.a)(Object(y.a)(t.prototype),"check",this).call(this,e,n),Number(n)>this.max&&e.push("\u4e0d\u80fd\u5c0f\u4e8e"+this.max)}}]),t}(V),R=(c=function(e){function t(e,n,r,a){var i;return Object(p.a)(this,t),(i=Object(b.a)(this,Object(y.a)(t).call(this))).form=void 0,i.fieldUI=void 0,i.fieldRes=void 0,i.field=void 0,i.rules=void 0,i.name=void 0,i.form=e,i.field=n,i.name=n.name,i.fieldUI=r||{},i.fieldRes=a||{},i.init(),i}return Object(g.a)(t,e),Object(h.a)(t,[{key:"init",value:function(){this.buildRules()}},{key:"buildRules",value:function(){this.rules=[],(!0===this.fieldUI.required||void 0!==this.field&&!1===this.field.null)&&this.rules.push(new q)}},{key:"setValue",value:function(e){this.form.values[this.name]=e}},{key:"parse",value:function(e){return e}},{key:"checkRules",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,i=this.rules[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value.check(e,this.value)}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"isOk",get:function(){return 0===this.rules.length||0===this.checkRules.length}},{key:"value",get:function(){return this.form.values[this.name]}},{key:"error",get:function(){return this.form.errors[this.name]},set:function(e){this.form.errors[this.name]=e}},{key:"readonly",get:function(){var e=this.form.mode;return e===X.readonly||e===X.edit&&!1===this.fieldUI.editable}}]),t}(C.c),Object(d.a)(c.prototype,"checkRules",[N.e],Object.getOwnPropertyDescriptor(c.prototype,"checkRules"),c.prototype),Object(d.a)(c.prototype,"isOk",[N.e],Object.getOwnPropertyDescriptor(c.prototype,"isOk"),c.prototype),Object(d.a)(c.prototype,"value",[N.e],Object.getOwnPropertyDescriptor(c.prototype,"value"),c.prototype),c),D=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(a)))).fieldUI=void 0,n.input=void 0,n.inputType=void 0,n.renderError=function(e){var t=n.form.errors[n.name];if(void 0!==t)return f.createElement("div",{className:e},f.createElement(I.FA,{name:"exclamation-circle"})," ",t)},n.ref=function(e){n.input=e,n.setInputValue()},n.onFocus=function(){n.error=void 0},n.onBlur=function(){var e=n.checkRules;e.length>0&&(n.error=e[0]),n.form.computeFields()},n.onChange=function(e){var t=n.parse(e.currentTarget.value);null!==t&&n.setValue(t)},n.onKeyPress=void 0,n.view=Object(v.a)((function(){var e,t,r,a=n.fieldUI.required,i=n.fieldRes,c=i.placeHolder,s=i.suffix,u=["form-control","form-control-input"];return!0===n.readonly?t=f.createElement("input",{className:A()(u,"bg-light"),ref:n.ref,type:n.inputType,readOnly:!0}):(t=f.createElement("input",{className:A()(u),ref:n.ref,type:n.inputType,onFocus:n.onFocus,onBlur:n.onBlur,onChange:n.onChange,placeholder:c,readOnly:!1,maxLength:n.maxLength,onKeyPress:n.onKeyPress}),!0!==a&&!1!==n.field.null||(e=f.createElement(U,null))),r=void 0===s?t:f.createElement("div",{className:"input-group"},t,f.createElement("div",{className:"input-group-append"},f.createElement("span",{className:"input-group-text"},s))),f.createElement(f.Fragment,null,e,r,n.renderError("text-danger small mt-1 mx-2"))})),n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"setValue",value:function(e){Object(P.a)(Object(y.a)(t.prototype),"setValue",this).call(this,e),this.setInputValue()}},{key:"setInputValue",value:function(){if(this.input){var e=this.value;this.input.value=null===e||void 0===e?"":e}}},{key:"maxLength",get:function(){}}]),t}(R),U=function(){return f.createElement("b",{style:{color:"red",position:"absolute",left:"0.1em",top:"0.5em"}},"*")},z=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(a)))).fieldUI=void 0,n.inputType="text",n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"maxLength",get:function(){return this.field.size}}]),t}(D),H=45,_=46,W=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(a)))).fieldUI=void 0,n.extraChars=void 0,n.inputType="number",n.onKeyPress=function(e){var t=e.charCode;if(!(8===t||0===t||13===t||t>=48&&t<=57))if(void 0!==n.extraChars&&n.extraChars.indexOf(t)>=0)switch(t){case _:n.onKeyDot();break;case H:n.onKeyNeg(),e.preventDefault()}else e.preventDefault()},n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"init",value:function(){if(Object(P.a)(Object(y.a)(t.prototype),"init",this).call(this),this.extraChars=[],void 0!==this.fieldUI){var e=this.fieldUI,n=e.min;e.max;void 0!==n?n<0&&this.extraChars.push(H):this.extraChars.push(H)}switch(this.field.type){case"dec":case"bigint":case"int":case"smallint":case"tinyint":this.extraChars.push(_)}}},{key:"buildRules",value:function(){Object(P.a)(Object(y.a)(t.prototype),"buildRules",this).call(this),this.rules.push(new V);var e=this.fieldUI,n=e.min,r=e.max;void 0!==n&&this.rules.push(new M(n)),void 0!==r&&this.rules.push(new B(r))}},{key:"parse",value:function(e){try{if(0===e.trim().length)return;var t=Number(e);return!0===isNaN(t)?null:t}catch(n){return null}}},{key:"setInputValue",value:function(){if(this.input){var e=this.value;this.parse(this.input.value)!==e&&(this.input.value=null===e||void 0===e?"":e)}}},{key:"onKeyDot",value:function(){var e=this.input.value;e.indexOf(".")>=0&&(this.input.value=e.replace(".",""))}},{key:"onKeyNeg",value:function(){var e=this.input.value,t=e.indexOf("-");e=t>=0?e.replace("-",""):"-"+e,this.input.value=e}}]),t}(D),$=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"buildRules",value:function(){Object(P.a)(Object(y.a)(t.prototype),"buildRules",this).call(this),this.rules.push(new L)}}]),t}(W),K=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),t}(W),Q=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),t}(z),G=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),t}(z),J=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(g.a)(t,e),t}(z);var Y,X,Z=function(e){function t(e,n,r){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e,n,void 0,r))).view=Object(v.a)((function(){var e=a.form.values[a.field.name],t=a.fieldRes,n=t.placeHolder,r=t.suffix;null===e&&(e="");var i=m.a.createElement("input",{className:"form-control form-control-input bg-light",type:"text",placeholder:n,readOnly:!0,value:e});return void 0===r?i:m.a.createElement("div",{className:"input-group"},i,m.a.createElement("div",{className:"input-group-append"},m.a.createElement("span",{className:"input-group-text"},r)))})),a}return Object(g.a)(t,e),t}(R),ee=n(20),te=n.n(ee),ne=function(e){function t(e,n,r){var a,i=this;Object(p.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this))).mode=void 0,a.label=void 0,a.header=void 0,a.footer=void 0,a.rowValues=void 0,a.onEditRow=void 0,a.ownerForm=void 0,a.vForm=void 0,a.rowContent=void 0,a.none=void 0,a.newSubmitCaption=void 0,a.editSubmitCaption=void 0,a.addRow=void 0,a.name=void 0,a.list=void 0,a.rowPage=function(){return f.createElement(I.Page,{header:a.label,back:"close"},a.vForm.render("py-3"))},a.onSubmit=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.vForm.valueBoxs,e.next=3,a.onRowChanged(t);case 3:case"end":return e.stop()}}),e)}))),a.onRowChanged=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==a.rowValues){e.next=11;break}if(t.$owner=a.ownerForm.values,a.list.push(t),void 0!==a.onEditRow){e.next=7;break}a.vForm.reset(),e.next=9;break;case 7:return e.next=9,a.onEditRow(void 0,a.onRowChanged);case 9:e.next=13;break;case 11:te.a.merge(a.rowValues,t),void 0===a.onEditRow&&I.nav.pop();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderItem=function(e,t){return void 0===a.rowContent?f.createElement("div",{className:"px-3 py-2"},f.createElement(C.a,e)):f.createElement(i.rowContent,e)},a.showRow=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a.onEditRow){e.next=4;break}return e.next=3,a.onEditRow(t,a.onRowChanged);case 3:return e.abrupt("return");case 4:a.vForm.reset(),void 0!==t&&a.vForm.setValues(t),I.nav.push(f.createElement(i.rowPage,null));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.editRow=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.rowValues=t,void 0!==(n=a.vForm.vSubmit)&&(n.caption=a.editSubmitCaption,n.className="btn btn-outline-success"),a.vForm.mode=a.ownerForm.mode,e.next=6,a.showRow(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.internalAddRow=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.rowValues=void 0,(t=a.vForm.vSubmit).caption=a.newSubmitCaption,t.className="btn btn-outline-success",a.vForm.reset(),a.vForm.mode=X.new,e.next=8,a.showRow(void 0);case 8:case"end":return e.stop()}}),e)}))),a.view=function(){var e;void 0===a.addRow&&a.mode===X.readonly||(e=f.createElement("button",{onClick:a.addRow||a.internalAddRow,type:"button",className:"btn btn-link p-0"},a.ownerForm.arrTitleNewButton));var t=a.header||f.createElement("div",{className:"px-3 bg-light small",style:{paddingTop:"1px",paddingBottom:"1px"}},f.createElement("div",{className:"flex-fill align-self-center"},a.label),e);return f.createElement(I.List,{className:"pb-3",header:t,none:f.createElement(I.Muted,{className:"px-3 py-2"},a.none),items:a.list,item:{render:a.renderItem,onClick:a.editRow}})},a.ownerForm=e;var c=n.name,s=n.fields;a.name=c;var u=e.ui,h=e.res,d=e.mode,m=e.inputs,v=e.values,g=h.arrs,k=void 0!==g?g[c]:{},w=k.label,O=k.none,j=k.newSubmit,x=k.editSubmit;a.none=O||e.none,a.newSubmitCaption=j||e.arrNewCaption,a.editSubmitCaption=x||e.arrEditCaption,a.label=w||c;var E=u&&u.items[c]||{};return a.rowContent=E.rowContent,a.mode=d,void 0===a.onEditRow?a.vForm=new se({fields:s,arrs:void 0,ui:E,res:k,inputs:m[c],none:e.none,submitCaption:"submit",arrNewCaption:void 0,arrEditCaption:void 0,arrTitleNewButton:void 0,mode:d},d===X.readonly?void 0:a.onSubmit):a.onEditRow=r,a.list=v[c],a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"reset",value:function(){this.vForm.reset(),this.list.clear()}},{key:"setAddRow",value:function(e){this.addRow=e}}]),t}(C.c),re=n(41),ae={textAlign:"left",paddingLeft:"0.75rem",paddingRight:"0.75rem",overflow:"hidden"},ie=function(e){function t(e,n,r,a){var i;return Object(p.a)(this,t),(i=Object(b.a)(this,Object(y.a)(t).call(this,e,n,r,a))).vForm=void 0,i.input=void 0,i.tuid=void 0,i.onClick=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==i.readonly){e.next=6;break}if(i.value){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,i.tuid.showInfo();case 5:return e.abrupt("return");case 6:if(void 0===i.input){e.next=12;break}return e.next=9,i.input.select(i.vForm,i.field,i.vForm.getValues());case 9:t=e.sent,e.next=14;break;case 12:alert("call undefined"),t=0;case 14:i.setValue(i.tuid.boxId(t));case 15:case"end":return e.stop()}}),e)}))),i.view=Object(v.a)((function(){var e,t=i.fieldRes.placeHolder,n=!1,r=i.field._tuid.ownerField;if(void 0!==r){var a=r.name;n=null===i.vForm.getValue(a)}if(null===i.value)e=f.createElement(f.Fragment,null,t||i.input.placeHolder);else if("object"===typeof i.value)e=Object(re.c)(i.value);else{var c=i.tuid.boxId(i.value);e=Object(re.c)(c)}if(!0===i.readonly)return f.createElement("div",{className:"form-control form-control-plaintext border border-info rounded bg-light cursor-pointer",onClick:i.onClick},e);var s=(!0===i.fieldUI.required||!1===i.field.null)&&f.createElement(U,null);return f.createElement(f.Fragment,null,s,f.createElement("button",{className:"form-control btn btn-outline-info",type:"button",disabled:n,style:ae,onClick:i.onClick},e))})),i.tuid=n._tuid,i.vForm=e,i.input=e.inputs[n.name],i}return Object(g.a)(t,e),t}(R),ce=function(){function e(t,n,r){Object(p.a)(this,e),this.vForm=void 0,this.onSubmit=void 0,this.fields=void 0,this.arrs=void 0,this.formItems=void 0,this.layout=void 0,this.res=void 0,this.vForm=t,this.onSubmit=r;var a=n.fields,i=n.arrs,c=n.ui,s=n.res;if(this.fields=a,this.arrs=i,void 0!==c){var u=c.items,o=c.layout;this.formItems=u,this.layout=o}this.res=s}return Object(h.a)(e,[{key:"build",value:function(){return void 0===this.layout?this.bandsOnFly():this.bandsFromLayout()}},{key:"resFromName",value:function(e,t){if(void 0!==t){var n=t.fields;if(void 0!==n)return n[e]||e}}},{key:"bandsOnFly",value:function(){var e=[];if(this.bandsFromFields(e,this.fields,this.res),void 0!==this.arrs){var t=!0,n=!1,r=void 0;try{for(var a,i=this.arrs[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;e.push(this.bandFromArr(c))}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return void 0!==this.onSubmit&&e.push(new j(new S(this.vForm))),e}},{key:"bandsFromFields",value:function(e,t,n){if(void 0!==t){var r=!0,a=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;e.push(this.bandFromField(u,n))}}catch(o){a=!0,i=o}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}}},{key:"bandsFromLayout",value:function(){return[]}},{key:"bandFromField",value:function(e,t){var n,r,a,i,c=e.name,s=this.resFromName(c,t);return"object"===typeof s?(r=s.label,n=s):(r=s,n=void 0),void 0!==this.formItems&&(i=this.formItems[c]),void 0===(a="function"===typeof i?new Z(this.vForm,e,n):function(e,t,n,r){var a;switch(t.type){default:return;case"tinyint":case"smallint":case"int":case"bigint":a=$;break;case"id":if(void 0!==t._tuid)return;a=$;break;case"dec":a=K;break;case"char":a=z;break;case"text":a=Q;break;case"datetime":a=G;break;case"date":a=J}return new a(e,t,n,r)}(this.vForm,e,i,n))&&(a=new ie(this.vForm,e,i,n)),new w(r||c,a)}},{key:"bandFromArr",value:function(e){var t=e.name,n=new ne(this.vForm,e);return new O(t,n)}}]),e}();!function(e){e[e.new=0]="new",e[e.edit=1]="edit",e[e.readonly=2]="readonly"}(X||(X={}));var se=(Y=function(){function e(t,n){var r=this;Object(p.a)(this,e),this.fields=void 0,this.arrs=void 0,this.bands=void 0,this.bandColl=void 0,this.onSubmit=void 0,this.ui=void 0,this.res=void 0,this.values=void 0,this.errors=void 0,this.formItems=void 0,this.mode=void 0,this.vFields={},this.vArrs={},this.vSubmit=void 0,this.inputs=void 0,this.none=void 0,this.submitCaption=void 0,this.arrNewCaption=void 0,this.arrEditCaption=void 0,this.arrTitleNewButton=void 0,this.onFormSubmit=function(e){return e.preventDefault(),!1},this.view=Object(v.a)((function(e){var t=e.className;return f.createElement("form",{className:t,onSubmit:r.onFormSubmit},r.bands.map((function(e){return e.render()})))}));var a=t.fields,i=t.arrs,c=t.ui,s=t.res,u=t.inputs,o=t.none,l=t.submitCaption,h=t.arrNewCaption,d=t.arrEditCaption,m=t.arrTitleNewButton,b=t.mode;this.fields=a,this.arrs=i,this.ui=c,void 0!==this.ui&&(this.formItems=this.ui.items),this.res=s,this.inputs=u,this.none=o,this.submitCaption=l,this.arrNewCaption=h,this.arrEditCaption=d,this.arrTitleNewButton=m||f.createElement("small",null,f.createElement(I.FA,{name:"plus"})," \u65b0\u589e"),this.mode=void 0===n?X.readonly:b,this.buildFormValues(),this.buildBands(t,n),this.onSubmit=n}return Object(h.a)(e,[{key:"buildBands",value:function(e,t){this.bandColl={};var n=new ce(this,e,t);this.bands=n.build();var r=!0,a=!1,i=void 0;try{for(var c,s=this.bands[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;this.bandColl[u.key]=u;var o=u.getVFields();if(void 0!==o){var l=!0,p=!1,h=void 0;try{for(var d,f=o[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var m=d.value;this.vFields[m.name]=m}}catch(y){p=!0,h=y}finally{try{l||null==f.return||f.return()}finally{if(p)throw h}}}var v=u.getVArr();void 0!==v&&(this.vArrs[v.name]=v);var b=u.getVSubmit();void 0!==b&&(this.vSubmit=b)}}catch(y){a=!0,i=y}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}},{key:"getBand",value:function(e){return this.bandColl[e]}},{key:"computeFields",value:function(){if(void 0!==this.formItems){var e=this.values;for(var t in this.formItems){var n=this.formItems[t];"function"===typeof n&&(e[t]=n.call(this,e))}}}},{key:"submit",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.onSubmit){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.onSubmit();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getValues",value:function(){var e={},t=this.values,n=!0,r=!1,a=void 0;try{for(var i,c=this.fields[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value.name,u=t[s];e[s]=null!==u&&"object"===typeof u?u.id:u}}catch(V){r=!0,a=V}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}if(void 0!==this.arrs){var o=!0,l=!1,p=void 0;try{for(var h,d=this.arrs[Symbol.iterator]();!(o=(h=d.next()).done);o=!0){var f=h.value,m=f.name,v=f.fields,b=f.id,y=f.order,g=e[m]=[],k=this.vArrs[m].list,w=!0,O=!1,j=void 0;try{for(var x,E=k[Symbol.iterator]();!(w=(x=E.next()).done);w=!0){var C=x.value,N={};void 0!==b&&(N[b]=C[b]),void 0!==y&&(N[y]=C[y]);var S=!0,P=!1,T=void 0;try{for(var A,I=v[Symbol.iterator]();!(S=(A=I.next()).done);S=!0){var F=A.value.name,q=C[F];N[F]=null!==q&&"object"===typeof q?q.id:q}}catch(V){P=!0,T=V}finally{try{S||null==I.return||I.return()}finally{if(P)throw T}}g.push(N)}}catch(V){O=!0,j=V}finally{try{w||null==E.return||E.return()}finally{if(O)throw j}}}}catch(V){l=!0,p=V}finally{try{o||null==d.return||d.return()}finally{if(l)throw p}}}return e}},{key:"setValues",value:function(e){if(void 0!==e){var t=this.values,n=this.errors,r=!0,a=!1,i=void 0;try{for(var c,u=this.fields[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var o=c.value.name;n[o]=void 0;var l=e[o];t[o]=l}}catch(f){a=!0,i=f}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}for(var p in this.vArrs){var h=e[p];if(void 0!==h){var d=t[p];d.clear(),d.push.apply(d,Object(s.a)(h))}}}else this.reset()}},{key:"reset",value:function(){var e=this.values,t=this.errors,n=!0,r=!1,a=void 0;try{for(var i,c=this.fields[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value.name;e[s]=null,t[s]=void 0}}catch(p){r=!0,a=p}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}for(var u in this.vFields){var o=this.vFields[u];void 0!==o.name&&o.setValue(null)}for(var l in this.vArrs){this.vArrs[l].reset()}}},{key:"getValue",value:function(e){return this.values[e]}},{key:"setValue",value:function(e,t){this.values[e]=t}},{key:"setError",value:function(e,t){this.errors[e]=t}},{key:"buildFieldValues",value:function(e){var t={valueFromFieldName:function(e){return this[e]}},n=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){t[i.value.name]=null}}catch(s){r=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return t}},{key:"buildObservableValues",value:function(){var e=this.buildFieldValues(this.fields);if(void 0!==this.arrs){var t=!0,n=!1,r=void 0;try{for(var a,i=this.arrs[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){e[a.value.name]=N.l.array([],{deep:!0})}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}return Object(N.l)(e)}},{key:"buildFormValues",value:function(){this.values=this.buildObservableValues(),this.errors=Object(N.l)(this.buildFieldValues(this.fields))}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"py-3";return f.createElement(this.view,{className:e})}},{key:"valueBoxs",get:function(){var e={},t=this.values,n=!0,r=!1,a=void 0;try{for(var i,c=this.fields[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value,u=s.name,o=s._tuid,l=t[u];e[u]=void 0===o||"object"===typeof l?l:o.boxId(l)}}catch(q){r=!0,a=q}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}if(void 0===this.arrs)return e;var p=!0,h=!1,d=void 0;try{for(var f,m=this.arrs[Symbol.iterator]();!(p=(f=m.next()).done);p=!0){var v=f.value,b=v.name,y=v.fields,g=e[b]=this.vArrs[b].list.slice(),k=!0,w=!1,O=void 0;try{for(var j,x=g[Symbol.iterator]();!(k=(j=x.next()).done);k=!0){var E=j.value,C=!0,N=!1,S=void 0;try{for(var P,T=y[Symbol.iterator]();!(C=(P=T.next()).done);C=!0){var A=P.value,I=A.name,F=(o=A._tuid,E[I]);E[I]=void 0===o||"object"===typeof F?F:o.boxId(F)}}catch(q){N=!0,S=q}finally{try{C||null==T.return||T.return()}finally{if(N)throw S}}}}catch(q){w=!0,O=q}finally{try{k||null==x.return||x.return()}finally{if(w)throw O}}}}catch(q){h=!0,d=q}finally{try{p||null==m.return||m.return()}finally{if(h)throw d}}return e}},{key:"isOk",get:function(){for(var e in this.vFields)if(!1===this.vFields[e].isOk)return!1;return!0}}]),e}(),Object(d.a)(Y.prototype,"isOk",[N.e],Object.getOwnPropertyDescriptor(Y.prototype,"isOk"),Y.prototype),Y);n.d(t,"a",(function(){return X})),n.d(t,"b",(function(){return se}))},,,,,function(e,t,n){"use strict";var r=n(14),a=n(1),i=n.n(a),c=n(2),s=n(3),u=n(5),o=n(7),l=n(6),p=n(22),h=n(8),d=n(20),f=n.n(d),m=n(31),v=n(27),b=n(10),y=n(126),g=function(){function e(t){Object(s.a)(this,e),this.queue=[],this.cache=b.l.map({},{deep:!1}),this.localArr=void 0,this.waitingIds=[],this.tuidInner=void 0,this.divName=void 0,this.tuidInner=t,this.initLocalArr()}return Object(u.a)(e,[{key:"initLocalArr",value:function(){this.localArr=this.tuidInner.cache.arr(this.tuidInner.name+".ids")}},{key:"useId",value:function(e,t){if(void 0!==e&&0!==e&&!1!==Object(y.isNumber)(e))if(!0!==this.cache.has(e))if(this.tuidInner.cacheTuids(!0===t?70:20),this.cache.set(e,e),this.waitingIds.findIndex((function(t){return t===e}))>=0)this.moveToHead(e);else{if(this.queue.length>=1e3){var n=this.queue.shift();if(n===e)return void this.queue.push(n);if(!0===this.cache.has(n))this.cache.delete(n);else{var r=this.waitingIds.findIndex((function(e){return e===n}));this.waitingIds.splice(r,1)}}this.waitingIds.push(e),this.queue.push(e)}else this.moveToHead(e)}},{key:"moveToHead",value:function(e){var t=this.queue.findIndex((function(t){return t===e}));this.queue.splice(t,1),this.queue.push(e)}},{key:"getValue",value:function(e){return this.cache.get(e)}},{key:"remove",value:function(e){this.cache.delete(e);var t=this.queue.findIndex((function(t){return t===e}));this.queue.splice(t,1)}},{key:"valueFromId",value:function(e){var t;switch(typeof e){case"object":t=e.id;break;case"number":t=e;break;default:return}return this.getValue(t)}},{key:"resetCache",value:function(e){this.remove(e),this.useId(e)}},{key:"cacheValue",value:function(e){if(void 0===e)return!1;var t=this.getIdFromObj(e);if(void 0===t)return!1;var n=this.waitingIds.findIndex((function(e){return e===t}));return n>=0&&this.waitingIds.splice(n,1),this.cache.set(t,e),!0}},{key:"getIdFromObj",value:function(e){return this.tuidInner.getIdFromObj(e)}},{key:"cacheIds",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.waitingIds.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.loadIds();case 4:return t=e.sent,e.next=7,this.cacheIdValues(t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cacheIdValues",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,s,u,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return");case 2:n=this.unpackTuidIds(t),r=!0,a=!1,c=void 0,e.prev=6,s=n[Symbol.iterator]();case 8:if(r=(u=s.next()).done){e.next=16;break}if(o=u.value,!1!==this.cacheValue(o)){e.next=12;break}return e.abrupt("continue",13);case 12:this.cacheTuidFieldValues(o);case 13:r=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),a=!0,c=e.t0;case 22:e.prev=22,e.prev=23,r||null==s.return||s.return();case 25:if(e.prev=25,!a){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}}),e,this,[[6,18,22,30],[23,,25,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"modifyIds",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTuidIdsOrLocal(t);case 2:if(n=e.sent,0!==(r=n.filter((function(e){var t=e.indexOf("\t");t<0&&(t=e.length);var n=Number(e.substr(0,t));return void 0!==a.localArr.getItem(n)}))).length){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.cacheIdValues(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadIds",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTuidIdsOrLocal(this.waitingIds);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unpackTuidIds",value:function(e){return this.tuidInner.unpackTuidIds(e)}},{key:"cacheTuidFieldValues",value:function(e){this.tuidInner.cacheTuidFieldValues(e)}},{key:"assureObj",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.cache.get(t),e.t0=typeof n,e.next="object"===e.t0?4:"number"===e.t0?5:7;break;case 4:return e.abrupt("return",n);case 5:return this.cache.set(t,t),e.abrupt("break",7);case 7:return e.next=9,this.loadTuidIdsOrLocal([t]);case 9:return r=e.sent,e.next=12,this.cacheIdValues(r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTuidIdsOrLocal",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,s,u,o,l,p,h,d,m,v,b=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=[],a=!0,c=!1,s=void 0,e.prev=5,u=t[Symbol.iterator]();!(a=(o=u.next()).done);a=!0)l=o.value,(p=this.localArr.getItem(l))?n.push(p):r.push(l);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),c=!0,s=e.t0;case 13:e.prev=13,e.prev=14,a||null==u.return||u.return();case 16:if(e.prev=16,!c){e.next=19;break}throw s;case 19:return e.finish(16);case 20:return e.finish(13);case 21:if(!((h=r.length)>0)){e.next=37;break}return e.next=25,this.tuidInner.loadTuidIds(this.divName,r);case 25:d=e.sent,m=function(e){var t=d[e];if(!t)return"continue";var a=t.indexOf("\t");a<0&&(a=t.length);var i=Number(t.substr(0,a));f.a.remove(r,(function(e){return e===i})),n.push(t),b.localArr.setItem(i,t)},v=0;case 28:if(!(v<h)){e.next=35;break}if("continue"!==m(v)){e.next=32;break}return e.abrupt("continue",32);case 32:v++,e.next=28;break;case 35:for(h=r.length,v=0;v<h;v++)this.localArr.setItem(r[v],"");case 37:return e.abrupt("return",n);case 38:case"end":return e.stop()}}),e,this,[[5,9,13,21],[14,,16,20]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),k=function(e){function t(e,n){var r;return Object(s.a)(this,t),(r=Object(o.a)(this,Object(l.a)(t).call(this,e))).div=void 0,r.divName=void 0,r.div=n,r.divName=n.name,r.localArr=e.cache.arr(e.name+".ids."+r.divName),r}return Object(h.a)(t,e),Object(u.a)(t,[{key:"initLocalArr",value:function(){}},{key:"getIdFromObj",value:function(e){return this.div.getIdFromObj(e)}},{key:"unpackTuidIds",value:function(e){return this.div.unpackTuidIds(e)}},{key:"cacheTuidFieldValues",value:function(e){this.div.cacheTuidFieldValues(e)}}]),t}(g);n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return I}));var w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).noCache=void 0,n.typeName="tuid",n.idName=void 0,n.cached=void 0,n.unique=void 0,n.isImport=!1,n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"setSchema",value:function(e){Object(p.a)(Object(l.a)(t.prototype),"setSchema",this).call(this,e);var n=e.id;this.idName=n}},{key:"buildTuidBox",value:function(){return new F(this)}},{key:"getIdFromObj",value:function(e){return e[this.idName]}},{key:"stopCache",value:function(){this.noCache=!0}},{key:"cacheIds",value:function(){}},{key:"modifyIds",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"equ",value:function(e,t){return void 0!==e&&(void 0!==t&&("object"===typeof e?e.equ(t):"object"===typeof t?t.equ(e):e===t))}}]),t}(m.a),O=function(e){function t(e,n,a){var i;return Object(s.a)(this,t),(i=Object(o.a)(this,Object(l.a)(t).call(this,e,n,a))).divs=void 0,i.cacheFields=void 0,i.idCache=void 0,i.localArr=void 0,i.idCache=new g(Object(r.a)(i)),i.localArr=i.cache.arr(i.name+".whole"),!0===e.newVersion&&i.localArr.removeAll(),i}return Object(h.a)(t,e),Object(u.a)(t,[{key:"setSchema",value:function(e){Object(p.a)(Object(l.a)(t.prototype),"setSchema",this).call(this,e);var n=e.arrs;if(void 0!==n){this.divs={};var r=!0,a=!1,i=void 0;try{for(var c,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value,o=u.name,h=new q(this.uq,this,o);this.divs[o]=h,h.setSchema(u),h.buildFieldsTuid()}}catch(d){a=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}}},{key:"useId",value:function(e,t){!0!==this.noCache&&void 0!==e&&this.idCache.useId(e,t)}},{key:"boxId",value:function(e){if(void 0!==e){if("object"===typeof e)return e;this.useId(e);var t=this.uq.createBoxId;return t?t(this,e):{id:e}}}},{key:"valueFromId",value:function(e){return this.idCache.getValue(e)}},{key:"assureBox",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.assureObj(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheIds",value:function(){if(this.idCache.cacheIds(),void 0!==this.divs)for(var e in this.divs)this.divs[e].cacheIds()}},{key:"modifyIds",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.modifyIds(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheTuids",value:function(e){this.uq.cacheTuids(e)}},{key:"div",value:function(e){return this.divs&&this.divs[e]}},{key:"loadTuidIds",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new E(this,{divName:t,ids:n},!1).request();case 2:return(r=e.sent).length>0&&(this.cached=!0),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadMain",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"===typeof t&&(t=t.id),e.next=3,this.idCache.assureObj(t);case 3:return e.abrupt("return",this.idCache.valueFromId(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c,s,u,o,l,p,h,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&0!==t){e.next=2;break}return e.abrupt("return");case 2:if("object"===typeof t&&(t=t.id),!(n=this.localArr.getItem(t))){e.next=8;break}r=JSON.parse(n),e.next=12;break;case 8:return e.next=10,new x(this,t).request();case 10:void 0!==(r=e.sent)&&this.localArr.setItem(t,JSON.stringify(r));case 12:if(void 0!==r){e.next=14;break}return e.abrupt("return");case 14:a=!0,c=!1,s=void 0,e.prev=17,u=this.schema.fields[Symbol.iterator]();case 19:if(a=(o=u.next()).done){e.next=32;break}if(l=o.value,void 0!==(p=l.tuid)){e.next=24;break}return e.abrupt("continue",29);case 24:if(void 0!==(h=this.uq.getTuid(p))){e.next=27;break}return e.abrupt("continue",29);case 27:d=l.name,r[d]=h.boxId(r[d]);case 29:a=!0,e.next=19;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(17),c=!0,s=e.t0;case 38:e.prev=38,e.prev=39,a||null==u.return||u.return();case 41:if(e.prev=41,!c){e.next=44;break}throw s;case 44:return e.finish(41);case 45:return e.finish(38);case 46:return this.idCache.cacheValue(r),this.cacheTuidFieldValues(r),e.abrupt("return",r);case 49:case"end":return e.stop()}}),e,this,[[17,34,38,46],[39,,41,45]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheTuidFieldValues",value:function(e){var t=this.schema,n=t.fields,r=t.arrs;if(this.cacheFieldsInValue(e,n),void 0!==r){var a=!0,i=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var o=s.value,l=o.name,p=o.fields,h=e[l];if(void 0!==h){var d=this.div(l),f=!0,m=!1,v=void 0;try{for(var b,y=h[Symbol.iterator]();!(f=(b=y.next()).done);f=!0){var g=b.value;d.cacheValue(g),this.cacheFieldsInValue(g,p)}}catch(k){m=!0,v=k}finally{try{f||null==y.return||y.return()}finally{if(m)throw v}}}}}catch(k){i=!0,c=k}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}}}},{key:"buildFieldsTuid",value:function(){Object(p.a)(Object(l.a)(t.prototype),"buildFieldsTuid",this).call(this);var e=this.schema.mainFields;this.uq.buildFieldTuid(this.cacheFields=e||this.fields)}},{key:"unpackTuidIds",value:function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)}},{key:"save",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new C(this,{id:t,props:n}).request(),void 0!==t&&(this.idCache.remove(t),this.localArr.removeItem(t)),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new S(this,{}).request();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchArr(void 0,t,n,r);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchArr",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,o,l,p,h,d,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={arr:void 0,owner:t,key:n,pageStart:r,pageSize:a},e.next=3,new N(this,c).request();case 3:for(s=e.sent,u=this.schema.fields,o=!0,l=!1,p=void 0,e.prev=8,h=s[Symbol.iterator]();!(o=(d=h.next()).done);o=!0)f=d.value,this.cacheFieldsInValue(f,u);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),l=!0,p=e.t0;case 16:e.prev=16,e.prev=17,o||null==h.return||h.return();case 19:if(e.prev=19,!l){e.next=22;break}throw p;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",s);case 25:case"end":return e.stop()}}),e,this,[[8,12,16,24],[17,,19,23]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"loadArr",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r&&0!==r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new P(this,{arr:t,owner:n,id:r}).request();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"saveArr",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new T(this,{arr:t,owner:n,id:r,props:a}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"posArr",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new A(this,{arr:t,owner:n,id:r,order:a}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"hasDiv",get:function(){return void 0!==this.divs}}]),t}(w),j=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"entity",get:function(){return this._entity}}]),t}(v.b),x=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).method="GET",n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"path",get:function(){return"tuid/".concat(this.entity.name,"/").concat(this.params)}}]),t}(j),E=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"buildParams",value:function(){return this.params.ids}},{key:"xresult",value:function(e){return e.split("\n")}},{key:"path",get:function(){var e=this.params.divName;return"tuidids/".concat(this.entity.name,"/").concat(void 0!==e?e:"$")}}]),t}(j),C=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"buildParams",value:function(){var e=this.entity.schema,t=e.fields,n=e.arrs,r=this.params,a=r.id,i=r.props,c={$id:a};if(this.transParams(c,i,t),void 0!==n){var s=!0,u=!1,o=void 0;try{for(var l,p=n[Symbol.iterator]();!(s=(l=p.next()).done);s=!0){var h=l.value,d=h.name,f=[],m=h.fields,v=i[d];if(void 0!==v){var b=!0,y=!1,g=void 0;try{for(var k,w=v[Symbol.iterator]();!(b=(k=w.next()).done);b=!0){var O=k.value,j={};this.transParams(j,O,m),f.push(j)}}catch(x){y=!0,g=x}finally{try{b||null==w.return||w.return()}finally{if(y)throw g}}}c[d]=f}}catch(x){u=!0,o=x}finally{try{s||null==p.return||p.return()}finally{if(u)throw o}}}return c}},{key:"transParams",value:function(e,t,n){if(void 0!==t){var r=!0,a=!1,i=void 0;try{for(var c,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value,o=u.name,l=u.tuid,p=u.type,h=t[o];if(void 0!==l)"object"===typeof h&&null!==h&&(h=h.id);else switch(p){case"date":h=this.entity.buildDateParam(h);break;case"datetime":h=this.entity.buildDateTimeParam(h)}e[o]=h}}catch(d){a=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}}},{key:"path",get:function(){return"tuid/".concat(this.entity.name)}}]),t}(j),N=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"path",get:function(){return"tuids/".concat(this.entity.name)}}]),t}(j),S=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).method="GET",n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"path",get:function(){return"tuid-all/".concat(this.entity.name)}}]),t}(j),P=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).method="GET",n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner,r=e.id;return"tuid-arr/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/").concat(r)}}]),t}(j),T=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"buildParams",value:function(){var e=this.params,t=e.id,n=e.props,r=f.a.clone(n);return r.$id=t,r}},{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/")}}]),t}(j),A=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"buildParams",value:function(){var e=this.params;return{bid:e.id,$order:e.order}}},{key:"path",get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr-pos/".concat(this.entity.name,"/").concat(n,"/").concat(t,"/")}}]),t}(j),I=function(e){function t(e,n,r,a){var i;return Object(s.a)(this,t),(i=Object(o.a)(this,Object(l.a)(t).call(this,e,n,r))).tuidLocal=void 0,i.from=void 0,i.isImport=!0,i.from=a,i}return Object(h.a)(t,e),Object(u.a)(t,[{key:"setFrom",value:function(e){this.tuidLocal=e}},{key:"useId",value:function(e){this.tuidLocal.useId(e)}},{key:"boxId",value:function(e){return this.tuidLocal.boxId(e)}},{key:"valueFromId",value:function(e){return this.tuidLocal.valueFromId(e)}},{key:"assureBox",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.assureBox(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"div",value:function(e){return this.tuidLocal.div(e)}},{key:"loadMain",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.loadMain(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.load(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.save(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.all();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.search(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchArr",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.searchArr(t,n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"loadArr",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.loadArr(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"saveArr",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.saveArr(t,n,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"posArr",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuidLocal.posArr(t,n,r,a);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"hasDiv",get:function(){return this.tuidLocal.hasDiv}}]),t}(w),F=function(){function e(t){Object(s.a)(this,e),this.tuid=void 0,this.ownerField=void 0,this.tuid=t}return Object(u.a)(e,[{key:"boxId",value:function(e){return this.tuid.boxId(e)}},{key:"getIdFromObj",value:function(e){return this.tuid.getIdFromObj(e)}},{key:"useId",value:function(e){return this.tuid.useId(e)}},{key:"showInfo",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("showInfo not implemented");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),q=function(e){function t(e,n,a){var i;return Object(s.a)(this,t),(i=Object(o.a)(this,Object(l.a)(t).call(this,e,a,0))).typeName="div",i.cacheFields=void 0,i.tuid=void 0,i.idName=void 0,i.idCache=void 0,i.tuid=n,i.idName="id",i.idCache=new k(n,Object(r.a)(i)),i}return Object(h.a)(t,e),Object(u.a)(t,[{key:"buildFieldsTuid",value:function(){Object(p.a)(Object(l.a)(t.prototype),"buildFieldsTuid",this).call(this);var e=this.schema.mainFields;this.uq.buildFieldTuid(this.cacheFields=e)}},{key:"buildTuidDivBox",value:function(e){return new V(this.tuid,this,e)}},{key:"getIdFromObj",value:function(e){return e[this.idName]}},{key:"cacheValue",value:function(e){this.idCache.cacheValue(e)}},{key:"useId",value:function(e,t){!0!==this.noCache&&this.idCache.useId(e,t)}},{key:"valueFromId",value:function(e){return this.idCache.getValue(e)}},{key:"assureBox",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.assureObj(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cacheIds",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idCache.cacheIds();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cacheTuidFieldValues",value:function(e){var t=this.schema.fields;this.cacheFieldsInValue(e,t)}},{key:"unpackTuidIds",value:function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)}},{key:"owner",get:function(){return this.tuid}}]),t}(O),V=function(e){function t(e,n,r){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).ownerField=void 0,a.div=void 0,a.div=n,a.ownerField=r,a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"boxId",value:function(e){return this.div.boxId(e)}},{key:"getIdFromObj",value:function(e){return this.div.getIdFromObj(e)}},{key:"useId",value:function(e){return this.div.useId(e)}}]),t}(F)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(7),a=n(6),i=n(8),c=n(3),s=n(5),u=n(20),o=n.n(u),l=new(function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"getItem",value:function(e){return localStorage.getItem(e)}},{key:"setItem",value:function(e,t){localStorage.setItem(e,t)}},{key:"removeItem",value:function(e){localStorage.removeItem(e)}}]),e}()),p=function(){function e(t,n){Object(c.a)(this,e),this.local=void 0,this.key=void 0,this.local=t,this.key=n}return Object(s.a)(e,[{key:"get",value:function(){try{var e=this.local.getItem(this.key);if(null===e)return;if(void 0===e)return;return JSON.parse(e)}catch(t){return void this.local.removeItem(this.key)}}},{key:"set",value:function(e){var t=JSON.stringify(e);this.local.setItem(this.key,t)}},{key:"remove",value:function(e){void 0===e?this.local.removeItem(this.key):this.local.removeLocal(e)}},{key:"child",value:function(e){return this.local.child(e)}},{key:"arr",value:function(e){return this.local.arr(e)}},{key:"map",value:function(e){return this.local.map(e)}}]),e}(),h=function(){function e(t){Object(c.a)(this,e),this.caches=void 0,this.locals=void 0,this.name=void 0,this.name=t,this.caches={},this.locals={}}return Object(s.a)(e,[{key:"getItem",value:function(e){var t=this.keyForGet(e);if(void 0!==t)return l.getItem(t)}},{key:"setItem",value:function(e,t){var n=this.keyForSet(e);l.setItem(n,t)}},{key:"removeItem",value:function(e){var t=this.keyForSet(e);void 0!==t&&localStorage.removeItem(t)}},{key:"arr",value:function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new d(r)}return n}},{key:"map",value:function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new f(r)}return n}},{key:"removeLocal",value:function(e){var t=e.name,n=this.keyForRemove(t);if(void 0!==n){var r=this.locals[t];void 0===r?r=new d(n):this.locals[t]=void 0,r.removeAll()}}},{key:"child",value:function(e){var t=String(e),n=this.caches[t];return void 0!==n?n:this.caches[t]=new p(this,e)}}]),e}(),d=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(r.a)(this,Object(a.a)(t).call(this,e))).index=void 0;var i=l.getItem(n.name);return n.index=null===i?[]:i.split("\n").map((function(e){return Number(e)})),n}return Object(i.a)(t,e),Object(s.a)(t,[{key:"saveIndex",value:function(){l.setItem(this.name,this.index.join("\n"))}},{key:"keyForGet",value:function(e){if(!(o.a.indexOf(this.index,e)<0))return"".concat(this.name,".").concat(e)}},{key:"keyForSet",value:function(e){var t=o.a.indexOf(this.index,e);return t<0?(this.index.unshift(e),this.index.length>500&&this.index.pop()):(this.index.splice(t,1),this.index.unshift(e)),this.saveIndex(),"".concat(this.name,".").concat(e)}},{key:"keyForRemove",value:function(e){var t=o.a.indexOf(this.index,e);if(!(t<0))return this.index.splice(t,1),this.saveIndex(),"".concat(this.name,".").concat(e)}},{key:"removeAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.index[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value;l.removeItem("".concat(this.name,".").concat(i))}}catch(c){t=!0,n=c}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}l.removeItem(this.name),this.index.splice(0)}},{key:"item",value:function(e){return this.child(e)}}]),t}(h),f=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(r.a)(this,Object(a.a)(t).call(this,e))).index=void 0,n.max=void 0,n.max=0,n.index={};var i=l.getItem(n.name);null!==i&&i.split("\n").forEach((function(e){var t=e.indexOf("\t");if(!(t<0)){var r=e.substr(0,t),a=Number(e.substr(t+1));!0!==isNaN(a)&&(n.index[r]=a,a>n.max&&(n.max=a))}}));return n}return Object(i.a)(t,e),Object(s.a)(t,[{key:"saveIndex",value:function(){var e=[];for(var t in this.index){var n=this.index[t];void 0!==n&&e.push("".concat(t,"\t").concat(n))}l.setItem(this.name,e.join("\n"))}},{key:"keyForGet",value:function(e){var t=this.index[e];if(void 0!==t)return"".concat(this.name,".").concat(t)}},{key:"keyForSet",value:function(e){var t=this.index[e];return void 0===t&&(++this.max,t=this.max,this.index[e]=t,this.saveIndex()),"".concat(this.name,".").concat(t)}},{key:"keyForRemove",value:function(e){var t=this.index[e];if(void 0!==t)return this.index[e]=void 0,this.saveIndex(),"".concat(this.name,".").concat(t)}},{key:"removeAll",value:function(){for(var e in this.index)l.removeItem("".concat(this.name,".").concat(this.index[e])),this.index[e]=void 0;l.removeItem(this.name),this.max=0}},{key:"item",value:function(e){return this.child(e)}}]),t}(h)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(52),a=["/test","/test/","-test","-test/"];var i=function(){var t=function(){var e=document.location.pathname.toLowerCase(),t=!0,n=!1,r=void 0;try{for(var i,c=a[Symbol.iterator]();!(t=(i=c.next()).done);t=!0){var s=i.value;if(!0===e.endsWith(s))return!0}}catch(u){n=!0,r=u}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}return!1}();return{testing:t,isDevelopment:!1,localDb:new r.a(!0===t?"$$":"$"),setTimeout:function(t,n,r){for(var a,i=arguments.length,c=new Array(i>3?i-3:0),s=3;s<i;s++)c[s-3]=arguments[s];return(a=e).setTimeout.apply(a,[n,r].concat(c))},clearTimeout:function(t){e.clearTimeout(t)},setInterval:function(t,n){for(var r,a=arguments.length,i=new Array(a>2?a-2:0),c=2;c<a;c++)i[c-2]=arguments[c];return(r=e).setInterval.apply(r,[t,n].concat(i))},clearInterval:function(t){e.clearInterval(t)}}}()}).call(this,n(85))},function(e,t,n){"use strict";var r=n(106);n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"Controller")&&n.d(t,"Controller",(function(){return r.Controller})),n.o(r,"EasyDate")&&n.d(t,"EasyDate",(function(){return r.EasyDate})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"NavView")&&n.d(t,"NavView",(function(){return r.NavView})),n.o(r,"Page")&&n.d(t,"Page",(function(){return r.Page})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return r.TabCaptionComponent})),n.o(r,"Tabs")&&n.d(t,"Tabs",(function(){return r.Tabs})),n.o(r,"UQsMan")&&n.d(t,"UQsMan",(function(){return r.UQsMan})),n.o(r,"UserIcon")&&n.d(t,"UserIcon",(function(){return r.UserIcon})),n.o(r,"VPage")&&n.d(t,"VPage",(function(){return r.VPage})),n.o(r,"View")&&n.d(t,"View",(function(){return r.View})),n.o(r,"Widget")&&n.d(t,"Widget",(function(){return r.Widget})),n.o(r,"nav")&&n.d(t,"nav",(function(){return r.nav})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start})),n.o(r,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return r.toUiSelectItems}));var a=n(51);n.d(t,"TuidImport",(function(){return a.a})),n.d(t,"TuidInner",(function(){return a.b}));var i=n(107);n.d(t,"TuidsCache",(function(){return i.a}));var c=n(58);n.d(t,"tv",(function(){return c.b}))},function(e,t,n){"use strict";var r=n(112);n.d(t,"ViewMainSubs",(function(){return r.a}));n(113)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(0),o=n(9),l=function(e,t,n){return u.createElement(u.Fragment,null,e,": ",function(e){var t="{";if(void 0===e)return"undefined";for(var n in e){var r=e[n];if(t+=n+": ",void 0===r)t+="undefined";else if(null===r)t+="null";else switch(typeof r){default:t+=r;break;case"function":t+="function";break;case"object":t+="{obj}"}t+=", "}return t+"}"}(t))};var p=function(){function e(t,n,r){Object(c.a)(this,e),this.id=void 0,this.tuid=void 0,this.ui=void 0,this.isUndefined=void 0,this.id=Number(t),this.tuid=n,this.ui=r,this.isUndefined=void 0===this.tuid}return Object(s.a)(e,[{key:"equ",value:function(e){return void 0!==e&&null!==e&&("object"===typeof e?this.id===e.id:this.id===e)}},{key:"render",value:function(e,t){if(void 0!==this.id&&null!==this.id&&!0!==isNaN(this.id)){var n=this.boxName,r=this.obj;if(!0===this.isUndefined)return void 0!==e?e(r,t):l(n,r,t);switch(typeof r){case"undefined":return u.createElement("span",{className:"text-black-50"},n," undefined");case"number":return u.createElement("span",{className:"text-light"},n," ",this.id)}if(void 0===e&&(e=this.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){var a=e(r);return void 0!==a?a:u.createElement("span",{className:"text-danger"},n," ",this.id)}return l(n,r)}}},{key:"assure",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tuid.assureBox(this.id);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"obj",get:function(){return this.tuid.valueFromId(this.id)}},{key:"boxName",get:function(){return this.tuid.name}}]),e}();var h=Object(o.a)((function(e){var t=e.tuidValue,n=e.ui,r=e.x,a=e.nullUI;if(void 0===t)return void 0===a?u.createElement("small",{className:"text-muted"},"[\u65e0]"):a();if(null===t)return void 0===a?u.createElement(u.Fragment,null,"[null]"):a();var i=typeof t;switch(i){default:if(void 0===n)return u.createElement(u.Fragment,null,i,"-",t);var c=n(t,r);return void 0!==c?c:u.createElement(u.Fragment,null,t);case"object":var s=function(e,t,n){var r,a=e;switch(typeof e){case"undefined":r=u.createElement(u.Fragment,null,"boxId undefined");break;case"number":r=u.createElement(u.Fragment,null,"id:",e);break;default:if("function"!==typeof a.render){if(void 0!==t)return t(e,n);r=l(a.boxName,e,n)}}return void 0!==r?u.createElement("del",{className:"text-danger"},r):a.render(t,n)}(t,n,r);return void 0!==s?s:void 0===a?u.createElement(u.Fragment,null,"id null"):a();case"number":return u.createElement(u.Fragment,null,"id...",t)}})),d=function(e,t,n,r){return u.createElement(h,{tuidValue:e,ui:t,x:n,nullUI:r})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(1),a=n.n(r),i=n(3),c=n(5),s=n(2);function u(e,t,n,r,a){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(a.a.mark((function e(t,n,r,i,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch(n,r,!1,i,c);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(){function e(t,n){Object(i.a)(this,e),this.token=void 0,this.path=void 0,this.showWaiting=void 0,this.path=t||"",this.showWaiting=n}return Object(c.a)(e,[{key:"xcall",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return n=e.sent,e.next=5,n.xcall(this.path,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return i=e.sent,e.next=5,i.callFetch(t,n,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:void 0,e.next=3,this.getHttpChannel();case 3:return r=e.sent,e.next=6,r.get(this.path+t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.post(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.put(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHttpChannel();case 2:return r=e.sent,e.next=5,r.delete(this.path+t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(0),h=n(18),d=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(o.a)(t).call(this,e))).logoutClick=function(){h.b.showLogout(n.logout)},n.logout=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof(t=n.props.logout)){e.next=4;break}return e.next=4,t();case 4:return e.next=6,h.b.logout(void 0);case 6:case"end":return e.stop()}}),e)}))),n.state={hasBack:h.b.level>1},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"back",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.back();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"openWindow",value:function(){window.open(document.location.href)}},{key:"render",value:function(){var e,t,n=this.state.hasBack||window.self!==window.top,r=this.props,a=r.right,i=r.center,c=r.logout,s=r.className;if(void 0!==c&&window.self===window.top&&("boolean"===typeof c&&!0===c||"function"===typeof c)){var u=h.b.user;if(void 0!==u){var o=u.nick,l=u.name;t=p.createElement("div",{className:"d-flex align-items-center"},p.createElement("small",{className:"text-light"},o||l),p.createElement("div",{className:"ml-2 py-2 px-3 cursor-pointer",role:"button",onClick:this.logoutClick},p.createElement("i",{className:"fa fa-sign-out fa-lg"})))}}if(n)switch(this.props.back){case"none":e=void 0;break;default:case"back":e=p.createElement("nav",{onClick:this.back},p.createElement("i",{className:"fa fa-angle-left"}));break;case"close":e=p.createElement("nav",{onClick:this.back},p.createElement("i",{className:"fa fa-close"}))}window.self!==window.top&&console.log(document.location.href),void 0===e&&"string"===typeof i&&(i=p.createElement("div",{className:"px-3"},i));var d=(a||t)&&p.createElement("aside",null,a," ",t);return p.createElement("header",{className:s},e,p.createElement("div",null,i),d)}}]),t}(p.Component)},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(5),s=n(3),u=n(7),o=n(6),l=n(8),p=n(16),h=n(0),d=n.n(h),f=n(9),m=n(11),v=n(25),b=function(e){return d.a.createElement("div",{className:"px-3 py-2"},Object(v.b)(e))},y=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var c=arguments.length,l=new Array(c),p=0;p<c;p++)l[p]=arguments[p];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).vForm=void 0,n.row=void 0,n.onSubmit=Object(i.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.vForm.getValues(),!0!==n.entity.isPaged){e.next=9;break}return e.next=4,n.entity.resetPage(30,t);case 4:return e.next=6,n.entity.loadPage();case 6:n.replacePage(n.pageResult),e.next=13;break;case 9:return e.next=11,n.entity.query(t);case 11:r=e.sent,n.replacePage(n.queryResult,r);case 13:case"end":return e.stop()}}),e)}))),n.again=function(){n.vForm.reset(),n.replacePage(n.view)},n.renderRow=function(e,t){return h.createElement(r.row,e)},n.view=function(){return h.createElement(m.Page,{header:n.label},n.vForm.render("mx-3 my-2"),n.renderExtra())},n.pageResult=function(){var e=n.entity.list,t=h.createElement("button",{className:"btn btn-outline-success",onClick:n.again},h.createElement(m.FA,{name:"search"})," \u518d\u67e5\u8be2");return h.createElement(m.Page,{header:n.label,right:t},h.createElement(m.List,{items:e,item:{render:n.renderRow}}))},n.queryResult=Object(f.a)((function(e){var t=h.createElement("button",{className:"btn btn-outline-success",onClick:n.again},h.createElement(m.FA,{name:"search"})," \u518d\u67e5\u8be2");return h.createElement(m.Page,{header:n.label,right:t},h.createElement("pre",null,JSON.stringify(e,void 0,"\t")))})),n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.vForm=this.createForm(this.onSubmit,t),n=this.ui,r=n.row,i=n.queryRow,this.row=i||r||b,this.openPage(this.view);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderExtra",value:function(){}}]),t}(p.b),g=n(21),k=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var c=arguments.length,l=new Array(c),p=0;p<c;p++)l[p]=arguments[p];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).row=void 0,n.PageItems=void 0,n.ownerId=void 0,n.onSearch=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.PageItems.first(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderRow=function(e,t){return h.createElement(r.row,e)},n.clickRow=function(e){n.callOnSelected(e)},n.view=function(){var e=h.createElement(m.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:n.onSearch,placeholder:"\u641c\u7d22"+n.label});return h.createElement(m.Page,{header:e},h.createElement(m.List,{items:n.PageItems.items,item:{render:n.renderRow,onClick:n.clickRow},before:"\u641c\u7d22"+n.label+"\u8d44\u6599"}))},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.ui,r=n.row,i=n.selectRow,this.row=i||r||b,this.PageItems=new w(this.entity),e.next=5,this.onSearch(t);case 5:this.openPage(this.view);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"callOnSelected",value:function(e){this.closePage(),this.returnCall(e)}}]),t}(p.b),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(o.a)(t).call(this))).query=void 0,n.query=e,n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"load",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.query.loadSchema();case 2:if(!0!==this.query.isPaged){e.next=8;break}return e.next=5,this.query.page(this.param,this.pageStart,this.pageSize);case 5:t=e.sent,e.next=12;break;case 8:return e.next=10,this.query.query(this.param);case 10:n=e.sent,t=n[this.query.returns[0].name];case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){void 0===e&&(this.pageStart=0)}}]),t}(g.b),O=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),t}(p.a),j=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VQueryMain);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"VQueryMain",get:function(){return this.ui&&this.ui.main||y}}]),t}(O),x=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VQuerySelect,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"VQuerySelect",get:function(){return k}}]),t}(O);n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return x}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r,a,i,c=n(1),s=n.n(c),u=n(2),o=n(13),l=n(3),p=n(5),h=n(7),d=n(6),f=n(14),m=n(8),v=n(12),b=(n(19),n(0)),y=n(9),g=n(10),k=n(65),w=n(33),O=n(18),j=n(23),x=n(37),E=n(21),C=(r=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,c=new Array(r),p=0;p<r;p++)c[p]=arguments[p];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).uiItem=void 0,n.resUploader=void 0,Object(o.a)(n,"resId",a,Object(f.a)(n)),Object(o.a)(n,"overSize",i,Object(f.a)(n)),n.upload=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.resUploader){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.resUploader.upload();case 4:if(null!==(t=e.sent)){e.next=9;break}return n.overSize=!0,E.c.setTimeout("imageItemEdit upload",(function(){return n.overSize=!1}),3e3),e.abrupt("return");case 9:n.resId=t,n.isChanged=n.resId!==n.value;case 11:case"end":return e.stop()}}),e)}))),n.page=Object(y.a)((function(e){var t,r=e.resolve,a=b.createElement("button",{className:"btn btn-sm btn-success align-self-center",disabled:!n.isChanged,onClick:function(){return r(n.resId)}},"\u4fdd\u5b58");return!0===n.overSize&&(t=b.createElement("div",{className:"text-danger"},b.createElement("i",{className:"fa fa-times-circle"})," \u56fe\u7247\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc72M\uff0c\u65e0\u6cd5\u4e0a\u4f20")),b.createElement(j.a,{header:"\u66f4\u6539"+n.label,right:a},b.createElement("div",{className:"my-3 px-3 py-3 bg-white"},b.createElement("div",null,b.createElement("div",null,"\u4e0a\u4f20\u56fe\u7247\uff1a"),b.createElement("div",{className:"my-3"},b.createElement(k.a,{ref:function(e){return n.resUploader=e},multiple:!1,maxSize:2048})),b.createElement("div",null,b.createElement("button",{className:"btn btn-primary",onClick:n.upload},"\u4e0a\u4f20"))),t,b.createElement("div",{className:"small muted my-4"},"\u652f\u6301JPG\u3001GIF\u3001PNG\u683c\u5f0f\u56fe\u7247\uff0c\u4e0d\u8d85\u8fc72M\u3002"),b.createElement("div",{className:"d-flex"},b.createElement("div",{className:"w-12c h-12c mr-4",style:{border:"1px dotted gray",padding:"8px"}},b.createElement(w.a,{className:"w-100 h-100",src:n.resId})),b.createElement("div",null,b.createElement("div",{className:"small"},"\u56fe\u7247\u9884\u89c8"),b.createElement(w.a,{className:"w-4c h-4c mt-3",src:n.resId})))))})),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"internalStart",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.resId=this.value,e.abrupt("return",new Promise((function(e,n){O.b.push(b.createElement(t.page,{resolve:e,reject:n}),(function(){return n()}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(x.a),a=Object(v.a)(r.prototype,"resId",[g.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(v.a)(r.prototype,"overSize",[g.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r,a,i,c,s,u,o,l=n(24),p=n(1),h=n.n(p),d=n(2),f=n(13),m=n(3),v=n(5),b=n(12),y=(n(19),n(10)),g=n(32),k=(r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(m.a)(this,e),this.isFirst=!0,Object(f.a)(this,"loading",a,this),Object(f.a)(this,"beforeLoad",i,this),Object(f.a)(this,"loaded",c,this),this._items=void 0,Object(f.a)(this,"allLoaded",s,this),Object(f.a)(this,"topDiv",u,this),Object(f.a)(this,"bottomDiv",o,this),this.param=void 0,this.firstSize=100,this.pageStart=void 0,this.pageSize=30,this.appendPosition="tail",this._items=y.l.array([],{deep:t})}return Object(v.a)(e,[{key:"scrollToTop",value:function(){this.topDiv="$$"+Object(g.a)()}},{key:"scrollToBottom",value:function(){this.bottomDiv="$$"+Object(g.a)()}},{key:"reset",value:function(){this.isFirst=!0,this.beforeLoad=!0,this.loaded=!1,this.param=void 0,this.allLoaded=!1,this._items.clear()}},{key:"append",value:function(e){"tail"===this.appendPosition?this._items.unshift(e):this._items.push(e)}},{key:"first",value:function(){var e=Object(d.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reset(),this.beforeLoad=!1,this.param=t,e.next=5,this.more();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLoad",value:function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoaded",value:function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"more",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,n,r,a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.allLoaded){e.next=2;break}return e.abrupt("return");case 2:if(!0!==this.loading){e.next=4;break}return e.abrupt("return");case 4:return this.loading=!0,e.next=7,this.onLoad();case 7:return void 0===this.pageStart&&this.setPageStart(void 0),r=this.pageSize+1,!0===this.isFirst&&this.firstSize>this.pageSize&&(r=this.firstSize+1),e.next=12,this.load(this.param,this.pageStart,r);case 12:if(a=e.sent,this.loading=!1,this.loaded=!0,i=a.length,!0===this.isFirst&&i>this.firstSize||!1===this.isFirst&&i>this.pageSize?(this.allLoaded=!1,--i,a.splice(i,1)):this.allLoaded=!0,0!==i){e.next=20;break}return this._items.clear(),e.abrupt("return");case 20:this.setPageStart(a[i-1]),"tail"===this.appendPosition?(t=this._items).push.apply(t,Object(l.a)(a)):(n=this._items).unshift.apply(n,Object(l.a)(a.reverse())),this.isFirst=!1,this.onLoaded();case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"items",get:function(){return!0===this.beforeLoad?null:!1!==this.loaded?this._items:void 0}}]),e}(),a=Object(b.a)(r.prototype,"loading",[y.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(b.a)(r.prototype,"beforeLoad",[y.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=Object(b.a)(r.prototype,"loaded",[y.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=Object(b.a)(r.prototype,"allLoaded",[y.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(b.a)(r.prototype,"items",[y.e],Object.getOwnPropertyDescriptor(r.prototype,"items"),r.prototype),u=Object(b.a)(r.prototype,"topDiv",[y.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(b.a)(r.prototype,"bottomDiv",[y.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(){return r.createElement("div",{className:"d-flex h-100 align-items-center justify-content-center"},r.createElement("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r,a,i,c,s,u=n(13),o=n(14),l=n(12),p=(n(19),n(1)),h=n.n(p),d=n(2),f=n(3),m=n(5),v=n(7),b=n(6),y=n(8),g=n(0),k=n(18),w=n(33),O=n(23),j=n(9),x=n(10),E=n(21),C=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).fileInput=void 0,n.upload=Object(d.a)(h.a.mark((function e(){var t,r,a,i,c,s,u,o,l,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===(t=n.props.maxSize)||t<=0?t=1e11:t*=1024,r=k.b.resUrl+"upload",a=n.fileInput.files,i=new FormData,c=a.length,s=0;case 7:if(!(s<c)){e.next=15;break}if(!((u=a[s]).size>t)){e.next=11;break}return e.abrupt("return",null);case 11:i.append("files[]",u,u.name);case 12:s++,e.next=7;break;case 15:return e.prev=15,o=new AbortController,e.next=19,fetch(r,{method:"POST",body:i,signal:o.signal});case 19:return l=e.sent,e.next=22,l.json();case 22:return p=e.sent,e.abrupt("return",":"+p.res.id);case 26:e.prev=26,e.t0=e.catch(15),console.error("%s %s",r,e.t0);case 29:case"end":return e.stop()}}),e,null,[[15,26]])}))),n}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.multiple,a=t.onFilesChange;return g.createElement("input",{className:n,ref:function(t){return e.fileInput=t},onChange:a,type:"file",name:"file",multiple:r})}}]),t}(g.Component);Object(j.a)((a=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(n=Object(v.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).resUploader=void 0,Object(u.a)(n,"isChanged",i,Object(o.a)(n)),Object(u.a)(n,"resId",c,Object(o.a)(n)),Object(u.a)(n,"overSize",s,Object(o.a)(n)),n.upload=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.resUploader){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.resUploader.upload();case 4:if(null!==(t=e.sent)){e.next=9;break}return n.overSize=!0,E.c.setTimeout("imageItemEdit upload",(function(){return n.overSize=!1}),3e3),e.abrupt("return");case 9:n.resId=t,n.isChanged=n.resId!==n.props.id;case 11:case"end":return e.stop()}}),e)}))),n.onSaved=function(){var e=n.props.onSaved;e&&e(n.resId)},n}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.label,r=g.createElement("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!this.isChanged,onClick:this.onSaved},"\u4fdd\u5b58");return!0===this.overSize&&(e=g.createElement("div",{className:"text-danger"},g.createElement("i",{className:"fa fa-times-circle"})," \u56fe\u7247\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc72M\uff0c\u65e0\u6cd5\u4e0a\u4f20")),g.createElement(O.a,{header:n||"\u66f4\u6539\u56fe\u7247",right:r},g.createElement("div",{className:"my-3 px-3 py-3 bg-white"},g.createElement("div",null,g.createElement("div",null,"\u4e0a\u4f20\u56fe\u7247\uff1a"),g.createElement("div",{className:"my-3"},g.createElement(C,{ref:function(e){return t.resUploader=e},multiple:!1,maxSize:2048})),g.createElement("div",null,g.createElement("button",{className:"btn btn-primary",onClick:this.upload},"\u4e0a\u4f20"))),e,g.createElement("div",{className:"small muted my-4"},"\u652f\u6301JPG\u3001GIF\u3001PNG\u683c\u5f0f\u56fe\u7247\uff0c\u4e0d\u8d85\u8fc72M\u3002"),g.createElement("div",{className:"d-flex"},g.createElement("div",{className:"w-12c h-12c mr-4",style:{border:"1px dotted gray",padding:"8px"}},g.createElement(w.a,{className:"w-100 h-100",src:this.resId})),g.createElement("div",null,g.createElement("div",{className:"small"},"\u56fe\u7247\u9884\u89c8"),g.createElement(w.a,{className:"w-4c h-4c mt-3",src:this.resId})))))}}]),t}(g.Component),i=Object(l.a)(a.prototype,"isChanged",[x.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=Object(l.a)(a.prototype,"resId",[x.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=Object(l.a)(a.prototype,"overSize",[x.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r=a))},function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return w}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(20),o=n.n(u),l=n(17),p=n(54),h=n(45),d=n(67),f=n(36),m=n(68),v=n(69),b=n(70),y=n(71),g=n(58);function k(e){switch(e){case"tinyint":case"smallint":case"int":case"bigint":case"dec":return 0;case"char":case"text":return"";case"datetime":case"date":return"2000-1-1";case"time":return"0:00"}}var w=function(){function e(t,n,r,a){var i=this;Object(c.a)(this,e),this.actions={},this.sheets={},this.queries={},this.books={},this.maps={},this.histories={},this.pendings={},this.tuidsCache=void 0,this.localAccess=void 0,this.tvs=void 0,this.localMap=void 0,this.localModifyMax=void 0,this.tuids={},this.createBoxId=void 0,this.newVersion=void 0,this.uqOwner=void 0,this.uqName=void 0,this.name=void 0,this.uqApi=void 0,this.id=void 0,this.uqVersion=void 0,this.createBoxIdFromTVs=function(e,t){var n=e.name;return new g.a(t,e,i.tvs[n])},this.tuidArr=[],this.actionArr=[],this.sheetArr=[],this.queryArr=[],this.bookArr=[],this.mapArr=[],this.historyArr=[],this.pendingArr=[],this.createBoxId=r,void 0===r&&(this.createBoxId=this.createBoxIdFromTVs,this.tvs=a||{});var s=n.id,u=n.uqOwner,o=n.uqName,h=n.access,d=n.newVersion;this.newVersion=d,this.uqOwner=u,this.uqName=o,this.id=s,this.name=u+"/"+o,this.uqVersion=0,this.localMap=t.localMap.map(this.name),this.localModifyMax=this.localMap.child("$modifyMax"),this.localAccess=this.localMap.child("$access");var f;f=null===h||void 0===h||"*"===h?[]:h.split(";").map((function(e){return e.trim()})).filter((function(e){return e.length>0})),"$$$/$unitx"===this.name?this.uqApi=new l.d(l.g.unit):this.uqApi=new l.e("tv/",u,o,f,!0),this.tuidsCache=new p.TuidsCache(this)}return Object(s.a)(e,[{key:"tuid",value:function(e){return this.tuids[e.toLowerCase()]}},{key:"tuidDiv",value:function(e,t){var n=this.tuids[e.toLowerCase()];return n&&n.div(t.toLowerCase())}},{key:"action",value:function(e){return this.actions[e.toLowerCase()]}},{key:"sheet",value:function(e){return this.sheets[e.toLowerCase()]}},{key:"query",value:function(e){return this.queries[e.toLowerCase()]}},{key:"book",value:function(e){return this.books[e.toLowerCase()]}},{key:"map",value:function(e){return this.maps[e.toLowerCase()]}},{key:"history",value:function(e){return this.histories[e.toLowerCase()]}},{key:"pending",value:function(e){return this.pendings[e.toLowerCase()]}},{key:"sheetFromTypeId",value:function(e){for(var t in this.sheets){var n=this.sheets[t];if(n.typeId===e)return n}}},{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.init();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEntities",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.localAccess.get()){e.next=6;break}return e.next=5,this.uqApi.loadAccess();case 5:t=e.sent;case 6:if(t){e.next=8;break}return e.abrupt("return");case 8:this.buildEntities(t),"common"===this.uqName&&this.pullModify(12),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"buildEntities",value:function(e){this.localAccess.set(e);var t=e.access,n=e.tuids,r=e.version;this.uqVersion=r,this.buildTuids(n),this.buildAccess(t)}},{key:"loadEntitySchema",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqApi.schema(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTuid",value:function(e){return this.tuids[e]}},{key:"buildTuids",value:function(e){for(var t in e){var n=e[t],r=n.typeId,a=n.from;this.newTuid(t,r,a).sys=!0}for(var i in e){var c=e[i];this.getTuid(i).setSchema(c)}for(var s in this.tuids){this.tuids[s].buildFieldsTuid()}}},{key:"buildAccess",value:function(e){for(var t in e){var n=e[t];switch(typeof n){case"string":this.fromType(t,n);break;case"object":this.fromObj(t,n)}}}},{key:"cacheTuids",value:function(e){this.tuidsCache.cacheTuids(e)}},{key:"newAction",value:function(e,t){var n=this.actions[e];return void 0!==n?n:(n=this.actions[e]=new h.a(this,e,t),this.actionArr.push(n),n)}},{key:"newTuid",value:function(e,t,n){var r=this.tuids[e];return void 0!==r?r:(r=void 0!==n?new p.TuidImport(this,e,t,n):new p.TuidInner(this,e,t),this.tuids[e]=r,this.tuidArr.push(r),r)}},{key:"newQuery",value:function(e,t){var n=this.queries[e];return void 0!==n?n:(n=this.queries[e]=new f.a(this,e,t),this.queryArr.push(n),n)}},{key:"newBook",value:function(e,t){var n=this.books[e];return void 0!==n?n:(n=this.books[e]=new m.a(this,e,t),this.bookArr.push(n),n)}},{key:"newMap",value:function(e,t){var n=this.maps[e];return void 0!==n?n:(n=this.maps[e]=new b.a(this,e,t),this.mapArr.push(n),n)}},{key:"newHistory",value:function(e,t){var n=this.histories[e];if(void 0===n)return n=this.histories[e]=new v.a(this,e,t),this.historyArr.push(n),n}},{key:"newPending",value:function(e,t){var n=this.pendings[e];if(void 0===n)return n=this.pendings[e]=new y.a(this,e,t),this.pendingArr.push(n),n}},{key:"newSheet",value:function(e,t){var n=this.sheets[e];return void 0!==n?n:(n=this.sheets[e]=new d.a(this,e,t),this.sheetArr.push(n),n)}},{key:"fromType",value:function(e,t){var n=t.split("|");t=n[0];var r=Number(n[1]);switch(t){case"tuid":break;case"action":this.newAction(e,r);break;case"query":this.newQuery(e,r);break;case"book":this.newBook(e,r);break;case"map":this.newMap(e,r);break;case"history":this.newHistory(e,r);break;case"sheet":this.newSheet(e,r);break;case"pending":this.newPending(e,r)}}},{key:"fromObj",value:function(e,t){switch(t.$){case"sheet":this.buildSheet(e,t)}}},{key:"buildSheet",value:function(e,t){var n=this.sheets[e];void 0===n&&(n=this.newSheet(e,t.id)),n.build(t)}},{key:"buildFieldTuid",value:function(e,t){var n=this;if(void 0!==e){var r=!0,a=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value,o=u.tuid;if(void 0!==o){var l=this.getTuid(o);void 0!==l&&(u._tuid=l.buildTuidBox())}}}catch(b){a=!0,i=b}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}var p=!0,h=!1,d=void 0;try{for(var f,m=function(){var r=f.value,a=r.owner;if(void 0===a)return"continue";var i=e.find((function(e){return e.name===a}));if(void 0===i&&(void 0!==t&&(i=t.find((function(e){return e.name===a}))),void 0===i))throw new Error("owner field ".concat(a," is undefined"));var c=r.arr,s=r.tuid,u=n.getTuid(i._tuid.tuid.name);if(void 0===u)return"continue";var o=u.div(c||s);if(r._tuid=o&&o.buildTuidDivBox(i),void 0===r._tuid)throw new Error("owner field ".concat(a," is not tuid"))},v=e[Symbol.iterator]();!(p=(f=v.next()).done);p=!0)m()}catch(b){h=!0,d=b}finally{try{p||null==v.return||v.return()}finally{if(h)throw d}}}}},{key:"buildArrFieldsTuid",value:function(e,t){if(void 0!==e){var n=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value.fields;void 0!==s&&this.buildFieldTuid(s,t)}}catch(u){r=!0,a=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}}}},{key:"pullModify",value:function(e){this.tuidsCache.pullModify(e)}},{key:"entities",get:function(){return o.a.merge({},this.actions,this.sheets,this.queries,this.books,this.maps,this.histories,this.pendings,this.tuids)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(22),p=n(8),h=n(31),d=n(63),f=n(27),m=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).states=void 0,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"setSchema",value:function(e){Object(l.a)(Object(o.a)(t.prototype),"setSchema",this).call(this,e),this.states=e.states}},{key:"build",value:function(e){this.states=[];var t=!0,n=!1,r=void 0;try{for(var a,i=e.ops[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;this.states.push({name:c,actions:void 0})}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"createSheetState",value:function(e,t){var n={name:e,actions:[]},r=n.actions;for(var a in t){var i={name:a};r.push(i)}return n}},{key:"save",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.uq.id,i={app:r,discription:t,data:n},e.next=4,new b(this,i).request();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"action",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new y(this,{id:t,flow:n,state:r,action:i}).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"unpack",value:function(e){var t=e[0][0];return{brief:t,data:this.unpackSheet(t.data),flows:e[1]}}},{key:"getSheet",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new g(this,t).request();case 2:if(0!==(n=e.sent)[0].length){e.next=7;break}return e.next=6,this.getArchive(t);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",this.unpack(n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArchive",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new k(this,t).request();case 2:return n=e.sent,e.abrupt("return",this.unpack(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArchives",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={pageStart:t,pageSize:n},e.next=3,new w(this,r).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStateSheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={state:t,pageStart:n,pageSize:r},e.next=3,new O(this,i).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createPageStateItems",value:function(){return new C(this)}},{key:"stateSheetCount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new j(this,void 0).request();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"userSheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={state:t,user:n,pageStart:r,pageSize:i},e.next=3,new x(this,c).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"mySheets",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={state:t,pageStart:n,pageSize:r},e.next=3,new E(this,i).request();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"sheet"}}]),t}(h.a),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).suffix=void 0,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/").concat(this.suffix)}}]),t}(f.b),b=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"buildParams",value:function(){var e=this.params,t=e.app,n=e.discription,r=e.data;return{app:t,discription:n,data:this.entity.pack(r)}}},{key:"path",get:function(){return"sheet/".concat(this.entity.name)}}]),t}(v),y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).method="PUT",n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"path",get:function(){return"sheet/".concat(this.entity.name)}}]),t}(v),g=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).method="GET",n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"buildParams",value:function(){}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/get/").concat(this.params)}}]),t}(v),k=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).params=void 0,n.method="GET",n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"buildParams",value:function(){}},{key:"path",get:function(){return"sheet/".concat(this.entity.name,"/archive/").concat(this.params)}}]),t}(v),w=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).suffix="archives",n}return Object(p.a)(t,e),t}(v),O=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).suffix="states",n}return Object(p.a)(t,e),t}(v),j=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).method="GET",n.suffix="statecount",n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"xresult",value:function(e){return this.entity.states.map((function(t){var n=t.name,r=0,a=e.find((function(e){return e.state===n}));return void 0!==a&&(r=a.count),{state:n,count:r}}))}}]),t}(v),x=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).suffix="user-sheets",n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"xresult",value:function(e){return e}}]),t}(v),E=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).suffix="my-sheets",n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"xresult",value:function(e){return e}}]),t}(v),C=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(o.a)(t).call(this,!0))).sheet=void 0,n.sheet=e,n.pageSize=10,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"load",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sheet.getStateSheets(t,n,r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),a=n(5),i=n(7),c=n(6),s=n(8),u=n(36),o=n(27),l=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).queryApiName="book",n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"queryCaller",value:function(e){return new p(this,e)}},{key:"typeName",get:function(){return"book"}}]),t}(u.a),p=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"path",get:function(){return"book/".concat(this.entity.name)}}]),t}(o.d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),a=n(5),i=n(7),c=n(6),s=n(8),u=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).queryApiName="history",n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"typeName",get:function(){return"history"}}]),t}(n(36).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(22),p=n(8),h=n(31),d=n(45),f=n(27),m=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).keys=void 0,n.actions={},n.queries={},n.schemaFrom=void 0,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"setSchema",value:function(e){Object(l.a)(Object(o.a)(t.prototype),"setSchema",this).call(this,e),this.schemaFrom=this.schema.from;var n=e.actions,r=e.queries,a=e.keys;for(var i in this.uq.buildFieldTuid(this.keys=a),n){var c=n[i],s=c.name,u=this.uq.newAction(s,void 0);u.setSchema(c),u.buildFieldsTuid(),this.actions[i]=u}for(var p in r){var h=r[p],d=(s=h.name,this.uq.newQuery(s,void 0));d.setSchema(h),d.buildFieldsTuid(),this.queries[p]=d}}},{key:"add",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new b(this,t).request();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"del",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new y(this,t).request();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"all",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new g(this,void 0).request();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"page",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new k(this,{pageStart:n,pageSize:r,param:t}).request();case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"query",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new w(this,t),e.next=3,n.request();case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"table",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.query(t);case 2:n=e.sent,e.t0=a.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.abrupt("return",n[r]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"obj",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.table(t);case 2:if(!((n=e.sent).length>0)){e.next=5;break}return e.abrupt("return",n[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"scalar",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.obj(t);case 2:n=e.sent,e.t0=a.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.abrupt("return",n[r]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"typeName",get:function(){return"map"}}]),t}(h.a),v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"innerCall",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCaller(this.params),e.next=3,this.entity.uqApi.xcall(t);case 3:return n=e.sent,r=t.xresult(n.res),e.abrupt("return",{res:r});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildParams",value:function(){return Object(l.a)(Object(o.a)(t.prototype),"buildParams",this).call(this)}},{key:"entity",get:function(){return this._entity}},{key:"path",get:function(){}}]),t}(f.b),b=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getCaller",value:function(e){return new O(this.entity,this.entity.actions.add,e)}}]),t}(v),y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getCaller",value:function(e){return new j(this.entity,this.entity.actions.add,e)}}]),t}(v),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getCaller",value:function(e){return new x(this.entity,this.entity.queries.all,e)}}]),t}(v),k=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getCaller",value:function(e){return new E(this.entity,this.entity.queries.page,e)}}]),t}(v),w=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getCaller",value:function(e){return new C(this.entity,this.entity.queries.query,e)}}]),t}(v),O=function(e){function t(e,n,r){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,n,r))).map=void 0,a.map=e,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"path",get:function(){return"map/".concat(this.map.name,"/add")}},{key:"headers",get:function(){}}]),t}(d.b),j=function(e){function t(e,n,r){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,n,r))).map=void 0,a.map=e,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"path",get:function(){return"map/".concat(this.map.name,"/del")}},{key:"headers",get:function(){}}]),t}(d.b),x=function(e){function t(e,n,r){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,n,r))).map=void 0,a.map=e,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"path",get:function(){return"map/".concat(this.map.name,"/all")}},{key:"headers",get:function(){}}]),t}(f.c),E=function(e){function t(e,n,r){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,n,r))).map=void 0,a.map=e,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"path",get:function(){return"map/".concat(this.map.name,"/page")}},{key:"headers",get:function(){}}]),t}(f.c),C=function(e){function t(e,n,r){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,n,r))).map=void 0,a.map=e,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"path",get:function(){return"map/".concat(this.map.name,"/query")}},{key:"headers",get:function(){}}]),t}(f.d)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),a=n(5),i=n(7),c=n(6),s=n(8),u=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).queryApiName="pending",n}return Object(s.a)(t,e),Object(a.a)(t,[{key:"typeName",get:function(){return"pending"}}]),t}(n(36).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),i=n(11);function c(e,t){return a.a.createElement(i.FA,{className:e,name:t,fixWidth:!0})}var s={tuid:c("text-info","list-alt"),action:c("text-info","hand-o-right"),map:c("text-muted","list-ul"),book:c("text-muted","book"),query:c("text-warning","search"),history:c("text-info","hand-o-right"),pending:c("text-info","forward"),sheet:c("text-primary","wpforms")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),a=n(7),i=n(6),c=n(8),s=function(e){function t(e,n){var c;return Object(r.a)(this,t),(c=Object(a.a)(this,Object(i.a)(t).call(this,n))).cUq=void 0,c.cUq=e,c}return Object(c.a)(t,e),t}(n(11).Controller)},function(e,t,n){"use strict";var r=n(24),a=n(1),i=n.n(a),c=n(2),s=n(3),u=n(5),o=n(7),l=n(6),p=n(8),h=n(10),d=n(17),f=n(16),m=n(0),v=n.n(m),b=n(9),y=n(11),g=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).newClick=function(){return n.event("new")},n.schemaClick=function(){return n.event("schema")},n.archivesClick=function(){return n.event("archives")},n.sheetStateClick=function(e){return n.event("state",e)},n.renderState=function(e,t){var r=e.state,a=e.count;if(0===a)return null;var i=m.createElement("span",{className:"badge badge-success ml-5 align-self-end"},a);return m.createElement(y.LMR,{className:"px-3 py-2",left:n.controller.getStateLabel(r),right:i})},n.view=Object(b.a)((function(){var e,t=n.controller.statesCount.filter((function(e){return e.count})),r=m.createElement("button",{className:"btn btn-outline-primary",onClick:n.archivesClick},"\u5df2\u5f52\u6863");return!0===n.isDev&&(e=m.createElement("button",{className:"btn btn-primary mr-2",color:"primary",onClick:n.schemaClick},"\u6a21\u677f")),m.createElement(y.Page,{header:n.label},m.createElement(y.LMR,{className:"mx-3 my-2",right:r},m.createElement("button",{className:"btn btn-primary mr-2",color:"primary",onClick:n.newClick},"\u65b0\u5efa"),e),m.createElement(y.List,{className:"my-2",header:m.createElement(y.Muted,{className:"mx-3 my-1"},"\u5f85\u5904\u7406",n.label),none:"[ \u65e0 ]",items:t,item:{render:n.renderState,onClick:n.sheetStateClick}}))})),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.view);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(f.b),k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).vForm=void 0,n.onSubmit=Object(c.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.vForm.getValues(),r=n.vForm.values,e.next=4,n.controller.onSave(t,r);case 4:case"end":return e.stop()}}),e)}))),n.view=function(){return m.createElement(y.Page,{header:n.label},n.vForm.render())},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.vForm=this.createForm(this.onSubmit,t),this.openPage(this.view);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(f.b),w=n(46),O={width:"8rem"},j=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).vForm=void 0,n.sheetData=void 0,n.flowRow=function(e,t){var n,r=e.date,a=e.state,i=e.action;switch(void 0===i&&(i=m.createElement(m.Fragment,null,m.createElement(y.FA,{className:"text-primary",name:"pencil-square-o"})," \u5236\u5355")),a){case"$":break;case"#":n=m.createElement(m.Fragment,null,m.createElement(y.FA,{className:"text-success",name:"file-archive-o"}));break;default:n=m.createElement(m.Fragment,null,m.createElement(y.FA,{className:"text-muted",name:"arrow-right"})," \xa0 ",a)}return m.createElement(y.LMR,{left:m.createElement("div",{className:"pl-3 py-2",style:O},i),right:m.createElement("div",{className:"p-2"},m.createElement(y.Muted,null,m.createElement(y.EasyDate,{date:r})))},m.createElement("div",{className:"p-2"},n))},n.sheetView=function(){var e,t=n.sheetData,r=t.brief,a=t.flows;return"-"===r.state&&(e=m.createElement("div",{className:"mx-3 my-2",style:{color:"red"}},"\u672c\u5355\u636e\u4f5c\u5e9f")),m.createElement("div",null,e,n.vForm.render(),m.createElement(y.List,{header:m.createElement(y.Muted,{className:"mx-3 my-1"},"\u6d41\u7a0b"),items:a,item:{render:n.flowRow}}))},n}return Object(p.a)(t,e),t}(f.b),x=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).sheetData=void 0,n.onSubmit=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.vForm.getValues(),e.next=3,n.controller.saveSheet(t,n.vForm.values);case 3:n.closePage(),n.returnCall(n.vForm.values);case 5:case"end":return e.stop()}}),e)}))),n.view=function(){return m.createElement(y.Page,{header:n.label},n.vForm.render())},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sheetData=t,this.vForm=this.createForm(this.onSubmit,t.data,w.a.edit),this.openPage(this.view);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(j),E=n(15),C=n.n(E),N=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(u)))).actionClick=function(){var e=Object(c.a)(i.a.mark((function e(t){var r,a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.sheetData.brief,a=r.id,c=r.flow,s=r.state,e.next=3,n.controller.action(a,c,s,t.name);case 3:n.ceasePage(),n.openPage(n.acted);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.deleteClick=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:alert("\u5355\u636e\u4f5c\u5e9f\uff1a\u7a0b\u5e8f\u6b63\u5728\u8bbe\u8ba1\u4e2d");case 1:case"end":return e.stop()}}),e)}))),n.editClick=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.editSheet(n.sheetData);case 2:t=e.sent,n.vForm.setValues(t);case 4:case"end":return e.stop()}}),e)}))),n.page=function(){var e,t,a=n.sheetData.brief,i=a.state,c=a.no,s=n.controller.getStateLabel(i),u=n.entity.states.find((function(e){return e.name===i}));if(void 0===u){var o,l;switch(i){default:o="\u4e0d\u8ba4\u8bc6\u7684\u5355\u636e\u72b6\u6001'"+i+"'",l="text-info";break;case"-":o="\u5df2\u4f5c\u5e9f",l="text-danger";break;case"#":o="\u5df2\u5f52\u6863",l="text-success"}e=v.a.createElement("div",{className:C()(l)},"[",o,"]")}else e=v.a.createElement("div",{className:"flex-grow-1"},u.actions.map((function(e,t){return v.a.createElement("button",{key:t,className:"btn btn-primary mr-2",onClick:function(){return n.actionClick(e)}},n.controller.getActionLabel(i,e.name))}))),"$"===i&&(t=v.a.createElement("div",null,v.a.createElement("button",{className:"btn btn-outline-info ml-2",onClick:n.editClick},"\u4fee\u6539"),v.a.createElement("button",{className:"btn btn-outline-danger ml-2",onClick:n.deleteClick},"\u4f5c\u5e9f")));return v.a.createElement(y.Page,{header:n.label+":"+s+"-"+c},v.a.createElement("div",{className:"mb-2"},v.a.createElement("div",{className:"d-flex px-3 py-2 border-bottom bg-light"},e,t),v.a.createElement(r.sheetView,null)))},n.acted=function(){var e=n.sheetData.brief.discription;return v.a.createElement(y.Page,{header:"\u5df2\u5904\u7406",back:"close"},v.a.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},v.a.createElement("div",{className:"p-3"},e),v.a.createElement("div",{className:"text-success"},v.a.createElement(y.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u5904\u7406\uff01"),v.a.createElement("div",{className:"p-3"},v.a.createElement("button",{className:"btn btn-outline-info",onClick:function(){return n.backPage()}},"\u8fd4\u56de"))))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sheetData=t,this.vForm=this.createForm(void 0,t.data),this.openPage(this.page);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(j),S=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).view=function(){return m.createElement(y.Page,{header:n.label+"\u6a21\u677f"},m.createElement("pre",{className:"mx-3 my-2"},n.entity.schemaStringify()))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.view);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(f.b),P=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).list=void 0,n.archiveClick=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.processing){e.next=2;break}return e.abrupt("return");case 2:n.event("archived",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.archiveRow=function(e,t){var n=e.date,r=m.createElement(m.Fragment,null,1===e.processing?"... ":"",e.no," \xa0 ",e.discription),a=m.createElement(y.Muted,null,m.createElement(y.EasyDate,{date:n}));return m.createElement(y.LMR,{className:"px-3 py-2",left:r,right:a})},n.view=function(){return m.createElement(y.Page,{header:"\u5df2\u5f52\u6863"+n.label},m.createElement(y.List,{items:n.list,item:{render:n.archiveRow,onClick:n.archiveClick}}))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.getArchives(void 0,10);case 2:this.list=e.sent,this.openPage(this.view);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(f.b),T=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(u)))).row=void 0,n.stateName=void 0,n.stateLabel=void 0,n.rowClick=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.processing){e.next=3;break}return n.event("processing",t.id),e.abrupt("return");case 3:n.event("action",t.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onScrollBottom=function(){console.log("onScrollBottom"),n.controller.pageStateItems.more()},n.rowContent=function(e){var t=e.no,n=e.discription,r=e.date,a=e.processing,i=m.createElement(m.Fragment,null,t," \xa0 ",m.createElement(y.Muted,null,n)," ",1===a?"...":""),c=m.createElement(y.Muted,null,m.createElement(y.EasyDate,{date:r}));return m.createElement(y.LMR,{className:"px-3 py-2",left:i,right:c})},n.renderRow=function(e,t){return m.createElement(r.row,e)},n.view=function(){var e=n.controller.pageStateItems;return m.createElement(y.Page,{header:n.label+" - "+n.stateLabel,onScrollBottom:n.onScrollBottom},m.createElement(y.List,{items:e,item:{render:n.renderRow,onClick:n.rowClick}}))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.row=this.ui.listRow||this.rowContent,this.stateName=t.state,this.stateLabel=this.controller.getStateLabel(this.stateName),e.next=5,this.controller.pageStateItems.first(this.stateName);case 5:this.openPage(this.view);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(f.b),A=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).view=function(){var e=n.sheetData.brief;return m.createElement(y.Page,{header:n.label+"-"+e.no},m.createElement(r.sheetView,null))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sheetData=t,this.vForm=this.createForm(void 0,this.sheetData.data),this.openPage(this.view);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(j),I=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).brief=void 0,n.restart=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.ceasePage(),e.next=3,n.event("new");case 3:case"end":return e.stop()}}),e)}))),n.actionClick=function(){var e=Object(c.a)(i.a.mark((function e(t){var r,a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.ceasePage(),r=n.brief,a=r.id,c=r.flow,s=r.state,e.next=4,n.controller.action(a,c,s,t.name);case 4:n.openPage(n.acted);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.buttons=m.createElement(m.Fragment,null,m.createElement("button",{className:"btn btn-outline-primary mr-3",onClick:n.restart},"\u7ee7\u7eed\u5f00\u5355"),m.createElement("button",{className:"btn btn-outline-info",onClick:function(){return n.backPage()}},"\u8fd4\u56de")),n.view=function(){var e=n.entity.states,t=e.find((function(e){return"$"===e.name})),r=m.createElement(m.Fragment,null,t.actions.map((function(e,t){return m.createElement("button",{key:t,className:"btn btn-primary mr-3",onClick:function(){return n.actionClick(e)}},n.controller.getActionLabel("$",e.name))})));return m.createElement(y.Page,{header:"\u5df2\u4fdd\u5b58",back:"close"},m.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},m.createElement("div",{className:"text-success"},m.createElement(y.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u4fdd\u5b58\uff01\u7cfb\u7edf\u5c1a\u672a\u5904\u7406"),m.createElement("div",{className:"p-3"},r,n.buttons)))},n.acted=function(){return m.createElement(y.Page,null,m.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},m.createElement("div",{className:"text-success"},m.createElement(y.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u5904\u7406\uff01"),m.createElement("div",{className:"p-3"},n.buttons)))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.brief=t,this.openPage(this.view);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),t}(f.b)),F=function(e){function t(){var e,n,r=this;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).page=function(){var e=n.sheetData.brief,t=e.state,a=e.no,i=n.controller.getStateLabel(t);return v.a.createElement(y.Page,{header:n.label+":"+i+"-"+a},v.a.createElement("div",{className:"mb-2"},v.a.createElement("div",{className:"d-flex px-3 py-2 border-bottom bg-light"},"\u6b63\u5728\u5904\u7406\u4e2d..."),v.a.createElement(r.sheetView,null)))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.sheetData=t,this.vForm=this.createForm(void 0,t.data),this.openPage(this.page);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(j),q=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).statesCount=h.l.array([],{deep:!0}),n.curState=void 0,n.pageStateItems=void 0,n.onSave=function(){var e=Object(c.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.saveSheet(t,r);case 2:return a=e.sent,n.ceasePage(),e.next=6,n.showSaved(a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadStateSheetCount();case 2:return this.pageStateItems=this.entity.createPageStateItems(),e.next=5,this.openVPage(this.VSheetMain);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMessage",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,r=t.body,a=t.from,c=t.to,"sheet"===n&&this.onSheet(a,c,r);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onSheet",value:function(e,t,n){var r=this.user.id,a=n.id,i=n.preState,c=n.state;console.log({$:"onMessage sheet",from:e,to:t.join(","),id:a,preState:i,state:c,me:r,sheetData:n}),e===r&&this.sheetActPreState(a,i),void 0!==t.find((function(e){return e===r}))&&this.sheetActState(a,c,n)}},{key:"sheetActPreState",value:function(e,t){if(this.changeStateCount(t,-1),void 0!==this.curState&&this.curState===t){var n=this.pageStateItems.items.findIndex((function(t){return t.id===e}));n>=0&&this.pageStateItems.items.splice(n,1)}}},{key:"sheetActState",value:function(e,t,n){this.changeStateCount(t,1),void 0!==this.curState&&this.curState===t&&this.pageStateItems.items.findIndex((function(t){return t.id===e}))<0&&this.pageStateItems.items.push(n)}},{key:"changeStateCount",value:function(e,t){if(void 0!==e){var n=this.statesCount.findIndex((function(t){return t.state===e}));if(console.log({$:"changeState",state:e,delta:t,index:n}),!(n<0)){var r=this.statesCount[n];r.count+=t,r.count<0&&(r.count=0)}}}},{key:"onEvent",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="new"===e.t0?4:"schema"===e.t0?6:"archives"===e.t0?8:"state"===e.t0?10:"archived"===e.t0?13:"action"===e.t0?16:"processing"===e.t0?19:3;break;case 3:return e.abrupt("return");case 4:return r=this.VSheetNew,e.abrupt("break",22);case 6:return r=this.VSheetSchema,e.abrupt("break",22);case 8:return r=this.VArchives,e.abrupt("break",22);case 10:return this.curState=n.state,r=this.VSheetList,e.abrupt("break",22);case 13:return e.next=15,this.showArchived(n);case 15:return e.abrupt("return");case 16:return e.next=18,this.showAction(n);case 18:return e.abrupt("return");case 19:return e.next=21,this.showProcessing(n);case 21:return e.abrupt("return");case 22:return e.next=24,this.openVPage(r,n);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"startSheet",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStart();case 2:if(e.t0=e.sent,!1!==e.t0){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.onEvent("action",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showAction",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSheetData(t);case 2:return n=e.sent,Object(d.m)({body:{$type:"msg",action:"$sheet",msg:{id:t,uq:this.cUq.uq.id,state:n.brief.state}}}),e.next=6,this.openVPage(this.VSheetAction,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showProcessing",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSheetData(t);case 2:return n=e.sent,e.next=5,this.openVPage(this.VSheetProcessing,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editSheet",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vCall(this.VSheetEdit,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showArchived",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getArchived(t.id);case 2:return n=e.sent,e.next=5,this.openVPage(this.VArchived,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showSaved",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VSheetSaved,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStateUI",value:function(e){var t=this.res.states;if(void 0!==t)return t[e]}},{key:"getStateLabel",value:function(e){var t=this.getStateUI(e),n=t&&t.label||e;switch(n){default:return n;case"$":return"\u65b0\u5355"}}},{key:"getActionLabel",value:function(e,t){var n=this.getStateUI(e);if(void 0===n)return t;var r=n.actions;if(void 0===r)return t;var a=r[t];return a&&a.label||t}},{key:"loadStateSheetCount",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.statesCount.clear(),e.next=3,this.entity.stateSheetCount();case 3:n=e.sent,(t=this.statesCount).splice.apply(t,[0,0].concat(Object(r.a)(n)));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSheetData",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.getSheet(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArchived",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.getArchive(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveSheet",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.ui.sheetTitle,a=void 0===r?this.label:r(n,this.x),e.next=4,this.entity.save(a,t);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"action",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.entity.action(t,n,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"VSheetMain",get:function(){return this.ui&&this.ui.main||g}},{key:"VSheetNew",get:function(){return this.ui.sheetNew||k}},{key:"VSheetSaved",get:function(){return this.ui.sheetSaved||I}},{key:"VSheetEdit",get:function(){return this.ui.sheetEdit||x}},{key:"VSheetSchema",get:function(){return S}},{key:"VArchives",get:function(){return P}},{key:"VArchived",get:function(){return A}},{key:"VSheetList",get:function(){return T}},{key:"VSheetAction",get:function(){return this.ui.sheetAction||N}},{key:"VSheetProcessing",get:function(){return F}}]),t}(f.a);n.d(t,"a",(function(){return q}))},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(11),h=n(25),d=n(35),f=n(30),m=n(16),v=n(0),b=n.n(v),y=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).view=function(){return v.createElement(p.Page,{header:n.label},"Book")},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.view);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(m.b),g=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VBookMain);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"VBookMain",get:function(){return y}}]),t}(m.a),k=n(74),w=n(80),O=n(61),j=n(42),x=n(77),E=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(u.a)(this,Object(o.a)(t).call(this,e))).isSysVisible=!1,n.tuidLinks=void 0,n.mapLinks=void 0,n.sheetLinks=void 0,n.actionLinks=void 0,n.queryLinks=void 0,n.bookLinks=void 0,n.historyLinks=void 0,n.pendingLinks=void 0,n.view=function(){var e,t=n.controller,r=t.res,a=t.uq,i=t.error,c={render:function(e,t){return e.render()},onClick:void 0},s=[{header:r.tuid||"TUID",items:n.tuidLinks},{cn:"my-2",header:r.map||"MAP",items:n.mapLinks},{cn:"my-2",header:r.sheet||"SHEET",items:n.sheetLinks},{cn:"my-2",header:r.action||"ACTION",items:n.actionLinks},{cn:"my-2",header:r.query||"QUERY",items:n.queryLinks},{cn:"mt-2 mb-4",header:r.book||"BOOK",items:n.bookLinks},{cn:"mt-2 mb-4",header:r.history||"HISTORY",items:n.historyLinks},{cn:"mt-2 mb-4",header:r.pending||"PENDING",items:n.pendingLinks}];return e=void 0!==i?b.a.createElement("div",{className:"p-3 text-danger"},"\u8fde\u63a5\u9519\u8bef: ",i):s.map((function(e,t){var n=e.cn,r=e.header,a=e.items;return a.length>0&&b.a.createElement(p.List,{key:t,className:n,header:b.a.createElement("div",{className:"px-3 py-1 bg-light"},b.a.createElement(p.Muted,null,r)),items:a,item:c})})),b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"px-3 py-1 small"},r.uq||a),e)};var r=e.uq,a=r.tuidArr,i=r.mapArr,s=r.sheetArr,l=r.actionArr,h=r.queryArr,d=r.bookArr,m=r.historyArr,v=r.pendingArr;return n.tuidLinks=a.filter((function(e){return n.isVisible(e)})).map((function(e){return new f.a(n.controller.cTuidMain(e))})),n.mapLinks=i.filter((function(e){return n.isVisible(e)})).map((function(e){return new f.a(n.controller.cMap(e))})),n.sheetLinks=s.filter((function(e){return n.isVisible(e)})).map((function(e){return new f.a(n.controller.cSheet(e))})),n.actionLinks=l.filter((function(e){return n.isVisible(e)})).map((function(e){return new f.a(n.controller.cAction(e))})),n.queryLinks=h.filter((function(e){return n.isVisible(e)})).map((function(e){return new f.a(n.controller.cQuery(e))})),n.bookLinks=d.filter((function(e){return n.isVisible(e)})).map((function(e){return new f.a(n.controller.cBook(e))})),n.historyLinks=m.filter((function(e){return n.isVisible(e)})).map((function(e){return new f.a(n.controller.cHistory(e))})),n.pendingLinks=v.filter((function(e){return n.isVisible(e)})).map((function(e){return new f.a(n.controller.cPending(e))})),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"isVisible",value:function(e){return!0!==e.sys||this.isSysVisible}},{key:"render",value:function(e){return void 0===this.view?b.a.createElement("div",null,"??? viewModel \u5fc5\u987b\u5b9a\u4e49 view ???"):b.a.createElement(this.view)}}]),t}(p.View),C=n(79),N=n(81),S=n(41);function P(e){if(void 0!==e)for(var t in e)e[t.toLowerCase()]=e[t]}var T=function(e){function t(e,n,r){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,Object(p.resLang)(r.res)))).ui=void 0,a.tuidURs={},a.CTuidMain=void 0,a.CTuidEdit=void 0,a.CTuidList=void 0,a.CTuidSelect=void 0,a.CTuidInfo=void 0,a.CQuery=void 0,a.CQuerySelect=void 0,a.CMap=void 0,a.CAction=void 0,a.CSheet=void 0,a.CBook=void 0,a.CHistory=void 0,a.CPending=void 0,a.cApp=void 0,a.res=void 0,a.uq=void 0,a.error=void 0,a.createBoxId=function(e,t){var n=e.name,r=a.tuidURs[n];if(void 0===r){var i=a.getUI(e),c=i.ui,s=i.res;a.tuidURs[n]=r=new S.b(e,c,s)}return new S.a(r,t)},a.isSysVisible=!1,a.cApp=e,P(r.tuid),P(r.sheet),P(r.map),P(r.query),P(r.action),P(r.book),P(r.history),P(r.pending),a.ui=r,a.CTuidMain=r.CTuidMain||j.d,a.CTuidEdit=r.CTuidEdit||j.a,a.CTuidList=r.CTuidList||j.c,a.CTuidSelect=r.CTuidSelect||j.e,a.CTuidInfo=r.CTuidInfo||j.b,a.CQuery=r.CQuery||O.a,a.CQuerySelect=r.CQuerySelect||O.b,a.CMap=r.CMap||x.a,a.CAction=r.CAction||w.a,a.CSheet=r.CSheet||k.a,a.CBook=r.CBook||g,a.CHistory=r.CHistory||C.a,a.CPending=r.CPending||N.a,a.uq=new d.UqMan(e.uqs,n,a.createBoxId,void 0),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uq.init();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadEntities",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.uq.loadEntities();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"getQuerySearch",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=this.uq.query(t))){e.next=5;break}alert("QUERY ".concat(t," \u6ca1\u6709\u5b9a\u4e49!")),e.next=9;break;case 5:return e.next=7,n.loadSchema();case 7:n.returns.length>1&&alert("QUERY ".concat(t," \u8fd4\u56de\u591a\u5f20\u8868, \u65e0\u6cd5\u505aQuerySearch"));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTuidPlaceHolder",value:function(e){var t=this.res,n=t.tuidPlaceHolder,r=t.entity,a=e.name;if(void 0!==r)r[a];return n||"Select"}},{key:"getNone",value:function(){return this.res.none||"none"}},{key:"isVisible",value:function(e){return!0!==e.sys||this.isSysVisible}},{key:"navSheet",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=this.uq.sheetFromTypeId(t))){e.next=4;break}return alert("sheetTypeId "+t+" is not exists!"),e.abrupt("return");case 4:return i=this.cSheet(r),e.next=7,i.startSheet(n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sheet",value:function(e){return this.uq.sheet(e)}},{key:"action",value:function(e){return this.uq.action(e)}},{key:"query",value:function(e){return this.uq.query(e)}},{key:"book",value:function(e){return this.uq.book(e)}},{key:"map",value:function(e){return this.uq.map(e)}},{key:"history",value:function(e){return this.uq.history(e)}},{key:"pending",value:function(e){return this.uq.pending(e)}},{key:"tuid",value:function(e){return this.uq.tuid(e)}},{key:"tuidDiv",value:function(e,t){return this.uq.tuidDiv(e,t)}},{key:"cSheetFromName",value:function(e){var t=this.uq.sheet(e);if(void 0!==t)return this.cSheet(t)}},{key:"cActionFromName",value:function(e){var t=this.uq.action(e);if(void 0!==t)return this.cAction(t)}},{key:"cQueryFromName",value:function(e){var t=this.uq.query(e);if(void 0!==t)return this.cQuery(t)}},{key:"cBookFromName",value:function(e){var t=this.uq.book(e);if(void 0!==t)return this.cBook(t)}},{key:"cMapFromName",value:function(e){var t=this.uq.map(e);if(void 0!==t)return this.cMap(t)}},{key:"cHistoryFromName",value:function(e){var t=this.uq.history(e);if(void 0!==t)return this.cHistory(t)}},{key:"cPendingFromName",value:function(e){var t=this.uq.pending(e);if(void 0!==t)return this.cPending(t)}},{key:"cTuidMainFromName",value:function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidMain(t)}},{key:"cTuidEditFromName",value:function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidEdit(t)}},{key:"cTuidInfoFromName",value:function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidInfo(t)}},{key:"cTuidSelectFromName",value:function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidSelect(t)}},{key:"cFromName",value:function(e,t){switch(e){case"sheet":var n=this.uq.sheet(t);if(void 0===n)return;return this.cSheet(n);case"action":var r=this.uq.action(t);if(void 0===r)return;return this.cAction(r);case"tuid":var a=this.uq.tuid(t);if(void 0===a)return;return this.cTuidMain(a);case"query":var i=this.uq.query(t);if(void 0===i)return;return this.cQuery(i);case"book":var c=this.uq.book(t);if(void 0===c)return;return this.cBook(c);case"map":var s=this.uq.map(t);if(void 0===s)return;return this.cMap(s);case"history":var u=this.uq.history(t);if(void 0===u)return;return this.cHistory(u);case"pending":var o=this.uq.pending(t);if(void 0===o)return;return this.cPending(o)}}},{key:"linkFromName",value:function(e,t){return this.link(this.cFromName(e,t))}},{key:"getUI",value:function(e){var t,n,r=e.name,a=e.typeName;if(void 0!==this.ui)if("div"===a){var i=e.owner,c=this.ui[i.typeName];if(c){var s=c[i.name];if(s){var u=s.divs;u&&(t=u[r])}}}else{var o=this.ui[a];void 0!==o&&(t=o[r])}var l=this.res.entity;return void 0!==l&&(n=l[r]),{ui:t||{},res:n||{}}}},{key:"link",value:function(e){return new f.a(e)}},{key:"cTuidMain",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidMain||this.CTuidMain)(this,e,n,r)}},{key:"cTuidEdit",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidEdit||this.CTuidEdit)(this,e,n,r)}},{key:"cTuidList",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidList||this.CTuidList)(this,e,n,r)}},{key:"cTuidSelect",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidSelect||this.CTuidSelect)(this,e,n,r)}},{key:"cTuidInfo",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidInfo||this.CTuidInfo)(this,e,n,r)}},{key:"cSheet",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CSheet||this.CSheet)(this,e,n,r)}},{key:"cAction",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CAction||this.CAction)(this,e,n,r)}},{key:"cQuery",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CQuery||this.CQuery)(this,e,n,r)}},{key:"cQuerySelect",value:function(e){var t=this.uq.query(e);if(void 0!==t){var n=this.getUI(t),r=n.ui,a=n.res;return new(r&&r.CQuerySelect||this.CQuerySelect)(this,t,r,a)}}},{key:"cBook",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CBook||this.CBook)(this,e,n,r)}},{key:"cHistory",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CHistory||this.CHistory)(this,e,n,r)}},{key:"cPending",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CPending||this.CPending)(this,e,n,r)}},{key:"cMap",value:function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CMap||this.CMap)(this,e,n,r)}},{key:"getTuidContent",value:function(e){var t=this.getUI(e).ui;return t&&t.content||h.a}},{key:"getTuidDivContent",value:function(e){var t=e.owner,n=this.getUI(t).ui;return n&&n.divs&&n.divs[e.name].content||h.a}},{key:"showTuid",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.cTuidInfo(t),e.next=3,r.start(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"showTuidDiv",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.owner,i=this.cTuidInfo(r),e.next=4,i.start(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return new this.VUq(this).render()}},{key:"tuidLinks",get:function(){var e=this;return this.uq.tuidArr.filter((function(t){return e.isVisible(t)})).map((function(t){return e.link(e.cTuidMain(t))}))}},{key:"sheetLinks",get:function(){var e=this;return this.uq.sheetArr.filter((function(t){return e.isVisible(t)})).map((function(t){return e.link(e.cSheet(t))}))}},{key:"actionLinks",get:function(){var e=this;return this.uq.actionArr.filter((function(t){return e.isVisible(t)})).map((function(t){return e.link(e.cAction(t))}))}},{key:"queryLinks",get:function(){var e=this;return this.uq.queryArr.filter((function(t){return e.isVisible(t)})).map((function(t){return e.link(e.cQuery(t))}))}},{key:"bookLinks",get:function(){var e=this;return this.uq.bookArr.filter((function(t){return e.isVisible(t)})).map((function(t){return e.link(e.cBook(t))}))}},{key:"historyLinks",get:function(){var e=this;return this.uq.historyArr.filter((function(t){return e.isVisible(t)})).map((function(t){return e.link(e.cHistory(t))}))}},{key:"pendingLinks",get:function(){var e=this;return this.uq.pendingArr.filter((function(t){return e.isVisible(t)})).map((function(t){return e.link(e.cPending(t))}))}},{key:"mapLinks",get:function(){var e=this;return this.uq.mapArr.filter((function(t){return e.isVisible(t)})).map((function(t){return e.link(e.cMap(t))}))}},{key:"VUq",get:function(){return E}}]),t}(p.Controller);n.d(t,"a",(function(){return T}))},function(e,t,n){"use strict";var r,a,i=n(3),c=n(5),s=n(7),u=n(6),o=n(8),l=n(0),p=n(9),h=n(15),d=n.n(h),f=(n(143),Object(p.a)(r=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.badge,a=t.size,i=t.color,c=t.badgeAlign,s=t.badgeVertical,u=t.children,o=d()(n,"va-badge",a&&"va-badge-"+a,"va-badge-"+(i||"secondary"),c&&"va-badg-"+c,s&&"va-badg-"+s);return r&&(e=l.createElement("b",null,r)),l.createElement("div",{className:o},u,e)}}]),t}(l.Component)),n(144),Object(p.a)(a=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,n,r=this.props,a=r.className,i=r.left,c=r.children,s=r.right,u=r.onClick;return void 0!==i&&(e=l.createElement("header",null,i)),void 0!==s&&(t=l.createElement("footer",null,s)),void 0!==u&&(n="cursor-pointer"),l.createElement("div",{className:d()("va-lmr",a,n),onClick:u},e,l.createElement("div",null,c),t)}}]),t}(l.Component))||a),m=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.className,r=e.size,a=e.spin,i=e.fixWidth,c=e.border,s=e.pull,u=e.pulse,o=e.rotate,p=e.flip,h=e.inverse,f=d()(n,"fa",t&&"fa-"+t,r&&"fa-"+r,i&&"fa-fw",c&&"fa-border",s&&"fa-pull-"+s,a&&"fa-spin",u&&"fa-pulse",o&&"fa-rotate-"+o,p&&"fa-flip-"+p,h&&"fa-inverse");return l.createElement("i",{className:f})}}]),t}(l.Component),v=(l.Component,l.Component,function(e){return l.createElement("small",{className:d()("text-muted",e.className),style:e.style},e.children)});n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return v}))},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(5),s=n(7),u=n(6),o=n(8),l=n(3),p=n(20),h=n.n(p),d=n(10),f=n(35),m=n(25),v=n(16),b=n(0),y=n(9),g=n(15),k=n.n(g),w=n(11),O=n(41),j=function(e){function t(){var e,n,r=this;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).isFrom=void 0,n.itemRender=function(e,t){return b.createElement(r.ItemRow,{item:e})},n.ItemRow=Object(y.a)((function(e){var t,r,a,i,c,s,u=e.item,o=u.box,l=u.children,p=u.isLeaf,h=u.keyIndex,d=u.values,f=n.controller.keyUIs[h],v=f.content,y=f.valuesContent,g=f.none;if(!1===n.isFrom&&(t=b.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){return n.controller.addClick(u)}},b.createElement(w.FA,{name:"plus"})),r=b.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){return n.controller.removeClick(u)}},b.createElement(w.FA,{className:"text-info",name:"trash"}))),!1===p?a=0===h?t:b.createElement(b.Fragment,null,r," \xa0 ",t):h>0&&(a=r),!0===p)i=void 0,d&&(s=(y||m.a)(d,n.x));else{c="border-bottom";var j=g&&g(n.x);i=b.createElement(w.List,{className:"ml-4",items:l,item:{onClick:void 0,render:n.itemRender},none:j})}var x=b.createElement("div",{className:"py-1 pr-3"},Object(O.c)(o,v,n.x));return b.createElement("div",{className:"d-flex flex-column"},b.createElement(w.LMR,{className:k()("px-3","py-2",c),left:x,right:a},b.createElement("div",{className:"py-1"},s)),i)})),n}return Object(o.a)(t,e),Object(c.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isFrom=this.controller.isFrom,this.openPage(this.view);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"view",get:function(){var e=this;return function(){return b.createElement(w.Page,{header:e.label},b.createElement(w.List,{items:e.controller.items,item:{className:"my-2",onClick:void 0,render:e.itemRender}}))}}}]),t}(v.b),x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).vForm=void 0,n.onValuesSubmit=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.ceasePage(),t=n.vForm.getValues(),n.returnCall(t);case 3:case"end":return e.stop()}}),e)}))),n.view=function(){return b.createElement(w.Page,null,n.vForm.render())},n}return Object(o.a)(t,e),Object(c.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.vForm=this.createForm(this.onValuesSubmit),this.openPageElement(b.createElement(this.view,null));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(v.b),E=function e(t,n,r,a){Object(l.a)(this,e),this.parent=void 0,this.tuid=void 0,this.box=void 0,this.isLeaf=void 0,this.keyIndex=void 0,this.children=d.l.array([],{deep:!0}),this.values=void 0,this.parent=t,this.tuid=n,this.box=r,this.keyIndex=a,this.isLeaf=!1},C=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).isFrom=void 0,n.items=void 0,n.keyFields=void 0,n.keyUIs=void 0,n.addClick=function(){var e=Object(i.a)(a.a.mark((function e(t){var r,i,c,s,u,o,l,p,h,d,m,v,b,y,g,k,w,O,j,E,C,N,S,P,T,A,I,F,q,V,L,M,B;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.keyIndex,i=t.children,c=n.keyFields.length,s=c-1,!((u=r+1)>=c)){e.next=6;break}return e.abrupt("return");case 6:for(o=n.keyFields[u],l=o.name,p=o._tuid,h={},d={},m=t;void 0!==m;m=m.parent)b=(v=m).keyIndex,y=v.box,g=n.keyFields[b].name,h[g]=d[g]=y.id;return e.next=14,n.searchOnKey(o,h);case 14:if(!(void 0===(k=e.sent)||k<=0)){e.next=17;break}return e.abrupt("return");case 17:if(p.useId(k),w=p.boxId(k),O={},j={},r+1!==s){e.next=31;break}if(p.useId(k),j[l]=O[l]=w,!(n.entity.fields.length>0)){e.next=29;break}return e.next=27,n.vCall(x,d);case 27:for(C in E=e.sent)j[C]=O[C]=E[C];case 29:e.next=54;break;case 31:for(j[l]=d[l]=w,N=u+1;N<s;N++)d[n.keyFields[N].name]=0;for(O[n.keyFields[s].name]=0,S=n.entity.fields,P=!0,T=!1,A=void 0,e.prev=38,I=S[Symbol.iterator]();!(P=(F=I.next()).done);P=!0)q=F.value,V=q.type,!0!==q.null&&(O[q.name]=Object(f.fieldDefaultValue)(V));e.next=46;break;case 42:e.prev=42,e.t0=e.catch(38),T=!0,A=e.t0;case 46:e.prev=46,e.prev=47,P||null==I.return||I.return();case 49:if(e.prev=49,!T){e.next=52;break}throw A;case 52:return e.finish(49);case 53:return e.finish(46);case 54:return d.arr1=[O],e.next=57,n.entity.actions.add.submit(d);case 57:(L=i.findIndex((function(e){return e.box.id===k})))<0?i.push(n.createItem(t,p.tuid,w,u,j)):void 0!==(M=n.entity.fields)&&M.length>0&&(B=i[L],i.splice(L,1),B.values=j,i.splice(L,0,B)),n.removeCeased();case 60:case"end":return e.stop()}}),e,null,[[38,42,46,54],[47,,49,53]])})));return function(t){return e.apply(this,arguments)}}(),n.removeClick=function(){var e=Object(i.a)(a.a.mark((function e(t){var r,i,c,s,u,o,l,p,d,f,m,v,b,y,g,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.keyFields[t.keyIndex],i=r._tuid,c=n.cUq.cTuidMain(i.tuid),s=c.getLable(i.tuid),u=n.res.confirmDelete||h.a.template("do you really want to remove ${label}?"),!1!==window.confirm(u({label:s}))){e.next=7;break}return e.abrupt("return");case 7:for(o=n.entity,p=(l={}).arr1=[],d={},p.push(d),f=t;void 0!==f;f=f.parent)m=f.keyIndex,d[n.keyFields[m].name]=f.box.id;for(v=n.keyFields.length,b=t.keyIndex+1;b<v;b++)y=n.keyFields[b],d[y.name]=-1;return e.next=17,o.actions.del.submit(l);case 17:g=t.parent.children,(k=g.findIndex((function(e){return e===t})))>=0&&g.splice(k,1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(o.a)(t,e),Object(c.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c,s,u,o,l,p,f,v,b,y,g,k,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.entity,n=t.keys,r=t.schemaFrom,this.isFrom=void 0!==r,i=this.entity.queries.all,e.next=5,i.query({});case 5:for(c=e.sent,s=c.ret,u=n.length,this.keyUIs=h.a.clone(this.ui.keys||[]),this.keyFields=[],o=i.returns[0].fields,l=0;l<u;l++)this.keyFields.push(o[l]),l>=this.keyUIs.length&&this.keyUIs.push({content:m.a});for(this.items=Object(d.l)([]),p=void 0,f=!0,v=!1,b=void 0,e.prev=17,y=s[Symbol.iterator]();!(f=(g=y.next()).done);f=!0)k=g.value,void 0!==(w=this.addItem(p,k))&&(this.items.push(w),p=w);e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),v=!0,b=e.t0;case 25:e.prev=25,e.prev=26,f||null==y.return||y.return();case 28:if(e.prev=28,!v){e.next=31;break}throw b;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.next=35,this.openVPage(this.VMapMain);case 35:case"end":return e.stop()}}),e,this,[[17,21,25,33],[26,,28,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"createItem",value:function(e,t,n,r,a){var i=new E(e,t,n,r);return r===this.keyFields.length-1&&(i.isLeaf=!0,i.values=a),i}},{key:"addItem",value:function(e,t){for(var n=void 0,r=this.keyFields.length,a=e,i=0;i<r;i++){var c=this.keyFields[i],s=c.name,u=c._tuid,o=t[s];if(void 0===o)break;var l=o.id;if(0!==i){var p=a.children,h=p.length;if(h>0){var d=p[h-1];if(d.box.id===l){a=d;continue}}l>0&&p.push(a=this.createItem(a,u.tuid,o,i,t))}else{if(0===l)continue;void 0!==a&&a.box.id===l||(n=a=this.createItem(void 0,u.tuid,o,i,t))}}return n}},{key:"searchOnKey",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,s,u,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._tuid,i=r.tuid,c=r.ownerField,s=this.cUq.cTuidSelect(i),u=n,void 0!==c&&"object"===typeof(u=n[c.name])&&(u=u.id),e.next=7,s.call(u);case 7:return o=e.sent,e.abrupt("return",r.getIdFromObj(o));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"VMapMain",get:function(){return j}}]),t}(v.a);n.d(t,"a",(function(){return C}))},function(e,t,n){"use strict";var r=n(24),a=n(1),i=n.n(a),c=n(2),s=n(3),u=n(5),o=n(7),l=n(6),p=n(8),h=n(11),d=n(17),f=n(75),m=new(function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"userAppUnits",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-app-units",{app:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userFromId",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/user-name-nick-icon-from-id",{userId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.b))("tv/",void 0),v=n(35),b=n(0),y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).appPage=function(){var e=n.controller.caption;return b.createElement(h.Page,{header:e,logout:Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.g.unit=void 0;case 1:case"end":return e.stop()}}),e)})))},n.appContent())},n.appContent=function(){var e,t=n.controller.cUqArr;return e=0===t.length?b.createElement("div",{className:"text-danger"},b.createElement(h.FA,{name:""})," \u6b64APP\u6ca1\u6709\u7ed1\u5b9a\u4efb\u4f55\u7684UQ"):t.map((function(e,t){return b.createElement("div",{key:t},e.render())})),b.createElement(b.Fragment,null,e)},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.appPage);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return this.appContent()}}]),t}(h.VPage),g=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).page=function(e){var t=h.nav.user,r=t?t.name:"[\u672a\u767b\u5f55]",a=n.controller.uqs,i=a.appOwner,c=a.appName;return b.createElement(h.Page,{header:"APP\u65e0\u6cd5\u8fd0\u884c",logout:!0},b.createElement("div",{className:"m-3 text-danger container"},b.createElement("div",{className:"form-group row"},b.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u767b\u5f55\u7528\u6237"),b.createElement("div",{className:"col-sm text-body"},r)),b.createElement("div",{className:"form-group row"},b.createElement("div",{className:"col-sm-3 font-weight-bold"},"App"),b.createElement("div",{className:"col-sm text-body"},"".concat(i,"/").concat(c))),b.createElement("div",{className:"form-group row"},b.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u9884\u8bbe\u5c0f\u53f7"),b.createElement("div",{className:"col-sm text-body"},e||b.createElement("small",{className:""},"[\u65e0\u9884\u8bbe\u5c0f\u53f7]"))),b.createElement("div",{className:"form-group row"},b.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u53ef\u80fd\u539f\u56e0",b.createElement(h.FA,{name:"exclamation-triangle"})),b.createElement("div",{className:"col-sm text-body"},b.createElement("ul",{className:"p-0"},b.createElement("li",null,"\u6ca1\u6709\u5c0f\u53f7\u8fd0\u884c ",c),b.createElement("li",null,"\u7528\u6237 ",b.createElement("b",null,r)," \u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u8fd0\u884c",c,"\u7684\u5c0f\u53f7"),e&&b.createElement("li",null,"\u9884\u8bbe\u5c0f\u53f7 ",b.createElement("b",null,e)," \u6ca1\u6709\u8fd0\u884cApp ",c)))),b.createElement("div",{className:"form-group row"},b.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u5c0f\u53f7",e),b.createElement("div",{className:"col-sm text-body"},"\u9884\u8bbe\u5c0f\u53f7\u5b9a\u4e49\u5728 public/unit.json \u6587\u4ef6\u4e2d\u3002 \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u7531url\u76f4\u63a5\u542f\u52a8\u3002 \u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95eeapp\u4e4b\u540e\uff0c\u4f1a\u7f13\u5b58\u5728localStorage\u91cc\u3002",b.createElement("br",null),"\u5982\u679c\u8981\u5220\u53bb\u7f13\u5b58\u7684\u9884\u5b9a\u4e49Unit\uff0clogout\u7136\u540e\u518dlogin\u3002"))))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(h.VPage),k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).renderRow=function(e,t){var n=e.id,r=e.nick,a=e.name;return b.createElement(h.LMR,{className:"px-3 py-2",right:"id: "+n},b.createElement("div",null,r||a))},n.onRowClick=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.g.unit=t.id,e.next=3,n.controller.start();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=function(){return b.createElement(h.Page,{header:"\u9009\u62e9\u5c0f\u53f7",logout:!0},b.createElement(h.List,{items:n.controller.appUnits,item:{render:n.renderRow,onClick:n.onRowClick}}))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"open",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(h.VPage),w=n(43),O=function(e){function t(e){var n;if(Object(s.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,Object(h.resLang)(e&&e.res)))).cUqCollection={},n.cImportUqs={},n.ui=void 0,n.name=void 0,n.version=void 0,n.uqs=void 0,n.caption=void 0,n.appUnits=void 0,h.nav.setSettings(e),n.name=e.appName,n.version=e.version,void 0===n.name)throw new Error('appName like "owner/app" must be defined in UI');return n.uqs=new v.UQsMan(n.name,void 0),void 0===e.uqs&&(e.uqs={}),n.ui=e,n.caption=n.res.caption||"Tonva",n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getImportUq",value:function(e,t){var n=e+"/"+t,r=this.cImportUqs[n];return void 0!==r?r:(this.cImportUqs[n]=r=this.getCUq(n),r)}},{key:"newCUq",value:function(e,t){var n=new(this.ui.CUq||f.a)(this,e,t);return Object.setPrototypeOf(n.x,this.x),n}},{key:"getCUq",value:function(e){return this.cUqCollection[e]}},{key:"beforeStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.load();case 3:if(t=e.sent,n=d.g.predefinedUnit,!(void 0!==(r=h.nav.user)&&r.id>0)){e.next=26;break}return e.next=9,m.userAppUnits(this.uqs.id);case 9:this.appUnits=e.sent,e.t0=this.appUnits.length,e.next=0===e.t0?13:1===e.t0?15:21;break;case 13:return this.showUnsupport(n),e.abrupt("return",!1);case 15:if(!(void 0===(a=this.appUnits[0].id)||a<0||void 0!==n&&a!==n)){e.next=19;break}return this.showUnsupport(n),e.abrupt("return",!1);case 19:return d.g.unit=a,e.abrupt("break",26);case 21:if(!(n>0&&void 0!==this.appUnits.find((function(e){return e.id===n})))){e.next=24;break}return d.g.unit=n,e.abrupt("break",26);case 24:return this.openVPage(k),e.abrupt("return",!1);case 26:if(void 0===t){e.next=29;break}return this.openVPage(w.a,t),e.abrupt("return",!1);case 29:return e.abrupt("return",!0);case 32:return e.prev=32,e.t1=e.catch(0),this.openVPage(w.b,e.t1),e.abrupt("return",!1);case 36:case"end":return e.stop()}}),e,this,[[0,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"userFromId",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.userFromId(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,c,s,u,o,l,p,h,f,m,v,b,y,g,k,w,O,j,x,E,C,N,S,P,T,A,I,F,q,V,L,M,B,R,D;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.uqs,n=t.appOwner,a=t.appName,c=this.uqs.localData,(s=c.get())&&s.version===this.version){e.next=28;break}return e.next=6,Object(d.k)(n,a);case 6:for((s=e.sent).version=this.version,c.set(s),u=!0,o=!1,l=void 0,e.prev=12,p=s.uqs[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)h.value.newVersion=!0;e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),o=!0,l=e.t0;case 20:e.prev=20,e.prev=21,u||null==p.return||p.return();case 23:if(e.prev=23,!o){e.next=26;break}throw l;case 26:return e.finish(23);case 27:return e.finish(20);case 28:for(m=(f=s).id,v=f.uqs,this.uqs.id=m,b=[],y=[],g=[],k=!0,w=!1,O=void 0,e.prev=36,j=v[Symbol.iterator]();!(k=(x=j.next()).done);k=!0)E=x.value,C=E.uqOwner,N=E.uqName,S=C+"/"+N,P=this.ui.uqs[S]||{},T=this.newCUq(E,P),this.cUqCollection[S]=T,this.uqs.addUq(T.uq),y.push(T.init());e.next=44;break;case 40:e.prev=40,e.t1=e.catch(36),w=!0,O=e.t1;case 44:e.prev=44,e.prev=45,k||null==j.return||j.return();case 47:if(e.prev=47,!w){e.next=50;break}throw O;case 50:return e.finish(47);case 51:return e.finish(44);case 52:return e.next=54,Promise.all(y);case 54:for(A in this.cUqCollection)I=this.cUqCollection[A],g.push(I.loadEntities());return e.next=57,Promise.all(g);case 57:F=e.sent,q=!0,V=!1,L=void 0,e.prev=61,M=F[Symbol.iterator]();case 63:if(q=(B=M.next()).done){e.next=72;break}if(R=B.value,void 0===(D=R)){e.next=69;break}return b.push(D),e.abrupt("continue",69);case 69:q=!0,e.next=63;break;case 72:e.next=78;break;case 74:e.prev=74,e.t2=e.catch(61),V=!0,L=e.t2;case 78:e.prev=78,e.prev=79,q||null==M.return||M.return();case 81:if(e.prev=81,!V){e.next=84;break}throw L;case 84:return e.finish(81);case 85:return e.finish(78);case 86:if(0!==b.length){e.next=90;break}if(b.push.apply(b,Object(r.a)(this.uqs.setTuidImportsLocal())),0!==b.length){e.next=90;break}return e.abrupt("return");case 90:return e.abrupt("return",b);case 91:case"end":return e.stop()}}),e,this,[[12,16,20,28],[21,,23,27],[36,40,44,52],[45,,47,51],[61,74,78,86],[79,,81,85]])})));return function(){return e.apply(this,arguments)}}()},{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0!==t&&this.clearPrevPages(),e.next=3,this.showMainPage();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearPrevPages",value:function(){h.nav.clear()}},{key:"showUnsupport",value:function(e){this.clearPrevPages(),this.openVPage(g,e)}},{key:"showMainPage",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=Object(d.h)())){e.next=17;break}if(!((n=t.split("-")).length>3)){e.next=17;break}if("sheet"!==(r=n[3])&&"sheet_debug"!==r){e.next=17;break}if(a=Number(n[4]),c=Number(n[5]),s=Number(n[6]),void 0!==(u=this.getCUqFromId(a))){e.next=13;break}return alert("unknown uqId: "+a),e.abrupt("return");case 13:return this.clearPrevPages(),e.next=16,u.navSheet(c,s);case 16:return e.abrupt("return");case 17:this.openVPage(this.VAppMain);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCUqFromId",value:function(e){for(var t in this.cUqCollection){var n=this.cUqCollection[t];if(n.uq.id===e)return n}}},{key:"cUqArr",get:function(){var e=[];for(var t in this.cUqCollection)e.push(this.cUqCollection[t]);return e}},{key:"VAppMain",get:function(){return this.ui&&this.ui.main||y}}]),t}(h.Controller);n.d(t,"a",(function(){return O}))},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(16),h=n(0),d=n(11),f=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).view=function(){return h.createElement(d.Page,{header:n.label},"History")},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.view);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(p.b),m=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VHistoryMain);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"VHistoryMain",get:function(){return f}}]),t}(p.a);n.d(t,"a",(function(){return m}))},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(16),h=n(0),d=n(11),f=n(25),m=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).vForm=void 0,n.returns=void 0,n.onSubmit=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.vForm.getValues(),e.next=3,n.controller.submit(t);case 3:n.returns=e.sent,n.closePage(),n.openPage(n.resultPage);case 6:case"end":return e.stop()}}),e)}))),n.mainPage=function(){var e=n.controller.label;return h.createElement(d.Page,{header:e},n.vForm.render("mx-3 my-2"))},n.resultPage=function(){var e=n.controller.label;return h.createElement(d.Page,{header:e,back:"close"},"\u5b8c\u6210\uff01",h.createElement("pre",null,Object(f.b)(n.returns)))},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.vForm=this.createForm(this.onSubmit,t),this.openPage(this.mainPage);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(p.b),v=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VActionMain);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.entity.submit(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submitReturns",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.entity.submitReturns(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"VActionMain",get:function(){return m}}]),t}(p.a);n.d(t,"a",(function(){return v}))},function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(7),o=n(6),l=n(8),p=n(16),h=n(0),d=n(11),f=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(a)))).view=function(){return h.createElement(d.Page,{header:n.label},"pending")},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"open",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.view);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(p.b),m=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"internalStart",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openVPage(this.VPendingMain);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"VPendingMain",get:function(){return f}}]),t}(p.a);n.d(t,"a",(function(){return m}))},function(e,t,n){e.exports=n.p+"static/media/logo.7a5e7f51.png"},function(e,t,n){e.exports=n.p+"static/media/assistlogo.d68e7334.png"},,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return b}));var r=n(7),a=n(6),i=n(8),c=n(1),s=n.n(c),u=n(2),o=n(3),l=n(5),p=n(0),h=n(18),d=n(23),f=n(21),m=function(){function e(t){var n=this;Object(o.a)(this,e),this.res=void 0,this.x=void 0,this.icon=void 0,this.label=void 0,this.isDev=f.c.isDevelopment,this.receiveHandlerId=void 0,this.disposer=void 0,this.onMessageReceive=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.onMessage(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._resolve_$=void 0,this.res=t||{},this.x=this.res.x||{}}return Object(l.a)(e,[{key:"user",get:function(){return h.b.user}},{key:"isLogined",get:function(){var e=h.b.user;return void 0!==e&&e.id>0}}]),Object(l.a)(e,[{key:"dispose",value:function(){h.b.unregisterReceiveHandler(this.receiveHandlerId),this.onDispose()}},{key:"onDispose",value:function(){}},{key:"openVPage",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new t(this).open(n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"renderView",value:function(e,t){return new e(this).render(t)}},{key:"event",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onEvent(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEvent",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"msg",value:function(e){alert(e)}},{key:"errorPage",value:function(e,t){this.openPage(p.createElement(d.a,{header:"App error!"},p.createElement("pre",null,"string"===typeof t?t:t.message)))}},{key:"onMessage",value:function(e){}},{key:"beforeStart",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"registerReceiveHandler",value:function(){this.receiveHandlerId=h.b.registerReceiveHandler(this.onMessageReceive)}},{key:"start",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.disposer=this.dispose.bind(this),this.registerReceiveHandler(),e.next=4,this.beforeStart();case 4:if(!1!==e.sent){e.next=7;break}return e.abrupt("return");case 7:for(n=i.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=i[a];return e.next=10,this.internalStart.apply(this,[t].concat(r));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,i=this,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=c.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=c[a];return void 0===this._resolve_$&&(this._resolve_$=[]),e.abrupt("return",new Promise(function(){var e=Object(u.a)(s.a.mark((function e(n,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i._resolve_$.push(n),e.next=3,i.start.apply(i,[t].concat(r));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"vCall",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===this._resolve_$&&(this._resolve_$=[]),e.abrupt("return",new Promise(function(){var e=Object(u.a)(s.a.mark((function e(a,i){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r._resolve_$.push(a),e.next=3,new t(r).open(n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"returnCall",value:function(e){if(void 0!==this._resolve_$){var t=this._resolve_$.pop();void 0!==t?t(e):alert("the Controller call already returned, or not called")}}},{key:"openPage",value:function(e){h.b.push(e,this.disposer),this.disposer=void 0}},{key:"replacePage",value:function(e){h.b.replace(e,this.disposer),this.disposer=void 0}},{key:"backPage",value:function(){h.b.back()}},{key:"closePage",value:function(e){h.b.pop(e)}},{key:"ceasePage",value:function(e){h.b.ceaseTop(e)}},{key:"removeCeased",value:function(){h.b.removeCeased()}},{key:"regConfirmClose",value:function(e){h.b.regConfirmClose(e)}},{key:"isCalling",get:function(){return void 0!==this._resolve_$}}]),e}(),v=function(){function e(t){Object(o.a)(this,e),this.controller=void 0,this.res=void 0,this.x=void 0,this.controller=t,this.res=t.res,this.x=t.x}return Object(l.a)(e,[{key:"renderVm",value:function(e,t){return new e(this.controller).render(t)}},{key:"openVPage",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new t(this.controller).open(n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"event",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.event(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"vCall",value:function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.vCall(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"returnCall",value:function(e){this.controller.returnCall(e)}},{key:"openPage",value:function(e,t){var n=typeof t;"object"===n||"undefined"===n?this.controller.openPage(p.createElement(e,t)):this.controller.openPage(p.createElement(d.a,{header:"param type error"},"View.openPage param must be object, but here is ",n))}},{key:"replacePage",value:function(e,t){this.controller.replacePage(p.createElement(e,t))}},{key:"openPageElement",value:function(e){this.controller.openPage(e)}},{key:"replacePageElement",value:function(e){this.controller.replacePage(e)}},{key:"backPage",value:function(){this.controller.backPage()}},{key:"closePage",value:function(e){this.controller.closePage(e)}},{key:"ceasePage",value:function(e){this.controller.ceasePage(e)}},{key:"removeCeased",value:function(){this.controller.removeCeased()}},{key:"regConfirmClose",value:function(e){this.controller.regConfirmClose(e)}},{key:"isDev",get:function(){return f.c.isDevelopment}}]),e}(),b=function(e){function t(){return Object(o.a)(this,t),Object(r.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(l.a)(t,[{key:"render",value:function(e){return null}}]),t}(v)},function(e,t,n){"use strict";var r=n(97);n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"EasyDate")&&n.d(t,"EasyDate",(function(){return r.EasyDate})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"Muted")&&n.d(t,"Muted",(function(){return r.Muted})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return r.TabCaptionComponent})),n.o(r,"Tabs")&&n.d(t,"Tabs",(function(){return r.Tabs})),n.o(r,"UserIcon")&&n.d(t,"UserIcon",(function(){return r.UserIcon})),n.o(r,"Widget")&&n.d(t,"Widget",(function(){return r.Widget})),n.o(r,"emailRegex")&&n.d(t,"emailRegex",(function(){return r.emailRegex})),n.o(r,"mobileRegex")&&n.d(t,"mobileRegex",(function(){return r.mobileRegex})),n.o(r,"resLang")&&n.d(t,"resLang",(function(){return r.resLang})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start})),n.o(r,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return r.toUiSelectItems})),n.o(r,"tv")&&n.d(t,"tv",(function(){return r.tv}));var a=n(98);n.o(a,"CAppBase")&&n.d(t,"CAppBase",(function(){return a.CAppBase})),n.o(a,"CBase")&&n.d(t,"CBase",(function(){return a.CBase})),n.o(a,"CSub")&&n.d(t,"CSub",(function(){return a.CSub})),n.o(a,"EasyDate")&&n.d(t,"EasyDate",(function(){return a.EasyDate})),n.o(a,"EasyTime")&&n.d(t,"EasyTime",(function(){return a.EasyTime})),n.o(a,"Edit")&&n.d(t,"Edit",(function(){return a.Edit})),n.o(a,"FA")&&n.d(t,"FA",(function(){return a.FA})),n.o(a,"Form")&&n.d(t,"Form",(function(){return a.Form})),n.o(a,"Image")&&n.d(t,"Image",(function(){return a.Image})),n.o(a,"LMR")&&n.d(t,"LMR",(function(){return a.LMR})),n.o(a,"List")&&n.d(t,"List",(function(){return a.List})),n.o(a,"Muted")&&n.d(t,"Muted",(function(){return a.Muted})),n.o(a,"PropGrid")&&n.d(t,"PropGrid",(function(){return a.PropGrid})),n.o(a,"SearchBox")&&n.d(t,"SearchBox",(function(){return a.SearchBox})),n.o(a,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return a.TabCaptionComponent})),n.o(a,"Tabs")&&n.d(t,"Tabs",(function(){return a.Tabs})),n.o(a,"UserIcon")&&n.d(t,"UserIcon",(function(){return a.UserIcon})),n.o(a,"Widget")&&n.d(t,"Widget",(function(){return a.Widget})),n.o(a,"emailRegex")&&n.d(t,"emailRegex",(function(){return a.emailRegex})),n.o(a,"mobileRegex")&&n.d(t,"mobileRegex",(function(){return a.mobileRegex})),n.o(a,"resLang")&&n.d(t,"resLang",(function(){return a.resLang})),n.o(a,"start")&&n.d(t,"start",(function(){return a.start})),n.o(a,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return a.toUiSelectItems})),n.o(a,"tv")&&n.d(t,"tv",(function(){return a.tv}));var i=n(99);n.d(t,"toUiSelectItems",(function(){return i.a}))},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e){if(void 0!==e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value,u=s.indexOf(":"),o=void 0,l=void 0;u<0?o=Number(s):(o=Number(s.substr(0,u)),l=s.substr(u+1)),t.push({value:o,title:l})}}catch(p){r=!0,a=p}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return t}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=/^[0-9]*$/,a=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/},function(e,t,n){"use strict";var r=n(3),a=n(5),i=n(7),c=n(6),s=n(8),u=n(0),o=n(15),l=n.n(o);u.Component},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p}));var r=n(3),a=n(5),i=n(7),c=n(6),s=n(8),u=n(0);function o(e,t){if(!e)return null;var n;switch(typeof e){default:n=e;break;case"string":n=new Date(e);break;case"number":n=new Date(1e3*e)}var r,a,i,c,s,u,o,l=new Date,p=n;r=l.getTime()-p.getTime();var h=p.getHours(),d=p.getMinutes();return a=l.getDate(),i=p.getDate(),c=p.getMonth()+1,s=p.getFullYear(),o=l.getFullYear(),u=!0===t?" "+h+(d<10?":0":":")+d:"",r<-864e5?s===o?c+"\u6708"+i+"\u65e5"+u:s+"\u5e74"+c+"\u6708"+i+"\u65e5"+u:r<864e5?i!==a?(r<0?"\u660e\u5929 ":"\u6628\u5929 ")+u:!0===t?u:"\u4eca\u5929":s===o?c+"\u6708"+i+"\u65e5":s+"\u5e74"+c+"\u6708"+i+"\u65e5"}var l=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return o(this.props.date,!1)}}]),t}(u.Component),p=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return o(this.props.date,!0)}}]),t}(u.Component)},function(e,t,n){"use strict";var r=n(3),a=n(5),i=n(7),c=n(6),s=n(8),u=n(0),o=n(15),l=n.n(o),p=n(11);u.Component},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r,a,i=n(1),c=n.n(i),s=n(2),u=n(13),o=n(3),l=n(5),p=n(7),h=n(6),d=n(14),f=n(8),m=n(12),v=(n(19),n(0)),b=n(15),y=n.n(b),g=n(10),k=(r=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).input=void 0,n.key=null,Object(u.a)(n,"disabled",a,Object(d.a)(n)),n.onChange=function(e){n.key=e.target.value,void 0!==n.key&&(n.key=n.key.trim(),""===n.key&&(n.key=void 0)),!0!==n.props.allowEmptySearch&&(n.disabled=!n.key)},n.onSubmit=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===n.key&&(n.key=n.props.initKey||""),!0===n.props.allowEmptySearch){e.next=6;break}if(n.key){e.next=5;break}return e.abrupt("return");case 5:n.input&&(n.input.disabled=!0);case 6:return e.next=8,n.props.onSearch(n.key);case 8:n.input&&(n.input.disabled=!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"clear",value:function(){this.input&&(this.input.value="")}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.className,i=r.inputClassName,c=r.onFocus,s=r.label,u=r.placeholder,o=r.buttonText,l=r.maxLength;switch(r.size){default:case"sm":e="input-group-sm";break;case"md":e="input-group-md";break;case"lg":e="input-group-lg"}return void 0!==s&&(t=v.createElement("label",{className:"input-group-addon"},s)),v.createElement("form",{className:a,onSubmit:this.onSubmit},v.createElement("div",{className:y()("input-group",e)},t,v.createElement("input",{ref:function(e){return n.input=e},onChange:this.onChange,type:"text",name:"key",onFocus:c,className:y()("form-control",i||"border-primary"),placeholder:u,defaultValue:this.props.initKey,maxLength:l}),v.createElement("div",{className:"input-group-append"},v.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.disabled},v.createElement("i",{className:"fa fa-search"}),v.createElement("i",{className:"fa"}),o))))}}]),t}(v.Component),a=Object(m.a)(r.prototype,"disabled",[g.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n(15),i=n.n(a),c=n(18),s=n(9),u=n(10),o=n(17),l=Object(s.a)((function(e){var t=e.className,n=e.style,a=e.id,s=e.altImage,u=e.noneImage,o=h(a);if(!o)return r.createElement("div",{className:i()(t,"image-none"),style:n},u||r.createElement("i",{className:"fa fa-file-o"}));var l=o.icon;return l?(!0===l.startsWith(":")&&(l=c.b.resUrl+l.substr(1)),r.createElement("img",{src:l,className:t,alt:"img",style:n,onError:function(e){e.currentTarget.src=s||"https://tv.jkchemical.com/imgs/0001.png"}})):r.createElement("div",{className:i()(t,"image-none"),style:n},r.createElement("i",{className:"fa fa-file-o"}))})),p=(Object(s.a)((function(e){var t=e.id,n=e.render,a=h(t);return a?n(a):r.createElement(r.Fragment,null)})),Object(u.l)(new Map));function h(e){if(null!==e){switch(typeof e){case"object":if(!(e=e.id))return}if(!1!==p.has(e)){var t=p.get(e);if(null!==t)return t}else o.r.user(e).then((function(t){t||(t=null),p.set(e,t)})).catch((function(e){console.error(e)}))}}},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(21),o=function(){function e(t){var n=this;Object(c.a)(this,e),this.uq=void 0,this.modifyMax=void 0,this.cacheTimer=void 0,this.loadIds=function(){n.clearCacheTimer();var e=n.uq.tuids;for(var t in e){e[t].cacheIds()}},this.uq=t}return Object(s.a)(e,[{key:"cacheTuids",value:function(e){this.clearCacheTimer(),this.cacheTimer=u.c.setTimeout("TuidsCache.cacheTuids",this.loadIds,e)}},{key:"clearCacheTimer",value:function(){void 0!==this.cacheTimer&&(u.c.clearTimeout(this.cacheTimer),this.cacheTimer=void 0)}},{key:"pullModify",value:function(e){if(void 0!==e){var t=Math.floor(Date.now()/1e3);void 0===this.modifyMax&&(this.modifyMax=this.uq.localModifyMax.get(),void 0===this.modifyMax&&(this.modifyMax={max:e,seconds:t},this.uq.localModifyMax.set(this.modifyMax)));var n=this.modifyMax,r=n.max;if(!(t-n.seconds<3600)&&!(e<=r)){var a=[],i=this.uq.tuids;for(var c in i)a.push(c);0!==a.length&&(this.modifyMax.seconds=t,this.innerPullModify(a.join("\t")))}}}},{key:"innerPullModify",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s,u,o,l,p,h,d,f,m,v,b,y,g,k,w,O,j,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.uq,r=n.uqApi,i=n.tuids,c=this.modifyMax.max,e.next=4,r.queueModify(c,30,t);case 4:s=e.sent,u={},o=0,l=!0,p=!1,h=void 0,e.prev=10,d=s.queue[Symbol.iterator]();case 12:if(l=(f=d.next()).done){e.next=25;break}if(m=f.value,v=m.id,b=m.entity,y=m.key,void 0!==(g=i[b])){e.next=18;break}return e.abrupt("continue",22);case 18:void 0===(k=u[b])&&(k=u[b]={tuid:g,ids:[]}),k.ids.push(y),v>o&&(o=v);case 22:l=!0,e.next=12;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(10),p=!0,h=e.t0;case 31:e.prev=31,e.prev=32,l||null==d.return||d.return();case 34:if(e.prev=34,!p){e.next=37;break}throw h;case 37:return e.finish(34);case 38:return e.finish(31);case 39:e.t1=a.a.keys(u);case 40:if((e.t2=e.t1()).done){e.next=47;break}return w=e.t2.value,O=u[w],g=O.tuid,j=O.ids,e.next=45,g.modifyIds(j);case 45:e.next=40;break;case 47:x=Math.floor(Date.now()/1e3),this.modifyMax={max:o,seconds:x},this.uq.localModifyMax.set(this.modifyMax);case 50:case"end":return e.stop()}}),e,this,[[10,27,31,39],[32,,34,38]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(1),a=n.n(r),i=n(2),c=n(3),s=n(5),u=n(21),o=n(66),l=n(11),p=function(){function e(t,n){Object(c.a)(this,e),this.collection=void 0,this.tvs=void 0,this.name=void 0,this.appOwner=void 0,this.appName=void 0,this.localMap=void 0,this.localData=void 0,this.id=void 0,this.tvs=n||{},this.buildTVs(),this.collection={};var r=t.split("/");if(2!==r.length)throw new Error("tonvaApp name must be / separated, owner/app");this.appOwner=r[0],this.appName=r[1],this.localMap=u.c.localDb.map(t),this.localData=this.localMap.child("uqData")}return Object(s.a)(e,[{key:"addUq",value:function(e){this.collection[e.name]=e}},{key:"buildTVs",value:function(){for(var e in this.tvs){var t=this.tvs[e];if(void 0!==t){var n=e.toLowerCase();if(n!==e)for(var r in this.tvs[n]=t,t){var a=t[r];if(void 0!==a){var i=r.toLowerCase();i!==r&&(t[i]=a)}}}}}},{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,s,u,l,p,h,d,f,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=!0,i=!1,c=void 0,e.prev=4,s=t[Symbol.iterator]();!(r=(u=s.next()).done);r=!0)l=u.value,p=l.uqOwner,h=l.uqName,d=p+"/"+h,f=new o.a(this,l,void 0,this.tvs[d]||this.tvs[h]),this.collection[d]=f,(m=d.toLowerCase())!==d&&(this.collection[m]=f),n.push(f.init());e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),i=!0,c=e.t0;case 12:e.prev=12,e.prev=13,r||null==s.return||s.return();case 15:if(e.prev=15,!i){e.next=18;break}throw c;case 18:return e.finish(15);case 19:return e.finish(12);case 20:return e.next=22,Promise.all(n);case 22:case"end":return e.stop()}}),e,this,[[4,8,12,20],[13,,15,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,c,s,u,o,l,p,h,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=[],n=[],this.collection)i=this.collection[r],n.push(i.loadEntities());return e.next=5,Promise.all(n);case 5:c=e.sent,s=!0,u=!1,o=void 0,e.prev=9,l=c[Symbol.iterator]();case 11:if(s=(p=l.next()).done){e.next=20;break}if(h=p.value,void 0===(d=h)){e.next=17;break}return t.push(d),e.abrupt("continue",17);case 17:s=!0,e.next=11;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),u=!0,o=e.t0;case 26:e.prev=26,e.prev=27,s||null==l.return||l.return();case 29:if(e.prev=29,!u){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",t);case 35:case"end":return e.stop()}}),e,this,[[9,22,26,34],[27,,29,33]])})));return function(){return e.apply(this,arguments)}}()},{key:"buildUQs",value:function(){var e=this,t=this,n={},r=function(r){for(var a=e.collection[r],i=a.uqName,c=i.toLowerCase(),s=a.entities,u=0,o=Object.keys(s);u<o.length;u++){var l=s[o[u]];s[l.name.toLowerCase()]=l}n[c]=new Proxy(s,{get:function(e,n,r){var a=e[n.toLowerCase()];if(void 0!==a)return a;console.error("error in uqs entity undefined"),t.showReload("\u4ee3\u7801\u9519\u8bef\uff1a\u65b0\u589e uq ".concat(i," entity ").concat(String(n)))}})};for(var a in this.collection)r(a);return new Proxy(n,{get:function(e,n,r){var a=e[n.toLowerCase()];if(void 0!==a)return a;console.error("error in uqs"),t.showReload("\u4ee3\u7801\u9519\u8bef\uff1a\u65b0\u589e uq ".concat(String(n)))}})}},{key:"showReload",value:function(e){this.localMap.removeAll(),l.nav.showReloadPage(e)}},{key:"setTuidImportsLocal",value:function(){var e=[];for(var t in this.collection){var n=this.collection[t],r=!0,a=!1,i=void 0;try{for(var c,s=n.tuidArr[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;if(!0===u.isImport){var o=this.setInner(u);o&&e.push(o)}}}catch(l){a=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}return e}},{key:"setInner",value:function(e){var t=e.from,n=t.owner+"/"+t.uq,r=this.collection[n];if(void 0===r)return"setInner(tuidImport: TuidImport): uq ".concat(n," is not loaded");var a=e.name,i=r.tuid(a);return void 0===i?"setInner(tuidImport: TuidImport): uq ".concat(n," has no Tuid ").concat(a):!0===i.isImport?"setInner(tuidImport: TuidImport): uq ".concat(n," Tuid ").concat(a," is import"):void e.setFrom(i)}}]),e}()},function(e,t,n){"use strict";n(78),n(110),n(75),n(80),n(42),n(74),n(61),n(77),n(79),n(81),n(28),n(46);var r=n(111);n.o(r,"CAppBase")&&n.d(t,"CAppBase",(function(){return r.CAppBase})),n.o(r,"CBase")&&n.d(t,"CBase",(function(){return r.CBase})),n.o(r,"CSub")&&n.d(t,"CSub",(function(){return r.CSub})),n.o(r,"Controller")&&n.d(t,"Controller",(function(){return r.Controller})),n.o(r,"EasyDate")&&n.d(t,"EasyDate",(function(){return r.EasyDate})),n.o(r,"EasyTime")&&n.d(t,"EasyTime",(function(){return r.EasyTime})),n.o(r,"Edit")&&n.d(t,"Edit",(function(){return r.Edit})),n.o(r,"FA")&&n.d(t,"FA",(function(){return r.FA})),n.o(r,"Form")&&n.d(t,"Form",(function(){return r.Form})),n.o(r,"Image")&&n.d(t,"Image",(function(){return r.Image})),n.o(r,"LMR")&&n.d(t,"LMR",(function(){return r.LMR})),n.o(r,"List")&&n.d(t,"List",(function(){return r.List})),n.o(r,"NavView")&&n.d(t,"NavView",(function(){return r.NavView})),n.o(r,"Page")&&n.d(t,"Page",(function(){return r.Page})),n.o(r,"PropGrid")&&n.d(t,"PropGrid",(function(){return r.PropGrid})),n.o(r,"SearchBox")&&n.d(t,"SearchBox",(function(){return r.SearchBox})),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",(function(){return r.TabCaptionComponent})),n.o(r,"Tabs")&&n.d(t,"Tabs",(function(){return r.Tabs})),n.o(r,"UserIcon")&&n.d(t,"UserIcon",(function(){return r.UserIcon})),n.o(r,"VPage")&&n.d(t,"VPage",(function(){return r.VPage})),n.o(r,"View")&&n.d(t,"View",(function(){return r.View})),n.o(r,"Widget")&&n.d(t,"Widget",(function(){return r.Widget})),n.o(r,"nav")&&n.d(t,"nav",(function(){return r.nav})),n.o(r,"start")&&n.d(t,"start",(function(){return r.start})),n.o(r,"toUiSelectItems")&&n.d(t,"toUiSelectItems",(function(){return r.toUiSelectItems})),n.o(r,"tv")&&n.d(t,"tv",(function(){return r.tv}));n(73),n(16),n(30),n(72)},function(e,t,n){"use strict";n(1),n(2),n(0),n(78)},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(5),a=n(7),i=n(6),c=n(8),s=n(3),u=n(0),o=function e(){Object(s.a)(this,e),this.model=void 0},l=function(e){function t(e,n){var r;return Object(s.a)(this,t),(r=Object(a.a)(this,Object(i.a)(t).call(this))).main=void 0,r.sub=void 0,r.renderSubs=function(){return r.subsContainer(r.renderSubItems())},r.main=e,r.sub=n,r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"subsContainer",value:function(e){return u.createElement("div",null,e)}},{key:"renderSubItems",value:function(){var e=this,t=this.model.subs;return t?t.map((function(t,n){return u.createElement(e.sub,Object.assign({key:n},t))})):null}},{key:"render",value:function(){var e=this.model.main;return u.createElement(u.Fragment,null,u.createElement(this.main,e),u.createElement(this.renderSubs,null))}}]),t}(o)},function(e,t){},,,,,function(e,t,n){"use strict";var r,a,i,c,s,u,o,l,p,h,d,f,m,v=n(1),b=n.n(v),y=n(2),g=n(3),k=n(5),w=n(7),O=n(6),j=n(8),x=n(0),E=n(10),C=n(15),N=n.n(C),S=n(24),P=n(13),T=n(12),A=(n(19),n(22)),I=n(20),F=n.n(I),q=function e(){Object(g.a)(this,e)},V=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(O.a)(t).call(this))).func=void 0,n.func=e,n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"check",value:function(e,t){var n=this.func(t);if(void 0!==n)switch(typeof n){case"undefined":return;case"string":return void e.push(n);default:return void e.push.apply(e,Object(S.a)(n))}}}]),t}(q),L=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(O.a)(t).call(this))).res=void 0,n.res=e,n}return Object(j.a)(t,e),t}(q),M=function(e){function t(){return Object(g.a)(this,t),Object(w.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"check",value:function(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(!1===isNaN(t))return;break;case"undefined":}e.push(this.res.required)}}]),t}(L),B=function(e){function t(e,n,r){var a;return Object(g.a)(this,t),(a=Object(w.a)(this,Object(O.a)(t).call(this,e))).minMsg=void 0,a.maxMsg=void 0,a.min=void 0,a.max=void 0,a.minMsg=F.a.template(e.min),a.maxMsg=F.a.template(e.max),a.min=n,a.max=r,a}return Object(j.a)(t,e),Object(k.a)(t,[{key:"check",value:function(e,t){if(void 0!==t&&null!==t){var n=Number(t);!0===isNaN(n)?e.push(this.res.number):this.checkMore(e,n)}}},{key:"checkMore",value:function(e,t){void 0!==this.min&&Number(t)<this.min&&e.push(this.minMsg({min:this.min})),void 0!==this.max&&Number(t)>this.max&&e.push(this.maxMsg({max:this.max}))}}]),t}(L),R=function(e){function t(){return Object(g.a)(this,t),Object(w.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"checkMore",value:function(e,n){Object(A.a)(Object(O.a)(t.prototype),"checkMore",this).call(this,e,n),!1===Number.isInteger(n)&&e.push(this.res.integer)}}]),t}(B),D=n(9),U=(r=function(){function e(t,n,r,s){var u=this;Object(g.a)(this,e),this.name=void 0,this.context=void 0,this.fieldProps=void 0,this.children=void 0,this._itemSchema=void 0,this._ui=void 0,this.defaultValue=void 0,this.value=void 0,this.rules=void 0,Object(P.a)(this,"errors",a,this),Object(P.a)(this,"contextErrors",i,this),this.readOnly=void 0,this.disabled=void 0,Object(P.a)(this,"visible",c,this),this.isChanging=void 0,this.onInputChange=function(e){u.changeValue(e.target.value,!0)},this.container=Object(D.a)((function(){if(!1===u.visible)return null;var e=u.context,t=e.form;if(!0===e.inNode)return u.render();var n=u.label;return!0===u.itemSchema.required&&!1!==t.props.requiredFlag&&null!==n&&(n=x.createElement(x.Fragment,null,n,"\xa0",x.createElement("span",{className:"text-danger"},"*"))),t.FieldContainer(n,u.renderBody())})),this.context=t;var o=n.name;if(this.name=o,this._itemSchema=n,this.fieldProps=r,this.children=s,this._ui=t.getUiItem(o),void 0===this.ui)this.readOnly=!1,this.disabled=!1,this.visible=!0;else{var l=this.ui,p=l.readOnly,h=l.disabled,d=l.visible;this.readOnly=!0===p,this.disabled=!0===h,this.visible=!(!1===d)}this.value=this.defaultValue=t.getValue(o),this.init()}return Object(k.a)(e,[{key:"hasError",get:function(){return this.errors.length+this.contextErrors.length>0}}]),Object(k.a)(e,[{key:"init",value:function(){if(this.rules=[],!0===this.itemSchema.required&&this.rules.push(new M(this.context.form.res)),this.buildRules(),void 0!==this.ui){var e=this.ui.rules;if(void 0!==e)if(!1!==Array.isArray(e)){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;this.rules.push(new V(c))}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}else this.rules.push(new V(e))}}},{key:"buildRules",value:function(){}},{key:"checkRules",value:function(){var e,t=[],n=!0,r=!1,a=void 0;try{for(var i,c=this.rules[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){i.value.check(t,this.value)}}catch(s){r=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}0===t.length?this.context.removeErrorWidget(this):(this.context.addErrorWidget(this),(e=this.errors).push.apply(e,t))}},{key:"setError",value:function(e){var t;void 0!==e&&("string"===typeof e?this.errors.push(e):(t=this.errors).push.apply(t,Object(S.a)(e)))}},{key:"setContextError",value:function(e){var t;void 0!==e&&("string"===typeof e?this.contextErrors.push(e):(t=this.contextErrors).push.apply(t,Object(S.a)(e)))}},{key:"clearError",value:function(){this.errors.splice(0)}},{key:"clearContextError",value:function(){this.contextErrors.splice(0)}},{key:"parse",value:function(e){return e}},{key:"setElementValue",value:function(e){}},{key:"setDataValue",value:function(e){!0!==this.isChanging&&(this.context.initData[this.name]=this.value=this.parse(e))}},{key:"setValue",value:function(e){!0!==this.isChanging&&this.changeValue(e,!1)}},{key:"getValue",value:function(){return this.context.getValue(this.name)}},{key:"getReadOnly",value:function(){return this.readOnly}},{key:"getDisabled",value:function(){return this.disabled}},{key:"getVisible",value:function(){return this.visible}},{key:"setReadOnly",value:function(e){this.readOnly=e}},{key:"setDisabled",value:function(e){this.disabled=e}},{key:"setVisible",value:function(e){this.visible=e}},{key:"changeValue",value:function(e,t){var n,r,a=this.value;void 0!==this.ui&&(n=this.ui.onChanging,r=this.ui.onChanged);var i=!0;void 0!==n&&(this.isChanging=!0,i=n(this.context,this.value,a),this.isChanging=!1),!0===i&&(this.setDataValue(e),!0!==t&&this.setElementValue(e),void 0!==r&&(this.isChanging=!0,r(this.context,this.value,a),this.isChanging=!1))}},{key:"renderBody",value:function(){var e;if(!1===this.hasError&&this.ui){var t=this.ui,n=t.discription,r=t.discriptionClassName;void 0===r&&(r="small text-muted"),e=x.createElement("span",{className:r},n)}return x.createElement(x.Fragment,null,this.render(),e)}},{key:"renderTemplet",value:function(){if(void 0!==this.children)return x.createElement(x.Fragment,null,this.children);if(void 0!==this.ui){var e=this.ui.Templet;return"function"===typeof e?e(this.value):e}}},{key:"renderErrors",value:function(){var e=[].concat(Object(S.a)(this.errors),Object(S.a)(this.contextErrors));if(0===e.length)return null;var t=!0===this.context.inNode?"span":"div";return e.map((function(e){return x.createElement(t,{key:e,className:"text-danger d-inline-block my-2 ml-3"},x.createElement(x.Fragment,null,x.createElement("i",{className:"fa fa-exclamation-circle"})," \xa0",e))}))}},{key:"itemSchema",get:function(){return this._itemSchema}},{key:"ui",get:function(){return this._ui}},{key:"isOk",get:function(){return 0===this.errors.length}},{key:"className",get:function(){var e;return!1===this.context.inNode&&(e="form-control"),N()(e,this.context.form.FieldClass,this.ui&&this.ui.className)}},{key:"label",get:function(){var e;if(void 0===this.ui)e=this.name;else{var t=this.ui.label;e=null===t?null:t||this.name}return e}}]),e}(),a=Object(T.a)(r.prototype,"errors",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(T.a)(r.prototype,"contextErrors",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(T.a)(r.prototype,"hasError",[E.e],Object.getOwnPropertyDescriptor(r.prototype,"hasError"),r.prototype),c=Object(T.a)(r.prototype,"visible",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(T.a)(r.prototype,"isOk",[E.e],Object.getOwnPropertyDescriptor(r.prototype,"isOk"),r.prototype),r),z=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="text",n.input=void 0,n.onKeyDown=function(){var e=Object(y.a)(b.a.mark((function e(t){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.internalOnKeyDown(t),13===t.keyCode){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==(r=n.context.form.props.onEnter)){e.next=6;break}return e.abrupt("return");case 6:return n.changeValue(t.currentTarget.value,!0),n.input.blur(),e.next=10,r(n.name,n.context);case 10:void 0!==(a=e.sent)&&n.context.setError(n.name,a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"setElementValue",value:function(e){null!==this.input&&(this.input.value=e)}},{key:"internalOnKeyDown",value:function(e){}},{key:"onBlur",value:function(e){this.onInputChange(e),this.checkRules(),this.context.checkContextRules()}},{key:"onFocus",value:function(e){this.clearError(),this.context.removeErrorWidget(this),this.context.clearErrors()}},{key:"onChange",value:function(e){}},{key:"setReadOnly",value:function(e){null!==this.input&&(this.input.readOnly=this.readOnly=e)}},{key:"setDisabled",value:function(e){null!==this.input&&(this.input.disabled=this.disabled=e)}},{key:"render",value:function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,x.createElement(x.Fragment,null,x.createElement("input",{ref:function(t){return e.input=t},className:N()(this.className,n),type:this.inputType,defaultValue:this.value,onChange:function(t){return e.onChange(t)},placeholder:this.placeholder,readOnly:this.readOnly,disabled:this.disabled,onKeyDown:this.onKeyDown,onFocus:function(t){return e.onFocus(t)},onBlur:function(t){return e.onBlur(t)},maxLength:this.itemSchema.maxLength}),this.renderErrors())}},{key:"ui",get:function(){return this._ui}},{key:"placeholder",get:function(){return this.ui&&this.ui.placeholder||this.name}}]),t}(U),H=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).input=void 0,n.onInputChange=function(e){n.setValue(e.currentTarget.value)},n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"setElementValue",value:function(e){this.input.value=e}},{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,x.createElement(x.Fragment,null,x.createElement("textarea",{ref:function(t){return e.input=t},className:N()(this.className,n),rows:this.ui&&this.ui.rows,maxLength:this.itemSchema.maxLength,defaultValue:this.defaultValue,onChange:this.onInputChange}),this.renderErrors())}},{key:"itemSchema",get:function(){return this._itemSchema}},{key:"ui",get:function(){return this._ui}}]),t}(U),_=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="password",n}return Object(j.a)(t,e),t}(z),W=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="url",n}return Object(j.a)(t,e),t}(z),$=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="email",n}return Object(j.a)(t,e),t}(z),K=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="number",n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"buildRules",value:function(){Object(A.a)(Object(O.a)(t.prototype),"buildRules",this).call(this);var e=this.context.form.res,n=this.itemSchema,r=n.min,a=n.max;this.rules.push("integer"===this.itemSchema.type?new B(e,r,a):new R(e,r,a))}},{key:"parse",value:function(e){if(void 0!==e&&null!==e)return Number(e)}},{key:"itemSchema",get:function(){return this._itemSchema}}]),t}(z),Q=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="number",n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"isValidKey",value:function(e){return 46===e||8===e||37===e||39===e||e>=48&&e<=57||e>=96&&e<=105||109===e||189===e}},{key:"internalOnKeyDown",value:function(e){var t=e.keyCode;window.event.returnValue=this.isValidKey(t)}}]),t}(K),G=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="date",n}return Object(j.a)(t,e),t}(z),J=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="datetime",n}return Object(j.a)(t,e),t}(z),Y=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="time",n}return Object(j.a)(t,e),t}(z),X=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="month",n}return Object(j.a)(t,e),t}(z),Z=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).input=void 0,n.trueValue=void 0,n.falseValue=void 0,n.onInputChange=function(e){n.setDataValue(!0===e.target.checked?n.trueValue:n.falseValue)},n.onClick=function(){n.context.clearErrors()},n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"init",value:function(){if(Object(A.a)(Object(O.a)(t.prototype),"init",this).call(this),void 0!==this.ui){var e=this.ui,n=e.trueValue,r=e.falseValue;this.trueValue=void 0===n||n,this.falseValue=void 0!==r&&r}else this.trueValue=!0,this.falseValue=!1}},{key:"setElementValue",value:function(e){this.input.checked=e===this.trueValue}},{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=N()(this.className,"form-check-inline p-0"),n=x.createElement("input",{ref:function(t){return e.input=t},className:"align-self-center",type:"checkbox",defaultChecked:this.defaultValue,onChange:this.onInputChange,onClick:this.onClick});return!0===this.context.inNode?x.createElement("label",{className:t},n," ",this.ui&&this.ui.label||this.name):x.createElement("div",{className:t},x.createElement("label",{className:"w-100 h-100 mb-0 d-flex justify-content-center"},n))}},{key:"ui",get:function(){return this._ui}}]),t}(U),ee=n(14),te=(s=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).select=void 0,Object(P.a)(n,"readOnly",u,Object(ee.a)(n)),n.onInputChange=function(e){n.setDataValue(e.target.value)},n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"setElementValue",value:function(e){this.select.value=e}},{key:"setReadOnly",value:function(e){this.select.disabled=this.readOnly=!e}},{key:"setDisabled",value:function(e){this.select.disabled=this.disabled=e}},{key:"render",value:function(){var e=this;if(!0===this.readOnly){var t=this.ui.list.find((function(t){return t.value===e.value})),n=void 0===t?"(???)":t.title;return x.createElement("span",{className:"form-control w-min-6c"},n)}return x.createElement("select",{ref:function(t){return e.select=t},className:N()(this.className,"form-control"),defaultValue:this.defaultValue,onChange:this.onInputChange},this.ui.list.map((function(e,t){var n=e.title,r=e.value;return x.createElement("option",{className:void 0,key:t,value:r},n||r)})))}},{key:"ui",get:function(){return this._ui}}]),t}(U),u=Object(T.a)(s.prototype,"readOnly",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s),ne={height:"auto"},re=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputs={},n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"setElementValue",value:function(e){for(var t in this.inputs){var n=this.inputs[t];n.checked=e===n.value}}},{key:"setReadOnly",value:function(e){for(var t in this.readOnly=e,this.inputs)this.inputs[t].readOnly=e}},{key:"setDisabled",value:function(e){for(var t in this.disabled=e,this.inputs)this.inputs[t].disabled=e}},{key:"render",value:function(){var e,t=this,n=this.ui,r=n.defaultValue,a=n.list;!0===this.context.isRow&&(e=this.context.rowKey);var i=N()(this.className,"py-0");return x.createElement("span",{className:i,style:ne},a.map((function(n,a){var i=n.value,c=n.title,s=t.name;return void 0!==e&&(s+="-"+e),x.createElement("label",{key:a,className:"form-radio-inline"},x.createElement("input",{ref:function(e){return t.inputs[a]=e},type:"radio",name:s,value:i,defaultChecked:(t.defaultValue||r)===i,onChange:t.onInputChange}),c||i)})))}},{key:"ui",get:function(){return this._ui}}]),t}(U),ae=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).inputType="range",n.input=void 0,n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"setReadOnly",value:function(e){this.input.readOnly=this.readOnly=e}},{key:"setDisabled",value:function(e){this.input.disabled=this.disabled=e}},{key:"render",value:function(){var e=this,t=this.ui,n=t.min,r=t.max,a=t.step;return x.createElement(x.Fragment,null,x.createElement("input",{ref:function(t){return e.input=t},className:N()(this.className,"form-control","w-min-6c"),type:this.inputType,defaultValue:this.defaultValue,onChange:this.onInputChange,max:r,min:n,step:a}))}},{key:"ui",get:function(){return this._ui}}]),t}(U),ie=(o=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a))),Object(P.a)(n,"value",l,Object(ee.a)(n)),n.onClick=Object(y.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=n.ui&&n.ui.pickId)){e.next=4;break}return alert("no pickId defined!"),e.abrupt("return");case 4:return e.next=6,t(n.context,n.name,n.value);case 6:r=e.sent,n.setDataValue(r),n.clearError(),n.clearContextError(),n.checkRules();case 11:case"end":return e.stop()}}),e)}))),n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"setReadOnly",value:function(e){this.readOnly=e}},{key:"setDisabled",value:function(e){this.disabled=e}},{key:"render",value:function(){var e,t;void 0!==this.ui&&(e=this.ui.placeholder,t=this.ui.Templet);var n,r={"form-control":!0,"required-item":!0===this.itemSchema.required,"cursor-pointer":!0,"is-invalid":this.hasError};if(void 0===this.value||null===this.value)n=e||x.createElement("small",{className:"text-muted"},"[\u65e0]"),r["text-muted"]=!0;else if(void 0===t){var a;if(null===this.value)a="null";else switch(typeof this.value){case"undefined":a=x.createElement("small",{className:"text-muted"},"[\u65e0]");break;case"object":a=this.value.id;break;default:a=this.value}n=x.createElement(x.Fragment,null,a)}else n="function"===typeof t?t(this.value):t;return x.createElement(x.Fragment,null,x.createElement("div",{className:N()(r),onClick:this.onClick},n),this.renderErrors())}},{key:"ui",get:function(){return this._ui}}]),t}(U),l=Object(T.a)(o.prototype,"value",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o),ce=function(e,t,n){return x.createElement("span",{className:"text-danger"},"!!data type ",e," only support ",(n||[]).join(", "),", can't use ui ",t,"!!")},se=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).onClick=Object(y.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.clearError(),n.clearContextError(),t=n.itemSchema,r=t.name,"submit"!==t.type){e.next=6;break}return e.next=6,n.context.submit(r);case 6:case"end":return e.stop()}}),e)}))),n.observerRender=Object(D.a)((function(){var e,t,r,a=n.itemSchema,i=a.name,c=a.type;if(void 0!==n.ui){var s=n.ui.widget;if("button"!==s)return ce(c,s,["button"]);e=n.ui.Templet,t=n.ui.className,r=n.ui.label}var u,o=n.context,l=o.form,p=o.hasError,h=n.context,d="submit"===c&&p;u=void 0!==n.children?n.children:"function"===typeof e?e():void 0!==e?e:r;var f=x.createElement("button",{className:t,type:"button",disabled:d,onClick:n.onClick},u||i);return!0===h.inNode?x.createElement(x.Fragment,null,f,n.renderErrors()):x.createElement("div",{className:l.ButtonClass},x.createElement("div",null,n.renderErrors()),f)})),n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return x.createElement(this.observerRender,null)}},{key:"ui",get:function(){return this._ui}},{key:"label",get:function(){return null}}]),t}(U),ue=(p=function(){function e(t,n,r,a,i){var c=this;if(Object(g.a)(this,e),this.subContexts=void 0,this.form=void 0,this.uiSchema=void 0,this.initData=void 0,this.inNode=void 0,this.widgets={},this.rules=void 0,this.isRow=void 0,Object(P.a)(this,"errors",h,this),Object(P.a)(this,"errorWidgets",d,this),this.renderErrors=Object(D.a)((function(){var e=c.errors;return 0===e.length?null:x.createElement(x.Fragment,null,e.map((function(e){return x.createElement("span",{key:e,className:"text-danger inline-block my-1 ml-3"},x.createElement("i",{className:"fa fa-exclamation-circle"})," \xa0",e)})))})),this.form=t,this.uiSchema=n,this.initData=r,this.inNode=a,this.isRow=i,void 0!==n){var s,u=n.rules;if(void 0!==u)this.rules=[],!1===Array.isArray(u)?this.rules.push(u):(s=this.rules).push.apply(s,Object(S.a)(u))}}return Object(k.a)(e,[{key:"getArrRowContexts",value:function(e){void 0===this.subContexts&&(this.subContexts={});var t=this.subContexts[e];return void 0===t&&(this.subContexts[e]=t={}),t}},{key:"getValue",value:function(e){return this.initData[e]}},{key:"setValue",value:function(e,t){this.initData[e]=t;var n=this.widgets[e];void 0!==n&&n.setValue(t)}},{key:"getDisabled",value:function(e){var t=this.widgets[e];if(void 0!==t)return t.getDisabled()}},{key:"setDisabled",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setDisabled(t)}},{key:"getReadOnly",value:function(e){var t=this.widgets[e];void 0!==t&&t.getReadOnly()}},{key:"setReadOnly",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setReadOnly(t)}},{key:"getVisible",value:function(e){var t=this.widgets[e];void 0!==t&&t.getVisible()}},{key:"setVisible",value:function(e,t){var n=this.widgets[e];void 0!==n&&n.setVisible(t)}},{key:"submit",value:function(){var e=Object(y.a)(b.a.mark((function e(t){var n,r,a,i,c,s,u,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkRules(),!0!==this.hasError){e.next=24;break}for(n="",r=!0,a=!1,i=void 0,e.prev=6,c=this.errorWidgets[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)u=s.value,n+=u.name+":\n"+u.errors.join("\n");e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),a=!0,i=e.t0;case 14:e.prev=14,e.prev=15,r||null==c.return||c.return();case 17:if(e.prev=17,!a){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return console.error(n),e.abrupt("return");case 24:if(void 0!==(o=this.form.props.onButtonClick)){e.next=28;break}return alert("button ".concat(t," clicked. you should define form onButtonClick")),e.abrupt("return");case 28:return e.next=30,o(t,this);case 30:if(void 0!==(l=e.sent)){e.next=33;break}return e.abrupt("return");case 33:this.setError(t,l);case 34:case"end":return e.stop()}}),e,this,[[6,10,14,22],[15,,17,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"checkFieldRules",value:function(){for(var e in this.widgets)this.widgets[e].checkRules();if(void 0!==this.subContexts)for(var t in this.subContexts){var n=this.subContexts[t];for(var r in n)n[r].checkFieldRules()}}},{key:"checkContextRules",value:function(){if(this.clearErrors(),void 0!==this.rules){var e=!0,t=!1,n=void 0;try{for(var r,a=this.rules[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i,c=(0,r.value)(this);if(void 0!==c)if(!0===Array.isArray(c))(i=this.errors).push.apply(i,Object(S.a)(c));else if("string"===typeof c)this.errors.push(c);else for(var s in c)this.setError(s,c[s])}}catch(h){t=!0,n=h}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}if(void 0!==this.subContexts)for(var u in this.subContexts){var o=this.subContexts[u];for(var l in o){var p=o[l];p.clearErrors(),p.checkContextRules()}}}}},{key:"setError",value:function(e,t){var n=this.widgets[e];void 0!==n&&(n.setContextError(t),this.addErrorWidget(n))}},{key:"clearContextErrors",value:function(){for(var e in this.widgets){var t=this.widgets[e];void 0!==t&&t.clearContextError()}}},{key:"clearWidgetsErrors",value:function(){for(var e in this.widgets){var t=this.widgets[e];void 0!==t&&t.clearError()}}},{key:"checkRules",value:function(){this.clearErrors(),this.clearWidgetsErrors(),this.checkFieldRules(),!0!==this.hasError&&this.checkContextRules()}},{key:"addErrorWidget",value:function(e){this.errorWidgets.findIndex((function(t){return t===e}))<0&&this.errorWidgets.push(e)}},{key:"removeErrorWidget",value:function(e){var t=this.errorWidgets.findIndex((function(t){return t===e}));t>=0&&this.errorWidgets.splice(t,1)}},{key:"checkHasError",value:function(){if(!0===this.errorWidgets.length+this.errors.length>0)return!0;if(void 0===this.subContexts)return!1;for(var e in this.subContexts){var t=this.subContexts[e];for(var n in t)if(!0===t[n].hasError)return!0}return!1}},{key:"clearErrors",value:function(){this.errors.splice(0),this.errorWidgets.splice(0),this.clearContextErrors()}},{key:"arrName",get:function(){}},{key:"hasError",get:function(){return this.checkHasError()}}]),e}(),h=Object(T.a)(p.prototype,"errors",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Object(T.a)(p.prototype,"errorWidgets",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(T.a)(p.prototype,"hasError",[E.e],Object.getOwnPropertyDescriptor(p.prototype,"hasError"),p.prototype),p),oe=1,le=function(e){function t(e,n,r,a){var i,c;Object(g.a)(this,t);var s=e.uiSchema;if(void 0!==s){var u=s.items;void 0!==u&&(c=u[n.name])}return(i=Object(w.a)(this,Object(O.a)(t).call(this,e.form,c,r,a,!0))).parentContext=void 0,i.arrSchema=void 0,i.uiSchema=void 0,i.rowKey=void 0,i.data=void 0,i.parentContext=e,i.arrSchema=n,i.rowKey=oe++,i.data=r,i}return Object(j.a)(t,e),Object(k.a)(t,[{key:"getItemSchema",value:function(e){return this.arrSchema.itemSchemas[e]}},{key:"getUiItem",value:function(e){if(void 0!==this.uiSchema){var t=this.uiSchema.items;if(void 0!==t)return t[e]}}},{key:"clearErrors",value:function(){Object(A.a)(Object(O.a)(t.prototype),"clearErrors",this).call(this),this.parentContext.clearErrors()}},{key:"arrName",get:function(){return this.arrSchema.name}},{key:"parentData",get:function(){return this.parentContext.data}}]),t}(ue),pe=function(e){function t(e,n){return Object(g.a)(this,t),Object(w.a)(this,Object(O.a)(t).call(this,e,e.uiSchema,e.data,n,!1))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"getItemSchema",value:function(e){return this.form.itemSchemas[e]}},{key:"getUiItem",value:function(e){var t=this.form.uiSchema;if(void 0!==t){var n=t.items;if(void 0!==n)return n[e]}}},{key:"data",get:function(){return this.form.data}}]),t}(ue),he=x.createContext({}),de=Object(D.a)((function(e){var t,n,r,a,i=e.parentContext,c=e.arrSchema,s=e.children,u=c.name,o=c.arr,l=i.initData[u],p=i.form,h=i.getArrRowContexts(u),d=i.getUiItem(u),f=u,m=p.ArrContainer,v=p.RowContainer,b=p.RowSeperator,y=p.uiSchema;if(void 0!==y){var g=y.selectable,k=y.deletable,w=y.restorable;!0!==n&&(n=g),!0!==r&&(r=k),!0!==a&&(a=w)}if(void 0!==d){var O=d.widget,j=d.label,E=d.selectable,C=d.deletable,S=d.restorable,P=d.ArrContainer,T=d.RowContainer,A=d.RowSeperator;if(void 0!==E&&(n=E),void 0!==C&&(r=C),void 0!==S&&(a=S),void 0!==P&&(m=P),void 0!==T&&(v=T),void 0!==A&&(b=A),t=d.Templet,"arr"!==O)return ce(c.type,O,["arr"]);f=j||f}var I=!0;return m(f,x.createElement(x.Fragment,null,l.map((function(e,u){var p,d,f=void 0;if(!1===I?f=b:I=!1,void 0!==s)p=new le(i,c,e,!0),d=x.createElement(x.Fragment,null,s);else{var m=typeof t;"function"===m?(p=new le(i,c,e,!0),d=x.createElement(Object(D.a)(t),e)):"object"===m?(p=new le(i,c,e,!0),d=t):(p=new le(i,c,e,!1),d=x.createElement(x.Fragment,null,o.map((function(e,t){return x.createElement(x.Fragment,{key:e.name},ye(p,e,void 0))}))))}var y,g,k=p.rowKey;if(h[k]=p,!0===n){y=x.createElement("div",{className:"form-row-checkbox"},x.createElement("input",{type:"checkbox",onClick:function(t){var n=t.target.checked;e.$isSelected=n;var r=e.$source;void 0!==r&&(r.$isSelected=n),p.clearErrors()},defaultChecked:e.$isSelected}))}var w=!(void 0===e.$isDeleted||!1===e.$isDeleted);if(!0===r){var O=w?"fa-undo":"fa-trash";g=x.createElement("div",{className:"form-row-edit text-info",onClick:function(){if(!0===a){e.$isDeleted=!w;var t=e.$source;void 0!==t&&(t.$isDeleted=!w)}else{var n=l.indexOf(e);n>=0&&l.splice(n,1)}p.clearErrors()}},x.createElement("i",{className:N()("fa",O,"fa-fw")}))}var j=!0===n||!0===r?function(t){return x.createElement("fieldset",{disabled:w},x.createElement("div",{className:N()("d-flex",{deleted:w,"row-selected":e.$isSelected})},y,x.createElement("div",{className:!0===n&&!0===r?"form-row-content":"form-row-content-1"},t),g))}:function(e){return e};return x.createElement(he.Provider,{key:k,value:p},f,v(j(x.createElement(x.Fragment,null,x.createElement(p.renderErrors,null),d))))}))))})),fe=n(33),me=n(62),ve=(f=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).input=void 0,Object(P.a)(n,"imageSrc",m,Object(ee.a)(n)),n.onClick=Object(y.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new me.a(n.itemSchema,n.ui,n.ui.label,n.value),e.next=3,t.start();case 3:return null!==(r=e.sent)&&(n.setValue(r),n.imageSrc=r),e.next=7,t.end();case 7:case"end":return e.stop()}}),e)}))),n.observerRender=Object(D.a)((function(){var e,t=["bg-white p-1 d-flex justify-content-center"];return n.readOnly||n.disabled||(t.push("cursor-pointer"),e=n.onClick),x.createElement("div",{className:N()(t),onClick:e},x.createElement(fe.a,{src:n.imageSrc,className:"w-4c h-4c"}))})),n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"init",value:function(){Object(A.a)(Object(O.a)(t.prototype),"init",this).call(this),this.imageSrc=this.value}},{key:"render",value:function(){return x.createElement(this.observerRender,null)}},{key:"ui",get:function(){return this._ui}}]),t}(U),m=Object(T.a)(f.prototype,"imageSrc",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f),be={id:{dataTypes:["id"],widget:ie},text:{dataTypes:["integer","number","string"],widget:z},textarea:{dataTypes:["string"],widget:H},password:{dataTypes:["string"],widget:_},date:{dataTypes:["date"],widget:G},datetime:{dataTypes:["date"],widget:J},time:{dataTypes:["date"],widget:Y},month:{dataTypes:["date"],widget:X},select:{dataTypes:["integer","number","string","date","boolean"],widget:te},url:{dataTypes:["string"],widget:W},email:{dataTypes:["string"],widget:$},number:{dataTypes:["integer","number"],widget:K},updown:{dataTypes:["integer","number"],widget:Q},color:{},checkbox:{dataTypes:["boolean","integer","number"],widget:Z},image:{dataTypes:["string"],widget:ve},checkboxes:{},radio:{dataTypes:["integer","number","string","date","boolean"],widget:re},range:{dataTypes:["integer"],widget:ae},button:{dataTypes:["button","submit"],widget:se}};function ye(e,t,n,r){if(void 0===e)return null;if(void 0!==t){var a,i=t.name,c=t.type;switch(c){case"arr":var s=e.getItemSchema(i);return x.createElement(de,{parentContext:e,arrSchema:s,children:n})}var u=e.getUiItem(i);if(void 0===u)a=h(c);else{var o=u.widget;switch(o){default:if(void 0!==o)a=be[o].widget;void 0===a&&(a=h(c));break;case"custom":a=u.WidgetClass;break;case"group":return x.createElement("span",null,"impletment group")}}var l=e.widgets,p=new a(e,t,r,n);return l[i]=p,x.createElement(p.container,null)}function h(e){switch(e){default:return z;case"id":return ie;case"integer":return Q;case"number":return K;case"string":return z;case"date":return G;case"boolean":return Z;case"button":case"submit":return se}}}n(94);var ge={_:{required:"required",number:"not valid number",integer:"not valid integer",min:"min value is ${min}",max:"max value is ${max}"},zh:{_:{required:"\u5fc5\u987b\u586b",number:"\u9700\u8981\u6570\u5b57",integer:"\u9700\u8981\u6574\u6570",min:"\u4e0d\u80fd\u5c0f\u4e8e${min}",max:"\u4e0d\u80fd\u5927\u4e8e${max}"}}},ke=n(44),we=function(e){function t(e){var n;Object(g.a)(this,t),(n=Object(w.a)(this,Object(O.a)(t).call(this,e))).schema=void 0,n.itemSchemas=void 0,n.uiSchema=void 0,n.res=void 0,n.formContext=void 0,n.disposer=void 0,n.data=void 0,n.Container=void 0,n.FieldContainer=void 0,n.FieldClass=void 0,n.ButtonClass=void 0,n.watch=function(){void 0!==n.props.formData&&n.calcSelectOrDelete()},n.DefaultContainer=function(e){return x.createElement("form",{className:N()(n.props.className),onSubmit:function(e){return e.preventDefault()}},e)},n.DefaultFieldContainer=function(e,t){var r=n.props.fieldLabelSize;if(r>0){var a;null===e?r=0:a=x.createElement("label",{className:N()("col-sm-"+r,"col-form-label")},e);var i="col-sm-"+(12-r);return x.createElement("div",{className:"form-group row"},a,x.createElement("div",{className:i},t))}return x.createElement("div",{className:"form-group"},null===e?null:x.createElement("label",{className:"col-form-label"},e),t)},n.DefaultFieldClass=void 0,n.DefaultButtonClass="text-center py-2",n.DefaultRes=Object(ke.a)(ge),n.ArrContainer=function(e,t){return x.createElement("div",null,x.createElement("div",{className:N()("small text-muted text-center bg-light py-1 px-3 mt-4 mb-1")},e),t)},n.RowContainer=function(e){var t=N()({"py-3":!0});return x.createElement("div",{className:t},e)},n.RowSeperator=x.createElement("div",{className:"border border-gray border-top"});var r=e.schema,a=e.uiSchema,i=e.Container,c=e.FieldContainer,s=e.FieldClass,u=e.ButtonClass,o=e.res;n.Container=i||n.DefaultContainer,n.FieldContainer=c||n.DefaultFieldContainer,n.FieldClass=void 0!==s&&""!==s&&null!==s?s:n.DefaultFieldClass,n.res=o||n.DefaultRes,n.ButtonClass=u||n.DefaultButtonClass,n.schema=r,n.itemSchemas={};var l=!0,p=!1,h=void 0;try{for(var d,f=n.schema[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var m=d.value;n.itemSchemas[m.name]=m}}catch(v){p=!0,h=v}finally{try{l||null==f.return||f.return()}finally{if(p)throw h}}return n.uiSchema=a,n.disposer=Object(E.d)(n.watch),n.data={},n}return Object(j.a)(t,e),Object(k.a)(t,[{key:"renderContent",value:function(){var e=this;this.initData(this.props.formData);var t,n=this.props.children;return void 0!==n?(this.formContext=new pe(this,!0),x.createElement(x.Fragment,null,n)):(void 0!==this.uiSchema&&(t=this.uiSchema.Templet),void 0!==t?(this.formContext=new pe(this,!0),"function"===typeof t?t(this.data):t):(this.formContext=new pe(this,!1),x.createElement(x.Fragment,null,this.schema.map((function(t,r){return x.createElement(x.Fragment,{key:r},ye(e.formContext,t,n))})))))}},{key:"initData",value:function(e){if(void 0===e&&(e={}),void 0!==this.uiSchema){var t=this.uiSchema.items;if(void 0!==t)for(var n in t){var r=t[n].defaultValue;void 0!==r&&void 0===e[n]&&(e[n]=r)}}var a=!0,i=!1,c=void 0;try{for(var s,u=this.schema[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var o=s.value;this.initDataItem(o,this.data,e)}}catch(l){i=!0,c=l}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}}},{key:"initDataItem",value:function(e,t,n){var r=e.name,a=e.type;if("button"!==a)if("arr"===a){var i=e,c=i.arr;if(void 0!==c){var s=i.itemSchemas={},u=!0,o=!1,l=void 0;try{for(var p,h=c[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var d=p.value;s[d.name]=d}}catch(T){o=!0,l=T}finally{try{u||null==h.return||h.return()}finally{if(o)throw l}}var f=n[r];void 0===f?f=[]:!1===Array.isArray(f)&&(f=[f]);var m=[],v=!0,b=!1,y=void 0;try{for(var g,k=f[Symbol.iterator]();!(v=(g=k.next()).done);v=!0){var w=g.value,O={$source:w,$isSelected:w.$isSelected,$isDeleted:w.$isDeleted},j=!0,x=!1,C=void 0;try{for(var N,S=c[Symbol.iterator]();!(j=(N=S.next()).done);j=!0){var P=N.value;this.initDataItem(P,O,w)}}catch(T){x=!0,C=T}finally{try{j||null==S.return||S.return()}finally{if(x)throw C}}m.push(O)}}catch(T){b=!0,y=T}finally{try{v||null==k.return||k.return()}finally{if(b)throw y}}t[r]=Object(E.l)(m)}}else t[r]=n[r]}},{key:"calcSelectOrDelete",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.schema[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value;this.arrItemOperated(i)}}catch(c){t=!0,n=c}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"arrItemOperated",value:function(e){var t=e.name;if("arr"===e.type&&void 0!==this.data){var n=this.data[t];if(void 0!==n){var r=e.arr,a=!0,i=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var o=s.value,l=o.$source;if(void 0!==l){var p=l.$isSelected,h=l.$isDeleted;o.$isSelected=p,o.$isDeleted=h;var d=!0,f=!1,m=void 0;try{for(var v,b=r[Symbol.iterator]();!(d=(v=b.next()).done);d=!0){var y=v.value;this.arrItemOperated(y)}}catch(g){f=!0,m=g}finally{try{d||null==b.return||b.return()}finally{if(f)throw m}}}}}catch(g){i=!0,c=g}finally{try{a||null==u.return||u.return()}finally{if(i)throw c}}}}}},{key:"componentDidMount",value:function(){var e=this.props.beforeShow;void 0!==e&&e(this.formContext)}},{key:"componentWillUnmount",value:function(){void 0!==this.disposer&&this.disposer()}},{key:"render",value:function(){var e=this.renderContent();return x.createElement(he.Provider,{value:this.formContext},x.createElement(this.formContext.renderErrors,null),this.Container(e))}},{key:"buttonClick",value:function(){var e=Object(y.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.formContext.checkRules(),!0!==this.formContext.hasError){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==(n=this.formContext.form.props.onButtonClick)){e.next=7;break}return alert("you should define form onButtonClick"),e.abrupt("return");case 7:return e.next=9,n(t,this.formContext);case 9:if(void 0!==(r=e.sent)){e.next=12;break}return e.abrupt("return");case 12:this.formContext.setError(t,r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(x.Component);(function(e){function t(){return Object(g.a)(this,t),Object(w.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.children,r=this.context;if(void 0===r)return x.createElement("span",{className:"text-danger"},"!only in Form!");var a=r.getItemSchema(t),i=ye(r,a,n,this.props);return void 0===i?x.createElement("span",{className:"text-danger"},"!!",t," is not defined!!"):i}}]),t}(x.Component)).contextType=he,n.d(t,"a",(function(){return we})),n.d(t,"b",(function(){return U}))},function(e,t,n){"use strict";var r,a=n(1),i=n.n(a),c=n(2),s=n(3),u=n(5),o=n(7),l=n(6),p=n(8),h=n(0),d=n(9),f=n(18),m=n(23),v=n(37),b=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).uiItem=void 0,n.onChange=function(e){n.newValue=e.target.value;var t=n.value;n.isChanged=n.newValue!==t},n.onBlur=function(e){n.verifyValue()},n.onFocus=function(){n.error=void 0},n.page=Object(d.a)((function(e){var t=e.resolve,r=h.createElement("button",{className:"btn btn-sm btn-success align-self-center",disabled:!n.isChanged,onClick:function(){n.verifyValue(),void 0===n.error&&t(n.newValue)}},"\u4fdd\u5b58");return h.createElement(m.a,{header:n.label,right:r},h.createElement("div",{className:"m-3"},h.createElement("input",{type:"text",onChange:n.onChange,onBlur:n.onBlur,onFocus:n.onFocus,className:"form-control",defaultValue:n.value}),n.uiItem&&h.createElement("div",{className:"small muted m-2"},n.uiItem.placeholder),n.error&&h.createElement("div",{className:"text-danger"},n.error)))})),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=h.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(v.a),y=n(62),g=n(33),k=function(e){function t(e,n,r,a){var i;return Object(s.a)(this,t),(i=Object(o.a)(this,Object(l.a)(t).call(this,e,n,r,a))).uiItem=void 0,i.onChange=function(e){i.newValue=e;var t=i.value;i.isChanged=i.newValue!==t},i.page=Object(d.a)((function(e){var t=e.resolve,n=i.itemSchema.name,r=i.uiItem.list,a=h.createElement("button",{className:"btn btn-sm btn-success align-self-center",disabled:!i.isChanged,onClick:function(){i.verifyValue(),void 0===i.error&&t(i.newValue)}},"\u4fdd\u5b58"),c=r?r.map((function(e,t){var r=e.title,a=e.value;return h.createElement("label",{key:t,className:"px-3 py-2 cursor-pointer"},h.createElement("input",{name:n,type:"radio",value:a,onClick:function(){return i.onChange(a)},defaultChecked:a===i.value})," ",r||a," \xa0")})):h.createElement(h.Fragment,null,"no list defined");return h.createElement(m.a,{header:"\u66f4\u6539"+i.label,right:a},h.createElement("div",{className:"m-3"},c))})),void 0===i.value&&(i.value=n.defaultValue),i}return Object(p.a)(t,e),Object(u.a)(t,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=h.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(v.a),w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).uiItem=void 0,n.onChange=function(e){n.newValue=e;var t=n.value;n.isChanged=n.newValue!==t},n.page=Object(d.a)((function(e){var t=e.resolve,r=n.uiItem.list,a=r?r.map((function(e,r){var a=e.title,i=e.value;return h.createElement("div",{key:r,className:"px-3 py-2 cursor-pointer bg-white mb-1",onClick:function(){n.onChange(i),t(n.newValue)}},a||i)})):h.createElement(h.Fragment,null,"no list defined");return h.createElement(m.a,{header:"\u66f4\u6539"+n.label},h.createElement("div",{className:"my-3"},a))})),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=h.createElement(t.page,{resolve:e,reject:n});f.b.push(r,n)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(v.a),O=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).uiItem=void 0,n.onChange=function(e){n.newValue=e;var t=n.value;n.isChanged=n.newValue!==t},n.page=Object(d.a)((function(e){return h.createElement(m.a,{header:"\u66f4\u6539"+n.label},"ddd")})),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"internalStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(c.a)(i.a.mark((function e(n,r){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=t.uiItem.pickId)){e.next=4;break}return alert("IdItemEdit.pickId = undefined"),e.abrupt("return");case 4:return e.next=6,a(void 0,void 0,t.value);case 6:c=e.sent,t.onChange(c.id),n(c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"internalEnd",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}(v.a),j=Object(d.a)(r=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).defaultSepClassName="border-top edit-sep-light-gray",n.defaultRowContainerClassName="d-flex px-3 py-2 bg-white align-items-center",n.topBorder=void 0,n.bottomBorder=void 0,n.rowContainerClassName=void 0,n.sep=void 0,n.uiSchema=void 0,n.renderRow=function(e,t){var r,a,s=e.name,u=e.type,o=e.required,l=n.uiSchema[s];if(void 0===l)a=s;else{a=l.label;var p=l.Templet;if(void 0!==p)r="function"===typeof p?h.createElement("b",null,p(t)):h.createElement("b",null,p);else if(void 0!==t)switch(l.widget){case"radio":case"select":var d=l.list;r=h.createElement("b",null,d.find((function(e){return e.value===t})).title);break;case"id":r=h.createElement("b",null,"no templet for ",s,"=",t)}}if(void 0===r)switch(u){default:r=t?h.createElement("b",null,t):h.createElement("small",{className:"text-muted"},"(\u65e0)");break;case"image":r=h.createElement(g.a,{className:"w-4c h-4c",src:t})}var f=!0===o&&h.createElement("span",{className:"text-danger"},"*");return h.createElement("div",{className:n.rowContainerClassName,onClick:Object(c.a)(i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.rowClick(e,l,a,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))},h.createElement("div",{className:"w-6c"},a," ",f),h.createElement("div",{className:"flex-fill d-flex justify-content-end"},r),!0!==n.props.stopEdit&&h.createElement("div",{className:"w-2c text-right"},h.createElement("i",{className:"fa fa-angle-right"})))},n.rowClick=function(){var e=Object(c.a)(i.a.mark((function e(t,r,a,c){var s,u,o,l,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.props,u=s.onItemChanged,o=s.onItemClick,!0!==s.stopEdit){e.next=3;break}return e.abrupt("return");case 3:if(void 0===o){e.next=7;break}return e.next=6,o(t,r,c);case 6:return e.abrupt("return");case 7:if(void 0!==(p=x(t,r,a,c))){e.next=11;break}return alert("undefined: let itemEdit:ItemEdit = createItemEdit(itemSchema, uiItem, label, value);"),e.abrupt("return");case 11:return e.prev=11,e.next=14,p.start();case 14:if((l=e.sent)===c){e.next=23;break}if(void 0!==u){e.next=21;break}alert("".concat(t.name," value changed, new: ").concat(l,", pre: ").concat(c)),n.props.data[t.name]=l,e.next=23;break;case 21:return e.next=23,u(t,l,c);case 23:return e.next=25,p.end();case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(11),console.log("no value changed");case 30:case"end":return e.stop()}}),e,null,[[11,27]])})));return function(t,n,r,a){return e.apply(this,arguments)}}();var r=e.topBorderClassName,a=e.bottomBorderClassName,u=e.sepClassName,p=e.rowContainerClassName,d=e.uiSchema,f=e.stopEdit;return n.topBorder=h.createElement("div",{className:r||n.defaultSepClassName}),n.bottomBorder=h.createElement("div",{className:a||n.defaultSepClassName}),n.rowContainerClassName=p||n.defaultRowContainerClassName,!0!==f&&(n.rowContainerClassName+=" cursor-pointer"),n.sep=h.createElement("div",{className:u||n.defaultSepClassName}),n.uiSchema=d&&d.items||{},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=[],t=this.props.schema,n=t.length;e.push(this.topBorder);for(var r=0;r<n;r++){var a=t[r];r>0&&e.push(this.sep);var i=this.props.data[a.name];e.push(this.renderRow(a,i))}return e.push(this.bottomBorder),h.createElement("div",null,e.map((function(e,t){return h.createElement(h.Fragment,{key:t},e)})))}}]),t}(h.Component))||r;function x(e,t,n,r){var a;if(void 0!==t)switch(t.widget){default:break;case"id":a=O;break;case"text":a=b;break;case"image":a=y.a;break;case"select":a=w;break;case"radio":return new k(e,t,n,r)}if(void 0===a)switch(e.type){case"string":a=b;break;case"image":a=y.a}if(void 0!==a)return new a(e,t,n,r)}n.d(t,"a",(function(){return j}))},function(e,t,n){"use strict";var r,a,i,c,s=n(3),u=n(5),o=n(7),l=n(6),p=n(8),h=n(0),d=n(15),f=n.n(d),m=n(9),v=n(12),b=n(10),y=(r=function(){function e(t){Object(s.a)(this,e),this.list=void 0,this.render=void 0,this.list=t}return Object(u.a)(e,[{key:"dispose",value:function(){}},{key:"renderContent",value:function(e,t){var n=this.list.props.item.render;return void 0===n?h.createElement("div",{className:"px-3 py-2"},JSON.stringify(e)):n(e,t)}},{key:"isPaged",get:function(){var e=this.list.props.items;return null!==e&&void 0!==e&&!1===Array.isArray(e)}},{key:"items",get:function(){var e=this.list.props.items;return null===e?null:void 0!==e?!0===Array.isArray(e)?e:e.items:void 0}},{key:"loading",get:function(){var e=this.list.props.items;if(null===e)return!1;if(void 0===e)return!0;var t=e;return void 0!==t.items&&t.loading}},{key:"selectedItems",get:function(){}}]),e}(),Object(v.a)(r.prototype,"loading",[b.e],Object.getOwnPropertyDescriptor(r.prototype,"loading"),r.prototype),r),g=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).render=function(e,t){var r=n.list.props.item,a=r.className,i=r.key,c=r.onClick;return h.createElement("li",{key:void 0===i?t:i(e),className:f()("va-row-clickable",a),onClick:function(){return c&&c(e)}},n.renderContent(e,t))},n}return Object(p.a)(t,e),t}(y),k=n(32),w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).render=function(e,t){var r=n.list.props.item,a=r.className,i=r.key;if("string"===typeof e){var c=f()("va-list-gap","px-3","pt-1");return h.createElement("li",{key:Object(k.a)(),className:c},e)}return h.createElement("li",{key:void 0===i?t:i(e),className:f()(a)},n.renderContent(e,t))},n}return Object(p.a)(t,e),t}(y),O=n(13),j=n(14),x=(n(19),a=function(e){function t(e){var n;return Object(s.a)(this,t),n=Object(o.a)(this,Object(l.a)(t).call(this,e)),Object(O.a)(n,"_items",i,Object(j.a)(n)),n.input=void 0,n.disposer=void 0,n.buildItems=function(){console.log("buildItems in selectable.tsx");var e,t=n.list.props,r=t.items,a=t.selectedItems,i=t.compare;if(void 0!==r)if(null!==r){var c;e=!0===Array.isArray(r)?r:r.items,c=void 0===i?function(e,t){return e===t}:i;var s=e.map((function(e){return{selected:void 0!==a&&void 0!==a.find((function(t){return c(e,t)})),item:e,labelId:Object(k.a)()}}));n._items=s}else n._items=null;else n._items=void 0},n.render=function(e,t){var r=n.list.props.item,a=r.className,i=r.key,c=e.labelId,s=e.selected,u=e.item;return h.createElement("li",{key:void 0===i?t:i(e),className:f()(a)},h.createElement("div",{className:"d-flex align-items-center px-3"},h.createElement("input",{ref:function(e){e&&(n.input=e,e.checked=s)},className:"",type:"checkbox",value:"",id:c,defaultChecked:s,onChange:function(t){n.onSelect(e,t.target.checked)}}),h.createElement("label",{className:"",style:{flex:1,marginBottom:0},htmlFor:c},n.renderContent(u,t))))},n.disposer=Object(b.d)(n.buildItems),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"dispose",value:function(){this.disposer()}},{key:"selectAll",value:function(){this._items&&this._items.forEach((function(e){return e.selected=!0}))}},{key:"unselectAll",value:function(){this._items&&this._items.forEach((function(e){return e.selected=!1}))}},{key:"onSelect",value:function(e,t){e.selected=t;var n=this._items.some((function(e){return e.selected}));this.list.props.item.onSelect(e.item,t,n)}},{key:"items",get:function(){return this._items}},{key:"selectedItems",get:function(){return this._items.filter((function(e){return!0===e.selected})).map((function(e){return e.item}))}}]),t}(y),i=Object(v.a)(a.prototype,"_items",[b.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a);n(146);n.d(t,"a",(function(){return E}));var E=Object(m.a)(c=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).listBase=void 0,n.selectable=void 0,n._$scroll=function(e){console.log("############### items scroll to "+e)},n.buildBase(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"buildBase",value:function(){var e=this.props.item,t=e.onClick;void 0!==e.onSelect?this.selectable=this.listBase=new x(this):this.listBase=void 0!==t?new g(this):new w(this)}},{key:"componentWillUnmount",value:function(){this.listBase.dispose()}},{key:"selectAll",value:function(){this.selectable&&this.selectable.selectAll()}},{key:"unselectAll",value:function(){this.selectable&&this.selectable.unselectAll()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.header,a=t.footer,i=t.before,c=t.loading,s=t.none;void 0===i&&(i="-"),void 0===c&&(c=function(){return h.createElement("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"})}),void 0===s&&(s="none");var u,o,l=this.listBase,p=l.items,d=l.loading;function m(e,t){if(e)switch(typeof e){default:case"string":return h.createElement("li",{className:"va-list-"+t},e);case"function":return h.createElement("li",{className:"va-list-"+t},e());case"object":return h.createElement("li",null,e)}}return u=null===p?m(i,"before"):void 0===p?m(c,"loading"):0===p.length?m(s,"none"):p.map((function(t,n){return e.listBase.render(t,n)})),!0===d&&p&&(o=m(c,"loading")),h.createElement("ul",{className:f()("va-list",n)},m(r,"header"),u,o,m(a,"footer"))}},{key:"selectedItems",get:function(){return this.listBase.selectedItems}}]),t}(h.Component))||c},function(e,t,n){"use strict";var r=n(24),a=n(1),i=n.n(a),c=n(2),s=n(3),u=n(5),o=n(7),l=n(6),p=n(8),h=n(11),d=n(35),f=n(17),m=new(function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"userAppUnits",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("tie/user-app-units",{app:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userFromId",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("user/user-name-nick-icon-from-id",{userId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(f.b))("tv/",void 0),v=n(43),b=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,void 0)))._uqs=void 0,n.name=void 0,n.version=void 0,n.uqsMan=void 0,n.appUnits=void 0;var r=e.appName,a=e.version,i=e.tvs;if(n.name=r,void 0===r)throw new Error('appName like "owner/app" must be defined in MainConfig');return n.version=a,n.uqsMan=new d.UQsMan(n.name,i),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"beforeStart",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.load();case 3:if(t=e.sent,n=f.g.predefinedUnit,!(void 0!==(r=h.nav.user)&&r.id>0)){e.next=26;break}return e.next=9,m.userAppUnits(this.uqsMan.id);case 9:this.appUnits=e.sent,e.t0=this.appUnits.length,e.next=0===e.t0?13:1===e.t0?15:21;break;case 13:return this.showUnsupport(n),e.abrupt("return",!1);case 15:if(!(void 0===(a=this.appUnits[0].id)||a<0||void 0!==n&&a!==n)){e.next=19;break}return this.showUnsupport(n),e.abrupt("return",!1);case 19:return f.g.unit=a,e.abrupt("break",26);case 21:if(!(n>0&&void 0!==this.appUnits.find((function(e){return e.id===n})))){e.next=24;break}return f.g.unit=n,e.abrupt("break",26);case 24:return this.openVPage(v.c),e.abrupt("return",!1);case 26:if(void 0===t){e.next=29;break}return this.openVPage(v.a,t),e.abrupt("return",!1);case 29:return e.abrupt("return",!0);case 32:return e.prev=32,e.t1=e.catch(0),this.openVPage(v.b,e.t1),e.abrupt("return",!1);case 36:case"end":return e.stop()}}),e,this,[[0,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"userFromId",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.userFromId(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,c,s,u,o,l,p,h,d,m,v,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.uqsMan,n=t.appOwner,a=t.appName,c=this.uqsMan.localData,(s=c.get())&&s.version===this.version){e.next=28;break}return e.next=6,Object(f.k)(n,a);case 6:for((s=e.sent).version=this.version,c.set(s),u=!0,o=!1,l=void 0,e.prev=12,p=s.uqs[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)h.value.newVersion=!0;e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),o=!0,l=e.t0;case 20:e.prev=20,e.prev=21,u||null==p.return||p.return();case 23:if(e.prev=23,!o){e.next=26;break}throw l;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return m=(d=s).id,v=d.uqs,this.uqsMan.id=m,e.next=32,this.uqsMan.init(v);case 32:return e.next=34,this.uqsMan.load();case 34:if(0!==(b=e.sent).length){e.next=40;break}if(b.push.apply(b,Object(r.a)(this.uqsMan.setTuidImportsLocal())),0!==b.length){e.next=40;break}return this._uqs=this.uqsMan.buildUQs(),e.abrupt("return");case 40:return e.abrupt("return",b);case 41:case"end":return e.stop()}}),e,this,[[12,16,20,28],[21,,23,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"showUnsupport",value:function(e){h.nav.clear(),this.openVPage(v.d,e)}},{key:"uqs",get:function(){return this._uqs}}]),t}(h.Controller);function y(e,t){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new t(n),e.next=3,r.start();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,void 0)))._uqs=void 0,n._cApp=void 0,n._cApp=e,n._uqs=e.uqs,n.init(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"init",value:function(){}},{key:"newC",value:function(e){return new e(this.cApp)}},{key:"newSub",value:function(e){return new e(this)}},{key:"uqs",get:function(){return this._uqs}},{key:"cApp",get:function(){return this._cApp}}]),t}(h.Controller),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e.cApp)))._owner=void 0,n._owner=e,n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"owner",get:function(){return this._owner}}]),t}(k);n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return w}))},function(e,t,n){"use strict";var r,a=n(3),i=n(5),c=n(7),s=n(6),u=n(8),o=n(0),l=n(15),p=n.n(l),h=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"setValues",value:function(e){}}]),e}(),d=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(e){return o.createElement("div",{key:"_b_"+e,className:""},o.createElement("div",{className:"w-100"},o.createElement("div",{style:{borderTop:"1px solid #f0f0f0"}})))}}]),t}(h),f=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this))).param=void 0,n.param=e,n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(e){var t;switch(this.param){default:t="py-2";break;case"=":t="py-1";break;case"-":t="pb-1"}var n=p()(t);return o.createElement("div",{key:"_g_"+e,className:n,style:{backgroundColor:"#f0f0f0"}})}}]),t}(h),m=function(e){function t(e,n){var r;return Object(a.a)(this,t),(r=Object(c.a)(this,Object(s.a)(t).call(this))).gridProps=void 0,r._prop=void 0,r.content=void 0,r.col=void 0,r.gridProps=e,r._prop=n,r.col=!0===e.labelFixLeft?"col":"col-sm",r}return Object(u.a)(t,e),Object(i.a)(t,[{key:"prop",get:function(){return this._prop}}]),Object(i.a)(t,[{key:"render",value:function(e){var t=this.prop,n=t.onClick,r=t.bk,a=p()({"cursor-pointer":void 0!==n,"bg-white":void 0===r,row:!0});return o.createElement("div",{key:e,className:a,onClick:n},this.renderLabel(),this.renderProp())}},{key:"renderLabel",value:function(){var e=this.prop.label;return void 0===e?null:o.createElement("label",{className:this.col+"-3 col-form-label"},e)}},{key:"renderProp",value:function(){var e,t,n=this.prop.label;switch(this.gridProps.alignValue){case"left":e="justify-content-start";break;case"center":e="justify-content-center";break;case"right":e="justify-content-end"}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}var r=this.col+(void 0===n?"-12":"-9"),a=p()(e,t,r,"d-flex");return o.createElement("div",{className:a},this.renderPropBody())}},{key:"renderPropBody",value:function(){return o.createElement("div",{className:"form-control-plaintext"},this.renderPropContent())}},{key:"renderPropContent",value:function(){return this.content}}]),t}(h),v=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"setValues",value:function(e){this.content=void 0===e?void 0:e[this.prop.name]}},{key:"prop",get:function(){return this._prop}}]),t}(m),b=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"setValues",value:function(e){this.content=void 0===e?void 0:e[this.prop.name]}},{key:"prop",get:function(){return this._prop}}]),t}(m),y=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"setValues",value:function(e){if(void 0===e)this.content=void 0;else{var t=this.prop.list;this.content="string"===typeof t?e[t]:void 0}}},{key:"renderPropBody",value:function(){var e=this.prop,t=e.list,n=e.row,r="string"===typeof t?this.content:t;return void 0===r?o.createElement("div",null):o.createElement("div",{className:"w-100"},r.map((function(e,t){return o.createElement(o.Fragment,{key:t},0===t?null:o.createElement("div",{style:{width:"100%",borderBottom:"1px solid #f0f0f0"}}),o.createElement(n,e))})))}},{key:"prop",get:function(){return this._prop}}]),t}(m),g=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"renderPropBody",value:function(){return this.prop.component}},{key:"renderProp",value:function(){var e,t,n,r=this.prop,a=r.label,i=r.full;switch(this.gridProps.alignValue){case"left":e="justify-content-start";break;case"center":e="justify-content-center";break;case"right":e="justify-content-end"}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}n=!0!==i?this.col+(void 0===a?"-12":"-9"):"w-100";var c=p()(e,t,n,"d-flex");return o.createElement("div",{className:c},this.renderPropBody())}},{key:"prop",get:function(){return this._prop}}]),t}(m),k=function(){function e(t,n){Object(a.a)(this,e),this.gridProps=void 0,this.props=void 0,this.rows=void 0,this.gridProps=t,this.props=n,this.buildRows()}return Object(i.a)(e,[{key:"buildRows",value:function(){this.rows=[];var e=!0,t=!0,n=!1,r=void 0;try{for(var a,i=this.props[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;if("string"===typeof c)this.rows.push(new f(c)),e=!0;else{e||this.rows.push(new d);var s=void 0;switch(c.type){default:continue;case"string":s=new v(this.gridProps,c);break;case"number":s=new b(this.gridProps,c);break;case"list":s=new y(this.gridProps,c);break;case"component":s=new g(this.gridProps,c)}this.rows.push(s),e=!1}}}catch(u){n=!0,r=u}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"setValues",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.rows[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value.setValues(e)}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"render",value:function(){return this.rows.map((function(e,t){return e.render(String(t))}))}}]),e}(),w=n(9),O=Object(w.a)(r=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.rows,r=e.values,a=new k(this.props,n);a.setValues(r);var i=p()("container-fluid",t);return o.createElement("div",{className:i},a.render())}}]),t}(o.Component))||r;n.d(t,"a",(function(){return O}))},function(e,t,n){"use strict";var r,a,i=n(1),c=n.n(i),s=n(2),u=n(13),o=n(3),l=n(5),p=n(7),h=n(6),d=n(14),f=n(8),m=n(12),v=(n(19),n(0)),b=n(10),y=n(11),g=n(17);r=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],n.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},Object(u.a)(n,"data",a,Object(d.a)(n)),n.onItemChanged=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,e.next=3,g.r.userSetProp(i,r);case 3:n.data[i]=r,y.nav.user[i]=r,y.nav.saveLocalUser();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var r=y.nav.user,i=r.nick,l=r.icon;return n.data={nick:i,icon:l},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return v.createElement(y.Page,{header:"\u4e2a\u4eba\u4fe1\u606f"},v.createElement(y.Edit,{schema:this.schema,uiSchema:this.uiSchema,data:this.data,onItemChanged:this.onItemChanged}))}}]),t}(v.Component),a=Object(m.a)(r.prototype,"data",[b.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null})},function(e,t,n){"use strict";var r,a,i,c,s,u,o=n(7),l=n(6),p=n(14),h=n(8),d=n(1),f=n.n(d),m=n(2),v=n(13),b=n(3),y=n(5),g=n(12),k=(n(19),n(0)),w=n(10),O=n(9),j=n(15),x=n.n(j),E=(n(145),r=function(){function e(){Object(b.a)(this,e),this.name=void 0,Object(v.a)(this,"selected",a,this),this.caption=void 0,this.contentBuilder=void 0,this.notify=void 0,this.load=void 0,this.onShown=void 0,this._content=void 0}return Object(y.a)(e,[{key:"shown",value:function(){var e=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.onShown){e.next=3;break}return e.next=3,this.onShown();case 3:if(void 0===this._content){e.next=5;break}return e.abrupt("return");case 5:if(void 0===this.load){e.next=8;break}return e.next=8,this.load();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"content",get:function(){return!0!==this.selected?this._content:void 0!==this._content?this._content:this._content=this.contentBuilder()}}]),e}(),a=Object(g.a)(r.prototype,"selected",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r),C=function(e,t,n){return k.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column cursor-pointer "+n},k.createElement("div",null,k.createElement("i",{className:"fa fa-lg fa-"+t})),k.createElement("small",null,e))},N=Object(O.a)((c=function(e){function t(e){var n;Object(b.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).size=void 0,n.tabBg=void 0,n.contentBg=void 0,n.sep=void 0,Object(v.a)(n,"selectedTab",s,Object(p.a)(n)),Object(v.a)(n,"tabs",u,Object(p.a)(n)),n.tabClick=function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.shown();case 2:n.selectedTab.selected=!1,t.selected=!0,n.selectedTab=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=n.props,a=r.size,i=r.tabs,c=r.tabBg,h=r.contentBg,d=r.sep,y=r.selected;return n.size=a||"md",n.tabs=i.map((function(e){var t=new E,n=e.name,r=e.caption,a=e.content,i=e.notify,c=e.load,s=e.onShown;return t.name=n,t.selected=!1,t.caption=r,t.contentBuilder=a,t.notify=i,t.load=c,t.onShown=s,t})),n.tabBg=c||"bg-light",n.contentBg=h,n.sep=d||"border-top border-gray",void 0!==y&&(n.selectedTab=n.tabs.find((function(e){return e.name===y}))),void 0===n.selectedTab&&(n.selectedTab=n.tabs[0]),n.selectedTab.selected=!0,n}return Object(h.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.tabs){e.next=2;break}return e.abrupt("return");case 2:if(0!==this.tabs.length){e.next=4;break}return e.abrupt("return");case 4:return t=this.tabs[0],e.next=7,t.shown();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showTab",value:function(e){var t=this.tabs.find((function(t){return t.name===e}));void 0!==t&&(void 0!==this.selectedTab&&(this.selectedTab.selected=!1),t.selected=!0,this.selectedTab=t)}},{key:"render",value:function(){var e,t,n=this,r=x()("tab","tab-"+this.size),a=k.createElement("div",{className:x()(this.contentBg,"tab-content")},this.tabs.map((function(e,t){var n={display:!0===e.selected?void 0:"none"};return k.createElement("div",{key:t,style:n},e.content)}))),i=this.props,c=i.tabPosition,s=i.borderColor;s&&(e={borderColor:s,borderStyle:"solid",borderTopWidth:1,borderLeftWidth:1,borderRightWidth:1,borderBottomWidth:1},t={borderColor:s,borderStyle:"solid",borderTopWidth:1,borderBottomWidth:1,borderLeftWidth:0,borderRightWidth:0},"top"===c?(e.borderBottomWidth=0,e.borderTopLeftRadius=10,e.borderTopRightRadius=10,t.borderTopWidth=0):(e.borderTopWidth=0,e.borderBottomLeftRadius=10,e.borderBottomRightRadius=10,t.borderBottomWidth=0));var u=k.createElement("div",{className:x()(this.tabBg,this.sep,"tab-tabs")},this.tabs.map((function(r,a){var i,c=r.selected,s=r.caption,u=r.notify;if(void 0!==u){var o=u.get();void 0!==o&&(o>0?i=k.createElement("u",null,o>99?"99+":o):o<0&&(i=k.createElement("u",{className:"dot"})))}return k.createElement("div",{key:a,className:"",onClick:function(){return n.tabClick(r)},style:!0===c?e:t},k.createElement("div",{className:"align-self-center"},i,s(c)))})));return k.createElement("div",{className:r},"top"===c?k.createElement(k.Fragment,null,u,a):k.createElement(k.Fragment,null,a,u))}}]),t}(k.Component),s=Object(g.a)(c.prototype,"selectedTab",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=Object(g.a)(c.prototype,"tabs",[w.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=c))||i;n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return N}))},,,,function(e,t,n){},function(e,t,n){e.exports=n(161)},,,,,,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(47),i=n(1),c=n.n(i),s=n(2),u=n(3),o=n(5),l=n(7),p=n(6),h=n(8),d=(n(135),n(4)),f=n(20),m=n.n(f),v=function(e){return r.createElement(r.Fragment,null," ",e.chineseName," ")},b="http://www.jkchemical.com/static/Structure/",y="http://www.jkchemical.com/static/Structure/999.png";function g(e){var t=e.style,n=e.className,a=e.chemicalId;return r.createElement(d.Image,{src:a&&b+a.substr(0,3)+"/"+a+".png",style:t,className:n,altImage:y})}function k(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 text-muted pr-0"},e,":"),r.createElement("div",{className:"col-8"},t))}var w,O,j={salesTask:{salesTask:function(e){var t=e.desciption,n=e.customer,a=e.type,i=e.sourceid;return r.createElement(r.Fragment,null,Object(d.tv)(t),Object(d.tv)(n),Object(d.tv)(a),Object(d.tv)(i))},myCustomerUnit:function(e){return r.createElement(r.Fragment,null,e.name)},myCustomer:function(e){return r.createElement(r.Fragment,null,e.name)}},common:{address:function(e){var t=e.country,n=e.province,a=e.city,i=e.county;return r.createElement(r.Fragment,null,Object(d.tv)(t),Object(d.tv)(n,void 0,void 0,(function(){return r.createElement(r.Fragment,null)})),Object(d.tv)(a,void 0,void 0,(function(){return r.createElement(r.Fragment,null)})),Object(d.tv)(i,void 0,void 0,(function(){return r.createElement(r.Fragment,null)})))},country:v,province:v,city:v,county:v,currency:function(e){return r.createElement(r.Fragment,null," ",e.name," ")}},warehouse:{warehouse:function(e){var t=e.name;return r.createElement("div",null,t)}},product:{productx:function(e){var t=e,n=t.brand,a=t.description,i=t.CAS,c=t.purity,s=t.molecularFomula,u=t.molecularWeight,o=t.origin,l=t.imageUrl;return r.createElement("div",{className:"row d-flex"},r.createElement("div",{className:"col-12"},r.createElement("div",{className:"row py-2"},r.createElement("div",{className:"col-12"},r.createElement("strong",null,a))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(g,{chemicalId:l,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},k("CAS",i),k("\u7eaf\u5ea6",c),k("\u5206\u5b50\u5f0f",s),k("\u5206\u5b50\u91cf",u),k("\u4ea7\u54c1\u7f16\u53f7",o),Object(d.tv)(n,(function(e){return r.createElement(r.Fragment,null,k("\u54c1\u724c",e.name))})))))))},packx:function(e){var t=e.radiox,n=e.radioy,a=e.unit;return 1!==t?r.createElement(r.Fragment,null,t," * ",n,a):r.createElement(r.Fragment,null,n,a)},productCategory:function(e){return r.createElement(r.Fragment,null,"aaa")}}},x=n(82),E=n.n(x),C=n(83),N=n.n(C),S=r.createElement("div",{className:"d-flex align-items-center"},r.createElement("img",{className:"h-3c position-absolute",src:E.a,alt:"jnk"}),r.createElement("div",{className:"h3 flex-fill text-center"},r.createElement("span",{className:"text-primary mr-3"},"\u8f7b\u4ee3\u7406"))),P=r.createElement("div",{className:"d-flex align-items-center"},r.createElement("img",{className:"h-3c position-absolute",src:N.a,alt:"jnk"}),r.createElement("div",{className:"h3 flex-fill text-center"},r.createElement("span",{className:"text-primary mr-3"},"\u9500\u552e\u52a9\u624b"))),T=n(10),A=function(e){return!0===e?"text-primary":"text-muted"},I=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).opensrc=function(){window.open(M.sales.downloadAppurl)},n.render=function(e){var t=n.controller,a=t.cSalesTask,i=t.cCustomer,c=t.cProduct,s=t.cMe,u=t.cMessage,o=[{name:"home",label:"\u4efb\u52a1",content:a.tab,icon:"tasks",notify:void 0},{name:"member",label:"\u5ba2\u6237",content:i.tab,icon:"vcard"},{name:"member",label:"\u4ea7\u54c1",content:c.tab,icon:"gift"},{name:"member",label:"\u6211\u7684",content:s.tab,icon:"user",load:s.load,notify:u.count}].map((function(e){var t=e.name,n=e.label,r=e.icon;return{name:t,caption:function(e){return Object(d.TabCaptionComponent)(n,r,A(e))},content:e.content,notify:e.notify,load:e.load}})),l=function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1,uc:e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),html5Plus:e.indexOf("Html5Plus")>-1}}(),p=!1;return!l.html5Plus&&l.android&&(p=r.createElement("div",{className:"w-100 mx-3 d-flex  justify-content-between"},r.createElement("div",null,r.createElement(d.Image,{src:M.sales.logo,style:{width:"25px",height:"25px"}}),r.createElement("span",{className:"small mx-2"},M.sales.appName,"APP")),r.createElement("div",null,"  ",r.createElement("a",{download:!0,onClick:n.opensrc,className:"small"},"\u7acb\u5373\u6253\u5f00")))),r.createElement(d.Page,{header:p,headerClassName:"bg-info"},r.createElement(d.Tabs,{tabs:o}))},n.count=T.l.box(0),n.calcSum=function(){n.count.set(0)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.calcSum(),this.openPage(this.render);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),F={CHINA:44,CHINESE:196,SALESREGION_CN:1,TIPDISPLAYTIME:2e3},q={appName:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/salestask",version:"1.0.94",tvs:j,loginTop:S,oem:"\u767e\u7075\u5a01"},V=m.a.merge(m.a.clone(q),{loginTop:S}),L=m.a.merge(m.a.clone(q),{loginTop:P}),M={url:"http://agent.jkchemical.com",carturl:"http://shop.jkchemical.com",pageHeaderCss:"bg-primary py-1",sales:void 0},B=n(13),R=n(14),D=n(12),U=(n(19),n(9)),z=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"cApp",get:function(){return this._cApp}},{key:"uqs",get:function(){return this._uqs}}]),t}(d.CBase),H=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"cApp",get:function(){return this._cApp}},{key:"uqs",get:function(){return this._uqs}},{key:"owner",get:function(){return this._owner}}]),t}(d.CSub),_=function(){function e(t){Object(u.a)(this,e),this.cApp=void 0,this.entities=[],this.schemaLoaded=!1,this.cApp=t}return Object(o.a)(e,[{key:"loadSchemas",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.schemaLoaded){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all(this.entities);case 4:this.schemaLoaded=!0;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadSchemas();case 2:return n=this.initData(),e.next=5,this.loadToData(t,n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),W=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"loadToData",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,i,s,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.uqs.product.ProductChemical.obj({product:t});case 2:(r=e.sent)&&(a=r.chemical,i=r.purity,s=r.CAS,u=r.molecularFomula,o=r.molecularWeight,n.chemical=a,n.purity=i,n.CAS=s,n.molecularFomula=u,n.molecularWeight=o);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initData",value:function(){return{}}}]),t}(_),$=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"loadToData",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.uqs.product.Brand.load(t);case 2:r=e.sent,n.id=r.id,n.name=r.name;case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initData",value:function(){return{}}}]),t}(_),K=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"loadToData",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,i,s,u,o,l,p,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.uqs.product.ProductX.load(t);case 2:if(void 0!==(r=e.sent)){e.next=5;break}return e.abrupt("return");case 5:return m.a.merge(n,r),a=new $(this.cApp),e.next=9,a.load(n.brand.id);case 9:return n.brand=e.sent,i=new W(this.cApp),e.next=13,i.load(t);case 13:(s=e.sent)&&(u=s.chemical,o=s.purity,l=s.CAS,p=s.molecularFomula,h=s.molecularWeight,n.chemical=u,n.purity=o,n.CAS=l,n.molecularFomula=p,n.molecularWeight=h),n.packs=[],r.packx.forEach((function(e){n.packs.push(e)}));case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initData",value:function(){return{}}}]),t}(_),Q=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).getagentPrices=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=8;break}if(a=t[r],i=a.pack,s=a.agentprice,i!==n){e.next=5;break}return e.abrupt("return",s);case 5:r++,e.next=1;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"initData",value:function(){return{main:{},subs:[]}}},{key:"loadToData",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,i,s,u,o,l,p,h,d,f,m,v,b,y,g,k,w,O;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.cApp.uqs.product,a=this.cApp.uqs,i=a.product,s=a.promotion,u=new K(this.cApp),e.next=5,u.load(t);case 5:return n.main=e.sent,o=0,l=this.cApp,p=l.currentSalesRegion,h=l.currentLanguage,d=p.id,e.next=11,i.PriceX.table({product:t,salesRegion:d});case 11:return f=e.sent,e.next=14,r.AgentPrice.table({product:t,salesRegion:F.SALESREGION_CN});case 14:return m=e.sent,n.subs=f.filter((function(e){return 0===e.discountinued&&e.expireDate>Date.now()})).sort((function(e,t){return e.retail-t.retail})).map((function(e){var t={};return t.pack=e.pack,t.retail=e.retail,0!==o&&(t.vipPrice=Math.round(e.retail*(1-o))),t.currency=p.currency,t})),v=[],n.subs.forEach((function(e){v.push(s.GetPromotionPack.obj({product:t,pack:e.pack,salesRegion:p,language:h}))})),e.next=20,Promise.all(v);case 20:for(b=e.sent,y=0;y<n.subs.length;y++)for(g=b[y],(k=g&&g.discount)&&(n.subs[y].promotionPrice=Math.round((1-k)*n.subs[y].retail)),w=0;w<m.length;w++)O=m[w].pack.id,n.subs[y].pack.id===O&&(n.subs[y].agentPrice=m[w].agentPrice);case 22:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),t}(_),G=n(15),J=n.n(G),Y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),n.onSalesTaskClick=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={id:t.id,type:t.type,biz:t.biz,description:t.description,remindDate:null,deadline:t.deadline,customer:t.customer},n.controller.showTaskDetailEdit(r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderSalesTask=function(e,t){var a=e.bizName,i=e.customer,c=e.priorty,s=e.description,u=J()({"my-1 mr-2":!0,"text-danger":c>0,"text-info":!(c>0)}),o=r.createElement("div",{className:u},n.controller.getTaskIcon(a)),l=r.createElement("div",{className:"text-right"}," ",Object(d.tv)(i,(function(e){return r.createElement("small",null,Object(d.tv)(e.unit))}))," ");return r.createElement(d.LMR,{className:"pl-2 pr-3 py-1",left:o},r.createElement(d.LMR,{className:"",right:l},r.createElement("div",{className:" my-1 mr-3 font-weight-bold"},Object(d.tv)(i))),r.createElement(d.LMR,{className:""},r.createElement("div",{className:" my-1 mr-3 small",style:X},s)))},n.page=Object(U.a)((function(){var e=n.controller.tasks;if(void 0===e)return null;var t=r.createElement("div",{className:"my-3 mx-2",style:{color:"#888"}},"\u65e0\u4efb\u52a1"),a=r.createElement("div",{className:"cursor-pointer py-1",onClick:Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.controller.showSelectTaskType(void 0));case 1:case"end":return e.stop()}}),e)})))},r.createElement("span",{className:"iconfont mx-3 icon-tianjia",style:{fontSize:"20px",color:"#ffffff"}})),i={render:n.renderSalesTask,onClick:n.onSalesTaskClick},u=e.tasksNow,o=e.dateTasksList;return r.createElement(d.Page,{header:"\u4efb\u52a1",onScrollBottom:n.onScrollBottom,right:a,headerClassName:M.pageHeaderCss},0===u.length&&0===o.length&&t,u.length>0&&r.createElement(d.List,{before:"",none:t,items:u,item:i}),o.map((function(e,n){var a=e.date,c=e.list;return 0===c.length?null:r.createElement(r.Fragment,{key:n},r.createElement("div",{className:"small text-muted pt-3 px-3 pb-2 text-center"},r.createElement(d.EasyDate,{date:a})),r.createElement(d.List,{before:"",none:t,items:c,item:i}))})))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return r.createElement(this.page,null)}}]),t}(d.VPage),X={fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Z={caption:"\u7ec4\u5408\u8425\u9500",icon:r.createElement(d.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},ee={caption:"\u4ea7\u54c1\u8bd5\u7528",icon:r.createElement(d.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},te={caption:"\u5927\u989d\u8ba2\u5355\u53d6\u6d88",icon:r.createElement(d.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},ne={caption:"\u5927\u989d\u8ba2\u5355\u8ddf\u8e2a",icon:r.createElement(d.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{description:{widget:"textarea",label:"\u7ed3\u679c",placeholder:"\u8bf7\u586b\u5199\u5904\u7406\u7ed3\u679c",row:6},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},re={caption:"\u5ba2\u6237\u8ba1\u5212\u672a\u8fbe\u6807",icon:r.createElement(d.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},ae={caption:"\u5355\u4e00\u4ea7\u54c1\u91cd\u590d\u91c7\u8d2d",icon:r.createElement(d.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},ie={caption:"\u4efb\u52a1",icon:r.createElement(d.FA,{name:"clock-o",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}],radioClassName:"w-min-6c d-inline-block"},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"textarea",label:"\u7ed3\u679c",placeholder:"\u8bf7\u586b\u5199\u5904\u7406\u7ed3\u679c",row:12},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},ce={caption:"\u8bd5\u5242\u62a5\u4ef7\u8ddf\u8e2a",icon:r.createElement(d.FA,{name:"shopping-bag",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u4e22\u5355\u539f\u56e0",defaultValue:1,list:[{value:0,title:"\u8d27\u671f"},{value:1,title:"\u4ef7\u683c"},{value:1,title:"\u8d28\u91cf"},{value:1,title:"\u8d44\u8d28"},{value:1,title:"\u53d1\u7968"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},se={caption:"\u8ba2\u5355\u50ac\u7b7e\u8fd4",icon:r.createElement(d.FA,{name:"shopping-bag",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u4e22\u5355\u539f\u56e0",defaultValue:1,list:[{value:0,title:"\u8d27\u671f"},{value:1,title:"\u4ef7\u683c"},{value:1,title:"\u8d28\u91cf"},{value:1,title:"\u8d44\u8d28"},{value:1,title:"\u53d1\u7968"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},ue={caption:"\u5ba2\u6237\u5f00\u53d1",icon:r.createElement(d.FA,{name:"address-book",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"name",type:"string",required:!1},{name:"telephone",type:"number",required:!1},{name:"email",type:"string",required:!1},{name:"wechat",type:"string",required:!1},{name:"teacher",type:"string",required:!1},{name:"potential",type:"string",required:!1},{name:"research",type:"string",required:!1}],completuiSchema:{items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},oe={caption:"\u65b0\u5ba2\u6237\u5f00\u53d1",icon:r.createElement(d.FA,{name:"address-book",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"name",type:"string",required:!1},{name:"telephone",type:"number",required:!1},{name:"email",type:"string",required:!1},{name:"wechat",type:"string",required:!1},{name:"teacher",type:"string",required:!1},{name:"potential",type:"string",required:!1},{name:"research",type:"string",required:!1}],completuiSchema:{items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},le={caption:"\u5ba2\u6237\u4fe1\u606f\u5f00\u53d1",icon:r.createElement(d.FA,{name:"address-book",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"name",type:"string",required:!1},{name:"telephone",type:"number",required:!1},{name:"email",type:"string",required:!1},{name:"wechat",type:"string",required:!1},{name:"teacher",type:"string",required:!1},{name:"potential",type:"string",required:!1},{name:"research",type:"string",required:!1}],completuiSchema:{items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},pe={caption:"\u6bd5\u4e1a\u6e05\u6d17",icon:r.createElement(d.FA,{name:"address-book",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"name",type:"string",required:!1},{name:"telephone",type:"number",required:!1},{name:"email",type:"string",required:!1},{name:"wechat",type:"string",required:!1},{name:"teacher",type:"string",required:!1},{name:"potential",type:"string",required:!1},{name:"research",type:"string",required:!1}],completuiSchema:{items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},he=J()("w-100 py-3","cursor-pointer"),de=r.createElement("div",{className:"w-2c text-right"},r.createElement("i",{className:"fa fa-chevron-right"})),fe=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e){var t=this.controller.cSalesTask.showCustomerDetail,n=e.customer,a=e.description,i=e.deadline,c=function(){return t(n)},s=[{type:"component",name:"customer",component:r.createElement(d.LMR,{className:he,onClick:c,left:r.createElement("div",{className:"mr-2"}," ",r.createElement(d.FA,{name:"user",className:"text-info mr-2 pt-1"})," "),right:de},Object(d.tv)(n,(function(e){return r.createElement(r.Fragment,null,e.name)})))},{type:"component",name:"phone",component:r.createElement(d.LMR,{className:he,onClick:c,left:r.createElement("div",{className:"mr-2"}," ",r.createElement(d.FA,{name:"phone",className:"text-info mr-2 pt-1"})," "),right:de},Object(d.tv)(n,(function(e){return r.createElement(r.Fragment,null,e.telephone)})))}];return i&&s.push({type:"component",name:"deadline",component:r.createElement(d.LMR,{className:"w-100 py-3",left:r.createElement("div",{className:"mr-2"}," ",r.createElement(d.FA,{name:"clock-o",className:"text-info mr-2 pt-1 "})," ")},r.createElement(d.EasyDate,{date:i}))}),a&&s.push({type:"component",name:"description",component:r.createElement("div",{className:"w-100 py-3"},a)}),r.createElement(d.PropGrid,{className:"my-2",rows:s,values:e})}}]),t}(d.View),me=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).itemss="cursor-pointer my-2 w-100",n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e){var t=this.controller.cSalesTask.showCustomerDetail,n=e.customer,a=[{type:"component",name:"customer",component:r.createElement(d.LMR,{className:this.itemss,onClick:function(){return t(n)},left:r.createElement("div",null," ",r.createElement(d.FA,{name:"user",className:"text-info mr-2 pt-1 "})," "),right:r.createElement("div",{className:"text-right"},r.createElement("i",{className:"fa fa-chevron-right"}))},Object(d.tv)(n,(function(e){return r.createElement(r.Fragment,null,e.name)})))}];return r.createElement(d.PropGrid,{className:"my-2",rows:a,values:e})}}]),t}(d.View),ve=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e){var t=this.controller.cSalesTask,n=t.showTaskComplet,a=t.showTaskExtension,i=t.showTaskInvalid,u={id:e.id,type:e.type,biz:e.biz,description:null,remindDate:null,deadline:null,customer:e.customer},o=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.createElement("div",{className:"d-flex px-1"},r.createElement("div",{className:"flex-grow-1 align-self-center justify-content-end"},r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:l},"\u5ef6\u8fdf\u4efb\u52a1"),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:p},"\u53d6\u6d88\u4efb\u52a1"),r.createElement("button",{type:"button",className:"btn btn-primary ml-2 align-self-center",onClick:o},"\u5904\u7406\u4efb\u52a1")))}}]),t}(d.View),be=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e){var t=this.controller.cSalesTask.getCommonType(e.biz.obj.name).taskCommonType.completuiSchema,n=e.fields;return void 0===n?r.createElement(r.Fragment,null):r.createElement("div",{className:"w-100"},n.map((function(e,n){var a,i=e.fieldName,c=e.value,s=t.items[i],u=s.label,o=s.list,l=r.createElement("div",{className:""},r.createElement(d.FA,{name:"caret-right",className:"small text-info",fixWidth:!0}),u||i);return o&&(a=o.find((function(e){return e.value===c}))),r.createElement("div",{className:"row bg-white py-2",key:n},r.createElement("div",{className:"col-4 align-self-center"},l),r.createElement("div",{className:"col-8"},a?a.title:c," "))})))}}]),t}(d.View),ye=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).task=void 0,n.form=void 0,n.page=Object(U.a)((function(e){return n.render(e)})),n.onCompletionTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.controller.taskCommonType.completSchema,i=a.map((function(e,t){var n=e.name;return{fieldName:n,value:r.form.data[n]}})),n.task.fields=i,e.next=5,n.controller.cSalesTask.finishTask(n.task);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.onCreateProduct=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.cSalesTask.showPorductSelect(n.task);case 2:case"end":return e.stop()}}),e)}))),n.onCreateProject=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.cSalesTask.showCreateProject(n.task);case 2:case"end":return e.stop()}}),e)}))),n.onCreateProjectPack=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.cSalesTask.showPorductPackSelect(n.task);case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){var t=this;this.task=e;var n=this.controller.taskCommonType,a=n.completSchema,i=n.completuiSchema;return r.createElement("div",{className:"mx-3"},r.createElement(d.Form,{ref:function(e){return t.form=e},schema:a,uiSchema:i,onButtonClick:this.onFormButtonClick,requiredFlag:!1}),r.createElement("button",{type:"button",className:"btn btn-primary w-100  my-3",onClick:this.onCompletionTask},"\u63d0\u4ea4"))}}]),t}(d.VPage),ge=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).caption=void 0,n.cSalesTask=void 0,n.icon="plus",n.renderDetailValues=function(e){var t=Object(R.a)(n),a=t.caption,i=t.renderDetailTop,c=t.renderDetailContent;return r.createElement(d.Page,{header:a,headerClassName:M.pageHeaderCss},i(e),c(e))},n.renderDetailEdit=function(e){var t=Object(R.a)(n),a=t.caption,i=t.renderDetailTop,c=t.renderActionsBottom,s=t.renderDetailContent;return r.createElement(d.Page,{header:a,headerClassName:M.pageHeaderCss,footer:c(e)},i(e),s(e))},n.renderDetailTop=function(e){return n.renderView(fe,e)},n.renderDetailContent=function(e){return n.renderView(be,e)},n.renderActionsBottom=function(e){return n.renderView(ve,e)},n.renderComplet=function(e){var t=Object(R.a)(n).caption;return r.createElement(d.Page,{header:t,headerClassName:M.pageHeaderCss},n.renderCompletContent(e))},n.renderCompletContent=function(e){return n.renderView(ye,e)},n.renderCreateTop=function(e){return n.renderView(me,e)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"showDetailFromId",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cSalesTask.loadTask(t);case 2:n=e.sent,this.openPage(this.renderDetailValues(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showDetailEdit",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cSalesTask.loadTask(t.id);case 2:n=e.sent,t.fields=n.fields,this.openPage(this.renderDetailEdit(t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showComplet",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cSalesTask.loadTask(t.id);case 2:n=e.sent,this.openPage(this.renderComplet(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"showCreate",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.biz.assure();case 2:this.openPage(r.createElement(d.Page,{header:"biz.name"},"\u6ca1\u6709\u7ee7\u627fshowCreate\uff01"));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.Controller),ke=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).task=void 0,n.onAddTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.task.description=void 0,n.task.deadline=void 0,n.controller.getCTaskType(n.task.biz.name).showCreate(n.task);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFinishTask=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.task.priorty=0,e.next=3,n.controller.createAndFinishTask(n.task);case 3:n.closePage();case 4:case"end":return e.stop()}}),e)}))),n.page=Object(U.a)((function(e){return n.render(e)})),n.itemss="cursor-pointer my-2 w-100",n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){var t=this.controller.cApp.cSalesTask.showCustomerDetail,n=e.customer,a=e.type,i=e.biz,c=[{type:"component",name:"type",component:r.createElement(d.LMR,{className:this.itemss,left:r.createElement("div",null," ",r.createElement(d.FA,{name:"bookmark-o",className:"text-info mr-2 pt-1"})," ")},r.createElement("span",{className:"font-weight-bold mr-3"},Object(d.tv)(a,(function(e){return r.createElement(r.Fragment,null,e.description)}))," "),"  ",Object(d.tv)(i,(function(e){return r.createElement(r.Fragment,null,e.description)})))},{type:"component",name:"customer",component:r.createElement(d.LMR,{className:this.itemss,onClick:function(){return t(n)},left:r.createElement("div",null," ",r.createElement(d.FA,{name:"user",className:"text-info mr-2 pt-1 "})," "),right:r.createElement("div",{className:"text-right"},r.createElement("i",{className:"fa fa-chevron-right"}))},Object(d.tv)(n,(function(e){return r.createElement(r.Fragment,null,e.name)})))}],s=r.createElement("div",{className:"d-flex px-1"},r.createElement("div",{className:"flex-grow-1 align-self-center justify-content-start"},r.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onAddTask},"\xa0\u65b0\u5efa\xa0")),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:this.onFinishTask},"\u5904\u7406")),u=r.createElement("div",null,this.task.biz.description,"\xa0");return r.createElement(d.Page,{header:u,footer:s,headerClassName:M.pageHeaderCss},r.createElement(d.PropGrid,{className:"my-2",rows:c,values:e}))}}]),t}(d.VPage),we=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).task=void 0,n.form=void 0,n.onAddSalesTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.form.data,i=a.description,s=a.priorty,u=a.deadline,n.task.description=i,n.task.priorty=s,n.task.deadline=u,e.next=6,n.controller.cSalesTask.createTask(r.form.data,n.task);case 6:n.closePage(3);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){return n.render(e)})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){var t=this,n=this.controller.taskCommonType,a=n.schema,i=n.uiSchema,c=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onAddSalesTask},"\u4fdd\u5b58");return r.createElement(d.Page,{header:this.controller.caption,footer:c,headerClassName:M.pageHeaderCss},r.createElement("div",{className:"App-container container text-left"},this.controller.renderCreateTop(e),r.createElement(d.Form,{ref:function(e){return t.form=e},className:"my-3",schema:a,uiSchema:i,onButtonClick:this.onFormButtonClick,requiredFlag:!1})))}}]),t}(d.VPage),Oe=function(e){function t(e,n){var r;return Object(u.a)(this,t),(r=Object(l.a)(this,Object(p.a)(t).call(this,n))).taskCommonType=void 0,r.showCrateCheck=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.openVPage(ke,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.taskCommonType=e,r.icon=e.icon,r.caption=e.caption,r}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(e){}},{key:"showCreate",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.openVPage(we,t),e.abrupt("return");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(ge),je={reagent:ce,nonreagent:ie,signback:se,bagorder:ne,bagordercancel:te,marketing:Z,notuptostandard:re,repeatpurchase:ae,trial:ee,customerdev:ue,customerinfodev:le,newcustomerdev:oe,graduation:pe,newcustomer:oe};function xe(e){var t={};for(var n in je){var r=je[n];if("function"===typeof r){var a=t[n]=new r(void 0);a.cSalesTask=e,a.caption||(a.caption=n)}else{(t[n]=new Oe(r,void 0)).cSalesTask=e}}return t}var Ee,Ce,Ne,Se,Pe,Te,Ae,Ie,Fe,qe,Ve,Le,Me,Be,Re,De,Ue,ze=[{name:"resulttype",type:"string",required:!1},{name:"date",type:"string",required:!0},{name:"result",type:"string",required:!1}],He=(w=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"dateVisible",O,Object(R.a)(n)),n.list=[{value:1,title:"\u660e\u5929"},{value:2,title:"\u540e\u5929"}],n.onChange=function(e){var t=e.currentTarget.value;n.dateVisible="0"===t;var r=new Date;if("1"===t){r.setDate(r.getDate()+1);var a=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();n.setValue(a)}else if("2"===t){r.setDate(r.getDate()+2);var i=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();n.setValue(i)}},n.onDateChange=function(e){n.setValue(e.currentTarget.value)},n.render=function(){return r.createElement("div",{className:"form-control",style:{height:"auto"}},n.list.map((function(e,t){return r.createElement("label",{className:"my-1"},r.createElement("input",{type:"radio",value:e.value,name:"a",onChange:n.onChange})," ",e.title," \xa0 ")})),r.createElement("div",null,r.createElement("label",{className:"my-1"},r.createElement("input",{type:"radio",value:0,name:"a",onChange:n.onChange})," \u65e5\u671f \xa0 "),n.dateVisible&&r.createElement("input",{type:"date",defaultValue:(new Date).toDateString(),onChange:n.onDateChange})))},n}return Object(h.a)(t,e),t}(d.Widget),O=Object(D.a)(w.prototype,"dateVisible",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w),_e=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).form=void 0,n.task=void 0,n.uiSchema={items:{resulttype:{visible:!1},date:{widget:"custom",label:"\u63d0\u9192\u65e5\u671f",WidgetClass:He},result:{widget:"textarea",label:"\u5907\u6ce8",placeholder:"\u8bf7\u8f93\u5165\u5904\u7406\u7ed3\u679c\uff01",rows:12},submit:{widget:"button",label:"\u63d0\u4ea4"}}},n.onExtensionTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.form.data,i=a.result,s=a.resulttype,u=a.date,e.next=3,n.controller.extensionTask(n.task,i,s,u);case 3:n.closePage(2);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:n.onExtensionTask},"\u63d0\u4ea4");return r.createElement(d.Page,{header:"\u5ef6\u8fdf",footer:t,headerClassName:M.pageHeaderCss},r.createElement("div",{className:"App-container container text-left"},r.createElement(d.Form,{ref:function(e){return n.form=e},className:"my-3",schema:ze,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick})))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),We=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderHistory=function(e,t){var n=e.date,a=e.status,i=e.principal,c=e.result,s=r.createElement("small",{className:"text-muted"},i.id!==d.nav.user.id&&r.createElement("span",{className:"text-muted small"}),Object(d.tv)(a,(function(e){return e.name}))," ");return r.createElement("div",{className:"d-block p-3"},r.createElement(d.LMR,{left:r.createElement("small",{className:"text-muted"},r.createElement(d.EasyDate,{date:n})," "),right:r.createElement("small",{className:"text-muted"},s)}),r.createElement("div",null,c))},n.page=Object(U.a)((function(e){var t=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u672a\u5904\u7406\u3011");return r.createElement(d.Page,{header:"\u5904\u7406\u8be6\u60c5"},r.createElement(d.List,{before:"",none:t,items:e.tasks,item:{render:n.renderHistory}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),$e=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderList=function(e,t){var a=e.description,i=e.name,c=r.createElement("div",{className:"text-info mr-3"},n.controller.owner.getTaskIcon(i));return r.createElement(d.LMR,{className:"px-3 py-2",left:c},r.createElement("div",{className:"font-weight-bold"},a))},n.onClickTaskType=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.selectTaskType(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.ai=function(){var e=n.controller.cApp.cCustomer,t=function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.showSelectOrganization(1);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=r.createElement(d.LMR,{className:"p-3 bg-white mb-1 cursor-pointer",left:r.createElement(d.FA,{className:"text-success mr-3 mt-1",name:"vcard",size:"lg",fixWidth:!0}),onClick:t},r.createElement("div",{className:"font-weight-bold"},"\u65b0\u5efa\u5ba2\u6237"));return r.createElement("div",null,a)},n.page=function(e){var t=n.controller.tasktypelist,a=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u65e0\u4efb\u52a1\u7c7b\u578b\uff01");return r.createElement(d.Page,{header:"\u65b0\u5efa\u4efb\u52a1",headerClassName:M.pageHeaderCss},n.ai(),r.createElement(d.List,{none:a,items:t,item:{render:n.renderList,onClick:n.onClickTaskType}}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Ke=(Ee=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"finished",Ce,Object(R.a)(n)),n.renderItem=function(e,t){var n=e.deadline,a=e.biz,i=e.customer,c=e.type,s=e.priorty,u=J()({"my-1 mr-3":!0,"text-danger":s>0,"text-info":!(s>0)}),o=r.createElement("div",{className:u}),l=r.createElement("div",{className:"text-right"},n&&r.createElement("small",{className:"text-muted"},"\u65f6\u9650\uff1a",r.createElement(d.EasyDate,{date:n})));return r.createElement(d.LMR,{className:"px-3 py-2",left:o},r.createElement(d.LMR,{className:"",right:l},r.createElement("div",{className:"font-weight-bold"},Object(d.tv)(i,(function(e){return r.createElement(r.Fragment,null,e.name)})))),r.createElement(d.LMR,{className:"",right:r.createElement("div",{className:"text-muted"},r.createElement("small",null,Object(d.tv)(c,(function(e){return r.createElement(r.Fragment,null,e.description)}))))},r.createElement("div",{className:"text-muted"},r.createElement("small",null,Object(d.tv)(a,(function(e){return r.createElement(r.Fragment,null,e.description)}))))))},n.onClickJKTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.showJkTaskDetail(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){var e=n.controller.pageMyJKTask,t=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u6b63\u5728\u7b79\u5907\u4e2d");return r.createElement(d.Page,{header:"AI",headerClassName:M.pageHeaderCss},r.createElement(d.List,{none:t,items:e,item:{render:n.renderItem,onClick:n.onClickJKTask}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Ce=Object(D.a)(Ee.prototype,"finished",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee),Qe="w-100 py-3",Ge=J()(Qe,"cursor-pointer"),Je=(Ne=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"task",Se,Object(R.a)(n)),n.onCancel=function(){n.closePage()},n.onCreate=function(){n.controller.createTask(n.task),n.closePage(3)},n.page=Object(U.a)((function(){var e=n.task,t=e.type,a=e.biz,i=e.customer,c=e.deadline,s=e.description,u=[{type:"component",name:"type",component:r.createElement(d.LMR,{className:Ge,left:r.createElement("div",{className:"mr-2 "}," ",r.createElement(d.FA,{name:"bookmark-o",className:"text-info mr-2 pt-1"})," ")},r.createElement("span",{className:"font-weight-bold mr-3 my-3"},Object(d.tv)(t,(function(e){return r.createElement(r.Fragment,null,e.description)}))," "),"  ",Object(d.tv)(a,(function(e){return r.createElement(r.Fragment,null,e.description)})))},{type:"component",name:"customer",component:r.createElement(d.LMR,{className:Ge,onClick:null,left:r.createElement("div",{className:"mr-2"}," ",r.createElement(d.FA,{name:"user",className:"text-info mr-2 pt-1"})," ")},Object(d.tv)(i,(function(e){return r.createElement(r.Fragment,null,e.name)})))}];c&&u.push({type:"component",name:"deadline",component:r.createElement(d.LMR,{className:Qe,left:r.createElement("div",{className:"mr-2"}," ",r.createElement(d.FA,{name:"clock-o",className:"text-info mr-2 pt-1 "})," ")},r.createElement(d.EasyDate,{date:c}))}),s&&u.push({type:"component",name:"description",component:r.createElement("div",{className:"w-100 py-3"},s)});var o=r.createElement("div",{className:"flex-grow-1 align-self-center justify-content-start"},r.createElement("button",{type:"button",className:"btn btn-primary",onClick:n.onCreate},"\xa0\u6dfb\u52a0\xa0")),l=r.createElement("div",null,r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center"},"\u64a4\u9500"),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:n.onCancel},"\u53d6\u6d88"));return r.createElement(d.Page,{header:"\u4efb\u52a1\u8be6\u7ec6",headerClassName:M.pageHeaderCss},r.createElement(d.PropGrid,{className:"my-2",rows:u,values:n.task}),r.createElement(d.LMR,{className:" mx-3 ",left:o,right:l}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Se=Object(D.a)(Ne.prototype,"task",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne),Ye=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchQuery=void 0,n.firstSize=n.pageSize=10,n.searchQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.PageItems),Xe=(Pe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).taskBook=void 0,n.tasks=void 0,n.customerid=void 0,n.task=void 0,Object(B.a)(n,"tasktypelist",Te,Object(R.a)(n)),Object(B.a)(n,"pageMyJKTask",Ae,Object(R.a)(n)),Object(B.a)(n,"organization",Ie,Object(R.a)(n)),n.selectTaskType=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.task={id:null,type:t,biz:null,description:null,remindDate:null,deadline:null,customer:null},n.owner.cSalesTaskBiz.start(n.task);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.returnTaskType=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.returnCall(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.aiClick=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.pageMyJKTask=new Ye(n.uqs.salesTask.SearchJKTask),n.pageMyJKTask.first({key:void 0}),n.openVPage(Ke);case 3:case"end":return e.stop()}}),e)}))),n.showJkTaskDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.searchCustomerRelation(t.customer.id);case 2:n.openVPage(Je,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createTask=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.customer,i=a.obj.name,e.next=4,n.uqs.salesTask.ImportTask.submit({task:r,customername:i,organization:n.organization.id,organizationName:n.organization.name});case 4:return e.next=6,n.owner.searchTaskByKey(0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.searchCustomerRelation=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return{id:t},e.next=3,n.uqs.salesTask.getCustomerOrganization.query({customerId:t});case 3:if(!((r=e.sent)&&r.ret.length>0)){e.next=9;break}return a=r.ret[0].organization,e.next=8,n.uqs.salesTask.Organization.load(a);case 8:n.organization=e.sent;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pageMyJKTask=null,this.customerid=t,e.next=4,this.searchByKey("");case 4:this.openVPage($e,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchByKey",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.salesTask.TaskType.search(t,0,100);case 2:this.tasktypelist=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"owner",get:function(){return this._owner}}]),t}(H),Te=Object(D.a)(Pe.prototype,"tasktypelist",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=Object(D.a)(Pe.prototype,"pageMyJKTask",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=Object(D.a)(Pe.prototype,"organization",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe),Ze=(Fe=function(){function e(t){Object(u.a)(this,e),Object(B.a)(this,"tasksNow",qe,this),Object(B.a)(this,"dateTasksList",Ve,this),this.tasksNow=T.l.array([],{deep:!0}),this.dateTasksList=T.l.array([],{deep:!0});var n=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value;this.add(s)}}catch(o){r=!0,a=o}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}}return Object(o.a)(e,[{key:"postPone",value:function(e,t){this.remove(t);var n=m.a.clone(t);n.deadline=e,this.add(n)}},{key:"add",value:function(e){var t=e.deadline;if(t){var n=new Date(t).getTime(),r=this.dateTasksList.find((function(e){return e.date.getTime()===n}));void 0===r?(r={date:t,list:[e]},this.dateTasksList.push(r)):r.list.push(e)}else this.tasksNow.push(e)}},{key:"remove",value:function(e){var t=this.tasksNow.findIndex((function(t){return t.id===e.id}));if(t>=0)this.tasksNow.splice(t,1);else for(var n=this.dateTasksList.length,r=0;r<n;r++){var a=this.dateTasksList[r].list;if((t=a.findIndex((function(t){return t.id===e.id})))>=0)return a.splice(t,1),void(0===a.length&&this.dateTasksList.splice(r,1))}}}]),e}(),qe=Object(D.a)(Fe.prototype,"tasksNow",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=Object(D.a)(Fe.prototype,"dateTasksList",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe),et=[{name:"resulttype",type:"id",required:!1},{name:"result",type:"string",required:!1}],tt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).form=void 0,n.task=void 0,n.uiSchema={items:{resulttype:{visible:!1},result:{widget:"textarea",label:"\u539f\u56e0",placeholder:"\u8bf7\u8f93\u5165\u53d6\u6d88\u539f\u56e0\uff01",rows:12},submit:{widget:"button",label:"\u63d0\u4ea4"}}},n.onInvalidTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.form.data,i=a.result,s=a.resulttype,e.next=3,n.controller.onInvalidTask(n.task,i,s);case 3:n.closePage(2);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:n.onInvalidTask},"\u63d0\u4ea4");return r.createElement(d.Page,{header:"\u53d6\u6d88",footer:t,headerClassName:M.pageHeaderCss},r.createElement("div",{className:"App-container container text-left"},r.createElement(d.Form,{ref:function(e){return n.form=e},className:"my-3",schema:et,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick})))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),nt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).tasks=[],n.renderSalesTask=function(e,t){var a=e.bizName,i=e.customer,c=e.priorty,s=e.description,u=J()({"my-1 mr-2":!0,"text-danger":c>0,"text-info":!(c>0)}),o=r.createElement("div",{className:u},n.controller.getTaskIcon(a)),l=r.createElement("div",{className:"text-right"}," ",Object(d.tv)(i,(function(e){return r.createElement("small",null,Object(d.tv)(e.unit))}))," ");return r.createElement(d.LMR,{className:"pl-2 pr-3 py-1",left:o},r.createElement(d.LMR,{className:"",right:l},r.createElement("div",{className:" my-1 mr-3 font-weight-bold"},Object(d.tv)(i))),r.createElement(d.LMR,{className:""},r.createElement("div",{className:" my-1 mr-3 small",style:rt},s)))},n.onTaskClick=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.controller.showDetailFromId(t.task.obj);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){var e=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u6682\u65e0\u5386\u53f2\u4efb\u52a1\uff01\u3011");return r.createElement(d.Page,{header:"\u5386\u53f2\u4efb\u52a1",headerClassName:M.pageHeaderCss},r.createElement(d.List,{before:"",none:e,items:n.tasks,item:{render:n.renderSalesTask,onClick:n.onTaskClick}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.length>0&&(this.tasks=t),this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),rt={fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},at=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).tasks=void 0,n.renderHistory=function(e,t){var n=e.task,a=e.date,i=e.status;return r.createElement("div",{className:"d-block p-3"},r.createElement(d.LMR,{className:"small",left:r.createElement("small",{className:"text-muted"},r.createElement(d.EasyDate,{date:a})),right:r.createElement("small",null,Object(d.tv)(i,(function(e){return e.name})))}),r.createElement(d.LMR,{left:r.createElement("small",null,Object(d.tv)(n,(function(e){return Object(d.tv)(e.biz,(function(e){return e.description}))}))),right:r.createElement("small",null,Object(d.tv)(n,(function(e){return Object(d.tv)(e.type,(function(e){return e.description}))})))}))},n.onSalesTaskClick=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.controller.showTaskDetailEdit(t.task.obj);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){var e=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u65e0\u8bb0\u5f55\u3011");return r.createElement(d.Page,{header:"\u6c9f\u901a\u8bb0\u5f55",headerClassName:M.pageHeaderCss},r.createElement(d.List,{before:"",none:e,items:n.tasks,item:{render:n.renderHistory,onClick:n.onSalesTaskClick}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tasks=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),it=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderItem=function(e,t){var a=e.biz,i=e.type,c=r.createElement("div",{className:"text-info mr-3"},Object(d.tv)(i,(function(e){return n.controller.owner.getTaskIcon(a.obj.name)})));return r.createElement(d.LMR,{className:"px-3 py-2",left:c},r.createElement("div",{className:"font-weight-bold"},Object(d.tv)(a,(function(e){return e.description}))))},n.onClickTaskBiz=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.selectTaskBiz(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=function(){var e=n.controller,t=e.taskType,a=e.taskBizs,i=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u6b63\u5728\u7b79\u5907\u4e2d");return r.createElement(d.Page,{header:t.description||t.name,headerClassName:M.pageHeaderCss},r.createElement(d.List,{none:i,items:a,item:{render:n.renderItem,onClick:n.onClickTaskBiz}}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(d.VPage),ct=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).taskBizs=void 0,n.taskType=void 0,n.task=void 0,n.selectTaskBiz=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.task.biz=t.biz.obj,n.cApp.cCustomer.showSelectCustomer(n.task);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.returnTaskBiz=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.returnCall(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.aiClick=function(){n.openVPage(Ke)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.task=t,this.taskType=t.type,e.next=4,this.getBizFromTaskTypeId(this.taskType);case 4:this.openVPage(it);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBizFromTaskTypeId",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.salesTask.TaskBiz.query({type:t});case 2:n=e.sent,this.taskBizs=n.ret;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"owner",get:function(){return this._owner}}]),t}(H),st=[{name:"note",type:"string",required:!1}],ut=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).uiSchema={items:{note:{widget:"textarea",label:"\u5907\u6ce8",placeholder:""},submit:{widget:"button",label:"\u63d0\u4ea4"}}},n.form=void 0,n.createproduct=void 0,n.page=Object(U.a)((function(e){return n.render(e)})),n.onCreateTaskProduct=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.createproduct.note=r.data.note,e.next=3,n.controller.createTaskProduct(n.createproduct);case 3:n.closePage(2);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.renderBrand=function(e){return n.productPropItem("\u54c1\u724c",e.name)},n.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},n.productItem=function(e){var t=e.product,a=t.brand,i=t.description,c=t.descriptionC,s=t.CAS,u=t.purity,o=t.molecularFomula,l=t.molecularWeight,p=t.origin,h=t.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,i)),r.createElement("div",null,c)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(g,{chemicalId:h,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},n.productPropItem("CAS",s),n.productPropItem("\u7eaf\u5ea6",u),n.productPropItem("\u5206\u5b50\u5f0f",o),n.productPropItem("\u5206\u5b50\u91cf",l),n.productPropItem("\u4ea7\u54c1\u7f16\u53f7",p),Object(d.tv)(a,n.renderBrand)))))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.createproduct=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){var t=this;return r.createElement(d.Page,{header:"\u6dfb\u52a0\u4ea7\u54c1",footer:null,headerClassName:M.pageHeaderCss},r.createElement("div",{className:"mx-3"},this.productItem(e),r.createElement(d.Form,{ref:function(e){return t.form=e},schema:st,uiSchema:this.uiSchema,onButtonClick:this.onFormButtonClick,requiredFlag:!1}),r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onCreateTaskProduct},"\u6dfb\u52a0")))}}]),t}(d.VPage),ot=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).products=void 0,n.page=Object(U.a)((function(){return n.render()})),n.renderBrand=function(e){return n.productPropItem("\u54c1\u724c",e.name)},n.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},n.renderItem=function(e,t){return Object(d.tv)(e.product,(function(e){var t=e.brand,a=e.description,i=e.descriptionC,c=e.CAS,s=e.purity,u=e.molecularFomula,o=e.molecularWeight,l=e.origin,p=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,a)),r.createElement("div",null,i)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(g,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},n.productPropItem("CAS",c),n.productPropItem("\u7eaf\u5ea6",s),n.productPropItem("\u5206\u5b50\u5f0f",u),n.productPropItem("\u5206\u5b50\u91cf",o),n.productPropItem("\u4ea7\u54c1\u7f16\u53f7",l),Object(d.tv)(t,n.renderBrand)))))}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.products=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u65e0\u4ea7\u54c1");return r.createElement(d.Page,{header:"\u4ea7\u54c1\u8be6\u60c5",headerClassName:M.pageHeaderCss},r.createElement("div",null,r.createElement(d.List,{before:"",none:e,items:this.products,item:{render:this.renderItem}})))}}]),t}(d.VPage),lt=[{name:"note",type:"string",required:!1}],pt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).uiSchema={items:{note:{widget:"textarea",label:"\u5907\u6ce8",placeholder:""},submit:{widget:"button",label:"\u63d0\u4ea4"}}},n.form=void 0,n.task=void 0,n.page=Object(U.a)((function(e){return n.render(e)})),n.onCreateTaskProject=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.createTaskProject(n.task,r.data.note);case 2:n.closePage();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){var t=this;return r.createElement(d.Page,{header:"\u6dfb\u52a0\u9879\u76ee",footer:null,headerClassName:M.pageHeaderCss},r.createElement("div",{className:"mx-3"},r.createElement(d.Form,{ref:function(e){return t.form=e},schema:lt,uiSchema:this.uiSchema,onButtonClick:this.onFormButtonClick,requiredFlag:!1}),r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onCreateTaskProject},"\u6dfb\u52a0")))}}]),t}(d.VPage),ht=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).projects=void 0,n.page=Object(U.a)((function(){return n.render()})),n.renderItem=function(e,t){return Object(d.tv)(e.project,(function(e){var t=e.name;return r.createElement("div",{className:"px-3"},t)}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.projects=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u65e0\u9879\u76ee");return r.createElement(d.Page,{header:"\u9879\u76ee\u8be6\u60c5",headerClassName:"bg-primary"},r.createElement(d.List,{before:"",none:e,items:this.projects,item:{render:this.renderItem}}))}}]),t}(d.VPage),dt=n(55),ft=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).createproduct=void 0,n.renderBrand=function(e){return n.productPropItem("\u54c1\u724c",e.name)},n.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},n.renderProduct=function(e,t){var a=e.brand,i=e.description,c=e.descriptionC,s=e.CAS,u=e.purity,o=e.molecularFomula,l=e.molecularWeight,p=e.origin,h=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,i)),r.createElement("div",null,c)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(g,{chemicalId:h,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},n.productPropItem("CAS",s),n.productPropItem("\u7eaf\u5ea6",u),n.productPropItem("\u5206\u5b50\u5f0f",o),n.productPropItem("\u5206\u5b50\u91cf",l),n.productPropItem("\u4ea7\u54c1\u7f16\u53f7",p),Object(d.tv)(a,n.renderBrand)))))},n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageProduct.more();case 2:case"end":return e.stop()}}),e)}))),n.onSelectItem=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.controller.cApp.cSalesTask.showPorductSelectDetail,n.createproduct.product=t,r(n.createproduct);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=n.controller.pageProduct,a=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u641c\u7d22\u5230\u4ea7\u54c1");return r.createElement(d.Page,{header:"\u6dfb\u52a0\u4ea7\u54c1",onScrollBottom:n.onScrollBottom,headerClassName:M.pageHeaderCss},r.createElement(d.SearchBox,{className:"px-1 w-100  mt-2 mr-2 ",size:"md",onSearch:function(e){return n.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u54c1\u540d\u3001\u7f16\u53f7\u3001CAS\u3001MDL\u7b49"}),r.createElement(d.List,{before:"",none:a,items:t,item:{render:n.renderProduct,onClick:n.onSelectItem}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.createproduct=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return r.createElement(this.page,null)}}]),t}(d.VPage),mt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderBrand=function(e){return n.productPropItem("\u54c1\u724c",e.name)},n.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},n.renderProduct=function(e,t){var a=n.controller.showProductDetail,i=e.brand,u=e.description,o=e.descriptionC,l=e.CAS,p=e.purity,h=e.molecularFomula,f=e.molecularWeight,m=e.origin,v=e.imageUrl,b=function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.createElement("div",{className:"d-block mb-4 px-2",onClick:b},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,u)),r.createElement("div",null,o)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(g,{chemicalId:v,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},n.productPropItem("CAS",l),n.productPropItem("\u7eaf\u5ea6",p),n.productPropItem("\u5206\u5b50\u5f0f",h),n.productPropItem("\u5206\u5b50\u91cf",f),n.productPropItem("\u4ea7\u54c1\u7f16\u53f7",m),Object(d.tv)(i,n.renderBrand)))))},n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageProduct.more();case 2:case"end":return e.stop()}}),e)}))),n.page=Object(U.a)((function(e){var t,a,i,u=n.controller.pageProduct,o=n.controller.cApp.productCart,l=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u641c\u7d22\u5230\u4ea7\u54c1");(i=o.count)>0&&(t="cursor-pointer",a=i<100?r.createElement("u",null,i):r.createElement("u",null,"99+"));var p=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.cApp.cProduct.showProductBox();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=r.createElement("div",{className:"cursor-pointer py-1"},r.createElement("div",null,r.createElement("div",{className:J()("jk-cart ml-1 mr-3",t),onClick:p},a,r.createElement("i",{className:"iconfont icon-dabao",style:{fontSize:"20px"}}))));return r.createElement(d.Page,{header:"\u4ea7\u54c1",right:h,onScrollBottom:n.onScrollBottom,headerClassName:M.pageHeaderCss},r.createElement(d.SearchBox,{className:"px-1 w-100  mt-2 mr-2 ",size:"md",onSearch:function(e){return n.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u54c1\u540d\u3001\u7f16\u53f7\u3001CAS\u3001MDL\u7b49"}),r.createElement(d.List,{before:"",none:l,items:u,item:{render:n.renderProduct,onClick:null}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return r.createElement(this.page,null)}}]),t}(d.VPage),vt=[{name:"pack",type:"object"},{name:"retail",type:"number"},{name:"vipPrice",type:"number"},{name:"agentPrice",type:"number"},{name:"promotionPrice",type:"number"},{name:"currency",type:"string"},{name:"quantity",type:"number"},{name:"inventoryAllocation",type:"object"},{name:"futureDeliveryTimeDescription",type:"string"}],bt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).productBox=void 0,n.product=void 0,n.renderProduct=function(e){var t=e.brand,n=e.description,a=e.descriptionC,i=e.CAS,c=e.purity,s=e.molecularFomula,u=e.molecularWeight,o=e.origin,l=e.imageUrl;return r.createElement("div",{className:"mb-3 px-2"},r.createElement("div",{className:"py-2"},r.createElement("strong",null,n)),r.createElement("div",null,a),r.createElement("div",{className:"row mt-3"},r.createElement("div",{className:"col-sm-3"},r.createElement(g,{chemicalId:l,className:"w-100"})),r.createElement("div",{className:"col-12 col-sm-9"},r.createElement("div",{className:"row mx-3"},xt("CAS",i,"font-weight-bold"),xt("\u4ea7\u54c1\u7f16\u53f7",o,"font-weight-bold"),xt("\u7eaf\u5ea6",c),xt("\u5206\u5b50\u5f0f",s),xt("\u5206\u5b50\u91cf",u),jt(t)))))},n.arrTemplet=function(e){var t=e.pack,a=e.retail,i=e.vipPrice,c=e.agentPrice,s=e.promotionPrice,u=null,o=null;if(a){var l,p=n.minPrice(i,s);if(p?l=r.createElement("small",{className:"text-muted"},r.createElement("del",null,"\xa5",a)):p=a,!M.sales.isInner)if(c){var h=10*(1-(a-c)/a);o=h<10?r.createElement("span",null,r.createElement("span",{className:"small ml-2"},r.createElement("strong",{className:"small"},r.createElement("span",{className:"small"},h.toFixed(1),"\u6298")))):r.createElement("span",{className:"small ml-2"}," ",r.createElement("strong",{className:"small"},r.createElement("span",{className:"small"},"\u65e0\u6298\u6263")))}else o=r.createElement("span",{className:"small ml-2"}," ",r.createElement("strong",{className:"small"},r.createElement("span",{className:"small"},"\u65e0\u6298\u6263")));u=r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-6 pb-2 d-flex justify-content-end align-items-center"},r.createElement("small",{className:"text-muted"},l),"\xa0 \xa0",r.createElement("span",{className:"text-danger"},"\xa5 ",r.createElement("span",{className:"h5 pb-2"},p)),r.createElement("span",null," ",r.createElement("span",{className:"h5"},o))))}else u=r.createElement("small",null,"\u8bf7\u8be2\u4ef7");return r.createElement("div",{className:"px-4"},r.createElement("div",{className:"row px-2"},r.createElement("div",{className:"col-5 "},r.createElement("div",null,r.createElement("b",null,Object(d.tv)(t)))),r.createElement("div",{className:"col-7"},u)),n.controller.renderDeliveryTime(t))},n.uiSchema={Templet:n.arrTemplet},n.renderPack=function(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"sep-product-select"}),r.createElement(d.Form,{className:"my-3",schema:vt,uiSchema:n.uiSchema,formData:e}))},n.onAddPack=function(){n.controller.cApp.productCart.add(n.product,n.productBox.main.id)},n.page=Object(U.a)((function(e){var t={paramtype:"product",product:n.product},a=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.cApp.cCoupon.showCreateCoupon(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=r.createElement("div",{className:"d-block"},r.createElement("div",{className:"w-100  justify-content-end"},r.createElement("button",{type:"button",className:"btn btn-primary my-1 ",style:{padding:"6px 35px 6px 35px"},onClick:a},"\u5206\u4eab"),r.createElement("button",{type:"button",className:"btn btn-primary mx-1 my-1 px-3",onClick:n.onAddPack},"\u6253\u5305\u5206\u4eab"))),u=new dt.ViewMainSubs(n.renderProduct,n.renderPack);u.model=e;var o,l,p,h=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.cApp.cProduct.showProductBox();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(p=n.controller.cApp.productCart.count)>0&&(o="cursor-pointer",l=p<100?r.createElement("u",null,p):r.createElement("u",null,"99+"));var f=r.createElement("div",{className:"cursor-pointer py-1"},r.createElement("div",null,r.createElement("div",{className:J()("jk-cart ml-1 mr-3",o),onClick:h},l,r.createElement("i",{className:"iconfont icon-huowudui",style:{fontSize:"20px"}}))));return r.createElement(d.Page,{header:"\u4ea7\u54c1\u660e\u7ec6",right:f,headerClassName:M.pageHeaderCss,footer:i},r.createElement("div",{className:"px-2 py-2 bg-white mb-3"},u.render()))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.product=t,this.productBox=t,this.openPage(this.page,t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"minPrice",value:function(e,t){if(e||t)return Math.min("number"===typeof e?e:1/0,"number"===typeof t?t:1/0)}}]),t}(d.VPage),yt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).createproduct=void 0,n.renderBrand=function(e){return n.productPropItem("\u54c1\u724c",e.name)},n.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},n.renderProduct=function(e,t){var a=e.brand,i=e.description,c=e.descriptionC,s=e.CAS,u=e.purity,o=e.molecularFomula,l=e.molecularWeight,p=e.origin,h=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,i)),r.createElement("div",null,c)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(g,{chemicalId:h,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},n.productPropItem("CAS",s),n.productPropItem("\u7eaf\u5ea6",u),n.productPropItem("\u5206\u5b50\u5f0f",o),n.productPropItem("\u5206\u5b50\u91cf",l),n.productPropItem("\u4ea7\u54c1\u7f16\u53f7",p),Object(d.tv)(a,n.renderBrand)))))},n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageProduct.more();case 2:case"end":return e.stop()}}),e)}))),n.onSelectItem=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.controller.cApp.cSalesTask.showPorductPackSelectDetail,n.createproduct.product=t,r(n.createproduct);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=n.controller.pageProduct,a=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u641c\u7d22\u5230\u4ea7\u54c1");return r.createElement(d.Page,{header:"\u9009\u62e9\u5305\u88c5",onScrollBottom:n.onScrollBottom,headerClassName:M.pageHeaderCss},r.createElement(d.SearchBox,{className:"px-1 w-100  mt-2 mr-2 ",size:"md",onSearch:function(e){return n.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u54c1\u540d\u3001\u7f16\u53f7\u3001CAS\u3001MDL\u7b49"}),r.createElement(d.List,{before:"",none:a,items:t,item:{render:n.renderProduct,onClick:n.onSelectItem}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.createproduct=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return r.createElement(this.page,null)}}]),t}(d.VPage),gt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).content=Object(U.a)((function(e){var t=e.packId,a=e.productId,i=n.controller,c=i.inventoryAllocationContainer,s=i.futureDeliveryTimeDescriptionContainer,u=c[t],o=s[a];return u&&u.length>0?u.map((function(e,t){var n=e.warehouse,a=e.quantity,i=e.deliveryTimeDescription;if(a>0)return r.createElement("div",{key:t,className:"text-success"},Object(d.tv)(n,(function(e){return r.createElement("span",{className:"small"},e.name)})),": ",a>10?">10":a,i)})):r.createElement("div",null,o&&"\u671f\u8d27: "+o)})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(e){var t=e.obj,n=e.id,a=t.owner,i=this.controller,c=i.cApp.currentSalesRegion;return i.getInventoryAllocation(a,n,c),i.getFutureDeliveryTimeDescription(a,c),r.createElement(this.content,{packId:n,productId:a})}}]),t}(d.View),kt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderBrand=function(e){return n.productPropItem("\u54c1\u724c",e.name)},n.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},n.renderProduct=function(e,t){var a=e.main,i=a.id,c=a.brand,s=a.description,u=a.descriptionC,o=a.CAS,l=a.purity,p=a.molecularFomula,h=a.molecularWeight,f=a.origin,m=a.imageUrl,v=n.controller.cApp.productCart;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,s)),r.createElement("div",null,u)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(g,{chemicalId:m,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},n.productPropItem("CAS",o),n.productPropItem("\u7eaf\u5ea6",l),n.productPropItem("\u5206\u5b50\u5f0f",p),n.productPropItem("\u5206\u5b50\u91cf",h),n.productPropItem("\u4ea7\u54c1\u7f16\u53f7",f),Object(d.tv)(c,n.renderBrand)))),r.createElement("div",{className:"w-100 d-flex justify-content-end"},r.createElement("span",{onClick:function(){return v.remove(i)},className:"text-info mx-3"},r.createElement(d.FA,{name:"trash"}))))},n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageProduct.more();case 2:case"end":return e.stop()}}),e)}))),n.page=Object(U.a)((function(e){var t=n.controller.cApp,a=t.productCart,i=t.cCoupon,u={paramtype:"productlist",product:a.getIds()},o=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.showCreateCoupon(u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=a.list,p=r.createElement("div",{className:"d-block"},r.createElement("div",{className:"w-100  justify-content-end"},r.createElement("button",{type:"button",className:"btn btn-primary mx-1 my-1 px-4",onClick:o},"\u5206\u4eab")));return r.createElement(d.Page,{header:"\u4ea7\u54c1\u6846",onScrollBottom:n.onScrollBottom,headerClassName:M.pageHeaderCss,footer:p},l&&l&&l.length>0&&r.createElement(d.List,{before:"",none:"\u65e0\u4ea7\u54c1",items:l,item:{render:n.renderProduct,onClick:null}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return r.createElement(this.page,null)}}]),t}(d.VPage),wt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchProductQuery=void 0,n.firstSize=n.pageSize=10,n.searchProductQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchProductQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.seq}}]),t}(d.PageItems),Ot=(Le=function(e){function t(){var e,n,a=this;Object(u.a)(this,t);for(var i=arguments.length,o=new Array(i),h=0;h<i;h++)o[h]=arguments[h];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o))),Object(B.a)(n,"pageProduct",Me,Object(R.a)(n)),Object(B.a)(n,"customerlist",Be,Object(R.a)(n)),Object(B.a)(n,"inventoryAllocationContainer",Re,Object(R.a)(n)),Object(B.a)(n,"futureDeliveryTimeDescriptionContainer",De,Object(R.a)(n)),Object(B.a)(n,"chemicalInfoContainer",Ue,Object(R.a)(n)),n.searchByKey=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pageProduct=new wt(n.uqs.product.SearchProduct),e.next=3,n.pageProduct.first({keyWord:t,salesRegion:1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.returnProduct=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.returnCall(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showProductDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Q(n.cApp),e.next=3,r.load(t.id);case 3:a=e.sent,n.openVPage(bt,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showProductSelect=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(ft,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showProductPackSelect=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(yt,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.renderDeliveryTime=function(e){return n.renderView(gt,e)},n.getInventoryAllocation=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n.inventoryAllocationContainer[r]){e.next=4;break}return e.next=3,n.uqs.warehouse.GetInventoryAllocation.table({product:t,pack:r,salesRegion:n.cApp.currentSalesRegion});case 3:n.inventoryAllocationContainer[r]=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.getFutureDeliveryTimeDescription=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n.futureDeliveryTimeDescriptionContainer[t]){e.next=5;break}return e.next=3,n.uqs.product.GetFutureDeliveryTime.table({product:t,salesRegion:r});case 3:(a=e.sent).length>0?(i=a[0],s=i.minValue,u=i.maxValue,o=i.unit,n.futureDeliveryTimeDescriptionContainer[t]=s+(u>s?"~"+u:"")+" "+o):n.futureDeliveryTimeDescriptionContainer[t]=null;case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.showProductBox=function(){n.openVPage(kt)},n.render=Object(U.a)((function(){return n.pageProduct=null,n.renderView(mt)})),n.tab=function(){return r.createElement(a.render,null)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.pageProduct=null,this.openVPage(ft,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(z),Me=Object(D.a)(Le.prototype,"pageProduct",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=Object(D.a)(Le.prototype,"customerlist",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=Object(D.a)(Le.prototype,"inventoryAllocationContainer",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),De=Object(D.a)(Le.prototype,"futureDeliveryTimeDescriptionContainer",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ue=Object(D.a)(Le.prototype,"chemicalInfoContainer",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Le);function jt(e){return xt("\u54c1\u724c",e.name)}function xt(e,t,n){if(null===t||void 0===t||"0"===t)return null;var a=n?J()(n):J()("text-muted"),i=n?J()(n):"";return r.createElement(r.Fragment,null,r.createElement("div",{className:J()("col-6 col-sm-2 pr-0 small",a)}," ",e),r.createElement("div",{className:J()("col-6 col-sm-4",i)},t))}var Et,Ct,Nt,St,Pt,Tt=[{name:"pack",type:"object"},{name:"retail",type:"number"},{name:"vipPrice",type:"number"},{name:"promotionPrice",type:"number"},{name:"currency",type:"string"}],At=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).product=void 0,n.pack=[],n.renderProduct=function(e){var t=e.brand,a=e.description,i=e.descriptionC,c=e.CAS,s=e.purity,u=e.molecularFomula,o=e.molecularWeight,l=e.origin,p=e.imageUrl;return r.createElement("div",{className:"mb-3 px-2"},r.createElement("div",{className:"py-2"},r.createElement("strong",null,a)),r.createElement("div",null,i),r.createElement("div",{className:"row mt-3"},r.createElement("div",{className:"col-sm-3"},r.createElement(g,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-sm-9"},r.createElement("div",{className:"row"},n.item("CAS",c),n.item("\u7eaf\u5ea6",s),n.item("\u5206\u5b50\u5f0f",u),n.item("\u5206\u5b50\u91cf",o),n.item("\u4ea7\u54c1\u7f16\u53f7",l),jt(t)))))},n.item=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4"},t))},n.arrTemplet=function(e){var t=e.pack,a=e.retail,i=e.promotionPrice,c=e.inventoryAllocation,s=e.futureDeliveryTimeDescription,u=null;if(a){var o,l=i;l?o=r.createElement("small",{className:"text-muted"},r.createElement("del",null,"\uffe5",a)):l=a,u=r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-6 pb-2 d-flex justify-content-end align-items-center"},r.createElement("small",{className:"text-muted"},o),"\xa0 \xa0",r.createElement("span",{className:"text-danger"},"\uffe5 ",r.createElement("span",{className:"h5"},l))))}else u=r.createElement("small",null,"\u8bf7\u8be2\u4ef7");var p=r.createElement(r.Fragment,null);return p=c&&c.length>0?c.map((function(e,t){var n=e.warehouse,a=e.quantity,i=e.deliveryTimeDescription;return r.createElement("div",{key:t,className:"text-success"},Object(d.tv)(n,(function(e){return r.createElement(r.Fragment,null,e.name)})),": ",a,i)})):r.createElement("div",null,s&&"\u671f\u8d27: "+s),r.createElement("div",{className:"px-2"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-6"},r.createElement("div",null,r.createElement("input",{type:"checkbox",name:"productpack",onChange:n.onChangePack,value:t.id}),r.createElement("b",null,Object(d.tv)(t,(function(e){return r.createElement("div",null,e.radioy,e.unit)})))),r.createElement("div",null,p)),r.createElement("div",{className:"col-6"},u)))},n.onChangePack=function(e){var t=e.currentTarget,r=t.value;t.checked?n.addArr(r):n.removeArr(r)},n.uiSchema={Templet:n.arrTemplet},n.renderPack=function(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"sep-product-select"}),r.createElement(d.Form,{className:"my-3",schema:Tt,uiSchema:n.uiSchema,formData:e}))},n.onCreateTaskProductPack=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.controller,a=r.createTaskProjectPack,(i=r.createproduct).pack=n.pack,e.next=4,a(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=new dt.ViewMainSubs(n.renderProduct,n.renderPack);return t.model=e,r.createElement(d.Page,{header:"\u6dfb\u52a0\u4ea7\u54c1\u5305\u88c5",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"px-2 py-2 bg-white mb-3"},t.render()),r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:n.onCreateTaskProductPack},"\u6dfb\u52a0"))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.product=t.main,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeArr",value:function(e){for(var t=0;t<this.pack.length;t++)this.pack[t]==e&&(this.pack.splice(t,1),t--)}},{key:"addArr",value:function(e){this.pack.push(e)}}]),t}(d.VPage),It=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).products=void 0,n.page=Object(U.a)((function(){return n.render()})),n.renderBrand=function(e){return n.productPropItem("\u54c1\u724c",e.name)},n.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},n.renderItem=function(e,t){return Object(d.tv)(e.product,(function(t){var a=t.brand,i=t.description,c=t.descriptionC,s=t.CAS,u=t.purity,o=t.molecularFomula,l=t.molecularWeight,p=t.origin,h=t.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,i)),r.createElement("div",null,c)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(g,{chemicalId:h,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},n.productPropItem("CAS",s),n.productPropItem("\u7eaf\u5ea6",u),n.productPropItem("\u5206\u5b50\u5f0f",o),n.productPropItem("\u5206\u5b50\u91cf",l),n.productPropItem("\u4ea7\u54c1\u7f16\u53f7",p),Object(d.tv)(a,n.renderBrand)))),r.createElement("div",null,Object(d.tv)(e.pack,(function(e){return r.createElement("div",null,e.radioy,e.unit)}))))}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.products=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u65e0\u4ea7\u54c1\u5305\u88c5");return r.createElement(d.Page,{header:"\u4ea7\u54c1\u5305\u88c5\u8be6\u60c5",headerClassName:M.pageHeaderCss},r.createElement("div",null,r.createElement(d.List,{before:"",none:e,items:this.products,item:{render:this.renderItem}})))}}]),t}(d.VPage),Ft=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).task=void 0,n.form=void 0,n.saveType=1,n.onAddSalesTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:n.saveType=1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onCreateAndFinishTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return n.saveType=0,e.next=5,n.form.buttonClick("submit");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.form.data,i=a.customer,s=a.priorty,u=a.deadline,o=a.description,n.task.customer=i,n.task.priorty=s,n.task.deadline=u,n.task.description=o,1!==n.saveType){e.next=11;break}return e.next=8,n.controller.createTask(r.form.data,n.task);case 8:n.closePage(),e.next=13;break;case 11:return e.next=13,n.controller.createAndFinishTask(n.task);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.uiSchema={items:{customer:{widget:"id",label:"\u5ba2\u6237",placeholder:"\u8bf7\u9009\u62e9\u5ba2\u6237",pickId:function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.cApp.cCustomer.call(t,r,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Templet:function(e){var t=e.name,n=e.unit;return e?r.createElement("div",null,t,r.createElement("small",{className:" mx-3"},Object(d.tv)(n,(function(e){return r.createElement(r.Fragment,null,e.name)})))):r.createElement("small",{className:"text-muted"},"\u8bf7\u9009\u62e9\u5ba2\u6237")}},priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"textarea",label:"\u4efb\u52a1\u63cf\u8ff0",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u63cf\u8ff0",rows:6},submit:{widget:"button",label:"\u63d0\u4ea4"}}},n.schema=[{name:"customer",type:"id",required:!0},{name:"priorty",type:"string",required:!1},{name:"deadline",type:"date",required:!0},{name:"description",type:"string",required:!0}],n.page=Object(U.a)((function(){return r.createElement(d.Page,{header:"\u6dfb\u52a0\u4efb\u52a1",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"mx-3"},r.createElement(d.Form,{ref:function(e){return n.form=e},className:"my-3",schema:n.schema,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick,requiredFlag:!0}),r.createElement("div",{className:"d-flex px-1 "},r.createElement("div",{className:"flex-grow-1 justify-content-start"}),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2",onClick:n.onCreateAndFinishTask},"\u5904\u7406\u4efb\u52a1"),r.createElement("button",{type:"button",className:"btn btn-primary mx-2",onClick:n.onAddSalesTask},"\u65b0\u5efa\u4efb\u52a1"))))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),qt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).task=void 0,n.form=void 0,n.saveType=1,n.onAddSalesTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:n.saveType=1;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onCreateAndFinishTask=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return n.saveType=0,e.next=5,n.form.buttonClick("submit");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.form.data,i=a.priorty,s=a.deadline,u=a.description,n.task.priorty=i,n.task.deadline=s,n.task.description=u,1!==n.saveType){e.next=10;break}return e.next=7,n.controller.createTask(r.form.data,n.task);case 7:n.closePage(),e.next=12;break;case 10:return e.next=12,n.controller.createAndFinishTask(n.task);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.uiSchema={items:{deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"textarea",label:"\u4efb\u52a1\u63cf\u8ff0",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u63cf\u8ff0",rows:6},submit:{widget:"button",label:"\u63d0\u4ea4"}}},n.schema=[{name:"deadline",type:"date",required:!0},{name:"description",type:"string",required:!0}],n.page=Object(U.a)((function(){return r.createElement(d.Page,{header:"\u6dfb\u52a0\u4efb\u52a1",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"mx-3"},r.createElement(d.Form,{ref:function(e){return n.form=e},className:"my-3",schema:n.schema,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick,requiredFlag:!0}),r.createElement("div",{className:"d-flex px-1 "},r.createElement("div",{className:"flex-grow-1 justify-content-start"}),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2",onClick:n.onCreateAndFinishTask},"\u5904\u7406\u4efb\u52a1"),r.createElement("button",{type:"button",className:"btn btn-primary mx-2",onClick:n.onAddSalesTask},"\u65b0\u5efa\u4efb\u52a1"))))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.task=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Vt=(Et=function(e){function t(){var e,n,a=this;Object(u.a)(this,t);for(var i=arguments.length,o=new Array(i),h=0;h<i;h++)o[h]=arguments[h];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).taskTypes={},n.cSelectType=void 0,n.cSalesTaskBiz=void 0,Object(B.a)(n,"tasks",Ct,Object(R.a)(n)),Object(B.a)(n,"createproduct",Nt,Object(R.a)(n)),n.searchTaskByKey=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchTask.table({customer:t});case 2:r=e.sent,n.tasks=new Ze(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadTask=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.Task.load(t);case 2:return r=e.sent,e.next=5,n.searchTaskCompletion(t);case 5:return r.fields=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.searchTaskCompletion=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchTaskCompletion.table({taskid:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showTaskHistory=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchHistoryTask.table({taskid:t});case 2:r=e.sent,n.openVPage(We,{tasks:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showMyTasksCompleted=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchHistoryTaskByEmployee.table({});case 2:t=e.sent,n.openVPage(nt,t);case 4:case"end":return e.stop()}}),e)}))),n.showCustomerHistory=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchHistoryTaskByCustomer.table({customerid:t});case 2:r=e.sent,n.openVPage(at,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showTaskDetailEdit=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.biz.obj?t.biz.obj.name:t.biz.name,void 0!==(r=n.getCTaskType(t.biz.obj.name))&&r.showDetailEdit(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showDetailFromId=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.getCTaskType(t.biz.obj.name).showDetailFromId(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showTaskComplet=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.biz.obj?t.biz.obj.name:t.biz.name,n.getCTaskType(r).showComplet(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createAndFinishTask=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createTasks(t);case 2:return r=e.sent,e.next=5,n.showTaskComplet(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showTaskExtension=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(_e,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showTaskInvalid=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(tt,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onInvalidTask=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={taskid:t.id,resulttype:"Inval",result:r},e.next=3,n.uqs.salesTask.CompletionTask.submit(i);case 3:n.tasks.remove(t);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.showPorductSelect=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cApp.cProduct,n.createproduct={task:t,product:void 0,pack:void 0,note:void 0},r.showProductSelect(n.createproduct);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showPorductSelectDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.createproduct=t,n.openVPage(ut,n.createproduct);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createTaskProduct=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.createproduct=t,r=n.createproduct,a=r.product,i=r.task,s=(s=r.note)||void 0,u={taskid:i.id,productid:a.id,note:s},n.uqs.salesTask.CreateTaskProduct.submit(u);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showTaskProductDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchTaskProduct.table({taskid:t.id});case 2:return r=e.sent,e.next=5,n.openVPage(ot,r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showPorductPackSelect=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cApp.cProduct,a={task:t,product:void 0,pack:void 0,note:void 0},r.showProductPackSelect(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showPorductPackSelectDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.createproduct=t,r=new Q(n.cApp),e.next=4,r.load(t.product.id);case 4:a=e.sent,n.openVPage(At,a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createTaskProjectPack=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i,s,u,o,l,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.createproduct=t,r=n.createproduct,a=r.task,i=r.product,s=r.note,u=r.pack,o=i.id,l=a.id,p=[],u.forEach((function(e){p.push(n.uqs.salesTask.CreateTaskProductPack.submit({task:l,product:o,pack:e,note:s}))})),e.next=8,Promise.all(p);case 8:e.sent,n.closePage(2);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showTaskProjectPackDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchTaskProductPack.table({taskid:t.id});case 2:r=e.sent,n.openVPage(It,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCreateProject=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(pt,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createTaskProject=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={taskid:t.id,note:r},e.next=3,n.uqs.salesTask.CreateTaskProject.submit(a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.showTaskProjectDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchTaskProject.table({taskid:t.id});case 2:r=e.sent,n.openVPage(ht,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showSelectTaskType=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={id:null,type:{id:1,name:"qualify",description:"\u4efb\u52a1"},biz:{id:1,name:"nonreagent",description:""},description:null,remindDate:null,deadline:null,customer:t},n.openVPage(Ft,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCreateTaskOfCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={id:null,type:{id:1,name:"qualify",description:"\u4efb\u52a1"},biz:{id:1,name:"nonreagent",description:""},description:null,remindDate:null,deadline:null,customer:t},n.openVPage(qt,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCrateCheck=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(ke,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createTask=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createTasks(r);case 2:return e.next=4,n.searchTaskByKey(0);case 4:return e.next=6,n.cApp.cCustomer.getActiveTasks(r.customer);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.createTasks=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i,s,u,o,l,p,h,d,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.customer,a=t.type,i=t.biz,s=t.description,u=t.priorty,o=t.deadline,l=r.id,p=a.id,h=i.id,d={id:void 0,description:s=s||void 0,customer:l,type:p,biz:h,sourceID:"",sourceType:"",sourceNo:"",priorty:u=u?1:0,deadline:o=o||void 0},e.next=10,n.uqs.salesTask.AddTask.submit(d);case 10:return f=e.sent,t.id=f.id,e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCustomerDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.cApp.cCustomer.showCustomerDetail(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.render=Object(U.a)((function(){return n.isLogined?n.renderView(Y):r.createElement("div",{className:"d-flex h-100 flex-column align-items-center justify-content-center"},r.createElement("div",{className:"flex-fill"}),r.createElement("button",{className:"btn btn-success w-20c",onClick:function(){return d.nav.showLogin(n.loginCallback,!0)}},r.createElement(d.FA,{name:"sign-out",size:"lg"})," \u8bf7\u767b\u5f55"),r.createElement("div",{className:"flex-fill"}),r.createElement("div",{className:"flex-fill"}))})),n.loginCallback=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.nav.pop(),e.next=3,n.internalStart(void 0);case 3:case"end":return e.stop()}}),e)}))),n.tab=function(){return r.createElement(a.render,null)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cSelectType=this.newSub(Xe),this.cSalesTaskBiz=this.newSub(ct),this.taskTypes=xe(this),e.next=5,this.searchTaskByKey(0);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTaskIcon",value:function(e){var t=this.taskTypes[e];return void 0===t?"qualify"==e?r.createElement(d.FA,{name:"address-book",size:"lg",fixWidth:!0}):"legend"==e?r.createElement(d.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}):r.createElement(d.FA,{name:"shopping-bag",size:"lg",fixWidth:!0}):t.icon}},{key:"getCTaskType",value:function(e){return this.taskTypes[e]}},{key:"getCommonType",value:function(e){return this.getCTaskType(e)}},{key:"finishTask",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,r=t.fields,a=t.type,i={taskid:n,resulttype:"compl",result:"\u5b8c\u7ed3",fields:r},"qualify"!=a.obj.name){e.next=7;break}return e.next=5,this.uqs.salesTask.CompletionCustomerInfoTask.submit(i);case 5:e.next=9;break;case 7:return e.next=9,this.uqs.salesTask.CompletionTask.submit(i);case 9:return this.tasks.remove(t),e.next=12,this.cApp.cCustomer.getActiveTasks(t.customer);case 12:this.closePage(2);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extensionTask",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.salesTask.Task.load(t.id);case 2:return(i=e.sent).deadline=a,e.next=6,this.uqs.salesTask.Task.save(t.id,i);case 6:t.deadline=a,this.tasks.postPone(a,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()}]),t}(z),Ct=Object(D.a)(Et.prototype,"tasks",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=Object(D.a)(Et.prototype,"createproduct",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et),Lt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).provinceId=void 0,n.cityId=void 0,n.countyId=void 0,n.backLevel=0,n.page=function(e){return n.backLevel++,r.createElement(d.Page,{header:"\u9009\u62e9\u6240\u5728\u7701\u5e02"},r.createElement("div",{className:"row no-gutters"},e.items.map((function(e){return n.renderPCC(e,n.onProvinceClick)}))))},n.renderPCC=function(e,t){var n=e.id,a=e.chineseName;return r.createElement("div",{key:n,className:"col-6 col-md-4 col-lg-3 cursor-pointer"},r.createElement("div",{className:"pt-1 pb-1 px-2",onClick:function(){return t(e)},style:{border:"1px solid #eeeeee",marginRight:"-1px",marginBottom:"-1px"}},r.createElement("span",{className:"ml-1 align-middle"},r.createElement(d.FA,{name:"chevron-right",className:"text-info small"}),"\xa0 ",a)))},n.onProvinceClick=function(){var e=Object(s.a)(c.a.mark((function e(t){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.provinceId=t.id,e.next=3,n.controller.getProvinceCities(n.provinceId);case 3:if(!(a=e.sent)){e.next=16;break}if(1!==(i=a.length)){e.next=10;break}return e.next=9,n.onCityClick(a[0]);case 9:return e.abrupt("return");case 10:if(!(i>0)){e.next=14;break}return n.backLevel++,n.openPageElement(r.createElement(d.Page,{header:"\u9009\u62e9\u6240\u5728\u57ce\u5e02"},r.createElement("div",{className:"row no-gutters"},a.map((function(e){return n.renderPCC(e,n.onCityClick)}))))),e.abrupt("return");case 14:e.next=18;break;case 16:n.closePage(1),n.saveAddress();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onCityClick=function(){var e=Object(s.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.cityId=t.id,e.next=3,n.controller.getCityCounties(n.cityId);case 3:(a=e.sent)&&a.length>0?(n.backLevel++,n.openPageElement(r.createElement(d.Page,{header:"\u9009\u62e9\u6240\u5728\u533a\u53bf"},r.createElement("div",{className:"row no-gutters"},a.map((function(e){return n.renderPCC(e,n.onCountyClick)})))))):(n.closePage(2),n.saveAddress());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onCountyClick=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.countyId=t.id,n.closePage(n.backLevel),n.saveAddress();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.saveAddress=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.saveAddress(43,n.provinceId,n.cityId,n.countyId);case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.getCountryProvince(43);case 2:n=e.sent,this.openPage(this.page,{items:n});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Mt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).getCountryProvince=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.common.GetCountryProvinces.table({country:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getProvinceCities=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.common.GetProvinceCities.table({province:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getCityCounties=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.common.GetCityCounties.table({city:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.saveAddress=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a,i){var s,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.uqs.common.Address,e.next=3,s.save(void 0,{country:t,province:r,city:a,county:i});case 3:u=e.sent,o=u&&s.boxId(u.id),n.returnCall(o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(Lt);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(z),Bt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).onClickCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.returnCustomer(t);case 2:n.closePage();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=n.controller,a=t.pageCustomer,i=t.showSelectOrganization,u=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=r.createElement("div",{onClick:u,className:"cursor-pointer px-3 py-2"},r.createElement(d.FA,{name:"plus"})),l=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8bf7\u641c\u7d22\u5ba2\u6237\uff01");return r.createElement(d.Page,{header:"\u9009\u62e9\u5ba2\u6237",headerClassName:M.pageHeaderCss,onScrollBottom:n.onScrollBottom,right:o},r.createElement(d.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",onSearch:function(e){return n.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(d.List,{before:"",none:l,items:a,item:{render:n.renderCustomer,onClick:n.onClickCustomer}}))})),n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageCustomer.more();case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderCustomer",value:function(e,t){var n=e.name;return r.createElement(d.LMR,{className:"px-3 py-2 ",left:r.createElement(d.FA,{name:"user",className:" my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold"}),r.createElement("div",null,n))}}]),t}(d.VPage);function Rt(e){return e&&!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e)?"\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function Dt(e){return e&&!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(e)?"Email\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function Ut(e){return e&&e.length>50?"\u59d3\u540d\u6700\u591a50\u4e2a\u5b57\uff01":void 0}var zt,Ht,_t,Wt,$t,Kt,Qt,Gt,Jt,Yt,Xt,Zt,en,tn,nn,rn,an={0:"\u5c0f\u4e8e10\u4e07",1:"10\u4e07-30\u4e07",2:"\u5927\u4e8e30\u4e07"},cn={0:"\u6709\u673a",1:"\u5316\u5b66",2:"\u5206\u6790",3:"\u6750\u6599"},sn={0:"\u5973",1:"\u7537"},un=(St=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"customer",Pt,Object(R.a)(n)),n.isBinded=!1,n.checkBinding=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.checkBinding(n.customer);case 2:t=e.sent,n.isBinded=!!t;case 4:case"end":return e.stop()}}),e)}))),n.renderTask=function(e,t){var a=e.description,i=e.deadline,c=e.result,s=r.createElement("div",null,r.createElement("div",{className:"text-muted small"},r.createElement(d.EasyDate,{date:i})," "),r.createElement("div",{className:"text-muted small"},c?"\u5df2\u5b8c\u7ed3":"\u5f85\u5904\u7406"," "));return r.createElement("div",{className:"d-block py-2 px-3"},r.createElement(d.LMR,{left:r.createElement("strong",null,a),right:s,onClick:function(){return n.controller.cApp.cSalesTask.showTaskDetailEdit(e)}}))},n.renderTitle=function(e,t,n,a,i){var c="iconfont "+t+" text-primary",s="iconfont "+a+" text-primary ml-3";return r.createElement("div",null,r.createElement("div",{className:"px-3 py-2 strong d-flex justify-content-between"},r.createElement("div",null,r.createElement("strong",{className:"text-primary"},e)),r.createElement("div",null,""===t?void 0:r.createElement("span",{className:c,style:{fontSize:"18px"},onClick:n}),""===a?void 0:r.createElement("span",{className:s,style:{fontSize:"18px"},onClick:i}))))},n.page=Object(U.a)((function(e){var t=n.controller.cApp.cSalesTask.showCustomerHistory,a=e.id,i=e.unit,c=e.name,s=e.salutation,u=e.telephone,o=e.gender,l=e.email,p=e.wechat,h=e.teacher,f=e.addressString,m=e.potential,v=e.research,b=e.mobile,y=void 0===o?"":sn[o],g=void 0===m?"[\u65e0]":an[m],k=void 0===v?"[\u65e0]":cn[v],w=b&&r.createElement("div",null,r.createElement("a",{className:"text-default",href:"tel:"+b,style:{textDecorationLine:"none"}},r.createElement(d.FA,{name:"phone",className:"text-success px-1"}),b)),O=[];i&&O.push({type:"component",name:"customer",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u5355\u4f4d"),right:r.createElement("div",{className:"text-right"},Object(d.tv)(i))})}),O.push({type:"component",name:"name",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u59d3\u540d"),right:r.createElement("div",{className:"text-right"},c)})}),s&&O.push({type:"component",name:"salutation",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u79f0\u8c13"),right:r.createElement("div",{className:"text-right"},s)})}),o&&O.push({type:"component",name:"salutation",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u6027\u522b"),right:r.createElement("div",{className:"text-right"},y)})}),b&&O.push({type:"component",name:"mobile",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u624b\u673a\u53f7"),right:w})}),u&&O.push({type:"component",name:"telephone",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u56fa\u8bdd"),right:r.createElement("div",{className:"text-right"},u)})}),l&&O.push({type:"component",name:"email",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"Email"),right:r.createElement("div",{className:"text-right"},l)})}),p&&O.push({type:"component",name:"wechat",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u5fae\u4fe1"),right:r.createElement("div",{className:"text-right"},p)})}),h&&O.push({type:"component",name:"teacher",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u8001\u5e08"),right:r.createElement("div",{className:"text-right"},h)})}),f&&O.push({type:"component",name:"addressString",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u5730\u5740"),right:r.createElement("div",{className:"text-right"},f)})}),m&&O.push({type:"component",name:"potential",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u6f5c\u529b\u503c"),right:r.createElement("div",{className:"text-right"},g)})}),v&&O.push({type:"component",name:"research",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u7814\u7a76\u65b9\u5411"),right:r.createElement("div",{className:"text-right"},k)})}),O.push({type:"component",name:"binding",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-2",left:r.createElement("div",null,r.createElement("small",null),"\u7ed1\u5b9a\u72b6\u6001"),right:n.isBinded?"\u5df2\u7ed1\u5b9a":"\u672a\u7ed1\u5b9a"})});var j=n.controller,x=j.showCustomerEdit,E=j.cApp,C=j.activetasks,N=function(){return x(n.customer)},S=r.createElement("span",null,n.customer.name);return r.createElement(d.Page,{header:S,headerClassName:M.pageHeaderCss},n.renderTitle("\u57fa\u672c\u4fe1\u606f","icon-bianji",N,"",N),r.createElement(d.PropGrid,{rows:O,values:n.customer,alignValue:"right"}),n.renderTitle("\u5f85\u529e\u4e8b\u9879","icon-tianjia",(function(){return E.cSalesTask.showCreateTaskOfCustomer(n.customer)}),"icon-qita",(function(){return t(a)})),r.createElement(d.List,{before:"",none:"\u65e0",items:C,item:{render:n.renderTask}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.customer=t,this.checkBinding(),this.openPage(this.page,t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Pt=Object(D.a)(St.prototype,"customer",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St),on=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderCustomer=function(e,t){e._source="VCustomerList";var a=e.name,i=e.unit,c=e.validity,s=e.webuser,u=r.createElement("div",{className:"cursor-pointer font-weight-bold w-100"},a),o=r.createElement("div",{className:" cursor-pointer text-muted"},r.createElement("small",null," ",Object(d.tv)(i,(function(e){return e.name})))),l=r.createElement("div",{className:" cursor-pointer small"},r.createElement(d.EasyDate,{date:c})),p=s?s.id:47;return r.createElement(d.LMR,{onClick:function(){return n.controller.showCustomerDetail(e)},className:"px-2 py-1",left:r.createElement(d.UserIcon,{className:"mt-1 mx-2 w-3c h-3c",id:p,style:{borderRadius:"8px"}})},r.createElement(d.LMR,{className:"px-1 pt-2",left:u}),r.createElement(d.LMR,{className:"px-1",left:o,right:l}))},n.renderNewCustomer=function(e,t){var a=n.controller.showNewMyCustomerDetil,i=e.customer,c=r.createElement("div",null,Object(d.tv)(i,(function(e){return e.name})));return r.createElement(d.LMR,{className:"pl-2 pr-3 py-1",left:r.createElement(d.UserIcon,{className:"mt-1 mx-2 w-2c h-2c",id:47,style:{borderRadius:"8px"}}),onClick:function(){return a(e)}},r.createElement(d.LMR,{className:"py-2",left:c,right:r.createElement("div",{className:"small text-warning"},"\u65b0\u5ba2\u6237")}))},n.page=Object(U.a)((function(){var e=n.controller,t=e.pageCustomer,a=e.showSelectOrganization,i=e.showCustomerSearch,c=e.newMyCustomerList,s=r.createElement("div",{className:"cursor-pointer py-1"},r.createElement("span",{onClick:function(){return i(null)},className:"iconfont icon-icon-chaxun mx-2",style:{fontSize:"20px",color:"#ffffff"}}),r.createElement("span",{onClick:function(){return a(1)},className:"iconfont icon-tianjia mx-3",style:{fontSize:"20px",color:"#ffffff"}})),u=r.createElement("div",{className:"my-3 mx-2 text-warning"});return r.createElement(d.Page,{header:"\u5ba2\u6237",onScrollBottom:n.onScrollBottom,headerClassName:M.pageHeaderCss,right:s},c&&c.length>0&&r.createElement(d.List,{className:"py-2",before:"",none:u,items:c,item:{render:n.renderNewCustomer}}),t&&t.items&&t.items.length>0&&r.createElement(d.List,{before:"",none:u,items:t,item:{render:n.renderCustomer}}))})),n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageCustomer.more();case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return r.createElement(this.page,null)}}]),t}(d.VPage),ln=[{name:"name",type:"string",required:!0},{name:"salutation",type:"string",required:!1},{name:"mobile",type:"string",required:!1},{name:"telephone",type:"string",required:!1},{name:"gender",type:"number",required:!1},{name:"submit",type:"submit"}],pn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).customerunit=void 0,n.uiSchema={items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",rules:Ut},salutation:{widget:"text",label:"\u79f0\u8c13",placeholder:"\u8bf7\u8f93\u5165\u79f0\u8c13"},mobile:{widget:"text",label:"\u624b\u673a\u53f7",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",rules:Rt},telephone:{widget:"text",label:"\u56fa\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u56fa\u8bdd\u53f7"},gender:{widget:"radio",label:"\u6027\u522b",placeholder:"\u6027\u522b",defaultValue:1,list:Object(d.toUiSelectItems)(["1:\u7537","0:\u5973"]),radioClassName:"w-min-6c d-inline-block"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary w-8c"}}},n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.createMyCustomer(r.data,n.customerunit);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){return r.createElement(d.Page,{header:"\u65b0\u5efa\u5ba2\u6237",headerClassName:M.pageHeaderCss},r.createElement(d.LMR,{className:"cursor-pointer pm-3 py-2 bg-white",left:r.createElement("div",{className:"pl-3"},r.createElement(d.FA,{name:"university",className:"text-info mr-2 pt-1"}))},Object(d.tv)(n.customerunit,(function(e){return e.name}))),r.createElement(d.Form,{className:"my-3 mx-3",schema:ln,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick,requiredFlag:!0}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.customerunit=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),hn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).result=void 0,n.comeBack=function(){n.controller.searchByKey(""),n.controller.searchNewMyCustomer(),n.closePage(3)},n.page=Object(U.a)((function(){var e;return 1===n.result&&(e=r.createElement("span",{className:"px-4 py-4"}," \u6839\u636e\u65b0\u5efa\u5ba2\u6237\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\uff0c\u7cfb\u7edf\u8ba4\u4e3a\u8be5\u5ba2\u6237\u53ef\u80fd\u5df2\u4e0e\u5176\u4ed6\u9500\u552e\u7ed1\u5b9a\uff0c\u8bf7\u914c\u60c5\u5f00\u53d1\u3002")),r.createElement(d.Page,{header:"\u65b0\u5efa\u5ba2\u6237",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"p-5 text-center"},r.createElement("i",{className:"iconfont icon-ok",style:{margin:"50px",fontSize:"100px",color:"#2aa515"}})),r.createElement("div",{className:"p-5 text-center"},"\u6dfb\u52a0\u6210\u529f\uff0c\u8bf7\u5728\u5ba2\u6237\u641c\u7d22\u9875\u9762\u67e5\u770b\u8be6\u60c5\uff01"),r.createElement("div",{className:"w-100 text-muted my-4 px-4"},e),r.createElement("div",{className:"w-100 text-center"},r.createElement("label",{className:"text-success",onClick:n.comeBack}," \u8fd4\u56de")))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.result=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),dn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderCustomer=function(e,t){var a=n.controller.showCustomerDetail,i=e.name,c=e.unit,s=e.validity,u=e.webuser,o=r.createElement("div",{className:"cursor-pointer font-weight-bold w-100"},i),l=r.createElement("div",{className:" cursor-pointer text-muted"},r.createElement("small",null," ",Object(d.tv)(c,(function(e){return e.name})))),p=r.createElement("div",{className:" cursor-pointer small"},r.createElement(d.EasyDate,{date:s})),h=u?u.id:47;return r.createElement(d.LMR,{onClick:function(){return a(e)},className:"px-2 py-1",left:r.createElement(d.UserIcon,{className:"mt-1 mx-2 w-3c h-3c",id:h,style:{borderRadius:"8px"}})},r.createElement(d.LMR,{className:"px-1 pt-2",left:o}),r.createElement(d.LMR,{className:"px-1",left:l,right:p}))},n.page=Object(U.a)((function(e){var t=n.controller,a=t.pageCustomerSearch,i=t.showSelectOrganization,c=t.showCustomerDetail,s=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8fd8\u6ca1\u6709\u8fd9\u4e2a\u5ba2\u6237\uff0c\u662f\u5426",r.createElement("span",{className:"text-primary",onClick:function(){return i(1)}},"\u521b\u5efa\u5ba2\u6237\uff01"));return r.createElement(d.Page,{header:"\u641c\u7d22\u5ba2\u6237",onScrollBottom:n.onScrollBottom,headerClassName:M.pageHeaderCss},r.createElement(d.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",onSearch:function(e){return n.controller.searchCustomerByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(d.List,{before:"",none:s,items:a,item:{render:n.renderCustomer,onClick:function(){return function(){return c(e)}}}}))})),n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageCustomerSearch.more();case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return r.createElement(this.page,null)}}]),t}(d.VPage),fn=[{name:"name",type:"string",required:!0},{name:"salutation",type:"string"},{name:"gender",type:"number"},{name:"mobile",type:"number"},{name:"telephone",type:"number"},{name:"email",type:"string"},{name:"wechat",type:"string"},{name:"potential",type:"string"},{name:"research",type:"string"},{name:"addressString",type:"string"}],mn={items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",rules:Ut},salutation:{widget:"text",label:"\u79f0\u8c13",placeholder:"\u8bf7\u8f93\u5165\u79f0\u8c13"},gender:{widget:"radio",label:"\u6027\u522b",list:[{value:"1",title:"\u7537"},{value:"0",title:"\u5973"}]},mobile:{widget:"text",label:"\u624b\u673a\u53f7",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",rules:Rt},telephone:{widget:"text",label:"\u56fa\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u56fa\u8bdd"},birthDay:{widget:"datetime",label:"\u751f\u65e5",placeholder:"\u8bf7\u8f93\u5165\u751f\u65e5"},email:{widget:"text",label:"Email",placeholder:"\u8bf7\u8f93\u5165Email",rules:Dt},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08\u59d3\u540d"},addressString:{widget:"text",label:"\u5730\u5740",placeholder:"\u8bf7\u8f93\u5730\u5740"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:2,title:"\u5206\u6790"},{value:3,title:"\u6750\u6599"}]}}},vn=(zt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"customer",Ht,Object(R.a)(n)),Object(B.a)(n,"isBinded",_t,Object(R.a)(n)),Object(B.a)(n,"bindTip",Wt,Object(R.a)(n)),n.onItemChanged=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,n.customer[i]=r,e.next=4,n.controller.updateMyCustomer(n.customer);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=r.createElement("span",null,n.customer.name);return r.createElement(d.Page,{header:t,headerClassName:M.pageHeaderCss},r.createElement(d.Edit,{schema:fn,uiSchema:mn,data:n.customer,onItemChanged:n.onItemChanged}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.customer=t,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Ht=Object(D.a)(zt.prototype,"customer",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=Object(D.a)(zt.prototype,"isBinded",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Wt=Object(D.a)(zt.prototype,"bindTip",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zt),bn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).temp=void 0,n.renderCustomer=function(e,t){var a=e.name,i=e.unit,c=e.validity,s=e.webuser,u=n.controller.showCustomerDetail,o=r.createElement("div",{className:"cursor-pointer font-weight-bold w-100"},a),l=r.createElement("div",{className:" cursor-pointer text-muted"},r.createElement("small",null," ",Object(d.tv)(i,(function(e){return e.name})))),p=r.createElement("div",{className:" cursor-pointer small"},r.createElement(d.EasyDate,{date:c})),h=s?s.id:47;return r.createElement(d.LMR,{onClick:function(){return u(e)},className:"px-2 py-1",left:r.createElement(d.UserIcon,{className:"mt-1 mx-2 w-3c h-3c",id:h,style:{borderRadius:"8px"}})},r.createElement(d.LMR,{className:"px-1 pt-2",left:o}),r.createElement(d.LMR,{className:"px-1",left:l,right:p}))},n.page=Object(U.a)((function(){var e=n.controller.pageMyCustomerActive,t=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u3010\u65e0\u3011"),a=r.createElement(r.Fragment,null,"\u5ba2\u6237");return 2===n.temp&&(a=r.createElement(r.Fragment,null,"\u6d3b\u8dc3\u5ba2\u6237")),r.createElement(d.Page,{header:a,headerClassName:M.pageHeaderCss,onScrollBottom:n.onScrollBottom},r.createElement(d.List,{before:"",none:t,items:e,item:{render:n.renderCustomer}}))})),n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageMyCustomerActive.more();case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.temp=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),yn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).model=void 0,n.onRelationCustomer=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.controller.onRelationCustomer,e.next=3,t(n.model);case 3:n.closePage(1);case 4:case"end":return e.stop()}}),e)}))),n.onshowCreateNewCustomer=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.controller.showCreateNewCustomer,e.next=3,t(n.model);case 3:case"end":return e.stop()}}),e)}))),n.page=Object(U.a)((function(){var e=n.model.webuser.obj.name,t=r.createElement("div",{className:"d-flex px-1"},r.createElement("div",{className:"flex-grow-1 align-self-center justify-content-end"},r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:n.onRelationCustomer},"\u5173\u8054\u5ba2\u6237"),r.createElement("button",{type:"button",className:"btn btn-primary ml-2 align-self-center",onClick:n.onshowCreateNewCustomer},"\u65b0\u5efa\u5ba2\u6237")));return r.createElement(d.Page,{header:"\u65b0\u5ba2\u6237",headerClassName:M.pageHeaderCss,footer:t},r.createElement(d.LMR,{className:"cursor-pointer w-100 py-3 px-3",left:"\u8d26\u6237",right:e}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.model=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),gn=[{name:"name",type:"string",required:!0},{name:"salutation",type:"string",required:!1},{name:"mobile",type:"string",required:!1},{name:"telephone",type:"string",required:!1},{name:"gender",type:"number",required:!1},{name:"submit",type:"submit"}],kn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).customerunit=void 0,n.newcustomer=void 0,n.uiSchema={items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",rules:Ut},salutation:{widget:"text",label:"\u79f0\u8c13",placeholder:"\u8bf7\u8f93\u5165\u79f0\u8c13"},mobile:{widget:"text",label:"\u624b\u673a\u53f7",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",rules:Rt},telephone:{widget:"text",label:"\u56fa\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u56fa\u8bdd\u53f7"},gender:{widget:"radio",label:"\u6027\u522b",placeholder:"\u6027\u522b",defaultValue:1,list:Object(d.toUiSelectItems)(["1:\u7537","0:\u5973"]),radioClassName:"w-min-6c d-inline-block"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary w-8c"}}},n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.createNewCustomer(r.data,n.customerunit,n.newcustomer);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){return r.createElement(d.Page,{header:"\u65b0\u5efa\u5ba2\u6237",headerClassName:M.pageHeaderCss},r.createElement(d.LMR,{className:"cursor-pointer pm-3 py-2 bg-white",left:r.createElement("div",{className:"pl-3"},r.createElement(d.FA,{name:"university",className:"text-info mr-2 pt-1"}))},Object(d.tv)(n.customerunit,(function(e){return e.name}))),r.createElement(d.Form,{className:"my-3 mx-3",schema:gn,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick,requiredFlag:!0}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.unit,r=t.customer,this.customerunit=n,this.newcustomer=r,this.openPage(this.page);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),wn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchCustomerQuery=void 0,n.firstSize=n.pageSize=11,n.searchCustomerQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchCustomerQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.PageItems),On=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchCustomerQuery=void 0,n.firstSize=n.pageSize=11,n.searchCustomerQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchCustomerQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.PageItems),jn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchCustomerQuery=void 0,n.firstSize=n.pageSize=11,n.searchCustomerQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchCustomerQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.PageItems),xn=($t=function(e){function t(){var e,n,a=this;Object(u.a)(this,t);for(var i=arguments.length,o=new Array(i),h=0;h<i;h++)o[h]=arguments[h];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o))),Object(B.a)(n,"pageCustomer",Kt,Object(R.a)(n)),Object(B.a)(n,"pageCustomerSearch",Qt,Object(R.a)(n)),Object(B.a)(n,"pageMyCustomerActive",Gt,Object(R.a)(n)),Object(B.a)(n,"newMyCustomerList",Jt,Object(R.a)(n)),Object(B.a)(n,"activetasks",Yt,Object(R.a)(n)),n.task=void 0,n.searchByKey=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.pageCustomer=new wn(n.uqs.salesTask.searchMyCustomer),n.pageCustomer.first({key:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.searchCustomerByKey=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.pageCustomerSearch=new On(n.uqs.salesTask.searchMyCustomer),n.pageCustomerSearch.first({key:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.searchCustomerActiveByKey=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.pageMyCustomerActive=new jn(n.uqs.salesTask.searchMyCustomerActive),n.pageMyCustomerActive.first({key:t,type:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.searchNewMyCustomer=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.searchNewMyCustomer.query({});case 2:(t=e.sent).ret.length>0&&(n.newMyCustomerList=t.ret),1;case 5:case"end":return e.stop()}}),e)}))),n.showNewMyCustomerDetil=function(e){n.openVPage(yn,e)},n.onRelationCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.cCustomer.call();case 2:return r=e.sent,a=t.customer,i=t.webuser,e.next=6,n.uqs.salesTask.UpateCustomerMyCustomerMap.submit({mycustomer:r,customer:a,webuser:i});case 6:return e.next=8,n.searchByKey("");case 8:return e.next=10,n.searchNewMyCustomer();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCustomerDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.uqs.salesTask.MyCustomer.load(r);case 3:return a=e.sent,e.next=6,n.getActiveTasks(t);case 6:n.openVPage(un,a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getActiveTasks=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,n.uqs.salesTask.SearchHistoryTaskByCustomer.table({customerid:r,types:1});case 3:n.activetasks=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showSelectCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.searchByKey(""),n.task=t,n.openVPage(Bt);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCustomerEdit=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(vn,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCustomerSearch=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t?n.pageCustomerSearch=null:n.searchCustomerByKey(t),n.openVPage(dn);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showMyCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t?n.pageMyCustomerActive=null:n.searchCustomerActiveByKey(t,r),n.openVPage(bn,r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.selectCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.task.customer=t,n.cApp.cSalesTask.showCrateCheck(n.task);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.returnCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.returnCall(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showSelectOrganization=function(e){n.cApp.cCustomerUnit.start(e)},n.showCreateCustomer=function(e){n.openVPage(pn,e)},n.createMyCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={unit:r.id,no:void 0,name:t.name,firstName:"",lastName:"",gender:t.gender?1:t.gender,salutation:t.salutation,telephone:t.telephone,mobile:t.mobile,newcustomerid:0},e.next=3,n.uqs.salesTask.CreateMyCustomer.submit(a);case 3:i=e.sent,s=i.code,n.openVPage(hn,s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.cancelCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.closePage(2),t.isValid=0,e.next=4,n.uqs.salesTask.MyCustomer.save(t.id,t);case 4:return e.next=6,n.searchByKey("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCreateNewCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.cCustomerUnit.call(2);case 2:r=e.sent,a={unit:r,customer:t.customer},n.openVPage(kn,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createNewCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={unit:r.id,no:void 0,name:t.name,firstName:"",lastName:"",gender:t.gender?1:t.gender,salutation:t.salutation,telephone:t.telephone,mobile:t.mobile,newcustomerid:a},e.next=3,n.uqs.salesTask.CreateMyCustomer.submit(i);case 3:s=e.sent,u=s.code,n.openVPage(hn,u);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.updateMyCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.MyCustomer.save(t.id,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.checkBinding=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i,s,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.customer.getCustomerByKey.query({key:t.mobile});case 2:r=e.sent,a=0,i=r.ret,s=0;case 6:if(!(s<i.length)){e.next=16;break}return u=i[s].customer,e.next=10,n.uqs.salesTask.MyCustomerIsOccupy.query(u.id);case 10:o=e.sent,1===o.ret[0].code&&a++;case 13:s++,e.next=6;break;case 16:return e.abrupt("return",!(0===a));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.pickAddress=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.newC(Mt),e.next=3,i.call();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.render=Object(U.a)((function(){return n.renderView(on)})),n.tab=function(){return n.searchByKey(""),n.searchNewMyCustomer(),r.createElement(a.render,null)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.pageCustomer=null,this.task=t,this.searchByKey(""),this.searchNewMyCustomer(),this.openVPage(Bt);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(z),Kt=Object(D.a)($t.prototype,"pageCustomer",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=Object(D.a)($t.prototype,"pageCustomerSearch",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gt=Object(D.a)($t.prototype,"pageMyCustomerActive",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt=Object(D.a)($t.prototype,"newMyCustomerList",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yt=Object(D.a)($t.prototype,"activetasks",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t),En=n(40),Cn=n.n(En),Nn=(Xt=function(e){function t(){var e,n,a=this;Object(u.a)(this,t);for(var i=arguments.length,o=new Array(i),h=0;h<i;h++)o[h]=arguments[h];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).inviteCode=void 0,Object(B.a)(n,"showTips",Zt,Object(R.a)(n)),n.copyClick=function(e){Cn()(e.target.parentNode.childNodes[0].data),n.showTips="",setTimeout((function(){n.showTips="none"}),F.TIPDISPLAYTIME)},n.teamSpan=Object(U.a)((function(){var e=n.controller,t=e.showTeam,a=e.showMyCustomer,i=e.cApp.cBalance.salesAmont,u=i.teamCount,o=i.customerCount,l=i.activeCustomerCount,p=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(2);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return M.sales.isInner?r.createElement("div",{className:"row mt-2"},r.createElement("div",{className:"col text-center",onClick:p},r.createElement("div",null,o),r.createElement("small",null,r.createElement("small",null,"\u5ba2\u6237"))),r.createElement("div",{className:"col text-center",onClick:h},r.createElement("div",null,l),r.createElement("small",null,r.createElement("small",null,"\u6d3b\u8dc3\u5ba2\u6237")))):r.createElement("div",{className:"row mt-2"},r.createElement("div",{className:"col text-center",onClick:t},r.createElement("div",null,u),r.createElement("small",null,r.createElement("small",null,"\u56e2\u961f"))),r.createElement("div",{className:"col text-center",onClick:p},r.createElement("div",null,o),r.createElement("small",null,r.createElement("small",null,"\u5ba2\u6237"))),r.createElement("div",{className:"col text-center",onClick:h},r.createElement("div",null,l),r.createElement("small",null,r.createElement("small",null,"\u6d3b\u8dc3\u5ba2\u6237"))))})),n.meInfo=Object(U.a)((function(){var e=n.controller,t=e.user,i=e.showMeDetail,u=e.showMessage,o=e.showInvitationCode;if(void 0===t)return null;var l,p,h=t.name,f=t.nick,m=t.icon,v=n.controller.cApp.cMessage.count.get(),b=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(n.inviteCode);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();v>0&&(l="cursor-pointer",p=v<100?r.createElement("u",null,v):r.createElement("u",null,"99+"));r.createElement("div",{className:J()("jk-cart ml-1 mr-2",l),onClick:u},r.createElement(d.FA,{className:"fa-lg",name:"commenting-o"}),p);return r.createElement("div",{className:"px-4 py-3 cursor-pointer",style:{backgroundColor:"#f9f9f9",width:"90%",borderRadius:"8px",margin:"-4rem auto 2rem auto",boxShadow:"2px 2px 15px #333333"}},r.createElement(d.LMR,{left:r.createElement("div",{onClick:i}," ",r.createElement(d.Image,{className:"w-3c h-3c mr-3",src:m})," "),right:M.sales.isInner?r.createElement("span",null):r.createElement("span",{onClick:b},r.createElement(d.FA,{className:"h2",name:"qrcode"}))},r.createElement("div",null,r.createElement("div",{onClick:i},n.userSpan(h,f)),M.sales.isInner?r.createElement(r.Fragment,null):r.createElement("div",{className:"small"},r.createElement("span",{className:"px-1"},"\u9080\u8bf7\u7801  :"),r.createElement("span",null,n.inviteCode,r.createElement("span",{style:{border:"1px solid #999999"},className:"px-1 mx-1",onClick:n.copyClick},r.createElement(d.FA,{name:"clone",className:"mr-1"}),"\u590d\u5236"))))),r.createElement(a.teamSpan,null))})),n.achievement=Object(U.a)((function(){var e=n.controller.cApp.cBalance.salesAmont;return M.sales.achievement(e)})),n.onItemChanged=function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.name,alert("name=".concat(a," value=").concat(n));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){return r.createElement("div",null,r.createElement("div",{className:"bg-white"},r.createElement(a.achievement,null),r.createElement(a.meInfo,null),n.myService()),r.createElement("div",{className:"text-center text-white small px-2",style:{width:"30%",margin:"-100px auto 0 auto",padding:"4px",borderRadius:"3px",backgroundColor:"#505050",display:n.showTips}},"\u5df2\u590d\u5236\u5230\u526a\u5207\u677f"))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(e){var t=this.controller.inviteCode;return this.inviteCode=t.substr(1,9),this.controller.cApp.cBalance.getComputeAchievement(),r.createElement(this.page,null)}},{key:"userSpan",value:function(e,t){return t?r.createElement(r.Fragment,null,r.createElement("b",null,t," \xa0 ",r.createElement("small",{className:"muted"},e))):r.createElement("b",null,e)}},{key:"myService",value:function(){var e=this,t=this.controller.cApp.cSalesTask.showMyTasksCompleted,n=this.controller.showSet,a=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i={paramtype:"coupon",product:void 0},u=function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.cApp.cCoupon.showCreateCoupon(i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement("div",{className:"text-left h6 mx-4"}," ",r.createElement("strong",null,"\u6211\u7684\u670d\u52a1")),r.createElement("div",{className:"row p-2 cursor-pointer"},r.createElement("div",{className:"col text-center",onClick:u},r.createElement("div",null,r.createElement("i",{className:"iconfont icon-youhuiquantuangou",style:{fontSize:"25px",color:"#f6ad15"}})),r.createElement("small",null,r.createElement("small",null,M.sales.couponHeader))),r.createElement("div",{className:"col text-center",onClick:a},r.createElement("div",null,r.createElement("i",{className:"iconfont icon-renwuwancheng",style:{fontSize:"25px",color:"#2aa515"}})),r.createElement("small",null,r.createElement("small",null,"\u5386\u53f2\u4efb\u52a1"))),r.createElement("div",{className:"col text-center",onClick:n},r.createElement("div",null,r.createElement("i",{className:"iconfont icon-shezhi2",style:{fontSize:"25px",color:"#0e6ff7"}})),r.createElement("small",null,r.createElement("small",null,"\u8bbe\u7f6e")))))}}]),t}(d.VPage),Zt=Object(D.a)(Xt.prototype,"showTips",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),Xt),Sn=(en=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).schema=[{name:"icon",type:"image"},{name:"nick",type:"string"}],n.uiSchema={items:{icon:{widget:"image",label:"\u5934\u50cf"},nick:{widget:"text",label:"\u6635\u79f0",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"}}},Object(B.a)(n,"data",tn,Object(R.a)(n)),n.onItemChanged=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,e.next=3,d.userApi.userSetProp(i,r);case 3:n.data[i]=r,d.nav.user.name=r,d.nav.saveLocalUser();case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.page=function(){var e=n.controller,t=e.inviteCode,a=e.showInvitationCode,i=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=r.createElement("div",{onClick:i},r.createElement(d.FA,{className:"fa-lg",name:"qrcode"}));return r.createElement(d.Page,{header:"\u4e2a\u4eba\u4fe1\u606f",headerClassName:M.pageHeaderCss},r.createElement(d.Edit,{schema:n.schema,uiSchema:n.uiSchema,data:n.data,onItemChanged:n.onItemChanged}),r.createElement(d.LMR,{className:"d-flex px-3 py-2 bg-white align-items-center cursor-pointer",right:u},"\u9080\u8bf7\u7801"))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.nav.user,r=n.nick,a=n.icon,this.data={nick:r,icon:a},this.openPage(this.page);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),tn=Object(D.a)(en.prototype,"data",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),en),Pn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).logout=function(){d.nav.showLogout()},n.changePassword=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.nav.changePassword();case 2:case"end":return e.stop()}}),e)}))),n.page=function(){var e=["",{type:"component",component:r.createElement("div",{className:"py-2"},r.createElement("i",{className:"iconfont icon-zhanghuxinxi mr-2",style:{fontSize:"20px",color:"#2aa515"}}),"\u8d26\u6237\u4fe1\u606f"),onClick:n.controller.showAccount},"",{type:"component",component:r.createElement("div",{className:"py-2"},r.createElement("i",{className:"iconfont icon-mima mr-2",style:{fontSize:"20px",color:"#2aa515"}}),r.createElement("span",{className:"pb-4 mb-4"},"\u5bc6\u7801")),onClick:n.changePassword},"",{type:"component",component:r.createElement("div",{className:"w-100 d-flex py-2 justify-content-between"},r.createElement("div",null,r.createElement("i",{className:"iconfont icon-guanyu mr-2",style:{fontSize:"20px",color:"#2aa515"}}),"\u5173\u4e8e\u672cAPP"),r.createElement("div",{className:"py-2 small"},"V",V.version))},""],t=r.createElement("button",{type:"button",className:"btn btn-danger flex-grow-1 mx-3 my-1 w-100",onClick:n.logout},r.createElement(d.FA,{name:"sign-out",size:"lg"})," \u9000\u51fa");return r.createElement(d.Page,{header:"\u8bbe\u7f6e",headerClassName:M.pageHeaderCss,footer:t},r.createElement(d.PropGrid,{rows:e,values:{}}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Tn=n(56),An=n.n(Tn),In=n(84),Fn=n.n(In);function qn(e){return Vn.apply(this,arguments)}function Vn(){return(Vn=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fn()(t,{scale:2,logging:!1,useCORS:!0});case 2:return n=e.sent,(r=new Image).src=n.toDataURL("image/png"),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ln,Mn,Bn,Rn,Dn,Un,zn,Hn,_n,Wn,$n,Kn,Qn,Gn,Jn,Yn,Xn,Zn,er,tr,nr,rr,ar,ir,cr,sr,ur,or,lr,pr,hr,dr,fr,mr,vr,br,yr,gr=(nn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"showTips",rn,Object(R.a)(n)),n.copyClick=function(e){Cn()(e.target.parentNode.childNodes[0].innerHTML),n.showTips="",setTimeout((function(){n.showTips="none"}),F.TIPDISPLAYTIME)},n.saveImage=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("qrid"),e.next=3,qn(t);case 3:case"end":return e.stop()}}),e)}))),n.share=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.controller.user,a=r.name,i=r.nick,s=(i||a)+" \u9080\u8bf7\u60a8\u52a0\u5165"+M.sales.appName+"\uff01",navigator.userAgent.indexOf("Html5Plus")>-1&&window.plusShare({title:"\u9080\u8bf7\u7801",content:s,href:t,thumbs:[M.sales.sharelogo]},(function(e){}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=M.url+"?type=invitation&code="+e.code,a=r.createElement("div",{className:"text-center",style:{width:"auto",height:"10%"}});navigator.userAgent.indexOf("Html5Plus")>-1&&(a=r.createElement("div",{className:"text-center",style:{width:"auto",height:"10%"}},r.createElement("button",{type:"button",id:"share",className:"btn text-info mx-3 my-1",onClick:function(){return n.share(t)}},"\u5206\u4eab")));var i=String(e.code),c=i.substr(0,4),s=i.substr(4);return i=c+" "+s,r.createElement(d.Page,{header:"\u9080\u8bf7\u7801",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"text-center bg-white",style:{height:"100%"}},r.createElement("div",{id:"qrid",className:"text-center",style:{width:"auto",height:"85%"}},r.createElement(d.Image,{src:M.sales.logo,className:"mt-4",style:{width:"auto",height:"40%",margin:"2rem auto, 0 auto"}}),r.createElement("div",null,r.createElement(An.a,{style:{margin:"2rem 0 0 0"},value:t,size:100,fgColor:"#000000"})),r.createElement("div",{className:"mt-4"},r.createElement("span",{className:"w-100 text-center h3 m-3 text-info"},i," "))),r.createElement("div",{className:"w-100 text-center"},r.createElement("span",{className:"text-info cursor-info mx-2",onClick:n.copyClick},"\u590d\u5236"),a,r.createElement("div",{className:"text-center text-white small px-2",style:{width:"30%",margin:"-80px auto 0 auto",padding:"4px",borderRadius:"3px",backgroundColor:"#505050",display:n.showTips}},"\u5df2\u590d\u5236\u5230\u526a\u5207\u677f"))))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{code:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),rn=Object(D.a)(nn.prototype,"showTips",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),nn),kr=(Ln=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).schema=[{name:"telephone",type:"string"},{name:"identityname",type:"string"},{name:"identitycard",type:"string"},{name:"subbranchbank",type:"string"},{name:"bankaccountnumber",type:"string"},{name:"identityicon",type:"image"}],n.uiSchema={items:{identityname:{widget:"text",label:"\u59d3\u540d",placeholder:""},identityicon:{widget:"image",label:"\u8bc1\u4ef6\u7167"},subbranchbank:{widget:"text",label:"\u5f00\u6237\u884c",placeholder:""},bankaccountnumber:{widget:"text",label:"\u94f6\u884c\u8d26\u53f7",placeholder:""},telephone:{widget:"text",label:"\u624b\u673a",placeholder:""},identitycard:{widget:"text",label:"\u8eab\u4efd\u8bc1\u53f7",placeholder:""}}},Object(B.a)(n,"showTipss",Mn,Object(R.a)(n)),Object(B.a)(n,"data",Bn,Object(R.a)(n)),n.onItemChanged=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,n.data[i]=r,e.next=4,n.controller.saveAccount(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.affirm=function(){var e=n.data,t=e.telephone,r=e.identityname,a=e.identitycard,i=e.identityicon,c=e.subbranchbank,s=e.bankaccountnumber;t&&r&&a&&i&&c&&s?n.closePage():(n.showTipss="",setTimeout((function(){n.showTipss="none"}),F.TIPDISPLAYTIME))},n.page=Object(U.a)((function(){var e=r.createElement("div",{className:"d-block"},r.createElement("div",{className:"w-100 justify-content-end"},r.createElement("button",{type:"button",className:"btn btn-primary mx-3",style:{padding:"6px 40px 6px 40px"},onClick:n.affirm},"\u786e\u5b9a")));return r.createElement(d.Page,{header:"\u8d26\u6237",headerClassName:M.pageHeaderCss,footer:e},r.createElement("div",{className:"small mx-3 my-2"},r.createElement("span",{className:"pr-2 text-danger "},"\u203b")," \u9996\u6b21\u5f00\u5c55\u4e1a\u52a1\u524d\u9700\u8981\u7ed1\u5b9a\u94f6\u884c\u8d26\u53f7\u548c\u8eab\u4efd",r.createElement(d.FA,{className:"px-2 text-danger ",name:"exclamation-circle"})),r.createElement(d.Edit,{schema:n.schema,uiSchema:n.uiSchema,data:n.data,onItemChanged:n.onItemChanged}),r.createElement("div",{className:"text-center text-white small px-2",style:{width:"40%",margin:"10px auto 0 auto",padding:"4px",borderRadius:"3px",backgroundColor:"#505050",display:n.showTipss}},"\u4fe1\u606f\u8fd8\u6ca1\u6709\u8865\u5145\u5b8c\u6574"))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.data=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Mn=Object(D.a)(Ln.prototype,"showTipss",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),Bn=Object(D.a)(Ln.prototype,"data",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln),wr=function(e){function t(){var e,n,a=this;Object(u.a)(this,t);for(var i=arguments.length,o=new Array(i),h=0;h<i;h++)o[h]=arguments[h];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).inviteCode=void 0,n.position=void 0,n.load=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.nav.loadMe();case 2:return e.next=4,n.uqs.salesTask.SearchPosition.table({position:void 0});case 4:n.position=e.sent,n.position.length>0?(t=String(n.position[0].code+1e8),n.inviteCode=t):n.inviteCode="100000000";case 6:case"end":return e.stop()}}),e)}))),n.showMeDetail=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(Sn);case 1:case"end":return e.stop()}}),e)}))),n.searchPosition=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchPosition.table({});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),n.showTeam=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.cBalance.getComputeAchievement();case 2:return t=n.cApp.cTeam,e.next=5,t.start();case 5:case"end":return e.stop()}}),e)}))),n.showMyCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.cBalance.getComputeAchievement();case 2:return r=n.cApp.cCustomer.showMyCustomer,e.next=5,r("",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showMessage=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.cMessage.start();case 2:case"end":return e.stop()}}),e)}))),n.showSet=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(Pn);case 1:case"end":return e.stop()}}),e)}))),n.showInvitationCode=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(gr,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showAccount=Object(s.a)(c.a.mark((function e(){var t,r,a,i,s,u,o,l,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={telephone:"",identityname:"",identitycard:"",identityicon:"",subbranchbank:"",bankaccountnumber:""},e.next=3,n.uqs.salesTask.WebUserAccountMap.query({webuser:n.user.id});case 3:(r=e.sent).ret.length>0&&(a=r.ret[0],i=a.telephone,s=a.identityname,u=a.identitycard,o=a.identityicon,l=a.subbranchbank,p=a.bankaccountnumber,t.telephone=void 0===i?"":i,t.identityname=void 0===s?"":s,t.identitycard=void 0===u?"":u,t.identityicon=void 0===o?"":o,t.subbranchbank=void 0===l?"":l,t.bankaccountnumber=void 0===p?"":p),n.openVPage(kr,t);case 6:case"end":return e.stop()}}),e)}))),n.saveAccount=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={webuser:n.user.id,telephone:t.telephone,identityname:t.identityname,identitycard:t.identitycard,identityicon:t.identityicon,subbranchbank:t.subbranchbank,bankaccountnumber:t.bankaccountnumber},e.next=3,n.uqs.salesTask.AddWebUserAccountMap.submit(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.render=function(){return n.renderView(Nn)},n.tab=function(){return r.createElement(a.render,null)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:d.nav.clear(),this.openVPage(Nn,t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(z),Or=[{name:"invitacode",type:"number",required:!0},{name:"submit",type:"submit"}],jr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).form=void 0,n.uiSchema={items:{invitacode:{widget:"text",label:" ",placeholder:"\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary w-8c"}}},n.onCreatePosition=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.form){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.form.buttonClick("submit");case 4:case"end":return e.stop()}}),e)}))),n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.createPosition(r.form.data);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.onEnter=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("invitacode"!==t){e.next=3;break}return e.next=3,n.onCreatePosition();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){return r.createElement(d.Page,{header:M.sales.appName,headerClassName:M.pageHeaderCss,logout:!0},r.createElement("div",{className:"text-center  bg-white",style:{width:"auto",height:"100%",padding:"1rem 0 0 0"}},r.createElement("div",{className:"pt-4"},r.createElement("div",{className:"h4 text-info"},"\u6b22\u8fce\u52a0\u5165",M.sales.appName,"}"),r.createElement("div",{className:"text-muted"},"\u8d85\u8d8a\u81ea\u6211\uff0c\u5b9e\u73b0\u5171\u8d62")),r.createElement(d.Image,{src:M.sales.logo,className:"mt-4",style:{width:"auto",height:"30%",margin:"0 auto 0 auto"}}),r.createElement("div",{style:{height:"auto",margin:"auto 5rem auto 5rem"}},r.createElement(d.Form,{ref:function(e){return n.form=e},className:"m-3",schema:Or,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick,requiredFlag:!1,onEnter:n.onEnter}))))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return r.createElement(this.page,null)}}]),t}(d.VPage),xr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).page=function(e){return r.createElement(d.Page,{header:"\u6ce8\u518c\u6210\u529f",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"p-5 text-center"},r.createElement("i",{className:"iconfont icon-ok",style:{margin:"50px",fontSize:"100px",color:"#2aa515"}}),r.createElement("p",{className:"text-primary mb-5"},"\u6b22\u8fce\u52a0\u5165",M.sales.appName,"\u4f53\u7cfb\u3002"),r.createElement("button",{className:"btn btn-outline-primary w-6c",onClick:n.controller.startApp},"\u5f00\u59cb\u4f53\u9a8c")))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Er=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).page=function(e){return r.createElement(d.Page,{header:"\u65e0\u6cd5\u901a\u8fc7",back:"none",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"p-5 text-center"},r.createElement("p",{className:"text-primary mb-5"},r.createElement(d.FA,{name:"minus-circle",size:"2x",className:"text-danger"}),r.createElement("br",null),r.createElement("br",null),"\u65e0\u6548\u7684\u9080\u8bf7\u7801"),r.createElement("button",{className:"btn btn-outline-primary w-6c",onClick:n.controller.startApp},"\u8fd4\u56de")))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openPage(this.page,t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Cr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).pa=void 0,n.page=function(e){return r.createElement(d.Page,{header:"\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"p-4 text-center"},r.createElement("p",{className:"mb-5 pl-2 "},r.createElement("p",{className:"text-left"},r.createElement("span",{className:"text-muted small"},"VS.20190827"),r.createElement("br",null)),r.createElement("p",{className:"text-left"},"\u767e\u7075\u5a01\u5316\u5b66\u6280\u672f\u6709\u9650\u516c\u53f8 \uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u672c\u516c\u53f8\u201d\uff09\u63d0\u4f9b\u3002\u7528\u6237\u5728\u767b\u5f55\u672c\u7f51\u7ad9\u540e\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\uff0c\u5982\u60a8\u4e0d\u540c\u610f\u6709\u5173\u6761\u6b3e\u6216\u672c\u7f51\u7ad9\u5bf9\u5176\u8fdb\u884c\u7684\u4fee\u6539\uff0c\u8bf7\u505c\u6b62\u4f7f\u7528\u672c\u7f51\u7ad9\u63d0\u4f9b\u7684\u670d\u52a1\u3002\u60a8\u4e00\u65e6\u4f7f\u7528\u672c\u7f51\u7ad9\u63d0\u4f9b\u7684\u5185\u5bb9\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6d4f\u89c8\u7f51\u7ad9\u4fe1\u606f\u3001\u4e0b\u8f7d\u7f51\u7ad9\u5185\u5bb9\u3001\u4f7f\u7528\u7f51\u7ad9\u63d0\u4f9b\u7684\u7b2c\u4e09\u65b9\u7f51\u7ad9\u94fe\u63a5\u7b49\uff0c\u5373\u89c6\u4e3a\u60a8\u5df2\u4e86\u89e3\u5e76\u5b8c\u5168\u540c\u610f\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u4e2d\u7684\u6240\u6709\u6761\u6b3e\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e00\u3001\u7f51\u7ad9\u4f7f\u7528"),r.createElement("br",null),"\u9664\u975e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u8bb8\u53ef\u6216\u5f81\u5f97\u672c\u516c\u53f8\u540c\u610f\uff0c\u672c\u7f51\u7ad9\u7684\u4fe1\u606f\u53ca\u5176\u4efb\u4f55\u7ec4\u6210\u90e8\u5206\u4e0d\u5f97\u88ab\u91cd\u65b0\u7f16\u8f91\u3001\u590d\u5236\u3001\u4eff\u5236\u3001\u6284\u88ad\uff0c\u6216\u4e3a\u4efb\u4f55\u672a\u7ecf\u672c\u516c\u53f8\u5141\u8bb8\u7684\u5546\u4e1a\u76ee\u7684\u6240\u4f7f\u7528\u3002\u5982\u679c\u672c\u516c\u53f8\u786e\u5b9a\u5ba2\u6237\u884c\u4e3a\u8fdd\u6cd5\u6216\u6709\u635f\u672c\u7f51\u7ad9\u548c\u672c\u516c\u53f8\u7684\u5408\u6cd5\u5229\u76ca\uff0c\u5219\u672c\u516c\u53f8\u4fdd\u7559\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u62d2\u7edd\u63d0\u4f9b\u670d\u52a1\u3001\u51bb\u7ed3\u6216\u5220\u9664\u4f1a\u5458\u5e10\u6237\u3001\u91c7\u53d6\u76f8\u5173\u6cd5\u5f8b\u63aa\u65bd\u7684\u6743\u5229\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e8c\u3001\u94fe\u63a5"),r.createElement("br",null),"\uff08\u4e00\uff09\u672c\u7f51\u7ad9\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u94fe\u63a5",r.createElement("br",null),"\u5fc5\u8981\u65f6\uff0c\u672c\u7f51\u7ad9\u5c06\u63d0\u4f9b\u5bf9\u7b2c\u4e09\u65b9\u7ecf\u8425\u7684\u5176\u4ed6\u7f51\u7ad9\u7684\u8d85\u7ea7\u94fe\u63a5\u6216\u6307\u5f15\u670d\u52a1\uff0c\u6216\u8005\u901a\u8fc7\u5e27\u8054\u53ca\u5176\u4ed6\u65b9\u5f0f\u5728\u672c\u7f51\u7ad9\u4e0a\u63d0\u4f9b\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u5185\u5bb9\uff0c\u6b64\u201c\u5185\u5bb9\u201d\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u672c\u7f51\u7ad9\u4e0a\u5305\u542b\u6216\u53ef\u83b7\u5f97\u7684\u4efb\u4f55\u6750\u6599\u3001\u6587\u4ef6\u3001\u4fe1\u606f\u3001\u56fe\u7247\u3001\u56fe\u8868\u3001\u6807\u8bc6\u3001\u8bbe\u8ba1\u4ee5\u53ca\u672c\u7f51\u7ad9\u4e0a\u63d0\u4f9b\u7684\u4efb\u4f55\u5176\u4ed6\u4fe1\u606f\u3002",r.createElement("br",null),"\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u94fe\u63a5\u4ec5\u4e3a\u4f9b\u60a8\u65b9\u4fbf\u4e4b\u7528\u3002\u672c\u516c\u53f8\u4fdd\u7559\u5728\u4efb\u4f55\u65f6\u95f4\u7ec8\u6b62\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u94fe\u63a5\u7684\u6743\u5229\u3002\u6240\u94fe\u63a5\u7f51\u7ad9\u3001\u7f51\u7ad9\u4e0a\u7684\u5185\u5bb9\u53ca\u5176\u63cf\u8ff0\u6216\u63d0\u4f9b\u7684\u4ea7\u54c1\u4e0e\u670d\u52a1\u5747\u4e0d\u53d7\u672c\u516c\u53f8\u7684\u63a7\u5236\uff0c\u56e0\u6b64\u672c\u516c\u53f8\u4e0d\u5bf9\u4efb\u4f55\u8be5\u7b49\u7f51\u7ad9\u53ca\u5176\u4e0a\u7684\u5185\u5bb9\u3001\u4ea7\u54c1\u6216\u670d\u52a1\uff08\u5305\u62ec\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u8fdb\u4e00\u6b65\u94fe\u63a5\uff09\u8d1f\u8d23\u3002\u60a8\u4e00\u65e6\u51b3\u5b9a\u767b\u5f55\u6216\u4f7f\u7528\u4efb\u4f55\u6240\u94fe\u63a5\u7684\u7f51\u7ad9\uff0c\u5e94\u5f53\u6ce8\u610f\u53ef\u80fd\u4f1a\u53d7\u5230\u9002\u7528\u4e8e\u8be5\u7f51\u7ad9\u7684\u4efb\u4f55\u6761\u6b3e\u548c\u6761\u4ef6\u7684\u9650\u5236\uff0c\u540c\u65f6\u81ea\u884c\u91c7\u53d6\u9884\u9632\u63aa\u65bd\u4ee5\u4fbf\u5728\u767b\u5f55\u6216\u4f7f\u7528\u8be5\u7f51\u7ad9\u65f6\u907f\u514d\u75c5\u6bd2\u6216\u5176\u4ed6\u7834\u574f\u6027\u56e0\u7d20\u3002\u5bf9\u4e8e\u60a8\u767b\u5f55\u6216\u4f7f\u7528\u6240\u94fe\u63a5\u7f51\u7ad9\u6240\u4ea7\u751f\u7684\u4efb\u4f55\u635f\u5931\uff0c\u7531\u60a8\u81ea\u884c\u627f\u62c5\u3002",r.createElement("br",null),"\u672c\u516c\u53f8\u5bf9\u4e8e\u4efb\u4f55\u6240\u94fe\u63a5\u7f51\u7ad9\u6216\u5176\u4e0a\u6240\u663e\u793a\u7684\u5185\u5bb9\u3001\u63cf\u8ff0\u6216\u63d0\u4f9b\u7684\u4efb\u4f55\u4ea7\u54c1\u6216\u670d\u52a1\u4e0d\u4f5c\u4efb\u4f55\u4fdd\u8bc1\u6216\u9648\u8ff0\uff0c\u5e76\u4e14\u4e0d\u5bf9\u5176\u4f5c\u51fa\u4efb\u4f55\u8ba4\u53ef\u3001\u5efa\u8bae\u3001\u6279\u51c6\u6216\u4ecb\u7ecd\u3002\u9664\u975e\u672c\u516c\u53f8\u53e6\u884c\u660e\u786e\u89c4\u5b9a\u6216\u540c\u610f\uff0c\u672c\u516c\u53f8\u5c06\u4e0d\u662f\u60a8\u4e0e\u4efb\u4f55\u88ab\u94fe\u63a5\u7f51\u7ad9\u7684\u63d0\u4f9b\u8005\u4e4b\u95f4\u8fbe\u6210\u7684\u4efb\u4f55\u534f\u8bae\u7684\u5f53\u4e8b\u65b9\u3002\u672c\u516c\u53f8\u4e0d\u5bf9\u56e0\u4efb\u4f55\u88ab\u94fe\u63a5\u7f51\u7ad9\u4e0a\u63d0\u4f9b\u7684\u5185\u5bb9\u3001\u4ea7\u54c1\u3001\u670d\u52a1\u7b49\u5b58\u5728\u7684\u4efb\u4f55\u4e2d\u65ad\u3001\u5ef6\u8fdf\u3001\u6f0f\u6d1e\u6216\u758f\u5ffd\u6240\u5bfc\u81f4\u7684\u4efb\u4f55\u635f\u5bb3\u6216\u635f\u5931\uff08\u65e0\u8bba\u8be5\u635f\u5bb3\u6216\u635f\u5931\u662f\u76f4\u63a5\u3001\u95f4\u63a5\u3001\u7279\u522b\u6216\u662f\u5076\u7136\u7684\uff09\u8d1f\u8d23\u3002\u672c\u7f51\u7ad9\u4e0a\u51fa\u73b0\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u94fe\u63a5\u5e76\u4e0d\u8868\u793a\u672c\u516c\u53f8\u6216\u672c\u7f51\u7ad9\u4e0e\u5176\u76f8\u5173\u8054\uff0c\u6216\u5df2\u83b7\u5f97\u5408\u6cd5\u6388\u6743\u4f7f\u7528\u88ab\u94fe\u63a5\u7f51\u7ad9\u4e2d\u663e\u793a\u7684\u6216\u53ef\u901a\u8fc7\u5176\u94fe\u63a5\u5230\u7684\u4efb\u4f55\u5546\u6807\u3001\u5546\u53f7\u3001\u6807\u8bc6\u6216\u8457\u4f5c\u6743\u3002",r.createElement("br",null),"\uff08\u4e8c\uff09\u7b2c\u4e09\u65b9\u7f51\u7ad9\u5bf9\u672c\u7f51\u7ad9\u7684\u94fe\u63a5",r.createElement("br",null),"\u7b2c\u4e09\u65b9\u7f51\u7ad9\u5bf9\u672c\u7f51\u7ad9\u7684\u94fe\u63a5\uff0c\u5e76\u4e0d\u5fc5\u7136\u8868\u793a\u672c\u516c\u53f8\u5bf9\u7b2c\u4e09\u65b9\u4f5c\u51fa\u4e86\u67d0\u79cd\u8ba4\u53ef\u3001\u6388\u6743\u3001\u8d5e\u52a9\uff0c\u6216\u8868\u660e\u5176\u5c5e\u4e8e\u672c\u516c\u53f8\u7684\u5173\u8054\u4f01\u4e1a\u3001\u5408\u8d44\u4f01\u4e1a\u3001\u5408\u4f5c\u4f01\u4e1a\u6216\u4e1a\u52a1\u4f19\u4f34\u3002\u5728\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u672c\u516c\u53f8\u5e76\u672a\u610f\u8bc6\u5230\u7b2c\u4e09\u65b9\u5df2\u63d0\u4f9b\u5bf9\u672c\u7f51\u7ad9\u7684\u94fe\u63a5\u3002",r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e09\u3001\u77e5\u8bc6\u4ea7\u6743\u4fdd\u62a4"),r.createElement("br",null),"\u672c\u7f51\u7ad9\u6240\u8f7d\u8ff0\u7684\u57df\u540d\u3001\u5546\u6807\u3001\u5546\u53f7\u3001\u4fe1\u606f\u3001\u6587\u5b57\u3001\u56fe\u5f62\u3001\u56fe\u50cf\u3001\u58f0\u97f3\u3001\u94fe\u63a5\u3001\u8f6f\u4ef6\u53ca\u6240\u6709\u5176\u5b83\u5185\u5bb9\u5747\u7531\u672c\u516c\u53f8\u3001\u5176\u5185\u5bb9\u63d0\u4f9b\u5546\u53ca\u7b2c\u4e09\u65b9\u8bb8\u53ef\u4eba\u63d0\u4f9b\u3002\u4e0a\u8ff0\u5185\u5bb9\u7684\u77e5\u8bc6\u4ea7\u6743\u4f9d\u5177\u4f53\u60c5\u51b5\u5206\u522b\u4e3a\u672c\u516c\u53f8\u3001\u5176\u5185\u5bb9\u63d0\u4f9b\u5546\u53ca\u7b2c\u4e09\u65b9\u8bb8\u53ef\u4eba\u6240\u62e5\u6709\u3002 \u9664\u6cd5\u5f8b\u53e6\u6709\u89c4\u5b9a\u6216\u53cc\u65b9\u53e6\u6709\u7ea6\u5b9a\u5916\uff0c\u672a\u7ecf\u672c\u516c\u53f8\u548c/\u6216\u5176\u4ed6\u6743\u5229\u4eba\u4e8b\u5148\u8bb8\u53ef\uff0c\u4efb\u4f55\u4eba\u4e0d\u5f97\u4ee5\u4efb\u4f55\u5f62\u5f0f\u901a\u8fc7\u4efb\u4f55\u65b9\u5f0f\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u7535\u5b50\u3001\u673a\u68b0\u590d\u5370\u6216\u5f55\u5236\u7b49\u65b9\u5f0f\uff09\u590d\u5236\u3001\u5c55\u793a\u3001\u4fee\u6539\u3001\u8f6c\u8ba9\u3001\u5206\u53d1\u3001\u91cd\u65b0\u53d1\u5e03\u3001\u4e0b\u8f7d\u3001\u5f20\u8d34\u6216\u4f20\u8f93\u672c\u7f51\u7ad9\u7684\u5185\u5bb9\u3002 \u672a\u7ecf\u672c\u516c\u53f8\u6216\u5546\u6807\u6743\u4eba\u4e8b\u5148\u8bb8\u53ef\uff0c\u4efb\u4f55\u5355\u4f4d\u53ca\u4e2a\u4eba\u4e0d\u5f97\u4ee5\u4efb\u4f55\u65b9\u5f0f\u6216\u7406\u7531\u5bf9\u672c\u7f51\u7ad9\u7684\u5546\u6807\u3001\u5546\u53f7\u6216\u6807\u8bc6\u7684\u4efb\u4f55\u90e8\u5206\u8fdb\u884c\u4f7f\u7528\u3001\u590d\u5236\u3001\u4fee\u6539\u3001\u4f20\u64ad\u6216\u4e0e\u5176\u5b83\u4ea7\u54c1\u6346\u7ed1\u4f7f\u7528\u3002",r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u56db\u3001\u514d\u8d23\u58f0\u660e"),r.createElement("br",null),"\u672c\u7f51\u7ad9\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\uff0c\u5177\u5907\u4e00\u5b9a\u7684\u51c6\u786e\u6027\u3001\u6709\u6548\u6027\u548c\u5b8c\u6574\u6027\uff0c\u4f46\u56e0\u6570\u636e\u5e9e\u5927\uff0c\u4e14\u53d7\u6570\u636e\u6765\u6e90\u7684\u4e0d\u786e\u5b9a\u6027\u5f71\u54cd\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u7edd\u5bf9\u7684\u51c6\u786e\u6027\u3001\u6709\u6548\u6027\u548c\u5b8c\u6574\u6027\u3002\u672c\u516c\u53f8\u53ca\u5176\u5458\u5de5\u4e00\u6982\u6bcb\u987b\u4ee5\u4efb\u4f55\u65b9\u5f0f\u5c31\u4efb\u4f55\u4fe1\u606f\u4f20\u9012\u6216\u4f20\u9001\u7684\u5931\u8bef\u3001\u4e0d\u51c6\u786e\u6216\u9519\u8bef\u5bf9\u7528\u6237\u6216\u4efb\u4f55\u5176\u4ed6\u4eba\u58eb\u8d1f\u4efb\u4f55\u76f4\u63a5\u6216\u95f4\u63a5\u7684\u8d23\u4efb\u3002\u5728\u6cd5\u5f8b\u5141\u8bb8\u7684\u8303\u56f4\u5185\uff0c\u672c\u516c\u53f8\u4e0d\u627f\u62c5\u7528\u6237\u6216\u4efb\u4f55\u4eba\u58eb\u5c31\u4f7f\u7528\u6216\u672a\u80fd\u4f7f\u7528\u672c\u7f51\u7ad9\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\u6216\u4efb\u4f55\u94fe\u63a5\u6216\u9879\u76ee\u6240\u5f15\u81f4\u7684\u4efb\u4f55\u76f4\u63a5\u3001\u95f4\u63a5\u3001\u9644\u5e26\u3001\u4ece\u5c5e\u3001\u7279\u6b8a\u3001\u60e9\u7f5a\u6027\u7684\u635f\u5bb3\u8d54\u507f\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6536\u76ca\u3001\u9884\u671f\u5229\u6da6\u7684\u635f\u5931\u6216\u5931\u53bb\u7684\u4e1a\u52a1\u3001\u672a\u5b9e\u73b0\u9884\u671f\u7684\u8282\u51cf\uff09\u3002\u672c\u516c\u53f8\u4fdd\u7559\u81ea\u884c\u51b3\u5b9a\u66f4\u6b63\u672c\u7f51\u7ad9\u4e2d\u4efb\u4f55\u90e8\u5206\u7684\u4efb\u4f55\u9519\u8bef\u6216\u9057\u6f0f\u7684\u6743\u5229\u3002\u672c\u516c\u53f8\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u95f4\u5bf9\u672c\u7f51\u7ad9\u3001\u672c\u7f51\u7ad9\u4e0a\u63cf\u8ff0\u7684\u5185\u5bb9\u548c\u4ea7\u54c1\u3001\u9879\u76ee\u3001\u670d\u52a1\u6216\u4ef7\u683c\u4f5c\u51fa\u4efb\u4f55\u5176\u4ed6\u4fee\u6539\u800c\u65e0\u9700\u901a\u77e5\u3002 \u672c\u7f51\u7ad9\u3001\u672c\u7f51\u7ad9\u4e0a\u7684\u4fe1\u606f\u548c\u5185\u5bb9\u4ee5\u53ca\u5728\u672c\u7f51\u7ad9\u4e0a\u53ef\u83b7\u5f97\u7684\u8f6f\u4ef6\u548c\u6750\u6599\u5747\u201c\u4f9d\u539f\u6837\u201d\u63d0\u4f9b\u800c\u4e0d\u5305\u542b\u660e\u793a\u6216\u6697\u793a\u7684\u4efb\u4f55\u6027\u8d28\u7684\u9648\u8ff0\u6216\u4fdd\u8bc1\u3002\u5728\u6cd5\u5f8b\u8bb8\u53ef\u7684\u6700\u5927\u9650\u5ea6\u5185\uff0c\u672c\u516c\u53f8\u58f0\u660e\u4e0d\u4f5c\u51fa\u4efb\u4f55\u660e\u793a\u6216\u6697\u793a\u7684\u9648\u8ff0\u548c\u4fdd\u8bc1\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6709\u5173\u5b89\u5168\u6027\u3001\u51c6\u786e\u6027\u3001\u5b8c\u6574\u6027\u3001\u9002\u9500\u6027\u3001\u65e0\u4fb5\u6743\u3001\u9002\u5408\u4efb\u4f55\u7279\u522b\u76ee\u7684\u6216\u6ca1\u6709\u8ba1\u7b97\u673a\u75c5\u6bd2\u7684\u4fdd\u8bc1\u3002\u60a8\u5e94\u4e3a\u4f7f\u7528\u672c\u7f51\u7ad9\u627f\u62c5\u5168\u90e8\u8d23\u4efb\u548c\u98ce\u9669\u3002 \u5982\u53d1\u751f\u4ee5\u4e0b\u60c5\u51b5\uff0c\u672c\u7f51\u7ad9\u4e0d\u5bf9\u7528\u6237\u7684\u76f4\u63a5\u6216\u95f4\u63a5\u635f\u5931\u627f\u62c5\u6cd5\u5f8b\u8d23\u4efb\uff1a",r.createElement("br",null),"1. \u8425\u4e1a\u4e2d\u65ad\u3002",r.createElement("br",null),"2. \u65e0\u6cd5\u767b\u5f55\u672c\u7f51\u7ad9\uff0c\u6216\u767b\u5f55\u672c\u7f51\u7ad9\u5ef6\u8fdf\u6216\u4e2d\u65ad\u3002",r.createElement("br",null),"3. \u6570\u636e\u65e0\u6cd5\u4f20\u9001\u3001\u9519\u8bef\u4f20\u9001\u3001\u6bc1\u635f\u3001\u706d\u5931\u6216\u5176\u4ed6\u4fee\u6539\u3002",r.createElement("br",null),"4. \u56e0\u5904\u7406\u672c\u7f51\u7ad9\u4e0a\u5bf9\u5176\u5b83\u7f51\u7ad9\u7684\u94fe\u63a5\u6216\u672c\u7f51\u7ad9\u4e0a\u5b58\u5728\u5bf9\u5176\u5b83\u7f51\u7ad9\u7684\u94fe\u63a5\u6240\u906d\u53d7\u7684\u4efb\u4f55\u79cd\u7c7b\u7684\u635f\u5931\u6216\u635f\u5bb3\u3002",r.createElement("br",null),"5. \u5c31\u5ba2\u6237\u4f7f\u7528\u672c\u7f51\u7ad9\uff08\u5305\u62ec\u94fe\u63a5\u5230\u7b2c\u4e09\u65b9\u7f51\u7ad9\u6216\u81ea\u7b2c\u4e09\u65b9\u7f51\u7ad9\u94fe\u63a5\uff09\u800c\u53ef\u80fd\u4ea7\u751f\u7684\u8ba1\u7b97\u673a\u75c5\u6bd2\u3001\u7cfb\u7edf\u5931\u7075\u6216\u529f\u80fd\u7d0a\u4e71\u3002",r.createElement("br",null),"6. \u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u7b2c\u56db\u6761\u4e2d\u89c4\u5b9a\u7684\u516d\u79cd\u60c5\u5f62\u6240\u5f15\u8d77\u7684\u7528\u6237\u4e2a\u4eba\u8d44\u6599\u7684\u62ab\u9732\u6216\u6cc4\u9732\u3002",r.createElement("br",null),"7. \u56e0\u4e0d\u53ef\u6297\u529b\u6216\u672c\u516c\u53f8\u65e0\u6cd5\u5408\u7406\u63a7\u5236\u7684\u5176\u4ed6\u539f\u56e0\u6240\u5bfc\u81f4\u7684\u7528\u6237\u635f\u5931\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e94\u3001\u670d\u52a1\u53d8\u66f4\u3001\u4e2d\u65ad\u6216\u7ec8\u6b62"),r.createElement("br",null),"1. \u5982\u56e0\u7cfb\u7edf\u7ef4\u62a4\u6216\u5347\u7ea7\u7684\u9700\u8981\u800c\u9700\u6682\u505c\u7f51\u7edc\u670d\u52a1\uff0c\u767e\u7075\u5a01\u5c06\u5c3d\u53ef\u80fd\u4e8b\u5148\u8fdb\u884c\u901a\u544a\u3002",r.createElement("br",null),"2. \u5982\u53d1\u751f\u4e0b\u5217\u4efb\u4f55\u4e00\u79cd\u60c5\u5f62\uff0c\u767e\u7075\u5a01\u6709\u6743\u968f\u65f6\u4e2d\u65ad\u6216\u7ec8\u6b62\u5411\u7528\u6237\u63d0\u4f9b\u672c\u534f\u8bae\u9879\u4e0b\u7684\u7f51\u7edc\u670d\u52a1\u800c\u65e0\u9700\u901a\u77e5\u7528\u6237\uff1a",r.createElement("br",null),"(a) \u7528\u6237\u63d0\u4f9b\u7684\u8d44\u6599\u4e0d\u771f\u5b9e\uff1b",r.createElement("br",null),"(b) \u7528\u6237\u8fdd\u53cd\u672c\u534f\u8bae\u4e2d\u89c4\u5b9a\u7684\u4f7f\u7528\u89c4\u5219\u3002",r.createElement("br",null),"3. \u9664\u524d\u6b3e\u6240\u8ff0\u60c5\u5f62\u5916\uff0c\u767e\u7075\u5a01\u540c\u65f6\u4fdd\u7559\u5728\u4e0d\u4e8b\u5148\u901a\u77e5\u7528\u6237\u7684\u60c5\u51b5\u4e0b\u968f\u65f6\u4e2d\u65ad\u6216\u7ec8\u6b62\u90e8\u5206\u6216\u5168\u90e8\u7f51\u7edc\u670d\u52a1\u7684\u6743\u5229\uff0c\u5bf9\u4e8e\u6240\u6709\u670d\u52a1\u7684\u4e2d\u65ad\u6216\u7ec8\u6b62\u800c\u9020\u6210\u7684\u4efb\u4f55\u635f\u5931\uff0c\u767e\u7075\u5a01\u65e0\u9700\u5bf9\u7528\u6237\u6216\u4efb\u4f55\u7b2c\u4e09\u65b9\u627f\u62c5\u4efb\u4f55\u8d23\u4efb\u3002",r.createElement("br",null),"4. \u7528\u6237\u82e5\u53cd\u5bf9\u4efb\u4f55\u670d\u52a1\u6761\u6b3e\u7684\u5efa\u8bae\u6216\u5bf9\u540e\u6765\u7684\u6761\u6b3e\u4fee\u6539\u6709\u5f02\u8bae\uff0c\u6216\u5bf9\u7f51\u7edc\u670d\u52a1\u4e0d\u6ee1\uff0c\u7528\u6237\u53ea\u6709\u4ee5\u4e0b\u8ffd\u7d22\u6743\uff1a",r.createElement("br",null),"(a) \u4e0d\u518d\u4f7f\u7528\u767e\u7075\u5a01\u63d0\u4f9b\u7684\u7f51\u7edc\u670d\u52a1\u3002",r.createElement("br",null),"(b) \u901a\u544a\u767e\u7075\u5a01\u505c\u6b62\u4f7f\u7528\u767e\u7075\u5a01\u7684\u7f51\u7edc\u670d\u52a1\uff0c\u5f97\u5230\u767e\u7075\u5a01\u786e\u8ba4\u540e\uff0c\u7528\u6237\u4f7f\u7528\u7f51\u7edc\u670d\u52a1\u7684\u6743\u5229\u9a6c\u4e0a\u4e2d\u6b62\u3002\u4ece\u5373\u65f6\u8d77\uff0c\u767e\u7075\u5a01\u4e0d\u518d\u5bf9\u7528\u6237\u627f\u62c5\u4efb\u4f55\u4e49\u52a1\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u516d\u3001\u5173\u4e8eCookies"),r.createElement("br",null),"\u767e\u7075\u5a01\u5728\u60a8\u7684\u8bbe\u5907\u4e0a\u653e\u7f6e\u5c0f\u6570\u636e\u6587\u4ef6\uff08\u201ccookies\u201d\uff09\u4ee5\u589e\u5f3a\u7f51\u7ad9\u7684\u529f\u80fd\u3002 \u8fd9\u662f\u5927\u591a\u6570\u5546\u4e1a\u7f51\u7ad9\u7684\u5e38\u89c1\u505a\u6cd5\u3002 \u8fd9\u4e9b\u6587\u672c\u6587\u4ef6\u5141\u8bb8\u7f51\u7ad9\u5b58\u50a8\u60a8\u7684\u64cd\u4f5c\u548c\u504f\u597d\uff08\u4f8b\u5982\u5730\u7406\u533a\u57df\uff09\uff0c\u4ee5\u4fbf\u60a8\u4ee5\u540e\u7684\u8bbf\u95ee\u66f4\u52a0\u4e2a\u6027\u5316\u548c\u7b80\u5316\u3002 Cookie\u65e8\u5728\u589e\u5f3a\u60a8\u7684\u7528\u6237\u4f53\u9a8c\u3002 \u4f8b\u5982\uff0c\u4ed6\u4eec\u4f1a\u5c06\u5546\u54c1\u5b58\u50a8\u5728\u8d2d\u7269\u8f66\u4e2d\uff0c\u76f4\u5230\u60a8\u4e0b\u6b21\u8bbf\u95ee\u4e3a\u6b62\u3002",r.createElement("br",null),"Cookie\u53d6\u51b3\u4e8e\u6d4f\u89c8\u5668\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u963b\u6b62Cookie\u88ab\u653e\u7f6e\u5728\u60a8\u7684\u8bbe\u5907\u4e0a\u548c/\u6216\u60a8\u53ef\u4ee5\u5728\u8bbf\u95ee\u7f51\u7ad9\u540e\u5220\u9664Cookie\u3002 \u8fd9\u4e9b\u64cd\u4f5c\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\u90fd\u4f1a\u9650\u5236\u60a8\u7684\u7528\u6237\u4f53\u9a8c\u5e76\u5bfc\u81f4J\uff06K\u7f51\u7ad9\u65e0\u6cd5\u6309\u9884\u671f\u8fd0\u884c\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e03\u3001\u4e2a\u4eba\u4fe1\u606f\u548c\u9690\u79c1\u653f\u7b56"),r.createElement("br",null),"1) \u767e\u7075\u5a01\u6536\u96c6\u7684\u4fe1\u606f",r.createElement("br",null),"\u672c\u516c\u53f8\u5c06\u6536\u96c6\u60a8\u7528\u6237\u8d44\u6599\u4e2d\u7684\u67d0\u4e9b\u4fe1\u606f\uff0c\u4ee5\u6ee1\u8db3\u6cd5\u5f8b\u548c\u4e1a\u52a1\u8981\u6c42\u3002\u6b64\u4fe1\u606f\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u60a8\u7684\u59d3\u540d\u548c\u8054\u7cfb\u4fe1\u606f\u3002\u5f53\u7136\uff0c\u60a8\u53ea\u4f1a\u5411\u767e\u7075\u5a01\u63d0\u4f9b\u51c6\u786e\u7684\u4fe1\u606f\uff0c\u5e76\u4e14\u60a8\u5bf9\u4e0e\u60a8\u7684\u7528\u6237\u4e2a\u4eba\u8d44\u6599\u5e10\u6237\u76f8\u5173\u7684\u6240\u6709\u6d3b\u52a8\u8d1f\u5168\u90e8\u8d23\u4efb\u3002\u60a8\u540c\u610f\u5728\u4fe1\u606f\u53d1\u751f\u4efb\u4f55\u53d8\u5316\u65f6\u66f4\u65b0\u60a8\u7684\u4e2a\u4eba\u8d44\u6599\u4fe1\u606f\u3002\u60a8\u6709\u8d23\u4efb\u4fdd\u5bc6\u60a8\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5e76\u7acb\u5373\u901a\u77e5\u6211\u4eec\u6709\u4efb\u4f55\u8fdd\u53cd\u6b64\u4fdd\u5bc6\u89c4\u5b9a\u7684\u884c\u4e3a\u3002",r.createElement("br",null),"\u767e\u7075\u5a01\u53ef\u80fd\u4f1a\u6536\u96c6\u6709\u5173\u5176\u5ba2\u6237\u548c\u7f51\u7ad9\u7528\u6237\u7684\u6c47\u603b\u7edf\u8ba1\u6570\u636e\uff0c\u4f9b\u5176\u5185\u90e8\u4f7f\u7528\uff1b\u53ef\u80fd\u4f1a\u4f7f\u7528\u7f51\u7ad9\u7528\u6237\u548c/\u6216\u5ba2\u6237\u4fe1\u606f\u6765\u63d0\u4f9b\u76f8\u5173\u4fe1\u606f\u3001\u4fc3\u9500\u548c\u5956\u52b1\u3002",r.createElement("br",null),"\u901a\u8fc7cookie\u53ef\u80fd\u4f1a\u6536\u96c6\u53e6\u5916\u4e00\u4e9b\u4fe1\u606f\uff08\u53c2\u89c1\u4e0a\u6587\u7b2c\u516d\u8282\uff09\u3002",r.createElement("br",null),r.createElement("br",null),"2) \u4fe1\u606f\u5b89\u5168",r.createElement("br",null),"\u672c\u516c\u53f8\u4e0d\u4f1a\u51fa\u552e\u60a8\u7684\u4fe1\u606f\uff0c\u4e5f\u4e0d\u4f1a\u4e0e\u4efb\u4f55\u5176\u4ed6\u4e2a\u4eba\u6216\u4f01\u4e1a\u5171\u4eab\u6216\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u4e3a\u60a8\u63d0\u4f9b\u60a8\u6240\u8981\u6c42\u7684\u4ea7\u54c1\u548c\u670d\u52a1\u3002 \u8fd9\u79cd\u4fe1\u606f\u5171\u4eab\u53ef\u80fd\u6d89\u53ca\uff0c\u4f46\u4e0d\u9650\u4e8e\uff0c\u60a8\u4ece\u767e\u7075\u5a01\u8ba2\u8d2d\u4ea7\u54c1\u7684\u5206\u53d1\u3001\u4ea4\u4ed8\u3001\u5408\u4f5c\u4f19\u4f34\u7684\u6c9f\u901a\u3002 \u672a\u7ecf\u76f8\u5173\u4e2a\u4eba\u8bb8\u53ef\uff0c\u672c\u516c\u53f8\u4e0d\u4f1a\u5411\u4efb\u4f55\u7b2c\u4e09\u65b9\u5206\u4eab\u3001\u51fa\u552e\u6216\u5206\u53d1\u4e0e\u5176\u5ba2\u6237\u3001\u6d88\u8d39\u8005\u6216\u7f51\u7ad9\u7528\u6237\u6709\u5173\u7684\u4efb\u4f55\u4e2a\u4eba\u4fe1\u606f\u3002",r.createElement("br",null),"\u767e\u7075\u5a01\u4f7f\u7528\u5b89\u5168\u5957\u63a5\u5b57\u5c42\uff08SSL\uff09\u8f6f\u4ef6\u534f\u8bae\u5728\u4f20\u8f93\u6570\u636e\u65f6\u52a0\u5bc6\u60a8\u7684\u4fe1\u606f\u3002",r.createElement("br",null),"\u767e\u7075\u5a01\u9075\u5b88\u6240\u6709\u5173\u4e8e\u5176\u5f00\u5c55\u4e1a\u52a1\u7684\u53f8\u6cd5\u7ba1\u8f96\u533a\u5185\u7684\u6570\u636e\u4f20\u8f93\u7684\u56fd\u5bb6\u548c\u56fd\u9645\u534f\u8bae\u3002",r.createElement("br",null),r.createElement("br",null),"3) \u8bb8\u53ef",r.createElement("br",null),"\u60a8\u53ef\u4ee5\u9009\u62e9\u9000\u51fa\u767e\u7075\u5a01\u7684\u67d0\u4e9b\u901a\u4fe1\uff08\u4f8b\u5982\uff0c\u901a\u8fc7\u7535\u5b50\u90ae\u4ef6\u53d1\u9001\u4fc3\u9500\u4f18\u60e0\uff09\uff0c\u65b9\u6cd5\u662f\u901a\u8fc7\u60a8\u5728\u7528\u6237\u6863\u6848\u4e2d\u505a\u51fa\u7684\u9009\u62e9\u3002",r.createElement("br",null),"\u60a8\u53ef\u4ee5\u9009\u62e9\u4e0d\u4e0e\u767e\u7075\u5a01\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f46\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u5c06\u65e0\u6cd5\u5efa\u7acb\u7528\u6237\u5e10\u6237\u3002 \u5982\u679c\u6ca1\u6709\u7528\u6237\u5e10\u6237\uff0c\u60a8\u4ecd\u7136\u53ef\u4ee5\u6d4f\u89c8\u7f51\u7ad9\u7684\u5927\u90e8\u5206\u5185\u5bb9\uff0c\u4f46\u65e0\u6cd5\u5728\u7ebf\u8ba2\u8d2d\u6216\u67e5\u770b\u67d0\u4e9b\u9875\u9762\u3002",r.createElement("br",null),"\u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u8ba1\u7b97\u673a\u4e0a\u7981\u7528cookie\uff0c\u4f46cookie\u662f\u7f51\u7ad9\u8bb8\u591a\u65b9\u9762\u529f\u80fd\u7684\u7ec4\u6210\u90e8\u5206\u3002 \u5982\u679c\u60a8\u4e0d\u5141\u8bb8\u4f7f\u7528Cookie\uff0c\u5219\u65e0\u6cd5\u5c06\u5546\u54c1\u6dfb\u52a0\u5230\u8d2d\u7269\u8f66\u6216\u6267\u884c\u4efb\u4f55\u8981\u6c42\u60a8\u767b\u5f55\u7528\u6237\u5e10\u6237\u7684\u529f\u80fd\u3002 \u6b64\u5916\uff0c\u5982\u679c\u6ca1\u6709Cookie\uff0c\u767e\u7075\u5a01\u7f51\u7ad9\u5c06\u65e0\u6cd5\u5b9a\u5236\u60a8\u7684\u7528\u6237\u4f53\u9a8c\uff0c\u4ee5\u53cd\u6620\u60a8\u6240\u5728\u5730\u533a\u7684\u4ea7\u54c1\u548c\u670d\u52a1\u3002",r.createElement("br",null),r.createElement("br",null),"4) \u7528\u6237\u9650\u5236",r.createElement("br",null),"\u767e\u7075\u5a01\u4e0d\u541118\u5c81\u4ee5\u4e0b\u7684\u5ba2\u6237\u9500\u552e\u4ea7\u54c1\u6216\u670d\u52a1\u3002 \u672c\u516c\u53f8\u4e0d\u4f1a\u6545\u610f\u6536\u96c6\u3001\u4f7f\u7528\u6216\u900f\u973218\u5c81\u4ee5\u4e0b\u4eba\u58eb\u7684\u4e2a\u4eba\u6570\u636e\u3002",r.createElement("br",null),r.createElement("br",null),"5) \u8054\u7cfb\u4fe1\u606f",r.createElement("br",null),"\u767e\u7075\u5a01\u81f4\u529b\u4e8e\u5411\u5ba2\u6237\u4fdd\u8bc1\u6709\u6743\u8bbf\u95ee\u4ed6\u4eec\u7684\u4fe1\u606f\u5e76\u66f4\u6b63\u4ed6\u4eec\u8ba4\u4e3a\u4e0d\u51c6\u786e\u7684\u4efb\u4f55\u4fe1\u606f\u3002 \u5982\u679c\u60a8\u5bf9\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u4efb\u4f55\u7591\u95ee\u6216\u5f02\u8bae\uff0c\u8bf7\u901a\u8fc7privacy@jk-sci.com\u4e0e\u6211\u4eec\u8054\u7cfb\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u516b\u3001\u6761\u6b3e\u4fee\u6539"),r.createElement("br",null),"\u672c\u516c\u53f8\u4fdd\u7559\u5728\u4efb\u4f55\u65f6\u95f4\u81ea\u884c\u4fee\u6539\u3001\u589e\u5220\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u4e2d\u4efb\u4f55\u5185\u5bb9\u7684\u6743\u5229\u3002\u60a8\u6bcf\u6b21\u767b\u5f55\u6216\u4f7f\u7528\u672c\u7f51\u7ad9\u65f6\u5747\u89c6\u4e3a\u540c\u610f\u53d7\u5f53\u65f6\u6709\u6548\u7684\u6761\u6b3e\u7684\u5236\u7ea6\u3002\u56e0\u6b64\uff0c\u60a8\u6bcf\u6b21\u767b\u5f55\u6216\u4f7f\u7528\u672c\u7f51\u7ad9\u65f6\u5e94\u67e5\u770b\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u7684\u65e5\u671f\uff0c\u5e76\u68c0\u67e5\u4e0e\u4e0a\u4e00\u7248\u672c\u7684\u4fee\u6539\u4e4b\u5904\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e5d\u3001\u6cd5\u5f8b\u9002\u7528\u4e0e\u53f8\u6cd5\u7ba1\u8f96"),r.createElement("br",null),"\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u7684\u5236\u5b9a\u3001\u6267\u884c\u548c\u89e3\u91ca\u53ca\u4e89\u8bae\u7684\u89e3\u51b3\u5747\u5e94\u9002\u7528\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd\u6cd5\u5f8b\u3002\u53cc\u65b9\u56e0\u4f7f\u7528\u672c\u7f51\u7ad9\u6240\u4ea7\u751f\u7684\u4e89\u8bae\uff0c\u534f\u5546\u4e0d\u6210\u7684\uff0c\u4efb\u4f55\u4e00\u65b9\u53ef\u4ee5\u5411\u672c\u516c\u53f8\u6240\u5728\u5730\u4eba\u6c11\u6cd5\u9662\u63d0\u8d77\u8bc9\u8bbc\u3002",r.createElement("br",null)))))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pa=t,e.next=3,this.openPage(this.page,t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Nr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).CreatePosition=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.createPosition({invitacode:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.CreatePosition(e.code+"");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=M.sales.isInner?void 0:r.createElement("div",{className:"d-block"},r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:t},"\u786e\u8ba4")),i=M.sales.isInner?"\u63d0\u793a":"\u9080\u8bf7\u4eba";return r.createElement(d.Page,{header:i,headerClassName:M.pageHeaderCss,logout:!0,back:"none",footer:a},M.sales.isInner?n.meInfoAssist(e):n.meInfoAgent(e))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"meInfoAgent",value:function(e){var t=e.code,n=e.user,a=(t+="").substr(0,4),i=t.substr(4);return t=a+" "+i,r.createElement("div",{id:"qrid",className:"text-center",style:{width:"auto",height:"70%"}},r.createElement(d.Image,{src:M.sales.logo,className:"mt-4",style:{width:"auto",height:"50%",margin:"2rem auto, 0 auto"}}),r.createElement("div",{className:"my-4"},r.createElement("div",null," ",Object(d.tv)(n,(function(e){return e.name})),"\uff0c\u9080\u8bf7\u60a8\u52a0\u5165",M.sales.appName,"\u3002"),r.createElement("div",null,"\u9080\u8bf7\u7801\uff1a",r.createElement("span",{className:"text-info"},t))))}},{key:"meInfoAssist",value:function(e){var t=e.code,n=(t+="").substr(0,4),a=t.substr(4);return t=n+" "+a,r.createElement("div",{id:"qrid",className:"text-center",style:{width:"auto",height:"70%",padding:"100px 0 0 0 "}},r.createElement(d.Image,{src:M.sales.logo,style:{width:"auto",height:"30%",margin:"10rem auto, 0 auto"}}),r.createElement("div",{className:"my-4"},r.createElement("div",{className:"text-info py-2"},"\u60a8\u8fd8\u672a\u88ab\u6388\u6743"),r.createElement("div",{className:"text-info py-2"},"\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5f00\u901a\u5185\u90e8\u9500\u552e\u6743\u9650")))}}]),t}(d.VPage),Sr=n(127),Pr=function e(t){Object(u.a)(this,e),this.cApp=void 0,this.title=void 0,this.logo=void 0,this.appName=void 0,this.isInner=void 0,this.couponHeader=void 0,this.addCouponHeader=void 0,this.couponType=void 0,this.couponDefaultValue=void 0,this.downloadAppurl=void 0,this.sharelogo=void 0,this.cApp=t},Tr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).title="assist sales",n.logo=N.a,n.appName="\u9500\u552e\u52a9\u624b",n.isInner=!0,n.couponHeader="\u79ef\u5206\u5238",n.addCouponHeader="\u6dfb\u52a0\u79ef\u5206\u5238",n.couponType="credits",n.couponDefaultValue=1,n.downloadAppurl="http://agent.jkchemical.com/download/jk-assist.apk",n.sharelogo="https://assist.jkchemical.com/sharelogo.png",n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"achievement",value:function(e){var t=this,n=e.totalOrderCount,a=e.oneSaleVolume;return r.createElement("div",{className:"text-center text-white bg-primary py-5",style:{borderRadius:"0  0 5rem 5rem",margin:" 0 -2rem 0 -2rem "}},r.createElement("div",{className:"d-flex mb-2"},r.createElement("div",{className:"p-2 flex-fill"},r.createElement("div",{className:"text-warning pt-4",onClick:function(){return t.cApp.cBalance.showAssistAchievementDetail(0)}},r.createElement("div",{className:"h5"},r.createElement("strong",null,r.createElement("span",{className:"h1"},a),r.createElement("small",null,"\uffe5")))),r.createElement("h6",{className:"text-warning"},r.createElement("small",null,"\u9500\u552e\u989d"))),r.createElement("div",{className:"p-2 flex-fill"},r.createElement("div",{className:"text-warning pt-4",onClick:function(){return t.cApp.cBalance.showAssistAchievementDetail(0)}},r.createElement("div",{className:"h5"},r.createElement("strong",null,r.createElement("span",{className:"h1"},n),r.createElement("small",null,"\u4e2a")))),r.createElement("h6",{className:"text-warning"},r.createElement("small",null,"\u8ba2\u5355\u6570")))),r.createElement("div",{className:"my-4"}))}},{key:"shareTitle",value:function(e){return"coupon"===e?"\u79ef\u5206\u5238":"\u4e13\u4eab\u79ef\u5206\u5238"}},{key:"shareContent",value:function(e){return"\u53ef\u83b7\u5f97\u79ef\u5206"}},{key:"shareUrl",value:function(e,t){return t?M.carturl+"?type="+this.couponType+"&credits="+e+"&productids="+t:M.carturl+"?type="+this.couponType+"&credits="+e}}]),t}(Pr),Ar=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).title="angent sales",n.appName="\u8f7b\u4ee3\u7406",n.logo=E.a,n.isInner=!1,n.couponHeader="\u4f18\u60e0\u5238",n.addCouponHeader="\u6dfb\u52a0\u4f18\u60e0\u5238",n.couponType="coupon",n.couponDefaultValue=9.5,n.downloadAppurl="http://agent.jkchemical.com/download/jk-agent.apk",n.sharelogo="https://agent.jkchemical.com/sharelogo.png",n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"divTag",value:function(e,t,n){var a,i=this;return a=1===n?function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.cApp.cBalance.showAchievementDetail(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}():function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.cApp.cBalance.showBalance(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r.createElement("div",{className:"cursor-pointer",onClick:a},t<=.001?r.createElement("div",{className:"h5"}," - "):r.createElement("div",{className:"h5"},r.createElement("strong",null,t.toFixed(2))," ",r.createElement("span",{className:"h6"},r.createElement("small",null,"\u5143"))),r.createElement("div",{className:"h6"},r.createElement("small",null,e)))}},{key:"achievement",value:function(e){var t=this,n=e.oneAchievement+e.twoAchievement+e.threeAchievement,a=e.totalReceivableAmount-e.totalaWithdrawal-e.waitWithdrawal;return r.createElement("div",{className:"text-center text-white bg-primary pt-1 pb-5",style:{borderRadius:"0  0 5rem 5rem",margin:" 0 -2rem 0 -2rem "}},r.createElement("div",{className:"pb-2 pt-4 cursor-pointer"},r.createElement("div",{className:"text-warning pt-4",onClick:Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cApp.cBalance.showAchievementDetail(0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},r.createElement("span",{className:"h1"},n.toFixed(2)),r.createElement("small",null," \u5143")),r.createElement("h6",{className:"text-warning"},r.createElement("small",null,"\u7d2f\u8ba1\u6536\u76ca"))),r.createElement("div",{className:"d-flex justify-content-around"},this.divTag("\u5f85\u5230\u5e10",n,1),this.divTag("\u4f59\u989d",a,2)),r.createElement("div",{className:"my-4"}))}},{key:"shareTitle",value:function(e){return"coupon"===e?"\u6298\u6263\u5238":"\u4e13\u4eab\u6298\u6263\u5238"}},{key:"shareContent",value:function(e){return"\u6700\u591a\u53ef\u4eab\u53d7"+(10*(1-e)).toFixed(1)+"\u6298"}},{key:"shareUrl",value:function(e,t){return t?M.carturl+"?type="+this.couponType+"&coupon="+e+"&productids="+t:M.carturl+"?type="+this.couponType+"&coupon="+e}}]),t}(Pr),Ir=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).getIsAssistSales=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.uqs.salesTask.WebUserEmployeeMap.query({webuser:n.user.id});case 2:e.sent.ret.length>0?M.sales=new Tr(n.cApp):M.sales=new Ar(n.cApp);case 4:case"end":return e.stop()}}),e)}))),n.getQueryParam=function(){var e=document.location.search,t="";return e&&(t=Sr.parse(e.toLowerCase())),t},n.showAgencyClauseDetil=function(){n.openVPage(Cr)},n.onAgreeAgencyClause=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.openVPage(jr,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.isPosition=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchPosition.table({position:void 0});case 2:if(!((t=e.sent)&&t.length>0)){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)}))),n.createPosition=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(r=t.invitacode).replace(/\s/g,""),!0!==isNaN(r)){e.next=6;break}return e.next=5,n.openVPage(Er);case 5:return e.abrupt("return");case 6:return e.next=8,n.uqs.salesTask.CreatePosition.submit({invitacode:r});case 8:if(a=e.sent,i=a.succeed,n.ceasePage(),1!==i){e.next=18;break}return e.next=14,n.uqs.salesTask.$user.save(n.user.id,n.user);case 14:return e.next=16,n.openVPage(xr,a);case 16:e.next=21;break;case 18:if(-1!==i){e.next=21;break}return e.next=21,n.openVPage(Er,a);case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.startApp=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.start();case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isPosition();case 2:if(n=e.sent,"assist.jkchemical.com"!==document.domain){e.next=17;break}return M.sales=new Tr(this.cApp),e.next=8,this.cApp.uqs.salesTask.WebUserEmployeeMap.query({webuser:this.user.id});case 8:if(!(e.sent.ret.length>0)){e.next=13;break}this.cApp.cSalesTask.start(),e.next=15;break;case 13:return e.next=15,this.openVPage(Nr,null);case 15:e.next=39;break;case 17:if(M.sales=new Ar(this.cApp),!n){e.next=22;break}this.cApp.cSalesTask.start(),e.next=39;break;case 22:if(d.nav.clear(),!(r=this.getQueryParam()).code){e.next=37;break}return e.next=27,this.uqs.salesTask.SearchPosition.table({position:r.code});case 27:if(!((a=e.sent).length>0)){e.next=33;break}return e.next=31,this.openVPage(Nr,a[0]);case 31:e.next=35;break;case 33:return e.next=35,this.openVPage(jr,t);case 35:e.next=39;break;case 37:return e.next=39,this.openVPage(jr,t);case 39:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(z),Fr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).team=void 0,n.renderItem=function(e,t){var a=n.controller.showPeerDetail,i=function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=e.children,o=e.volume,l=e.assigned,p=Object(d.tv)(u,(function(e){return e.nick||e.name}));return r.createElement(d.LMR,{className:"px-3 py-2 ",onClick:i,left:r.createElement("div",null," ",r.createElement(d.FA,{className:"text-info px-2",name:"user"})),right:o&&r.createElement("div",{className:"w-2c mr-3 text-right"},"\uffe5",o)},r.createElement("div",{className:"font-weight-bold "},n.userSpan(p,l)))},n.page=function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u8fd8\u6ca1\u6709\u56e2\u961f\u54e6\uff01\u9a6c\u4e0a\u53d1\u5c55\u56e2\u961f\u5427\uff01\uff01");return r.createElement(d.Page,{header:"\u6211\u7684\u56e2\u961f",headerClassName:M.pageHeaderCss},r.createElement(d.List,{before:"",none:e,items:n.team,item:{render:n.renderItem}}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.team=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userSpan",value:function(e,t){return t?r.createElement(r.Fragment,null,r.createElement("b",null,t," \xa0 ",r.createElement("small",{className:"muted"},e))):r.createElement("b",null,e)}}]),t}(d.VPage),qr=(Rn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).schema=[{name:"assigend",type:"string"}],n.uiSchema={items:{assigend:{widget:"text",label:"\u5907\u6ce8\u540d",placeholder:""}}},Object(B.a)(n,"data",Dn,Object(R.a)(n)),n.peer=void 0,n.onItemChanged=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,e.next=3,n.controller.savePeerAssigned(n.peer,r);case 3:n.data[i]=r;case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){var e=n.controller.achievement.oneSaleVolume,t=r.createElement("div",{className:" h5 px-3"},r.createElement(d.FA,{name:"cny",className:"text-warning small"})," ",e);return r.createElement(d.Page,{header:Object(d.tv)(n.peer,(function(e){return e.nick||e.name})),headerClassName:M.pageHeaderCss},r.createElement(d.Edit,{schema:n.schema,uiSchema:n.uiSchema,data:n.data,onItemChanged:n.onItemChanged}),r.createElement(d.LMR,{className:" bg-white pl-3 py-2",left:r.createElement("div",null,r.createElement("span",null,"\u9500\u91cf")),right:t}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.assigned,r=t.children,this.peer=r,this.data={assigend:n},this.openPage(this.page);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Dn=Object(D.a)(Rn.prototype,"data",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rn),Vr=(Un=function(e){function t(){var e,n,a=this;Object(u.a)(this,t);for(var i=arguments.length,o=new Array(i),h=0;h<i;h++)o[h]=arguments[h];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o))),Object(B.a)(n,"achievement",zn,Object(R.a)(n)),n.searchTeam=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchTeam.table({});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),n.showPeerDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={user:t.children.id},e.next=3,n.uqs.salesTask.SearchAchievement.table(r);case 3:(a=e.sent).length>0&&(n.achievement=a[0]),n.openVPage(qr,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.savePeerAssigned=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={peer:t.id,Assigned:r},n.uqs.salesTask.SavePeerAssigned.submit(a);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.render=Object(U.a)((function(){return n.renderView(Nn)})),n.tab=function(){return r.createElement(a.render,null)},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchTeam();case 2:t=e.sent,this.openVPage(Fr,t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(z),zn=Object(D.a)(Un.prototype,"achievement",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Un),Lr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).message=void 0,n.renderItem=function(e,t){var n=e.date,a=e.note,i=e.peer,c=r.createElement("small",{className:"text-muted"},r.createElement(d.EasyDate,{date:n})),s=r.createElement("small",{className:"text-muted"},Object(d.tv)(i,(function(e){return e.name})));return r.createElement("div",{className:"d-block p-3"},r.createElement(d.LMR,{left:c,right:s}),r.createElement(d.LMR,null," ",a))},n.page=function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"});return r.createElement(d.Page,{header:"\u6d88\u606f",headerClassName:M.pageHeaderCss},r.createElement(d.List,{before:"",none:e,items:n.message,item:{render:n.renderItem}}))},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.message=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Mr=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchQuery=void 0,n.firstSize=n.pageSize=10,n.searchQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.PageItems),Br=(Hn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a))),Object(B.a)(n,"pageMessage",_n,Object(R.a)(n)),n.count=T.l.box(0),n.searchNowMessage=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.searchNowMessage.table({});case 2:(t=e.sent)&&t.length>0?n.count.set(t[0].count):n.count.set(0);case 4:case"end":return e.stop()}}),e)}))),n.updateNowMessage=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.UpdateNowMessage.submit({});case 2:return e.next=4,n.searchNowMessage();case 4:case"end":return e.stop()}}),e)}))),n.showMessage=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.searchMessage();case 2:return n.openVPage(Lr,n.pageMessage),e.next=5,n.updateNowMessage();case 5:case"end":return e.stop()}}),e)}))),n.searchMessage=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.pageMessage=new Mr(n.uqs.salesTask.searchMessage),e.next=3,n.pageMessage.first({});case 3:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.searchNowMessage(),e.next=3,this.showMessage();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(z),_n=Object(D.a)(Hn.prototype,"pageMessage",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hn),Rr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).type=void 0,n.onClickRow=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==n.type){e.next=5;break}return e.next=3,n.controller.showCreateCustomer(t.id);case 3:e.next=8;break;case 5:if(2!==n.type){e.next=8;break}return e.next=8,n.controller.returnCustomerUnit(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){var e,t,a,i=n.controller,u=i.pageUnit,o=i.showCreateOrganization,l=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(n.type);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return 1===n.type||2===n.type?(e=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8fd8\u6ca1\u6709\u521b\u5efa\u8fc7\u5ba2\u6237\u5355\u4f4d\uff0c\u8bf7\u5148",r.createElement("span",{className:"text-primary",onClick:l},"\u521b\u5efa\u5355\u4f4d\uff01")),t=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u65b0\u5efa\u5ba2\u6237\u524d\u5148\u9009\u62e9\u5355\u4f4d\uff0c\u6216\u70b9\u51fb\u53f3\u4e0a\u89d2\u52a0\u53f7\u65b0\u5efa\u5355\u4f4d\uff01"),a=r.createElement("div",{onClick:l,className:"cursor-pointer px-3"},r.createElement("span",{className:"iconfont icon-tianjia",style:{fontSize:"20px",color:"#ffffff"}}))):(t="",e=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u4f60\u8fd8\u6ca1\u6709\u521b\u5efa\u5355\u4f4d\uff0c\u65e0\u6cd5\u6839\u636e\u5355\u4f4d\u641c\u7d22\uff01")),r.createElement(d.Page,{header:"\u9009\u62e9\u5355\u4f4d",onScrollBottom:n.onScrollBottom,headerClassName:M.pageHeaderCss,right:a},r.createElement(d.SearchBox,{className:"px-1 w-100 mt-2 mr-2",size:"md",onSearch:function(e){return n.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5355\u4f4d"}),r.createElement(d.List,{before:"",none:e,className:"mt-2",items:u,item:{render:n.renderItem,onClick:n.onClickRow}}),!u&&t)})),n.onScrollBottom=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.pageUnit.more();case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.type=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderItem",value:function(e,t){var n=e.name;return r.createElement(d.LMR,{className:"px-3 py-1",left:r.createElement(d.FA,{name:"university",className:"my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold my-1"},n))}}]),t}(d.VPage),Dr=[{name:"Name",type:"string",required:!0},{name:"submit",type:"submit"}],Ur=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).uiSchema={items:{Name:{widget:"text",label:"\u540d\u79f0",placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d\u540d\u79f0"},submit:{widget:"button",label:"\u786e\u5b9a",className:"btn btn-primary w-8c"}}},n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.createOrganization(r.data);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){return r.createElement(d.Page,{header:"\u65b0\u5efa\u5355\u4f4d",headerClassName:M.pageHeaderCss},r.createElement(d.Form,{className:"my-3 mx-3",schema:Dr,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick,requiredFlag:!1}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),zr=[{name:"name",type:"string"}],Hr=(Wn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"unit",$n,Object(R.a)(n)),n.uiSchema={items:{name:{widget:"text",label:"\u5355\u4f4d\u540d\u79f0",placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d\u540d\u79f0"}}},n.onItemChanged=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.name,n.unit[i]=r,e.next=4,n.controller.updateMyCustomerUnit(n.unit);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){return r.createElement(d.Page,{header:"\u5ba2\u6237\u5355\u4f4d\u8be6\u60c5",headerClassName:M.pageHeaderCss},r.createElement(d.Edit,{schema:zr,uiSchema:n.uiSchema,data:n.unit,onItemChanged:n.onItemChanged}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.unit=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),$n=Object(D.a)(Wn.prototype,"unit",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wn),_r=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchQuery=void 0,n.firstSize=n.pageSize=10,n.searchQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.PageItems),Wr=(Kn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a))),Object(B.a)(n,"pageUnit",Qn,Object(R.a)(n)),n.searchByKey=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.pageUnit=new _r(n.uqs.salesTask.searchMyCustomerUnit),n.pageUnit.first({key:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCreateOrganization=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.vCall(Ur);case 2:r=e.sent,1===t?n.showCreateCustomer(r):(n.pageUnit=null,n.searchByKey(""));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createOrganization=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i,s,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={name:t.Name},a=n.uqs.salesTask,i=a.MyCustomerUnit,s=a.CreateMyCustomerUnit,e.next=4,s.submit(r);case 4:u=e.sent,o=u&&i.boxId(u.id),n.backPage(),n.returnCall(o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCustomerUnitDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.MyCustomerUnit.load(t);case 2:r=e.sent,n.openVPage(Hr,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCreateCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.cApp.cCustomer.showCreateCustomer(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCustomerUnitEdit=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.MyCustomerUnit.load(t);case 2:r=e.sent,n.openVPage(Hr,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.updateMyCustomerUnit=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.MyCustomerUnit.save(t.id,t);case 2:n.closePage();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.returnCustomerUnit=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.returnCall(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.pageUnit=null,this.searchByKey(""),this.openVPage(Rr,t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(z),Qn=Object(D.a)(Kn.prototype,"pageUnit",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kn),$r=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderItem=function(e,t){var a=n.controller.showCouponDetail,i=function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u="",o=e.code,l=e.validitydate,p=e.discount,h=e.preferential,f=e.isValid;o&&(u=(o=String(o+1e8)).substr(1,4)+" "+o.substr(5));var m,v,b,y=r.createElement("div",null,r.createElement("i",{className:"iconfont icon-youhuiquantuangou pr-2",style:{fontSize:"20px",color:"#f6ad15"}}),u),g=r.createElement("div",{className:"text-muted"},r.createElement("small",null,"\u6709\u6548\u671f\uff1a",r.createElement(d.EasyDate,{date:l})));"number"===typeof p&&(b=10*(1-p),v=r.createElement("div",null,r.createElement("small",null,r.createElement("span",{className:" mx-3 "},10===b?"\u65e0\u6298\u6263":r.createElement(r.Fragment,null,b.toFixed(1)," \u6298")))));return h&&(m=r.createElement("div",{className:"text-muted"},r.createElement("small",null,"\u4f18\u60e0\uff1a",r.createElement("span",{className:"mx-3"},"\uffe5",h)))),r.createElement(d.LMR,{className:"px-3 py-2",onClick:i},r.createElement(d.LMR,{left:y,right:g}),r.createElement(d.LMR,{left:v,right:r.createElement("small",{className:"text-muted"},f?"\u6709\u6548":"\u65e0\u6548")},m))},n.page=Object(U.a)((function(){var e=n.controller.pageCoupon,t=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8fd8\u6ca1\u6709\u4f18\u60e0\u5238\u54e6\uff01\u9a6c\u4e0a\u6dfb\u52a0\u62db\u63fd\u5ba2\u6237\u5427\uff01");return r.createElement(d.Page,{header:"\u4f18\u60e0\u5238\u5217\u8868",headerClassName:M.pageHeaderCss},r.createElement(d.SearchBox,{className:"px-1 w-100  mt-2 mr-2  ",size:"md",onSearch:function(e){return n.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u4f18\u60e0\u5238"}),r.createElement(d.List,{before:"",none:t,items:e,item:{render:n.renderItem,onClick:null}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),Kr=[{name:"discount",type:"string",required:!1},{name:"businesstype",type:"string",required:!1},{name:"submit",type:"submit"}],Qr=(Gn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"dateVisible",Jn,Object(R.a)(n)),n.list=[{value:"notplatform",title:"\u975e\u5e73\u53f0",name:"b",checked:!0},{value:"platform",title:"\u5e73\u53f0",name:"b",checked:void 0}],n.render=function(){return r.createElement("div",{className:"form-control",style:{height:"auto"}},n.list.map((function(e,t){var a=e.value,i=e.title;return r.createElement("label",{className:"my-1 mx-3",key:t},r.createElement("input",{type:"radio",value:a,name:n.name,defaultChecked:a===n.value})," ",i," \xa0")})))},n}return Object(h.a)(t,e),t}(d.Widget),Jn=Object(D.a)(Gn.prototype,"dateVisible",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gn),Gr=(Yn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"dateVisible",Xn,Object(R.a)(n)),n.list=[{value:9.5,title:"9.5\u6298",name:"a",checked:!0},{value:9,title:"9.0\u6298",name:"a",checked:void 0},{value:8.5,title:"8.5\u6298",name:"a",checked:void 0},{value:8,title:"8.0\u6298",name:"a",checked:void 0},{value:7,title:"7.0\u6298",name:"a",checked:void 0},{value:6,title:"6.0\u6298",name:"a",checked:void 0}],n.onChange=function(e){var t=e.currentTarget.value;n.dateVisible="0"===t,n.setValue(t)},n.onDateChange=function(e){parseInt(e.currentTarget.value)<10?n.setValue(e.currentTarget.value):n.setValue(0)},n.render=function(){return r.createElement("div",{className:"form-control",style:{height:"auto"}},n.list.map((function(e,t){var a=e.value,i=e.name,c=e.title;return r.createElement("label",{key:t,className:"my-1 mx-3"},r.createElement("input",{type:"radio",value:a,name:i,defaultChecked:a===n.value,onChange:n.onChange})," ",c," \xa0 ")})),r.createElement("div",{className:"d-flex"},r.createElement("label",{className:"my-1 mx-3"},r.createElement("input",{type:"radio",value:10,name:"a",onChange:n.onChange})," \u65e0"),r.createElement("label",{className:"my-1 mx-3"},r.createElement("input",{type:"radio",value:0,name:"a",onChange:n.onChange})," \u5176\u4ed6"),n.dateVisible&&r.createElement("label",{className:"my-1 mx-3 d-flex"},r.createElement("input",{type:"number",className:"form-control w-4c h-2c",onChange:n.onDateChange})," \u6298")),r.createElement("div",{className:"small text-muted px-3"},r.createElement("i",{className:"iconfont mr-2 icon-guanyu"}),"\u6298\u6263\u8868\u793a\u53ef\u4eab\u6700\u5927\u6298\u6263\uff0c\u5177\u4f53\u6298\u6263\u4ee5\u4e0b\u5355\u65f6\u4e3a\u51c6"))},n}return Object(h.a)(t,e),t}(d.Widget),Xn=Object(D.a)(Yn.prototype,"dateVisible",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yn),Jr=new Date(Date.now()+6048e5),Yr=new Date(Date.now()+12096e5),Xr=(Zn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"showTip",er,Object(R.a)(n)),n.tip="",n.uiSchema={items:{discount:{widget:"custom",label:"\u6298\u6263",WidgetClass:Gr,defaultValue:M.sales.couponDefaultValue,visible:!M.sales.isInner},businesstype:{widget:"custom",label:"\u7c7b\u578b",defaultValue:"notplatform",WidgetClass:Qr,visible:!!M.sales.isInner},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary w-8c"}}},n.productParam=void 0,n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=m.a.clone(r.data),i=a.discount,s=parseFloat(i),!(isNaN(s)||s>10||s<=0)){e.next=8;break}return n.tip="\u63d0\u793a\uff1a\u6298\u6263\u5fc5\u987b\u662f\u6570\u5b57\uff0c\u4e14\u4ecb\u4e8e0\u548c10\u4e4b\u95f4\uff01",n.showTip=!0,setTimeout((function(){return n.showTip=!1}),F.TIPDISPLAYTIME),e.abrupt("return");case 8:return n.showTip=!1,a.validitydate=n.validDateFrom(2),a.discount=m.a.round(1-.1*s,2),u=n.controller.createCoupon,e.next=14,u(a,n.productParam);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=n.controller.cApp.cCoupon,a=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.start();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=r.createElement("div",{onClick:a,className:"cursor-pointer mx-3"},"   ",r.createElement("i",{className:"iconfont icon-qita",style:{fontSize:"20px"}})),u=M.sales.couponHeader;return r.createElement(d.Page,{header:u,headerClassName:M.pageHeaderCss,right:i},r.createElement(d.Form,{className:"my-3 mx-3",schema:Kr,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick,requiredFlag:!1}),n.showTip&&r.createElement("div",{className:"small text-danger mx-4"},n.tip))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.productParam=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validDateFrom",value:function(e){var t;switch(e){default:return;case 1:t=Jr;break;case 2:t=Yr}return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())}}]),t}(d.VPage),er=Object(D.a)(Zn.prototype,"showTip",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zn),Zr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).coupon=void 0,n.oninvalidCoupon=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.invalidCoupon(n.coupon);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),n.page=Object(U.a)((function(){var e,t=n.coupon,a=t.code,i=t.validitydate,c=t.discount,s=t.isValid,u=t.customer,o="";a&&(o=a.substr(0,4)+" "+a.substr(4));e=10*(1-c);var l=[{type:"component",name:"customer",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-3",left:"\u4f18 \u60e0 \u7801\uff1a"},r.createElement("div",{className:"mx-3"},o))},{type:"component",name:"customer",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-3",left:"\u6709 \u6548 \u671f\uff1a"},r.createElement("div",{className:"mx-3"},r.createElement(d.EasyDate,{date:i})))},{type:"component",name:"customer",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-3",left:"\u4f18 \xa0 \xa0 \u60e0\uff1a"},r.createElement("div",{className:"mx-3"},"\u6298\u6263\uff1a",e.toFixed(1)," \u6298 "))}];void 0!==u.obj&&l.push({type:"component",name:"customer",component:r.createElement(r.Fragment,null,Object(d.tv)(u,(function(e){return r.createElement(d.LMR,{className:"cursor-pointer w-100 py-3",left:"\u6307\u5b9a\u5ba2\u6237\uff1a",right:r.createElement("div",null,Object(d.tv)(e.unit,(function(e){return e.name})))},r.createElement("div",{className:"mx-3"},e.name))})))}),l.push({type:"component",name:"customer",component:r.createElement(d.LMR,{className:"cursor-pointer w-100 py-3",left:"\u72b6 \xa0 \xa0 \u6001\uff1a"},r.createElement("div",{className:"mx-3"},"  ",s?"\u6709\u6548":"\u65e0\u6548"))});var p=r.createElement("button",{onClick:n.oninvalidCoupon,type:"submit",className:"btn btn-danger flex-grow-1 mx-3 my-1"},"\u4f5c\u5e9f");return r.createElement(d.Page,{header:"\u4f18\u60e0\u5238\u8be6\u60c5",headerClassName:M.pageHeaderCss,footer:p},r.createElement(d.PropGrid,{className:"my-2",rows:l,values:n.coupon,alignValue:"right"}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.coupon=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),ea=(tr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"showTips",nr,Object(R.a)(n)),n.inviteParam=void 0,n.comeBack=function(){n.closePage(2)},n.copyClick=function(e){Cn()(e.target.parentNode.childNodes[0].innerHTML),n.showTips="",setTimeout((function(){n.showTips="none"}),F.TIPDISPLAYTIME)},n.share=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.userAgent.indexOf("Html5Plus")>-1&&(r=n.inviteParam,a=r.paramtype,i=r.discount,window.plusShare({title:M.sales.shareTitle(a),content:M.sales.shareContent(i),href:t,thumbs:[M.sales.sharelogo]},(function(e){})),n.controller.cApp.productCart.clearAll());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){var e="",t=n.inviteParam.code;t&&(e=(t=String(t)).substr(0,4)+" "+t.substr(4));var a=n.controller.cApp.productCart.getIds(),i=M.sales.shareUrl(t,a),c=r.createElement("div",{className:"text-center",style:{width:"auto",height:"10%"}});navigator.userAgent.indexOf("Html5Plus")>-1&&(c=r.createElement("span",{className:"text-info cursor-info mx-2",onClick:function(){return n.share(i)}},"\u5206\u4eab"));var s=M.sales.couponHeader;return r.createElement(d.Page,{header:s,headerClassName:M.pageHeaderCss},r.createElement("div",{id:"qrid",className:"text-center",style:{width:"auto",height:"85%"}},r.createElement(d.Image,{src:M.sales.logo,className:"mt-4",style:{width:"auto",height:"40%",margin:"2rem auto, 0 auto"}}),r.createElement("div",null,r.createElement(An.a,{style:{margin:"2rem 0 0 0"},value:i,size:100,fgColor:"#000000"}),r.createElement("div",{className:"mt-4"},r.createElement("span",{className:"w-100 text-center h3 m-3 text-info"},e," ")))),r.createElement("div",{className:"w-100 text-center"}),r.createElement("div",{className:"w-100 text-center"},r.createElement("span",{className:"text-info cursor-info mx-2",onClick:n.copyClick},"\u590d\u5236"),r.createElement("span",{className:"text-info cursor-info mx-2",onClick:n.comeBack},"\u8fd4\u56de"),c,r.createElement("div",{className:"text-center text-white small px-2",style:{width:"30%",margin:"-80px  auto 0 auto",padding:"4px",borderRadius:"3px",backgroundColor:"#505050",display:n.showTips}},"\u5df2\u590d\u5236\u5230\u526a\u5207\u677f")))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.inviteParam=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),nr=Object(D.a)(tr.prototype,"showTips",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),tr),ta=(rr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"showTips",ar,Object(R.a)(n)),n.inviteCode=void 0,n.url=void 0,n.inviteParam=void 0,n.comeBack=function(){n.closePage(2)},n.copyClick=function(e){Cn()(e.target.parentNode.childNodes[0].innerHTML),n.showTips="",setTimeout((function(){n.showTips="none"}),F.TIPDISPLAYTIME)},n.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},n.renderProduct=function(e){var t=e.brand,a=e.description,i=e.descriptionC,c=e.CAS,s=e.purity,u=e.molecularFomula,o=e.molecularWeight,l=e.origin,p=e.imageUrl;return r.createElement("div",{className:"mb-4 px-3"},r.createElement("div",{className:"py-2"}),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-5"},r.createElement(g,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-7"},r.createElement("div",{className:"row"},n.productPropItem("CAS",c),n.productPropItem("\u7eaf\u5ea6",s),n.productPropItem("\u5206\u5b50\u5f0f",u),n.productPropItem("\u5206\u5b50\u91cf",o),n.productPropItem("\u4ea7\u54c1\u7f16\u53f7",l),jt(t)))),r.createElement("div",{style:{margin:"1rem auto 0 auto"}},r.createElement("strong",null,a)),r.createElement("div",null,i))},n.renderPack=function(e){return r.createElement(r.Fragment,null,"  ")},n.showShare=function(){var e,t=n.inviteParam.discount;navigator.userAgent.indexOf("Html5Plus")>-1&&(e=r.createElement("button",{className:"btn btn-info",onClick:function(){return n.share(n.url)}},"\u70b9\u51fb\u5206\u4eab"));var a=r.createElement("div",{className:"pt-4 mt-4 d-flex align-items-end justify-content-end text-danger"},r.createElement("div",null,M.sales.shareContent(t))),i=r.createElement("div",{className:"d-flex flex-grow-1"},r.createElement("div",{className:"text-center"},r.createElement("div",null,n.inviteCode),r.createElement(An.a,{value:n.url,size:100,fgColor:"#000000"})));return r.createElement(r.Fragment,null,r.createElement("div",{className:"sep-product-select py-4",style:{margin:"0 auto"}}),r.createElement("div",{className:"d-flex px-4"},i,a),r.createElement("div",{className:"text-center mt-5"},e))},n.share=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.userAgent.indexOf("Html5Plus")>-1&&(r=n.inviteParam,a=r.paramtype,i=r.discount,window.plusShare({title:M.sales.shareTitle(a),content:M.sales.shareContent(i),href:t,thumbs:[M.sales.sharelogo]},(function(e){})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=new dt.ViewMainSubs(n.renderProduct,n.renderPack);return t.model=n.inviteParam.product,r.createElement(d.Page,{header:M.sales.couponHeader,headerClassName:M.pageHeaderCss},r.createElement("div",{className:"bg-white",style:{height:"100%"}},r.createElement("div",{className:"px-2 py-2"},t.render()),n.showShare()))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.inviteParam=t,n=t.code,r=t.product,n&&(n=String(n),a=n.substr(0,4),i=n.substr(4),this.inviteCode=a+" "+i),this.url=M.sales.shareUrl(n,r.main.id),this.openPage(this.page,t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),ar=Object(D.a)(rr.prototype,"showTips",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),rr),na=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchQuery=void 0,n.firstSize=n.pageSize=10,n.searchQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.PageItems),ra=(ir=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a))),Object(B.a)(n,"pageCoupon",cr,Object(R.a)(n)),Object(B.a)(n,"customers",sr,Object(R.a)(n)),n.searchByKey=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.pageCoupon=new na(n.uqs.salesTask.SearchCoupon),n.pageCoupon.first({key:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCouponDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.Coupon.load(t);case 2:r=e.sent,n.openVPage(Zr,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showCreateCoupon=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(Xr,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.createCoupon=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i,s,u,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.validitydate,i=t.discount,s={validitydate:a,discount:i,types:M.sales.couponType},e.next=4,n.uqs.salesTask.CreateCoupon.submit(s);case 4:u=e.sent,o=u.code,s.code=o,s.paramtype=r.paramtype,s.product=r.product,s.businesstype=t.businesstype,"product"===s.paramtype?n.openVPage(ta,s):n.openVPage(ea,s);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.invalidCoupon=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.uqs.salesTask.Coupon,e.next=3,r.load(t.id);case 3:return(a=e.sent).isValid=2,e.next=7,r.save(a.id,a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showAddCouponCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t,r,a){var i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.cApp.cCustomer,e.next=3,i.call();case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.addCouponCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={coupon:t.id,customer:r.id},n.uqs.salesTask.AddCouponCustomer.submit(a),n.customers.unshift({coupon:t,customer:r}),n.closePage();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pageCoupon=null,e.next=3,this.searchByKey(void 0);case 3:this.openVPage($r);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(z),cr=Object(D.a)(ir.prototype,"pageCoupon",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr=Object(D.a)(ir.prototype,"customers",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ir),aa=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).onClickCustomer=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.returnWebUser(t);case 2:n.closePage();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(e){var t=n.controller.pageWebUser,a=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8bf7\u641c\u7d22\u5ba2\u6237\uff01");return r.createElement(d.Page,{header:"\u9009\u62e9\u5185\u90e8\u5ba2\u6237",headerClassName:M.pageHeaderCss},r.createElement(d.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",onSearch:function(e){return n.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(d.List,{before:"",none:a,items:t,item:{render:n.renderCustomer,onClick:n.onClickCustomer}}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderCustomer",value:function(e,t){var n=e.name;return r.createElement(d.LMR,{className:"px-3 py-2 ",left:r.createElement(d.FA,{name:"user",className:" my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold"}),r.createElement("div",null,n))}}]),t}(d.VPage),ia=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this))).searchQuery=void 0,n.firstSize=n.pageSize=10,n.searchQuery=e,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"load",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=0),e.next=3,this.searchQuery.page(t,n,r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setPageStart",value:function(e){this.pageStart=void 0===e?0:e.id}}]),t}(d.PageItems),ca=(ur=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a))),Object(B.a)(n,"pageWebUser",or,Object(R.a)(n)),n.searchByKey=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.pageWebUser=new ia(n.uqs.customer.SearchWebUser),n.pageWebUser.first({key:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.returnWebUser=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.returnCall(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.pageWebUser=null,this.openVPage(aa);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(z),or=Object(D.a)(ur.prototype,"pageWebUser",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur),sa=(lr=function(){function e(){Object(u.a)(this,e),Object(B.a)(this,"list",pr,this),Object(B.a)(this,"listid",hr,this)}return Object(o.a)(e,[{key:"add",value:function(e,t){-1===this.listid.indexOf(t)&&(this.listid.push(t),this.list.push(e))}},{key:"remove",value:function(e){var t=this.listid.findIndex((function(t){return t===e}));t>=0&&this.listid.splice(t,1),t>=0&&this.list.splice(t,1)}},{key:"clearAll",value:function(){this.listid.splice(0,this.list.length),this.list.splice(0,this.list.length)}},{key:"getIds",value:function(){var e="";return this.listid.forEach((function(t){e+=t+"-"})),e.length>0&&(e=e.substring(0,e.length-1)),e}},{key:"count",get:function(){return this.list.length}}]),e}(),pr=Object(D.a)(lr.prototype,"list",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),hr=Object(D.a)(lr.prototype,"listid",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(D.a)(lr.prototype,"count",[T.e],Object.getOwnPropertyDescriptor(lr.prototype,"count"),lr.prototype),lr),ua=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).page=Object(U.a)((function(){var e=n.controller.salesAmont,t=e.totalReceivableAmount,a=e.totalaWithdrawal,i=e.waitWithdrawal,u=t-a-i,o=r.createElement("div",{className:"cursor-pointer py-2 mx-3",onClick:n.controller.showBalanceHistory},"\u4f59\u989d\u660e\u7ec6"),l=!(u>0),p=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.showVWithdrawal(u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.createElement(d.Page,{header:"",headerClassName:M.pageHeaderCss,right:o},r.createElement("div",{className:"text-center bg-white",style:{height:"100%"}},r.createElement("div",{className:"text-center bg-white",style:{padding:"40px"}}),r.createElement("i",{className:"iconfont icon-zhichibizhong",style:{fontSize:"80px",color:"#f6ad15",margin:"10%"}}),r.createElement("div",{style:{padding:"0px 80px 6px 80px"}},"\u6211\u7684\u4f59\u989d"),r.createElement("div",{className:"strong"},r.createElement(d.FA,{name:"cny",className:"h3"}," "),r.createElement("span",{className:"h1 mx-1"}," ",r.createElement("strong",null,(t-a-i).toFixed(2)))),r.createElement("div",{style:{margin:"150px 10px 10px 10px"}},r.createElement("button",{type:"button",disabled:l,className:"btn btn-primary",style:{padding:"6px 70px"},onClick:p},"\u63d0\u73b0")),r.createElement("div",{className:"small text-muted text-center",style:{width:"100%",position:"absolute",bottom:"4%"}},r.createElement("div",{className:"py-2 h6 text-primary"},"\u5e38\u89c1\u95ee\u9898"),r.createElement("div",null,"\u672c\u670d\u52a1\u6709\u767e\u7075\u5a01\u63d0\u4f9b"))))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(d.VPage),oa=[{name:"amount",type:"number",required:!0},{name:"submit",type:"submit"}],la=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).onChange=function(e){var t=e.currentTarget.value;t&&!/(^[0-9]+(.[0-9]{2})?$)/.test(t)&&(e.currentTarget.value="0"),n.setValue(t)},n.render=function(){return r.createElement("div",null,r.createElement("div",{className:"d-flex my-2 "},r.createElement(d.FA,{name:"cny",className:"h2"}),r.createElement("input",{type:"text",className:"mx-1 text-censter mp-4",style:{width:"100%",height:"35px"},onChange:n.onChange})))},n}return Object(h.a)(t,e),t}(d.Widget),pa=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).balance=void 0,n.uiSchema={items:{amount:{widget:"custom",label:"\u63d0\u73b0\u91d1\u989d",WidgetClass:la},submit:{widget:"button",label:"\u63d0\u73b0",className:"btn btn-primary w-100"}}},n.onFormButtonClick=function(){var e=Object(s.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.data.amount>n.balance)){e.next=3;break}e.next=5;break;case 3:return e.next=5,n.controller.submitWithdrawal(r.data.amount);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.page=Object(U.a)((function(){return r.createElement(d.Page,{header:"\u4f59\u989d\u63d0\u73b0",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"bg-white",style:{width:"90%",padding:"10px 10px 10px 10px",margin:"2rem auto 0 auto"}},r.createElement("div",{className:"my-3 mx-3"},"\u8f6c\u8d26\u5230\u94f6\u884c\u5361"),r.createElement(d.Form,{className:"my-3 mx-3",schema:oa,uiSchema:n.uiSchema,onButtonClick:n.onFormButtonClick,requiredFlag:!1})))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.balance=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),ha=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).amount=void 0,n.endWithdrawal=function(){n.closePage(2)},n.page=Object(U.a)((function(){return r.createElement(d.Page,{header:"\u4f59\u989d\u63d0\u73b0",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"text-center bg-white px-3 py-3",style:{height:"100%"}},r.createElement(d.LMR,{left:"\u63d0\u73b0\u91d1\u989d",className:"small my-2",right:r.createElement("div",null,"\uffe5",n.amount)}),r.createElement(d.LMR,{left:"\u8f6c\u8d26\u5230\u94f6\u884c\u5361",className:"small my-2",right:"\u62db\u5546\u94f6\u884c"}),r.createElement("div",null,r.createElement("button",{type:"button",className:"btn btn-primary",style:{width:"40%",margin:"200px 0 200px 0"},onClick:n.endWithdrawal},"\u5b8c\u6210"))))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.amount=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(d.VPage),da=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).renderOrder=function(e,t){var a=e.date,i=e.amount,u=e.order,o="-"+i,l=r.createElement("div",{className:"small text-muted"},r.createElement(d.EasyTime,{date:a})),p=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.controller.showWithdrawalDetail(u);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.createElement(d.LMR,{className:"pl-2 px-4 py-2",onClick:p},r.createElement(d.LMR,{className:"py-1",left:"\u63d0\u73b0",right:r.createElement("strong",null,o)}),r.createElement(d.LMR,{left:l}))},n.page=Object(U.a)((function(){return r.createElement(d.Page,{header:"\u4f59\u989d\u660e\u7ec6",headerClassName:M.pageHeaderCss},r.createElement(d.List,{items:n.controller.balanceHistory,item:{render:n.renderOrder},none:""}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(d.VPage),fa=n(24),ma=function(e){return!0===e?"text-primary":"text-muted"},va=function(e,t){return function(n){return r.createElement("div",{className:"w-100 small pt-2 text-center"},r.createElement("div",{className:ma(n)},e),r.createElement("div",{className:ma(n)},t))}};!function(e){e[e.sum=0]="sum",e[e.pending=1]="pending"}(br||(br={})),function(e){e[e.A=1]="A",e[e.B=2]="B",e[e.C=3]="C"}(yr||(yr={}));var ba,ya,ga,ka,wa,Oa=(dr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"achievements",fr,Object(R.a)(n)),Object(B.a)(n,"tab_Status",mr,Object(R.a)(n)),Object(B.a)(n,"type",vr,Object(R.a)(n)),n.oneAchievement=void 0,n.twoAchievement=void 0,n.threeAchievement=void 0,n.header=function(){var e=function(){return n.onClickHeader(br.sum)},t=function(){return n.onClickHeader(br.pending)};return n.tab_Status===br.sum?r.createElement("div",{className:"w-100 text-center mr-4 cursor-pointer "},r.createElement("span",{className:"bg-white text-info mr-1 px-3 py-2",onClick:e},"\u7d2f\u8ba1\u6536\u76ca"),r.createElement("span",{className:"px-3 py-2",onClick:t},"\xa0\u5f85\u5230\u6b3e\xa0")):r.createElement("div",{className:"w-100 text-center mr-4 cursor-pointer  "},r.createElement("span",{className:"mr-1 px-3 py-2",onClick:e},"\u7d2f\u8ba1\u6536\u76ca"),r.createElement("span",{className:"bg-white text-info px-3 py-2",onClick:t},"\xa0\u5f85\u5230\u6b3e\xa0"))},n.onClickHeader=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.tab_Status!==t){e.next=2;break}return e.abrupt("return");case 2:return n.tab_Status=t,e.next=5,n.loadAchievements();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.tabContent=function(){return r.createElement(d.List,{items:n.achievements,item:{render:n.renderItem},none:"\u65e0\u6536\u76ca"})},n.page=Object(U.a)((function(){var e=[{name:"a",caption:va("A\u7c7b",n.oneAchievement),content:n.tabContent,onShown:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.type=yr.A,e.next=3,n.loadAchievements();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"b",caption:va("B\u7c7b",n.twoAchievement),content:n.tabContent,onShown:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.type=yr.B,e.next=3,n.loadAchievements();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"c",caption:va("C\u7c7b",n.threeAchievement),content:n.tabContent,onShown:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.type=yr.C,e.next=3,n.loadAchievements();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}];return r.createElement(d.Page,{header:n.header(),headerClassName:M.pageHeaderCss},r.createElement(d.Tabs,{tabs:e,tabPosition:"top"}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tab_Status=t,n=this.controller.salesAmont,r=n.oneAchievement,a=n.twoAchievement,i=n.threeAchievement,this.oneAchievement=r,this.twoAchievement=a,this.threeAchievement=i,this.openPage(this.page);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderItem",value:function(e,t){var n,a=e.date,i=e.amount,c=e.orderno,s=e.state,u=e.mycustomer;n=1===s?"\u5df2\u8f6c\u5165":"\u5f85\u8f6c\u5165",u=u?Object(d.tv)(u,(function(e){return e.name})):"";var o=r.createElement(d.EasyDate,{date:a});return r.createElement("div",{className:"d-block"},r.createElement("div",null,r.createElement(d.LMR,{className:"px-3 pt-2 small",left:r.createElement("div",{className:"text-muted"},"\u6536\u76ca\u4ea7\u751f\u65e5\u671f"),right:o}),r.createElement(d.LMR,{className:"px-3 small",left:r.createElement("div",{className:"text-muted"},"\u8ba2\u5355\u53f7"),right:c}),r.createElement(d.LMR,{className:"px-3 small",left:r.createElement("div",{className:"text-muted"},"\u5ba2\u6237"),right:u}),r.createElement(d.LMR,{className:"px-3 small",left:r.createElement("div",{className:"text-muted"}," \u9884\u4f30\u91d1\u989d"),right:r.createElement("div",null,r.createElement("span",{className:"iconfont icon-huobiqiandaizijin",style:{fontSize:"15px",color:"#f6ad15"}}),i)}),r.createElement(d.LMR,{className:"px-3 pb-2 small",left:r.createElement("div",{className:"text-muted"},"\u72b6\u6001"),right:n})))}},{key:"loadAchievements",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.searchAchievementDetail(this.type,this.tab_Status);case 2:n=e.sent,this.achievements.splice(0),(t=this.achievements).push.apply(t,Object(fa.a)(n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(d.VPage),fr=Object(D.a)(dr.prototype,"achievements",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mr=Object(D.a)(dr.prototype,"tab_Status",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return br.sum}}),vr=Object(D.a)(dr.prototype,"type",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return yr.A}}),dr),ja=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).page=Object(U.a)((function(e){var t=e.brief,a=e.data,i=e.state,c=e.comments,s=t.no,u=t.discription,o=t.date,l=a.amount,p="withdrawal"===u?"-":"+";u="withdrawal"===u?"\u652f\u51fa":"\u6536\u5165";var h="";return 1===i.id?h="\u5904\u7406\u4e2d":2===i.id?h="\u5df2\u8f6c\u51fa":3===i.id&&(h="\u5df2\u9a73\u56de"),r.createElement(d.Page,{header:"\u4f59\u989d\u660e\u7ec6",headerClassName:M.pageHeaderCss},r.createElement("div",{className:"text-center bg-white"},r.createElement("div",{className:"pt-4 h6"}," ",u),r.createElement("div",{className:"py-4 h4"},r.createElement("strong",null,p,l)),r.createElement("div",{className:"sep-product-select",style:{width:"90%",margin:"0 auto 0 auto",padding:"10px 0 10px 0"}})),n.renderitme("\u7c7b\u578b",u),n.renderitme("\u65f6\u95f4",r.createElement(d.EasyTime,{date:o})),n.renderitme("\u5355\u53f7",s),n.renderitme("\u72b6\u6001",h),n.renderitme("\u5907\u6ce8",c),r.createElement("div",{className:"text-center bg-white py-3"}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderitme",value:function(e,t){return r.createElement("div",{className:"bg-white row px-4 py-1 small"},r.createElement("div",{className:"col-3 text-muted"},e),r.createElement("div",{className:"col-9"},t))}}]),t}(d.VPage);!function(e){e[e.sum=0]="sum",e[e.pending=1]="pending"}(ka||(ka={})),function(e){e[e.A=1]="A",e[e.B=2]="B",e[e.C=3]="C"}(wa||(wa={}));var xa,Ea,Ca,Na,Sa=function(e){return!0===e?"text-primary":"text-muted"},Pa=function(e,t){return function(t){return r.createElement("div",{className:"w-100 small text-center"},r.createElement("div",{className:Sa(t)},e))}},Ta=(ba=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i))),Object(B.a)(n,"achievements",ya,Object(R.a)(n)),Object(B.a)(n,"tab_Status",ga,Object(R.a)(n)),n.tabContent=function(){return r.createElement(d.List,{items:n.achievements,item:{render:n.renderItem},none:"\u65e0\u6536\u76ca"})},n.page=Object(U.a)((function(){var e=n.controller.salesAmont.oneSaleVolume,t=[{name:"a",caption:Pa("\u9500\u552e\u989d",e),content:n.tabContent,onShown:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.tab_Status=ka.sum,e.next=3,n.loadAchievements();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{name:"b",caption:Pa("\u5f85\u5230\u6b3e",e),content:n.tabContent,onShown:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.tab_Status=ka.pending,e.next=3,n.loadAchievements();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}];return r.createElement(d.Page,{header:"\u6536\u76ca\u660e\u7ec6",headerClassName:M.pageHeaderCss},r.createElement(d.Tabs,{tabs:t,tabPosition:"top"}))})),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"open",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tab_Status=t,this.openPage(this.page),e.next=4,this.loadAchievements();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderItem",value:function(e,t){var n,a=e.date,i=e.orderAmount,c=e.orderno,s=e.state,u=e.mycustomer;n=1===s?"\u5df2\u8f6c\u5165":"\u5f85\u8f6c\u5165",u=u?Object(d.tv)(u,(function(e){return e.name})):"";var o=r.createElement(d.EasyDate,{date:a});return r.createElement("div",{className:"d-block"},r.createElement("div",null,r.createElement(d.LMR,{className:"px-3 pt-2 small",left:r.createElement("div",{className:"text-muted"},"\u8ba2\u5355\u4ea7\u751f\u65e5\u671f"),right:o}),r.createElement(d.LMR,{className:"px-3 small",left:r.createElement("div",{className:"text-muted"},"\u8ba2\u5355\u53f7"),right:c}),r.createElement(d.LMR,{className:"px-3 small",left:r.createElement("div",{className:"text-muted"},"\u5ba2\u6237"),right:u}),r.createElement(d.LMR,{className:"px-3 small",left:r.createElement("div",{className:"text-muted"}," \u8ba2\u5355\u91d1\u989d"),right:r.createElement("div",null,r.createElement("span",{className:"iconfont icon-huobiqiandaizijin",style:{fontSize:"15px",color:"#f6ad15"}}),i)}),r.createElement(d.LMR,{className:"px-3 pb-2 small",left:r.createElement("div",{className:"text-muted"},"\u72b6\u6001"),right:n})))}},{key:"loadAchievements",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.controller.searchAchievementDetail(1,this.tab_Status);case 2:n=e.sent,this.achievements.splice(0),(t=this.achievements).push.apply(t,Object(fa.a)(n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(d.VPage),ya=Object(D.a)(ba.prototype,"achievements",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ga=Object(D.a)(ba.prototype,"tab_Status",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ka.sum}}),ba),Aa=(d.PageItems,xa=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a))),Object(B.a)(n,"pageBalanceHistory",Ea,Object(R.a)(n)),Object(B.a)(n,"balanceHistory",Ca,Object(R.a)(n)),Object(B.a)(n,"salesAmont",Na,Object(R.a)(n)),n.getComputeAchievement=Object(s.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.ComputeAchievement.submit({});case 2:return t={user:n.user.id},e.next=5,n.uqs.salesTask.SearchAchievement.obj(t);case 5:(r=e.sent)&&(n.salesAmont=r);case 7:case"end":return e.stop()}}),e)}))),n.searchAchievementDetail=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={types:t,state:r},e.next=3,n.uqs.salesTask.SearchAchievementHistory.table(a);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.showAchievementDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getComputeAchievement();case 2:n.openVPage(Oa,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showAssistAchievementDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.openVPage(Ta,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showBalance=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.openVPage(ua,t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showVWithdrawal=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i,s,u,o,l,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.WebUserAccountMap.query({webuser:n.user.id});case 2:if(!((r=e.sent).ret.length>0)){e.next=14;break}if(a=r.ret[0],i=a.telephone,s=a.identityname,u=a.identitycard,o=a.identityicon,l=a.subbranchbank,p=a.bankaccountnumber,!(i&&s&&u&&o&&l&&p)){e.next=10;break}return e.next=8,n.openVPage(pa,t);case 8:e.next=12;break;case 10:return e.next=12,n.cApp.cMe.showAccount();case 12:e.next=16;break;case 14:return e.next=16,n.cApp.cMe.showAccount();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.submitWithdrawal=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={webUser:n.user,amount:t,currency:"1"},e.next=3,n.uqs.salesTask.Withdrawal.save("withdrawal",r);case 3:return a=e.sent,e.next=6,n.uqs.salesTask.Withdrawal.action(a.id,a.flow,a.state,"submit");case 6:return e.next=8,n.getComputeAchievement();case 8:n.salesAmont.waitWithdrawal+=parseFloat(t),n.openVPage(ha,t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.showBalanceHistory=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.searchBalanceHistory("");case 2:n.openVPage(da);case 3:case"end":return e.stop()}}),e)}))),n.showWithdrawalDetail=function(){var e=Object(s.a)(c.a.mark((function e(t){var r,a,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.Withdrawal.getSheet(t);case 2:return r=e.sent,e.next=5,n.uqs.salesTask.SearchWithdrawalStateQuery.query({withdrawal:t});case 5:a=e.sent,i=a.ret[0],s=i.comments,u=i.state,r.state=u,r.comments=s,n.openVPage(ja,r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.searchBalanceHistory=function(){var e=Object(s.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.uqs.salesTask.SearchBalanceHistory.query({ordertype:t});case 2:r=e.sent,n.balanceHistory=r.ret;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.nav.clear();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),t}(z),Ea=Object(D.a)(xa.prototype,"pageBalanceHistory",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ca=Object(D.a)(xa.prototype,"balanceHistory",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Na=Object(D.a)(xa.prototype,"salesAmont",[T.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{oneSaleVolume:0,twoSaleVolume:0,threeSaleVolume:0,oneAchievement:0,twoAchievement:0,threeAchievement:0,teamCount:0,customerCount:0,activeCustomerCount:0,totalOrderCount:0,totalReceivableAmount:0,totalaWithdrawal:0,waitWithdrawal:0}}}),xa),Ia=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).currentSalesRegion=void 0,n.currentLanguage=void 0,n.productCart=void 0,n.cSalesTask=void 0,n.cCustomer=void 0,n.cProduct=void 0,n.cMe=void 0,n.cTeam=void 0,n.cStart=void 0,n.cMessage=void 0,n.cCustomerUnit=void 0,n.cCoupon=void 0,n.cWebUser=void 0,n.cBalance=void 0,n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"newC",value:function(e){return new e(this)}},{key:"internalStart",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.common.SalesRegion.load(F.SALESREGION_CN);case 2:return this.currentSalesRegion=e.sent,e.next=5,this.uqs.common.Language.load(F.CHINESE);case 5:this.currentLanguage=e.sent,this.productCart=new sa,this.cCustomer=this.newC(xn),this.cProduct=this.newC(Ot),this.cSalesTask=this.newC(Vt),this.cMe=this.newC(wr),this.cTeam=this.newC(Vr),this.cStart=this.newC(Ir),this.cMessage=this.newC(Br),this.cCustomerUnit=this.newC(Wr),this.cCoupon=this.newC(ra),this.cWebUser=this.newC(ca),this.cBalance=this.newC(Aa),this.cStart.start(),d.nav.clear(),this.openVPage(I);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uqs",get:function(){return this._uqs}}]),t}(d.CAppBase),Fa=document.domain;(console.log(Fa),"assist.jkchemical.com"===Fa)?(document.title="\u9500\u552e\u52a9\u624b",document.querySelector('link[rel="shortcut icon"]').attributes.href.value="/assistlogo.png",d.nav.setSettings(L)):(document.title="\u8f7b\u4ee3\u7406",document.querySelector('link[rel="shortcut icon"]').attributes.href.value="/logo.png",d.nav.setSettings(V));var qa=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).onLogined=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.start)(Ia,V);case 2:case"end":return e.stop()}}),e)}))),n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.createElement(d.NavView,{onLogined:this.onLogined})}}]),t}(r.Component),Va=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function La(e){navigator.serviceWorker.register(e,{scope:"."}).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(158),n(159),n(160);a.render(r.createElement(qa,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");Va?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):La(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):La(e)}))}}()}],[[129,1,2]]]);
//# sourceMappingURL=main.a4b0bc00.chunk.js.map