{"version":3,"sources":["../node_modules/tonva/dist/entry/changePassword.js"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","ChangePasswordPage","_React$Component","_this","this","arguments","schema","name","type","maxLength","required","uiSchema","items","orgPassword","widget","label","placeholder","newPassword","newPassword1","submit","className","onSubmit","context","mark","_callee","_context$data","centerAppApi","wrap","_context","prev","data","setError","abrupt","undefined","changePassword","sent","replace","header","back","stop","key","onButtonClick","fieldLabelSize"],"mappings":"kHAAA,gJAQIA,EAAsC,SAAUC,EAASC,EAAYC,EAAGC,GAO1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GACjD,SAASC,EAAUC,GACjB,IACEC,EAAKN,EAAUO,KAAKF,IACpB,MAAOG,GACPL,EAAOK,IAIX,SAASC,EAASJ,GAChB,IACEC,EAAKN,EAAiB,MAAEK,IACxB,MAAOG,GACPL,EAAOK,IAIX,SAASF,EAAKI,GAvBhB,IAAeL,EAwBXK,EAAOC,KAAOT,EAAQQ,EAAOL,QAxBlBA,EAwBiCK,EAAOL,MAvB9CA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAClDA,EAAQG,OAsBkDO,KAAKR,EAAWK,GAG5EH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,YAOvDO,EAEX,SAAUC,GAGR,SAASD,IACP,IAAIE,EA0GJ,OAxGA,YAAgBC,KAAMH,IAEtBE,EAAQ,YAA2BC,KAAM,YAAgBH,GAAoBD,MAAMI,KAAMC,aACnFC,OAAS,CAAC,CACdC,KAAM,cACNC,KAAM,SACNC,UAAW,GACXC,UAAU,GACT,CACDH,KAAM,cACNC,KAAM,SACNC,UAAW,GACXC,UAAU,GACT,CACDH,KAAM,eACNC,KAAM,SACNC,UAAW,GACXC,UAAU,GACT,CACDH,KAAM,SACNC,KAAM,WAERL,EAAMQ,SAAW,CACfC,MAAO,CACLC,YAAa,CACXC,OAAQ,WACRC,MAAO,qBACPC,YAAa,8CAEfC,YAAa,CACXH,OAAQ,WACRC,MAAO,qBACPC,YAAa,8CAEfE,aAAc,CACZJ,OAAQ,WACRC,MAAO,2BACPC,YAAa,oDAEfG,OAAQ,CACNL,OAAQ,SACRC,MAAO,eACPK,UAAW,qBAKjBjB,EAAMkB,SAAW,SAAUd,EAAMe,GAC/B,OAAOvC,EAAU,YAAuBoB,QAAQ,OAAQ,EAExD,IAAoBoB,MAAK,SAASC,IAChC,IAAIC,EAAeZ,EAAaI,EAAaC,EAAcQ,EAE3D,OAAO,IAAoBC,MAAK,SAAkBC,GAChD,OACE,OAAQA,EAASC,KAAOD,EAASlC,MAC/B,KAAK,EAGH,GAFA+B,EAAgBH,EAAQQ,KAAMjB,EAAcY,EAAcZ,YAAaI,EAAcQ,EAAcR,YAAaC,EAAeO,EAAcP,aAEvID,IAAgBC,EAAe,CACnCU,EAASlC,KAAO,EAChB,MAIF,OADA4B,EAAQS,SAAS,eAAgB,sEAC1BH,EAASI,OAAO,UAEzB,KAAK,EAGH,OAFAN,EAAe,IAAI,IAAa,WAAOO,GACvCL,EAASlC,KAAO,EACTgC,EAAaQ,eAAe,CACjCrB,YAAaA,EACbI,YAAaA,IAGjB,KAAK,EAGH,IAAc,IAFRW,EAASO,KAEO,CACpBP,EAASlC,KAAO,GAChB,MAIF,OADA4B,EAAQS,SAAS,cAAe,kCACzBH,EAASI,OAAO,UAEzB,KAAK,GAOH,OANA,IAAII,QAAQ,gBAAoB,IAAM,CACpCC,OAAQ,2BACRC,KAAM,SACL,gBAAoB,MAAO,CAC5BlB,UAAW,qBACV,gDACIQ,EAASI,OAAO,UAEzB,KAAK,GACL,IAAK,MACH,OAAOJ,EAASW,UAGrBf,QAIArB,EAkBT,OA/HA,YAAUF,EAAoBC,GAgH9B,YAAaD,EAAoB,CAAC,CAChCuC,IAAK,SACLhD,MAAO,WACL,OAAO,gBAAoB,IAAM,CAC/B6C,OAAQ,4BACP,gBAAoB,IAAM,CAC3BjB,UAAW,MACXd,OAAQF,KAAKE,OACbK,SAAUP,KAAKO,SACf8B,cAAerC,KAAKiB,SACpBqB,eAAgB,SAKfzC,EAhIT,CAiIE","file":"static/js/4.500148a4.chunk.js","sourcesContent":["import _regeneratorRuntime from \"E:\\\\wangyancai.work.react_new\\\\taskmanagement\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _classCallCheck from \"E:\\\\wangyancai.work.react_new\\\\taskmanagement\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\wangyancai.work.react_new\\\\taskmanagement\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\wangyancai.work.react_new\\\\taskmanagement\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\wangyancai.work.react_new\\\\taskmanagement\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"E:\\\\wangyancai.work.react_new\\\\taskmanagement\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"E:\\\\wangyancai.work.react_new\\\\taskmanagement\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport * as React from 'react';\nimport { Page, Form, nav } from '../components';\nimport { CenterAppApi } from '../net';\nexport var ChangePasswordPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ChangePasswordPage, _React$Component);\n\n  function ChangePasswordPage() {\n    var _this;\n\n    _classCallCheck(this, ChangePasswordPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChangePasswordPage).apply(this, arguments));\n    _this.schema = [{\n      name: 'orgPassword',\n      type: 'string',\n      maxLength: 60,\n      required: true\n    }, {\n      name: 'newPassword',\n      type: 'string',\n      maxLength: 60,\n      required: true\n    }, {\n      name: 'newPassword1',\n      type: 'string',\n      maxLength: 60,\n      required: true\n    }, {\n      name: 'submit',\n      type: 'submit'\n    }];\n    _this.uiSchema = {\n      items: {\n        orgPassword: {\n          widget: 'password',\n          label: '原密码',\n          placeholder: '输入原来的密码'\n        },\n        newPassword: {\n          widget: 'password',\n          label: '新密码',\n          placeholder: '输入新设的密码'\n        },\n        newPassword1: {\n          widget: 'password',\n          label: '确认密码',\n          placeholder: '再次输入新设密码'\n        },\n        submit: {\n          widget: 'button',\n          label: '提交',\n          className: 'btn btn-primary'\n        }\n      }\n    };\n\n    _this.onSubmit = function (name, context) {\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _context$data, orgPassword, newPassword, newPassword1, centerAppApi, ret;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context$data = context.data, orgPassword = _context$data.orgPassword, newPassword = _context$data.newPassword, newPassword1 = _context$data.newPassword1;\n\n                if (!(newPassword !== newPassword1)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                context.setError('newPassword1', '新密码错误，请重新输入');\n                return _context.abrupt(\"return\");\n\n              case 4:\n                centerAppApi = new CenterAppApi('tv/', undefined);\n                _context.next = 7;\n                return centerAppApi.changePassword({\n                  orgPassword: orgPassword,\n                  newPassword: newPassword\n                });\n\n              case 7:\n                ret = _context.sent;\n\n                if (!(ret === false)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                context.setError('orgPassword', '原密码错误');\n                return _context.abrupt(\"return\");\n\n              case 11:\n                nav.replace(React.createElement(Page, {\n                  header: \"\\u4FEE\\u6539\\u5BC6\\u7801\",\n                  back: \"close\"\n                }, React.createElement(\"div\", {\n                  className: \"m-3  text-success\"\n                }, \"\\u5BC6\\u7801\\u4FEE\\u6539\\u6210\\u529F\\uFF01\")));\n                return _context.abrupt(\"return\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    };\n\n    return _this;\n  }\n\n  _createClass(ChangePasswordPage, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Page, {\n        header: \"\\u4FEE\\u6539\\u5BC6\\u7801\"\n      }, React.createElement(Form, {\n        className: \"m-3\",\n        schema: this.schema,\n        uiSchema: this.uiSchema,\n        onButtonClick: this.onSubmit,\n        fieldLabelSize: 2\n      }));\n    }\n  }]);\n\n  return ChangePasswordPage;\n}(React.Component);"],"sourceRoot":""}