{"version":3,"sources":["tonva/index.ts","tonva/components/index.ts","tonva/CApp/CVEntity.tsx","tonva/net/guestApi.ts","tonva/net/caller.ts","tonva/net/index.ts","tonva/components/nav.tsx","tonva/tool/cacheIds.ts","tonva/tool/localDb.ts","tonva/tool/env.ts","tonva/tool/local.ts","tonva/tool/index.ts","tonva/CApp/tools/jsonStringify.ts","tonva/CApp/tools/pureJsonContent.tsx","tonva/CApp/tools/index.ts","tonva/net/appBridge.ts","tonva/components/page.tsx","tonva/CApp/form/viewModel.tsx","tonva/net/httpChannel.ts","tonva/net/httpChannelUI.ts","tonva/net/uqApi.ts","tonva/CApp/link/cLink.tsx","tonva/CApp/link/index.ts","tonva/tool/uid.ts","tonva/net/wsChannel.ts","tonva/uq/entity.ts","tonva/uq/caller.ts","tonva/uq/tuid/idCache.ts","tonva/uq/tuid/tuid.ts","tonva/uq/tuid/tuidsCache.ts","tonva/uq/action.ts","tonva/uq/sheet.ts","tonva/uq/query.ts","tonva/uq/book.ts","tonva/uq/history.ts","tonva/uq/map.ts","tonva/uq/pending.ts","tonva/uq/tuid/reactBoxId.tsx","tonva/uq/uqMan.ts","tonva/uq/uqsMan.ts","tonva/uq/index.ts","tonva/components/edit/itemEdit.tsx","tonva/components/image.tsx","tonva/CApp/book/vBookMain.tsx","tonva/CApp/book/cBook.ts","tonva/CApp/cUq/vUq.tsx","tonva/CApp/cUq/reactBoxId.tsx","tonva/CApp/cUq/cUq.tsx","tonva/CApp/cUq/index.ts","tonva/tool/user.ts","tonva/net/host.ts","tonva/CApp/tuid/vTuidMain.tsx","tonva/CApp/tuid/vTuidEdit.tsx","tonva/CApp/tuid/vTuidSelect.tsx","tonva/CApp/tuid/vTuidInfo.tsx","tonva/CApp/tuid/vTuidView.tsx","tonva/CApp/tuid/pageItems.ts","tonva/CApp/tuid/vTuidList.tsx","tonva/CApp/tuid/cTuid.ts","tonva/CApp/tuid/index.tsx","tonva/components/res.ts","tonva/CApp/form/vBand.tsx","tonva/CApp/form/vSubmit.tsx","tonva/CApp/form/rule.ts","tonva/CApp/form/vField/vField.tsx","tonva/CApp/form/vField/vComputeField.tsx","tonva/CApp/form/vForm.tsx","tonva/CApp/form/vArr.tsx","tonva/CApp/form/vField/vTuidField.tsx","tonva/CApp/form/bandsBuilder.ts","tonva/CApp/form/vField/buildVmField.ts","tonva/CApp/form/index.ts","tonva/net/apiBase.ts","tonva/components/pageHeader.tsx","tonva/CApp/query/defaultRow.tsx","tonva/CApp/query/vQueryMain.tsx","tonva/CApp/query/vQuerySelect.tsx","tonva/CApp/query/cQuery.ts","tonva/CApp/query/index.ts","tonva/components/edit/imageItemEdit.tsx","tonva/entry/userApi.ts","tonva/tool/pageItems.ts","tonva/components/loading.tsx","tonva/components/resUploader.tsx","tonva/CApp/icons.tsx","tonva/CApp/ControllerUq.ts","tonva/CApp/sheet/vMain.tsx","tonva/CApp/sheet/vNew.tsx","tonva/CApp/sheet/vSheetView.tsx","tonva/CApp/sheet/vEdit.tsx","tonva/CApp/sheet/vSheetAction.tsx","tonva/CApp/sheet/vSchema.tsx","tonva/CApp/sheet/vArchives.tsx","tonva/CApp/sheet/vList.tsx","tonva/CApp/sheet/vArchived.tsx","tonva/CApp/sheet/vSaved.tsx","tonva/CApp/sheet/vSheet.tsx","tonva/CApp/sheet/vSheetProcessing.tsx","tonva/CApp/sheet/cSheet.ts","tonva/CApp/sheet/index.ts","tonva/components/simple/LMR.tsx","tonva/components/simple/Badge.tsx","tonva/components/simple/FA.tsx","tonva/components/simple/IconText.tsx","tonva/components/simple/Muted.tsx","tonva/components/simple/index.ts","tonva/CApp/map/vMain.tsx","tonva/CApp/map/inputValues.tsx","tonva/CApp/map/cMap.ts","tonva/CApp/map/index.ts","tonva/CApp/centerApi.ts","tonva/CApp/app/vApp.tsx","tonva/CApp/app/CApp.tsx","tonva/CApp/app/index.ts","tonva/CApp/pending/vPendingMain.tsx","tonva/CApp/pending/cPending.ts","tonva/CApp/pending/index.ts","tonva/CApp/history/vHistoryMain.tsx","tonva/CApp/history/cHistory.ts","tonva/CApp/history/index.ts","tonva/CApp/action/vActionMain.tsx","tonva/CApp/action/cAction.ts","tonva/CApp/action/index.ts","nv/mainSubs/index.ts","tonva/net/netToken.ts","tonva/components/VM.tsx","tonva/components/schema/index.ts","tonva/components/schema/toUiSelectItems.ts","tonva/components/rules/index.ts","tonva/components/dropDownActions/index.tsx","tonva/components/easyDate/index.tsx","tonva/components/media.tsx","tonva/components/searchBox.tsx","tonva/CApp/index.ts","nv/mainSubs/mainSubs.tsx","tonva/components/form/rules/index.ts","tonva/components/form/widgets/widget.tsx","tonva/components/form/widgets/textWidget.tsx","tonva/components/form/widgets/textareaWidget.tsx","tonva/components/form/widgets/passwordWidget.tsx","tonva/components/form/widgets/numberWidget.tsx","tonva/components/form/widgets/updownWidget.tsx","tonva/components/form/widgets/dateWidget.tsx","tonva/components/form/widgets/checkBoxWidget.tsx","tonva/components/form/widgets/selectWidget.tsx","tonva/components/form/widgets/radioWidget.tsx","tonva/components/form/widgets/rangeWidget.tsx","tonva/components/form/widgets/idWidget.tsx","tonva/components/form/widgets/unknown.tsx","tonva/components/form/widgets/buttonWidget.tsx","tonva/components/form/context.tsx","tonva/components/form/widgets/arrComponent.tsx","tonva/components/form/widgets/imageWidget.tsx","tonva/components/form/widgets/factory.tsx","tonva/components/form/formRes.ts","tonva/components/form/form.tsx","tonva/components/form/field.tsx","tonva/components/form/index.ts","tonva/app/centerApi.ts","tonva/app/vMain.tsx","tonva/app/CAppBase.ts","tonva/app/start.ts","tonva/app/CBase.ts","tonva/app/index.ts","tonva/components/edit/stringItemEdit.tsx","tonva/components/edit/radioItemEdit.tsx","tonva/components/edit/selectItemEdit.tsx","tonva/components/edit/idItemEdit.tsx","tonva/components/edit/edit.tsx","tonva/components/edit/index.tsx","tonva/components/list/base.tsx","tonva/components/list/clickable.tsx","tonva/components/list/static.tsx","tonva/components/list/selectable.tsx","tonva/components/list/index.tsx","tonva/components/propGrid/row.tsx","tonva/components/propGrid/propView.tsx","tonva/components/propGrid/PropGrid.tsx","tonva/components/propGrid/index.tsx","tonva/components/tabs/tabs.tsx","tonva/components/tabs/index.tsx","tonva/entry/meInfo.tsx","tonva/entry/index.ts","tonva/components/fetchErrorView.tsx","nv/images/logo.png","tonva/img/logo.svg","nv/tvs/common.tsx","tools/productImage.tsx","nv/tvs/product.tsx","nv/tvs/index.tsx","nv/tvs/salesTask.tsx","nv/tvs/warehouse.tsx","nv/ui/jnkTop.tsx","nv/ui/main.tsx","nv/CBase.ts","nv/mainSubs/loader.ts","nv/product/item.ts","nv/salestask/views/VMain.tsx","nv/salestask/types/share/VDetailTop.tsx","nv/salestask/types/share/VCreateTop.tsx","nv/salestask/types/share/VActionsBottom.tsx","nv/salestask/types/share/VDetailContent.tsx","nv/salestask/types/commonType/VFinish.tsx","nv/salestask/types/CType.tsx","nv/salestask/views/VCreateCheck.tsx","nv/salestask/types/commonType/VCreate.tsx","nv/salestask/types/commonType/CCommonType.tsx","nv/salestask/types/templets/legend/Marketing.tsx","nv/salestask/types/templets/legend/Trial.tsx","nv/salestask/types/templets/legend/BagOrderCancel.tsx","nv/salestask/types/templets/legend/BagOrder.tsx","nv/salestask/types/templets/legend/NotUptoStandard.tsx","nv/salestask/types/templets/legend/RepeatPurchase.tsx","nv/salestask/types/templets/orders/NonReagent.tsx","nv/salestask/types/templets/orders/Reagent.tsx","nv/salestask/types/templets/orders/Signback.tsx","nv/salestask/types/templets/qualify/CustomerDev.tsx","nv/salestask/types/templets/qualify/NewCustomer.tsx","nv/salestask/types/createTypes.ts","nv/salestask/types/templets/qualify/CustomerInfoDev.tsx","nv/salestask/types/templets/qualify/Graduation.tsx","nv/salestask/views/VSalesTaskExtension.tsx","nv/salestask/views/VTaskHistory.tsx","nv/salestask/type/VSelectType.tsx","nv/consts.ts","nv/salestask/type/VAi.tsx","nv/salestask/type/VAiDetail.tsx","nv/salestask/type/CSelectType.tsx","nv/salestask/model/tasks.ts","nv/salestask/views/VSalesTaskInvalid.tsx","nv/salestask/views/VEmployeeHistory.tsx","nv/salestask/views/VCustomerHistory.tsx","nv/salestask/type/VSelectBiz.tsx","nv/salestask/type/CSelectBiz.tsx","nv/tools/productImage.tsx","nv/salestask/views/VCreateProduct.tsx","nv/salestask/views/VProductDetail.tsx","nv/salestask/views/VCreateProject.tsx","nv/salestask/views/VProjectDetail.tsx","nv/product/VProductSelect.tsx","nv/product/VProductList.tsx","nv/product/VProductDetail.tsx","nv/product/VProductPackSelect.tsx","nv/product/CProduct.tsx","nv/salestask/views/VCreateProductPack.tsx","nv/salestask/views/VProductPackDetail.tsx","nv/salestask/CSalesTask.tsx","nv/address/VAddress.tsx","nv/address/CAddress.tsx","nv/customer/VCustomerSelect.tsx","nv/tools/inputValidations.ts","nv/customer/VCustomerDetail.tsx","nv/customer/VCustomerList.tsx","nv/customer/VCreateCustomer.tsx","nv/customer/VCreateCustomerFinish.tsx","nv/customer/VMyCustomerSelect.tsx","nv/customer/VCustomerSearch.tsx","nv/customer/CCustomer.tsx","nv/me/VMe.tsx","nv/me/VMeDetail.tsx","nv/me/VAchievement.tsx","nv/me/VSet.tsx","nv/me/VAchievementDetail.tsx","nv/me/CMe.tsx","nv/start/VStart.tsx","nv/start/VOK.tsx","nv/start/VError.tsx","nv/start/VAgencyClauseDetil.tsx","nv/start/CStart.tsx","nv/team/VTeam.tsx","nv/team/VTeamDetail.tsx","nv/team/CTeam.tsx","nv/message/VMessage.tsx","nv/message/CMessage.tsx","nv/customerunit/VCustomerUnitSelect.tsx","nv/customerunit/VCreateCustomerUnit.tsx","nv/customerunit/VCustomerUnitDetail.tsx","nv/customerunit/VCreateCustomerUnitFinish.tsx","nv/customerunit/CCustomerUnit.tsx","nv/coupon/VCouponList.tsx","nv/coupon/VCreateCoupon.tsx","nv/coupon/VCouponDetail.tsx","nv/coupon/VCreateCouponEnd.tsx","nv/coupon/CCoupon.tsx","nv/innercustomer/VInnerCustomerCall.tsx","nv/innercustomer/CInnerCustomer.tsx","nv/CApp.ts","nv/index.ts","App.tsx","registerServiceWorker.ts","index.tsx"],"names":["_tool__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","d","__webpack_exports__","_components__WEBPACK_IMPORTED_MODULE_2__","o","_entry__WEBPACK_IMPORTED_MODULE_3__","_CApp__WEBPACK_IMPORTED_MODULE_5__","_app__WEBPACK_IMPORTED_MODULE_6__","_nav__WEBPACK_IMPORTED_MODULE_0__","_page__WEBPACK_IMPORTED_MODULE_2__","_VM__WEBPACK_IMPORTED_MODULE_3__","_schema__WEBPACK_IMPORTED_MODULE_4__","_form__WEBPACK_IMPORTED_MODULE_5__","_edit__WEBPACK_IMPORTED_MODULE_6__","_res__WEBPACK_IMPORTED_MODULE_7__","_tabs__WEBPACK_IMPORTED_MODULE_8__","_image__WEBPACK_IMPORTED_MODULE_10__","_rules__WEBPACK_IMPORTED_MODULE_12__","_list__WEBPACK_IMPORTED_MODULE_13__","_easyDate__WEBPACK_IMPORTED_MODULE_15__","_propGrid__WEBPACK_IMPORTED_MODULE_16__","_simple__WEBPACK_IMPORTED_MODULE_17__","_searchBox__WEBPACK_IMPORTED_MODULE_19__","CEntity","_super","cUq","entity","ui","res","_this","call","this","Object","setPrototypeOf","x","name","typeName","label","icon","_icons__WEBPACK_IMPORTED_MODULE_3__","tslib__WEBPACK_IMPORTED_MODULE_0__","prototype","beforeStart","Promise","loadSchema","_a","sent","createForm","onSubmit","values","mode","options","buildFormOptions","ret","_form__WEBPACK_IMPORTED_MODULE_2__","setValues","none","submitCaption","arrNewCaption","arrEditCaption","arrTitleNewButton","fields","arrFields","undefined","new","formUI","form","arrs","inputs","buildInputs","buildFieldsInputs","_i","arrFields_1","length","arr","fields_1","items","arrFieldInputs","fields_2","field","_tuid","tuid","fieldUI","select","buildSelect","content","buildContent","placeHolder","getTuidPlaceHolder","ownerField","cTuidSelect","param","getValue","autoList","console","log","removeCeased","id","idFromItem","useId","cQuerySelect","queryName","VEntity","controller","defineProperty","_components__WEBPACK_IMPORTED_MODULE_1__","guestApi","GuestApi","tslib_es6","guest","get","user","token","unitFromName","unitName","unit","uqApi","Caller","params","method","buildParams","wsChannel","apiBase","appBridge","host","logMark","logs","RegExp","test","navigator","userAgent","stackKey","NavView","props","waitCount","upgradeUq","nav","start","isHistoryBack","clearError","setState","fetchError","back","bind","navBack","stack","state","wait","componentWillMount","window","addEventListener","componentDidMount","set","startWait","waitTimeHandler","global","setTimeout","endWait","clearTimeout","onError","err","error","unauthorized","showLogin","showUpgradeUq","uq","version","show","react__WEBPACK_IMPORTED_MODULE_1__","_page__WEBPACK_IMPORTED_MODULE_3__","header","className","onClick","view","disposer","clear","push","history","pushState","key","ceased","refresh","replace","item","pop","dispose","ceaseTop","level","p","i","len","backLevel","popAndDispose","popTo","find","v","topKey","regConfirmClose","confirmClose","confirm","self","top","postMessage","type","confirmBox","message","render","elWait","elError","_loading__WEBPACK_IMPORTED_MODULE_11__","_fetchErrorView__WEBPACK_IMPORTED_MODULE_5__","testing","style","lineHeight","_simple__WEBPACK_IMPORTED_MODULE_16__","map","index","visibility","Nav","local","_tool__WEBPACK_IMPORTED_MODULE_7__","lang","_res__WEBPACK_IMPORTED_MODULE_10__","district","language","culture","g","registerReceiveHandler","handler","ws","onWsReceiveAny","unregisterReceiveHandler","handlerId","endWsReceive","onReceive","msg","receive","getPredefinedUnitName","unitJsonPath","fetch","json","remove","loadPredefinedUnit","envUnit","NODE_ENV","PUBLIC_URL","REACT_APP_CENTER_HOST","REACT_APP_UNIT","Number","isDevelopment","_net__WEBPACK_IMPORTED_MODULE_8__","unitId","setSettings","settings","navSettings","href","document","location","toLowerCase","endsWith","substr","hash","pos","_net_appBridge__WEBPACK_IMPORTED_MODULE_6__","hashParam","substring","url","resHost","centerHost","resUrl","wsHost","setGuest","exHash","appInFrame_1","parent","_net_wsChannel__WEBPACK_IMPORTED_MODULE_9__","predefinedUnit","notLogined","logined","showAppView","onLogined","_net_netToken__WEBPACK_IMPORTED_MODULE_4__","saveLocalUser","callback","JSON","stringify","wsConnect","connect","loginTop","defaultTop","withBack","e","then","lv","loginView","default","showLogout","logout","logoutClear","changePassword","cp","ChangePasswordPage","navToApp","apiId","sheetType","sheetId","resolve","reject","sheet","includes","uh","src","navToSite","open","date","Date","getTime","toTimeString","logStep","step","mobx__WEBPACK_IMPORTED_MODULE_2__","CacheIds","maxCount","dict","Map","loadIds","ids","ids_1","loadId","setItem","shift","delete","_loadIds","_b","ids_2","_loadId","this_1","ids_3","mobx_module","__ls","_LocalStorage","getItem","localStorage","value","removeItem","LocalCache","text","parse","t","removeLocal","child","Local","caches","locals","k","keyForGet","keyForSet","sk","String","localDb_LocalArr","localDb_LocalMap","keyForRemove","removeAll","ks","LocalArr","split","saveIndex","join","lodash_default","a","indexOf","unshift","splice","LocalMap","max","forEach","l","isNaN","ls","testingTags","env","pn","pathname","testingTags_1","isTesting","localDb","local_LocalData","LocalData","pageItems","replacer","jsonStringify","PureJSONContent","react","uqTokens","logoutUqTokens","appsInFrame","appInFrame","AppInFrameClass","_unit","val","isBridged","initSubWin","_uqApi__WEBPACK_IMPORTED_MODULE_4__","onReceiveAppApiMessage","apiName","db","parts","uqOwner","uqName","onAppApiReturn","urlTest","action","uqTokenActions","realUrl","_host__WEBPACK_IMPORTED_MODULE_6__","getUrlOrTest","setAppInFrame","appHash","page","slice","getExHashPos","lastIndexOf","getExHash","appUrl","u","_tool_uid__WEBPACK_IMPORTED_MODULE_3__","evt","data","subWin","source","_wsChannel__WEBPACK_IMPORTED_MODULE_5__","el","getElementById","hidden","lodash__WEBPACK_IMPORTED_MODULE_1___default","clone","subFrameStarted","callCenterApiFromMessage","callId","result","bca","brideCenterApis","bridgeCenterApiReturn","buildAppUq","realUnit","getUnit","uqToken","at","opener","appUq","bridgeCenterApi","body","from","directCall","scrollTimeGap","ScrollView","apply","arguments","bottomTime","topTime","onScroll","onScrollTop","onScrollBottom","target","scrollTop","offsetHeight","scrollHeight","eachChild","c","direct","children","_$scroll","toString","Page","cur","tabs","tabStates","tabs_1","tab","lodash__WEBPACK_IMPORTED_MODULE_4___default","isSelected","isMounted","t0","load","onTabClick","tabs_2","onTouchStart","renderTabs","footer","right","keepHeader","headerClassName","tabPosition","img","redDotView","cn","title","redDot","classnames__WEBPACK_IMPORTED_MODULE_3___default","pageHeader","_pageHeader__WEBPACK_IMPORTED_MODULE_5__","center","sideBar","invisible","renderSingle","elFooter","mobx_react__WEBPACK_IMPORTED_MODULE_2__","ViewModel","JSONContent","RowContent","react__WEBPACK_IMPORTED_MODULE_0__","mobx_react__WEBPACK_IMPORTED_MODULE_1__","_tools__WEBPACK_IMPORTED_MODULE_2__","vm","methodsWithBody","httpChannel_HttpChannel","HttpChannel","hostUrl","apiToken","showError","timeout","tool","used","post","xcall","urlPrefix","caller","buildOptions","headers","path","h","append","encodeURI","innerFetch","innerFetchResult","keys","keys_1","put","buildError","channel","that","timeOutHandler_1","ok","statusText","ct","retJson","Array","isArray","retError","catch","error_1","startsWith","callFetch","buildHeaders","Headers","httpChannel_CenterHttpChannel","CenterHttpChannel","httpChannel_UqHttpChannel","UqHttpChannel","httpChannelUI_HttpChannelNavUI","HttpChannelNavUI","channelUIs","channelNoUIs","logoutApis","uqApi_channels","uqApi_UqApi","UqApi","basePath","access","showWaiting","init","getHttpChannel","channels","channelUI","loadAccess","acc","schema","queueModify","entities","uqApi_UnitxApi","UnitxApi","buildChannel","_c","uqApi_CenterAppApi","unitxUq","setCenterUrl","centerToken","centerChannel","centerChannelUI","loginedUserId","setCenterToken","userId","uqApi_CenterApiBase","CenterApiBase","uqTokensName","uqTokenApi","UqTokenApi","localMap","un","localCache","nowTick","Math","floor","now","tick","appUqParams","uqOwner_1","uqName_1","err_1","callCenterapi","CallCenterApi","appUqsName","CenterAppApi","uqs","appOwner","appName","appUqs","rAppOwner","rAppName","uqsPure","isOkCheckUqs","cachedId","cachedUqs","retId","retUqs","isMatch","checkUqs","components","loadAppUqs","centerAppApi","cLink_CLink","CLink","classnames_default","uid","ALPHABET","ID_LENGTH","rtn","charAt","random","subAppWindow","setSubAppWindow","win","postWsToTop","WsBase","handlerSeed","anyHandlers","msgHandlers","seed","onWsReceive","$type","_g","_f","wsBaseSeed","wsBridge","WsBridge","wsBaseId","WSChannel","WebSocket","onopen","ev","onerror","onmessage","wsMessage","onclose","close","event","postWsToSubApp","sendWs","netThis","send","entity_Entity","Entity","typeId","ver","fieldMaps","sys","cache","jName","fieldMap","returns","f","loadEntitySchema","setSchema","buildFieldsTuid","clearSchema","buildFieldTuid","buildArrFieldsTuid","schemaStringify","tuidFromName","fieldName","arrName","fn","getTuid","an","fieldArr","buildFieldsParams","arrs_1","arrResult","params_1","pa","rowResult","fields_3","buildDateTimeParam","getIdFromObj","dt","buildDateParam","toISOString","pack","packRow","arrs_2","packArr","escape","row","r","charCodeAt","data_1","cacheFieldsInValue","boxId","unpackTuidIdsOfFields","values_1","ln_1","unpackRow","unpackSheet","arrs_3","unpackArr","unpackReturns","arrs_4","ch0","ch","fLen","f_1","name_1","to","f_2","name_2","n","vals","caller_EntityCaller","EntityCaller","tries","request","innerRequest","innerCall","jsonResult","$uq","$modify","pullModify","xresult","retry","uqVersion","en","rebuildSchema","buildEntities","net","caller_ActionCaller","ActionCaller","caller_QueryQueryCaller","QueryQueryCaller","caller_QueryPageCaller","QueryPageCaller","pageStart","pageSize","$page","idCache_IdCache","IdCache","tuidLocal","queue","deep","waitingIds","divName","tuidInner","initLocalArr","localArr","defer","util","has","cacheTuids","findIndex","moveToHead","r_1","valueFromId","_id","resetCache","cacheValue","cacheIds","tuidValues","cacheIdValues","tuids","unpackTuidIds","tuids_1","tuidValue","cacheTuidFieldValues","modifyIds","loadTuidIdsOrLocal","localedValues","filter","assureObj","netIds","loadTuidIds","netRet","idCache_IdDivCache","IdDivCache","div","tuid_Tuid","Tuid","isImport","idName","buildTuidBox","tuid_TuidBox","obj","tuid_TuidInner","TuidInner","idCache","newVersion","divs","tuidDiv","tuid_TuidDiv","createBoxId","assureBox","tuid_IdsCaller","cached","loadMain","valuesText","tuid_GetCaller","arrValues","arrValues_1","mainFields","cacheFields","save","tuid_SaveCaller","search","searchArr","owner","tuid_SearchCaller","ret_1","loadArr","tuid_LoadArrCaller","saveArr","tuid_SaveArrCaller","posArr","order","tuid_ArrPosCaller","tuid_TuidCaller","TuidCaller","GetCaller","IdsCaller","SaveCaller","$id","transParams","arrParams","arrValues_2","arrValue","SearchCaller","LoadArrCaller","SaveArrCaller","ArrPosCaller","bid","$order","tuid_TuidImport","TuidImport","setFrom","hasDiv","TuidBox","showInfo","alert","TuidDiv","buildTuidDivBox","tuid_TuidBoxDiv","TuidBoxDiv","tuidsCache_TuidsCache","TuidsCache","clearCacheTimer","cacheTimer","modifyMax","localModifyMax","seconds","tuidCached","innerPullModify","tuidLists","group","modify","action_Action","Action","submit","action_ActionSubmitCaller","submitReturns","action_SubmitReturnsCaller","ActionSubmitCaller","SubmitReturnsCaller","sheet_Sheet","Sheet","states","build","ops","op","actions","createSheetState","discription","sheet_SaveCaller","app","flow","sheet_ActionCaller","unpack","brief","flows","getSheet","sheet_GetSheetCaller","getArchive","sheet_SheetArchiveCaller","getArchives","sheet_SheetArchivesCaller","getStateSheets","sheet_StateSheetsCaller","createPageStateItems","sheet_PageStateItems","stateSheetCount","sheet_StateSheetCountCaller","mySheets","sheet_MySheetsCaller","sheet_SheetCaller","SheetCaller","suffix","GetSheetCaller","SheetArchiveCaller","SheetArchivesCaller","StateSheetsCaller","StateSheetCountCaller","s","count","MySheetsCaller","PageStateItems","setPageStart","query_Query","Query","isPaged","resetPage","size","more","list","loadPage","startField","array","query","table","scalar","book_Book","Book","queryApiName","history_History","History","map_Map","queries","schemaFrom","actionSchema","newAction","querySchema","newQuery","add","map_AddCaller","del","map_DelCaller","all","map_AllCaller","map_PageCaller","map_QueryCaller","map_MapCaller","MapCaller","getCaller","AddCaller","map_MapAddCaller","DelCaller","map_MapDelCaller","AllCaller","map_MapAllCaller","PageCaller","map_MapPageCaller","QueryCaller","map_MapQueryCaller","MapAddCaller","MapDelCaller","MapAllCaller","MapPageCaller","MapQueryCaller","pending_Pending","Pending","reactBoxId_ReactBoxId","ReactBoxId","isUndefined","boxName","assure","index_module","nullUI","ttv","divObj","bi","logContent","boxIdContent","fieldDefaultValue","uqMan_UqMan","UqMan","uqData","tvs","sheets","books","maps","histories","pendings","createBoxIdFromTVs","sName","tuidArr","actionArr","sheetArr","queryArr","bookArr","mapArr","historyArr","pendingArr","clearTuids","localAccess","trim","tuidsCache","merge","book","pending","sheetFromTypeId","loadEntities","accesses","buildTuids","buildAccess","entityName","newTuid","fromType","fromObj","newBook","newMap","newHistory","newPending","newSheet","buildSheet","uqsMan_UQsMan","UQsMan","tonvaAppName","buildTVs","collection","localData","addUq","uqTVs","j","lj","uqsData","promiseInits","uqsData_1","uqFullName","lower","retErrors","promises","results","results_1","writeUQs","uqMan","setTuidImportsLocal","setInner","tuidImport","fromName","iName","ItemEdit","itemSchema","uiItem","isChanged","internalStart","end","internalEnd","_nav__WEBPACK_IMPORTED_MODULE_1__","verifyValue","rules","nv","newValue","rules_1","verifyRule","rule","Image","classnames__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_1___default","_nav__WEBPACK_IMPORTED_MODULE_2__","altImage","currentTarget","vBookMain_VBookMain","VBookMain","openPage","CVEntity","cBook_CBook","CBook","openVPage","vUq_VUq","VUq","isSysVisible","linkItem","cLink","lists","tuidLinks","mapLinks","sheetLinks","actionLinks","queryLinks","bookLinks","historyLinks","pendingLinks","react_default","createElement","Fragment","isVisible","CApp_link","cTuidMain","cMap","cSheet","cAction","cQuery","cBook","cHistory","cPending","TuidWithUIRes","tuidUR","tools","Tv","tv","lowerPropertyName","cUq_CUq","CUq","cApp","tuidURs","getUI","CTuidMain","CApp_tuid","CTuidEdit","CTuidList","CTuidSelect","CTuidInfo","CQuery","CApp_query","CQuerySelect","CMap","CAction","CSheet","CApp_sheet","CHistory","CApp_history","CPending","tonva_uq","getQuerySearch","tuidPlaceHolder","getNone","navSheet","sheetTypeId","startSheet","cSheetFromName","cActionFromName","cQueryFromName","cBookFromName","cMapFromName","cHistoryFromName","cPendingFromName","cTuidMainFromName","cTuidEditFromName","cTuidEdit","cTuidInfoFromName","cTuidInfo","cTuidSelectFromName","cFromName","entityType","linkFromName","link","ownerTuid","tUIs","tUI","cEntity","cTuidList","getTuidContent","getTuidDivContent","showTuid","showTuidDiv","decodeUserToken","decodeGuestToken","jwt_decode__WEBPACK_IMPORTED_MODULE_0__","jwt_decode__WEBPACK_IMPORTED_MODULE_0___default","hosts","centerhost","reshost","uqhost","unitxhost","uq-build","urlFromHost","resUrlFromHost","fetchOptions","Content-Type","Host","_tool__WEBPACK_IMPORTED_MODULE_1__","tryLocal","getCenterHost","centerUrlFromHost","centerWsFromHost","getResHost","debugHostUrl","hostArr","hostArr_1","host_1","fetchUrl","localCheck","host_2","hostValue","getUrlOrDebug","debugHost","urlDebug","fetchLocalCheck","Error","vTuidMain_VTuidMain","VTuidMain","onNew","onList","onSearch","entityRender","entityClick","newButton","placeholder","vTuidEdit_VTuidEdit","VTuidEdit","next","vForm","reset","closePage","finish","getValues","unique","unique_1","setError","isCalling","returnCall","openPageElement","editView","resetForm","vTuidSelect_VTuidSelect","VTuidSelect","mainView","initKey","onSearchMain","PageItems","renderMainRow","clickMainRow","before","searchMain","mainRowContent","ceasePage","showDiv","divView","renderDivRow","clickDivRow","divRowContent","showMain","rowContent","viewModel","ownerValue","getDivItems","divItems","vTuidInfo_VTuidInfo","VTuidInfo","VTuidView","buildForm","pageItems_TuidPageItems","TuidPageItems","vTuidList_VTuidList","VTuidList","onSelected","VTuidListBase","renderRow","clickRow","callOnSelected","rowKey","ownerId","cTuid_CTuid","CTuid","buildPageItems","first","cTuid_CTuidBase","CTuidBase","cUqFrom","cEditFrom","cInfoFrom","cSelectFrom","getLable","onEvent","onEdit","itemChanged","cTuid_CTuidInfo","edit","cTuid_CTuidMain","cTuid_CTuidEdit","cTuid_CTuidList","cTuid_CTuidSelect","CTuidDiv","resOptions","resLang","lodash__WEBPACK_IMPORTED_MODULE_0__","lodash__WEBPACK_IMPORTED_MODULE_0___default","_","languages","setResOptions","vBand_VBand","VBand","renderContent","setAddRow","addRow","getVFields","getVArr","getVSubmit","vBand_VFieldBand","VFieldBand","vField","vBand_VArrBand","VArrBand","vArr","vBand_VSubmitBand","VFieldsBand","vFields","VSubmitBand","vSubmit","vSubmit_VSubmit","VSubmit","onClickSubmit","isOk","disabled","caption","Rule","rule_RuleRequired","RuleRequired","check","defy","NaN","rule_RuleNum","RuleNum","rule_RuleInt","RuleInt","isInteger","rule_RuleMin","RuleMin","min","rule_RuleMax","RuleMax","vField_VField","VField","fieldRes","buildRules","required","null","checkRules","setValue","errors","str","FormMode","readonly","editable","vField_VInputControl","VUnknownField","VInputControl","renderError","ref","input","setInputValue","onFocus","onBlur","computeFields","onChange","inputGroup","ctrlCN","inputType","readOnly","maxLength","onKeyPress","RedMark","color","position","left","vField_VStringField","VStringField","KeyCode_Neg","KeyCode_Dot","vField_VNumberControl","VNumberControl","charCode","extraChars","onKeyDot","onKeyNeg","preventDefault","vField_VIntField","VIntField","vField_VDecField","VDecField","vField_VTextField","VTextField","vField_VDateTimeField","VDateTimeField","vField_VDateField","VDateField","vComputeField_VComputeField","VComputeField","vArr_VArr","VArr","ownerForm","onEditRow","rowPage","valueBoxs","onRowChanged","rowValues","$owner","renderItem","showRow","editRow","editSubmitCaption","internalAddRow","newSubmitCaption","button","paddingTop","paddingBottom","arrsRes","arrRes","newSubmit","editSubmit","arrUI","vForm_VForm","buttonStyle","textAlign","paddingLeft","paddingRight","overflow","vTuidField_VTuidField","VTuidField","idBox","bandsBuilder_BandsBuilder","BandsBuilder","layout","formItems","bandsOnFly","bandsFromLayout","resFromName","bands","bandsFromFields","bandFromArr","bandFromField","formItem","rfn","buildVField","VForm","vArrs","onFormSubmit","buildFormValues","buildBands","bandColl","bandsBuilder","band","vFields_1","getBand","_d","rows_1","_e","list_1","initValues","arrList","ctrl","buildFieldValues","valueFromFieldName","propName","buildObservableValues","refetchApi","ApiBase","PageHeader","logoutClick","navChange","hasBack","componentWillUnmount","openWindow","debugLogout","b","nick","role","rightView","DefaultRow","vQueryMain_VQueryMain","VQueryMain","replacePage","pageResult","queryResult","again","renderExtra","rightClose","queryRow","vQuerySelect_VQuerySelect","VQuerySelect","selectRow","vQuerySelect_QueryPageItems","QueryPageItems","cQuery_CQueryBase","CQueryBase","cQuery_CQuery","main","cQuery_CQuerySelect","ImageItemEdit","overSize","upload","resUploader","resId","_page__WEBPACK_IMPORTED_MODULE_7__","_resUploader__WEBPACK_IMPORTED_MODULE_4__","multiple","maxSize","border","padding","_image__WEBPACK_IMPORTED_MODULE_5__","_nav__WEBPACK_IMPORTED_MODULE_6__","mobx__WEBPACK_IMPORTED_MODULE_3__","userApi","UserApi","login","_tool_user__WEBPACK_IMPORTED_MODULE_2__","register","setVerify","account","checkVerify","verify","isExists","resetPassword","password","userSetProp","prop","_net__WEBPACK_IMPORTED_MODULE_1__","itemObservable","isFirst","loading","beforeLoad","loaded","allLoaded","firstSize","appendPosition","_items","mobx__WEBPACK_IMPORTED_MODULE_1__","scrollToTop","topDiv","_uid__WEBPACK_IMPORTED_MODULE_2__","scrollToBottom","bottomDiv","reverse","Loading","ResUploader","files","fileInput","FormData","file","abortController","AbortController","signal","onFilesChange","entityIcons","react__WEBPACK_IMPORTED_MODULE_0___default","fixWidth","ControllerUq","vMain_VSheetMain","VSheetMain","newClick","schemaClick","archivesClick","sheetStateClick","renderState","badge","getStateLabel","templet","statesCount","isDev","vNew_VSheetNew","VSheetNew","valuesWithBox","onSave","leftFlowStyle","width","vSheetView_VSheetView","VSheetView","flowRow","preState","sheetView","removed","sheetData","vEdit_VSheetEdit","VSheetEdit","saveSheet","CApp_form","vSheetAction_VSheetAction","VSheetAction","actionClick","acted","deleteClick","editClick","editSheet","actionButtons","startButtons","no","stateLabel","getActionLabel","backPage","vSchema_VSheetSchema","VSheetSchema","vArchives_VArchives","VArchives","archiveClick","processing","archiveRow","vList_VSheetList","VSheetList","rowClick","pageStateItems","listRow","stateName","vArchived_VArchived","VArchived","vSaved_VSheetSaved","VSheetSaved","restart","buttons","VSheet","vSheetProcessing_VSheetProcessing","VSheetProcessing","cSheet_CSheet","showSaved","loadStateSheetCount","onMessage","onSheet","me","$","sheetActPreState","sheetActState","changeStateCount","curState","delta","stateCount","sheetNew","sheetSaved","sheetEdit","sheetAction","showArchived","showAction","showProcessing","getSheetData","vCall","inBrief","getArchived","getStateUI","actionName","concat","sheetTitle","disc","LMR_LMR","Badge","badgeAlign","badgeVertical","LMR","cursor","FA_FA","FA","spin","pull","pulse","rotate","flip","inverse","classnames","IconText_IconText","StackedFA","IconText","iconClass","textClass","Muted","vMain_VMapMain","VMapMain","itemRender","ItemRow","valuesView","box","isLeaf","keyIndex","keyUI","keyUIs","keyContent","valuesContent","keyNone","isFrom","addClick","removeClick","inputValues_VInputValues","VInputValues","onValuesSubmit","cMap_MapItem","cMap_CMap","keysLen","keyFields","keysLast","idx","keyField","kn","searchParam","ki","kn_1","searchOnKey","arr1","rowIndex","createItem","confirmDelete","template","v0","q","retFields","newItem","addItem","tuidBox","callParam","centerApi","CenterApi","userAppUnits","vApp_VAppMain","VAppMain","appPage","appContent","cUqArr","vApp_VUnsupportedUnit","VUnsupportedUnit","userName","vApp_VUnitSelect","VUnitSelect","onRowClick","appUnits","vApp_VErrorsPage","VErrorsPage","vApp_VAppStartError","VAppStartError","CApp_CApp","CApp","cUqCollection","cImportUqs","getImportUq","getCUq","newCUq","uqUI","CApp_cUq","predefinedUnit_1","showUnsupport","appUnit","uqAppData","uqs_1","clearPrevPages","showMainPage","uqId","getCUqFromId","vPendingMain_VPendingMain","VPendingMain","cPending_CPending","vHistoryMain_VHistoryMain","VHistoryMain","cHistory_CHistory","vActionMain_VActionMain","VActionMain","resultPage","mainPage","cAction_CAction","_mainSubs__WEBPACK_IMPORTED_MODULE_0__","netToken","_uqApi__WEBPACK_IMPORTED_MODULE_0__","_wsChannel__WEBPACK_IMPORTED_MODULE_1__","Controller","_tool__WEBPACK_IMPORTED_MODULE_4__","onMessageReceive","receiveHandlerId","onDispose","vp","renderView","errorPage","_resolve_$","View","renderVm","replacePageElement","VPage","_schema__WEBPACK_IMPORTED_MODULE_0__","_uiSchema__WEBPACK_IMPORTED_MODULE_1__","_toUiSelectItems__WEBPACK_IMPORTED_MODULE_2__","toUiSelectItems","items_1","mobileRegex","emailRegex","DropdownActions","handleDocumentClick","dropdownOpen","contains","menu","toggle","removeEventListener","isRight","hasIcon","some","data-toggle","aria-expanded","classnames__WEBPACK_IMPORTED_MODULE_2___default","dropdown-menu","dropdown-menu-right","aria-hidden","renderDate","vDate","withTime","nDate","_date","month","year","hm","nowYear","hour","getHours","minute","getMinutes","getDate","getMonth","getFullYear","EasyDate","EasyTime","Media","disp","px","py","___WEBPACK_IMPORTED_MODULE_3__","SearchBox","allowEmptySearch","inputSize","lab","inputClassName","buttonText","defaultValue","_cUq__WEBPACK_IMPORTED_MODULE_2__","_formUI__WEBPACK_IMPORTED_MODULE_12__","ViewBase","ViewMainSubs","sub","renderSubs","subsContainer","renderSubItems","subViews","subs","model","ViewListMainSubs","rules_RuleCustom","RuleCustom","func","rules_RulePredefined","RulePredefined","rules_RuleRequired","rules_RuleNum","minMsg","maxMsg","number","checkMore","rules_RuleInt","integer","widget_Widget","Widget","context","fieldProps","contextErrors","onInputChange","changeValue","container","visible","inNode","requiredFlag","FieldContainer","renderBody","getUiItem","removeErrorWidget","addErrorWidget","setContextError","clearContextError","setElementValue","setDataValue","isChanging","initData","getReadOnly","getDisabled","getVisible","setReadOnly","setDisabled","setVisible","fromElement","onChanging","onChanged","prev","allowChange","fieldClass","FieldClass","elDiscription","hasError","discriptionClassName","uiLabel","renderTemplet","Templet","renderErrors","errorList","tag","textWidget_TextWidget","TextWidget","onKeyDown","internalOnKeyDown","keyCode","onEnter","blur","checkContextRules","clearErrors","textareaWidget_TextAreaWidget","TextAreaWidget","rows","passwordWidget_PasswordWidget","PasswordWidget","passwordWidget_UrlWidget","UrlWidget","passwordWidget_EmailWidget","EmailWidget","numberWidget_NumberWidget","NumberWidget","updownWidget_UpdownWidget","UpdownWidget","isValidKey","returnValue","dateWidget_DateWidget","DateWidget","dateWidget_DateTimeWidget","DateTimeWidget","dateWidget_TimeWidget","TimeWidget","dateWidget_MonthWidget","MonthWidget","checkBoxWidget_CheckBoxWidget","CheckBoxWidget","checked","trueValue","falseValue","defaultChecked","selectWidget_SelectWidget","SelectWidget","option","radioStyle","height","radioWidget_RadioWidget","RadioWidget","isRow","rangeWidget_RangeWidget","RangeWidget","idWidget_IdWidget","IdWidget","pickId","form-control","required-item","cursor-pointer","is-invalid","Unknown","dataType","uiType","dataTypes","buttonWidget_ButtonWidget","ButtonWidget","observerRender","widgetType","widget","ButtonClass","context_Context","Context","uiSchema","widgets","errorWidgets","getArrRowContexts","subContexts","arrRowContexts","itemName","buttonName","ew","onButtonClick","checkFieldRules","rowContext","clearContextErrors","clearWidgetsErrors","checkHasError","rowKeySeed","context_RowContext","RowContext","parentContext","arrSchema","uiArr","getItemSchema","itemSchemas","context_FormContext","FormContext","ContextContainer","ArrComponent","selectable","deletable","restorable","arrLabel","ArrContainer","RowContainer","RowSeperator","formSelectable","formDeletable","formRestorable","arrSelectable","arrDeletable","arrRestorable","ac","rc","rs","sep","typeofTemplet","factory","selectCheck","deleteIcon","$isSelected","$source","isDeleted","$isDeleted","editContainer","deleted","row-selected","Provider","imageWidget_ImageWidget","ImageWidget","imageItemEdit","imageSrc","components_image","widgetsFactory","textarea","datetime","time","email","updown","checkbox","image","checkboxes","radio","range","typeWidget","getTypeWidget","WidgetClass","formRes","zh","form_Form","Form","watch","formData","calcSelectOrDelete","DefaultContainer","DefaultFieldContainer","fieldLabelSize","labelView","fieldCol","DefaultFieldClass","DefaultButtonClass","DefaultRes","components_res","py-3","Container","formContext","initDataItem","arrItem","arrItems","arrDict","arrItems_1","val_1","arrItems_2","arrItemOperated","formArrVal","formArrVal_1","arrItems_3","beforeShow","buttonClick","FormField","contextType","vMain_VUnsupportedUnit","uqsMan","vMain_VUnitSelect","vMain_VErrorsPage","vMain_VStartError","VStartError","CAppBase_CAppBase","CAppBase","config","appConfig","CBase_CBase","CBase","newC","newSub","CBase_CSub","CSub","stringItemEdit_StringItemEdit","StringItemEdit","preValue","element","edit_itemEdit","radioItemEdit_RadioItemEdit","RadioItemEdit","selectItemEdit_SelectItemEdit","SelectItemEdit","idItemEdit_IdItemEdit","IdItemEdit","edit_Edit","Edit","defaultSepClassName","defaultRowContainerClassName","divValue","requireFlag","rowContainerClassName","stopEdit","onItemChanged","onItemClick","itemEdit","createItemEdit","topBorderClassName","bottomBorderClassName","sepClassName","topBorder","bottomBorder","elItems","base_ListBase","ListBase","clickable_Clickable","Clickable","static_Static","Static","selectable_Selectable","Selectable","buildItems","itemsArray","selectedItems","compare","comp","selectItem","retItems","selected","si","labelId","onSelect","obItem","flex","marginBottom","htmlFor","selectAll","unselectAll","anySelected","list_List","List","buildBase","listBase","waitingMore","isLoading","staticRow","PropRow","row_PropBorder","PropBorder","borderTop","row_PropGap","PropGap","w","backgroundColor","row_LabeledPropRow","LabeledPropRow","gridProps","col","labelFixLeft","bk","bg-white","renderLabel","renderProp","align","vAlign","alignValue","renderPropBody","renderPropContent","row_StringPropRow","StringPropRow","row_NumberPropRow","NumberPropRow","row_ListPropRow","ListPropRow","borderBottom","row_ComponentPropRow","ComponentPropRow","component","full","propView_PropView","PropView","buildRows","isGap","PropGrid_PropGrid","PropGrid","propView","tabs_Tab","Tab","_content","contentBuilder","TabCaptionComponent","tabs_Tabs","Tabs","tabClick","selectedTab","tabBack","contentBack","notify","showTab","tabName","display","notifyCircle","num","EditMeInfo","FetchErrorView","reApi","_net__WEBPACK_IMPORTED_MODULE_2__","errContent","module","exports","tvCountry","chineseName","imagePath","altimagePath","ProductImage","chemicalId","tonva","product_item","salesTask","desciption","customer","sourceid","common","address","country","province","city","county","currency","warehouse","product","productx","brand","description","CAS","purity","molecularFomula","molecularWeight","origin","imageUrl","packx","radiox","radioy","productCategory","jnkTop","logo_default","main_VHome","VHome","cSalesTask","cCustomer","cProduct","cMe","cMessage","faceTabs","calcSum","CBase_CUqBase","CUqBase","CBase_CUqSub","CUqSub","loader_Loader","Loader","schemaLoaded","loadSchemas","loadToData","item_LoaderBrand","LoaderBrand","brandId","Brand","item_LoaderProductChemical","LoaderProductChemical","productId","ProductX","brandLoader","ProductChemical","productChemical","chemical","packs","item_LoaderProductChemicalWithPrices","LoaderProductChemicalWithPrices","getagentPrices","agents","agentprice","getFutureDeliveryTimeDescription","salesRegionId","GetFutureDeliveryTime","salesRegion","futureDeliveryTime","minValue","maxValue","deliveryTimeDescription","uqProduct","productLoader","currentSalesRegion","currentLanguage","currentSalesRegionId","PriceX","prices","AgentPrice","agentprices","GetInventoryAllocation","promotion","GetPromotionPack","fd","futureDeliveryTimeDescription","inventoryAllocation","discount","promotionPrice","round","retail","pid","agentPrice","VMain_VMain","VMain","onSalesTaskClick","task","biz","remindDate","deadline","showTaskDetailEdit","onSalesTaskAdd","showSelectTaskType","renderSalesTask","bizName","priorty","cnFlag","my-1 mr-3","text-danger","text-info","getTaskIcon","tasks","tasksNow","dateTasksList","member","cnRowCustor","VDetailTop_right","VDetailTop_VDetailTop","VDetailTop","showCustomerDetail","showTaskHistory","VCreateTop_VCreateTop","VCreateTop","itemss","VActionsBottom_VActionsBottom","VActionsBottom","showTaskComplet","showTaskExtension","showTaskInvalid","VDetailContent_VDetailContent","VDetailContent","completuiSchema","getCommonType","taskCommonType","VFinish_VFinish","VFinish","onCompletionTask","onFormButtonClick","completSchema","fieldValues","finishTask","onCreateProduct","showPorductSelect","onCreateProject","showCreateProject","onCreateProjectPack","showPorductPackSelect","showTaskProductDetail","showTaskProjectDetail","showTaskProjectPackDetail","cssLMR","CType_CType","CType","renderDetailValues","renderDetailTop","renderDetailContent","renderDetailEdit","renderActionsBottom","renderComplet","renderCompletContent","renderCreateTop","showDetailFromId","taskid","loadTask","showDetailEdit","showComplet","showCreate","VCreateCheck_VCreateCheck","VCreateCheck","onAddTask","getCTaskType","onFinishTask","createAndFinishTask","VCreate_VCreate","VCreate","onAddSalesTask","createTask","CCommonType_CCommonType","CCommonType","showCrateCheck","Marketing","Trial","description2","BagOrderCancel","BagOrder","NotUptoStandard","RepeatPurchase","NonReagent","radioClassName","Reagent","Signback","CustomerDev","telephone","wechat","teacher","potential","research","NewCustomer","taskTypeConstuctors","reagent","nonreagent","signback","bagorder","bagordercancel","marketing","notuptostandard","repeatpurchase","trial","customerdev","customerinfodev","newcustomerdev","graduation","newcustomer","VSalesTaskExtension_schema","VSalesTaskExtension_SomeDay","SomeDay","dateVisible","day2","setDate","ss","onDateChange","toDateString","VSalesTaskExtension_VSalesTaskExtension","VSalesTaskExtension","resulttype","onExtensionTask","extensionTask","VTaskHistory_VTaskHistory","VTaskHistory","renderHistory","taskhistory","status","principal","VSelectType_VSelectType","VSelectType","renderList","onClickTaskType","selectTaskType","ai","newCustomer","aiClick","showSelectCustomerUnit","tasktypelist","consts","uqSalesTask","uqCustomer","uqCommon","uqPromotion","uqWarehouse","appIcon","headerClass","VAi_VAi","VAi","onClickJKTask","showJkTaskDetail","pageMyJKTask","VAiDetail_cnRow","VAiDetail_cnRowCustor","VAiDetail_VAiDetail","VAiDetail","onCancel","onCreate","rigth","CSelectType_PageMyJKTask","PageMyJKTask","searchQuery","CSelectType_CSelectType","CSelectType","cSalesTaskBiz","returnTaskType","SearchJKTask","searchCustomerRelation","ImportTask","customername","organization","organizationName","searchTaskByKey","getCustomerOrganization","customerId","relesions","org","Organization","customerid","searchByKey","TaskType","tasks_Tasks","Tasks","taskArr","taskArr_1","postPone","dateTasks","VSalesTaskInvalid_schema","VSalesTaskInvalid_VSalesTaskInvalid","VSalesTaskInvalid","onInvalidTask","salestask","VEmployeeHistory_VEmployeeHistory","VEmployeeHistory","vs","onTaskClick","VCustomerHistory_VCustomerHistory","VCustomerHistory","VSelectBiz_VSelectBiz","VSelectBiz","onClickTaskBiz","selectTaskBiz","taskType","taskBizs","CSelectBiz_CSelectBiz","CSelectBiz","taskbiz","showSelectCustomer","returnTaskBiz","getBizFromTaskTypeId","TaskBiz","productImage_imagePath","productImage_altimagePath","productImage_ProductImage","VCreateProduct_schema","VCreateProduct_VCreateProduct","VCreateProduct","note","onCreateTaskProduct","createproduct","createTaskProduct","renderBrand","productPropItem","productItem","descriptionC","VProductDetail_VProductDetail","VProductDetail","products","VCreateProject_schema","VCreateProject_VCreateProject","VCreateProject","onCreateTaskProject","createTaskProject","VProjectDetail_VProjectDetail","VProjectDetail","project","projects","VProductSelect_VProductSelect","VProductSelect","renderProduct","pageProduct","onSelectItem","showPorductSelectDetail","returnProduct","VProductList_VProductList","VProductList","showProductDetail","product_VProductDetail_schema","product_VProductDetail_VProductDetail","arrTemplet","agent","price","retailUI","deliveryTimeUI","quantity","renderPack","viewProduct","mainSubs","VProductPackSelect_VProductPackSelect","VProductPackSelect","showPorductPackSelectDetail","CProduct_PageProduct","PageProduct","searchProductQuery","seq","CProduct_CProduct","CProduct","SearchProduct","keyWord","showProductSelect","showProductPackSelect","VCreateProductPack_schema","VCreateProductPack_VCreateProductPack","VCreateProductPack","onChangePack","addArr","removeArr","onCreateTaskProductPack","createTaskProjectPack","VProductPackDetail_VProductPackDetail","VProductPackDetail","CSalesTask_CSalesTask","PageSalesTask","searchsalestskQuery","CSalesTask","taskTypes","SearchTask","Task","searchTaskCompletion","SearchTaskCompletion","SearchHistoryTask","showEmployeeHistory","SearchHistoryTaskByEmployee","showCustomerHistory","SearchHistoryTaskByCustomer","tt","createTasks","newtask","CompletionTask","productid","CreateTaskProduct","SearchTaskProduct","CreateTaskProductPack","SearchTaskProductPack","CreateTaskProject","SearchTaskProject","cSelectType","bizIds","sourceID","sourceType","sourceNo","AddTask","isLogined","loginCallback","createTaskTypes","CompletionCustomerInfoTask","ExtensionTask","VAddress_VAddress","VAddress","provinces","renderPCC","onProvinceClick","pcc","marginRight","provinceId","getProvinceCities","cities","onCityClick","saveAddress","cityId","getCityCounties","counties","onCountyClick","countyId","getCountryProvince","CAddress_CAddress","CAddress","countryId","GetCountryProvinces","GetProvinceCities","GetCityCounties","Address","newAddress","addressId","VCustomerSelect_VCustomerSelect","VCustomerSelect","onClickCustomer","selectCustomer","pageCustomer","renderCustomer","pageCustomerSearch","mobileValidation","emailValidation","nameValidation","VCustomerDetail_schema","VCustomerDetail_VCustomerDetail","VCustomerDetail","gender","birthDay","addressString","updateMyCustomer","cCustomerUnit","showCustomerUnitDetail","showInnerCustomerSelect","IsOccupy","innerCustomer","code","VCustomerList_VCustomerList","VCustomerList","showCustomerSearch","showCustomerSearchByUnit","tit","occupy","VCreateCustomer_schema","VCreateCustomer_VCreateCustomer","VCreateCustomer","Name","Salutation","Gender","BirthDay","createMyCustomer","customerunit","VCreateCustomerFinish_VCreateCustomerFinish","VCreateCustomerFinish","comeBack","VMyCustomerSelect_VMyCustomerSelect","VMyCustomerSelect","returnCustomer","temp","VCustomerSearch_VCustomerSearch","VCustomerSearch","searchCustomerByKey","CCustomer_PageMyCustomer","PageMyCustomer","searchCustomerQuery","CCustomer_PageMyCustomerCearch","PageMyCustomerCearch","CCustomer_CCustomer","CCustomer","searchMyCustomer","loadCustomerDetail","MyCustomer","mycustomer","MyCustomerIsOccupy","CustomerMyCustomerMap","showCreateCustomer","par","firstName","lastName","salutation","CreateMyCustomer","cWebUser","createWebUserMyCustomerMap","UpateCustomerMyCustomerMap","pickAddress","VMe_VMe","VMe","cCoupon","showSet","salesAmont","showCreateCoupon","achievement","meInfo","inviteCode","onComputeAchievement","userSpan","showMeDetail","showMessage","showTeam","pointer","onshowMeDetail","onshowCustomerSearch","teamCount","customerCount","activeCustomerCount","oneAchievement","twoAchievement","threeAchievement","divTag","showAchievementDetail","toFixed","VMeDetail_VMeDetail","VMeDetail","VAchievement_rowCom","iconName","iconColor","VAchievement_VAchievement","VAchievement","oneSaleVolume","twoSaleVolume","threeSaleVolume","VSet_VSet","VSet","VAchievementDetail_color","tabCaption","amount","VAchievementDetail_VAchievementDetail","VAchievementDetail","achievementsA","searchAchievementDetail","achievementsB","achievementsC","statusShow","Amount","CMe_CMe","CMe","SearchPosition","p1","p2","searchPosition","cTeam","showAchievement","ComputeAchievement","SearchAchievement","types","SearchAchievementHistory","VStart_schema","VStart_VStart","VStart","invitacode","onCreatePosition","createPosition","VOK_VOK","VOK","startApp","VError_VError","VError","VAgencyClauseDetil_VAgencyClauseDetil","VAgencyClauseDetil","CStart_CStart","CStart","onAgreeAgencyClause","showAgencyClauseDetil","isPosition","CreatePosition","succeed","$user","VTeam_VTeam","VTeam","team","showPeerDetail","codes","assigned","VTeamDetail_VTeamDetail","VTeamDetail","assigend","savePeerAssigned","peer","CTeam_CTeam","CTeam","searchTeam","SearchTeam","Assigned","SavePeerAssigned","VMessage_VMessage","VMessage","CMessage_PageMessage","PageMessage","CMessage_CMessage","CMessage","searchNowMessage","messages","updateNowMessage","UpdateNowMessage","searchMessage","pageMessage","VCustomerUnitSelect_VCustomerUnitSelect","VCustomerUnitSelect","onClickRow","pageUnit","showCreateUnit","VCreateCustomerUnit_schema","VCreateCustomerUnit_VCreateCustomerUnit","VCreateCustomerUnit","createMyCustomerUnit","VCustomerUnitDetail_schema","VCustomerUnitDetail_VCustomerUnitDetail","VCustomerUnitDetail","updateMyCustomerUnit","VCreateCustomerUnitFinish_VCreateCustomerUnitFinish","VCreateCustomerUnitFinish","showresult","CCustomerUnit_PageUnit","PageUnit","CCustomerUnit_CCustomerUnit","CCustomerUnit","searchMyCustomerUnit","CreateMyCustomerUnit","MyCustomerUnit","showCustomerUnitEdit","VCouponList_VCouponList","VCouponList","coupon","showCouponDetail","validitydate","preferential","bcenter","bleft","discountShow","aleft","aright","pageCoupon","VCreateCoupon_schema","VCreateCoupon_ValidityDate","ValidityDate","VCreateCoupon_Discount","Discount","parseInt","VCreateCoupon_VCreateCoupon","VCreateCoupon","showTip","showAddCouponCustomer","createCoupon","VCouponDetail_VCouponDetail","VCouponDetail","isValid","invalidCoupon","renderisValid","VCreateCouponEnd_VCreateCouponEnd","VCreateCouponEnd","CCoupon_PageCoupon","PageCoupon","CCoupon_CCoupon","CCoupon","SearchCoupon","couponid","Coupon","IsCanUseCoupon","webuser","aa","CreateCoupon","tuidCoupon","addCouponCustomer","AddCouponCustomer","customers","VInnerCustomerCall_VInnerCustomerCall","VInnerCustomerCall","returnWebUser","pageWebUser","CInnerCustomer_PageCWebUser","PageCWebUser","CInnerCustomer_CInnerCustomer","CInnerCustomer","SearchWebUser","cStart","SalesRegion","Language","src_App_0","App","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","react_dom","URL","response","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.68051855.chunk.js","sourcesContent":["export * from './tool';\r\nexport * from './net';\r\nexport * from './components';\r\nexport * from './entry';\r\nexport * from './uq';\r\nexport * from './CApp';\r\nexport * from './app';\r\n","export * from './nav';\r\nexport * from './pageHeader';\r\nexport * from './page';\r\nexport * from './VM';\r\nexport * from './schema';\r\nexport * from './form';\r\nexport * from './edit';\r\nexport * from './res';\r\nexport * from './tabs';\r\nexport * from './loading';\r\nexport * from './image';\r\nexport * from './resUploader';\r\nexport * from './rules';\r\nexport * from './list';\r\nexport * from './dropDownActions';\r\nexport * from './easyDate';\r\nexport * from './propGrid';\r\nexport * from './simple';\r\nexport * from './media';\r\nexport * from './searchBox';\r\n","import * as React from 'react';\r\nimport { Controller, VPage, View } from '../components';\r\nimport { Entity, Field } from '../uq';\r\nimport { CUq } from './cUq/cUq';\r\nimport { VForm, FieldInputs, FieldCall, FormOptions, FormMode } from './form';\r\nimport { CQuerySelect } from './query';\r\nimport { FormUI, FieldTuidUI } from './formUI';\r\nimport { entityIcons } from './icons';\r\nimport { ControllerUq } from './ControllerUq';\r\n\r\nexport interface EntityUI {\r\n    form?: FormUI;\r\n}\r\n\r\nexport abstract class CEntity<T extends Entity, UI extends EntityUI> extends ControllerUq {\r\n    constructor(cUq: CUq, entity: T, ui: UI, res: any) {\r\n        super(cUq, res);\r\n        Object.setPrototypeOf(this.x, cUq.x);\r\n        let {name, typeName} = entity;\r\n        this.entity = entity;\r\n        this.ui = ui; // || entityUI.ui;\r\n        this.label = this.res.label || name;\r\n        this.icon = entityIcons[typeName];\r\n    }\r\n    readonly entity: T;\r\n    readonly ui: UI;\r\n\r\n    protected async beforeStart():Promise<boolean> {\r\n        //if (await super.beforeStart() === false) return false;\r\n        await this.entity.loadSchema();\r\n        return true;\r\n    }\r\n\r\n    createForm(onSubmit:()=>Promise<void>, values?:any, mode?:FormMode) {\r\n        let options = this.buildFormOptions(mode);\r\n        let ret = new VForm(options, onSubmit);\r\n        ret.setValues(values);\r\n        return ret;\r\n    }\r\n\r\n    private buildFormOptions(mode?:FormMode):FormOptions {\r\n        let {fields, arrFields} = this.entity;\r\n        let none, submitCaption, arrNewCaption, arrEditCaption, arrTitleNewButton;\r\n        if (this.res !== undefined) {\r\n            none = this.res['none'];\r\n            submitCaption = this.res['submit'];\r\n            arrNewCaption = this.res['arrNew'];\r\n            arrEditCaption = this.res['arrEdit'];\r\n            arrTitleNewButton = this.res['arrTitleNewButton'];\r\n        }\r\n        if (none === undefined) {\r\n            none = this.cUq.res['none'] || 'none';\r\n        }\r\n        if (submitCaption === undefined)\r\n            submitCaption = this.cUq.res['submit'] || 'Submit';\r\n        if (arrNewCaption === undefined)\r\n            arrNewCaption = this.cUq.res['arrNew'] || 'New';\r\n        if (arrEditCaption === undefined)\r\n            arrEditCaption = this.cUq.res['arrEdit'] || 'Edit';\r\n        if (arrTitleNewButton === undefined)\r\n        arrTitleNewButton = this.cUq.res['arrTitleNewButton'];\r\n        if (mode === undefined) mode = FormMode.new;\r\n        let formUI = this.ui.form;\r\n        let ret:FormOptions = {\r\n            fields: fields,\r\n            arrs: arrFields,\r\n            ui: formUI,\r\n            res: this.res || {},\r\n            inputs: this.buildInputs(formUI),\r\n            none: none,\r\n            submitCaption: submitCaption,\r\n            arrNewCaption: arrNewCaption,\r\n            arrEditCaption: arrEditCaption,\r\n            arrTitleNewButton: arrTitleNewButton,\r\n            mode: mode,\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    private buildInputs(formUI: FormUI):FieldInputs {\r\n        let {fields, arrFields} = this.entity;\r\n        let ret:FieldInputs = {};\r\n        this.buildFieldsInputs(ret, fields, undefined, formUI);\r\n        if (arrFields !== undefined) {\r\n            for (let arr of arrFields) {\r\n                let {name, fields} = arr;\r\n                let items = formUI && formUI.items;\r\n                this.buildFieldsInputs(ret, fields, name, items && items[name] as FormUI);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    private buildFieldsInputs(ret:FieldInputs, fields:Field[], arr:string, formUI: FormUI) {\r\n        if (arr !== undefined) {\r\n            let arrFieldInputs = ret[arr];\r\n            if (arrFieldInputs === undefined) {\r\n                ret[arr] = arrFieldInputs = {};\r\n                ret = arrFieldInputs;\r\n            }\r\n        }\r\n        for (let field of fields) {\r\n            let {name, _tuid} = field;\r\n            if (_tuid === undefined) continue;\r\n            let {tuid} = _tuid;\r\n            let fieldUI = formUI && formUI.items && formUI.items[name] as FieldTuidUI;\r\n            ret[name] = {\r\n                select: this.buildSelect(field, arr, fieldUI),\r\n                content: this.buildContent(field, arr),\r\n                placeHolder: this.cUq.getTuidPlaceHolder(tuid),\r\n            };\r\n        }\r\n    }\r\n\r\n    protected buildSelect(field:Field, arr:string, fieldUI: FieldTuidUI):FieldCall {\r\n        return async (form:VForm, field:Field, values:any):Promise<any> => {\r\n            let {_tuid } = field;\r\n            let {tuid, ownerField} = _tuid;\r\n            let cTuidSelect = undefined; // await tuid.cSelectFrom();\r\n            let param:any = undefined;\r\n            if (ownerField !== undefined) param = form.getValue(ownerField.name);\r\n            if (fieldUI && fieldUI.autoList === true) {\r\n                console.log('select search set param=empty string');\r\n                param = '';\r\n            }\r\n            let ret = await cTuidSelect.call(param);\r\n            cTuidSelect.removeCeased(); // 清除已经废弃的顶部页面\r\n            if (ret === undefined) return undefined;\r\n            let id = cTuidSelect.idFromItem(ret);\r\n            _tuid.useId(id);\r\n            return id;\r\n        };\r\n    }\r\n\r\n    protected buildContent(field:Field, arr:string): React.StatelessComponent<any> {\r\n        return;\r\n    }\r\n\r\n    cQuerySelect(queryName:string):CQuerySelect {\r\n        return this.cUq.cQuerySelect(queryName);\r\n    }\r\n}\r\n\r\nexport abstract class VEntity<T extends Entity, UI extends EntityUI, C extends CEntity<T, UI>> extends VPage<C> {\r\n    protected readonly entity: T;\r\n    protected readonly ui: UI;\r\n    constructor(controller: C) {\r\n        super(controller);\r\n        this.entity = controller.entity;\r\n        this.ui = controller.ui;\r\n    }\r\n\r\n    get label():string {return this.controller.label}\r\n\r\n    //private _form_$: VForm;\r\n    protected createForm(onSubmit:()=>Promise<void>, values?:any, mode?:FormMode): VForm {\r\n        //if (this._form_$ !== undefined) return this._form_$;\r\n        return this.controller.createForm(onSubmit, values, mode);\r\n    }\r\n}\r\n","import { decodeGuestToken } from '../tool/user';\r\nimport { CenterApiBase } from './uqApi';\r\n\r\nexport class GuestApi extends CenterApiBase {\r\n    async guest(): Promise<any> {\r\n        //let guest = nav.local.guest.get();\r\n        let ret = await this.get('', {});\r\n        switch (typeof ret) {\r\n            default: return;\r\n            case 'string': return decodeGuestToken(ret);\r\n            case 'object':\r\n                let guest = decodeGuestToken(ret.token);\r\n                return guest;\r\n        }\r\n    }\r\n\r\n    async unitFromName(unitName:string): Promise<number> {\r\n        let ret = await this.get(unitName);\r\n        return ret && ret.unit;\r\n    }\r\n}\r\n\r\nexport const guestApi = new GuestApi('tv/guest/', undefined);\r\n","export abstract class Caller<T> {\r\n    protected readonly params: T;\r\n    constructor(params: T) {\r\n        this.params = params;\r\n    }\r\n    buildParams():any {return this.params;}\r\n    method: string  = 'POST';\r\n    abstract get path(): string;\r\n    get headers(): {[header:string]: string} {return undefined}\r\n}\r\n","export {WSChannel, wsBridge, postWsToTop} from './wsChannel';\r\nexport * from './apiBase';\r\nexport * from './guestApi';\r\nexport * from './caller';\r\nexport * from './uqApi';\r\nexport {appInFrame, isBridged, getExHash} from './appBridge';\r\nexport * from './host';\r\n","import * as React from 'react';\r\nimport {observable, has} from 'mobx';\r\nimport {User, Guest/*, UserInNav*/} from '../tool/user';\r\nimport {Page} from './page';\r\nimport {netToken} from '../net/netToken';\r\nimport FetchErrorView from './fetchErrorView';\r\nimport {FetchError} from '../net/fetchError';\r\nimport {appUrl, setAppInFrame, getExHash, getExHashPos} from '../net/appBridge';\r\nimport {LocalData, env} from '../tool';\r\nimport {guestApi, logoutApis, setCenterUrl, setCenterToken, WSChannel, appInFrame, host, resUrlFromHost} from '../net';\r\nimport { WsBase, wsBridge } from '../net/wsChannel';\r\nimport { resOptions } from './res';\r\nimport { Loading } from './loading';\r\n\r\nimport 'font-awesome/css/font-awesome.min.css';\r\nimport '../css/va-form.css';\r\nimport '../css/va.css';\r\nimport '../css/animation.css';\r\nimport { FA } from './simple';\r\n\r\nconst regEx = new RegExp('Android|webOS|iPhone|iPad|' +\r\n    'BlackBerry|Windows Phone|'  +\r\n    'Opera Mini|IEMobile|Mobile' , \r\n    'i');\r\nconst isMobile = regEx.test(navigator.userAgent);\r\n/*\r\nexport const mobileHeaderStyle = isMobile? {\r\n    minHeight:  '3em'\r\n} : undefined;\r\n*/\r\nconst logo = require('../img/logo.svg');\r\nlet logMark: number;\r\nconst logs:string[] = [];\r\n\r\nexport interface Props //extends React.Props<Nav>\r\n{\r\n    //view: JSX.Element | (()=>JSX.Element);\r\n    //start?: ()=>Promise<void>;\r\n    onLogined: ()=>Promise<void>;\r\n    notLogined?: ()=>Promise<void>;\r\n};\r\nlet stackKey = 1;\r\nexport interface StackItem {\r\n    key: number;\r\n    view: JSX.Element;\r\n    ceased: boolean;\r\n    confirmClose?: ()=>Promise<boolean>;\r\n    disposer?: ()=>void;\r\n}\r\nexport interface NavViewState {\r\n    stack: StackItem[];\r\n    wait: 0|1|2;\r\n    fetchError: FetchError\r\n}\r\n\r\nexport class NavView extends React.Component<Props, NavViewState> {\r\n    private stack: StackItem[];\r\n    private htmlTitle: string;\r\n    private waitCount: number = 0;\r\n    private waitTimeHandler?: NodeJS.Timer;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.back = this.back.bind(this);\r\n        this.navBack = this.navBack.bind(this);\r\n        this.stack = [];\r\n        this.state = {\r\n            stack: this.stack,\r\n            wait: 0,\r\n            fetchError: undefined\r\n        };\r\n    }\r\n    async componentWillMount() {\r\n        window.addEventListener('popstate', this.navBack);\r\n    }\r\n\r\n    async componentDidMount()\r\n    {\r\n        nav.set(this);\r\n        /*\r\n        let start = this.props.start;\r\n        if (start !== undefined) {\r\n            await start();\r\n        }\r\n        else {\r\n        */\r\n            await nav.start();\r\n        //}\r\n    }\r\n\r\n    get level(): number {\r\n        return this.stack.length;\r\n    }\r\n\r\n    startWait() {\r\n        if (this.waitCount === 0) {\r\n            this.setState({wait: 1});\r\n            this.waitTimeHandler = global.setTimeout(\r\n                () => {\r\n                    this.waitTimeHandler = undefined;\r\n                    this.setState({wait: 2});\r\n                },\r\n                1000) as NodeJS.Timer;\r\n        }\r\n        ++this.waitCount;\r\n        this.setState({\r\n            fetchError: undefined,\r\n        });\r\n    }\r\n\r\n    endWait() {\r\n        setTimeout(() => {\r\n            /*\r\n            this.setState({\r\n                fetchError: undefined,\r\n            });*/\r\n            --this.waitCount;\r\n            if (this.waitCount === 0) {\r\n                if (this.waitTimeHandler !== undefined) {\r\n                    clearTimeout(this.waitTimeHandler);\r\n                    this.waitTimeHandler = undefined;\r\n                }\r\n                this.setState({wait: 0});\r\n            }\r\n        },100);\r\n    }\r\n\r\n    async onError(fetchError: FetchError)\r\n    {\r\n        let err = fetchError.error;\r\n        if (err !== undefined && err.unauthorized === true) {\r\n            await nav.showLogin(undefined);\r\n            return;\r\n        }\r\n        this.setState({\r\n            fetchError: fetchError,\r\n        });\r\n    }\r\n\r\n    private upgradeUq = () => {\r\n        nav.start();\r\n    }\r\n\r\n    async showUpgradeUq(uq:string, version:number):Promise<void> {\r\n        this.show(<Page header={false}>\r\n            <div>\r\n                UQ升级了，请点击按钮升级 <br />\r\n                <small className=\"text-muted\">{uq} ver-{version}</small>\r\n                <button className=\"btn btn-primary\" onClick={this.upgradeUq}>升级</button>\r\n            </div>\r\n        </Page>)\r\n    }\r\n\r\n    show(view: JSX.Element, disposer?: ()=>void): number {\r\n        this.clear();\r\n        return this.push(view, disposer);\r\n    }\r\n\r\n    push(view: JSX.Element, disposer?: ()=>void): number {\r\n        this.removeCeased();\r\n        if (this.stack.length > 0) {\r\n            window.history.pushState('forward', null, null);\r\n        }\r\n        let key = stackKey++;\r\n        this.stack.push({\r\n            key: key,\r\n            view: view, \r\n            ceased: false,\r\n            disposer: disposer\r\n        });\r\n        this.refresh();\r\n        //console.log('push: %s pages', this.stack.length);\r\n        return key;\r\n    }\r\n\r\n    replace(view: JSX.Element, disposer?: ()=>void): number {\r\n        let item:StackItem = undefined;\r\n        let stack = this.stack;\r\n        if (stack.length > 0) {\r\n            item = stack.pop();\r\n            //this.popAndDispose();\r\n        }\r\n        let key = stackKey++;\r\n        this.stack.push({\r\n            key: key, \r\n            view: view, \r\n            ceased: false,\r\n            disposer: disposer\r\n        });\r\n        if (item !== undefined) this.dispose(item.disposer);\r\n        this.refresh();\r\n        //console.log('replace: %s pages', this.stack.length);\r\n        return key;\r\n    }\r\n\r\n    ceaseTop(level:number = 1) {\r\n        let p = this.stack.length - 1;\r\n        for (let i=0; i<level; i++, p--) {\r\n            if (p < 0) break;\r\n            let item = this.stack[p];\r\n            item.ceased = true;\r\n        }\r\n    }\r\n\r\n    pop(level:number = 1) {\r\n        let stack = this.stack;\r\n        let len = stack.length;\r\n        //console.log('pop start: %s pages level=%s', len, level);\r\n        if (level <= 0 || len <= 1) return;\r\n        if (len < level) level = len;\r\n        let backLevel = 0;\r\n        for (let i = 0; i < level; i++) {\r\n            if (stack.length === 0) break;\r\n            //stack.pop();\r\n            this.popAndDispose();\r\n            ++backLevel;\r\n        }\r\n        if (backLevel >= len) backLevel--;\r\n        this.refresh();\r\n        if (this.isHistoryBack !== true) {\r\n            //window.removeEventListener('popstate', this.navBack);\r\n            //window.history.back(backLevel);\r\n            //window.addEventListener('popstate', this.navBack);\r\n        }\r\n        //console.log('pop: %s pages', stack.length);\r\n    }\r\n\r\n    popTo(key: number) {\r\n        if (key === undefined) return;\r\n        if (this.stack.find(v => v.key === key) === undefined) return;\r\n        while (this.stack.length >0) {\r\n            let len = this.stack.length;\r\n            let top = this.stack[len-1];\r\n            if (top.key === key) break;\r\n            this.pop();\r\n        }\r\n    }\r\n\r\n    topKey():number {\r\n        let len = this.stack.length;\r\n        if (len === 0) return undefined;\r\n        return this.stack[len-1].key;\r\n    }\r\n\r\n    removeCeased() {\r\n        for (;;) {\r\n            let p=this.stack.length-1;\r\n            if (p < 0) break;\r\n            let top = this.stack[p];\r\n            if (top.ceased === false) break;\r\n            let item = this.stack.pop();\r\n            let {disposer} = item;\r\n            this.dispose(disposer);\r\n        }\r\n        this.refresh();\r\n    }\r\n\r\n    private popAndDispose() {\r\n        this.removeCeased();\r\n        let item = this.stack.pop();\r\n        if (item === undefined) return;\r\n        let {disposer} = item;\r\n        this.dispose(disposer);\r\n        this.removeCeased();\r\n        return item;\r\n    }\r\n\r\n    private dispose(disposer:()=>void) {\r\n        if (disposer === undefined) return;\r\n        let item = this.stack.find(v => v.disposer === disposer);\r\n        if (item === undefined) disposer();\r\n    }\r\n\r\n    clear() {\r\n        let len = this.stack.length;\r\n        while (this.stack.length > 0) this.popAndDispose();\r\n        //this.refresh();\r\n        if (len > 1) {\r\n            //window.removeEventListener('popstate', this.navBack);\r\n            //window.history.back(len-1);\r\n            //window.addEventListener('popstate', this.navBack);\r\n        }\r\n    }\r\n\r\n    regConfirmClose(confirmClose:()=>Promise<boolean>) {\r\n        let stack = this.stack;\r\n        let len = stack.length;\r\n        if (len === 0) return;\r\n        let top = stack[len-1];\r\n        top.confirmClose = confirmClose;\r\n    }\r\n\r\n    private isHistoryBack:boolean = false;\r\n    navBack() {\r\n        nav.log('backbutton pressed - nav level: ' + this.stack.length);\r\n        this.isHistoryBack = true;\r\n        this.back(true);\r\n        this.isHistoryBack = false;\r\n    }\r\n\r\n    async back(confirm:boolean = true) {\r\n        let stack = this.stack;\r\n        let len = stack.length;\r\n        if (len === 0) return;\r\n        if (len === 1) {\r\n            if (self != window.top) {\r\n                window.top.postMessage({type:'pop-app'}, '*');\r\n            }\r\n            return;\r\n        }\r\n        let top = stack[len-1];\r\n        if (confirm===true && top.confirmClose) {\r\n            if (await top.confirmClose()===true) this.pop();\r\n        }\r\n        else {\r\n            this.pop();\r\n        }\r\n    }\r\n\r\n    confirmBox(message?:string): boolean {\r\n        return window.confirm(message);\r\n    }\r\n    clearError = () => {\r\n        this.setState({fetchError: undefined});\r\n    }\r\n    /*\r\n    private clickCount = 0;\r\n    private firstClick: number = 0;\r\n    private clickRange = 3000;\r\n    private clickMax = 6;\r\n    private onClick = () => {\r\n        let now = Date.now();\r\n        if (now - this.firstClick > this.clickRange) {\r\n            this.clickCount = 1;\r\n            this.firstClick = now;\r\n            return;\r\n        }\r\n        ++this.clickCount;\r\n        if (this.clickCount >= this.clickMax) {\r\n            nav.reverseTest();\r\n            this.firstClick = 0;\r\n            return;\r\n        }\r\n    }\r\n    */\r\n    /*\r\n    private onTestClick = () => {\r\n        nav.testing = false;\r\n        nav.push(<Page header={false}>\r\n            <div className=\"m-5 border border-info bg-white rounded p-4 text-center\">\r\n                <div>当前运行在测试模式</div>\r\n                <div className=\"mt-4\">\r\n                    <button className=\"btn btn-danger\" onClick={nav.toNormal}>正常模式</button>\r\n                    <button className=\"btn btn-outline-info ml-3\" onClick={()=>{nav.testing=true;this.pop()}}>测试模式</button>\r\n                </div>\r\n            </div>\r\n        </Page>);\r\n    }\r\n    */\r\n    render() {\r\n        const {wait, fetchError} = this.state;\r\n        let stack = this.state.stack;\r\n        let top = stack.length - 1;\r\n        let elWait = null, elError = null;\r\n        switch (wait) {\r\n            case 1:\r\n                elWait = <li className=\"va-wait va-wait1\">\r\n                </li>;\r\n                break;\r\n            case 2:\r\n                elWait = <li className=\"va-wait va-wait2\">\r\n                    <Loading />\r\n                </li>;\r\n                break;\r\n        }\r\n        if (fetchError)\r\n            elError = <FetchErrorView clearError={this.clearError} {...fetchError} />;\r\n        let test = nav.testing===true && \r\n            <span className=\"cursor-pointer position-absolute\" style={{lineHeight:0}}>\r\n                <FA className=\"text-warning\" name=\"info-circle\" />\r\n            </span>;\r\n        //onClick={this.onClick}\r\n        return (\r\n        <ul className=\"va\">\r\n            {\r\n                stack.map((item, index) => {\r\n                    let {key, view} = item;\r\n                    return <li key={key} style={index<top? {visibility: 'hidden'}:undefined}>\r\n                        {view}\r\n                    </li>\r\n                })\r\n            }\r\n            {elWait}\r\n            {elError}\r\n            {test}\r\n        </ul>\r\n        );\r\n    }\r\n\r\n    private refresh() {\r\n        // this.setState({flag: !this.state.flag});\r\n        this.setState({stack: this.stack });\r\n        // this.forceUpdate();\r\n    }\r\n}\r\n\r\nexport interface NavSettings {\r\n    loginTop?: JSX.Element;\r\n}\r\n\r\nexport class Nav {\r\n    private nav:NavView;\r\n    private ws: WsBase;\r\n    private wsHost: string;\r\n    private local: LocalData = new LocalData();\r\n    private navSettings: NavSettings;\r\n    @observable user: User/*InNav*/ = undefined;\r\n    testing: boolean;\r\n    language: string;\r\n    culture: string;\r\n    resUrl: string;\r\n\r\n    constructor() {\r\n        let {lang, district} = resOptions;\r\n        this.language = lang;\r\n        this.culture = district;\r\n        this.testing = false;\r\n    }\r\n\r\n    get guest(): number {\r\n        let guest = this.local.guest;\r\n        if (guest === undefined) return 0;\r\n        let g = guest.get();\r\n        if (g === undefined) return 0;\r\n        return g.guest;\r\n    }\r\n\r\n    set(nav:NavView) {\r\n        //this.logo = logo;\r\n        this.nav = nav;\r\n    }\r\n\r\n    registerReceiveHandler(handler: (message:any)=>Promise<void>):number {\r\n        if (this.ws === undefined) return;\r\n        return this.ws.onWsReceiveAny(handler);\r\n    }\r\n\r\n    unregisterReceiveHandler(handlerId:number) {\r\n        if (this.ws === undefined) return;\r\n        if (handlerId === undefined) return;\r\n        this.ws.endWsReceive(handlerId);\r\n    }\r\n\r\n    /*\r\n    private static testMode = '测试';\r\n    private static normalMode = '正常';\r\n    private setTesting(testing:boolean) {\r\n        this.testing = testing;\r\n        this.local.testing.set(testing);\r\n    };\r\n    private resetTest = () => {\r\n        this.setTesting(!this.testing);\r\n        //this.pop();\r\n        this.start();\r\n    }\r\n    toNormal = () => {\r\n        this.setTesting(false);\r\n        this.start();\r\n    }\r\n    reverseTest() {\r\n        let m1:string, m2:string;\r\n        if (this.testing === true) {\r\n            m1 = Nav.testMode;\r\n            m2 = Nav.normalMode;\r\n        }\r\n        else {\r\n            m1 = Nav.normalMode;\r\n            m2 = Nav.testMode;\r\n        }\r\n\r\n        this.push(<Page back=\"close\" header={false}>\r\n            <div className=\"m-5 border border-info bg-white rounded p-4 text-center\">\r\n                <div>\r\n                    <p>从{m1}模式切换到{m2}模式吗?</p>\r\n                    <p className=\"small text-muted\">测试模式下，页面左上角会有一个 <FA className=\"text-warning\" name=\"info-circle\" /></p>\r\n                </div>\r\n                <div className=\"mt-4\">\r\n                    <button className=\"btn btn-danger\" onClick={this.resetTest}>切换</button>\r\n                    <button className=\"btn btn-outline-info ml-3\" onClick={()=>this.pop()}>取消</button>\r\n                </div>\r\n            </div>\r\n        </Page>);\r\n    }\r\n    */\r\n\r\n    async onReceive(msg:any) {\r\n        if (this.ws === undefined) return;\r\n        await this.ws.receive(msg);\r\n    }\r\n\r\n    private async getPredefinedUnitName() {\r\n        try {\r\n            let unitJsonPath = this.unitJsonPath();\r\n            let unitRes = await fetch(unitJsonPath, {});\r\n            let res = await unitRes.json();\r\n            return res.unit;\r\n        }\r\n        catch (err) {\r\n            this.local.unit.remove();\r\n            return;\r\n        }\r\n    }\r\n\r\n    private async loadPredefinedUnit() {\r\n        let envUnit = process.env.REACT_APP_UNIT;\r\n        if (envUnit !== undefined) {\r\n            return Number(envUnit);\r\n        }\r\n        let unitName:string;\r\n        let unit = this.local.unit.get();\r\n        if (unit !== undefined) {\r\n            if (env.isDevelopment !== true) return unit.id;\r\n            unitName = await this.getPredefinedUnitName();\r\n            if (unitName === undefined) return;\r\n            if (unit.name === unitName) return unit.id;\r\n        }\r\n        else {\r\n            unitName = await this.getPredefinedUnitName();\r\n            if (unitName === undefined) return;\r\n        }\r\n        let unitId = await guestApi.unitFromName(unitName);\r\n        if (unitId !== undefined) {\r\n            this.local.unit.set({id: unitId, name: unitName});\r\n        }\r\n        return unitId;\r\n    }\r\n\r\n    setSettings(settings?: NavSettings) {\r\n        this.navSettings = settings;\r\n    }\r\n\r\n    hashParam: string;\r\n    private centerHost: string;\r\n    private arrs = ['/test', '/test/'];\r\n    private unitJsonPath():string {\r\n        let {href} = document.location;\r\n        href = href.toLowerCase();\r\n        for (let item of this.arrs) {\r\n            if (href.endsWith(item) === true) {\r\n                href = href.substr(0, href.length - item.length);\r\n                break;\r\n            }\r\n        }\r\n        if (href.endsWith('/') === true || href.endsWith('\\\\') === true) {\r\n            href = href.substr(0, href.length-1);\r\n        }\r\n        return href + '/unit.json';\r\n    }\r\n    async start() {\r\n        try {\r\n            this.testing = env.testing;\r\n            await host.start(this.testing);\r\n            let hash = document.location.hash;\r\n            if (hash !== undefined && hash.length > 0) {\r\n                let pos = getExHashPos();\r\n                if (pos < 0) pos = undefined;\r\n                this.hashParam = hash.substring(1, pos);\r\n            }\r\n            nav.clear();\r\n            this.startWait();\r\n            let {url, ws, resHost} = host;\r\n            this.centerHost = url;\r\n            this.resUrl = resUrlFromHost( resHost);\r\n            this.wsHost = ws;\r\n            setCenterUrl(url);\r\n            \r\n            let guest:Guest = this.local.guest.get();\r\n            if (guest === undefined) {\r\n                guest = await guestApi.guest();\r\n            }\r\n            nav.setGuest(guest);\r\n\r\n            let exHash = getExHash();\r\n            let appInFrame = setAppInFrame(exHash);\r\n            if (exHash !== undefined && window !== window.parent) {\r\n                // is in frame\r\n                if (appInFrame !== undefined) {\r\n                    this.ws = wsBridge;\r\n                    console.log('this.ws = wsBridge in sub frame');\r\n                    //nav.user = {id:0} as User;\r\n                    if (self !== window.parent) {\r\n                        window.parent.postMessage({type:'sub-frame-started', hash: appInFrame.hash}, '*');\r\n                    }\r\n                    // 下面这一句，已经移到 appBridge.ts 里面的 initSubWin，也就是响应从main frame获得user之后开始。\r\n                    //await this.showAppView();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            let predefinedUnit = await this.loadPredefinedUnit();\r\n            appInFrame.predefinedUnit = predefinedUnit;\r\n\r\n            let user: User = this.local.user.get();\r\n            if (user === undefined) {\r\n                let {notLogined} = this.nav.props;\r\n                if (notLogined !== undefined) {\r\n                    await notLogined();\r\n                }\r\n                else {\r\n                    await nav.showLogin(undefined);\r\n                }\r\n                return;\r\n            }\r\n\r\n            await nav.logined(user);\r\n        }\r\n        catch (err) {\r\n        }\r\n        finally {\r\n            this.endWait();\r\n        }\r\n    }\r\n\r\n    async showAppView() {\r\n        let {onLogined} = this.nav.props;\r\n        if (onLogined === undefined) {\r\n            nav.push(<div>NavView has no prop onLogined</div>);\r\n            return;\r\n        }\r\n        nav.clear();\r\n        await onLogined();\r\n        console.log('logined: AppView shown');\r\n    }\r\n\r\n    setGuest(guest: Guest) {\r\n        this.local.guest.set(guest);\r\n        netToken.set(0, guest.token);\r\n    }\r\n\r\n    saveLocalUser() {\r\n        this.local.user.set(this.user);\r\n    }\r\n\r\n    async logined(user: User, callback?: (user:User)=>Promise<void>) {\r\n        logoutApis();\r\n        console.log(\"logined: %s\", JSON.stringify(user));\r\n        this.user = user;\r\n        this.saveLocalUser();\r\n        netToken.set(user.id, user.token);\r\n        if (callback !== undefined) //this.loginCallbacks.has)\r\n            callback(user);\r\n            //this.loginCallbacks.call(user);\r\n        else {\r\n            await this.showAppView();\r\n        }\r\n    }\r\n\r\n    wsConnect() {\r\n        let ws:WSChannel = this.ws = new WSChannel(this.wsHost, this.user.token);\r\n        ws.connect();\r\n    }\r\n\r\n    loginTop(defaultTop:JSX.Element) {\r\n        return (this.navSettings && this.navSettings.loginTop) || defaultTop;\r\n    }\r\n\r\n    async showLogin(callback?: (user:User)=>Promise<void>, withBack?:boolean) {\r\n        let lv = await import('../entry/login');\r\n        let loginView = <lv.default \r\n            withBack={withBack} \r\n            callback={callback} />;\r\n        if (withBack !== true) {\r\n            this.nav.clear();\r\n            this.pop();\r\n        }\r\n        this.nav.push(loginView);\r\n    }\r\n\r\n    async showLogout(callback?: ()=>Promise<void>) {\r\n        nav.push(<Page header=\"安全退出\" back=\"close\">\r\n            <div className=\"m-5 border border-info bg-white rounded p-3 text-center\">\r\n                <div>退出当前账号不会删除任何历史数据，下次登录依然可以使用本账号</div>\r\n                <div className=\"mt-3\">\r\n                    <button className=\"btn btn-danger\" onClick={()=>this.logout(callback)}>退出</button>\r\n                </div>\r\n            </div>\r\n        </Page>);\r\n    }\r\n\r\n    async logout(callback?:()=>Promise<void>) { //notShowLogin?:boolean) {\r\n        appInFrame.unit = undefined;\r\n        this.local.logoutClear();\r\n        this.user = undefined; //{} as User;\r\n        logoutApis();\r\n        let guest = this.local.guest.get();\r\n        setCenterToken(0, guest && guest.token);\r\n        this.ws = undefined;\r\n        /*\r\n        if (this.loginCallbacks.has)\r\n            this.logoutCallbacks.call();\r\n        else {\r\n            if (notShowLogin === true) return;\r\n        }\r\n        await nav.start();\r\n        */\r\n        if (callback === undefined)\r\n            await nav.start();\r\n        else\r\n            await callback();\r\n    }\r\n\r\n    async changePassword() {\r\n        let cp = await import('../entry/changePassword');\r\n        nav.push(<cp.ChangePasswordPage />);\r\n    }\r\n\r\n    get level(): number {\r\n        return this.nav.level;\r\n    }\r\n    startWait() {\r\n        this.nav.startWait();\r\n    }\r\n    endWait() {\r\n        this.nav.endWait();\r\n    }\r\n    async onError(error: FetchError) {\r\n        await this.nav.onError(error);\r\n    }\r\n    async showUpgradeUq(uq:string, version:number):Promise<void> {\r\n        await this.nav.showUpgradeUq(uq, version);\r\n    }\r\n\r\n    show (view: JSX.Element, disposer?: ()=>void): void {\r\n        this.nav.show(view, disposer);\r\n    }\r\n    push(view: JSX.Element, disposer?: ()=>void): void {\r\n        this.nav.push(view, disposer);\r\n    }\r\n    replace(view: JSX.Element, disposer?: ()=>void): void {\r\n        this.nav.replace(view, disposer);\r\n    }\r\n    pop(level:number = 1) {\r\n        this.nav.pop(level);\r\n    }\r\n    topKey():number {\r\n        return this.nav.topKey();\r\n    }\r\n    popTo(key:number) {\r\n        this.nav.popTo(key);\r\n    }\r\n    clear() {\r\n        this.nav.clear();\r\n    }\r\n    navBack() {\r\n        this.nav.navBack();\r\n    }\r\n    ceaseTop(level?:number) {\r\n        this.nav.ceaseTop(level);\r\n    }\r\n    removeCeased() {\r\n        this.nav.removeCeased();\r\n    }\r\n    async back(confirm:boolean = true) {\r\n        await this.nav.back(confirm);\r\n    }\r\n    regConfirmClose(confirmClose: ()=>Promise<boolean>) {\r\n        this.nav.regConfirmClose(confirmClose);\r\n    }\r\n    confirmBox(message?:string): boolean {\r\n        return this.nav.confirmBox(message);\r\n    }\r\n    async navToApp(url: string, unitId: number, apiId?:number, sheetType?:number, sheetId?:number):Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            let sheet = this.centerHost.includes('http://localhost:') === true? 'sheet_debug':'sheet'\r\n            let uh = sheetId === undefined?\r\n                    appUrl(url, unitId) :\r\n                    appUrl(url, unitId, sheet, [apiId, sheetType, sheetId]);\r\n            console.log('navToApp: %s', JSON.stringify(uh));\r\n            nav.push(<article className='app-container'>\r\n                <span id={uh.hash} onClick={()=>this.back()} /*style={mobileHeaderStyle}*/>\r\n                    <i className=\"fa fa-arrow-left\" />\r\n                </span>\r\n                <iframe src={uh.url} />\r\n            </article>, \r\n            ()=> {\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n\r\n    navToSite(url: string) {\r\n        // show in new window\r\n        window.open(url);\r\n    }\r\n\r\n    get logs() {return logs};\r\n    log(msg:string) {\r\n        logs.push(msg);\r\n    }\r\n    logMark() {\r\n        let date = new Date();\r\n        logMark = date.getTime();\r\n        logs.push('log-mark: ' + date.toTimeString());\r\n    }\r\n    logStep(step:string) {\r\n        logs.push(step + ': ' + (new Date().getTime() - logMark));\r\n    }\r\n}\r\nexport const nav: Nav = new Nav();\r\n","import {observable, computed} from 'mobx';\r\n\r\nexport interface Id {\r\n    id: number;\r\n}\r\n\r\nexport abstract class CacheIds<T extends Id> {\r\n    constructor(maxCount:number = 100) {\r\n        this.maxCount = maxCount;\r\n    }\r\n    private maxCount:number;\r\n    private arr:T[] = [];\r\n    @observable dict = new Map<number, T>();\r\n\r\n    loadIds(ids:number[]) {\r\n        let arr:number[] = [];\r\n        for (let id of ids) {\r\n            if (id === null) continue;\r\n            let item = this.dict.get(id);\r\n            if (item === undefined) {\r\n                arr.push(id);\r\n                item = {id:id} as T;\r\n                this.dict.set(id, item);\r\n            }\r\n        }                \r\n        this.loadId(arr);\r\n    }\r\n\r\n    get(id:number):T {\r\n        if (id === undefined || id === null) return null;\r\n        let item = this.dict.get(id);\r\n        if (item === undefined) {\r\n            this.dict.set(id, {id:id} as T);\r\n            this.loadId([id]);\r\n            item = this.dict.get(id);\r\n        }\r\n        return item;\r\n    }\r\n    private setItem(id:number, item:T) {\r\n        if (item === undefined) {\r\n            this.dict.set(id, null);\r\n            this.arr.push({id: id} as T);\r\n        }\r\n        else {\r\n            this.dict.set(id, item);\r\n            this.arr.push(item);\r\n        }\r\n        if (this.arr.length > this.maxCount) {\r\n            item = this.arr.shift();\r\n            this.dict.delete(item.id);\r\n        }\r\n    }\r\n    private async loadId(ids:number[]) {\r\n        let items = await this._loadIds(ids);\r\n        if (items === undefined) {\r\n            for (let id of ids) {\r\n                if (id === null) continue;\r\n                let item = await this._loadId(id);\r\n                this.setItem(id, item);\r\n            }\r\n        }\r\n        else {\r\n            for (let id of ids) {\r\n                let item = items.find(v => v.id === id);\r\n                this.setItem(id, item);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected abstract async _loadIds(ids:number[]):Promise<T[]>;\r\n    protected abstract async _loadId(id:number):Promise<T>;\r\n}\r\n","import _ from 'lodash';\r\n\r\nclass _LocalStorage {\r\n    getItem(key:string) {\r\n        return localStorage.getItem(key)\r\n    }\r\n    setItem(key:string, value:string) {\r\n        localStorage.setItem(key, value);\r\n    }\r\n    removeItem(key:string) {\r\n        localStorage.removeItem(key);\r\n    }\r\n}\r\n\r\nconst __ls = new _LocalStorage; // new Ls;\r\n\r\nexport class LocalCache {\r\n    private readonly local: Local;\r\n    //private value: T;\r\n    readonly key: string|number;\r\n\r\n    constructor(local:Local, key:string|number) {\r\n        this.local = local;\r\n        this.key = key;\r\n    }\r\n    get():any {\r\n        try {\r\n            // 下面缓冲的内容不能有，可能会被修改，造成circular引用\r\n            //if (this.value !== undefined) return this.value;\r\n            let text = this.local.getItem(this.key);\r\n            if (text === null) return;\r\n            if (text === undefined) return undefined;\r\n            //return this.value = \r\n            return JSON.parse(text);\r\n        }\r\n        catch (err) {\r\n            this.local.removeItem(this.key);\r\n            return;\r\n        }\r\n    }\r\n    set(value:any) {\r\n        //this.value = value;\r\n        let t = JSON.stringify(value);\r\n        this.local.setItem(this.key, t);\r\n        /*\r\n        let text = Flatted.stringify(value, undefined, undefined);\r\n        let objs:object[] = [];\r\n        let circular:any = {};\r\n        let path:string[] = [];\r\n        try {\r\n            if (testCircular(value, objs, circular, path) === true) debugger;\r\n            let t = JSON.stringify(value);\r\n            this.local.setItem(this.key, t);\r\n        }\r\n        catch (e) {\r\n            let s = null;\r\n        }\r\n        */\r\n    }\r\n    remove(local?:Local) {\r\n        if (local === undefined) {\r\n            this.local.removeItem(this.key);\r\n            //this.value = undefined;\r\n        }\r\n        else {\r\n            this.local.removeLocal(local);\r\n        }\r\n    }\r\n    child(key:string|number):LocalCache {\r\n        return this.local.child(key);\r\n    }\r\n    arr(key:string|number):LocalArr {\r\n        return this.local.arr(key);\r\n    }\r\n    map(key:string|number):LocalMap {\r\n        return this.local.map(key);\r\n    }\r\n}\r\n\r\nabstract class Local {\r\n    private readonly caches: {[key:string]:LocalCache};\r\n    private readonly locals: {[key:string]:Local};\r\n    protected readonly name: string;\r\n    constructor(name: string) {\r\n        this.name = name;\r\n        this.caches = {};\r\n        this.locals = {};\r\n    }\r\n\r\n    protected abstract keyForGet(key:string|number):string;\r\n    protected abstract keyForSet(key:string|number):string;\r\n    protected abstract keyForRemove(key:string|number):string;\r\n    abstract removeAll():void;\r\n    getItem(key:string|number):string {\r\n        let k = this.keyForGet(key);\r\n        if (k === undefined) return;\r\n        return __ls.getItem(k);\r\n    }\r\n    setItem(key:string|number, value: string):void {\r\n        let k = this.keyForSet(key);\r\n        __ls.setItem(k, value);\r\n    }\r\n    removeItem(key:string|number):void {\r\n        let k = this.keyForSet(key);\r\n        if (k === undefined) return;\r\n        localStorage.removeItem(k);\r\n    }\r\n    arr(key:string|number):LocalArr {\r\n        let sk = String(key);\r\n        let arr = this.locals[sk] as LocalArr;\r\n        if (arr === undefined) {\r\n            let k = this.keyForSet(key);\r\n            this.locals[sk] = arr = new LocalArr(k);\r\n        }\r\n        return arr;\r\n    }\r\n    map(key:string|number):LocalMap {\r\n        let sk = String(key);\r\n        let map = this.locals[sk] as LocalMap;\r\n        if (map === undefined) {\r\n            let k = this.keyForSet(key);\r\n            this.locals[sk] = map = new LocalMap(k);\r\n        }\r\n        return map;\r\n    }\r\n    removeLocal(local:Local) {\r\n        let sk = local.name;\r\n        let k = this.keyForRemove(sk);\r\n        if (k === undefined) return;\r\n        let arr = this.locals[sk];\r\n        if (arr === undefined) arr = new LocalArr(k);\r\n        else this.locals[sk] = undefined;\r\n        arr.removeAll();\r\n    }\r\n    child(key:string|number):LocalCache {\r\n        let ks = String(key);\r\n        let ret = this.caches[ks];\r\n        if (ret !== undefined) return ret;\r\n        return this.caches[ks] =ret = new LocalCache(this, key);\r\n    }\r\n}\r\n\r\nconst maxArrSize = 500;\r\nexport class LocalArr extends Local {\r\n    private readonly index: number[];\r\n    constructor(name: string) {\r\n        super(name);\r\n        let index = __ls.getItem(this.name);\r\n        this.index = index === null? [] : index.split('\\n').map(v => Number(v));\r\n    }\r\n    private saveIndex() {\r\n        __ls.setItem(this.name, this.index.join('\\n'));\r\n    }\r\n    protected keyForGet(key:number):string {\r\n        let i = _.indexOf(this.index, key);\r\n        if (i < 0) return undefined;\r\n        return `${this.name}.${key}`;\r\n    }\r\n    protected keyForSet(key:number):string {\r\n        let i = _.indexOf(this.index, key);\r\n        if (i<0) {\r\n            this.index.unshift(key);\r\n            if (this.index.length > maxArrSize) this.index.pop();\r\n        }\r\n        else {\r\n            this.index.splice(i, 1);\r\n            this.index.unshift(key)\r\n        }\r\n        this.saveIndex();\r\n        return `${this.name}.${key}`;\r\n    }\r\n    protected keyForRemove(key:number):string {\r\n        let i = _.indexOf(this.index, key);\r\n        if (i<0) return;\r\n        this.index.splice(i, 1);\r\n        this.saveIndex();\r\n        return `${this.name}.${key}`;\r\n    }\r\n    removeAll():void {\r\n        for (let i of this.index) {\r\n            __ls.removeItem(`${this.name}.${i}`);\r\n        }\r\n        __ls.removeItem(this.name);\r\n        this.index.splice(0);\r\n    }\r\n    item(index:number):LocalCache {\r\n        return this.child(index);\r\n    }\r\n}\r\n\r\nexport class LocalMap extends Local {\r\n    private readonly index: {[key:string]:number};\r\n    private max: number;\r\n    constructor(name: string) {\r\n        super(name);\r\n        this.max = 0;\r\n        this.index = {};\r\n        let index = __ls.getItem(this.name);\r\n        if (index !== null) {\r\n            let ls = index.split('\\n');\r\n            ls.forEach(l => {\r\n                let p = l.indexOf('\\t');\r\n                if (p<0) return;\r\n                let key = l.substr(0, p);\r\n                let i = Number(l.substr(p+1));\r\n                if (isNaN(i) === true) return;\r\n                this.index[key] = i;\r\n                if (i>this.max) this.max = i;\r\n            });\r\n        }\r\n    }\r\n    private saveIndex() {\r\n        let ls:string[] = [];\r\n        for (let k in this.index) {\r\n            let v = this.index[k];\r\n            if (v === undefined) continue;\r\n            ls.push(`${k}\\t${v}`);\r\n        }\r\n        __ls.setItem(this.name, ls.join('\\n'));\r\n    }\r\n    protected keyForGet(key:number):string {\r\n        let i = this.index[key];\r\n        if (i === undefined) return undefined;\r\n        return `${this.name}.${i}`;\r\n    }\r\n    protected keyForSet(key:number):string {\r\n        let i = this.index[key];\r\n        if (i === undefined) {\r\n            ++this.max;\r\n            i = this.max;\r\n            this.index[key] = i;\r\n            this.saveIndex();\r\n        }\r\n        return `${this.name}.${i}`;\r\n    }\r\n    protected keyForRemove(key:string|number):string {\r\n        let i = this.index[key];\r\n        if (i===undefined) return;\r\n        this.index[key] = undefined;\r\n        this.saveIndex();\r\n        return `${this.name}.${i}`;\r\n    }\r\n    removeAll():void {\r\n        for (let i in this.index) {\r\n            __ls.removeItem(`${this.name}.${this.index[i]}`);\r\n            this.index[i] = undefined;\r\n        }\r\n        __ls.removeItem(this.name);\r\n        this.max = 0;\r\n    }\r\n    item(key:string):LocalCache {\r\n        return this.child(key);\r\n    }\r\n}\r\n","import { LocalMap } from './localDb';\r\n\r\nconst testingTags:string[] = ['/test', '/test/', '-test', '-test/'];\r\nfunction isTesting():boolean {\r\n    let {pathname} = document.location;\r\n    let pn = pathname.toLowerCase();\r\n    for (let item of testingTags) {\r\n        if (pn.endsWith(item) === true) return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const env = (function () {\r\n    let testing = isTesting();\r\n    let localDb = new LocalMap(testing===true? '$$':'$');\r\n    return {\r\n        testing: testing,\r\n        isDevelopment: process.env.NODE_ENV === 'development',\r\n        localDb: localDb,\r\n    }\r\n}());\r\n","import { env } from './env';\r\n\r\nexport class LocalData {\r\n    user = env.localDb.child('user');\r\n    guest = env.localDb.child('guest');\r\n    unit = env.localDb.child('unit');\r\n\r\n    logoutClear() {\r\n        [\r\n            this.user,\r\n            this.unit,\r\n        ].forEach(d => d.remove());\r\n    }\r\n}\r\n","export {left0} from './left0';\r\nexport * from './user';\r\nexport * from './uid';\r\nexport {PageItems} from './pageItems';\r\nexport {CacheIds} from './cacheIds';\r\nexport {LocalMap, LocalArr, LocalCache} from './localDb';\r\nexport {LocalData} from './local';\r\nexport {env} from './env';","function replacer(key:string, value:any) {\r\n    let first = key.substr(0, 1);\r\n    switch (first) {\r\n        default: return value;\r\n        case '$':\r\n        case '_': return;\r\n    }\r\n}\r\n\r\nexport function jsonStringify(value:any) {\r\n    return JSON.stringify(value, replacer, ' ');\r\n}\r\n","import * as React from 'react';\r\n\r\nexport const PureJSONContent = (values:any, x?:any) => <>content: {JSON.stringify(values)}</>;\r\n","export * from './jsonStringify';\r\nexport * from './pureJsonContent';","import _ from 'lodash';\r\nimport {nav} from '../components';\r\nimport {uid} from '../tool/uid';\r\nimport {uqTokenApi as uqTokenApi, callCenterapi, CenterAppApi, UqData, centerToken, UqAppData, setCenterToken} from './uqApi';\r\nimport {setSubAppWindow} from './wsChannel';\r\nimport { host } from './host';\r\n\r\nexport interface UqToken {\r\n    name: string;\r\n    db: string;\r\n    url: string;\r\n    token: string;\r\n}\r\nconst uqTokens:{[uqName:string]: UqToken}  = {};\r\nexport function logoutUqTokens() {\r\n    for (let i in uqTokens) {\r\n        uqTokens[i] = undefined;\r\n    }\r\n}\r\n\r\nexport interface AppInFrame {\r\n    hash: string;\r\n    unit: number;       // unit id\r\n    page?: string;\r\n    param?: string[];\r\n    predefinedUnit?: number;  // 比如像Cart这样的应用，直接让用户访问的，就需要在unit.json里面定义unitName\r\n}\r\nconst appsInFrame:{[key:string]:AppInFrame} = {};\r\n\r\nclass AppInFrameClass implements AppInFrame {\r\n    hash: string;\r\n    private _unit: number;\r\n    get unit(): number {return this._unit;}       // unit id\r\n    set unit(val:number) { this._unit=val;}\r\n    page?: string;\r\n    param?: string[];\r\n}\r\n\r\nexport let appInFrame:AppInFrame = new AppInFrameClass();\r\n/* {\r\n    hash: undefined,\r\n    get unit():number {return } undefined, //debugUnitId,\r\n    page: undefined;\r\n    param: undefined,\r\n}*/\r\n\r\nexport function isBridged():boolean {\r\n    return self !== window.parent;\r\n}\r\n\r\nwindow.addEventListener('message', async function(evt) {\r\n    var message = evt.data;\r\n    switch (message.type) {\r\n        case 'sub-frame-started':\r\n            subFrameStarted(evt);\r\n            break;\r\n        case 'ws':\r\n            //wsBridge.receive(message.msg);\r\n            await nav.onReceive(message.msg);\r\n            break;\r\n        case 'init-sub-win':\r\n            await initSubWin(message);\r\n            break;\r\n        case 'pop-app':\r\n            nav.navBack();\r\n            break;\r\n        case 'center-api':\r\n            await callCenterApiFromMessage(evt.source as Window, message);\r\n            break;\r\n        case 'center-api-return':\r\n            bridgeCenterApiReturn(message);\r\n            break;\r\n        case 'app-api':\r\n            let ret = await onReceiveAppApiMessage(message.hash, message.apiName);\r\n            (evt.source as Window).postMessage({\r\n                type: 'app-api-return', \r\n                apiName: message.apiName,\r\n                db: ret.db,\r\n                url: ret.url,\r\n                token: ret.token} as any, \"*\");\r\n            break;\r\n        case 'app-api-return':\r\n            console.log(\"app-api-return: %s\", JSON.stringify(message));\r\n            console.log('await onAppApiReturn(message);');\r\n            await onAppApiReturn(message);\r\n            break;\r\n        default:\r\n            this.console.log('message: %s', JSON.stringify(message));\r\n            break;\r\n    }\r\n});\r\n\r\nfunction subFrameStarted(evt:any) {\r\n    var message = evt.data;\r\n    let subWin = evt.source as Window;\r\n    setSubAppWindow(subWin);\r\n    hideFrameBack(message.hash);\r\n    let msg:any = _.clone(nav.user);\r\n    msg.type = 'init-sub-win';\r\n    subWin.postMessage(msg, '*');\r\n}\r\nfunction hideFrameBack(hash:string) {\r\n    let el = document.getElementById(hash);\r\n    if (el !== undefined) el.hidden = true;\r\n}\r\nasync function initSubWin(message:any) {\r\n    console.log('initSubWin: set nav.user', message);\r\n    let user = nav.user = message; // message.user;\r\n    setCenterToken(user.id, user.token);\r\n    await nav.showAppView();\r\n}\r\nasync function onReceiveAppApiMessage(hash: string, apiName: string): Promise<UqToken> {\r\n    let appInFrame = appsInFrame[hash];\r\n    if (appInFrame === undefined) return {name:apiName, db:undefined, url:undefined, token:undefined};\r\n    //let unit = getUnit();\r\n    let {unit, predefinedUnit} = appInFrame;\r\n    unit = unit || predefinedUnit;\r\n    if (!unit) {\r\n        console.error('no unit defined in unit.json or not logined in', unit);\r\n    }\r\n    let parts = apiName.split('/');\r\n    let param = {unit: unit, uqOwner: parts[0], uqName: parts[1]};\r\n    console.log('uqTokenApi.uq onReceiveAppApiMessage', param);\r\n    let ret = await uqTokenApi.uq(param);\r\n    let {db, url, token} = ret;\r\n    return {name: apiName, db:db, url: url, token: token};\r\n}\r\n\r\nasync function onAppApiReturn(message:any) {\r\n    let {apiName, db, url, urlTest, token} = message;\r\n    let action = uqTokenActions[apiName];\r\n    if (action === undefined) {\r\n        throw 'error app api return';\r\n        //return;\r\n    }\r\n    let realUrl = host.getUrlOrTest(db, url, urlTest);\r\n    console.log('onAppApiReturn(message:any): url=' + url + ', real=' + realUrl);\r\n    //action.url = realUrl;\r\n    //action.token = token;\r\n    action.resolve({\r\n        name: apiName,\r\n        db: db,\r\n        url: realUrl,\r\n        token: token,\r\n    } as UqToken);\r\n}\r\n\r\nexport function setAppInFrame(appHash: string):AppInFrame {\r\n    if (appHash) {\r\n        let parts = appHash.split('-');\r\n        let len = parts.length;\r\n        if (len > 0) {\r\n            let p = 1;\r\n            appInFrame.hash = parts[p++];\r\n            if (len>0) appInFrame.unit = Number(parts[p++]);\r\n            if (len>1) appInFrame.page = parts[p++];\r\n            if (len>2) appInFrame.param = parts.slice(p++);\r\n        }\r\n    }\r\n    return appInFrame;\r\n}\r\n\r\nexport function getExHashPos():number {\r\n    let hash = document.location.hash;\r\n    if (hash !== undefined && hash.length > 0) {\r\n        let pos = hash.lastIndexOf('#tv-');\r\n        if (pos < 0) pos = hash.lastIndexOf('#tvdebug-');\r\n        return pos;\r\n    }\r\n    return -1;\r\n}\r\n\r\nexport function getExHash():string {\r\n    let pos = getExHashPos();\r\n    if (pos < 0) return undefined;\r\n    return document.location.hash.substring(pos);\r\n}\r\n\r\nexport function appUrl(url: string, unitId: number, page?:string, param?:any[]):{url:string; hash:string} {\r\n    let u:string;\r\n    for (;;) {\r\n        u = uid();\r\n        let a = appsInFrame[u];\r\n        if (a === undefined) {\r\n            appsInFrame[u] = {hash:u, unit:unitId};\r\n            break;\r\n        }\r\n    }\r\n    url += '#tv-' + u + '-' + unitId;\r\n    if (page !== undefined) {\r\n        url += '-' + page;\r\n        if (param !== undefined) {\r\n            for (let i=0; i<param.length; i++) {\r\n                url += '-' + param[i];\r\n            }\r\n        }\r\n    }\r\n    return {url: url, hash: u};\r\n}\r\n\r\nfunction getUnit():number {\r\n    let {unit, predefinedUnit} = appInFrame;\r\n    let realUnit = unit || predefinedUnit;\r\n    if (realUnit === undefined) {\r\n        throw 'no unit defined in unit.json or not logined in';\r\n    }\r\n    return realUnit;\r\n}\r\n\r\ninterface UqTokenAction {\r\n    resolve: (value?: UqToken | PromiseLike<UqToken>) => void;\r\n    reject: (reason?: any) => void;\r\n}\r\nconst uqTokenActions:{[uq:string]: UqTokenAction} = {};\r\nexport async function buildAppUq(uq:string, uqOwner:string, uqName:string):Promise<void> {\r\n    if (!isBridged()) {\r\n        let unit = getUnit();\r\n        let uqToken = await uqTokenApi.uq({unit:unit, uqOwner:uqOwner, uqName:uqName});\r\n        if (uqToken.token === undefined) uqToken.token = centerToken;\r\n        let {db, url, urlTest} = uqToken;\r\n        let realUrl = host.getUrlOrTest(db, url, urlTest);\r\n        console.log('realUrl: %s', realUrl);\r\n        uqToken.url = realUrl;\r\n        uqTokens[uq] = uqToken;\r\n        return uqToken;\r\n    }\r\n    console.log(\"**** before buildAppUq ****\", appInFrame);\r\n    let bp = uqTokenActions[uq];\r\n    if (bp !== undefined) return;\r\n    return new Promise<void>((resolve, reject) => {\r\n        uqTokenActions[uq] = {\r\n            resolve: async (at:any) => {\r\n                let {db, url, token} = await at;\r\n                uqTokens[uq] = {\r\n                    name: uq,\r\n                    db: db,\r\n                    url: url,\r\n                    token: token,\r\n                };\r\n                uqTokenActions[uq] = undefined;\r\n                console.log(\"**** after buildAppUq ****\", appInFrame);\r\n                resolve();\r\n            },\r\n            reject: reject,\r\n        };\r\n        (window.opener || window.parent).postMessage({\r\n            type: 'app-api',\r\n            apiName: uq,\r\n            hash: appInFrame.hash,\r\n        }, \"*\");\r\n    });\r\n}\r\n\r\nexport function appUq(uq:string):UqToken {\r\n    let uts = uqTokens;\r\n    return uts[uq];\r\n}\r\n/*\r\nexport async function appUq(uq:string, uqOwner:string, uqName:string): Promise<UqToken> {\r\n    let uqToken = uqTokens[uq];\r\n    if (uqToken !== undefined) return uqToken;\r\n    if (!isBridged()) {\r\n        let unit = getUnit();\r\n        uqToken = await uqTokenApi.uq({unit:unit, uqOwner:uqOwner, uqName:uqName});\r\n        if (uqToken.token === undefined) uqToken.token = centerToken;\r\n        let {url, urlDebug} = uqToken;\r\n        let realUrl = host.getUrlOrDebug(url, urlDebug);\r\n        console.log('realUrl: %s', realUrl);\r\n        uqToken.url = realUrl;\r\n        uqTokens[uq] = uqToken;\r\n        return uqToken;\r\n    }\r\n    console.log(\"appApi parent send: %s\", appInFrame.hash);\r\n    uqToken = {\r\n        name: uq,\r\n        url: undefined,\r\n        urlDebug: undefined,\r\n        token: undefined,\r\n        resolve: undefined,\r\n        reject: undefined,\r\n    };\r\n    uqTokens[uq] = uqToken;\r\n    return new Promise<UqToken>((resolve, reject) => {\r\n        uqToken.resolve = async (at) => {\r\n            let a = await at;\r\n            console.log('return from parent window: %s', JSON.stringify(a));\r\n            uqToken.url = a.url;\r\n            uqToken.urlDebug = a.urlDebug;\r\n            uqToken.token = a.token;\r\n            resolve(uqToken);\r\n        }\r\n        uqToken.reject = reject;\r\n        (window.opener || window.parent).postMessage({\r\n            type: 'app-api',\r\n            apiName: uq,\r\n            hash: appInFrame.hash,\r\n        }, \"*\");\r\n    });\r\n}\r\n*/\r\ninterface BridgeCenterApi {\r\n    id: string;\r\n    resolve: (value?:any)=>any;\r\n    reject: (reason?:any)=>void;\r\n}\r\nconst brideCenterApis:{[id:string]: BridgeCenterApi} = {};\r\nexport async function bridgeCenterApi(url:string, method:string, body:any):Promise<any> {\r\n    console.log('bridgeCenterApi: url=%s, method=%s', url, method);\r\n    return await new Promise<any>(async (resolve, reject) => {\r\n        let callId:string;\r\n        for (;;) {\r\n            callId = uid();\r\n            let bca = brideCenterApis[callId];\r\n            if (bca === undefined) {\r\n                brideCenterApis[callId] = {\r\n                    id: callId,\r\n                    resolve: resolve,\r\n                    reject: reject,\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        (window.opener || window.parent).postMessage({\r\n            type: 'center-api',\r\n            callId: callId,\r\n            url: url,\r\n            method: method,\r\n            body: body\r\n        }, '*');\r\n    });\r\n}\r\n\r\nasync function callCenterApiFromMessage(from:Window, message):Promise<void> {\r\n    let {callId, url, method, body} = message;\r\n    let result = await callCenterapi.directCall(url, method, body);\r\n    from.postMessage({\r\n        type: 'center-api-return',\r\n        callId: callId,\r\n        result: result,\r\n    }, '*');\r\n}\r\n\r\nfunction bridgeCenterApiReturn(message:any) {\r\n    let {callId, result} = message;\r\n    let bca = brideCenterApis[callId];\r\n    if (bca === undefined) return;\r\n    brideCenterApis[callId] = undefined;\r\n    bca.resolve(result);\r\n}\r\n","import * as React from 'react';\r\nimport {IComputedValue} from 'mobx';\r\nimport {observer} from 'mobx-react';\r\nimport classNames from 'classnames';\r\nimport _ from 'lodash';\r\nimport {PageHeader} from './pageHeader';\r\n\r\nexport interface ScrollProps {\r\n    onScroll?: (e:any) => void;\r\n    onScrollTop?: () => void;\r\n    onScrollBottom?: () => void;\r\n}\r\ninterface ScrollViewProps extends ScrollProps {\r\n    className?: string;\r\n}\r\nconst scrollTimeGap = 100;\r\nclass ScrollView extends React.Component<ScrollViewProps, null> {\r\n    private bottomTime:number = 0;\r\n    private topTime:number = 0;\r\n\r\n    private onScroll = async (e) => {\r\n        let {onScroll, onScrollTop, onScrollBottom} = this.props;\r\n        if (onScroll) this.props.onScroll(e);\r\n        let el = e.target as HTMLBaseElement;\r\n        if (el.scrollTop < 30) {\r\n            //this.eachChild(this, 'top');\r\n            if (onScrollTop !== undefined) {\r\n                let topTime = new Date().getTime();\r\n                if (topTime-this.topTime > scrollTimeGap) {\r\n                    this.topTime = topTime;\r\n                    onScrollTop();\r\n                }\r\n            }\r\n        }\r\n        if (el.scrollTop + el.offsetHeight > el.scrollHeight - 30) {\r\n            //this.eachChild(this, 'bottom');\r\n            if (onScrollBottom !== undefined) {\r\n                let bottomTime = new Date().getTime();\r\n                if (bottomTime - this.bottomTime > scrollTimeGap) {\r\n                    this.bottomTime = bottomTime;\r\n                    onScrollBottom();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    private eachChild(c:any, direct:'top'|'bottom') {\r\n        let { props } = c;\r\n        if (props === undefined)\r\n            return;\r\n        let { children } = props;\r\n        if (children === undefined)\r\n            return;\r\n        React.Children.forEach(children, (child, index) => {\r\n            let {_$scroll} = child as any;\r\n            if (_$scroll) _$scroll(direct);\r\n            console.log(child.toString());\r\n            this.eachChild(child, direct);\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <main className={this.props.className} onScroll={this.onScroll}>\r\n                {this.props.children}\r\n            </main>\r\n        );\r\n    }\r\n}\r\n\r\nexport interface Tab extends ScrollProps {\r\n    title: string | JSX.Element;    \r\n    icon?: string;\r\n    className?: string;\r\n    content?: JSX.Element | (()=>JSX.Element);\r\n    header?: string;\r\n    isSelected?: boolean;\r\n    redDot?: IComputedValue<number>;\r\n    load?: () => Promise<void>;\r\n}\r\nexport interface TabState extends Tab {\r\n    isMounted?: boolean;\r\n}\r\nexport interface PageProps extends ScrollProps {\r\n    back?: 'close' | 'back' | 'none';\r\n    header?: boolean | string | JSX.Element;\r\n    keepHeader?: boolean;\r\n    right?: JSX.Element;\r\n    sideBar?: JSX.Element;\r\n    footer?: JSX.Element;\r\n    tabs?: Tab[];\r\n    tabPosition?: 'top' | 'bottom';\r\n    logout?: boolean | (()=>Promise<void>);\r\n    headerClassName?: string;\r\n}\r\nexport interface PageState {\r\n    cur?: Tab;\r\n    tabs?: TabState[];\r\n}\r\n\r\n@observer\r\nexport class Page extends React.Component<PageProps, PageState> {\r\n    private tabs:TabState[];\r\n    constructor(props: PageProps) {\r\n        super(props);\r\n        let {tabs} = props;\r\n        if (tabs === undefined || tabs.length === 0) return;\r\n        this.tabs = tabs;\r\n        let cur:Tab;\r\n        let tabStates:Tab[] = [];\r\n        for (let tab of tabs) {\r\n            let t:TabState = _.clone(tab);\r\n            if (cur === undefined) {\r\n                if (t.isSelected === true)\r\n                    cur = t;\r\n                else\r\n                    t.isSelected = false;\r\n            }\r\n            else {\r\n                t.isSelected = false;\r\n            }\r\n            t.isMounted = false;\r\n            tabStates.push(t);\r\n        }\r\n        this.state = {\r\n            cur: cur,\r\n            tabs: tabStates,\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        if (this.tabs === undefined) return;\r\n        let t0 = this.state.tabs.find(v => v.isSelected === true);\r\n        if (t0 === undefined) {\r\n            t0 = this.state.tabs[0];\r\n            if (t0 === undefined) return;\r\n        }\r\n        await t0.load && await t0.load();\r\n        //await this.onTabClick(t0);\r\n    }\r\n\r\n    private async onTabClick(tab: TabState) {\r\n        if (tab.isSelected === true) return;\r\n        let cur:TabState;\r\n        let tabs = this.state.tabs;\r\n        for (let t of tabs) {\r\n            if (t === tab) {\r\n                t.isSelected = true;\r\n                cur = t;\r\n            }\r\n            else\r\n                t.isSelected = false;\r\n        }\r\n        if (cur.isMounted !== true) {\r\n            let {load} = cur;\r\n            if (load !== undefined) {\r\n                await load();\r\n            }\r\n        }\r\n        this.setState({\r\n            cur: cur,\r\n            tabs: tabs\r\n        });\r\n    }\r\n\r\n    private onTouchStart(evt: React.TouchEvent<HTMLElement>) {\r\n    }\r\n\r\n    private renderTabs(footer: JSX.Element) {\r\n        const {header, back, right, keepHeader, headerClassName, tabPosition} = this.props;\r\n        let cur = this.state.cur;\r\n        let tabs = <div>{\r\n                this.state.tabs.map((tab, index) => {\r\n                    const {icon, isSelected, title, redDot, className} = tab;\r\n                    let img:any, redDotView:any, cn:any;\r\n                    if (icon !== undefined) img = <img src={icon} />;\r\n                    if (redDot !== undefined) {\r\n                        let v = redDot.get();\r\n                        if (v < 0) {\r\n                            cn = classNames('red-dot', className);\r\n                            redDotView = <u />;\r\n                        }\r\n                        else if (v > 0) {\r\n                            cn = classNames('red-dot', 'num', className);\r\n                            redDotView = <u>{v}</u>;\r\n                        }\r\n                    }\r\n                    return <div key={index}\r\n                        className= {classNames('va-tab', {cur: isSelected})}\r\n                        onClick={() => this.onTabClick(tab)}>\r\n                        {img}<div className={cn}>{title}{redDotView}</div>\r\n                    </div>\r\n                })\r\n            }</div>;\r\n        let pageHeader = header !== false &&\r\n            <PageHeader \r\n                back={back} \r\n                center={keepHeader===true? (header as string) : (cur && (cur.header || cur.title))}\r\n                right={right}\r\n                className={headerClassName}\r\n            />;\r\n\r\n        return <article className='page-container'>\r\n            {pageHeader}\r\n            {tabPosition==='top' && tabs}\r\n            <section className=\"position-relative\">\r\n            {this.props.sideBar}\r\n            {\r\n                this.state.tabs.map((tab, index) => {\r\n                    let {isSelected, isMounted, content} = tab;\r\n                    if (isSelected === true || isMounted === true) {\r\n                        tab.isMounted = true;\r\n                        return <ScrollView key={index}\r\n                            className={classNames({invisible: isSelected===false})}\r\n                            onScroll={tab.onScroll}\r\n                            onScrollTop={tab.onScrollTop}\r\n                            onScrollBottom={tab.onScrollBottom}\r\n                        >\r\n                            {(typeof content)==='function'? (content as ()=>JSX.Element)():content}\r\n                        </ScrollView>;\r\n                    }\r\n                })\r\n            }\r\n            </section>\r\n            {tabPosition!=='top' && tabs}\r\n            {footer}\r\n        </article>;\r\n    }\r\n    private renderSingle(footer: JSX.Element) {\r\n        const {back, header, right, onScroll, onScrollTop, onScrollBottom, children, headerClassName} = this.props;\r\n        let pageHeader = header !== false && <PageHeader \r\n            back={back} \r\n            center={header as any}\r\n            right={right}\r\n            logout={this.props.logout}\r\n            className={headerClassName}\r\n        />;\r\n        return (\r\n            <article className='page-container' onTouchStart={this.onTouchStart}>\r\n                {pageHeader}\r\n                <section className=\"position-relative\">\r\n                    {this.props.sideBar}\r\n                    <ScrollView\r\n                        onScroll={onScroll}\r\n                        onScrollTop={onScrollTop}\r\n                        onScrollBottom={onScrollBottom}\r\n                    >\r\n                        {children}\r\n                    </ScrollView>\r\n                </section>\r\n                {footer}\r\n            </article>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const {footer} = this.props;\r\n        let elFooter = footer !== undefined && <footer>{footer}</footer>;\r\n        if (this.tabs !== undefined)\r\n            return this.renderTabs(elFooter);\r\n        else\r\n            return this.renderSingle(elFooter);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { jsonStringify, PureJSONContent } from '../tools';\r\n\r\nexport type TypeViewModel = typeof ViewModel;\r\nexport type TypeView = React.StatelessComponent<{vm: ViewModel, className?:string|string[]}>;\r\nexport type TypeContent = React.StatelessComponent<any>;\r\n\r\nexport abstract class ViewModel {\r\n    protected abstract get view(): TypeView;\r\n    render(className?:string|string[]):JSX.Element {\r\n        if (this.view === undefined) return <div>??? viewModel 必须定义 view ???</div>\r\n        return React.createElement(this.view, {vm: this, className:className});\r\n    }\r\n}\r\n\r\n/*\r\nexport const PureJSONContent = (values:any, x?:any) => {\r\n    return <>content: {jsonStringify(values)}</>;\r\n}\r\n*/\r\n\r\nexport const JSONContent = observer(PureJSONContent);\r\nexport const RowContent = \r\n    (values:any) => <div className=\"px-3 py-2\">{jsonStringify(values)}</div>\r\n;\r\n","import {bridgeCenterApi, isBridged} from './appBridge';\r\nimport {FetchError} from './fetchError';\r\nimport {HttpChannelUI} from './httpChannelUI';\r\nimport {nav} from '../components/nav';\r\nimport { Caller } from './caller';\r\nimport { env } from '../tool';\r\n\r\n/*\r\nexport async function httpGet(url:string, params?:any):Promise<any> {\r\n    let channel = new HttpChannel(false, url, undefined, undefined);\r\n    let ret = await channel.get('', params);\r\n    return ret;\r\n}\r\n\r\nexport async function httpPost(url:string, params?:any):Promise<any> {\r\n    let channel = new HttpChannel(false, url, undefined, undefined);\r\n    let ret = await channel.post('', params);\r\n    return ret;\r\n}\r\n*/\r\n\r\nconst methodsWithBody = ['POST', 'PUT'];\r\n\r\nexport abstract class HttpChannel {\r\n    private timeout: number;\r\n    protected ui?: HttpChannelUI;\r\n    protected hostUrl: string;\r\n    protected apiToken: string;\r\n\r\n    constructor(hostUrl: string, apiToken:string, ui?: HttpChannelUI) {\r\n        this.hostUrl = hostUrl;\r\n        this.apiToken = apiToken;\r\n        this.ui = ui;\r\n        this.timeout = env.isDevelopment === true? 500000:5000;\r\n    }\r\n\r\n    private startWait = () => {\r\n        if (this.ui !== undefined) this.ui.startWait();\r\n    }\r\n\r\n    private endWait = (url?:string, reject?:(reason?:any)=>void) => {\r\n        if (this.ui !== undefined) this.ui.endWait();\r\n        if (reject !== undefined) reject('访问webapi超时 ' + url);\r\n    }\r\n\r\n    private showError = async (error:FetchError) => {\r\n        if (this.ui !== undefined) await this.ui.showError(error);\r\n    }\r\n\r\n    used() {\r\n        this.post('', {});\r\n    }\r\n\r\n    async xcall(urlPrefix:string, caller:Caller<any>): Promise<void> {\r\n        let options = this.buildOptions();\r\n        let {headers, path, method} = caller;\r\n        if (headers !== undefined) {\r\n            let h = options.headers;\r\n            for (let i in headers) {\r\n                h.append(i, encodeURI(headers[i]));\r\n            }\r\n        }\r\n        options.method = method;\r\n        let p = caller.buildParams();\r\n        if (methodsWithBody.indexOf(method) >= 0 && p !== undefined) {\r\n            options.body = JSON.stringify(p)\r\n        }\r\n        return await this.innerFetch(urlPrefix + path, options);\r\n    }\r\n\r\n    private async innerFetchResult(url: string, options: any): Promise<any> {\r\n        let ret = await this.innerFetch(url, options);\r\n        return ret.res;\r\n    }\r\n\r\n    async get(url: string, params: any = undefined): Promise<any> {\r\n        if (params) {\r\n            let keys = Object.keys(params);\r\n            if (keys.length > 0) {\r\n                let c = '?';\r\n                for (let k of keys) {\r\n                    let v = params[k];\r\n                    if (v === undefined) continue;\r\n                    url += c + k + '=' + params[k];\r\n                    c = '&';\r\n                }\r\n            }\r\n        }\r\n        let options = this.buildOptions();\r\n        options.method = 'GET';\r\n        return await this.innerFetchResult(url, options);\r\n    }\r\n\r\n    async post(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'POST';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetchResult(url, options);\r\n    }\r\n\r\n    async put(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'PUT';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetchResult(url, options);\r\n    }\r\n\r\n    async delete(url: string, params: any): Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = 'DELETE';\r\n        options.body = JSON.stringify(params);\r\n        return await this.innerFetchResult(url, options);\r\n    }\r\n    async fetch(url: string, options: any, resolve:(value?:any)=>any, reject:(reason?:any)=>void):Promise<void> {\r\n        let that = this;\r\n        this.startWait();\r\n        let path = url;\r\n        function buildError(err: any) {\r\n            return {\r\n                channel: that,\r\n                url: path,\r\n                options: options,\r\n                resolve: resolve,\r\n                reject: reject,\r\n                error: err,\r\n            }\r\n        }\r\n        try {\r\n            console.log('%s %s', options.method, path);\r\n            let timeOutHandler = setTimeout(() => that.endWait(url, reject), this.timeout);\r\n            let res = await fetch(encodeURI(path), options);\r\n            if (res.ok === false) {\r\n                clearTimeout(timeOutHandler);\r\n                that.endWait();\r\n                console.log('call error %s', res.statusText);\r\n                throw res.statusText;\r\n            }\r\n            let ct = res.headers.get('content-type');\r\n            if (ct && ct.indexOf('json')>=0) {\r\n                return res.json().then(async retJson => {\r\n                    clearTimeout(timeOutHandler);\r\n                    that.endWait();\r\n                    if (retJson.ok === true) {\r\n                        if (typeof retJson !== 'object') {\r\n                            debugger;\r\n                        }\r\n                        else if (Array.isArray(retJson) === true) {\r\n                            debugger;\r\n                        }\r\n                        /*\r\n                        let json = retJson.res;\r\n                        if (json === undefined) {\r\n                            json = {\r\n                                $uq: retJson.$uq\r\n                            }\r\n                        }\r\n                        */\r\n                        //json.$modify = retJson.$modify;\r\n                        //return resolve(json);\r\n                        return resolve(retJson);\r\n                    }\r\n                    let retError = retJson.error;\r\n                    if (retError === undefined) {\r\n                        await that.showError(buildError('not valid tonva json'));\r\n                    }\r\n                    else {\r\n                        await that.showError(buildError(retError));\r\n                        reject(retError);\r\n                    }\r\n                }).catch(async error => {\r\n                    await that.showError(buildError(error));\r\n                });\r\n            }\r\n            else {\r\n                let text = await res.text();\r\n                clearTimeout(timeOutHandler);\r\n                that.endWait();\r\n                resolve(text);\r\n            }\r\n        }\r\n        catch(error) {\r\n            if (typeof error === 'string') {\r\n                let err = error.toLowerCase();\r\n                if (err.startsWith('unauthorized') === true) {\r\n                    nav.logout();\r\n                    return;\r\n                }\r\n            }\r\n            await this.showError(buildError(error.message));\r\n        };\r\n    }\r\n\r\n    protected abstract async innerFetch(url: string, options: any): Promise<any>;\r\n\r\n    async callFetch(url:string, method:string, body:any):Promise<any> {\r\n        let options = this.buildOptions();\r\n        options.method = method;\r\n        options.body = body;\r\n        return await new Promise<any>(async (resolve, reject) => {\r\n            await this.fetch(url, options, resolve, reject);\r\n        });\r\n    }\r\n\r\n    private buildOptions(): {method:string; headers:Headers; body:any} {\r\n        let headers = this.buildHeaders();\r\n        let options = {\r\n            headers: headers,\r\n            method: undefined,\r\n            body: undefined,\r\n            // cache: 'no-cache',\r\n        };\r\n        return options;\r\n    }\r\n\r\n    protected buildHeaders():Headers {\r\n        let {language, culture} = nav;\r\n        let headers = new Headers();\r\n        //headers.append('Access-Control-Allow-Origin', '*');\r\n        headers.append('Content-Type', 'application/json;charset=UTF-8');\r\n        let lang = language;\r\n        if (culture) lang += '-' + culture;\r\n        headers.append('Accept-Language', lang);\r\n        if (this.apiToken) { \r\n            headers.append('Authorization', this.apiToken); \r\n        }\r\n        return headers;\r\n    }\r\n}\r\n\r\nexport class CenterHttpChannel extends HttpChannel {\r\n    protected async innerFetch(url: string, options: any): Promise<any> {\r\n        let u = this.hostUrl + url;\r\n        if (this.apiToken === undefined && isBridged())\r\n            return await bridgeCenterApi(u, options.method, options.body);\r\n        return await new Promise<any>(async (resolve, reject) => {\r\n            await this.fetch(u, options, resolve, reject);\r\n        });\r\n    }\r\n}\r\n\r\nexport class UqHttpChannel extends HttpChannel {\r\n    /*\r\n    private uqForChannel: IUqForChannel;\r\n    constructor(hostUrl: string, apiToken:string, uqForChannel: IUqForChannel, ui?: HttpChannelUI) {\r\n        super(hostUrl, apiToken, ui);\r\n        this.uqForChannel = uqForChannel;\r\n    }\r\n    */\r\n    protected async innerFetch(url: string, options: any): Promise<any> {\r\n        let u = this.hostUrl + url;\r\n        return await new Promise<any>(async (resolve, reject) => {\r\n            await this.fetch(u, options, resolve, reject);\r\n        });\r\n    }\r\n\r\n    /*\r\n    protected buildHeaders():Headers {\r\n        let headers = super.buildHeaders();\r\n        if (this.uqForChannel !== undefined) {\r\n            let {uqVersion} = this.uqForChannel;\r\n            if (uqVersion !== undefined) {\r\n                headers.append('tonva-uq-version', String(uqVersion));\r\n            }\r\n        }\r\n        return headers;\r\n    }\r\n\r\n    protected async showSpecificError(err:string):Promise<boolean> {\r\n        if (err === 'unmatched uq version') {\r\n            if (this.ui !== undefined) {\r\n                let uq:string, uqVersion:number;\r\n                if (this.uqForChannel !== undefined) {\r\n                    uq = this.uqForChannel.uq;\r\n                    uqVersion = this.uqForChannel.uqVersion;\r\n                }\r\n                else {\r\n                    uq = 'undefined uq';\r\n                    uqVersion = 0;\r\n                }\r\n                await this.ui.showUpgradeUq(uq, uqVersion);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    */\r\n}\r\n","import {nav} from '../components/nav';\r\nimport {FetchError} from './fetchError';\r\n\r\nexport interface HttpChannelUI {\r\n    startWait():void;\r\n    endWait():void;\r\n    showError(error:FetchError):Promise<void>;\r\n    showUpgradeUq(uq:string, version:number):Promise<void>;\r\n}\r\n\r\nexport class HttpChannelNavUI implements HttpChannelUI {\r\n    startWait() {\r\n        nav.startWait();\r\n    }\r\n    endWait() {\r\n        nav.endWait();\r\n    }\r\n    async showError(error:FetchError):Promise<void> {\r\n        nav.endWait();\r\n        /*\r\n        if (error.name === 'SyntaxError') {\r\n            error = {\r\n                name: error.name,\r\n                message: error.message,\r\n            }\r\n        }*/\r\n        await nav.onError(error);\r\n    }\r\n    async showUpgradeUq(uq:string, version:number):Promise<void> {\r\n        await nav.showUpgradeUq(uq, version);\r\n    }\r\n}\r\n\r\n","import _ from 'lodash';\r\nimport {HttpChannel, CenterHttpChannel, UqHttpChannel} from './httpChannel';\r\nimport {HttpChannelNavUI} from './httpChannelUI';\r\nimport {appUq, logoutUqTokens, buildAppUq} from './appBridge';\r\nimport {ApiBase} from './apiBase';\r\nimport { host } from './host';\r\nimport { nav } from '../components';\r\nimport { LocalCache, LocalMap, env } from '../tool';\r\n\r\nlet channelUIs:{[name:string]: HttpChannel} = {};\r\nlet channelNoUIs:{[name:string]: HttpChannel} = {};\r\n\r\nexport function logoutApis() {\r\n    channelUIs = {};\r\n    channelNoUIs = {};\r\n    logoutUnitxApis();\r\n    logoutUqTokens();\r\n}\r\n\r\ninterface UqLocal {\r\n    user: number;\r\n    unit: number;\r\n    value: any;\r\n    tick?: number;\r\n    isNet?: boolean;\r\n}\r\ninterface UqLocals {\r\n    user: number;\r\n    unit: number;\r\n    uqs: {[uq:string]: UqLocal};\r\n}\r\n/*\r\nconst uqLocalEntities = 'uqLocalEntities';\r\nclass CacheUqLocals {\r\n    private local:UqLocals;\r\n\r\n    async loadAccess(uqApi: UqApi):Promise<any> {\r\n        try {\r\n            let {uqOwner, uqName} = uqApi;\r\n            if (this.local === undefined) {\r\n                let ls = null; // localStorage.getItem(uqLocalEntities);\r\n                if (ls !== null) {\r\n                    this.local = JSON.parse(ls);\r\n                }\r\n            }\r\n            if (this.local !== undefined) {\r\n                let {user, uqs} = this.local;\r\n                if (user !== loginedUserId || uqs === undefined) {\r\n                    this.local = undefined;\r\n                }\r\n                else {\r\n                    for (let i in uqs) {\r\n                        let ul = uqs[i];\r\n                        ul.isNet = undefined;\r\n                    }\r\n                }\r\n            }\r\n            if (this.local === undefined) {\r\n                this.local = {\r\n                    user: loginedUserId,\r\n                    unit: undefined,\r\n                    uqs: {}\r\n                };\r\n            }\r\n\r\n            let ret: any;\r\n            let un = uqOwner+'/'+uqName;\r\n            let uq = this.local.uqs[un];\r\n            if (uq !== undefined) {\r\n                let {value} = uq;\r\n                ret = value;\r\n            }\r\n            if (ret === undefined) {\r\n                ret = await uqApi.__loadAccess();\r\n                //this.saveLocal(un, ret);\r\n            }\r\n            return _.cloneDeep(ret);\r\n        }\r\n        catch (err) {\r\n            this.local = undefined;\r\n            localStorage.removeItem(uqLocalEntities);\r\n            throw err;\r\n        }\r\n    }\r\n\r\n    private saveLocal(uqName:string, accessValue: any) {\r\n        this.local.uqs[uqName] = {\r\n            value: accessValue,\r\n            isNet: true,\r\n        }\r\n        let str = JSON.stringify(this.local);\r\n        localStorage.setItem(uqLocalEntities, str);\r\n    }\r\n\r\n    async checkAccess(uqApi: UqApi):Promise<boolean> {\r\n        if (this.local === undefined) return false;\r\n        let {uqOwner, uqName} = uqApi;\r\n        let un = uqOwner+'/'+uqName;\r\n        let uq = this.local.uqs[un];\r\n        if (uq === undefined) return false;\r\n        let {isNet, value} = uq;\r\n        if (isNet === true) return true;\r\n        let ret = await uqApi.__loadAccess();\r\n        let isMatch = _.isMatch(value, ret);\r\n        if (isMatch === false) {\r\n            this.saveLocal(un, ret);\r\n            return false;\r\n        }\r\n        uq.isNet = true;\r\n        return true;\r\n    }\r\n}\r\n\r\nconst localUqs = new CacheUqLocals;\r\n*/\r\nexport class UqApi extends ApiBase {\r\n    private access:string[];\r\n    uqOwner: string;\r\n    uqName: string;\r\n    uq: string;\r\n    //uqVersion: number;\r\n\r\n    constructor(basePath: string, uqOwner: string, uqName: string, access:string[], showWaiting?: boolean) {\r\n        super(basePath, showWaiting);\r\n        if (uqName) {\r\n            this.uqOwner = uqOwner;\r\n            this.uqName = uqName;\r\n            this.uq = uqOwner + '/' + uqName;\r\n        }\r\n        this.access = access;\r\n        this.showWaiting = showWaiting;\r\n    }\r\n\r\n    //setUqVersion(uqVersion:number) {this.uqVersion = undefined}\r\n\r\n    async init() {\r\n        await buildAppUq(this.uq, this.uqOwner, this.uqName);\r\n    }\r\n\r\n    protected async getHttpChannel(): Promise<HttpChannel> {\r\n        let channels: {[name:string]: HttpChannel};\r\n        let channelUI: HttpChannelNavUI;\r\n        if (this.showWaiting === true || this.showWaiting === undefined) {\r\n            channels = channelUIs;\r\n            channelUI = new HttpChannelNavUI();\r\n        }\r\n        else {\r\n            channels = channelNoUIs;\r\n        }\r\n        let channel = channels[this.uq];\r\n        if (channel !== undefined) return channel;\r\n        let uqToken = appUq(this.uq); //, this.uqOwner, this.uqName);\r\n        if (!uqToken) {\r\n            debugger;\r\n            await this.init();\r\n            uqToken = appUq(this.uq);\r\n        }\r\n        let {url, token} = uqToken;\r\n        this.token = token;\r\n        channel = new UqHttpChannel(url, token, channelUI);\r\n        return channels[this.uq] = channel;\r\n    }\r\n\r\n    /*async update():Promise<string> {\r\n        return await this.get('update');\r\n    }*/\r\n\r\n    /*\r\n    async __loadAccess():Promise<any> {\r\n        let acc = this.access === undefined?\r\n            '' :\r\n            this.access.join('|');\r\n        let ret = await this.get('access', {acc:acc});\r\n        return ret;\r\n    }\r\n    */\r\n    async loadAccess():Promise<any> {\r\n        //return await localUqs.loadAccess(this);\r\n        let acc = this.access === undefined?\r\n            '' :\r\n            this.access.join('|');\r\n        let ret = await this.get('access', {acc:acc});\r\n        return ret;\r\n    }\r\n\r\n    /*async loadEntities():Promise<any> {\r\n        return await this.get('entities');\r\n    }*/\r\n\r\n    /*\r\n    async checkAccess():Promise<boolean> {\r\n        return await localUqs.checkAccess(this);\r\n    }\r\n    */\r\n\r\n    async schema(name:string):Promise<any> {\r\n        return await this.get('schema/' + name);\r\n    }\r\n\r\n    async queueModify(start:number, page:number, entities:string) {\r\n        return await this.post('queue-modify', {start:start, page:page, entities:entities});\r\n    }\r\n\r\n    /*async schemas(names:string[]):Promise<any[]> {\r\n        return await this.post('schema', names);\r\n    }*/\r\n\r\n    /*\r\n    async tuidGet(name:string, id:number):Promise<any> {\r\n        return await this.get('tuid/' + name + '/' + id);\r\n    }\r\n\r\n    async tuidGetAll(name:string):Promise<any[]> {\r\n        return await this.get('tuid-all/' + name + '/');\r\n    }\r\n\r\n    async tuidSave(name:string, params:any):Promise<any> {\r\n        return await this.post('tuid/' + name, params);\r\n    }\r\n\r\n    async tuidSearch(name:string, arr:string, owner:number, key:string, pageStart:string|number, pageSize:number):Promise<any> {\r\n        let ret = await this.post('tuids/' + name, {\r\n            arr: arr,\r\n            owner: owner,\r\n            key: key,\r\n            pageStart: pageStart,\r\n            pageSize: pageSize\r\n        });\r\n        return ret;\r\n    }\r\n    async tuidArrGet(name:string, arr:string, owner:number, id:number):Promise<any> {\r\n        return await this.get('tuid-arr/' + name + '/' + owner + '/' + arr + '/' + id);\r\n    }\r\n    async tuidArrGetAll(name:string, arr:string, owner:number):Promise<any[]> {\r\n        return await this.get('tuid-arr-all/' + name + '/' + owner + '/' + arr + '/');\r\n    }\r\n    async tuidArrSave(name:string, arr:string, owner:number, params:any):Promise<any> {\r\n        return await this.post('tuid-arr/' + name + '/' + owner + '/' + arr + '/', params);\r\n    }\r\n    async tuidArrPos(name:string, arr:string, owner:number, id:number, order:number):Promise<any> {\r\n        return await this.post('tuid-arr-pos/' + name + '/' + owner + '/' + arr + '/', {\r\n            id: id,\r\n            $order: order\r\n        });\r\n    }\r\n\r\n    async tuidIds(name:string, arr:string, ids:number[]):Promise<any[]> {\r\n        try {\r\n            let url = 'tuidids/' + name + '/';\r\n            if (arr !== undefined) url += arr;\r\n            else url += '$';\r\n            let ret = await this.post(url, ids);\r\n            return ret;\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n    }\r\n    */\r\n    /*async sheetSave(name:string, data:object):Promise<any> {\r\n        return await this.post('sheet/' + name, data);\r\n    }*/\r\n\r\n    /*async sheetAction(name:string, data:object) {\r\n        return await this.put('sheet/' + name, data);\r\n    }*/\r\n\r\n    /*async stateSheets(name:string, data:object) {\r\n        return await this.post('sheet/' + name + '/states', data);\r\n    }*/\r\n\r\n    /*async stateSheetCount(name:string):Promise<any> {\r\n        return await this.get('sheet/' + name + '/statecount');\r\n    }*/\r\n\r\n    /*async mySheets(name:string, data:object) {\r\n        return await this.post('sheet/' + name + '/my-sheets', data);\r\n    }*/\r\n\r\n    /*async getSheet(name:string, id:number):Promise<any> {\r\n        return await this.get('sheet/' + name + '/get/' + id);\r\n    }*/\r\n\r\n    /*async sheetArchives(name:string, data:object):Promise<any> {\r\n        return await this.post('sheet/' + name + '/archives', data);\r\n    }\r\n\r\n    async sheetArchive(name:string, id:number):Promise<any> {\r\n        return await this.get('sheet/' + name + '/archive/' + id);\r\n    }*/\r\n\r\n    /*async action(name:string, data:object):Promise<any> {\r\n        return await this.post('action/' + name, data);\r\n    }\r\n\r\n    async actionReturns(name:string, data:object):Promise<any[][]> {\r\n        return await this.post('action/' + name + '/returns', data);\r\n    }\r\n\r\n    async page(name:string, pageStart:any, pageSize:number, params:any):Promise<string> {\r\n        let p:any;\r\n        switch (typeof params) {\r\n            case 'undefined': p = {key: ''}; break;\r\n            default: p = _.clone(params); break;\r\n        }\r\n        p['$pageStart'] = pageStart;\r\n        p['$pageSize'] = pageSize;\r\n        return await this.post('query-page/' + name, p);\r\n    }\r\n\r\n    async query(name:string, params:any):Promise<any> {\r\n        let ret = await this.post('query/' + name, params);\r\n        return ret;\r\n    }\r\n    */\r\n/*\r\n    async history(name:string, pageStart:any, pageSize:number, params:any):Promise<string> {\r\n        let p = _.clone(params);\r\n        p['$pageStart'] = pageStart;\r\n        p['$pageSize'] = pageSize;\r\n        let ret = await this.post('history/' + name, p);\r\n        return ret;\r\n    }\r\n\r\n    async book(name:string, pageStart:any, pageSize:number, params:any):Promise<string> {\r\n        let p = _.clone(params);\r\n        p['$pageStart'] = pageStart;\r\n        p['$pageSize'] = pageSize;\r\n        let ret = await this.post('history/' + name, p);\r\n        return ret;\r\n    }\r\n*/\r\n    /*async user():Promise<any> {\r\n        return await this.get('user');\r\n    }*/\r\n}\r\n\r\nlet channels:{[unitId:number]: HttpChannel} = {};\r\n\r\nexport function logoutUnitxApis() {\r\n    channels = {};\r\n}\r\n\r\nexport class UnitxApi extends UqApi {\r\n    private unitId:number;\r\n    constructor(unitId:number) {\r\n        super('tv/', undefined, undefined, undefined, true);\r\n        this.unitId = unitId;\r\n    }\r\n\r\n    protected async getHttpChannel(): Promise<HttpChannel> {\r\n        let channel = channels[this.unitId];\r\n        if (channel !== undefined) return channel;\r\n        return channels[this.unitId] = await this.buildChannel();\r\n    }\r\n\r\n    private async buildChannel():Promise<HttpChannel> {\r\n        let channelUI = new HttpChannelNavUI();\r\n        let centerAppApi = new CenterAppApi('tv/', undefined);\r\n        let ret = await centerAppApi.unitxUq(this.unitId);\r\n        let {token, db, url, urlTest} = ret;\r\n        let realUrl = host.getUrlOrTest(db, url, urlTest);\r\n        this.token = token;\r\n        return new UqHttpChannel(realUrl, token, channelUI);\r\n    }\r\n}\r\n\r\nlet centerHost:string;\r\n\r\nexport function setCenterUrl(url:string) {\r\n    console.log('setCenterUrl %s', url);\r\n    centerHost = url;\r\n    centerToken = undefined;\r\n    centerChannel = undefined;\r\n    centerChannelUI = undefined;\r\n}\r\n\r\nexport let centerToken:string|undefined = undefined;\r\n\r\nlet loginedUserId:number = 0;\r\nexport function setCenterToken(userId:number, t?:string) {\r\n    loginedUserId = userId;\r\n    centerToken = t;\r\n    console.log('setCenterToken %s', t);\r\n    centerChannel = undefined;\r\n    centerChannelUI = undefined;\r\n}\r\n\r\nlet centerChannelUI:HttpChannel;\r\nlet centerChannel:HttpChannel;\r\nfunction getCenterChannelUI():HttpChannel {\r\n    if (centerChannelUI !== undefined) return centerChannelUI;\r\n    return centerChannelUI = new CenterHttpChannel(centerHost, centerToken, new HttpChannelNavUI());\r\n}\r\nfunction getCenterChannel():HttpChannel {\r\n    if (centerChannel !== undefined) return centerChannel;\r\n    return centerChannel = new CenterHttpChannel(centerHost, centerToken);\r\n}\r\n\r\nexport abstract class CenterApiBase extends ApiBase {\r\n    constructor(path: string, showWaiting?: boolean) {\r\n        super(path, showWaiting);\r\n    }\r\n\r\n    protected async getHttpChannel(): Promise<HttpChannel> {\r\n        return (this.showWaiting === true || this.showWaiting === undefined)?\r\n            getCenterChannelUI():\r\n            getCenterChannel();\r\n    }\r\n}\r\n\r\nconst uqTokensName = 'uqTokens';\r\nexport class UqTokenApi extends CenterApiBase {\r\n    private localMap: LocalMap = env.localDb.map(uqTokensName);\r\n\r\n    async uq(params: {unit:number, uqOwner:string, uqName:string}):Promise<any> {\r\n        let {uqOwner, uqName} = params;\r\n        let un = uqOwner+'/'+uqName;\r\n        let localCache = this.localMap.child(un);\r\n        try {\r\n            let uqToken:UqLocal = localCache.get();\r\n            if (uqToken !== undefined) {\r\n                let {unit, user} = uqToken;\r\n                if (unit !== params.unit || user !== loginedUserId) {\r\n                    localCache.remove();\r\n                    uqToken = undefined;\r\n                }\r\n            }\r\n            let nowTick = Math.floor(Date.now() / 1000);\r\n            if (uqToken !== undefined) {\r\n                let {tick, value} = uqToken;\r\n                if (value !== undefined && (nowTick - tick) < 24*3600) {\r\n                    return _.clone(value);\r\n                }\r\n            }\r\n            let appUqParams:any = _.clone(params);\r\n            appUqParams.testing = host.testing;\r\n            let ret = await this.get('app-uq', appUqParams);\r\n            if (ret === undefined) {\r\n                let {unit, uqOwner, uqName} = params;\r\n                let err = `center get app-uq(unit=${unit}, '${uqOwner}/${uqName}') - not exists or no unit-service`;\r\n                throw err;\r\n            }\r\n\r\n            uqToken = {\r\n                unit: params.unit,\r\n                user: loginedUserId,\r\n                tick: nowTick,\r\n                value: ret,\r\n            }\r\n            localCache.set(uqToken);\r\n            return _.clone(ret);\r\n        }\r\n        catch (err) {\r\n            localCache.remove();\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport const uqTokenApi = new UqTokenApi('tv/tie/', undefined);\r\n\r\nexport class CallCenterApi extends CenterApiBase {\r\n    directCall(url:string, method:string, body:any):Promise<any> {\r\n        return this.call(url, method, body);\r\n    }\r\n}\r\nexport const callCenterapi = new CallCenterApi('', undefined);\r\n\r\nexport interface UqAppData {\r\n    appName: string;\r\n    appOwner: string;\r\n    id: number;\r\n    version: string;        // AppUI version\r\n    uqs: UqData[];\r\n}\r\n\r\nexport interface UqData {\r\n    id: number;\r\n    uqOwner: string;\r\n    uqName: string;\r\n    access: string;\r\n    newVersion: boolean;\r\n}\r\n\r\nexport interface UqServiceData {\r\n    id: number;\r\n    db: string;\r\n    url: string;\r\n    urlTest: string;\r\n    token: string;\r\n}\r\n\r\nconst appUqsName = 'appUqs';\r\n\r\nexport class CenterAppApi extends CenterApiBase {\r\n    private local: LocalCache = env.localDb.item(appUqsName);\r\n    //private cachedUqs: UqAppData;\r\n    async uqs(appOwner:string, appName:string):Promise<UqAppData> {\r\n        let ret:UqAppData;\r\n        let appUqs = this.local.get();\r\n        if (appUqs) {\r\n            let {appOwner:rAppOwner, appName:rAppName} = appUqs;\r\n            if (appOwner === rAppOwner && appName === rAppName) ret = appUqs;\r\n        }\r\n        if (ret === undefined) {\r\n            ret = await this.uqsPure(appOwner, appName);\r\n            ret.appName = appName;\r\n            ret.appOwner = appOwner;\r\n            //localStorage.setItem(JSON.stringify(obj));\r\n            this.local.set(ret);\r\n        }\r\n        //return this.cachedUqs = _.cloneDeep(ret);\r\n        return ret;\r\n    }\r\n    private async uqsPure(appOwner:string, appName:string):Promise<UqAppData> {\r\n        return await this.get('tie/app-uqs', {appOwner:appOwner, appName:appName});\r\n    }\r\n    private async isOkCheckUqs(appOwner:string, appName:string):Promise<boolean> {\r\n        let ret = await this.uqsPure(appOwner, appName);\r\n        let {id:cachedId, uqs:cachedUqs} = this.local.get(); //.cachedUqs;\r\n        let {id:retId, uqs:retUqs} = ret;\r\n        if (cachedId !== retId) return false;\r\n        if (cachedUqs.length !== retUqs.length) return false;\r\n        let len = cachedUqs.length;\r\n        for (let i=0; i<len; i++) {\r\n            if (_.isMatch(cachedUqs[i], retUqs[i]) === false) return false;\r\n        }\r\n        return true;\r\n    }\r\n    async checkUqs(appOwner:string, appName:string):Promise<boolean> {\r\n        let ret = await this.isOkCheckUqs(appOwner, appName);\r\n        if (ret === false) {\r\n            this.local.remove();\r\n            nav.start();\r\n        }\r\n        return ret;\r\n    }\r\n    async unitxUq(unit:number):Promise<UqServiceData> {\r\n        return await this.get('tie/unitx-uq', {unit:unit});\r\n    }\r\n    async changePassword(param: {orgPassword:string, newPassword:string}) {\r\n        return await this.post('tie/reset-password', param);\r\n    }\r\n}\r\n\r\nexport async function loadAppUqs(appOwner:string, appName:string): Promise<UqAppData> {\r\n    let centerAppApi = new CenterAppApi('tv/', undefined);\r\n    //let unit = meInFrame.unit;\r\n    let ret = await centerAppApi.uqs(appOwner, appName);\r\n    await centerAppApi.checkUqs(appOwner, appName);\r\n    /*\r\n    .then(v => {\r\n        if (v === false) {\r\n            localStorage.removeItem(appUqs);\r\n            nav.start();\r\n        }\r\n    });\r\n    */\r\n    return ret;\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Controller } from '../../components';\r\n\r\nexport abstract class Link {\r\n    abstract onClick: () => void;\r\n    abstract render(className?:string):JSX.Element;\r\n}\r\n\r\nexport class CLink extends Link {\r\n    private controller: Controller;\r\n    protected icon:string|JSX.Element;\r\n    protected label:string|JSX.Element;\r\n\r\n    constructor(controller:Controller) {\r\n        super();\r\n        this.controller = controller;\r\n        this.icon = controller.icon;\r\n        this.label = controller.label;\r\n    }\r\n\r\n    onClick = async () => {\r\n        await this.controller.start();\r\n    }\r\n\r\n    render(className?:string) {\r\n        return <div\r\n            className={classNames('px-3', 'py-2', 'align-items-center', 'cursor-pointer', className)}\r\n            onClick={this.onClick}>\r\n            {this.icon} &nbsp; {this.label}\r\n        </div>;\r\n        //return React.createElement(this.view, className);\r\n    }\r\n}\r\n","export * from './cLink';\r\n","const ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\nconst ID_LENGTH = 8;\r\n\r\nexport function uid():string {\r\n    let len = ALPHABET.length;\r\n    let rtn = '';\r\n    for (let i = 0; i < ID_LENGTH; i++) {\r\n        rtn += ALPHABET.charAt(Math.floor(Math.random() * len));\r\n    }\r\n    return rtn;\r\n}\r\n","\r\nlet subAppWindow:Window;\r\nfunction postWsToSubApp(msg:any) {\r\n    if (subAppWindow === undefined) return;\r\n    subAppWindow.postMessage({\r\n        type: 'ws',\r\n        msg: msg\r\n    }, '*');\r\n}\r\n\r\nexport function setSubAppWindow(win:Window) {\r\n    subAppWindow = win;\r\n}\r\n\r\nexport function postWsToTop(msg:any) {\r\n    window.top.postMessage({\r\n        type: 'ws',\r\n        msg: msg\r\n    }, '*');\r\n}\r\n\r\nexport abstract class WsBase {\r\n    wsBaseId:string;\r\n    private handlerSeed = 1;\r\n    private anyHandlers:{[id:number]:(msg:any)=>Promise<void>} = {};\r\n    private msgHandlers:{[id:number]:{type:string, handler:(msg:any)=>Promise<void>}} = {};\r\n    onWsReceiveAny(handler:(msg:any)=>Promise<void>):number {\r\n        let seed = this.handlerSeed++;\r\n        this.anyHandlers[seed] = handler;\r\n        return seed;\r\n    }\r\n    onWsReceive(type:string, handler:(msg:any)=>Promise<void>):number {\r\n        let seed = this.handlerSeed++;\r\n        this.msgHandlers[seed] = {type:type, handler: handler};\r\n        return seed;\r\n    }\r\n    endWsReceive(handlerId:number) {\r\n        delete this.anyHandlers[handlerId];\r\n        delete this.msgHandlers[handlerId];\r\n    }\r\n    async receive(msg:any) {\r\n        let {$type} = msg;\r\n        for (let i in this.anyHandlers) {\r\n            await this.anyHandlers[i](msg);\r\n        }\r\n        for (let i in this.msgHandlers) {\r\n            let {type, handler} = this.msgHandlers[i];\r\n            if (type !== $type) continue;\r\n            await handler(msg);\r\n        }\r\n    }\r\n}\r\n\r\nlet wsBaseSeed = 1;\r\nexport class WsBridge extends WsBase {\r\n    wsBaseId:string = 'WsBridge seed ' + wsBaseSeed++;\r\n}\r\n\r\nexport const wsBridge = new WsBridge();\r\n\r\nexport class WSChannel extends WsBase {\r\n    wsBaseId:string = 'WSChannel seed ' + wsBaseSeed++;\r\n    static centerToken:string;\r\n    private wsHost: string;\r\n    private token: string;\r\n    private ws: WebSocket;\r\n\r\n    constructor(wsHost: string, token: string) {\r\n        super();\r\n        this.wsHost = wsHost;\r\n        this.token = token;\r\n    }\r\n\r\n    static setCenterToken(token?: string) {\r\n        WSChannel.centerToken = token;\r\n    }\r\n    \r\n    connect():Promise<void> {\r\n        //this.wsHost = wsHost;\r\n        //this.token = token || WSChannel.centerToken;\r\n        if (this.ws !== undefined) return;\r\n        let that = this;\r\n        return new Promise((resolve, reject) => {\r\n            let ws = new WebSocket(this.wsHost, this.token || WSChannel.centerToken);\r\n            console.log('connect webSocket %s', this.wsHost);\r\n            ws.onopen = (ev) => {\r\n                console.log('webSocket connected %s', this.wsHost);\r\n                that.ws = ws;\r\n                resolve();\r\n            };\r\n            ws.onerror = (ev) => {\r\n                reject('webSocket can\\'t open!');\r\n            };\r\n            ws.onmessage = async (msg) => await that.wsMessage(msg);\r\n            ws.onclose = (ev) => {\r\n                that.ws = undefined;\r\n                console.log('webSocket closed!');\r\n            }\r\n        });\r\n    }\r\n    close() {\r\n        if (this.ws !== undefined) {\r\n            this.ws.close();\r\n            this.ws = undefined;\r\n        }\r\n    }\r\n    private async wsMessage(event:any):Promise<void> {\r\n        try {\r\n            console.log('websocket message: %s', event.data);\r\n            let msg = JSON.parse(event.data);\r\n            postWsToSubApp(msg);\r\n            await this.receive(msg);\r\n        }\r\n        catch (err) {\r\n            console.log('ws msg error: ', err);\r\n        }\r\n    }\r\n    sendWs(msg:any) {\r\n        let netThis = this;\r\n        this.connect().then(() => {\r\n            netThis.ws.send(msg);\r\n        });\r\n    }\r\n}\r\n","import { UqApi } from '../net';\r\nimport { LocalCache } from '../tool';\r\nimport { UqMan, Field, ArrFields, FieldMap } from './uqMan';\r\nimport { Tuid } from './tuid';\r\n//import { EntityCache } from './caches';\r\n\r\nconst tab = '\\t';\r\nconst ln = '\\n';\r\n\r\nexport abstract class Entity {\r\n    private jName: string;\r\n    schema: any;\r\n    ver: number = 0;\r\n    sys?: boolean;\r\n    readonly uq: UqMan;\r\n    readonly name: string;\r\n    readonly typeId: number;\r\n    readonly cache: LocalCache;\r\n    readonly uqApi: UqApi;\r\n    abstract get typeName(): string;\r\n    get sName():string {return this.jName || this.name}\r\n    fields: Field[];\r\n    arrFields: ArrFields[];\r\n    returns: ArrFields[];\r\n\r\n    constructor(uq:UqMan, name:string, typeId:number) {\r\n        this.uq = uq;\r\n        this.name = name;\r\n        this.typeId = typeId;\r\n        this.sys = this.name.indexOf('$') >= 0;\r\n        this.cache = this.uq.localMap.item(this.name); // new EntityCache(this);\r\n        this.uqApi = this.uq.uqApi;\r\n    }\r\n\r\n    public face: any;           // 对应字段的label, placeHolder等等的中文，或者语言的翻译\r\n\r\n    //getApiFrom() {return this.entities.uqApi;}\r\n\r\n    private fieldMaps: {[arr:string]: FieldMap} = {};\r\n    fieldMap(arr?:string): FieldMap {\r\n        if (arr === undefined) arr = '$';\r\n        let ret = this.fieldMaps[arr];\r\n        if (ret === undefined) {\r\n            let fields:Field[];\r\n            if (arr === '$') fields = this.fields;\r\n            else if (this.arrFields !== undefined) {\r\n                let arrFields = this.arrFields.find(v => v.name === arr);\r\n                if (arrFields !== undefined) fields = arrFields.fields;\r\n            }\r\n            else if (this.returns !== undefined) {\r\n                let arrFields = this.returns.find(v => v.name === arr);\r\n                if (arrFields !== undefined) fields = arrFields.fields;\r\n            }\r\n            if (fields === undefined) return {};\r\n            ret = {};\r\n            for (let f of fields) ret[f.name] = f;\r\n            this.fieldMaps[arr] = ret;\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    public async loadSchema():Promise<void> {\r\n        if (this.schema !== undefined) return;\r\n        let schema = this.cache.get();\r\n        if (!schema) {\r\n            schema = await this.uq.loadEntitySchema(this.name);\r\n        }\r\n        this.setSchema(schema);\r\n        this.buildFieldsTuid();\r\n    }\r\n\r\n    // 如果要在setSchema里面保存cache，必须先调用clearSchema\r\n    public clearSchema() {\r\n        this.schema = undefined;\r\n    }\r\n\r\n    public setSchema(schema:any) {\r\n        if (schema === undefined) return;\r\n        let {name, version} = schema;\r\n        this.ver = version || 0;\r\n        if (name !== this.name) this.jName = name;\r\n        //if (this.schema === undefined) \r\n        this.cache.set(schema);\r\n        this.schema = schema;\r\n        //this.buildFieldsTuid();\r\n    }\r\n\r\n    public buildFieldsTuid() {\r\n        let {fields, arrs, returns} = this.schema;\r\n        this.uq.buildFieldTuid(this.fields = fields);\r\n        this.uq.buildArrFieldsTuid(this.arrFields = arrs, fields);\r\n        this.uq.buildArrFieldsTuid(this.returns = returns, fields);\r\n    }\r\n\r\n    schemaStringify():string {\r\n        return JSON.stringify(this.schema, (key:string, value:any) => {\r\n            if (key === '_tuid') return undefined;\r\n            return value;\r\n        }, 4);\r\n    }\r\n\r\n    tuidFromName(fieldName:string, arrName?:string):Tuid {\r\n        if (this.schema === undefined) return;\r\n        let {fields, arrs} = this.schema;\r\n        let entities = this.uq;\r\n        function getTuid(fn:string, fieldArr:Field[]) {\r\n            if (fieldArr === undefined) return;\r\n            let f = fieldArr.find(v => v.name === fn);\r\n            if (f === undefined) return;\r\n            return entities.getTuid(f.tuid);\r\n        }\r\n        let fn = fieldName.toLowerCase();\r\n        if (arrName === undefined) return getTuid(fn, fields);\r\n        if (arrs === undefined) return;\r\n        let an = arrName.toLowerCase();\r\n        let arr = (arrs as ArrFields[]).find(v => v.name === an);\r\n        if (arr === undefined) return;\r\n        return getTuid(fn, arr.fields);\r\n    }\r\n\r\n    buildParams(params:any):any {\r\n        let result = {};\r\n        let fields = this.fields;\r\n        if (fields !== undefined) this.buildFieldsParams(result, fields, params);\r\n        let arrs = this.arrFields;\r\n        if (arrs !== undefined) {\r\n            for (let arr of arrs) {\r\n                let {name, fields} = arr;\r\n                let paramsArr:any[] = params[name];\r\n                if (paramsArr === undefined) continue;\r\n                let arrResult = [];\r\n                result[name] = arrResult;\r\n                for (let pa of params) {\r\n                    let rowResult = {};\r\n                    this.buildFieldsParams(rowResult, fields, pa);\r\n                    arrResult.push(rowResult);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private buildFieldsParams(result:any, fields:Field[], params:any) {\r\n        for (let field of fields) {\r\n            let {name, type} = field;            \r\n            let d = params[name];\r\n            let val:any;\r\n            if (type === 'datetime') {\r\n                val = this.buildDateTimeParam(d);\r\n            }\r\n            else {\r\n                switch (typeof d) {\r\n                    default: val = d; break;\r\n                    case 'object':\r\n                        let tuid = field._tuid;\r\n                        if (tuid === undefined) val = d.id;\r\n                        else val = tuid.getIdFromObj(d);\r\n                        break;\r\n                }\r\n            }\r\n            result[name] = val;\r\n        }\r\n    }\r\n\r\n    buildDateTimeParam(val:any) {\r\n        let dt: Date;\r\n        switch (typeof val) {\r\n            default: debugger; throw 'escape datetime field in pack data error: value=' + val;\r\n            case 'undefined': return undefined;\r\n            case 'object': dt = (val as Date); break;\r\n            case 'string':\r\n            case 'number': dt = new Date(val); break;\r\n        }\r\n        return Math.floor(dt.getTime()/1000);\r\n    }\r\n\r\n    buildDateParam(val:any) {\r\n        let dt: Date;\r\n        switch (typeof val) {\r\n            default: debugger; throw 'escape datetime field in pack data error: value=' + val;\r\n            case 'undefined': return undefined;\r\n            case 'string': return val;\r\n            case 'object': dt = (val as Date); break;\r\n            case 'number': dt = new Date(val); break;\r\n        }\r\n        let ret = dt.toISOString();\r\n        let p = ret.indexOf('T');\r\n        return p>0? ret.substr(0, p) : ret;\r\n}\r\n\r\n    pack(data:any):string {\r\n        let ret:string[] = [];\r\n        let fields = this.fields;\r\n        if (fields !== undefined) this.packRow(ret, fields, data);\r\n        let arrs = this.arrFields; \r\n        if (arrs !== undefined) {\r\n            for (let arr of arrs) {\r\n                this.packArr(ret, arr.fields, data[arr.name]);\r\n            }\r\n        }\r\n        return ret.join('');\r\n    }\r\n\r\n    private escape(row:any, field:Field):any {\r\n        let d = row[field.name];\r\n        switch (field.type) {\r\n            case 'datetime':\r\n                return this.buildDateTimeParam(d);\r\n            default:\r\n                switch (typeof d) {\r\n                    default: return d;\r\n                    case 'object':\r\n                        let tuid = field._tuid;\r\n                        if (tuid === undefined) return d.id;\r\n                        return tuid.getIdFromObj(d);\r\n                    case 'string':\r\n                        let len = d.length;\r\n                        let r = '', p = 0;\r\n                        for (let i=0;i<len;i++) {\r\n                            let c = d.charCodeAt(i);\r\n                            switch(c) {\r\n                                case 9: r += d.substring(p, i) + '\\\\t'; p = i+1; break;\r\n                                case 10: r += d.substring(p, i) + '\\\\n'; p = i+1; break;\r\n                            }\r\n                        }\r\n                        return r + d.substring(p);\r\n                    case 'undefined': return '';\r\n                }\r\n        }\r\n    }\r\n\r\n    private packRow(result:string[], fields:Field[], data:any) {\r\n        let len = fields.length;\r\n        if (len === 0) return;\r\n        let ret = '';\r\n        ret += this.escape(data, fields[0]);\r\n        for (let i=1;i<len;i++) {\r\n            let f = fields[i];\r\n            ret += tab + this.escape(data, f);\r\n        }\r\n        result.push(ret + ln);\r\n    }\r\n\r\n    private packArr(result:string[], fields:Field[], data:any[]) {\r\n        if (data !== undefined) {\r\n            for (let row of data) {\r\n                this.packRow(result, fields, row);\r\n            }\r\n        }\r\n        result.push(ln);\r\n    }\r\n    protected cacheFieldsInValue(values:any, fields:Field[]) {\r\n        for (let f of fields as Field[]) {\r\n            let {name, _tuid} = f;\r\n            if (_tuid === undefined) continue;\r\n            let id = values[name];\r\n            //_tuid.useId(id);\r\n            values[name] = _tuid.boxId(id);\r\n        }\r\n    }\r\n\r\n    protected unpackTuidIdsOfFields(values:string[], fields: Field[]):any[] {\r\n        if (fields === undefined) return values as any[];\r\n        //if (this.fields === undefined) return values as any[];\r\n        let ret:any[] = []\r\n        for (let ln of values) {\r\n            if (!ln) continue;\r\n            let len = ln.length;\r\n            let p = 0;\r\n            while (p<len) {\r\n                let ch = ln.charCodeAt(p);\r\n                if (ch === 10) {\r\n                    ++p;\r\n                    break;\r\n                }\r\n                let row = {};\r\n                p = this.unpackRow(row, fields, ln, p);\r\n                ret.push(row);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    unpackSheet(data:string):any {\r\n        let ret = {} as any; //new this.newMain();\r\n        //if (schema === undefined || data === undefined) return;\r\n        let fields = this.fields;\r\n        let p = 0;\r\n        if (fields !== undefined) p = this.unpackRow(ret, fields, data, p);\r\n        let arrs = this.arrFields; //schema['arrs'];\r\n        if (arrs !== undefined) {\r\n            for (let arr of arrs) {\r\n                p = this.unpackArr(ret, arr, data, p);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    unpackReturns(data:string):any {\r\n        if (data === undefined) debugger;\r\n        let ret = {} as any;\r\n        //if (schema === undefined || data === undefined) return;\r\n        //let fields = schema.fields;\r\n        let p = 0;\r\n        //if (fields !== undefined) p = unpackRow(ret, schema.fields, data, p);\r\n        let arrs = this.returns; //schema['returns'];\r\n        if (arrs !== undefined) {\r\n            for (let arr of arrs) {\r\n                //let creater = this.newRet[arr.name];\r\n                p = this.unpackArr(ret, arr, data, p);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    protected unpackRow(ret:any, fields:Field[], data:string, p:number):number {\r\n        let ch0 = 0, ch = 0, c = p, i = 0, len = data.length, fLen = fields.length;\r\n        for (;p<len;p++) {\r\n            ch0 = ch;\r\n            ch = data.charCodeAt(p);\r\n            if (ch === 9) {\r\n                let f = fields[i];\r\n                let {name} = f;\r\n                if (ch0 !== 8) {\r\n                    if (p>c) {\r\n                        let v = data.substring(c, p);\r\n                        ret[name] = this.to(ret, v, f);\r\n                    }\r\n                }\r\n                else {\r\n                    ret[name] = null;\r\n                }\r\n                c = p+1;\r\n                ++i;\r\n                if (i>=fLen) {\r\n                    p = data.indexOf('\\n', c);\r\n                    if (p >= 0) ++p;\r\n                    else p = len;\r\n                    return p;\r\n                }\r\n            }\r\n            else if (ch === 10) {\r\n                let f = fields[i];\r\n                let {name} = f;\r\n                if (ch0 !== 8) {\r\n                    if (p>c) {\r\n                        let v = data.substring(c, p);\r\n                        ret[name] = this.to(ret, v, f);\r\n                    }\r\n                }\r\n                else {\r\n                    ret[name] = null;\r\n                }\r\n                ++p;\r\n                ++i;\r\n                return p;\r\n            }\r\n        }\r\n        let f = fields[i];\r\n        let {name} = f;\r\n        if (ch0 !== 8) {\r\n            let v = data.substring(c);\r\n            ret[name] = this.to(ret, v, f);\r\n        }\r\n        return len;\r\n    }\r\n\r\n    private to(ret:any, v:string, f:Field):any {\r\n        switch (f.type) {\r\n            default: return v;\r\n            case 'datetime':\r\n            case 'time':\r\n                let n = Number(v);\r\n                let date = isNaN(n) === true? new Date(v) : new Date(n*1000);\r\n                return date;\r\n            case 'date':\r\n                let parts = v.split('-');\r\n                return new Date(Number(parts[0]), Number(parts[1])-1, Number(parts[2]));\r\n            case 'tinyint':\r\n            case 'smallint':\r\n            case 'int':\r\n            case 'bigint':\r\n            case 'dec':\r\n                return Number(v);\r\n            case 'id':\r\n                let id = Number(v);\r\n                let {_tuid} = f;\r\n                if (_tuid === undefined) return id;\r\n                return _tuid.boxId(id);\r\n        }\r\n    }\r\n\r\n    private unpackArr(ret:any, arr:ArrFields, data:string, p:number):number {\r\n        let vals:any[] = [], len = data.length;\r\n        let {name, fields} = arr;\r\n        while (p<len) {\r\n            let ch = data.charCodeAt(p);\r\n            if (ch === 10) {\r\n                ++p;\r\n                break;\r\n            }\r\n            let val = {} as any; //new creater();\r\n            vals.push(val);\r\n            p = this.unpackRow(val, fields, data, p);\r\n        }\r\n        ret[name] = vals;\r\n        return p;\r\n    }\r\n}\r\n","import _ from 'lodash';\r\nimport { Caller } from '../net';\r\nimport { Entity } from './entity';\r\nimport { Action } from './action';\r\nimport { Query } from './query';\r\n\r\ninterface UqResponseSchema {\r\n    uq: any;\r\n    entity: any;\r\n}\r\n\r\nexport abstract class EntityCaller<T> extends Caller<T> {\r\n    private tries: number;\r\n    protected entity: Entity;\r\n\r\n    constructor(entity: Entity, params:T) {\r\n        super(params);\r\n        this.tries = 0;\r\n        this.entity = entity;\r\n    }\r\n\r\n    //大多的entityCaller都不需要这个\r\n    //buildParams() {return this.entity.buildParams(this.params);}\r\n    \r\n    async request(): Promise<any> {\r\n        await this.entity.loadSchema();\r\n        let ret = await this.innerRequest();\r\n        return ret;\r\n    }\r\n\r\n    protected async innerCall(): Promise<any> {\r\n        return await this.entity.uqApi.xcall(this);\r\n    }\r\n\r\n    async innerRequest(): Promise<any> {\r\n        let jsonResult = await this.innerCall();\r\n        let {$uq, $modify, res} = jsonResult;\r\n        this.entity.uq.pullModify($modify);\r\n        if ($uq === undefined) {\r\n            //if (res === undefined) debugger;\r\n            let ret = this.xresult(res);\r\n            //if (ret === undefined) debugger;\r\n            return ret;\r\n        }\r\n        return await this.retry($uq);\r\n    }\r\n\r\n    xresult(res:any):any {return res}\r\n\r\n    get headers(): {[header:string]: string} {\r\n        let {ver, uq} = this.entity;\r\n        let {uqVersion} = uq;\r\n        return {\r\n            uq: `${uqVersion}`,\r\n            en: `${ver}`,\r\n        }\r\n    }\r\n\r\n    private async retry(schema: UqResponseSchema) {\r\n        ++this.tries;\r\n        if (this.tries > 5) throw 'can not get right uq response schema, 5 tries';\r\n        this.rebuildSchema(schema);\r\n        return await this.innerRequest();\r\n    }\r\n\r\n    private rebuildSchema(schema: UqResponseSchema) {\r\n        let {uq, entity} = schema;\r\n        if (uq !== undefined) this.entity.uq.buildEntities(uq);\r\n        if (entity !== undefined) this.entity.setSchema(entity);\r\n    }\r\n}\r\n\r\nexport abstract class ActionCaller extends EntityCaller<any> {\r\n    protected entity: Action;\r\n}\r\n\r\nexport class QueryQueryCaller extends EntityCaller<any> {\r\n    protected entity: Query;\r\n    get path():string {return `query/${this.entity.name}`;}\r\n    xresult(res:any) {\r\n        let data = this.entity.unpackReturns(res);\r\n        return data;\r\n    }\r\n    buildParams() {return this.entity.buildParams(this.params);}\r\n}\r\n\r\nexport class QueryPageCaller extends EntityCaller<any> {\r\n    protected readonly params: {pageStart:any; pageSize:number, params:any};\r\n    protected entity: Query;\r\n    get path():string {return `query-page/${this.entity.name}`;}\r\n    buildParams() {\r\n        let {pageStart, pageSize, params} = this.params;\r\n        let p:any;\r\n        if (params === undefined) {\r\n            p = {key: ''};\r\n        }\r\n        else {\r\n            p = this.entity.buildParams(params);\r\n        }\r\n        /*\r\n        switch (typeof params) {\r\n            case 'undefined': p = {key: ''}; break;\r\n            default: p = _.clone(params); break;\r\n        }\r\n        */\r\n        p['$pageStart'] = pageStart;\r\n        p['$pageSize'] = pageSize;\r\n        return p;\r\n    };\r\n    xresult(res:any) {\r\n        let data = this.entity.unpackReturns(res);\r\n        return data.$page;// as any[];\r\n    }\r\n}\r\n","import { observable } from 'mobx';\r\nimport { isNumber } from 'util';\r\nimport _ from 'lodash';\r\nimport { LocalArr } from '../../tool';\r\nimport { BoxId } from './boxId';\r\nimport { TuidInner, TuidDiv } from './tuid';\r\n\r\nconst maxCacheSize = 1000;\r\n\r\nexport class IdCache {\r\n    private queue: number[] = [];               // 每次使用，都排到队头\r\n    private cache = observable.map({}, {deep: false});    // 已经缓冲的\r\n\r\n    protected localArr:LocalArr;\r\n    protected waitingIds: number[] = [];          // 等待loading的\r\n    protected tuidInner: TuidInner;\r\n\r\n    constructor(tuidLocal: TuidInner) {\r\n        this.tuidInner = tuidLocal;\r\n        this.initLocalArr();\r\n    }\r\n\r\n    protected initLocalArr() {\r\n        this.localArr = this.tuidInner.cache.arr(this.tuidInner.name + '.ids');\r\n    }\r\n\r\n    useId(id:number, defer?:boolean) {\r\n        if (id === undefined || id === 0) return;\r\n        if (isNumber(id) === false) return;\r\n        if (this.cache.has(id) === true) {\r\n            this.moveToHead(id);\r\n            return;\r\n        }\r\n        this.tuidInner.cacheTuids(defer===true?70:20);\r\n        this.cache.set(id, id);\r\n        if (this.waitingIds.findIndex(v => v === id) >= 0) {\r\n            this.moveToHead(id);\r\n            return;\r\n        }\r\n\r\n        if (this.queue.length >= maxCacheSize) {\r\n            // 缓冲已满，先去掉最不常用的\r\n            let r = this.queue.shift();\r\n            if (r === id) {\r\n                // 如果移除的，正好是现在用的，则插入\r\n                this.queue.push(r);\r\n                return;\r\n            }\r\n\r\n            //let rKey = String(r);\r\n            if (this.cache.has(r) === true) {\r\n                // 如果移除r已经缓存\r\n                this.cache.delete(r);\r\n            }\r\n            else {\r\n                // 如果移除r还没有缓存\r\n                let index = this.waitingIds.findIndex(v => v === r);\r\n                this.waitingIds.splice(index, 1);\r\n            }\r\n        }\r\n        this.waitingIds.push(id);\r\n        this.queue.push(id);\r\n        return;\r\n    }\r\n\r\n    private moveToHead(id:number) {\r\n        let index = this.queue.findIndex(v => v === id);\r\n        this.queue.splice(index, 1);\r\n        this.queue.push(id);\r\n    }\r\n\r\n    getValue(id:number) {\r\n        return this.cache.get(id);\r\n    }\r\n\r\n    remove(id:number) {\r\n        this.cache.delete(id);\r\n        let index = this.queue.findIndex(v => v === id);\r\n        this.queue.splice(index, 1);\r\n    }\r\n\r\n    valueFromId(id:number|BoxId):any {\r\n        let _id:number;\r\n        switch (typeof id) {\r\n            case 'object': _id = (id as BoxId).id; break;\r\n            case 'number': _id = id as number; break;\r\n            default: return;\r\n        }\r\n        return this.getValue(_id);\r\n    }\r\n\r\n    resetCache(id:number) {\r\n        this.remove(id);\r\n        this.useId(id);\r\n    }\r\n\r\n    cacheValue(val:any):boolean {\r\n        if (val === undefined) return false;\r\n        let id = this.getIdFromObj(val);\r\n        if (id === undefined) return false;\r\n        let index = this.waitingIds.findIndex(v => v === id);\r\n        if (index>=0) this.waitingIds.splice(index, 1);\r\n        this.cache.set(id, val);\r\n        return true;\r\n    }\r\n    protected getIdFromObj(val:any) {return this.tuidInner.getIdFromObj(val)}\r\n\r\n    async cacheIds():Promise<void> {\r\n        if (this.waitingIds.length === 0) return;\r\n        let tuidValues = await this.loadIds();\r\n        await this.cacheIdValues(tuidValues);\r\n    }\r\n\r\n    private async cacheIdValues(tuidValues: any[]) {\r\n        if (tuidValues === undefined) return;\r\n        let tuids = this.unpackTuidIds(tuidValues);\r\n        for (let tuidValue of tuids) {\r\n            if (this.cacheValue(tuidValue) === false) continue;\r\n            this.cacheTuidFieldValues(tuidValue);\r\n        }\r\n    }\r\n    async modifyIds(ids:any[]):Promise<void> {\r\n        //let tuidValues:string[] = await this.tuidInner.loadTuidIds(this.divName, ids);\r\n        let tuidValues:string[] = await this.loadTuidIdsOrLocal(ids);\r\n        let localedValues = tuidValues.filter(v => {\r\n            let p = v.indexOf('\\t');\r\n            if (p<0) p = v.length;\r\n            let id = Number(v.substr(0, p));\r\n            let val = this.localArr.getItem(id);\r\n            return (val !== undefined);\r\n        });\r\n        if (localedValues.length === 0) return;\r\n        await this.cacheIdValues(localedValues);\r\n    }\r\n    protected divName:string = undefined;\r\n    protected async loadIds(): Promise<any[]> {\r\n        //let ret = await this.tuidInner.loadTuidIds(this.divName, this.waitingIds);\r\n        let ret = await this.loadTuidIdsOrLocal(this.waitingIds);\r\n        return ret;\r\n    }\r\n    protected unpackTuidIds(values:string[]):any[] {\r\n        return this.tuidInner.unpackTuidIds(values);\r\n    }\r\n    protected cacheTuidFieldValues(tuidValue: any) {\r\n        this.tuidInner.cacheTuidFieldValues(tuidValue);\r\n    }\r\n\r\n    async assureObj(id:number):Promise<any> {\r\n        let val = this.cache.get(id);\r\n        switch (typeof val) {\r\n            case 'object': return;\r\n            case 'number': this.cache.set(id, id); break;\r\n        }\r\n        //let ret = await this.tuidInner.loadTuidIds(this.divName, [id]);\r\n        let ret = await this.loadTuidIdsOrLocal([id]);\r\n        await this.cacheIdValues(ret);\r\n    }\r\n\r\n    private async loadTuidIdsOrLocal(ids:number[]):Promise<string[]> {\r\n        let ret:string[] = [];        \r\n        let netIds:number[] = [];\r\n        for (let id of ids) {\r\n            let value = this.localArr.getItem(id);\r\n            if (value === undefined)\r\n                netIds.push(id);\r\n            else\r\n                ret.push(value);\r\n        }\r\n        let len = netIds.length;\r\n        if (len > 0) {\r\n            let netRet = await this.tuidInner.loadTuidIds(this.divName, netIds);\r\n            for (let i=0; i<len; i++) {\r\n                //有些id可能没有内容，不会返回\r\n                //let id = netIds[i]; \r\n                let row:string = netRet[i];\r\n                if (!row) continue;\r\n                let p = row.indexOf('\\t');\r\n                if (p < 0) p = row.length;\r\n                let id = Number(row.substr(0, p));\r\n                _.remove(netIds, v => v === id);\r\n                ret.push(row);\r\n                this.localArr.setItem(id, row);\r\n            }\r\n            len = netIds.length;\r\n            for (let i=0; i<len; i++) {\r\n                this.localArr.setItem(netIds[i], '');\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n\r\nexport class IdDivCache extends IdCache {\r\n    private div: TuidDiv;\r\n    protected divName:string;\r\n\r\n    constructor(tuidLocal:TuidInner, div: TuidDiv) {\r\n        super(tuidLocal);\r\n        this.div = div;\r\n        this.divName = div.name;\r\n        this.localArr = tuidLocal.cache.arr(tuidLocal.name + '.ids.' + this.divName);\r\n    }\r\n\r\n    protected initLocalArr() {\r\n        // 这个不需要，必须去掉\r\n        // this.localArr = this.tuidInner.cache.arr(this.tuidInner.name + '.ids');\r\n    }\r\n\r\n    protected getIdFromObj(val:any) {return this.div.getIdFromObj(val)}\r\n    protected unpackTuidIds(values:string[]):any[] {\r\n        return this.div.unpackTuidIds(values);\r\n    }\r\n    protected cacheTuidFieldValues(tuidValue: any) {\r\n        this.div.cacheTuidFieldValues(tuidValue);\r\n    }\r\n\r\n    /*\r\n    async cacheIds():Promise<void> {\r\n        if (this.waitingIds.length === 0) return;\r\n        let tuidValues = await this.loadIds();\r\n        if (tuidValues !== undefined) {\r\n            let tuids = this.tuidLocal.unpackTuidIds(tuidValues);\r\n            for (let tuidValue of tuids) {\r\n                if (this.cacheValue(tuidValue) === false) continue;\r\n                this.tuidLocal.cacheTuidFieldValues(tuidValue);\r\n                this.afterCacheValue(tuidValue);\r\n            }\r\n        }\r\n    }\r\n    */\r\n}\r\n","import _ from 'lodash';\r\nimport { LocalArr } from '../../tool';\r\nimport { Entity } from '../entity';\r\nimport { UqMan, ArrFields, Field, SchemaFrom } from '../uqMan';\r\nimport { EntityCaller } from '../caller';\r\nimport { BoxId } from './boxId';\r\nimport { IdCache, IdDivCache } from './idCache';\r\n\r\nexport interface TuidSaveResult {\r\n    id: number;\r\n    inId: number;\r\n}\r\n\r\nexport abstract class Tuid extends Entity {\r\n    readonly typeName:string = 'tuid';\r\n    protected idName: string;\r\n    cached: boolean;\r\n    unique: string[];\r\n\r\n    constructor(uq:UqMan, name:string, typeId:number) {\r\n        super(uq, name, typeId)\r\n    }\r\n\r\n    public setSchema(schema:any) {\r\n        super.setSchema(schema);\r\n        let {id} = schema;\r\n        this.idName = id;\r\n    }\r\n\r\n    buildTuidBox(): TuidBox {\r\n        return new TuidBox(this);\r\n    }\r\n\r\n    getIdFromObj(obj:any):number {return obj[this.idName]}\r\n    abstract useId(id:number):void;\r\n    abstract boxId(id:number):BoxId;\r\n    abstract valueFromId(id:number):any;\r\n    abstract async assureBox (id:number): Promise<void>;\r\n    cacheIds() {}\r\n    async modifyIds(ids:any[]) {}\r\n    isImport = false;\r\n    abstract get hasDiv():boolean;// {return this.divs!==undefined}\r\n    abstract div(name:string):TuidDiv;\r\n    abstract async loadMain(id:number|BoxId):Promise<any>;\r\n    abstract async load(id:number|BoxId):Promise<any>;\r\n    abstract async save(id:number, props:any):Promise<TuidSaveResult>;\r\n    abstract async search(key:string, pageStart:string|number, pageSize:number):Promise<any>;\r\n    abstract async searchArr(owner:number, key:string, pageStart:string|number, pageSize:number):Promise<any>;\r\n    abstract async loadArr(arr:string, owner:number, id:number):Promise<any>;\r\n    abstract async saveArr(arr:string, owner:number, id:number, props:any):Promise<void>;\r\n    abstract async posArr(arr:string, owner:number, id:number, order:number):Promise<void>;\r\n}\r\n\r\nexport class TuidInner extends Tuid {\r\n    private divs: {[div:string]: TuidDiv};\r\n    protected cacheFields: Field[];\r\n    protected idCache: IdCache;\r\n    protected localArr:LocalArr;\r\n    constructor(uq:UqMan, name:string, typeId:number) {\r\n        super(uq, name, typeId);\r\n        this.idCache = new IdCache(this);\r\n        this.localArr = this.cache.arr(this.name + '.whole');\r\n        if (uq.newVersion === true) this.localArr.removeAll();\r\n    }\r\n\r\n    public setSchema(schema:any) {\r\n        super.setSchema(schema);\r\n        let {arrs} = schema;\r\n        if (arrs !== undefined) {\r\n            this.divs = {};\r\n            for (let arr of arrs) {\r\n                let {name} = arr;\r\n                let tuidDiv = new TuidDiv(this.uq, this, name);\r\n                this.divs[name] = tuidDiv;\r\n                tuidDiv.setSchema(arr);\r\n                tuidDiv.buildFieldsTuid();\r\n            }\r\n        }\r\n    }\r\n    \r\n    useId(id:number, defer?:boolean) {\r\n        this.idCache.useId(id, defer);\r\n    }\r\n    boxId(id:number):BoxId {\r\n        if (typeof id === 'object') return id;\r\n        this.useId(id);\r\n        let {createBoxId} = this.uq;\r\n        if (!createBoxId) return {id: id} as BoxId;\r\n        return createBoxId(this, id);\r\n    }\r\n    valueFromId(id:number) {return this.idCache.getValue(id)}\r\n    async assureBox (id:number):Promise<void> {\r\n        await this.idCache.assureObj(id);\r\n    }\r\n\r\n    cacheIds() {\r\n        this.idCache.cacheIds();\r\n        if (this.divs === undefined) return;\r\n        for (let i in this.divs) this.divs[i].cacheIds();\r\n    }\r\n    async modifyIds(ids:any[]) {\r\n        await this.idCache.modifyIds(ids);\r\n    }\r\n    cacheTuids(defer:number) {this.uq.cacheTuids(defer)}\r\n    get hasDiv():boolean {return this.divs!==undefined}\r\n    div(name:string):TuidDiv {\r\n        return this.divs && this.divs[name];\r\n    }\r\n    async loadTuidIds(divName:string, ids:number[]):Promise<any[]> {\r\n        //return await this.uqApi.tuidIds(this.name, divName, ids);\r\n        let ret:any[] = await new IdsCaller(this, {divName:divName, ids:ids}).request();\r\n        if (ret.length > 0) this.cached = true;\r\n        return ret;\r\n    }\r\n    async loadMain(id:number|BoxId):Promise<any> {\r\n        if (typeof id === 'object') id = id.id;\r\n        await this.idCache.assureObj(id);\r\n        return this.idCache.valueFromId(id);\r\n    }\r\n    async load(id:number|BoxId):Promise<any> {\r\n        if (id === undefined || id === 0) return;\r\n        //let cacheValue = this.idCache.valueFromId(id); \r\n        //if (typeof cacheValue === 'object') return cacheValue;\r\n        if (typeof id === 'object') id = id.id;\r\n        let valuesText = this.localArr.getItem(id);\r\n        let values: any;\r\n        if (valuesText) {\r\n            values = JSON.parse(valuesText);\r\n        }\r\n        else {\r\n            values = await new GetCaller(this, id).request();\r\n            if (values !== undefined) {\r\n                this.localArr.setItem(id, JSON.stringify(values));\r\n            }\r\n        }\r\n        if (values === undefined) return;\r\n        for (let f of this.schema.fields) {\r\n            let {tuid} = f;\r\n            if (tuid === undefined) continue;\r\n            let t = this.uq.getTuid(tuid);\r\n            if (t === undefined) continue;\r\n            let n = f.name;\r\n            values[n] = t.boxId(values[n]);\r\n        }\r\n        this.idCache.cacheValue(values);\r\n        this.cacheTuidFieldValues(values);\r\n        return values;\r\n    }\r\n\r\n    cacheTuidFieldValues(values:any) {\r\n        let {fields, arrs} = this.schema;\r\n        this.cacheFieldsInValue(values, fields);\r\n        if (arrs !== undefined) {\r\n            for (let arr of arrs as ArrFields[]) {\r\n                let {name, fields} = arr;\r\n                let arrValues = values[name];\r\n                if (arrValues === undefined) continue;\r\n                let tuidDiv = this.div(name);\r\n                for (let row of arrValues) {\r\n                    //row._$tuid = tuidDiv;\r\n                    //row.$owner = this.boxId(row.owner);\r\n                    tuidDiv.cacheValue(row);\r\n                    this.cacheFieldsInValue(row, fields);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public buildFieldsTuid() {\r\n        super.buildFieldsTuid();\r\n        let {mainFields} = this.schema;\r\n        if (mainFields === undefined) debugger;\r\n        this.uq.buildFieldTuid(this.cacheFields = mainFields || this.fields);\r\n    }\r\n\r\n    unpackTuidIds(values:string[]):any[] {\r\n        return this.unpackTuidIdsOfFields(values, this.cacheFields);\r\n    }\r\n\r\n    async save(id:number, props:any):Promise<TuidSaveResult> {\r\n        /*\r\n        let {fields} = this.schema;\r\n        let params:any = {$id: id};\r\n        for (let field of fields as Field[]) {\r\n            let {name, tuid, type} = field;\r\n            let val = props[name];\r\n            if (tuid !== undefined) {\r\n                if (typeof val === 'object') {\r\n                    if (val !== null) val = val.id;\r\n                }\r\n            }\r\n            else {\r\n                switch (type) {\r\n                    case 'date':\r\n                    case 'datetime':\r\n                        val = new Date(val).toISOString();\r\n                        val = (val as string).replace('T', ' ');\r\n                        val = (val as string).replace('Z', '');\r\n                        break;\r\n                }\r\n            }\r\n            params[name] = val;\r\n        }\r\n        let ret = await this.uqApi.tuidSave(this.name, params);\r\n        return ret;\r\n        */\r\n        let ret = new SaveCaller(this, {id:id, props:props}).request();\r\n        if (id !== undefined) {\r\n            this.idCache.remove(id);\r\n            this.localArr.removeItem(id);\r\n        }\r\n        return ret;\r\n    }\r\n    async search(key:string, pageStart:string|number, pageSize:number):Promise<any> {\r\n        let ret:any[] = await this.searchArr(undefined, key, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n    async searchArr(owner:number, key:string, pageStart:string|number, pageSize:number):Promise<any> {\r\n        //let api = this.uqApi;\r\n        //let ret = await api.tuidSearch(this.name, undefined, owner, key, pageStart, pageSize);\r\n        let params = {arr:undefined, owner:owner, key:key, pageStart:pageStart, pageSize:pageSize};\r\n        let ret = await new SearchCaller(this, params).request();\r\n        let {fields} = this.schema;\r\n        for (let row of ret) {\r\n            this.cacheFieldsInValue(row, fields);\r\n        }\r\n        return ret;\r\n    }\r\n    async loadArr(arr:string, owner:number, id:number):Promise<any> {\r\n        if (id === undefined || id === 0) return;\r\n        //let api = this.uqApi;\r\n        //return await api.tuidArrGet(this.name, arr, owner, id);\r\n        return await new LoadArrCaller(this, {arr:arr, owner:owner, id:id}).request();\r\n    }\r\n    async saveArr(arr:string, owner:number, id:number, props:any) {\r\n        //let params = _.clone(props);\r\n        //params[\"$id\"] = id;\r\n        //return await this.uqApi.tuidArrSave(this.name, arr, owner, params);\r\n        return await new SaveArrCaller(this, {arr:arr, owner:owner, id:id, props:props}).request();\r\n    }\r\n\r\n    async posArr(arr:string, owner:number, id:number, order:number) {\r\n        //return await this.uqApi.tuidArrPos(this.name, arr, owner, id, order);\r\n        return await new ArrPosCaller(this, {arr:arr, owner:owner, id:id, order:order}).request();\r\n    }\r\n}\r\n\r\nabstract class TuidCaller<T> extends EntityCaller<T> {\r\n    protected entity: Tuid;\r\n}\r\n\r\n// 包含main字段的load id\r\n// 当前为了兼容，先调用的包含所有字段的内容\r\nclass GetCaller extends TuidCaller<number> {\r\n    method = 'GET';\r\n    get path():string {return `tuid/${this.entity.name}/${this.params}`}\r\n}\r\n\r\nclass IdsCaller extends TuidCaller<{divName:string, ids:number[]}> {\r\n    get path():string {\r\n        let {divName} = this.params;\r\n        return `tuidids/${this.entity.name}/${divName !== undefined?divName:'$'}`;\r\n    }\r\n    buildParams():any {return this.params.ids}\r\n    xresult(res:any):any {\r\n        return (res as string).split('\\n');\r\n    }\r\n}\r\n\r\n\r\nclass SaveCaller extends TuidCaller<{id:number, props:any}> {\r\n    get path():string {return `tuid/${this.entity.name}`}\r\n    buildParams():any {\r\n        let {fields, arrs} = this.entity.schema;\r\n        let {id, props} = this.params;\r\n        let params:any = {$id: id};\r\n        this.transParams(params, props, fields);\r\n        if (arrs !== undefined) {\r\n            for (let arr of arrs) {\r\n                let arrName = arr.name;\r\n                let arrParams = [];\r\n                let arrFields = arr.fields;\r\n                let arrValues = props[arrName];\r\n                if (arrValues !== undefined) {\r\n                    for (let arrValue of arrValues) {\r\n                        let row = {};\r\n                        this.transParams(row, arrValue, arrFields);\r\n                        arrParams.push(row);\r\n                    }\r\n                }\r\n                params[arrName] = arrParams;\r\n            }\r\n        }\r\n        return params;\r\n    }\r\n    private transParams(values:any, params:any, fields:Field[]) {\r\n        if (params === undefined) return;\r\n        for (let field of fields) {\r\n            let {name, tuid, type} = field;\r\n            let val = params[name];\r\n            if (tuid !== undefined) {\r\n                if (typeof val === 'object') {\r\n                    if (val !== null) val = val.id;\r\n                }\r\n            }\r\n            else {\r\n                switch (type) {\r\n                    case 'date':\r\n                        val = this.entity.buildDateParam(val); \r\n                        //val = (val as string).replace('T', ' ');\r\n                        //val = (val as string).replace('Z', '');\r\n                        break;\r\n                    case 'datetime':\r\n                        val = this.entity.buildDateTimeParam(val);\r\n                        //val = new Date(val).toISOString();\r\n                        //val = (val as string).replace('T', ' ');\r\n                        //val = (val as string).replace('Z', '');\r\n                        break;\r\n                }\r\n            }\r\n            values[name] = val;\r\n        }\r\n    }\r\n}\r\n\r\nclass SearchCaller extends TuidCaller<{arr:string, owner:number, key:string, pageStart:string|number, pageSize:number}> {\r\n    get path():string {return `tuids/${this.entity.name}`}\r\n}\r\n\r\nclass LoadArrCaller extends TuidCaller<{arr:string, owner:number, id:number}> {\r\n    method = 'GET';\r\n    get path():string {\r\n        let {arr, owner, id} = this.params;\r\n        return `tuid-arr/${this.entity.name}/${owner}/${arr}/${id}`;\r\n    }\r\n}\r\n\r\nclass SaveArrCaller extends TuidCaller<{arr:string, owner:number, id:number, props:any}> {\r\n    get path():string {\r\n        let {arr, owner} = this.params;\r\n        return `tuid-arr/${this.entity.name}/${owner}/${arr}/`;\r\n    }\r\n    buildParams():any {\r\n        let {id, props} = this.params;\r\n        let params = _.clone(props);\r\n        params['$id'] = id;\r\n        return params;\r\n    }\r\n}\r\n\r\nclass ArrPosCaller extends TuidCaller<{arr:string, owner:number, id:number, order:number}> {\r\n    get path():string {\r\n        let {arr, owner} = this.params;\r\n        return `tuid-arr-pos/${this.entity.name}/${owner}/${arr}/`;\r\n    }\r\n    buildParams():any {\r\n        let {id, order} = this.params;\r\n        return { bid: id, $order: order}\r\n    }\r\n}\r\n\r\nexport class TuidImport extends Tuid {\r\n    private tuidLocal: TuidInner;\r\n\r\n    constructor(uq:UqMan, name:string, typeId:number, from: SchemaFrom) {\r\n        super(uq, name, typeId);\r\n        this.from = from;\r\n    }\r\n\r\n    setFrom(tuidLocal: TuidInner) {this.tuidLocal = tuidLocal}\r\n    \r\n    readonly from: SchemaFrom;\r\n    isImport = true;\r\n\r\n    useId(id:number) {this.tuidLocal.useId(id);}\r\n    boxId(id:number):BoxId {return this.tuidLocal.boxId(id);}\r\n    valueFromId(id:number) {return this.tuidLocal.valueFromId(id)}\r\n    async assureBox(id:number):Promise<void> {\r\n        await this.tuidLocal.assureBox(id);\r\n    }\r\n    get hasDiv():boolean {return this.tuidLocal.hasDiv}\r\n    div(name:string):TuidDiv {return this.tuidLocal.div(name)}\r\n    async loadMain(id:number|BoxId):Promise<any> {\r\n        let ret = await this.tuidLocal.loadMain(id);\r\n        return ret;\r\n    }\r\n    async load(id:number|BoxId):Promise<any> {\r\n        return await this.tuidLocal.load(id);\r\n    }\r\n    async save(id:number, props:any):Promise<TuidSaveResult> {\r\n        return await this.tuidLocal.save(id, props);\r\n    }\r\n    async search(key:string, pageStart:string|number, pageSize:number):Promise<any> {\r\n        return await this.tuidLocal.search(key, pageStart, pageSize);\r\n    }\r\n    async searchArr(owner:number, key:string, pageStart:string|number, pageSize:number):Promise<any> {\r\n        return await this.tuidLocal.searchArr(owner, key, pageStart, pageSize);\r\n    }\r\n    async loadArr(arr:string, owner:number, id:number):Promise<any> {\r\n        return await this.tuidLocal.loadArr(arr, owner, id);\r\n    }\r\n    async saveArr(arr:string, owner:number, id:number, props:any):Promise<void> {\r\n        await this.tuidLocal.saveArr(arr, owner, id, props);\r\n    }\r\n    async posArr(arr:string, owner:number, id:number, order:number):Promise<void> {\r\n        await this.tuidLocal.posArr(arr, owner, id, order);\r\n    }\r\n}\r\n\r\n// field._tuid 用这个接口\r\n// Tuid, TuidDiv 实现这个接口\r\nexport class TuidBox {\r\n    tuid: Tuid;\r\n    ownerField:Field = undefined;\r\n    constructor(tuid: Tuid) {\r\n        this.tuid = tuid;\r\n    }\r\n\r\n    boxId(id:number):BoxId {\r\n        return this.tuid.boxId(id);\r\n    }\r\n    getIdFromObj(obj:any):number {\r\n        return this.tuid.getIdFromObj(obj);\r\n    }\r\n    useId(id:number):void {\r\n        return this.tuid.useId(id);\r\n    }\r\n    async showInfo() {\r\n        alert('showInfo not implemented');\r\n    }\r\n}\r\n\r\n\r\nexport class TuidDiv extends TuidInner /* Entity*/ {\r\n    readonly typeName:string = 'div';\r\n    protected cacheFields: Field[];\r\n    protected tuid: TuidInner;\r\n    protected idName: string;\r\n    protected idCache: IdDivCache;\r\n\r\n    //ui: React.StatelessComponent<any>;\r\n    //res: any;\r\n\r\n    constructor(uq: UqMan, tuid: TuidInner, name: string) {\r\n        super(uq, name, 0);\r\n        this.tuid = tuid;\r\n        this.idName = 'id';\r\n        this.idCache = new IdDivCache(tuid, this);\r\n    }\r\n\r\n    get owner() {return this.tuid}\r\n\r\n    /*\r\n    setSchema(schema:any) {\r\n        super.setSchema(schema);\r\n        this.buildFieldsTuid();\r\n    }*/\r\n\r\n    /*\r\n    setUIRes(ui:any, res:any) {\r\n        this.ui = ui && ui.content;\r\n        this.res = res;\r\n    }\r\n    */\r\n\r\n    buildFieldsTuid() {\r\n        super.buildFieldsTuid();\r\n        let {mainFields} = this.schema;\r\n        if (mainFields === undefined) debugger;\r\n        this.uq.buildFieldTuid(this.cacheFields = mainFields);\r\n    }\r\n\r\n    buildTuidDivBox(ownerField: Field): TuidBoxDiv {\r\n        return new TuidBoxDiv(this.tuid, this, ownerField);\r\n    }\r\n\r\n    getIdFromObj(obj:any):number {return obj[this.idName]}\r\n    cacheValue(value:any):void {\r\n        this.idCache.cacheValue(value);\r\n    }\r\n\r\n    useId(id:number, defer?:boolean):void {\r\n        this.idCache.useId(id, defer);\r\n    }\r\n\r\n    /*\r\n    boxId(id:number):BoxId {\r\n        if (typeof id === 'object') return id;\r\n        this.useId(id);\r\n        //return new BoxDivId(this.tuid, this, id);\r\n        return this.tuid.boxDivId(this, id);\r\n    }\r\n    */\r\n    valueFromId(id:number):any {\r\n        return this.idCache.getValue(id)\r\n    }\r\n\r\n    async assureBox(id:number):Promise<void> {\r\n        await this.idCache.assureObj(id);\r\n    }\r\n\r\n    async cacheIds() {\r\n        await this.idCache.cacheIds();\r\n    }\r\n\r\n    cacheTuidFieldValues(values:any) {\r\n        let fields = this.schema.fields;\r\n        this.cacheFieldsInValue(values, fields);\r\n    }\r\n\r\n    unpackTuidIds(values:string[]):any[] {\r\n        return this.unpackTuidIdsOfFields(values, this.cacheFields);\r\n    }\r\n}\r\n\r\nexport class TuidBoxDiv extends TuidBox {\r\n    ownerField: Field;\r\n    private div: TuidDiv;\r\n    constructor(tuid: Tuid, div: TuidDiv, ownerField: Field) {\r\n        super(tuid);\r\n        this.div = div;\r\n        this.ownerField = ownerField;\r\n    }\r\n\r\n    boxId(id:number):BoxId {\r\n        return this.div.boxId(id);\r\n    }\r\n    getIdFromObj(obj:any):number {\r\n        return this.div.getIdFromObj(obj);\r\n    }\r\n    useId(id:number):void {\r\n        return this.div.useId(id);\r\n    }\r\n}\r\n","import { UqMan, TuidModify } from '../uqMan';\r\nimport { Tuid } from \"./tuid\";\r\n\r\ninterface Modify {\r\n    id: number;\r\n    entity: string;\r\n    key: string;\r\n}\r\n\r\nexport class TuidsCache {\r\n    private readonly uq: UqMan;\r\n    //private readonly uqApi: UqApi;\r\n    //private readonly tuids: {[name:string]: Tuid};\r\n    private modifyMax: TuidModify;\r\n    private cacheTimer: any;\r\n    constructor(uq: UqMan) {\r\n        this.uq = uq;\r\n        //this.uqApi = uq.uqApi;\r\n        //this.tuids = uq.tuids;\r\n    }\r\n\r\n    cacheTuids(defer:number) {\r\n        this.clearCacheTimer();\r\n        this.cacheTimer = setTimeout(this.loadIds, defer);\r\n    }\r\n    private clearCacheTimer() {\r\n        if (this.cacheTimer === undefined) return;\r\n        clearTimeout(this.cacheTimer);\r\n        this.cacheTimer = undefined;\r\n    }\r\n    private loadIds = () => {\r\n        this.clearCacheTimer();\r\n        let {tuids} = this.uq;\r\n        for (let i in tuids) {\r\n            let tuid = tuids[i];\r\n            tuid.cacheIds();\r\n        }\r\n    }\r\n    \r\n    pullModify(modifyMax:number) {\r\n        if (modifyMax === undefined) return;\r\n        let now = Math.floor(Date.now() / 1000);\r\n        if (this.modifyMax === undefined) {\r\n            this.modifyMax = this.uq.localModifyMax.get();\r\n            if (this.modifyMax === undefined) {\r\n                this.modifyMax = {\r\n                    max: modifyMax,\r\n                    seconds: now,\r\n                };\r\n                this.uq.localModifyMax.set(this.modifyMax);\r\n            }\r\n        }\r\n        let {max, seconds} = this.modifyMax;\r\n        let lockGap = 3600;\r\n        if (now - seconds < lockGap) return;\r\n        if (modifyMax <= max) return;\r\n        let tuidCached:string[] = [];\r\n        let {tuids} = this.uq;\r\n        for (let i in tuids) {\r\n            //if (tuids[i].cached === true) \r\n            tuidCached.push(i);\r\n        }\r\n        if (tuidCached.length === 0) return;\r\n        this.modifyMax.seconds = now;\r\n        this.innerPullModify(tuidCached.join('\\t'));\r\n    }\r\n\r\n    private async innerPullModify(tuidLists:string):Promise<void> {\r\n        let {uqApi, tuids} = this.uq;\r\n        let {max} = this.modifyMax;\r\n        let ret:{queue:Modify[], queueMax:number} = await uqApi.queueModify(max, 30, tuidLists);\r\n        let group:{[entity:string]: {tuid:Tuid; ids: string[]}} = {};\r\n        let modifyMax:number = 0;\r\n        for (let modify of ret.queue) {\r\n            let {id, entity, key} = modify;\r\n            let tuid = tuids[entity];\r\n            if (tuid === undefined) continue;\r\n            let item = group[entity];\r\n            if (item === undefined) {\r\n                item = group[entity] = {tuid: tuid, ids:[]};\r\n            }\r\n            item.ids.push(key);\r\n            if (id > modifyMax) modifyMax = id;\r\n        }\r\n        for (let i in group) {\r\n            let {tuid, ids} = group[i];\r\n            await tuid.modifyIds(ids);\r\n        }\r\n        let now = Math.floor(Date.now() / 1000);\r\n        this.modifyMax = {\r\n            max: modifyMax,\r\n            seconds: now,\r\n        }\r\n        this.uq.localModifyMax.set(this.modifyMax);\r\n    }\r\n}\r\n","import { Entity } from './entity';\r\nimport { ActionCaller } from './caller';\r\n\r\nexport class Action extends Entity {\r\n    get typeName(): string { return 'action';}\r\n    async submit(data:object) {\r\n        //await this.loadSchema();\r\n        //let text = this.pack(data);\r\n        //return await this.uqApi.action(this.name, {data:text});\r\n        return await new ActionSubmitCaller(this, data).request();\r\n    }\r\n    async submitReturns(data:object):Promise<{[ret:string]:any[]}> {\r\n        /*\r\n        await this.loadSchema();\r\n        let text = this.pack(data);\r\n        let result = await this.uqApi.actionReturns(this.name, {data:text});\r\n        */\r\n       return await new SubmitReturnsCaller(this, data).request();\r\n    }\r\n}\r\n\r\nexport class ActionSubmitCaller extends ActionCaller {\r\n    get path():string {return 'action/' + this.entity.name;}\r\n    buildParams():any {return {data: this.entity.pack(this.params)}}\r\n}\r\n\r\nclass SubmitReturnsCaller extends ActionSubmitCaller {\r\n    get path():string {return 'action/' + this.entity.name + '/returns';}\r\n    xresult(res:any):any {\r\n        let {returns} = this.entity;\r\n        let len = returns.length;\r\n        let ret:{[r:string]:any[]} = {};\r\n        for (let i=0; i<len; i++) {\r\n            let retSchema = returns[i];\r\n            ret[retSchema.name] = res[i];\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n","import { Entity } from './entity';\r\nimport { PageItems } from '../tool/pageItems';\r\nimport { EntityCaller } from './caller';\r\n\r\nexport interface SheetState {\r\n    name: string;\r\n    actions: SheetAction[];\r\n}\r\n\r\nexport interface SheetAction {\r\n    name: string;\r\n}\r\n\r\nexport interface StateCount {\r\n    state: string;\r\n    count: number;\r\n}\r\n\r\nexport class Sheet extends Entity {\r\n    get typeName(): string { return 'sheet';}\r\n    states: SheetState[];\r\n\r\n    /*\r\n    setStates(states: SheetState[]) {\r\n        for (let state of states) {\r\n            this.setStateAccess(this.states.find(s=>s.name==state.name), state);\r\n        }\r\n    }*/\r\n    setSchema(schema:any) {\r\n        super.setSchema(schema);\r\n        this.states = schema.states;\r\n    }\r\n    build(obj:any) {\r\n        this.states = [];\r\n        for (let op of obj.ops) {\r\n            this.states.push({name: op, actions:undefined});\r\n        }\r\n        /*\r\n        for (let p in obj) {\r\n            switch(p) {\r\n                case '#':\r\n                case '$': continue;\r\n                default: this.states.push(this.createSheetState(p, obj[p])); break;\r\n            }\r\n        }*/\r\n    }\r\n    private createSheetState(name:string, obj:object):SheetState {\r\n        let ret:SheetState = {name:name, actions:[]};\r\n        let actions = ret.actions;\r\n        for (let p in obj) {\r\n            let action:SheetAction = {name: p};\r\n            actions.push(action);\r\n        }\r\n        return ret;\r\n    }\r\n    /*\r\n    private setStateAccess(s:SheetState, s1:SheetState) {\r\n        if (s === undefined) return;\r\n        for (let action of s1.actions) {\r\n            let acn = action.name;\r\n            let ac = s.actions.find(a=>a.name === acn);\r\n            if (ac === undefined) continue;\r\n            s.actions.push(action);\r\n        }\r\n    }*/\r\n    async save(discription:string, data:any):Promise<any> {\r\n        /*\r\n        await this.loadSchema();\r\n        let {id} = this.uq;\r\n        let text = this.pack(data);\r\n\r\n        let ret = await this.uqApi.sheetSave(this.name, );\r\n        return ret;\r\n        */\r\n        let {id} = this.uq;\r\n        //let text = this.pack(data);\r\n        let params = {app: id, discription: discription, data:data};\r\n        return await new SaveCaller(this, params).request();\r\n        /*\r\n        let {id, state} = ret;\r\n        if (id > 0) this.changeStateCount(state, 1);\r\n        return ret;\r\n        */\r\n    }\r\n    async action(id:number, flow:number, state:string, action:string) {\r\n        /*\r\n        await this.loadSchema();\r\n        return await this.uqApi.sheetAction(this.name, {id:id, flow:flow, state:state, action:action});\r\n        */\r\n        return await new ActionCaller(this, {id:id, flow:flow, state:state, action:action}).request();\r\n    }\r\n    private unpack(data:any):any {\r\n        //if (this.schema === undefined) await this.loadSchema();\r\n        let ret = data[0];\r\n        let brief = ret[0];\r\n        let sheetData = this.unpackSheet(brief.data);\r\n        let flows = data[1];\r\n        return {\r\n            brief: brief,\r\n            data: sheetData,\r\n            flows: flows,\r\n        }\r\n    }\r\n    async getSheet(id:number):Promise<any> {\r\n        /*\r\n        await this.loadSchema();\r\n        let ret = await this.uqApi.getSheet(this.name, id);\r\n        */\r\n        let ret = await new GetSheetCaller(this, id).request();\r\n        if (ret[0].length === 0) return await this.getArchive(id);\r\n        return this.unpack(ret);\r\n    }\r\n    async getArchive(id:number):Promise<any> {\r\n        /*\r\n        await this.loadSchema();\r\n        let ret = await this.uqApi.sheetArchive(this.name, id)\r\n        return this.unpack(ret);\r\n        */\r\n        let ret = await new SheetArchiveCaller(this, id).request();\r\n        return this.unpack(ret);\r\n    }\r\n\r\n    async getArchives(pageStart:number, pageSize:number) {\r\n        /*\r\n        await this.loadSchema();\r\n        let ret = await this.uqApi.sheetArchives(this.name, {pageStart:pageStart, pageSize:pageSize});\r\n        return ret;\r\n        */\r\n        let params = {pageStart:pageStart, pageSize:pageSize};\r\n        return await new SheetArchivesCaller(this, params).request();\r\n    }\r\n\r\n    async getStateSheets(state:string, pageStart:number, pageSize:number):Promise<any[]> {\r\n        /*\r\n        await this.loadSchema();\r\n        let ret = await this.uqApi.stateSheets(this.name, {state:state, pageStart:pageStart, pageSize:pageSize});\r\n        return ret;\r\n        */\r\n        let params = {state:state, pageStart:pageStart, pageSize:pageSize};\r\n        return await new StateSheetsCaller(this, params).request();\r\n    }\r\n    createPageStateItems<T>(): PageStateItems<T> {return new PageStateItems<T>(this);}\r\n\r\n    async stateSheetCount():Promise<StateCount[]> {\r\n        /*\r\n        await this.loadSchema();\r\n        let ret:StateCount[] = await this.uqApi.stateSheetCount(this.name);\r\n        return this.states.map(s => {\r\n            let n = s.name, count = 0;\r\n            let r = ret.find(v => v.state === n);\r\n            if (r !== undefined) count = r.count;\r\n            return {state: n, count: count} \r\n        });\r\n        */\r\n        return await new StateSheetCountCaller(this, undefined).request();\r\n    }\r\n\r\n    async mySheets(state:string, pageStart:number, pageSize:number):Promise<any[]> {\r\n        /*\r\n        await this.loadSchema();\r\n        let ret = await this.uqApi.mySheets(this.name, {state:state, pageStart:pageStart, pageSize:pageSize});\r\n        return ret;\r\n        */\r\n        let params = {state:state, pageStart:pageStart, pageSize:pageSize};\r\n        return await new MySheetsCaller(this, params).request();\r\n    }\r\n}\r\n\r\n\r\nabstract class SheetCaller<T> extends EntityCaller<T> {\r\n    protected entity: Sheet;\r\n    protected readonly suffix:string;\r\n    get path():string {return `sheet/${this.entity.name}/${this.suffix}`;}\r\n}\r\n\r\nclass SaveCaller extends SheetCaller<{app:number; discription:string; data:any}> {\r\n    get path():string {return `sheet/${this.entity.name}`;}\r\n    buildParams() {\r\n        let {app, discription, data} = this.params;\r\n        return {\r\n            app: app,\r\n            discription: discription,\r\n            data: this.entity.pack(data)\r\n        };\r\n    }\r\n}\r\n\r\nclass ActionCaller extends SheetCaller<{id:number, flow:number, state:string, action:string}> {\r\n    method = 'PUT';\r\n    get path():string {return `sheet/${this.entity.name}`;}\r\n    //buildParams() {return this.entity.buildParams(this.params);}\r\n}\r\n\r\nclass GetSheetCaller extends SheetCaller<number> {\r\n    //protected readonly params: number;  // id\r\n    method = 'GET';\r\n    //private id:number;\r\n    //protected readonly suffix = 'archive';\r\n    buildParams() {}\r\n    get path():string {return `sheet/${this.entity.name}/get/${this.params}`;}\r\n}\r\n\r\nclass SheetArchiveCaller extends SheetCaller<number> {\r\n    protected readonly params: number;  // id\r\n    method = 'GET';\r\n    //protected readonly suffix = 'archive';\r\n    buildParams() {}\r\n    get path():string {return `sheet/${this.entity.name}/archive/${this.params}`;}\r\n}\r\n\r\nclass SheetArchivesCaller extends SheetCaller<{pageStart:number, pageSize:number}> {\r\n    protected readonly suffix = 'archives';\r\n}\r\n\r\nclass StateSheetsCaller extends SheetCaller<{state:string, pageStart:number, pageSize:number}> {\r\n    protected readonly suffix = 'states';\r\n}\r\n\r\nclass StateSheetCountCaller extends SheetCaller<undefined> {\r\n    method = 'GET';\r\n    protected readonly suffix = 'statecount';\r\n    xresult(res:any):any {\r\n        let {states} = this.entity;\r\n        return states.map(s => {\r\n            let n = s.name, count = 0;\r\n            let r = (res as any[]).find(v => v.state === n);\r\n            if (r !== undefined) count = r.count;\r\n            return {state: n, count: count} \r\n        });\r\n    }\r\n}\r\n\r\nclass MySheetsCaller extends SheetCaller<{state:string, pageStart:number, pageSize:number}> {\r\n    protected readonly suffix = 'my-sheets';\r\n    xresult(res:any):any {\r\n        return res;\r\n        /*\r\n        let {returns} = this.entity;\r\n        let len = returns.length;\r\n        let ret:{[r:string]:any[]} = {};\r\n        for (let i=0; i<len; i++) {\r\n            let retSchema = returns[i];\r\n            ret[retSchema.name] = res[i];\r\n        }\r\n        return ret;\r\n        */\r\n    }\r\n}\r\n\r\nexport class PageStateItems<T> extends PageItems<T> {\r\n    private sheet: Sheet;\r\n    constructor(sheet: Sheet) {\r\n        super(true);\r\n        this.sheet = sheet;\r\n        this.pageSize = 10;\r\n    }\r\n    protected async load(param:any, pageStart:any, pageSize:number):Promise<any[]> {\r\n        let ret = await this.sheet.getStateSheets(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n    protected setPageStart(item:any) {\r\n        this.pageStart = item === undefined? 0 : item.id;\r\n    }\r\n}\r\n","import _ from 'lodash';\r\nimport {observable, IObservableArray} from 'mobx';\r\nimport {Field, ArrFields} from './uqMan';\r\nimport {Entity} from './entity';\r\nimport { QueryQueryCaller, QueryPageCaller } from './caller';\r\n\r\nexport type QueryPageApi = (name:string, pageStart:any, pageSize:number, params:any) => Promise<string>;\r\nexport class Query extends Entity {\r\n    get typeName(): string { return 'query';}\r\n    private pageStart: any;\r\n    private pageSize:number;\r\n    private params:any;\r\n    private more: boolean;\r\n    private startField: Field;\r\n    @observable list:IObservableArray; // = observable.array([], {deep: false});\r\n    returns: ArrFields[];\r\n    isPaged: boolean;\r\n\r\n    setSchema(schema:any) {\r\n        super.setSchema(schema);\r\n        let {returns} = schema;\r\n        //this.returns = returns;\r\n        this.isPaged = returns && (returns as any[]).find(v => v.name === '$page') !== undefined;\r\n    }\r\n\r\n    resetPage(size:number, params:any) {\r\n        this.pageStart = undefined;\r\n        this.pageSize = size;\r\n        this.params = params;\r\n        this.more = false;\r\n        this.list = undefined;\r\n    }\r\n    get hasMore() {return this.more;}\r\n    async loadPage():Promise<void> {\r\n        if (this.pageSize === undefined) {\r\n            throw 'call resetPage(size:number, params:any) first';\r\n        }\r\n        let pageStart:any;\r\n        if (this.pageStart !== undefined) {\r\n            switch (this.startField.type) {\r\n                default: pageStart = this.pageStart; break;\r\n                case 'date':\r\n                case 'time':\r\n                case 'datetime': pageStart = (this.pageStart as Date).getTime(); break;\r\n            }\r\n        }\r\n        let page = await this.page(this.params, pageStart, this.pageSize+1);\r\n        /*\r\n        await this.loadSchema();\r\n        let res = await this.tvApi.page(this.name, pageStart, this.pageSize+1, this.params);\r\n        let data = await this.unpackReturns(res);\r\n        let page = data['$page'] as any[];\r\n        */\r\n        this.list = observable.array([], {deep: false});\r\n        if (page !== undefined) {\r\n            if (page.length > this.pageSize) {\r\n                this.more = true;\r\n                page.pop();\r\n                let ret = this.returns.find(r => r.name === '$page');\r\n                this.startField = ret.fields[0];\r\n                this.pageStart = page[page.length-1][this.startField.name];\r\n            }\r\n            else {\r\n                this.more = false;\r\n            }\r\n            this.list.push(...page);\r\n        }\r\n        //this.loaded = true;\r\n    }\r\n\r\n    async page(params:any, pageStart:any, pageSize:number):Promise<any[]> {\r\n        /*\r\n        await this.loadSchema();\r\n        let res = await this.uqApi.page(this.name, pageStart, pageSize+1, this.buildParams(params));\r\n        */\r\n        let p = {pageStart:pageStart, pageSize:pageSize+1, params:params};\r\n        let res = await new QueryPageCaller(this, p).request();\r\n        //let data = this.unpackReturns(res);\r\n        //return data.$page;// as any[];\r\n        return res;\r\n    }\r\n    async query(params:any):Promise<any> {\r\n        /*\r\n        await this.loadSchema();\r\n        let res = await this.uqApi.query(this.name, this.buildParams(params));\r\n        */\r\n        let res = await new QueryQueryCaller(this, params).request();\r\n        //let data = this.unpackReturns(res);\r\n        //return data;\r\n        return res;\r\n    }\r\n    async table(params:any): Promise<any[]> {\r\n        let ret = await this.query(params);\r\n        for (let i in ret) {\r\n            return ret[i];\r\n        }\r\n    }\r\n    async obj(params:any):Promise<any> {\r\n        let ret = await this.table(params);\r\n        if (ret.length > 0) return ret[0];\r\n    }\r\n    async scalar(params:any):Promise<any> {\r\n        let ret = await this.obj(params);\r\n        for (let i in ret) return ret[i];\r\n    }\r\n}\r\n","import {Query} from './query';\r\n\r\nexport class Book extends Query {\r\n    get typeName(): string { return 'book';}\r\n    protected queryApiName = 'book';\r\n}\r\n","import {Query} from './query';\r\n\r\nexport class History extends Query {\r\n    get typeName(): string { return 'history';}\r\n    protected queryApiName = 'history';\r\n}\r\n","import { Entity } from './entity';\r\nimport { Action, ActionSubmitCaller } from './action';\r\nimport { Query } from './query';\r\nimport { Field, UqMan } from './uqMan';\r\nimport { EntityCaller, QueryPageCaller, QueryQueryCaller } from './caller';\r\n\r\ninterface MapActions {\r\n    add: Action;\r\n    del: Action;\r\n}\r\ninterface MapQueries {\r\n    all: Query;\r\n    page: Query;\r\n    query: Query;\r\n}\r\n\r\nexport class Map extends Entity {\r\n    get typeName(): string { return 'map';}\r\n    keys: Field[];\r\n    actions: MapActions = {} as any;\r\n    queries: MapQueries = {} as any;\r\n    schemaFrom: {owner:string; uq:string};\r\n\r\n    setSchema(schema:any) {\r\n        super.setSchema(schema);\r\n        this.schemaFrom = this.schema.from;\r\n        let {actions, queries, keys} = schema;\r\n        this.uq.buildFieldTuid(this.keys = keys);\r\n        //let t = this.schemaStringify();\r\n        for (let i in actions) {\r\n            let actionSchema = actions[i];\r\n            let {name} = actionSchema;\r\n            let action = this.uq.newAction(name, undefined);\r\n            action.setSchema(actionSchema);\r\n            action.buildFieldsTuid();\r\n            this.actions[i] = action;\r\n        }\r\n        for (let i in queries) {\r\n            let querySchema = queries[i];\r\n            let {name} = querySchema;\r\n            let query = this.uq.newQuery(name, undefined);\r\n            query.setSchema(querySchema);\r\n            query.buildFieldsTuid();\r\n            this.queries[i] = query;\r\n        }\r\n    }\r\n\r\n    async add(param:any) {\r\n        /*\r\n        await this.loadSchema();\r\n        return await this.actions.add.submit(param);\r\n        */\r\n        let ret = await new AddCaller(this, param).request();\r\n        return ret;\r\n    }\r\n\r\n    async del(param:any) {\r\n        /*\r\n        await this.loadSchema();\r\n        return await this.actions.del.submit(param);\r\n        */\r\n        let ret = await new DelCaller(this, param).request();\r\n        return ret;\r\n    }\r\n\r\n    async all() {\r\n        /*\r\n        await this.loadSchema();\r\n        return await this.queries.all.query({});\r\n        */\r\n        let ret = await new AllCaller(this, undefined).request();\r\n        return ret;\r\n    }\r\n\r\n    async page(param:any, pageStart:any, pageSize: number) {\r\n        /*\r\n        await this.loadSchema();\r\n        return await this.queries.page.page(param, pageStart, pageSize);\r\n        */\r\n        let ret = await new PageCaller(this, {pageStart:pageStart, pageSize:pageSize, param:param}).request();\r\n        return ret;\r\n    }\r\n\r\n    async query(param:any) {\r\n        /*\r\n        await this.loadSchema();\r\n        return await this.queries.query.query(param);\r\n        */\r\n       let qc = new QueryCaller(this, param);\r\n       let ret = await qc.request();\r\n       return ret;\r\n   }\r\n    async table(params:any): Promise<any[]> {\r\n        let ret = await this.query(params);\r\n        for (let i in ret) {\r\n            return ret[i];\r\n        }\r\n    }\r\n    async obj(params:any):Promise<any> {\r\n        let ret = await this.table(params);\r\n        if (ret.length > 0) return ret[0];\r\n    }\r\n    async scalar(params:any):Promise<any> {\r\n        let ret = await this.obj(params);\r\n        for (let i in ret) return ret[i];\r\n    }\r\n}\r\n\r\nabstract class MapCaller extends EntityCaller<any> {\r\n    protected entity: Map;\r\n    get path():string {return;}\r\n\r\n    protected abstract getCaller(param: any):EntityCaller<any>;\r\n\r\n    protected async innerCall(): Promise<any> {\r\n        let caller = this.getCaller(this.params);\r\n        let res = await this.entity.uqApi.xcall(caller);\r\n        let ret = caller.xresult(res.res);\r\n        return {res: ret};\r\n    }\r\n\r\n    buildParams() {\r\n        let p = super.buildParams();\r\n        return p;\r\n    }\r\n}\r\n\r\nclass AddCaller extends MapCaller {\r\n    protected getCaller(param:any):EntityCaller<any> {\r\n        return new MapAddCaller(this.entity, this.entity.actions.add, param);\r\n    }\r\n}\r\n\r\nclass DelCaller extends MapCaller {\r\n    protected getCaller(param:any):EntityCaller<any> {\r\n        return new MapDelCaller(this.entity, this.entity.actions.add, param);\r\n    }\r\n}\r\n\r\nclass AllCaller extends MapCaller {\r\n    protected getCaller(param:any):EntityCaller<any> {\r\n        return new MapAllCaller(this.entity, this.entity.queries.all, param);\r\n    }\r\n}\r\n\r\nclass PageCaller extends MapCaller {\r\n    protected getCaller(param:any):EntityCaller<any> {\r\n        return new MapPageCaller(this.entity, this.entity.queries.page, param);\r\n    }\r\n}\r\n\r\nclass QueryCaller extends MapCaller {\r\n    protected getCaller(param:any):EntityCaller<any> {\r\n        return new MapQueryCaller(this.entity, this.entity.queries.query, param);\r\n    }\r\n}\r\n\r\nclass MapAddCaller extends ActionSubmitCaller {\r\n    private map: Map;\r\n    constructor(map:Map, action:Action, params:any) {\r\n        super(action, params);\r\n        this.map = map;\r\n    }\r\n\r\n    get path():string {return `map/${this.map.name}/add`}\r\n    get headers(): {[header:string]: string} {return;}\r\n    /*\r\n        let {ver, uq} = this.map;\r\n        let {uqVersion} = uq;\r\n        return {\r\n            uq: `${uqVersion}`,\r\n            en: `${ver}`,\r\n        }\r\n    }*/\r\n}\r\n\r\nclass MapDelCaller extends ActionSubmitCaller {\r\n    private map: Map;\r\n    constructor(map:Map, action:Action, params:any) {\r\n        super(action, params);\r\n        this.map = map;\r\n    }\r\n\r\n    get path():string {return `map/${this.map.name}/del`}\r\n    get headers(): {[header:string]: string} {return}\r\n    /*\r\n        let {ver, uq} = this.map;\r\n        let {uqVersion} = uq;\r\n        return {\r\n            uq: `${uqVersion}`,\r\n            en: `${ver}`,\r\n        }\r\n    }*/\r\n}\r\n\r\nclass MapAllCaller extends QueryPageCaller {\r\n    private map: Map;\r\n    constructor(map:Map, query:Query, params:any) {\r\n        super(query, params);\r\n        this.map = map;\r\n    }\r\n\r\n    get path():string {return `map/${this.map.name}/all`}\r\n    get headers(): {[header:string]: string} {return}\r\n    /*\r\n        let {ver, uq} = this.map;\r\n        let {uqVersion} = uq;\r\n        return {\r\n            uq: `${uqVersion}`,\r\n            en: `${ver}`,\r\n        }\r\n    }*/\r\n}\r\n\r\n\r\nclass MapPageCaller extends QueryPageCaller {\r\n    private map: Map;\r\n    constructor(map:Map, query:Query, params:any) {\r\n        super(query, params);\r\n        this.map = map;\r\n    }\r\n\r\n    get path():string {return `map/${this.map.name}/page`}\r\n    get headers(): {[header:string]: string} {return}\r\n    /*\r\n        let {ver, uq} = this.map;\r\n        let {uqVersion} = uq;\r\n        return {\r\n            uq: `${uqVersion}`,\r\n            en: `${ver}`,\r\n        }\r\n    }*/\r\n}\r\n\r\nclass MapQueryCaller extends QueryQueryCaller {\r\n    private map: Map;\r\n    constructor(map:Map, query:Query, params:any) {\r\n        super(query, params);\r\n        this.map = map;\r\n    }\r\n\r\n    get path():string {return `map/${this.map.name}/query`}\r\n    get headers(): {[header:string]: string} {return}\r\n    /*\r\n        let {ver, uq} = this.map;\r\n        let {uqVersion} = uq;\r\n        return {\r\n            uq: `${uqVersion}`,\r\n            en: `${ver}`,\r\n        }\r\n    }*/\r\n}","import {Query} from './query';\r\n\r\nexport class Pending extends Query {\r\n    get typeName(): string { return 'pending';}\r\n    protected queryApiName = 'pending';\r\n}\r\n","import * as React from 'react';\r\nimport { BoxId } from './boxId';\r\nimport { Tuid } from './tuid';\r\nimport { observer } from 'mobx-react';\r\n\r\nconst PureJSONContent = (values:any, x?:any) => <>content: {JSON.stringify(values)}</>;\r\n\r\nexport class ReactBoxId implements BoxId {\r\n    readonly id: number;\r\n    protected tuid: Tuid;\r\n    protected ui: (values:any) => JSX.Element;\r\n    readonly isUndefined:boolean;\r\n    constructor(id: number, tuid: Tuid, ui: (values:any) => JSX.Element) {\r\n        this.id = id;\r\n        this.tuid = tuid;\r\n        this.ui = ui;\r\n        this.isUndefined = (this.tuid === undefined);\r\n    }\r\n\r\n    get obj():any {\r\n        return this.tuid.valueFromId(this.id);\r\n    }\r\n\r\n    render(ui:TvTemplet, x:any):JSX.Element {\r\n        if (this.id === undefined || this.id === null) return;\r\n        let boxName = this.boxName; // this.tuid.name;\r\n        let val = this.obj; // this.tuid.valueFromId(this.id);\r\n        if (this.isUndefined === true) {\r\n            if (ui !== undefined) return ui(val, x);\r\n            return PureJSONContent(val, x);\r\n        }\r\n        switch (typeof val) {\r\n            case 'undefined':\r\n                return <del className=\"text-black-50\">{boxName} undefined</del>;\r\n            case 'number':\r\n                return <del className=\"text-black-50\">{boxName} {this.id}</del>;\r\n        }\r\n        if (ui === undefined) {\r\n            ui = this.ui;\r\n        }\r\n        if (ui !== undefined) {\r\n            if (typeof ui !== 'function') {\r\n                ui = (ui as any).content;\r\n            }\r\n            if (ui !== undefined) {\r\n                let ret = ui(val/*, this.tuidUR.res*/);\r\n                if (ret !== undefined) return ret;\r\n                return <del className=\"text-danger\">{boxName} {this.id}</del>;\r\n            }\r\n        }\r\n\r\n        return PureJSONContent(val);\r\n    }\r\n\r\n    get boxName():string {return this.tuid.name}\r\n    // ui(): TvTemplet {return this.tuid.ui}\r\n    // res(): any {return this.tuid.res}\r\n\r\n    async assure(): Promise<void> {\r\n        await this.tuid.assureBox(this.id);\r\n    }\r\n}\r\n\r\nfunction boxIdContent(bi: number|BoxId, ui:TvTemplet, x:any) {\r\n    let logContent:any;\r\n    let boxId:ReactBoxId = bi as ReactBoxId;\r\n    switch(typeof bi) {\r\n        case 'undefined': logContent = <>boxId undefined</>; break;\r\n        case 'number': logContent = <>id:{bi}</>; break;\r\n        default:\r\n            if (typeof boxId.render !== 'function') {\r\n                if (ui === undefined) {\r\n                    logContent = PureJSONContent(bi, x);\r\n                }\r\n                else {\r\n                    return ui(bi, x);\r\n                }\r\n            }\r\n            break;\r\n    }\r\n    if (logContent !== undefined) {\r\n        return <del className=\"text-danger\">{logContent}</del>;\r\n    }\r\n    return boxId.render(ui, x);\r\n}\r\n\r\nexport type TvTemplet = (values?:any, x?:any) => JSX.Element;\r\n\r\ninterface Props {\r\n    tuidValue: number|BoxId, \r\n    ui?: TvTemplet,\r\n    x?: any,\r\n    nullUI?: ()=>JSX.Element\r\n}\r\n\r\nconst Tv = observer(({tuidValue, ui, x, nullUI}:Props) => {\r\n    if (tuidValue === undefined) {\r\n        if (nullUI === undefined) return <>[undefined]</>;\r\n        return nullUI();\r\n    }\r\n    if (tuidValue === null) {\r\n        if (nullUI === undefined) return <>[null]</>;\r\n        return nullUI();\r\n    }\r\n    let ttv = typeof tuidValue;\r\n    switch (ttv) {\r\n        default:\r\n            if (ui === undefined)\r\n                return <>{ttv}-{tuidValue}</>;\r\n            else {\r\n                let ret = ui(tuidValue, x);\r\n                if (ret !== undefined) return ret;\r\n                return <>{tuidValue}</>;\r\n            }\r\n        case 'object':\r\n            let divObj = boxIdContent(tuidValue, ui, x);\r\n            if (divObj !== undefined) return divObj;\r\n            return nullUI === undefined? <>id null</>: nullUI();\r\n        case 'number':\r\n            return <>id...{tuidValue}</>;\r\n    }\r\n});\r\n\r\nexport const tv = (tuidValue:number|BoxId, ui?:TvTemplet, x?:any, nullUI?:()=>JSX.Element):JSX.Element => {\r\n    return <Tv tuidValue={tuidValue} ui={ui} x={x} nullUI={nullUI} />;\r\n};\r\n","import _ from 'lodash';\r\nimport { UqApi, UqData, UnitxApi, appInFrame } from '../net';\r\nimport { Tuid, TuidDiv, TuidImport, TuidInner, TuidBox, TuidsCache } from './tuid';\r\nimport { Action } from './action';\r\nimport { Sheet } from './sheet';\r\nimport { Query } from './query';\r\nimport { Book } from './book';\r\nimport { History } from './history';\r\nimport { Map } from './map';\r\nimport { Pending } from './pending';\r\nimport { CreateBoxId, BoxId } from './tuid';\r\n//import { UqCache } from './caches';\r\nimport { LocalMap, LocalCache } from '../tool';\r\nimport { UQsMan } from './uqsMan';\r\nimport { ReactBoxId } from './tuid/reactBoxId';\r\n\r\nexport type FieldType = 'id' | 'tinyint' | 'smallint' | 'int' | 'bigint' | 'dec' | 'char' | 'text'\r\n    | 'datetime' | 'date' | 'time';\r\n\r\nexport function fieldDefaultValue(type:FieldType) {\r\n    switch (type) {\r\n        case 'tinyint':\r\n        case 'smallint':\r\n        case 'int':\r\n        case 'bigint':\r\n        case 'dec':\r\n            return 0;\r\n        case 'char':\r\n        case 'text':\r\n            return '';\r\n        case 'datetime':\r\n        case 'date':\r\n            return '2000-1-1';\r\n        case 'time':\r\n            return '0:00';\r\n    }\r\n}\r\n\r\nexport interface Field {\r\n    name: string;\r\n    type: FieldType;\r\n    tuid?: string;\r\n    arr?: string;\r\n    null?: boolean;\r\n    size?: number;\r\n    owner?: string;\r\n    _tuid: TuidBox;\r\n}\r\nexport interface ArrFields {\r\n    name: string;\r\n    fields: Field[];\r\n    id?: string;\r\n    order?: string;\r\n}\r\nexport interface FieldMap {\r\n    [name:string]: Field;\r\n}\r\nexport interface SchemaFrom {\r\n    owner:string;\r\n    uq:string;\r\n}\r\nexport interface TuidModify {\r\n    max: number;\r\n    seconds: number;\r\n}\r\n\r\nexport class UqMan {\r\n    private readonly actions: {[name:string]: Action} = {};\r\n    private readonly sheets: {[name:string]: Sheet} = {};\r\n    private readonly queries: {[name:string]: Query} = {};\r\n    private readonly books: {[name:string]: Book} = {};\r\n    private readonly maps: {[name:string]: Map} = {};\r\n    private readonly histories: {[name:string]: History} = {};\r\n    private readonly pendings: {[name:string]: Pending} = {};\r\n    private readonly tuidsCache: TuidsCache;\r\n    private readonly localAccess: LocalCache;\r\n    private readonly tvs:{[entity:string]:(values:any)=>JSX.Element};\r\n    readonly localMap: LocalMap;\r\n    readonly localModifyMax: LocalCache;\r\n    readonly tuids: {[name:string]: Tuid} = {};\r\n    readonly createBoxId: CreateBoxId;\r\n    readonly newVersion: boolean;\r\n    readonly uqOwner: string;\r\n    readonly uqName: string;\r\n    readonly name: string;\r\n    readonly uqApi: UqApi;\r\n    readonly id: number;\r\n\r\n    uqVersion: number;\r\n\r\n    constructor(uqs:UQsMan, uqData: UqData, createBoxId:CreateBoxId, tvs:{[entity:string]:(values:any)=>JSX.Element}) {\r\n        this.createBoxId = createBoxId;\r\n        if (createBoxId === undefined) {\r\n            this.createBoxId = this.createBoxIdFromTVs;\r\n            this.tvs = tvs || {};\r\n        }\r\n        let {id, uqOwner, uqName, access, newVersion: clearTuids} = uqData;\r\n        this.newVersion = clearTuids;\r\n        this.uqOwner = uqOwner;\r\n        this.uqName = uqName;\r\n        this.id = id;\r\n        this.name = uqOwner + '/' + uqName;\r\n        this.uqVersion = 0;\r\n        this.localMap = uqs.localMap.map(this.name);\r\n        this.localModifyMax = this.localMap.child('$modifyMax');\r\n        this.localAccess = this.localMap.child('$access');\r\n        let hash = document.location.hash;\r\n        let baseUrl = 'tv/';\r\n\r\n        let acc: string[];\r\n        if (access === null || access === undefined || access === '*') {\r\n            acc = [];\r\n        }\r\n        else {\r\n            acc = access.split(';').map(v => v.trim()).filter(v => v.length > 0);\r\n        }\r\n        if (this.name === '$$$/$unitx') {\r\n            // 这里假定，点击home link之后，已经设置unit了\r\n            // 调用 UnitxApi会自动搜索绑定 unitx service\r\n            this.uqApi = new UnitxApi(appInFrame.unit);\r\n        }\r\n        else {\r\n            this.uqApi = new UqApi(baseUrl, uqOwner, uqName, acc, true);\r\n        }\r\n        this.tuidsCache = new TuidsCache(this);\r\n    }\r\n\r\n    get entities() {\r\n        return _.merge({}, \r\n            this.actions, this.sheets, this.queries, this.books,\r\n            this.maps, this.histories, this.pendings, this.tuids\r\n        );\r\n    }\r\n\r\n    private createBoxIdFromTVs:CreateBoxId = (tuid:Tuid, id:number):BoxId =>{\r\n        let {name, sName} = tuid;\r\n        /*\r\n        let tuidUR = this.tuidURs[name];\r\n        if (tuidUR === undefined) {\r\n            let {ui, res} = this.getUI(tuid);\r\n            this.tuidURs[name] = tuidUR = new TuidWithUIRes(tuid, ui, res);\r\n        }\r\n        */\r\n        return new ReactBoxId(id, tuid, this.tvs[name]);\r\n    }\r\n\r\n    tuid(name:string):Tuid {return this.tuids[name.toLowerCase()]}\r\n    tuidDiv(name:string, div:string):TuidDiv {\r\n        let tuid = this.tuids[name.toLowerCase()]\r\n        return tuid && tuid.div(div.toLowerCase());\r\n    }\r\n    action(name:string):Action {return this.actions[name.toLowerCase()]}\r\n    sheet(name:string):Sheet {return this.sheets[name.toLowerCase()]}\r\n    query(name:string):Query {return this.queries[name.toLowerCase()]}\r\n    book(name:string):Book {return this.books[name.toLowerCase()]}\r\n    map(name:string):Map {return this.maps[name.toLowerCase()]}\r\n    history(name:string):History {return this.histories[name.toLowerCase()]}\r\n    pending(name:string):Pending {return this.pendings[name.toLowerCase()]}\r\n\r\n    sheetFromTypeId(typeId:number):Sheet {\r\n        for (let i in this.sheets) {\r\n            let sheet = this.sheets[i];\r\n            if (sheet.typeId === typeId) return sheet;\r\n        }\r\n    }\r\n\r\n    tuidArr: Tuid[] = [];\r\n    actionArr: Action[] = [];\r\n    sheetArr: Sheet[] = [];\r\n    queryArr: Query[] = [];\r\n    bookArr: Book[] = [];\r\n    mapArr: Map[] = [];\r\n    historyArr: History[] = [];\r\n    pendingArr: Pending[] = [];\r\n\r\n    async init() {\r\n        await this.uqApi.init();\r\n    }\r\n\r\n    async loadEntities(): Promise<string> {\r\n        try {\r\n            let accesses = this.localAccess.get();\r\n            if (!accesses) {\r\n                accesses = await this.uqApi.loadAccess();\r\n            }\r\n            if (!accesses) return;\r\n            this.buildEntities(accesses);\r\n            if (this.uqName === 'common') {\r\n                this.pullModify(12);\r\n            }\r\n        }\r\n        catch (err) {\r\n            return err;\r\n        }\r\n    }\r\n    /*\r\n    async loadEntities() {\r\n        let accesses = await this.uqApi.loadEntities();\r\n        this.buildEntities(accesses);\r\n    }\r\n    */\r\n    buildEntities(entities:any) {\r\n        if (entities === undefined) {\r\n            debugger;\r\n        }\r\n        this.localAccess.set(entities);\r\n        let {access, tuids, version} = entities;\r\n        this.uqVersion = version;\r\n        this.buildTuids(tuids);\r\n        this.buildAccess(access);\r\n    }\r\n\r\n    /*\r\n    async checkAccess() {\r\n        return await this.uqApi.checkAccess();\r\n    }\r\n    */\r\n\r\n    async loadEntitySchema(entityName: string): Promise<any> {\r\n        return await this.uqApi.schema(entityName);\r\n    }\r\n\r\n    getTuid(name:string): Tuid {\r\n        return this.tuids[name];\r\n    }\r\n\r\n    private buildTuids(tuids:any) {\r\n        for (let i in tuids) {\r\n            let schema = tuids[i];\r\n            let {name, typeId, from} = schema;\r\n            let tuid = this.newTuid(i, typeId, from);\r\n            tuid.sys = true;\r\n        }\r\n        for (let i in tuids) {\r\n            let schema = tuids[i];\r\n            let tuid = this.getTuid(i);\r\n            tuid.setSchema(schema);\r\n        }\r\n        for (let i in this.tuids) {\r\n            let tuid = this.tuids[i];\r\n            tuid.buildFieldsTuid();\r\n        }\r\n    }\r\n\r\n    private buildAccess(access:any) {\r\n        for (let a in access) {\r\n            let v = access[a];\r\n            switch (typeof v) {\r\n                case 'string': this.fromType(a, v); break;\r\n                case 'object': this.fromObj(a, v); break;\r\n            }\r\n        }\r\n    }\r\n\r\n    cacheTuids(defer:number) {\r\n        this.tuidsCache.cacheTuids(defer);\r\n    }\r\n\r\n    newAction(name:string, id:number):Action {\r\n        let action = this.actions[name];\r\n        if (action !== undefined) return action;\r\n        action = this.actions[name] = new Action(this, name, id)\r\n        this.actionArr.push(action);\r\n        return action;\r\n    }\r\n    private newTuid(name:string, id:number, from:SchemaFrom):Tuid {\r\n        let tuid = this.tuids[name];\r\n        if (tuid !== undefined) return tuid;\r\n        if (from !== undefined)\r\n            tuid = new TuidImport(this, name, id, from);\r\n        else\r\n            tuid = new TuidInner(this, name, id);\r\n        this.tuids[name] = tuid;\r\n        this.tuidArr.push(tuid);\r\n        return tuid;\r\n    }\r\n    newQuery(name:string, id:number):Query {\r\n        let query = this.queries[name];\r\n        if (query !== undefined) return query;\r\n        query = this.queries[name] = new Query(this, name, id)\r\n        this.queryArr.push(query);\r\n        return query;\r\n    }\r\n    private newBook(name:string, id:number):Book {\r\n        let book = this.books[name];\r\n        if (book !== undefined) return book;\r\n        book = this.books[name] = new Book(this, name, id);\r\n        this.bookArr.push(book);\r\n        return book;\r\n    }\r\n    private newMap(name:string, id:number):Map {\r\n        let map = this.maps[name];\r\n        if (map !== undefined) return map;\r\n        map = this.maps[name] = new Map(this, name, id)\r\n        this.mapArr.push(map);\r\n        return map;\r\n    }\r\n    private newHistory(name:string, id:number):History {\r\n        let history = this.histories[name];\r\n        if (history !== undefined) return;\r\n        history = this.histories[name] = new History(this, name, id)\r\n        this.historyArr.push(history);\r\n        return history;\r\n    }\r\n    private newPending(name:string, id:number):Pending {\r\n        let pending = this.pendings[name];\r\n        if (pending !== undefined) return;\r\n        pending = this.pendings[name] = new Pending(this, name, id)\r\n        this.pendingArr.push(pending);\r\n        return pending;\r\n    }\r\n    newSheet(name:string, id:number):Sheet {\r\n        let sheet = this.sheets[name];\r\n        if (sheet !== undefined) return sheet;\r\n        sheet = this.sheets[name] = new Sheet(this, name, id);\r\n        this.sheetArr.push(sheet);\r\n        return sheet;\r\n    }\r\n    private fromType(name:string, type:string) {\r\n        let parts = type.split('|');\r\n        type = parts[0];\r\n        let id = Number(parts[1]);\r\n        switch (type) {\r\n            //case 'uq': this.id = id; break;\r\n            case 'tuid':\r\n                // Tuid should not be created here!;\r\n                //let tuid = this.newTuid(name, id);\r\n                //tuid.sys = false;\r\n                break;\r\n            case 'action': this.newAction(name, id); break;\r\n            case 'query': this.newQuery(name, id); break;\r\n            case 'book': this.newBook(name, id); break;\r\n            case 'map': this.newMap(name, id); break;\r\n            case 'history': this.newHistory(name, id); break;\r\n            case 'sheet':this.newSheet(name, id); break;\r\n            case 'pending': this.newPending(name, id); break;\r\n        }\r\n    }\r\n    private fromObj(name:string, obj:any) {\r\n        switch (obj['$']) {\r\n            case 'sheet': this.buildSheet(name, obj); break;\r\n        }\r\n    }\r\n    private buildSheet(name:string, obj:any) {\r\n        let sheet = this.sheets[name];\r\n        if (sheet === undefined) sheet = this.newSheet(name, obj.id);\r\n        sheet.build(obj);\r\n    }\r\n    buildFieldTuid(fields:Field[], mainFields?:Field[]) {\r\n        if (fields === undefined) return;\r\n        for (let f of fields) {\r\n            let {tuid} = f;\r\n            if (tuid === undefined) continue;\r\n            let t = this.getTuid(tuid);\r\n            if (t === undefined) continue;\r\n            f._tuid = t.buildTuidBox();\r\n        }\r\n        for (let f of fields) {\r\n            let {owner} = f;\r\n            if (owner === undefined) continue;\r\n            let ownerField = fields.find(v => v.name === owner);\r\n            if (ownerField === undefined) {\r\n                if (mainFields !== undefined) {\r\n                    ownerField = mainFields.find(v => v.name === owner);\r\n                }\r\n                if (ownerField === undefined) {\r\n                    debugger;\r\n                    throw `owner field ${owner} is undefined`;\r\n                }\r\n            }\r\n            let {arr, tuid} = f;\r\n            let t = this.getTuid(ownerField._tuid.tuid.name);\r\n            if (t === undefined) continue;\r\n            let div = t.div(arr || tuid);\r\n            f._tuid = div && div.buildTuidDivBox(ownerField);\r\n            if (f._tuid === undefined) {\r\n                debugger;\r\n                throw 'owner field ${owner} is not tuid';\r\n            }\r\n        }\r\n    }\r\n    buildArrFieldsTuid(arrFields:ArrFields[], mainFields:Field[]) {\r\n        if (arrFields === undefined) return;\r\n        for (let af of arrFields) {\r\n            let {fields} = af;\r\n            if (fields === undefined) continue;\r\n            this.buildFieldTuid(fields, mainFields);\r\n        }\r\n    }\r\n\r\n    pullModify(modifyMax:number) {\r\n        this.tuidsCache.pullModify(modifyMax);\r\n    }\r\n}\r\n","import { LocalMap, LocalCache, env } from '../tool';\r\nimport { UqData } from '../net';\r\nimport { UqMan } from './uqMan';\r\nimport { TuidImport, TuidInner } from './tuid';\r\n\r\nexport interface TVs {\r\n    [uqName:string]: {\r\n        [tuidName: string]: (values: any) => JSX.Element;\r\n    }\r\n}\r\n\r\nexport class UQsMan {\r\n    private collection: {[uqName: string]: UqMan};\r\n    private readonly tvs: TVs;\r\n\r\n    readonly name: string;\r\n    readonly appOwner: string;\r\n    readonly appName: string;\r\n    readonly localMap: LocalMap;\r\n    readonly localData: LocalCache;\r\n    id: number;\r\n\r\n    constructor(tonvaAppName:string, tvs:TVs) {\r\n        this.tvs = tvs || {};\r\n        this.buildTVs();\r\n        this.collection = {};\r\n        let parts = tonvaAppName.split('/');\r\n        if (parts.length !== 2) {\r\n            throw 'tonvaApp name must be / separated, owner/app';\r\n        }\r\n        this.appOwner = parts[0];\r\n        this.appName = parts[1];\r\n        this.localMap = env.localDb.map(tonvaAppName);\r\n        this.localData = this.localMap.child('uqData');\r\n    }\r\n\r\n    // to be removed in the future\r\n    addUq(uq: UqMan) {\r\n        this.collection[uq.name] = uq;\r\n    }\r\n\r\n    private buildTVs() {\r\n        for (let i in this.tvs) {\r\n            let uqTVs = this.tvs[i];\r\n            if (uqTVs === undefined) continue;\r\n            let l = i.toLowerCase();\r\n            if (l === i) continue;\r\n            this.tvs[l] = uqTVs;\r\n            for (let j in uqTVs) {\r\n                let en = uqTVs[j];\r\n                if (en === undefined) continue;\r\n                let lj = j.toLowerCase();\r\n                if (lj === j) continue;\r\n                uqTVs[lj] = en;\r\n            }\r\n        }\r\n    }\r\n\r\n    async init(uqsData:UqData[]):Promise<void> {\r\n        let promiseInits: PromiseLike<void>[] = [];\r\n        for (let uqData of uqsData) {\r\n            let {id, uqOwner, uqName, access} = uqData;\r\n            let uqFullName = uqOwner + '/' + uqName;\r\n            //let uqUI = this.ui.uqs[uqFullName] as UqUI || {};\r\n            //let cUq = this.newCUq(uqData, uqUI);\r\n            //this.cUqCollection[uqFullName] = cUq;\r\n            //this.uqs.addUq(cUq.uq);\r\n            let uq = new UqMan(this, uqData, undefined, this.tvs[uqFullName] || this.tvs[uqName]);\r\n            this.collection[uqFullName] = uq;\r\n            let lower = uqFullName.toLowerCase();\r\n            if (lower !== uqFullName) {\r\n                this.collection[lower] = uq;\r\n            }\r\n            promiseInits.push(uq.init());\r\n        }\r\n        await Promise.all(promiseInits);\r\n    }\r\n\r\n    async load(): Promise<string[]> {\r\n        let retErrors:string[] = [];\r\n        let promises: PromiseLike<string>[] = [];\r\n        for (let i in this.collection) {\r\n            let uq = this.collection[i];\r\n            promises.push(uq.loadEntities());\r\n        }\r\n        let results = await Promise.all(promises);\r\n        for (let result of results)\r\n        {\r\n            let retError = result; // await cUq.loadSchema();\r\n            if (retError !== undefined) {\r\n                retErrors.push(retError);\r\n                continue;\r\n            }\r\n        }\r\n        return retErrors;\r\n    }\r\n\r\n    writeUQs(uqs:any) {\r\n        /*\r\n        let ret:any = {};\r\n        for (let i in this.collection) {\r\n            ret[i] = this.collection[i].entities;\r\n        }\r\n        return ret;\r\n        */\r\n        //_.merge(this.uqs, this.uqsMan.uqsColl);\r\n        for (let i in this.collection) {\r\n            let uqMan = this.collection[i];\r\n            //let n = uqMan.name;\r\n            let uqName = uqMan.uqName;\r\n            let l = uqName.toLowerCase();\r\n            let entities = uqMan.entities;\r\n            let keys = Object.keys(entities);\r\n            for (let key of keys) {\r\n                let entity = entities[key];\r\n                let {name, sName} = entity;\r\n                if (name !== sName) entities[sName] = entity;\r\n            }\r\n            uqs[i] = entities;\r\n            uqs[uqName] = entities;\r\n            if (l !== uqName) uqs[l] = entities;\r\n        }\r\n    }\r\n\r\n    setTuidImportsLocal():string[] {\r\n        let ret:string[] = [];\r\n        for (let i in this.collection) {\r\n            let uq = this.collection[i];\r\n            for (let tuid of uq.tuidArr) {\r\n                if (tuid.isImport === true) {\r\n                    let error = this.setInner(tuid as TuidImport);\r\n                    if (error) ret.push(error);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    private setInner(tuidImport: TuidImport):string {\r\n        let {from} = tuidImport;\r\n        let fromName = from.owner + '/' + from.uq;\r\n        let uq = this.collection[fromName];\r\n        if (uq === undefined) {\r\n            //debugger;\r\n            return `setInner(tuidImport: TuidImport): uq ${fromName} is not loaded`;\r\n        }\r\n        let iName = tuidImport.name\r\n        let tuid = uq.tuid(iName);\r\n        if (tuid === undefined) {\r\n            //debugger;\r\n            return `setInner(tuidImport: TuidImport): uq ${fromName} has no Tuid ${iName}`;\r\n        }\r\n        if (tuid.isImport === true) {\r\n            //debugger;\r\n            return `setInner(tuidImport: TuidImport): uq ${fromName} Tuid ${iName} is import`;\r\n        }\r\n        tuidImport.setFrom(tuid as TuidInner);\r\n    }\r\n}\r\n","export * from './uqMan';\r\nexport * from './entity';\r\nexport * from './action';\r\nexport * from './query';\r\nexport * from './sheet';\r\nexport * from './tuid';\r\nexport * from './book';\r\nexport * from './map';\r\nexport * from './history';\r\nexport * from './pending';\r\nexport * from './uqsMan';\r\n","import * as React from 'react';\r\nimport { Schema, UiSchema, ItemSchema, UiItem, UiTextItem } from '../schema';\r\nimport { nav } from '../nav';\r\nimport { Page } from '../page';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\nimport { Rule, FieldRule } from '../form/rules';\r\n\r\nexport abstract class ItemEdit {\r\n    protected name: string;\r\n    protected itemSchema: ItemSchema;\r\n    protected uiItem:UiItem;\r\n    protected value: any;\r\n    protected label: string;\r\n\r\n    @observable protected error: string;\r\n    @observable protected isChanged: boolean = false;\r\n    protected newValue: any;\r\n\r\n    constructor(itemSchema: ItemSchema, uiItem:UiItem, label:string, value: any) {\r\n        this.itemSchema = itemSchema;\r\n        this.uiItem = uiItem\r\n        this.value = value;\r\n        let {name} = itemSchema;\r\n        this.name = name;\r\n        this.label = label;\r\n    }\r\n    async start():Promise<any> {\r\n        return await this.internalStart();\r\n    }\r\n\r\n    protected abstract internalStart():Promise<any>;\r\n\r\n    async end():Promise<any> {\r\n        await this.internalEnd()\r\n    }\r\n\r\n    protected async internalEnd():Promise<void> {nav.pop()}\r\n\r\n    protected verifyValue() {\r\n        if (this.uiItem === undefined) return;\r\n        let {rules} = this.uiItem;\r\n        if (rules === undefined) return;\r\n        let nv = this.newValue;\r\n        function verifyRule(rule:FieldRule, value: any):string {\r\n            let error = rule(nv);\r\n            if (error !== undefined) {\r\n                if (typeof error !== 'object')\r\n                    return error;\r\n                else\r\n                    return JSON.stringify(error);\r\n            }\r\n        }\r\n        if (Array.isArray(rules)) {\r\n            for (let rule of rules) {\r\n                let error = verifyRule(rule as FieldRule, nv);\r\n                if (error !== undefined) {\r\n                    this.error = error;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.error = verifyRule(rules as FieldRule, nv);\r\n        }\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { nav } from './nav';\r\n\r\nexport interface ImageProps {\r\n    src: string;\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    altImage?: string;\r\n}\r\n\r\nexport function Image(props: ImageProps) {\r\n    let {className, style, src, altImage} = props;\r\n    if (!src) {\r\n        return <div className={classNames(className, 'image-none')} style={style}>\r\n            <i className=\"fa fa-file-o\" />\r\n        </div>;\r\n    }\r\n    if (src.startsWith(':') === true) {\r\n        src = nav.resUrl + src.substr(1);\r\n    }\r\n    return <img src={src} className={className} \r\n        style={style}\r\n        onError={evt=>{\r\n            if (altImage) evt.currentTarget.src=altImage;\r\n            else evt.currentTarget.src = 'https://tv.jkchemical.com/imgs/0001.png';\r\n        }} />;\r\n}\r\n","import * as React from 'react';\r\nimport { Book } from '../../uq';\r\nimport { Page } from '../../components';\r\nimport { VEntity } from '../CVEntity';\r\nimport { CBook, BookUI } from './cBook';\r\n\r\nexport class VBookMain extends VEntity<Book, BookUI, CBook> {\r\n    async open(param?:any):Promise<void> {\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    protected view = () => <Page header={this.label}>\r\n        Book\r\n    </Page>;\r\n}\r\n","import { CEntity, EntityUI } from '../CVEntity';\r\nimport { Book } from '../../uq';\r\nimport { VBookMain } from './vBookMain';\r\n\r\nexport interface BookUI extends EntityUI {\r\n    CBook?: typeof CBook;\r\n    main: typeof VBookMain,\r\n}\r\n\r\nexport class CBook extends CEntity<Book, BookUI> {\r\n    protected async internalStart() {\r\n        await this.openVPage(this.VBookMain);\r\n    }\r\n\r\n    protected get VBookMain():typeof VBookMain {return VBookMain}\r\n}\r\n","import React from 'react';\r\nimport { View, List, Muted } from '../../components';\r\nimport { Entity } from '../../uq';\r\nimport { CLink } from '../link';\r\nimport { CUq } from './cUq';\r\n\r\nexport class VUq extends View<CUq> {\r\n    protected isSysVisible = false;\r\n    protected tuidLinks: CLink[];\r\n    protected mapLinks: CLink[];\r\n    protected sheetLinks: CLink[];\r\n    protected actionLinks: CLink[];\r\n    protected queryLinks: CLink[];\r\n    protected bookLinks: CLink[];\r\n    protected historyLinks: CLink[];\r\n    protected pendingLinks: CLink[];\r\n\r\n    constructor(cUq: CUq) {\r\n        super(cUq);\r\n        let {tuidArr, mapArr, sheetArr, actionArr, queryArr, bookArr, historyArr, pendingArr} = cUq.uq;\r\n        this.tuidLinks = tuidArr.filter(v => this.isVisible(v)).map(v => new CLink(this.controller.cTuidMain(v)));\r\n        this.mapLinks = mapArr.filter(v => this.isVisible(v)).map(v => new CLink(this.controller.cMap(v)));\r\n        this.sheetLinks = sheetArr.filter(v => this.isVisible(v)).map(v => new CLink(this.controller.cSheet(v)));\r\n        this.actionLinks = actionArr.filter(v => this.isVisible(v)).map(v => new CLink(this.controller.cAction(v)));\r\n        this.queryLinks = queryArr.filter(v => this.isVisible(v)).map(v => new CLink(this.controller.cQuery(v)));\r\n        this.bookLinks = bookArr.filter(v => this.isVisible(v)).map(v => new CLink(this.controller.cBook(v)));\r\n        this.historyLinks = historyArr.filter(v => this.isVisible(v)).map(v => new CLink(this.controller.cHistory(v)));\r\n        this.pendingLinks = pendingArr.filter(v => this.isVisible(v)).map(v => new CLink(this.controller.cPending(v)));\r\n    }\r\n    protected isVisible(entity: Entity):boolean {\r\n        return entity.sys !== true || this.isSysVisible;\r\n    }\r\n    render(param?:any) {\r\n        if (this.view === undefined) return <div>??? viewModel 必须定义 view ???</div>\r\n        return React.createElement(this.view);\r\n    }\r\n\r\n    protected view = () => {\r\n        let {res, uq, error} = this.controller;\r\n        let linkItem = {\r\n            render: (cLink:CLink, index:number):JSX.Element => cLink.render(), \r\n            onClick: undefined, \r\n        };\r\n        let lists = [\r\n            {\r\n                header: res.tuid || 'TUID',\r\n                items: this.tuidLinks,\r\n            },\r\n            {\r\n                cn: 'my-2',\r\n                header: res.map || 'MAP',\r\n                items: this.mapLinks,\r\n            },\r\n            {\r\n                cn: 'my-2',\r\n                header: res.sheet || 'SHEET',\r\n                items: this.sheetLinks\r\n            },\r\n            {\r\n                cn: 'my-2',\r\n                header: res.action || 'ACTION',\r\n                items: this.actionLinks\r\n            },\r\n            {\r\n                cn: 'my-2',\r\n                header: res.query || 'QUERY',\r\n                items: this.queryLinks\r\n            },\r\n            {\r\n                cn: 'mt-2 mb-4',\r\n                header: res.book || 'BOOK',\r\n                items: this.bookLinks\r\n            },\r\n            {\r\n                cn: 'mt-2 mb-4',\r\n                header: res.history || 'HISTORY',\r\n                items: this.historyLinks\r\n            },\r\n            {\r\n                cn: 'mt-2 mb-4',\r\n                header: res.pending || 'PENDING',\r\n                items: this.pendingLinks\r\n            }\r\n        ];\r\n        let content;\r\n        if (error !== undefined) {\r\n            content = <div className=\"p-3 text-danger\">连接错误: {error}</div>;\r\n        }\r\n        else {\r\n            content = lists.map(({cn, header, items},index) => items.length > 0 && <List\r\n                key={index}\r\n                className={cn}\r\n                header={<div className=\"px-3 py-1 bg-light\"><Muted>{header}</Muted></div>}\r\n                items={items}\r\n                item={linkItem} />\r\n            );\r\n        }\r\n        return <>\r\n            <div className=\"px-3 py-1 small\">{res.uq || uq}</div>\r\n            {content}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { Tuid, BoxId } from '../../uq';\r\nimport { PureJSONContent } from '../tools';\r\n\r\nexport class TuidWithUIRes {\r\n    readonly tuid: Tuid;\r\n    readonly ui: any;\r\n    readonly res: any;\r\n    constructor(tuid:Tuid, ui:any, res:any) {\r\n        this.tuid = tuid;\r\n        this.ui = ui;\r\n        this.res = res;\r\n    }\r\n}\r\n\r\nexport class ReactBoxId implements BoxId {\r\n    readonly id: number;\r\n    protected tuidUR: TuidWithUIRes;\r\n    readonly isUndefined:boolean;\r\n    constructor(tuidUR: TuidWithUIRes, id: number) {\r\n        this.tuidUR = tuidUR;\r\n        this.id = id;\r\n        this.isUndefined = (this.tuidUR.tuid === undefined);\r\n    }\r\n\r\n    get obj():any {\r\n        return this.tuidUR.tuid.valueFromId(this.id);\r\n    }\r\n\r\n    render(ui:TvTemplet, x:any):JSX.Element {\r\n        if (this.id === undefined || this.id === null) return;\r\n        let boxName = this.boxName; // this.tuid.name;\r\n        let val = this.obj; // this.tuid.valueFromId(this.id);\r\n        if (this.isUndefined === true) {\r\n            if (ui !== undefined) return ui(val, x);\r\n            return PureJSONContent(val, x);\r\n        }\r\n        switch (typeof val) {\r\n            case 'undefined':\r\n                return <del className=\"text-black-50\">{boxName} undefined</del>;\r\n            case 'number':\r\n                return <del className=\"text-black-50\">{boxName} {this.id}</del>;\r\n        }\r\n        if (ui === undefined) {\r\n            ui = this.tuidUR.ui;\r\n        }\r\n        if (ui !== undefined) {\r\n            if (typeof ui !== 'function') {\r\n                ui = (ui as any).content;\r\n            }\r\n            if (ui !== undefined) {\r\n                let ret = ui(val, this.tuidUR.res);\r\n                if (ret !== undefined) return ret;\r\n                return <del className=\"text-danger\">{boxName} {this.id}</del>;\r\n            }\r\n        }\r\n\r\n        return PureJSONContent(val);\r\n    }\r\n\r\n    get boxName():string {return this.tuidUR.tuid.name}\r\n    // ui(): TvTemplet {return this.tuid.ui}\r\n    // res(): any {return this.tuid.res}\r\n\r\n    async assure(): Promise<void> {\r\n        await this.tuidUR.tuid.assureBox(this.id);\r\n    }\r\n}\r\n\r\nfunction boxIdContent(bi: number|BoxId, ui:TvTemplet, x:any) {\r\n    let logContent:any;\r\n    let boxId:ReactBoxId = bi as ReactBoxId;\r\n    switch(typeof bi) {\r\n        case 'undefined': logContent = <>boxId undefined</>; break;\r\n        case 'number': logContent = <>id:{bi}</>; break;\r\n        default:\r\n            if (typeof boxId.render !== 'function') {\r\n                if (ui === undefined) {\r\n                    logContent = PureJSONContent(bi, x);\r\n                }\r\n                else {\r\n                    return ui(bi, x);\r\n                }\r\n            }\r\n            break;\r\n    }\r\n    if (logContent !== undefined) {\r\n        return <del className=\"text-danger\">{logContent}</del>;\r\n    }\r\n    return boxId.render(ui, x);\r\n}\r\n\r\nexport type TvTemplet = (values?:any, x?:any) => JSX.Element;\r\n\r\ninterface Props {\r\n    tuidValue: number|BoxId, \r\n    ui?: TvTemplet,\r\n    x?: any,\r\n    nullUI?: ()=>JSX.Element\r\n}\r\n\r\nconst Tv = observer(({tuidValue, ui, x, nullUI}:Props) => {\r\n    if (tuidValue === undefined) {\r\n        if (nullUI === undefined) return <>[undefined]</>;\r\n        return nullUI();\r\n    }\r\n    if (tuidValue === null) {\r\n        if (nullUI === undefined) return <>[null]</>;\r\n        return nullUI();\r\n    }\r\n    let ttv = typeof tuidValue;\r\n    switch (ttv) {\r\n        default:\r\n            if (ui === undefined)\r\n                return <>{ttv}-{tuidValue}</>;\r\n            else {\r\n                let ret = ui(tuidValue, x);\r\n                if (ret !== undefined) return ret;\r\n                return <>{tuidValue}</>;\r\n            }\r\n        case 'object':\r\n            let divObj = boxIdContent(tuidValue, ui, x);\r\n            if (divObj !== undefined) return divObj;\r\n            return nullUI === undefined? <>id null</>: nullUI();\r\n        case 'number':\r\n            return <>id...{tuidValue}</>;\r\n    }\r\n});\r\n\r\nexport const tv = (tuidValue:number|BoxId, ui?:TvTemplet, x?:any, nullUI?:()=>JSX.Element):JSX.Element => {\r\n    return <Tv tuidValue={tuidValue} ui={ui} x={x} nullUI={nullUI} />;\r\n};\r\n\r\n/*\r\nclass BoxDivId extends BoxId {\r\n    private div: TuidDiv;\r\n    constructor(tuid: Tuid, div: TuidDiv, id: number) {\r\n        super(tuid, id);\r\n        this.div = div;\r\n    }\r\n    get obj():any {\r\n        return this.div.valueFromId(this.id);\r\n    }\r\n    boxName():string {return this.div.name}\r\n    isUndefined(): boolean {return this.div === undefined}\r\n    ui(): TvTemplet {return this.div.ui}\r\n    res(): any {return this.div.res}\r\n\r\n    async assure(): Promise<void> {\r\n        await this.div.assureBox(this.id);\r\n    }\r\n}\r\n*/\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { Controller, resLang, nav } from '../../components';\r\nimport { UqData } from '../../net';\r\nimport { PureJSONContent } from '../tools';\r\nimport { UqMan, Action, Sheet, Query, Book, Map, Entity, Tuid, History, Pending, TuidDiv, CreateBoxId, BoxId } from '../../uq';\r\nimport { CLink } from '../link';\r\nimport { CBook, BookUI } from '../book';\r\nimport { CSheet, SheetUI } from '../sheet';\r\nimport { ActionUI, CAction } from '../action';\r\nimport { QueryUI, CQuery, CQuerySelect } from '../query';\r\nimport { CTuidMain, TuidUI, CTuid, CTuidInfo, CTuidSelect, CTuidEdit, CTuidList } from '../tuid';\r\nimport { MapUI, CMap } from '../map';\r\nimport { CEntity, EntityUI } from '../CVEntity';\r\nimport { VUq } from './vUq';\r\nimport { CHistory, HistoryUI } from '../history';\r\nimport { CPending, PendingUI } from '../pending';\r\nimport { CApp } from '../app';\r\nimport { TuidWithUIRes, ReactBoxId } from './reactBoxId';\r\n\r\nexport type EntityType = 'sheet' | 'action' | 'tuid' | 'query' | 'book' | 'map' | 'history' | 'pending';\r\n\r\nexport interface UqUI {\r\n    CTuidMain?: typeof CTuidMain;\r\n    CTuidEdit?: typeof CTuidEdit;\r\n    CTuidList?: typeof CTuidList;\r\n    CTuidSelect?: typeof CTuidSelect;\r\n    CTuidInfo?: typeof CTuidInfo;\r\n    CQuery?: typeof CQuery;\r\n    CQuerySelect?: typeof CQuerySelect;\r\n    CMap?: typeof CMap;\r\n    CAction?: typeof CAction;\r\n    CSheet?: typeof CSheet;\r\n    CBook?: typeof CBook;\r\n    CHistory?: typeof CHistory;\r\n    CPending?: typeof CPending;\r\n    tuid?: {[name:string]: TuidUI};\r\n    sheet?: {[name:string]: SheetUI};\r\n    action?: {[name:string]: ActionUI};\r\n    map?: {[name:string]: MapUI};\r\n    query?: {[name:string]: QueryUI};\r\n    book?: {[name:string]: BookUI};    \r\n    history?: {[name:string]: HistoryUI};\r\n    pending?: {[name:string]: PendingUI};\r\n    res?: any;\r\n}\r\n\r\nfunction lowerPropertyName(entities: {[name:string]: EntityUI}) {\r\n    if (entities === undefined) return;\r\n    for (let i in entities) entities[i.toLowerCase()] = entities[i];\r\n}\r\n\r\nexport class CUq extends Controller /* implements Uq*/ {\r\n    private ui:any;\r\n    private tuidURs: {[name:string]: TuidWithUIRes} = {};\r\n    private CTuidMain: typeof CTuidMain;\r\n    private CTuidEdit: typeof CTuidEdit;\r\n    private CTuidList: typeof CTuidList;\r\n    private CTuidSelect: typeof CTuidSelect;\r\n    private CTuidInfo: typeof CTuidInfo;\r\n    private CQuery: typeof CQuery;\r\n    private CQuerySelect: typeof CQuerySelect;\r\n    private CMap: typeof CMap;\r\n    private CAction: typeof CAction;\r\n    private CSheet: typeof CSheet;\r\n    private CBook: typeof CBook;\r\n    private CHistory: typeof CHistory;\r\n    private CPending: typeof CPending;\r\n\r\n    //constructor(cApp:CApp, uq:string, appId:number, uqId:number, access:string, ui:UqUI) {\r\n    constructor(cApp:CApp, uqData:UqData, ui:UqUI) {\r\n        super(resLang(ui.res));\r\n        this.cApp = cApp;\r\n        //this.id = uqId;\r\n        // 每一个ui都转换成小写的key的版本\r\n        lowerPropertyName(ui.tuid);\r\n        lowerPropertyName(ui.sheet);\r\n        lowerPropertyName(ui.map);\r\n        lowerPropertyName(ui.query);\r\n        lowerPropertyName(ui.action);\r\n        lowerPropertyName(ui.book);\r\n        lowerPropertyName(ui.history);\r\n        lowerPropertyName(ui.pending);\r\n        this.ui = ui;\r\n        this.CTuidMain = ui.CTuidMain || CTuidMain;\r\n        this.CTuidEdit = ui.CTuidEdit || CTuidEdit;\r\n        this.CTuidList = ui.CTuidList || CTuidList;\r\n        this.CTuidSelect = ui.CTuidSelect || CTuidSelect;\r\n        this.CTuidInfo = ui.CTuidInfo || CTuidInfo;\r\n        this.CQuery = ui.CQuery || CQuery;\r\n        this.CQuerySelect = ui.CQuerySelect || CQuerySelect;\r\n        this.CMap = ui.CMap || CMap;\r\n        this.CAction = ui.CAction || CAction;\r\n        this.CSheet = ui.CSheet || CSheet;\r\n        this.CBook = ui.CBook || CBook;\r\n        this.CHistory = ui.CHistory || CHistory;\r\n        this.CPending = ui.CPending || CPending;\r\n\r\n        this.uq = new UqMan(cApp.uqs, uqData, this.createBoxId, undefined);\r\n    }\r\n\r\n    protected async internalStart() {\r\n    }\r\n\r\n    cApp:CApp;\r\n    res: any;\r\n    uq: UqMan;\r\n    error: string;\r\n    \r\n    private createBoxId:CreateBoxId = (tuid:Tuid, id:number):BoxId =>{\r\n        let {name} = tuid;\r\n        let tuidUR = this.tuidURs[name];\r\n        if (tuidUR === undefined) {\r\n            let {ui, res} = this.getUI(tuid);\r\n            this.tuidURs[name] = tuidUR = new TuidWithUIRes(tuid, ui, res);\r\n        }\r\n        return new ReactBoxId(tuidUR, id);\r\n    }\r\n\r\n    async init():Promise<void> {\r\n        return await this.uq.init();\r\n    }\r\n\r\n    async loadEntities():Promise<string> {\r\n        try {\r\n            await this.uq.loadEntities();\r\n        }\r\n        catch (err) {\r\n            return err;\r\n        }\r\n    }\r\n\r\n    async getQuerySearch(name:string):Promise<Query> {\r\n        let query = this.uq.query(name);\r\n        if (query === undefined) \r\n            alert(`QUERY ${name} 没有定义!`);\r\n        else {\r\n            await query.loadSchema();\r\n            let {returns} = query;\r\n            if (returns.length > 1) {\r\n                alert(`QUERY ${name} 返回多张表, 无法做QuerySearch`);\r\n            }\r\n        }\r\n        return query;\r\n    }\r\n    getTuidPlaceHolder(tuid:Tuid) {\r\n        let {tuidPlaceHolder, entity} = this.res;\r\n        let {name} = tuid;\r\n        let type:string;\r\n        if (entity !== undefined) {\r\n            let en = entity[name];\r\n            if (en !== undefined) {\r\n                type = en.label;\r\n            }\r\n        }\r\n        return (tuidPlaceHolder || 'Select');\r\n    }\r\n    getNone() {\r\n        let {none} = this.res;\r\n        return none || 'none';\r\n    }\r\n    protected isSysVisible = false;\r\n    protected isVisible(entity: Entity):boolean {\r\n        return entity.sys !== true || this.isSysVisible;\r\n    }\r\n\r\n    async navSheet(sheetTypeId:number, sheetId:number) {\r\n        let sheet = this.uq.sheetFromTypeId(sheetTypeId);\r\n        if (sheet === undefined) {\r\n            alert('sheetTypeId ' + sheetTypeId + ' is not exists!');\r\n            return;\r\n        }\r\n        let cSheet = this.cSheet(sheet);\r\n        await cSheet.startSheet(sheetId);\r\n    }\r\n\r\n    sheet(entityName:string) {return this.uq.sheet(entityName);}\r\n    action(entityName:string) {return this.uq.action(entityName);}\r\n    query(entityName:string) {return this.uq.query(entityName);}\r\n    book(entityName:string) {return this.uq.book(entityName);}\r\n    map(entityName:string) {return this.uq.map(entityName);}\r\n    history(entityName:string) {return this.uq.history(entityName);}\r\n    pending(entityName:string) {return this.uq.pending(entityName);}\r\n    tuid(entityName:string) {return this.uq.tuid(entityName)}\r\n    tuidDiv(entityName:string, divName:string) {\r\n        return this.uq.tuidDiv(entityName, divName);\r\n    }\r\n\r\n    cSheetFromName(entityName:string):CSheet {\r\n        let entity = this.uq.sheet(entityName);\r\n        if (entity !== undefined) return this.cSheet(entity);\r\n    }\r\n    cActionFromName(entityName:string) {\r\n        let entity = this.uq.action(entityName);\r\n        if (entity !== undefined) return this.cAction(entity);\r\n    }\r\n    cQueryFromName(entityName:string) {\r\n        let entity = this.uq.query(entityName);\r\n        if (entity !== undefined) return this.cQuery(entity);\r\n    }\r\n    cBookFromName(entityName:string) {\r\n        let entity = this.uq.book(entityName);\r\n        if (entity !== undefined) return this.cBook(entity);\r\n    }\r\n    cMapFromName(entityName:string) {\r\n        let entity = this.uq.map(entityName);\r\n        if (entity !== undefined) return this.cMap(entity);\r\n    }\r\n    cHistoryFromName(entityName:string) {\r\n        let entity = this.uq.history(entityName);\r\n        if (entity !== undefined) return this.cHistory(entity);\r\n    }\r\n    cPendingFromName(entityName:string) {\r\n        let entity = this.uq.pending(entityName);\r\n        if (entity !== undefined) return this.cPending(entity);\r\n    }\r\n    cTuidMainFromName(entityName:string) {\r\n        let entity = this.uq.tuid(entityName);\r\n        if (entity !== undefined) return this.cTuidMain(entity);\r\n    }\r\n    cTuidEditFromName(entityName:string) {\r\n        let entity = this.uq.tuid(entityName);\r\n        if (entity !== undefined) return this.cTuidEdit(entity);\r\n    }\r\n    cTuidInfoFromName(entityName:string) {\r\n        let entity = this.uq.tuid(entityName);\r\n        if (entity !== undefined) return this.cTuidInfo(entity);\r\n    }\r\n\r\n    cTuidSelectFromName(entityName:string) {\r\n        let entity = this.uq.tuid(entityName);\r\n        if (entity !== undefined) return this.cTuidSelect(entity);\r\n    }\r\n\r\n    cFromName(entityType:EntityType, entityName:string): CEntity<Entity, EntityUI> {\r\n        switch (entityType) {\r\n            case 'sheet':\r\n                let sheet = this.uq.sheet(entityName);\r\n                if (sheet === undefined) return;\r\n                return this.cSheet(sheet);\r\n            case 'action':\r\n                let action = this.uq.action(entityName);\r\n                if (action === undefined) return;\r\n                return this.cAction(action);\r\n            case 'tuid':\r\n                let tuid = this.uq.tuid(entityName);\r\n                if (tuid === undefined) return;\r\n                return this.cTuidMain(tuid);\r\n            case 'query':\r\n                let query = this.uq.query(entityName);\r\n                if (query === undefined) return;\r\n                return this.cQuery(query);\r\n            case 'book':\r\n                let book = this.uq.book(entityName);\r\n                if (book === undefined) return;\r\n                return this.cBook(book);\r\n            case 'map':\r\n                let map = this.uq.map(entityName);\r\n                if (map === undefined) return;\r\n                return this.cMap(map);\r\n            case 'history':\r\n                let history = this.uq.history(entityName);\r\n                if (history === undefined) return;\r\n                return this.cHistory(history);\r\n            case 'pending':\r\n                let pending = this.uq.pending(entityName);\r\n                if (pending === undefined) return;\r\n                return this.cPending(pending);\r\n        }\r\n    }\r\n\r\n    linkFromName(entityType:EntityType, entityName:string) {\r\n        return this.link(this.cFromName(entityType, entityName));\r\n    }\r\n\r\n    private getUI<T extends Entity, UI extends EntityUI>(t:T):{ui:UI, res:any} {\r\n        let ui:any, res:any;\r\n        let {name, typeName} = t;\r\n        if (this.ui !== undefined) {\r\n            if (typeName === 'div') {\r\n                let tuidDiv:TuidDiv = t as unknown as TuidDiv;\r\n                let ownerTuid = tuidDiv.owner;\r\n                let tUIs = this.ui[ownerTuid.typeName] as TuidUI;\r\n                if (tUIs) {\r\n                    let tUI = tUIs[ownerTuid.name];\r\n                    if (tUI) {\r\n                        let divs = tUI.divs;\r\n                        if (divs) {\r\n                            ui = divs[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                let tUI = this.ui[typeName];\r\n                if (tUI !== undefined) {\r\n                    ui = tUI[name];\r\n                }\r\n            }\r\n        }\r\n        let {entity} = this.res;\r\n        if (entity !== undefined) {\r\n            res = entity[name];\r\n        }\r\n        return {ui: ui || {}, res: res || {} };\r\n    }\r\n\r\n    link(cEntity:CEntity<Entity, EntityUI>) {\r\n        return new CLink(cEntity);\r\n    }\r\n\r\n    get tuidLinks() {\r\n        return this.uq.tuidArr.filter(v => this.isVisible(v)).map(v => this.link(this.cTuidMain(v)));\r\n    }\r\n    cTuidMain(tuid:Tuid):CTuidMain {\r\n        let {ui, res} = this.getUI<Tuid, TuidUI>(tuid);\r\n        return new (ui && ui.CTuidMain || this.CTuidMain)(this, tuid, ui, res);\r\n    }\r\n    cTuidEdit(tuid:Tuid):CTuidEdit {\r\n        let {ui, res} = this.getUI<Tuid, TuidUI>(tuid);\r\n        return new (ui && ui.CTuidEdit || this.CTuidEdit)(this, tuid, ui, res);\r\n    }\r\n    cTuidList(tuid:Tuid):CTuidList {\r\n        let {ui, res} = this.getUI<Tuid, TuidUI>(tuid);\r\n        return new (ui && ui.CTuidList || this.CTuidList)(this, tuid, ui, res);\r\n    }\r\n    cTuidSelect(tuid:Tuid):CTuidSelect {\r\n        let {ui, res} = this.getUI<Tuid, TuidUI>(tuid);\r\n        return new (ui && ui.CTuidSelect || this.CTuidSelect)(this, tuid, ui, res);\r\n    }\r\n    cTuidInfo(tuid:Tuid):CTuidInfo {\r\n        let {ui, res} = this.getUI<Tuid, TuidUI>(tuid);\r\n        return new (ui && ui.CTuidInfo || this.CTuidInfo)(this, tuid, ui, res);\r\n    }\r\n\r\n    cSheet(sheet:Sheet/*, sheetUI?:SheetUI, sheetRes?:any*/):CSheet {\r\n        let {ui, res} = this.getUI<Sheet, SheetUI>(sheet);\r\n        //if (sheetUI !== undefined) ui = sheetUI;\r\n        //if (sheetRes !== undefined) res = sheetRes;\r\n        //return new (ui && ui.CSheet || this.CSheet)(this, sheet, sheetUI, sheetRes);\r\n        return new (ui && ui.CSheet || this.CSheet)(this, sheet, ui, res);\r\n    }\r\n    get sheetLinks() { \r\n        return this.uq.sheetArr.filter(v => this.isVisible(v)).map(v => {\r\n            return this.link(this.cSheet(v))\r\n        });\r\n    }\r\n\r\n    cAction(action:Action):CAction {\r\n        let {ui, res} = this.getUI<Action, ActionUI>(action);\r\n        return new (ui && ui.CAction || this.CAction)(this, action, ui, res);\r\n    }\r\n    get actionLinks() { \r\n        return this.uq.actionArr.filter(v => this.isVisible(v)).map(v => {\r\n            return this.link(this.cAction(v))\r\n        });\r\n    }\r\n\r\n    cQuery(query:Query):CQuery {\r\n        let {ui, res} = this.getUI<Query, QueryUI>(query);\r\n        return new (ui && ui.CQuery || this.CQuery)(this, query, ui, res);\r\n    }\r\n    cQuerySelect(queryName:string):CQuerySelect {\r\n        let query = this.uq.query(queryName);\r\n        if (query === undefined) return;\r\n        let {ui, res} = this.getUI<Query, QueryUI>(query);\r\n        return new (ui && ui.CQuerySelect || this.CQuerySelect)(this, query, ui, res);\r\n    }\r\n    get queryLinks() {\r\n        return this.uq.queryArr.filter(v => this.isVisible(v)).map(v => {\r\n            return this.link(this.cQuery(v))\r\n        });\r\n    }\r\n    \r\n    cBook(book:Book):CBook {\r\n        let {ui, res} = this.getUI<Book, BookUI>(book);\r\n        return new (ui && ui.CBook || this.CBook)(this, book, ui, res);\r\n    }\r\n    get bookLinks() { \r\n        return this.uq.bookArr.filter(v => this.isVisible(v)).map(v => {\r\n            return this.link(this.cBook(v))\r\n        });\r\n    }\r\n    \r\n    cHistory(history:History):CHistory {\r\n        let {ui, res} = this.getUI<History, HistoryUI>(history);\r\n        return new (ui && ui.CHistory || this.CHistory)(this, history, ui, res);\r\n    }\r\n    get historyLinks() { \r\n        return this.uq.historyArr.filter(v => this.isVisible(v)).map(v => {\r\n            return this.link(this.cHistory(v))\r\n        });\r\n    }\r\n    \r\n    cPending(pending:Pending):CPending {\r\n        let {ui, res} = this.getUI<Pending, PendingUI>(pending);\r\n        return new (ui && ui.CPending || this.CPending)(this, pending, ui, res);\r\n    }\r\n    get pendingLinks() { \r\n        return this.uq.pendingArr.filter(v => this.isVisible(v)).map(v => {\r\n            return this.link(this.cPending(v))\r\n        });\r\n    }\r\n    \r\n    cMap(map:Map):CMap {\r\n        let {ui, res} = this.getUI<Map, MapUI>(map);\r\n        return new (ui && ui.CMap || this.CMap)(this, map, ui, res);\r\n    }\r\n    get mapLinks() { \r\n        return this.uq.mapArr.filter(v => this.isVisible(v)).map(v => {\r\n            return this.link(this.cMap(v));\r\n        });\r\n    }\r\n\r\n    getTuidContent(tuid:Tuid): React.StatelessComponent<any> {\r\n        let {ui} = this.getUI<Tuid, TuidUI>(tuid);\r\n        return (ui && ui.content) || PureJSONContent;\r\n    }\r\n\r\n    getTuidDivContent(tuidDiv:TuidDiv): React.StatelessComponent<any> {\r\n        let {owner} = tuidDiv;\r\n        let {ui} = this.getUI<Tuid, TuidUI>(owner);\r\n        return (ui && ui.divs && ui.divs[tuidDiv.name].content) || PureJSONContent;\r\n    }\r\n\r\n    async showTuid(tuid:Tuid, id:number):Promise<void> {\r\n        let c = this.cTuidInfo(tuid);\r\n        await c.start(id);\r\n    }\r\n\r\n    async showTuidDiv(tuid:TuidDiv, id:number):Promise<void> {\r\n        let {owner} = tuid;\r\n        let c = this.cTuidInfo(owner);\r\n        await c.start(id);\r\n    }\r\n\r\n    protected get VUq():typeof VUq {return VUq}\r\n\r\n    render() {\r\n        let v = new (this.VUq)(this);\r\n        return v.render();\r\n    }\r\n}\r\n\r\n","export * from './cUq';\r\nexport * from './vUq';\r\nexport * from './reactBoxId';","import jwtDecode from 'jwt-decode';\r\n\r\nexport interface Unit {\r\n    id: number;\r\n    name: string;\r\n}\r\n\r\nexport interface Guest {\r\n    id: number;             // id = 0\r\n    guest: number;\r\n    token: string;\r\n}\r\n\r\nexport interface User extends Guest {\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n}\r\n\r\n/*\r\nexport class UserInNav {\r\n    private user: User;\r\n    constructor(user: User) {\r\n        this.user = user;\r\n    }\r\n    get id():number {return this.user.id}\r\n    get name(): string {return this.user.name}\r\n    get nick(): string {return this.user.nick}\r\n    get icon(): string {return this.user.icon || ('http://' + process.env['REACT_APP_CENTER_HOST'] + '/imgs/Bear-icon.png');}\r\n    get guest(): number {return this.user.guest}\r\n    get token(): string {return this.user.token}\r\n}\r\n*/\r\nexport function decodeUserToken(token: string): User {\r\n    let ret:any = jwtDecode(token);\r\n    let user: User = {\r\n        id: ret.id,\r\n        name: ret.name,\r\n        guest: ret.guest,\r\n        token: token,\r\n    };\r\n    return user;\r\n}\r\n\r\nexport function decodeGuestToken(token: string): Guest {\r\n    let ret:any = jwtDecode(token);\r\n    let guest: Guest = {\r\n        id: 0,\r\n        guest: ret.guest,\r\n        token: token,\r\n    };\r\n    return guest;\r\n}\r\n","import { env } from '../tool';\r\n\r\nconst centerHost = process.env['REACT_APP_CENTER_HOST'];\r\nconst centerDebugHost = 'localhost:3000'; //'192.168.86.64';\r\nconst resHost = process.env['REACT_APP_RES_HOST'] || centerHost;\r\nconst resDebugHost = 'localhost:3015'; //'192.168.86.63';\r\nconst uqDebugHost = 'localhost:3015'; //'192.168.86.63';\r\nconst uqDebugBuilderHost = 'localhost:3009';\r\ninterface HostValue {\r\n    value: string;\r\n    local: boolean;\r\n}\r\nconst hosts:{[name:string]:HostValue} = {\r\n    centerhost: {\r\n        value: process.env['REACT_APP_CENTER_DEBUG_HOST'] || centerDebugHost, \r\n        local: false\r\n    },\r\n    reshost: {\r\n        value: process.env['REACT_APP_RES_DEBUG_HOST'] || resDebugHost,\r\n        local: false\r\n    },\r\n    uqhost: {\r\n        value: process.env['REACT_APP_UQ_DEBUG_HOST'] || uqDebugHost, \r\n        local: false\r\n    },\r\n    unitxhost: {\r\n        value: process.env['REACT_APP_UQ_DEBUG_HOST'] || uqDebugHost, \r\n        local: false\r\n    },\r\n    \"uq-build\": {\r\n        value: process.env['REACT_APP_UQ_DEBUG_BUILDER_HOST'] || uqDebugBuilderHost, \r\n        local: false\r\n    }\r\n}\r\n\r\nfunction urlFromHost(host:string):string {\r\n    if (host.startsWith('https://') === true) {\r\n        if (host.endsWith('/')) return host;\r\n        return host + '/';\r\n    }\r\n    return `http://${host}/`;\r\n}\r\n\r\nfunction centerUrlFromHost(host:string):string {\r\n    return urlFromHost(host);\r\n}\r\nfunction centerWsFromHost(host:string) {\r\n    let https = 'https://';\r\n    if (host.startsWith(https) === true) {\r\n        host = host.substr(https.length);\r\n        if (host.endsWith('/') === true) host = host.substr(0, host.length-1);\r\n        return 'wss://' + host + '/tv/';\r\n    }\r\n    return `ws://${host}/tv/`\r\n}\r\nexport function resUrlFromHost(host:string) {\r\n    let url = urlFromHost(host);\r\n    return url + 'res/';\r\n}\r\n\r\nconst fetchOptions = {\r\n    method: \"GET\",\r\n    mode: \"no-cors\", // no-cors, cors, *same-origin\r\n    headers: {\r\n        \"Content-Type\": \"text/plain\"\r\n    },\r\n};\r\n\r\nclass Host {\r\n    testing: boolean;\r\n    url: string;\r\n    ws: string;\r\n    resHost: string;\r\n\r\n    async start(testing:boolean) {\r\n        this.testing = testing;\r\n        if (env.isDevelopment === true) {\r\n            await this.tryLocal();\r\n        }\r\n        let host = this.getCenterHost();\r\n        this.url = centerUrlFromHost(host);\r\n        this.ws = centerWsFromHost(host);\r\n        this.resHost = this.getResHost();\r\n    }\r\n\r\n    private debugHostUrl(host:string) {return `http://${host}/hello`}\r\n    private async tryLocal() {\r\n        let promises:PromiseLike<any>[] = [];\r\n        let hostArr:string[] = [];\r\n        for (let i in hosts) {\r\n            let hostValue = hosts[i];\r\n            let {value} = hostValue;\r\n            if (hostArr.findIndex(v => v === value) < 0) hostArr.push(value);\r\n        }\r\n\r\n        for (let host of hostArr) {\r\n            let fetchUrl = this.debugHostUrl(host);\r\n            promises.push(localCheck(fetchUrl));\r\n        }\r\n        let results = await Promise.all(promises);\r\n        let len = hostArr.length;\r\n        for (let i=0; i<len; i++) {\r\n            let local = results[i];\r\n            let host = hostArr[i];\r\n            for (let j in hosts) {\r\n                let hostValue = hosts[j];\r\n                if (hostValue.value === host) {\r\n                    hostValue.local = local;\r\n                }\r\n            }\r\n        }\r\n        /*\r\n        let p = 0;\r\n        for (let i in hosts) {\r\n            let hostValue = hosts[i];\r\n            hostValue.local = results[p];\r\n            ++p;\r\n        }\r\n        */\r\n    }\r\n\r\n    private getCenterHost():string {\r\n        let {value, local} = hosts.centerhost;\r\n        let hash = document.location.hash;\r\n        if (hash.includes('sheet_debug') === true) {\r\n            return value;\r\n        }\r\n        if (env.isDevelopment === true) {\r\n            if (local === true) return value;\r\n        }\r\n        return centerHost;\r\n    }\r\n\r\n    private getResHost():string {\r\n        let {value, local} = hosts.reshost;\r\n        let hash = document.location.hash;\r\n        if (hash.includes('sheet_debug') === true) {\r\n            return value;\r\n        }\r\n        if (env.isDevelopment === true) {\r\n            if (local === true) return value;\r\n        }\r\n        return resHost;\r\n    }\r\n\r\n    getUrlOrDebug(url:string, debugHost:string = 'uqhost'):string {\r\n        if (env.isDevelopment === false) return url;\r\n        let host = hosts[debugHost];\r\n        if (host === undefined) return url;\r\n        let {value, local} = host;\r\n        if (local === false) return url;\r\n        return `http://${value}/`;\r\n    }\r\n    getUrlOrTest(db:string, url:string, urlTest:string):string {\r\n        let path:string;\r\n        if (this.testing === true) {\r\n            if (urlTest !== '-') url = urlTest;\r\n            path = 'uq/test/' + db + '/';\r\n        }\r\n        else {\r\n            path = 'uq/prod/' + db + '/';\r\n        }\r\n        url = this.getUrlOrDebug(url);\r\n        return url + path;\r\n    }\r\n\r\n    async localCheck(urlDebug: string):Promise<boolean> {\r\n        return await localCheck(urlDebug);\r\n    }\r\n}\r\n\r\nexport const host:Host = new Host();\r\n\r\n// 因为测试的都是局域网服务器，甚至本机服务器，所以一秒足够了\r\n// 网上找了上面的fetch timeout代码。\r\n// 尽管timeout了，fetch仍然继续，没有cancel\r\n\r\n// 实际上，一秒钟不够。web服务器会自动停。重启的时候，可能会比较长时间。也许两秒甚至更多。\r\n//const timeout = 2000;\r\nconst timeout = 200;\r\n\r\nfunction fetchLocalCheck(url:string):Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      fetch(url, fetchOptions as any)\r\n      .then(v => {\r\n          v.text().then(resolve).catch(reject);\r\n      })\r\n      .catch(reject);\r\n      const e = new Error(\"Connection timed out\");\r\n      setTimeout(reject, timeout, e);\r\n    });\r\n}\r\n\r\nasync function localCheck(url:string):Promise<boolean> {\r\n    try {\r\n        await fetchLocalCheck(url);\r\n        return true;\r\n    }\r\n    catch (err) {\r\n        return false;\r\n    }\r\n}\r\n\r\n/*\r\nexport interface IUqForChannel {\r\n    uq: string;\r\n    uqVersion: number;\r\n}\r\n*/","import * as React from 'react';\r\nimport { Page, SearchBox, List, Muted, LMR } from '../../components';\r\nimport { Tuid, Entity } from '../../uq';\r\nimport { CLink } from '../link';\r\nimport { VEntity } from '../CVEntity';\r\nimport { CTuidMain, TuidUI } from './cTuid';\r\n\r\nexport class VTuidMain extends VEntity<Tuid, TuidUI, CTuidMain> {\r\n    protected controller: CTuidMain;\r\n    onNew = () => this.event('new');\r\n    onList = () => this.event('list');\r\n    onSearch = async (key:string) => this.event('list', key);\r\n\r\n    async open(param?:any):Promise<void> {\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    protected entityRender(link: CLink, index: number): JSX.Element {\r\n        return link.render();\r\n    }\r\n\r\n    protected async entityClick(link: CLink) {\r\n        await link.onClick();\r\n    }\r\n\r\n    protected get view() {\r\n        let {label, isImport} = this.controller;\r\n        let newButton:any;\r\n        if (isImport === false) newButton = <button className=\"btn btn-outline-success ml-2\" onClick={this.onNew}>新增</button>;\r\n        let right = <>\r\n            {newButton}\r\n            <button className=\"btn btn-outline-info ml-2\" onClick={this.onList}>全部</button>\r\n        </>;\r\n        let content = <LMR className='m-3' right={right}>\r\n            <SearchBox className=\"w-100\" size=\"md\"\r\n                onSearch={this.onSearch} \r\n                placeholder={'搜索'+label} />\r\n        </LMR>;\r\n        return () => <Page header={label}>\r\n            {content}\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Page, FA } from '../../components';\r\nimport { VForm } from '../form';\r\nimport { VEntity } from '../CVEntity';\r\nimport { CTuidMain, TuidUI } from './cTuid';\r\nimport { Tuid } from '../../uq';\r\n\r\nexport type TypeVTuidEdit = typeof VTuidEdit;\r\n\r\nexport class VTuidEdit extends VEntity<Tuid, TuidUI, CTuidMain> {\r\n    private vForm: VForm;\r\n    private id: number;\r\n\r\n    async open(param?:any):Promise<void> {\r\n        this.vForm = this.createForm(this.onSubmit, param);\r\n        if (param !== undefined) {\r\n            this.id = param.id;\r\n        }\r\n        this.openPage(this.editView);\r\n    }\r\n\r\n    protected get editView() {\r\n        return () => <Page header={(this.id===undefined? '新增':'编辑') + ' - ' + this.label}>\r\n            {this.vForm.render('py-3')}\r\n        </Page>;\r\n    }\r\n\r\n    protected next = async () => {\r\n        this.vForm.reset();\r\n        this.closePage();\r\n    }\r\n\r\n    protected finish = () => {\r\n        this.closePage(2);\r\n        this.event('edit-end');\r\n    }\r\n\r\n    protected resetForm() {\r\n        this.vForm.reset();\r\n    }\r\n\r\n    protected onSubmit = async () => {\r\n        let values = this.vForm.getValues();\r\n        let ret = await this.controller.entity.save(this.id, values);\r\n        let {id} = ret;\r\n        if (id < 0) {\r\n            let {unique} = this.controller.entity;\r\n            if (unique !== undefined) {\r\n                for (let u of unique) {\r\n                    this.vForm.setError(u, '不能重复');\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        if (this.controller.isCalling) {\r\n            this.returnCall(id);\r\n            this.closePage();\r\n            return;\r\n        }\r\n        this.openPageElement(<Page header={this.label + '提交成功'} back=\"none\">\r\n            <div className='m-3'>\r\n                <span className=\"text-success\">\r\n                    <FA name='check-circle' size='lg' /> 成功提交！\r\n                </span>\r\n                <div className='mt-5'>\r\n                    <button className=\"btn btn-primary mr-3\" onClick={this.next}>继续录入</button>\r\n                    <button className=\"btn btn-outline-primary\" onClick={this.finish}>不继续</button>\r\n                </div>\r\n            </div>\r\n        </Page>);\r\n\r\n        this.event('item-changed', {id: this.id, values: values});\r\n        return;\r\n    }\r\n\r\n    //protected view = TuidNewPage;\r\n}\r\n/*\r\nconst TuidNewPage = observer(({vm}:{vm:VmTuidEdit}) => {\r\n    let {label, id, vmForm} = vm;\r\n    return <Page header={(id===undefined? '新增':'编辑') + ' - ' + label}>\r\n        {vmForm.render('mx-3 my-2')}\r\n    </Page>;\r\n});\r\n*/","import { nav, Page, SearchBox, List } from '../../components';\r\nimport { VEntity } from '../CVEntity';\r\nimport { Tuid } from '../../uq';\r\nimport { CTuid, TuidUI } from './cTuid';\r\nimport React from 'react';\r\nimport { RowContent } from '../form/viewModel';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class VTuidSelect extends VEntity<Tuid, TuidUI, CTuid<Tuid>> {\r\n    protected mainRowContent: (row:any) => JSX.Element;\r\n    protected divRowContent: (row:any) => JSX.Element;\r\n\r\n    async open(param?:any): Promise<void> {\r\n        if (param === undefined)\r\n            await this.showMain(param);\r\n        else\r\n            await this.showDiv(param);\r\n    }\r\n\r\n    private async showMain(param) {\r\n        this.mainRowContent = this.ui.rowContent || RowContent;\r\n        await this.controller.searchMain(param);\r\n        this.openPage(this.mainView);\r\n    }\r\n\r\n    private async showDiv(ownerValue: any) {\r\n        let {divs} = this.ui;\r\n        if (divs !== undefined) {\r\n            this.divRowContent = divs[this.entity.name].rowContent;\r\n        }\r\n        if (this.divRowContent === undefined) {\r\n            this.divRowContent = RowContent;\r\n        }\r\n        let divItems = await this.controller.getDivItems(ownerValue);\r\n        this.openPage(this.divView, {items: divItems});\r\n    }\r\n\r\n    protected mainView = observer(() => {\r\n        let header = <SearchBox className=\"mx-1 w-100\"\r\n            initKey={''}\r\n            onSearch={this.onSearchMain} placeholder={'搜索'+this.label} />;\r\n        return <Page header={header} back=\"close\">\r\n            <List\r\n                items={this.controller.PageItems.items}\r\n                item={{render: this.renderMainRow, onClick: this.clickMainRow}}\r\n                before={'搜索'+this.label+'资料'} />\r\n        </Page>;\r\n    });\r\n\r\n    onSearchMain = async (key:string) => {\r\n        await this.controller.searchMain(key);\r\n        //await this.PageItems.first(key);\r\n    }\r\n    renderMainRow = (item:any, index:number):JSX.Element => <this.mainRowContent {...item} />;\r\n    clickMainRow = async (item:any) => {\r\n        this.ceasePage();\r\n        if (this.controller.entity.hasDiv === undefined) {\r\n            this.returnCall(item);\r\n            return;\r\n        }\r\n        await this.showDiv(this.entity.getIdFromObj(item));\r\n    }\r\n\r\n    protected divView = (param:any) => {\r\n        return <Page header=\"选择Div\">\r\n            <List\r\n                items={param.items}\r\n                item={{render: this.renderDivRow, onClick: this.clickDivRow}} />\r\n        </Page>;\r\n    }\r\n    renderDivRow = (item:any, index:number):JSX.Element => <this.divRowContent {...item} />;\r\n    clickDivRow = (item:any) => {\r\n        this.ceasePage();\r\n        this.returnCall(item);\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { VTuidView } from './vTuidView';\r\n\r\nexport class VTuidInfo  extends VTuidView {\r\n/*\r\n    async open(param?:any) {\r\n        this.open(this.view);\r\n    }\r\n*/\r\n/*\r\n    private view = () => {\r\n        return <Page>\r\n            TuidInfo\r\n        </Page>\r\n    }\r\n*/\r\n}\r\n","import * as React from 'react';\r\nimport { FA, Page } from '../../components';\r\nimport { jsonStringify } from '../tools';\r\nimport { VForm } from '../form';\r\nimport { VEntity } from '../CVEntity';\r\nimport { Tuid } from '../../uq';\r\nimport { TuidUI, CTuidMain } from './cTuid';\r\n\r\nexport type TypeVTuidView = typeof VTuidView;\r\n\r\nexport class VTuidView extends VEntity<Tuid, TuidUI, CTuidMain> {\r\n    vForm: VForm;\r\n    id: number;\r\n\r\n    protected buildForm(param:any) {\r\n        this.vForm = this.createForm(undefined, param);\r\n    }\r\n\r\n    async open(param:any) {\r\n        this.buildForm(param);\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    render(param:any) {\r\n        this.buildForm(param);\r\n        return this.vForm.render();\r\n    }\r\n\r\n    async loadId(id: number) {\r\n        this.id = id;\r\n    }\r\n\r\n    protected next = async () => {\r\n        this.vForm.reset();\r\n        this.closePage();\r\n    }\r\n\r\n    protected finish = () => {\r\n        this.closePage(2);\r\n    }\r\n\r\n    protected resetForm() {\r\n        this.vForm.reset();\r\n    }\r\n\r\n    protected onSubmit = async () => {\r\n        let values = this.vForm.getValues();\r\n        let ret = await this.entity.save(this.id, values);\r\n        if (ret) {\r\n            alert('这里还要判断返回值，先不处理了 \\n' + jsonStringify(ret));\r\n        }\r\n        this.openPage(() => <Page header={this.label + '提交成功'} back=\"none\">\r\n            <div className='m-3'>\r\n                <span className=\"text-success\">\r\n                    <FA name='check-circle' size='lg' /> 成功提交！\r\n                </span>\r\n                <div className='mt-5'>\r\n                    <button className=\"btn btn-primary mr-3\" onClick={this.next}>继续录入</button>\r\n                    <button className=\"btn btn-outline-primary\" onClick={this.finish}>不继续</button>\r\n                </div>\r\n            </div>\r\n        </Page>);\r\n        return;\r\n    }\r\n\r\n    protected view = () => <Page header={this.label}>\r\n            {this.vForm.render('py-3')}\r\n    </Page>;\r\n}\r\n","import { PageItems } from '../../tool';\r\nimport { Tuid } from '../../uq';\r\n\r\nexport class TuidPageItems<T> extends PageItems<T> {\r\n    private tuid: Tuid;\r\n    constructor(tuid: Tuid) {\r\n        super(true);\r\n        this.tuid = tuid;\r\n    }\r\n    protected async load(param:any, pageStart:any, pageSize:number):Promise<any[]> {\r\n        let ret = await this.tuid.search(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n    protected setPageStart(item:any) {\r\n        this.pageStart = item === undefined? 0 : item.id;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { FA, SearchBox, List, Page, VPage } from '../../components';\r\nimport { jsonStringify } from '../tools';\r\nimport { Tuid, TuidDiv } from '../../uq';\r\nimport { VEntity } from '../CVEntity';\r\nimport { TuidUI, CTuidMain, CTuidDiv } from './cTuid';\r\nimport { JSONContent, RowContent } from '../form/viewModel';\r\n\r\nexport abstract class VTuidListBase  extends VEntity<Tuid, TuidUI, CTuidMain> {\r\n    protected rowContent: (row:any) => JSX.Element;\r\n    protected ownerId: number;\r\n\r\n    async open(param?:any) {\r\n        this.rowContent = this.ui.rowContent || RowContent;\r\n        //if (this.entity.owner !== undefined) \r\n        this.ownerId = Number(param);\r\n        // 初始查询, key是空的\r\n        //await this.onSearch('');\r\n        await this.controller.searchMain('');\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    onSearch = async (key:string) => {\r\n        await this.controller.searchMain(key);\r\n        //await this.PageItems.first(key);\r\n    }\r\n    renderRow = (item:any, index:number):JSX.Element => <this.rowContent {...item} />;\r\n\r\n    protected abstract onSelected(item:any): Promise<void>;\r\n    private callOnSelected(item:any) {\r\n        if (this.onSelected === undefined) {\r\n            alert('onSelect is undefined');\r\n            return;\r\n        }\r\n        this.onSelected(item);\r\n    }\r\n    clickRow = (item:any) => {\r\n        this.callOnSelected(item);\r\n    }\r\n    private rowKey = (item:any) => {\r\n        let {id} = item;\r\n        return id;\r\n    }\r\n    protected view = observer(() => {\r\n        let header = <SearchBox className=\"mx-1 w-100\"\r\n            initKey={''}\r\n            onSearch={this.onSearch} placeholder={'搜索'+this.label} />;\r\n        /*\r\n        let {owner} = this.entity;\r\n        let ownerTop;\r\n        if (owner !== undefined) {\r\n            let ownerObj = owner.valueFromId(this.ownerId);\r\n            ownerTop = <div>owner: {jsonStringify(ownerObj)}</div>;\r\n        }\r\n        */\r\n        return <Page header={header}>\r\n            {/*ownerTop*/}\r\n            <List\r\n                items={this.controller.PageItems.items}\r\n                item={{render: this.renderRow, onClick: this.clickRow, key:this.rowKey}}\r\n                before={'搜索'+this.label+'资料'} />\r\n        </Page>;\r\n    });\r\n}\r\n\r\nexport class VTuidList extends VTuidListBase {\r\n    protected async onSelected(item:any) {\r\n        if (this.controller.isImport === false)\r\n            this.event('edit', item.id);\r\n        else\r\n            this.event('info', item.id);\r\n    }\r\n}\r\n/*\r\nexport abstract class VTuidDivListBase  extends VPage<CTuidDiv> {\r\n    protected ownerId: number;\r\n\r\n    async open(param?:any) {\r\n        //this.PageItems = new TuidPageItems(this.entity);\r\n        if (this.entity.owner !== undefined) this.ownerId = Number(param);\r\n        // 初始查询, key是空的\r\n        //await this.onSearch('');\r\n        await this.controller.searchMain('');\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    onSearch = async (key:string) => {\r\n        await this.controller.searchMain(key);\r\n        //await this.PageItems.first(key);\r\n    }\r\n    renderRow = (item:any, index:number):JSX.Element => {\r\n        return <div className=\"px-3 py-2\">{jsonStringify(item)}</div>;\r\n    }\r\n\r\n    protected abstract onSelected(item:any): Promise<void>;\r\n    private callOnSelected(item:any) {\r\n        if (this.onSelected === undefined) {\r\n            alert('onSelect is undefined');\r\n            return;\r\n        }\r\n        this.onSelected(item);\r\n    }\r\n    clickRow = (item:any) => {\r\n        this.callOnSelected(item);\r\n    }\r\n\r\n    protected view = observer(() => {\r\n        let header = <SearchBox className=\"mx-1 w-100\"\r\n            initKey={''}\r\n            onSearch={this.onSearch} placeholder={'搜索'+this.label} />;\r\n        let {owner} = this.entity;\r\n        let ownerTop;\r\n        if (owner !== undefined) {\r\n            let ownerObj = owner.valueFromId(this.ownerId);\r\n            ownerTop = <div>owner: {jsonStringify(ownerObj)}</div>;\r\n        }\r\n        return <Page header={header}>\r\n            {ownerTop}\r\n            <List\r\n                items={this.controller.PageItems.items}\r\n                item={{render: this.renderRow, onClick: this.clickRow}}\r\n                before={'搜索'+this.label+'资料'} />\r\n        </Page>;\r\n    });\r\n}\r\n\r\nexport class VTuidDivList extends VTuidDivListBase {\r\n    protected async onSelected(item:any) {\r\n        this.event('edit', item.id);\r\n    }\r\n}\r\n*/","import _ from 'lodash';\r\nimport { CEntity, EntityUI } from '../CVEntity';\r\nimport { Tuid, TuidDiv } from '../../uq';\r\nimport { VTuidMain } from './vTuidMain';\r\nimport { VTuidEdit } from './vTuidEdit';\r\nimport { VTuidSelect } from './vTuidSelect';\r\nimport { CUq } from '../cUq/cUq';\r\n//import { CLink } from '../link';\r\nimport { VTuidInfo } from './vTuidInfo';\r\nimport { TuidPageItems } from './pageItems';\r\nimport { VTuidList } from './vTuidList';\r\nimport { PageItems } from '../../tool';\r\n//import { Controller } from 'ui';\r\n\r\nexport interface TuidUI extends EntityUI {\r\n    CTuidMain?: typeof CTuidMain;\r\n    CTuidEdit?: typeof CTuidEdit;\r\n    CTuidList?: typeof CTuidList;\r\n\r\n    CTuidSelect?: typeof CTuidSelect;\r\n    CTuidInfo?: typeof CTuidInfo;\r\n    content?: React.StatelessComponent<any>;\r\n    rowContent?: React.StatelessComponent<any>;\r\n    divs?: {\r\n        [div:string]: {\r\n            CTuidSelect?: typeof CTuidSelect;\r\n            content?: React.StatelessComponent<any>;\r\n            rowContent?: React.StatelessComponent<any>;\r\n        }\r\n    }\r\n}\r\n\r\nexport abstract class CTuid<T extends Tuid> extends CEntity<T, TuidUI> {\r\n    PageItems:PageItems<any>;\r\n\r\n    protected buildPageItems():PageItems<any> {\r\n        return new TuidPageItems(this.entity);\r\n    }\r\n\r\n    async searchMain(key:string) {\r\n        if (this.PageItems === undefined) {\r\n            this.PageItems = this.buildPageItems();\r\n        }\r\n        if (key !== undefined) await this.PageItems.first(key);\r\n    }\r\n\r\n    async getDivItems(ownerId:number):Promise<any[]> {\r\n        let ret = await this.entity.searchArr(ownerId, undefined, 0, 1000);\r\n        return ret;\r\n    }\r\n}\r\n\r\nexport abstract class CTuidBase extends CTuid<Tuid> {\r\n    constructor(cUq: CUq, entity:Tuid, ui: TuidUI, res:any) {\r\n        super(cUq, entity, ui, res);\r\n    }\r\n    \r\n    from():CTuidBase {\r\n        let ret = this; // this.entity.cFrom();\r\n        if (ret === undefined) return this;\r\n        return ret;\r\n    }\r\n\r\n    cUqFrom():CUq {\r\n        return this.cUq; // this.entity.cUqFrom();\r\n    }\r\n    cEditFrom(): CTuidEdit {\r\n        let cUq = this.cUq; // this.entity.cUqFrom();\r\n        return cUq.cTuidEditFromName(this.entity.name);\r\n    }\r\n    cInfoFrom(): CTuidInfo {\r\n        let cUq = this.cUq; // this.entity.cUqFrom();\r\n        return cUq.cTuidInfoFromName(this.entity.name);\r\n    }\r\n    cSelectFrom(): CTuidSelect {\r\n        let cUq = this.cUq;// this.entity.cUqFrom();\r\n        return cUq.cTuidSelectFromName(this.entity.name);\r\n    }\r\n\r\n    getLable(tuid:Tuid):string {\r\n        if (tuid === this.entity) return this.label;\r\n        let {name} = tuid;\r\n        let {arrs} = this.res;\r\n        if (arrs !== undefined) {\r\n            let arr = arrs[name];\r\n            if (arr !== undefined) {\r\n                let label = arr.label;\r\n                if (label !== undefined) return label;\r\n            }\r\n        }\r\n        return name;\r\n    }\r\n\r\n    isImport: boolean;\r\n\r\n    protected get VTuidMain():typeof VTuidMain {return VTuidMain}\r\n    protected get VTuidEdit():typeof VTuidEdit {return VTuidEdit}\r\n    protected get VTuidList():typeof VTuidList {return VTuidList}\r\n\r\n    protected async internalStart(param?:any):Promise<void> {\r\n        this.isImport = this.entity.isImport;\r\n        await this.openVPage(this.VTuidMain);\r\n    }\r\n\r\n    protected async onEvent(type:string, value:any) {\r\n        //let v: TypeVPage<CTuidMain>;\r\n        switch (type) {\r\n            default: return;\r\n            case 'new': await this.onNew(); break;\r\n            case 'list': await this.onList(); break;\r\n            case 'edit': await this.onEdit(value); return;\r\n            case 'item-changed': this.itemChanged(value); return;\r\n            case 'info': \r\n                let cTuidInfo = new CTuidInfo(this.cUq, this.entity, this.ui, this.res);\r\n                await cTuidInfo.start(value);\r\n                return;\r\n        }\r\n        //await this.openVPage(v, value);\r\n    }\r\n\r\n    protected async edit(values:any) {\r\n        let cTuidEdit = this.ui && this.ui.CTuidEdit;\r\n        if (cTuidEdit === undefined) {\r\n            await this.openVPage(this.VTuidEdit, values);\r\n        }\r\n        else {\r\n            await (new cTuidEdit(this.cUq, this.entity, this.ui, this.res)).start(values);\r\n        }\r\n    }\r\n\r\n    private async onNew() {\r\n        await this.edit(undefined);\r\n    }\r\n\r\n    private async onList() {\r\n        let cTuidList = this.ui && this.ui.CTuidList;\r\n        if (cTuidList === undefined) {\r\n            await this.openVPage(this.VTuidList, undefined);\r\n        }\r\n        else {\r\n            await (new cTuidList(this.cUq, this.entity, this.ui, this.res)).start(undefined);\r\n        }\r\n    }\r\n\r\n    protected async onEdit(id:number) {\r\n        let values:any = undefined;\r\n        if (id !== undefined) {\r\n            values = await this.entity.load(id);\r\n        }\r\n        this.edit(values);\r\n        //await this.openVPage(this.VTuidEdit, values);\r\n    }\r\n\r\n    private itemChanged({id, values}:{id:number, values: any}) {\r\n        if (this.PageItems === undefined) return;\r\n        let items = this.PageItems.items;\r\n        let item = items.find(v => v.id === id);\r\n        if (item !== undefined) {\r\n            _.merge(item, values);\r\n        }\r\n    }\r\n}\r\n\r\nexport class CTuidMain extends CTuidBase {\r\n    protected async internalStart(param?:any):Promise<void> {\r\n        this.isImport = this.entity.isImport;\r\n        await this.openVPage(this.VTuidMain);\r\n    }\r\n\r\n}\r\n\r\nexport class CTuidEdit extends CTuidBase {\r\n    protected async internalStart(id:number):Promise<void> {\r\n        this.isImport = this.entity.isImport;\r\n        if (typeof(id) === 'number') {\r\n            await this.onEdit(id);\r\n        }\r\n        else {\r\n            await this.edit(id);\r\n        }\r\n    }\r\n\r\n    protected async edit(values:any) {\r\n        await this.openVPage(this.VTuidEdit, values);\r\n    }\r\n}\r\n\r\nexport class CTuidList extends CTuidBase {\r\n    protected async internalStart(id:number):Promise<void> {\r\n        this.isImport = this.entity.isImport;\r\n        await this.openVPage(this.VTuidList);\r\n    }\r\n}\r\n\r\nexport class CTuidDiv extends CTuid<Tuid> {\r\n    protected async internalStart():Promise<void> {\r\n        alert('tuid div: ' + '??');\r\n    }\r\n}\r\n\r\nexport class CTuidSelect extends CTuid<Tuid> {\r\n    protected async internalStart(param?: any):Promise<void> {\r\n        await this.openVPage(this.VTuidSelect, param);\r\n    }\r\n    protected async beforeStart():Promise<boolean> {\r\n        //if (await super.beforeStart() === false) return false;\r\n        await this.entity.loadSchema();\r\n        if (this.PageItems !== undefined) this.PageItems.reset();\r\n        return true;\r\n    }\r\n    protected get VTuidSelect():typeof VTuidSelect {return VTuidSelect}\r\n    idFromItem(item:any) {\r\n        return item.id;\r\n    }\r\n}\r\n\r\nexport class CTuidInfo extends CTuid<Tuid> {\r\n    protected async internalStart(id: any):Promise<void> {\r\n        let data = await this.entity.load(id)\r\n        await this.openVPage(this.VTuidInfo, data);\r\n    }\r\n    protected get VTuidInfo():typeof VTuidInfo {return VTuidInfo}\r\n}\r\n","export * from './cTuid';\r\nexport * from './vTuidMain';\r\nexport * from './vTuidEdit';\r\nexport * from './vTuidInfo';\r\nexport * from './vTuidView';\r\nexport * from './vTuidSelect';\r\n","import _ from 'lodash';\r\n\r\nexport interface KeyValueRes {\r\n    [key:string]: any;\r\n}\r\n\r\nexport interface Res<T extends KeyValueRes> {\r\n    [lang:string]: T | {[district:string]: T};\r\n}\r\n\r\nexport const resOptions:{lang:string, district:string} = {\r\n    lang: undefined,\r\n    district: undefined,\r\n}\r\n\r\nexport function setResOptions(lang:string, district:string) {\r\n    resOptions.lang = lang;\r\n    resOptions.district = district;\r\n}\r\n\r\n(function() {\r\n    let lang: string, district: string;\r\n    let language = navigator.languages && navigator.languages[0] || // Chrome / Firefox\r\n        navigator.language; // ||   // All browsers\r\n    //navigator.userLanguage; // IE <= 10\r\n    if (!language) {\r\n        lang = 'zh';\r\n        district = 'CN';\r\n    }\r\n    else {\r\n        let parts = language.split('-');\r\n        lang = parts[0];\r\n        if (parts.length > 1) district = parts[1];\r\n    }\r\n    setResOptions(lang, district);\r\n}());\r\n\r\nexport function resLang<T extends KeyValueRes>(res:Res<T>):T {\r\n    let {lang, district} = resOptions;\r\n    let ret:T = {} as T;\r\n    if (res === undefined) return ret;\r\n    _.merge(ret, res._);\r\n    let l = res[lang];\r\n    if (l === undefined) return ret;\r\n    _.merge(ret, l._);\r\n    let d = l[district];\r\n    if (d === undefined) return ret;\r\n    _.merge(ret, d);\r\n    let {entity} = ret;\r\n    if (entity !== undefined) {\r\n        for (let i in entity) {\r\n            entity[i.toLowerCase()] = entity[i];\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n","import * as React from 'react';\r\nimport { VField } from './vField';\r\nimport { VArr } from './vArr';\r\nimport { VSubmit } from './vSubmit';\r\n\r\nexport abstract class VBand {\r\n    protected label: string;\r\n    protected view = () => <div />;\r\n\r\n    constructor(label:string) {\r\n        this.label = label;\r\n    }\r\n\r\n    render():JSX.Element {\r\n        //text-sm-right\r\n        return <div key={this.key} className=\"px-3\">\r\n            <div className=\"form-group row\">\r\n                <label className=\"col-sm-2 col-form-label\">\r\n                    {this.label}\r\n                </label>\r\n                <div className=\"col-sm-10\">\r\n                    {this.renderContent()}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    setAddRow(addRow:()=>Promise<void>) {}\r\n    get key() {return this.label}\r\n    public getVFields():VField[] {return;}\r\n    public getVArr():VArr {return;}\r\n    public getVSubmit():VSubmit {return;}\r\n\r\n    protected renderContent():JSX.Element {\r\n        return <div className=\"form-control form-control-plaintext bg-white border border-info rounded \">content</div>;\r\n    }\r\n}\r\n\r\nexport interface FieldRes {\r\n    label: string;\r\n    placeHolder: string;\r\n    suffix: string;\r\n}\r\nexport class VFieldBand extends VBand {\r\n    protected vField:VField;\r\n    constructor(label:string, vField:VField) {\r\n        super(label);\r\n        this.vField = vField;\r\n    }\r\n\r\n    get key() {return this.vField.name}\r\n    public getVFields():VField[] {return [this.vField];}\r\n\r\n    protected renderContent():JSX.Element {\r\n        return this.vField.render();\r\n        /*\r\n        <div className=\"form-control form-control-plaintext bg-white border border-info rounded \">\r\n            {this.vField.render()}\r\n        </div>;*/\r\n    }\r\n}\r\n\r\nexport class VArrBand extends VBand {\r\n    protected vArr:VArr;\r\n    constructor(label:string, vArr:VArr) {\r\n        super(label);\r\n        this.vArr = vArr;\r\n    }\r\n\r\n    setAddRow(addRow:()=>Promise<void>) {this.vArr.setAddRow(addRow)}\r\n    get key() {return this.vArr.name}\r\n    public getVArr():VArr {return this.vArr;}\r\n\r\n    render():JSX.Element {\r\n        return <React.Fragment key={this.key}>\r\n            {this.vArr && this.vArr.render()}\r\n        </React.Fragment>;\r\n    }\r\n}\r\n\r\nexport class VFieldsBand extends VBand {\r\n    protected vFields: VField[];\r\n    constructor(label:string, vFields:VField[]) {\r\n        super(label);\r\n        this.vFields = vFields;\r\n    }\r\n\r\n    get key() {return this.vFields[0].name}\r\n    public getVFields():VField[] {return this.vFields;}\r\n\r\n    protected renderContent():JSX.Element {\r\n        return <div className=\"form-control form-control-plaintext bg-white border border-info rounded \">\r\n            fields\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport class VSubmitBand extends VBand {\r\n    protected vSubmit: VSubmit;\r\n    constructor(vSubmit:VSubmit) {\r\n        super(undefined);\r\n        this.vSubmit = vSubmit;\r\n    }\r\n\r\n    get key() {return '$submit'}\r\n\r\n    public getVSubmit():VSubmit {return this.vSubmit;}\r\n\r\n    render():JSX.Element {\r\n        return <div key=\"$submit\" className=\"px-3\">\r\n            <div className=\"form-group row\">\r\n                <div className=\"offset-sm-2 col-sm-10\">\r\n                    {this.vSubmit.render()}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames'\r\nimport { ViewModel } from './viewModel';\r\nimport { VForm } from './vForm';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VSubmit extends ViewModel {\r\n    private vForm: VForm;\r\n    constructor(vForm: VForm) {\r\n        super();\r\n        this.vForm = vForm;\r\n        this.caption = this.vForm.submitCaption;\r\n        this.className = 'btn btn-primary w-25';\r\n    }\r\n    @observable caption: string;\r\n    @observable className: string;\r\n\r\n    private onClickSubmit = async () => {\r\n        this.vForm.submit();\r\n    }\r\n\r\n    protected view = observer(() => {\r\n        let {isOk} = this.vForm;\r\n        return <button type=\"button\" \r\n            onClick={this.onClickSubmit}\r\n            className={this.className}\r\n            disabled={isOk === false}>\r\n            {this.caption}\r\n        </button>;\r\n    });\r\n}","\r\nexport abstract class Rule {\r\n    abstract check(defy:string[], value:any);\r\n}\r\n\r\nexport class RuleRequired extends Rule {\r\n    check(defy:string[], value:any) {\r\n        switch (typeof value) {\r\n            default:\r\n            case 'boolean': return;\r\n            case 'object':\r\n                if (value !== null) return;\r\n                break;\r\n            case 'string':\r\n                if ((value as string).trim().length > 0) return;\r\n                break;\r\n            case 'number':\r\n                if ((value as number) !== NaN) return;\r\n                break;\r\n            case 'undefined':\r\n                break;\r\n        }\r\n        defy.push('不能为空');\r\n    }\r\n}\r\n\r\nexport class RuleNum extends Rule {\r\n    check(defy:string[], value:any) {\r\n        if (value === undefined || value === null) return;\r\n        let n = Number(value);\r\n        if (n === NaN) defy.push('必须是数字');\r\n    }\r\n}\r\n\r\nexport class RuleInt extends Rule {\r\n    check(defy:string[], value:any) {\r\n        if (value === undefined || value === null) return;\r\n        let n = Number(value);\r\n        if (Number.isNaN(n) === true || Number.isInteger(n) === false) {\r\n            defy.push('必须是整数');\r\n        }\r\n    }\r\n}\r\n\r\nexport class RuleMin extends RuleNum {\r\n    constructor(min: number) {\r\n        super();\r\n        this.min = min;\r\n    }\r\n    min: number;\r\n    check(defy:string[], value:any) {\r\n        super.check(defy, value);\r\n        if (Number(value) < this.min) defy.push('不能小于' + this.min);\r\n    }\r\n}\r\n\r\nexport class RuleMax extends RuleNum {\r\n    constructor(max: number) {\r\n        super();\r\n        this.max = max;\r\n    }\r\n    max: number;\r\n    check(defy:string[], value:any) {\r\n        super.check(defy, value);\r\n        if (Number(value) > this.max) defy.push('不能小于' + this.max);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { computed, action } from 'mobx';\r\nimport classNames from 'classnames';\r\nimport { observer } from 'mobx-react';\r\nimport { FA } from '../../../components';\r\nimport { ViewModel } from '../viewModel';\r\nimport { VForm, FormMode } from '../vForm';\r\nimport { Rule, RuleRequired, RuleInt, RuleNum, RuleMin, RuleMax } from '../rule';\r\nimport { Field } from '../../../uq';\r\nimport { FieldRes } from '../vBand';\r\nimport { FieldUI, FieldInputUI, FieldStringUI, FieldNumberUI } from '../../formUI';\r\n\r\nexport abstract class VField extends ViewModel {\r\n    protected form: VForm;\r\n    protected fieldUI: FieldUI;\r\n    protected fieldRes:FieldRes;\r\n    protected field: Field;\r\n    protected rules: Rule[];\r\n    constructor(form:VForm, field:Field, fieldUI: FieldUI, fieldRes:FieldRes) {\r\n        super();\r\n        this.form = form;\r\n        this.field = field;\r\n        this.name = field.name;\r\n        this.fieldUI = fieldUI || {} as any;\r\n        this.fieldRes = fieldRes || {} as any;\r\n        this.init();\r\n    }\r\n\r\n    name: string;\r\n\r\n    protected init() {\r\n        this.buildRules();\r\n    }\r\n\r\n    protected buildRules() {\r\n        this.rules = [];\r\n        let {required} = this.fieldUI;\r\n        if (required === true || this.field !== undefined && this.field.null === false) {\r\n            this.rules.push(new RuleRequired);\r\n        }\r\n    }\r\n\r\n    @computed get checkRules(): string[] {\r\n        let defy = [];\r\n        for (let r of this.rules) r.check(defy, this.value);\r\n        return defy;\r\n    }\r\n\r\n    @computed get isOk() {\r\n        if (this.rules.length === 0) return true;\r\n        let defy = this.checkRules;\r\n        return defy.length === 0;\r\n    }\r\n\r\n    @computed get value() { return this.form.values[this.name]; }\r\n    setValue(v:any) {\r\n        this.form.values[this.name]=v; \r\n    }\r\n    get error() { return this.form.errors[this.name]; }\r\n    set error(err:any) { this.form.errors[this.name]=err; }\r\n    protected parse(str:string):any {return str;}\r\n    get readonly():boolean {\r\n        let {mode} = this.form;\r\n        return mode === FormMode.readonly || \r\n            mode === FormMode.edit && this.fieldUI.editable === false;\r\n    }\r\n}\r\n\r\nexport class VUnknownField extends VField {\r\n    protected view = () => {\r\n        //let {name, type} = this.fieldUI;\r\n        let type='', name = '';\r\n        return <input type=\"text\" className=\"form-control form-control-plaintext border border-info rounded bg-light\"\r\n            placeholder={'unkown control: ' + type + '-' + name} />;\r\n    }\r\n}\r\n\r\nexport abstract class VInputControl extends VField {\r\n    protected fieldUI: FieldInputUI;\r\n    protected input: HTMLInputElement;\r\n\r\n    protected inputType:string;\r\n    protected get maxLength():number {return}\r\n\r\n    protected renderError = (className:string) => {\r\n        let {errors} = this.form;\r\n        let error = errors[this.name];\r\n        if (error === undefined) return;\r\n        return <div className={className}><FA name=\"exclamation-circle\" /> {error}</div>\r\n    }\r\n\r\n    /*\r\n    get value() {\r\n        return super.value;\r\n    }*/\r\n    setValue(v:any) {\r\n        super.setValue(v); this.setInputValue(); \r\n    }\r\n\r\n    protected ref = (input:HTMLInputElement) => {\r\n        this.input = input;\r\n        this.setInputValue();\r\n    }\r\n\r\n    protected setInputValue() {\r\n        if (!this.input) return;\r\n        let v = this.value;\r\n        this.input.value = v === null || v === undefined? '' : v;\r\n    }\r\n\r\n    protected onFocus = () => {\r\n        this.error = undefined;\r\n    }\r\n\r\n    protected onBlur = () => {\r\n        let defy = this.checkRules;\r\n        if (defy.length > 0) {\r\n            this.error = defy[0];\r\n        }\r\n        this.form.computeFields();\r\n    }\r\n\r\n    protected onChange = (evt: React.ChangeEvent<any>) => {\r\n        let v = this.parse(evt.currentTarget.value);\r\n        if (v === null) {\r\n            return;\r\n        }\r\n        this.setValue(v);\r\n    }\r\n\r\n    protected onKeyPress: (event:React.KeyboardEvent<HTMLInputElement>) => void;\r\n    \r\n    protected view = observer(() => {\r\n        let {required} = this.fieldUI;\r\n        let {placeHolder, suffix} = this.fieldRes;\r\n        let ctrlCN = ['form-control', 'form-control-input'];\r\n        let errCN = 'text-danger small mt-1 mx-2';\r\n    \r\n        let redDot;\r\n        let input;\r\n        if (this.readonly === true) {\r\n            input = <input className={classNames(ctrlCN, 'bg-light')}\r\n                ref={this.ref}\r\n                type={this.inputType}\r\n                readOnly={true}\r\n            />;\r\n        }\r\n        else {\r\n            input = <input className={classNames(ctrlCN)}\r\n                ref={this.ref}\r\n                type={this.inputType}\r\n                onFocus={this.onFocus}\r\n                onBlur={this.onBlur}\r\n                onChange={this.onChange}\r\n                placeholder={placeHolder}\r\n                readOnly={false}\r\n                maxLength={this.maxLength}\r\n                onKeyPress={this.onKeyPress}\r\n            />;\r\n            if (required === true || this.field.null === false) {\r\n                redDot = <RedMark />;\r\n            }\r\n        }\r\n\r\n        let inputGroup;\r\n        if (suffix === undefined)\r\n            inputGroup = input;\r\n        else\r\n            inputGroup = <div className=\"input-group\">\r\n                {input}\r\n                <div className=\"input-group-append\">\r\n                    <span className=\"input-group-text\">{suffix}</span>\r\n                </div>\r\n            </div>;\r\n\r\n        return <>\r\n            {redDot}\r\n            {inputGroup}\r\n            {this.renderError(errCN)}\r\n        </>\r\n    });\r\n}\r\n\r\nexport const RedMark = () => <b style={{color:'red', position:'absolute', left:'0.1em', top:'0.5em'}}>*</b>;\r\n\r\nexport class VStringField extends VInputControl {\r\n    protected fieldUI: FieldStringUI;\r\n    protected inputType:string = 'text';\r\n    protected get maxLength():number {return this.field.size}\r\n}\r\n\r\nconst KeyCode_Neg = 45;\r\nconst KeyCode_Dot = 46;\r\n\r\nexport abstract class VNumberControl extends VInputControl {\r\n    protected fieldUI: FieldNumberUI;\r\n    protected extraChars: number[];\r\n\r\n    protected init() {\r\n        super.init();\r\n        this.extraChars = [];\r\n        if (this.fieldUI !== undefined) {\r\n            let {min, max} = this.fieldUI;\r\n            if (min !== undefined) {\r\n                //this.rules.push((v:number) => {if (v === undefined) return; if (v<min) return ErrMin + min; return true;});\r\n                if (min < 0) this.extraChars.push(KeyCode_Neg);\r\n            }\r\n            else {\r\n                this.extraChars.push(KeyCode_Neg);\r\n            }\r\n    \r\n            if (max !== undefined) {\r\n                //this.rules.push((v:number) => {if (v === undefined) return; if (v>max) return ErrMax + max; return true});\r\n            }\r\n        }\r\n        switch (this.field.type) {\r\n            case 'dec':\r\n            case 'bigint':\r\n            case 'int':\r\n            case 'smallint':\r\n            case 'tinyint':\r\n                this.extraChars.push(KeyCode_Dot); break;\r\n        }\r\n    }\r\n\r\n    protected buildRules() {\r\n        super.buildRules();\r\n        this.rules.push(new RuleNum);\r\n        let {min, max} = this.fieldUI;\r\n        if (min !== undefined) this.rules.push(new RuleMin(min));\r\n        if (max !== undefined) this.rules.push(new RuleMax(max));\r\n    }\r\n\r\n    inputType:string = 'number';\r\n\r\n    protected parse(text:string):any {\r\n        try {\r\n            if (text.trim().length === 0) return undefined;\r\n            let ret = Number(text);\r\n            return (ret === NaN)? null : ret;\r\n        }\r\n        catch {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    protected setInputValue() {\r\n        if (!this.input) return;\r\n        let v = this.value;\r\n        if (this.parse(this.input.value) == v) return;\r\n        this.input.value = v === null || v === undefined? '' : v;\r\n    }\r\n\r\n    protected onKeyPress = (event:React.KeyboardEvent<HTMLInputElement>) => {\r\n        let ch = event.charCode;\r\n        if (ch === 8 || ch === 0 || ch === 13 || ch >= 48 && ch <= 57) return;\r\n        if (this.extraChars !== undefined) {\r\n            if (this.extraChars.indexOf(ch) >= 0) {\r\n                switch (ch) {\r\n                    case KeyCode_Dot: this.onKeyDot(); break;\r\n                    case KeyCode_Neg: this.onKeyNeg(); event.preventDefault(); break;\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        event.preventDefault();\r\n    }\r\n\r\n    private onKeyDot() {\r\n        let v = this.input.value;\r\n        let p = v.indexOf('.');\r\n        if (p >= 0) this.input.value = v.replace('.', '');\r\n    }\r\n    private onKeyNeg() {\r\n        let v = this.input.value;\r\n        let p = v.indexOf('-');\r\n        if (p >= 0) v = v.replace('-', '');\r\n        else v = '-'+v;\r\n        this.input.value = v;\r\n    }\r\n}\r\n\r\nexport class VIntField extends VNumberControl {\r\n    protected buildRules() {\r\n        super.buildRules();\r\n        this.rules.push(new RuleInt);\r\n    }\r\n}\r\n\r\nexport class VDecField extends VNumberControl {\r\n}\r\n\r\nexport class VTextField extends VStringField {\r\n\r\n}\r\n\r\nexport class VDateTimeField extends VStringField {\r\n\r\n}\r\n\r\nexport class VDateField extends VStringField {\r\n\r\n}\r\n","import React from 'react';\r\nimport { VField } from './vField';\r\nimport { Field } from '../../../uq';\r\nimport { VForm } from '../vForm';\r\nimport { observer } from 'mobx-react';\r\nimport { FieldRes } from '../vBand';\r\n\r\nexport class VComputeField extends VField {\r\n    constructor(form:VForm, field: Field, fieldRes: FieldRes) {\r\n        super(form, field, undefined, fieldRes);\r\n    }\r\n    protected view = observer(() => {\r\n        let value = this.form.values[this.field.name];\r\n        let {placeHolder, suffix} = this.fieldRes;\r\n        let ctrlCN = 'form-control form-control-input bg-light';\r\n        if (value === null) value = '';\r\n        let input = <input className={ctrlCN}\r\n            type=\"text\"\r\n            placeholder={placeHolder}\r\n            readOnly={true}\r\n            value={value}/>\r\n        let inputGroup;\r\n        if (suffix === undefined)\r\n            inputGroup = input;\r\n        else\r\n            inputGroup = <div className=\"input-group\">\r\n                {input}\r\n                <div className=\"input-group-append\">\r\n                    <span className=\"input-group-text\">{suffix}</span>\r\n                </div>\r\n            </div>;\r\n        return inputGroup;\r\n        /*\r\n            return <div \r\n            className=\"form-control form-control-plaintext border border-info rounded bg-light cursor-pointer\">\r\n            {value} &nbsp;\r\n        </div>;\r\n        */\r\n    });\r\n}\r\n","import * as React from 'react';\r\nimport * as _ from 'lodash';\r\nimport { observer } from 'mobx-react';\r\nimport { VBand } from './vBand';\r\nimport { BandsBuilder } from './bandsBuilder';\r\nimport { Field, ArrFields } from '../../uq';\r\nimport { computed, observable, IObservableObject, IObservableValue } from 'mobx';\r\nimport { VArr } from './vArr';\r\nimport { FormUI, FormUIBase, FormItems } from '../formUI';\r\nimport { VField } from './vField';\r\nimport { VSubmit } from './vSubmit';\r\nimport { IObservableArray } from 'mobx';\r\nimport { FA } from '../../components';\r\n\r\nexport type FieldCall = (form:VForm, field:Field, values:any) => Promise<any>;\r\nexport interface FieldInput {\r\n    select: FieldCall;\r\n    content: React.StatelessComponent<any>;\r\n    placeHolder: string;\r\n}\r\nexport interface FieldInputs {\r\n    [fieldOrArr:string]: FieldInput | {[field:string]: FieldInput};\r\n}\r\nexport enum FormMode {new, edit, readonly}\r\n\r\nexport interface FormOptions {\r\n    fields: Field[];\r\n    arrs?: ArrFields[];\r\n    ui: FormUIBase;\r\n    res: any;\r\n    inputs: FieldInputs;\r\n    submitCaption: string;\r\n    arrNewCaption: string;\r\n    arrEditCaption: string;\r\n    arrTitleNewButton: JSX.Element;\r\n    none: string;\r\n    mode: FormMode;\r\n}\r\n\r\nexport class VForm {\r\n    protected fields: Field[];\r\n    protected arrs: ArrFields[];\r\n    protected bands: VBand[];\r\n    protected bandColl: {[key:string]: VBand};\r\n    protected onSubmit: ()=>Promise<void>;\r\n\r\n    constructor(options: FormOptions, onSubmit: ()=>Promise<void>) {\r\n        let {fields, arrs, ui, res, inputs, none, submitCaption, arrNewCaption, arrEditCaption, arrTitleNewButton, mode} = options;\r\n        this.fields = fields;\r\n        this.arrs = arrs;\r\n        this.ui = ui;\r\n        if (this.ui !== undefined) this.formItems = this.ui.items; //.compute = this.ui.compute;\r\n        this.res = res;\r\n        this.inputs = inputs;\r\n        this.none = none;\r\n        this.submitCaption = submitCaption;\r\n        this.arrNewCaption = arrNewCaption;\r\n        this.arrEditCaption = arrEditCaption;\r\n        this.arrTitleNewButton = arrTitleNewButton || <small><FA name=\"plus\" /> 新增</small>;\r\n        if (onSubmit === undefined) this.mode = FormMode.readonly;\r\n        else this.mode = mode;\r\n        this.buildFormValues();\r\n        this.buildBands(options, onSubmit);\r\n        this.onSubmit = onSubmit;\r\n    }\r\n\r\n    ui: FormUI;\r\n    res: any;\r\n    values: any;\r\n    errors: any;\r\n    formItems: FormItems;\r\n    mode: FormMode;\r\n    vFields: {[name:string]:VField} = {};\r\n    vArrs: {[name:string]: VArr} = {};\r\n    vSubmit: VSubmit;\r\n    inputs: FieldInputs;\r\n    none: string;\r\n    submitCaption: string;\r\n    arrNewCaption: string;\r\n    arrEditCaption: string;\r\n    arrTitleNewButton: JSX.Element;\r\n\r\n    private buildBands(options: FormOptions, onSubmit: (values:any)=>Promise<void>) {\r\n        this.bandColl = {};\r\n        let bandsBuilder = new BandsBuilder(this, options, onSubmit);\r\n        this.bands = bandsBuilder.build();\r\n        for (let band of this.bands) {\r\n            this.bandColl[band.key] = band;\r\n            let vFields = band.getVFields();\r\n            if (vFields !== undefined) for (let f of vFields) this.vFields[f.name] = f;\r\n            let vArr = band.getVArr();\r\n            if (vArr !== undefined) this.vArrs[vArr.name] = vArr;\r\n            let vSubmit = band.getVSubmit();\r\n            if (vSubmit !== undefined) this.vSubmit = vSubmit;\r\n        }\r\n    }\r\n\r\n    private onFormSubmit = (event:React.FormEvent<any>) => {\r\n        event.preventDefault();\r\n        return false;\r\n    }\r\n\r\n    protected view = observer(({className}:{className:string}) => {\r\n        return <form className={className} onSubmit={this.onFormSubmit}>\r\n            {this.bands.map(v => v.render())}\r\n        </form>;\r\n    });\r\n\r\n    getBand(name:string) {\r\n        return this.bandColl[name];\r\n    }\r\n\r\n    computeFields() {\r\n        if (this.formItems === undefined) return;\r\n        let values = this.values;\r\n        for (let i in this.formItems) {\r\n            let item = this.formItems[i];\r\n            if (typeof item !== 'function') continue;\r\n            values[i] = item.call(this, values);\r\n        }\r\n    }\r\n\r\n    async submit() {\r\n        if (this.onSubmit === undefined) return;\r\n        await this.onSubmit();\r\n    }\r\n    \r\n    getValues() {\r\n        let ret:any = {};\r\n        let values = this.values;\r\n        for (let f of this.fields) {\r\n            let {name} = f;\r\n            let v = values[name]\r\n            ret[name] =  v !== null && typeof v === 'object' ? v.id : v;\r\n        }\r\n        if (this.arrs !== undefined) {\r\n            for (let arr of this.arrs) {\r\n                let {name, fields, id, order} = arr;\r\n                let list = ret[name] = [];\r\n                let rows = this.vArrs[name].list;\r\n                for (let row of rows) {\r\n                    let item = {} as any;\r\n                    if (id !== undefined) item[id] = row[id];\r\n                    if (order !== undefined) item[order] = row[order];\r\n                    for (let f of fields) {\r\n                        let {name:fn} = f;\r\n                        let v = row[fn]\r\n                        item[fn] =  v !== null && typeof v === 'object' ? v.id : v;\r\n                    }\r\n                    list.push(item);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    get valueBoxs() {\r\n        let ret:any = {};\r\n        let values = this.values;\r\n        for (let f of this.fields) {\r\n            let {name, _tuid} = f;\r\n            let v = values[name]\r\n            ret[name] =  _tuid === undefined || typeof v === 'object' ? v : _tuid.boxId(v);\r\n        }\r\n        if (this.arrs === undefined) return ret;\r\n        for (let arr of this.arrs) {\r\n            let {name, fields, id, order} = arr;\r\n            let list = ret[name] = this.vArrs[name].list.slice();\r\n            for (let row of list) {\r\n                for (let f of fields) {\r\n                    let {name:fn, _tuid} = f;\r\n                    let v = row[fn]\r\n                    row[fn] =  _tuid === undefined || typeof v === 'object' ? v : _tuid.boxId(v);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    setValues(initValues:any) {\r\n        if (initValues === undefined) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        let values = this.values;\r\n        let errors = this.errors;\r\n        for (let f of this.fields) {\r\n            let fn = f.name;\r\n            errors[fn] = undefined;\r\n            let v =  initValues[fn];\r\n            values[fn] = v;\r\n        }\r\n        // 还要设置arrs的values\r\n        for (let i in this.vArrs) {\r\n            let list = initValues[i];\r\n            if (list === undefined) continue;\r\n            let arrList = values[i] as IObservableArray<any>;\r\n            arrList.clear();\r\n            arrList.push(...list);\r\n        }\r\n    }\r\n\r\n    @computed get isOk():boolean {\r\n        for (let i in this.vFields) {\r\n            if (this.vFields[i].isOk === false) return false;\r\n        }\r\n        return true;\r\n    }\r\n    reset() {\r\n        let values = this.values;\r\n        let errors = this.errors;\r\n        for (let f of this.fields) {\r\n            let fn = f.name;\r\n            //if (this.compute !== undefined && this.compute[fn] !== undefined) continue;\r\n            values[fn] = null;\r\n            errors[fn] = undefined;\r\n        }\r\n        for (let i in this.vFields) {\r\n            let ctrl = this.vFields[i];\r\n            let cn = ctrl.name;\r\n            if (cn === undefined) continue;\r\n            //if (this.compute !== undefined && this.compute[cn] !== undefined) continue;\r\n            ctrl.setValue(null);\r\n        }\r\n        for (let i in this.vArrs) {\r\n            let vArr = this.vArrs[i];\r\n            vArr.reset();\r\n        }\r\n    }\r\n\r\n    getValue(fieldName: string) {\r\n        return this.values[fieldName];\r\n    }\r\n    setValue(fieldName: string, value: any) { this.values[fieldName] = value }\r\n\r\n    setError(fieldName:string, error:string) {this.errors[fieldName] = error}\r\n\r\n    private buildFieldValues(fields: Field[]):any {\r\n        let v: {[p:string]: any} = {\r\n            valueFromFieldName: function(propName:string) {\r\n                return this[propName];\r\n            }\r\n        };\r\n        for (let f of fields) {\r\n            let fn = f.name;\r\n            v[fn] = null;\r\n        }\r\n        return v;\r\n    }\r\n    private buildObservableValues():IObservableObject {\r\n        let v: {[p:string]: any} = this.buildFieldValues(this.fields);\r\n        if (this.arrs !== undefined) {\r\n            for (let arr of this.arrs) {\r\n                v[arr.name] = observable.array([], {deep:true});\r\n            }\r\n        }\r\n        let ret = observable(v);\r\n        return ret;\r\n    }\r\n    private buildFormValues() {\r\n        this.values = this.buildObservableValues();\r\n        this.errors = observable(this.buildFieldValues(this.fields));\r\n    }\r\n\r\n    render(className:string = \"py-3\"):JSX.Element {\r\n        return <this.view className={className} />\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { IObservableArray, observable } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { Page, nav, List, FA, Muted } from '../../components';\r\nimport { ViewModel, RowContent, TypeContent, JSONContent } from './viewModel';\r\nimport { ArrFields, Field } from '../../uq';\r\nimport { VForm, FieldInputs, FormMode } from './vForm';\r\nimport { FormArr } from '../formUI';\r\n\r\nexport type ArrEditRow = (initValues:any, onRowChanged:(rowValues:any)=>void) => Promise<void>;\r\n\r\nexport class VArr extends ViewModel {\r\n    protected mode: FormMode;\r\n    protected label: any;\r\n    protected header: any;\r\n    protected footer: any;\r\n    protected rowValues: any;                 // 仅仅用来判断是不是新增，undefined则是新增\r\n    protected onEditRow: ArrEditRow;\r\n    protected ownerForm:VForm;\r\n    protected vForm:VForm;\r\n    protected rowContent:TypeContent;\r\n    protected none: string;\r\n    protected newSubmitCaption: string;\r\n    protected editSubmitCaption: string;\r\n    protected addRow: ()=>Promise<void>;\r\n\r\n    name:string;\r\n    list: IObservableArray<any>;\r\n\r\n    constructor(ownerForm:VForm, arr:ArrFields, onEditRow?:ArrEditRow) {\r\n        super();\r\n        this.ownerForm = ownerForm;\r\n        let {name, fields} = arr;\r\n        this.name = name;\r\n        let {ui, res, mode, inputs, values} = ownerForm;\r\n        let arrsRes = res.arrs;\r\n        let arrRes = arrsRes !== undefined? arrsRes[name] : {};\r\n        let {label, none, newSubmit, editSubmit} = arrRes;\r\n        this.none = none || ownerForm.none;\r\n        this.newSubmitCaption = newSubmit || ownerForm.arrNewCaption;\r\n        this.editSubmitCaption = editSubmit || ownerForm.arrEditCaption;\r\n        this.label = label || name;\r\n        let arrUI = ((ui && ui.items[name]) || {}) as FormArr;\r\n        this.rowContent = arrUI.rowContent;// || JSONContent;\r\n        this.mode = mode;\r\n        if (this.onEditRow === undefined) {\r\n            this.vForm = new VForm({\r\n                fields: fields,\r\n                arrs: undefined,\r\n                ui: arrUI,\r\n                res: arrRes,\r\n                inputs: inputs[name] as FieldInputs,\r\n                none: ownerForm.none,\r\n                submitCaption: 'submit',\r\n                arrNewCaption: undefined,\r\n                arrEditCaption: undefined,\r\n                arrTitleNewButton: undefined,\r\n                mode: mode,\r\n            }, \r\n            mode===FormMode.readonly? undefined: this.onSubmit);\r\n        }\r\n        else {\r\n            this.onEditRow = onEditRow;\r\n        }\r\n        this.list = values[name];\r\n    }\r\n\r\n    reset() {\r\n        this.vForm.reset();\r\n        this.list.clear();\r\n    }\r\n\r\n    setAddRow(addRow:()=>Promise<void>) {\r\n        this.addRow = addRow;\r\n    }\r\n\r\n    protected rowPage = () => {\r\n        return <Page header={this.label} back=\"close\">\r\n            {this.vForm.render('py-3')}\r\n        </Page>\r\n    }\r\n    private onSubmit = async () => {\r\n        let {valueBoxs} = this.vForm;\r\n        await this.onRowChanged(valueBoxs);\r\n    }\r\n\r\n    private onRowChanged = async (rowValues:any) => {\r\n        if (this.rowValues === undefined) {\r\n            rowValues.$owner = this.ownerForm.values;\r\n            this.list.push(rowValues);\r\n            if (this.onEditRow === undefined)\r\n                this.vForm.reset();\r\n            else\r\n                await this.onEditRow(undefined, this.onRowChanged);\r\n        }\r\n        else {\r\n            _.merge(this.rowValues, rowValues);\r\n            if (this.onEditRow === undefined) nav.pop();\r\n        }\r\n    }\r\n\r\n    private renderItem = (item:any, index:number) => {\r\n        if (this.rowContent === undefined)\r\n            return <div className=\"px-3 py-2\"><JSONContent {...item} /></div>\r\n        return <this.rowContent {...item} />;\r\n    }\r\n    private showRow = async (rowValues:any):Promise<any> => {\r\n        if (this.onEditRow !== undefined) {\r\n            await this.onEditRow(rowValues, this.onRowChanged);\r\n            return;\r\n        }\r\n        this.vForm.reset();\r\n        if (rowValues !== undefined) this.vForm.setValues(rowValues);\r\n        nav.push(<this.rowPage />);\r\n    }\r\n    private editRow = async (rowValues:any): Promise<void> => {\r\n        this.rowValues = rowValues;\r\n        let {vSubmit} = this.vForm;\r\n        if (vSubmit !== undefined) {\r\n            vSubmit.caption = this.editSubmitCaption;\r\n            vSubmit.className = 'btn btn-outline-success';\r\n        }\r\n        this.vForm.mode = this.ownerForm.mode;\r\n        await this.showRow(rowValues);\r\n    }\r\n    private internalAddRow = async () => {\r\n        this.rowValues = undefined;\r\n        let {vSubmit} = this.vForm;\r\n        vSubmit.caption = this.newSubmitCaption;\r\n        vSubmit.className = 'btn btn-outline-success';\r\n        this.vForm.reset();\r\n        this.vForm.mode = FormMode.new;\r\n        await this.showRow(undefined);\r\n    }\r\n\r\n    protected view = () => {\r\n        let button;\r\n        if (this.addRow !== undefined || this.mode !== FormMode.readonly) {\r\n            button = <button onClick={this.addRow || this.internalAddRow}\r\n                type=\"button\" \r\n                className=\"btn btn-link p-0\">\r\n                {this.ownerForm.arrTitleNewButton}\r\n            </button>;\r\n        }\r\n        let header = this.header || <div className=\"px-3 bg-light small\" style={{paddingTop:'1px', paddingBottom:'1px'}}>\r\n            <div className=\"flex-fill align-self-center\">{this.label}</div>\r\n            {button}\r\n        </div>;\r\n        return <List className=\"pb-3\"\r\n            header={header}\r\n            none={<Muted className=\"px-3 py-2\">{this.none}</Muted>}\r\n            items={this.list}\r\n            item={{render: this.renderItem, onClick: this.editRow}} />;\r\n    };\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { tv } from '../../cUq';\r\nimport { Field, Tuid, TuidBox } from '../../../uq';\r\nimport { VField, RedMark } from './vField';\r\nimport { FieldUI } from '../../formUI';\r\nimport { VForm, FieldInput, FormMode } from '../vForm';\r\nimport { FieldRes } from '../vBand';\r\n\r\nconst buttonStyle:React.CSSProperties = {\r\n    textAlign:'left', \r\n    paddingLeft:'0.75rem', \r\n    paddingRight:'0.75rem', \r\n    overflow: 'hidden'\r\n};\r\n\r\nexport class VTuidField extends VField {\r\n    protected vForm: VForm;\r\n    protected input: FieldInput;\r\n    protected tuid: TuidBox;\r\n\r\n    constructor(vForm: VForm, field:Field, fieldUI: FieldUI, fieldRes:FieldRes) {\r\n        super(vForm, field, fieldUI, fieldRes);\r\n        this.tuid = field._tuid;\r\n        this.vForm = vForm;\r\n        this.input = vForm.inputs[field.name] as FieldInput;\r\n    }\r\n\r\n    onClick = async () => {\r\n        if (this.readonly === true) {\r\n            if (!this.value) return;\r\n            await this.tuid.showInfo(); //this.value.id);\r\n            return;\r\n        }\r\n        let id:number;\r\n        if (this.input !== undefined) {\r\n            id = await this.input.select(this.vForm, this.field, this.vForm.getValues());\r\n        }\r\n        else {\r\n            alert('call undefined');\r\n            id = 0;\r\n        }\r\n        this.setValue(this.tuid.boxId(id));\r\n    }\r\n    protected view = observer(() => {\r\n        let {placeHolder} = this.fieldRes;\r\n        let disabled:boolean = false;\r\n        //let {_ownerField} = this.field;\r\n        let {_tuid} = this.field;\r\n        let {ownerField} = _tuid;\r\n        if (ownerField !== undefined) {\r\n            let {name, arr} = ownerField;\r\n            disabled = this.vForm.getValue(name) === null;\r\n        }\r\n        let content;\r\n        if (this.value === null)\r\n            content = <>{placeHolder || this.input.placeHolder}</>;\r\n        else if (typeof this.value === 'object') {\r\n            content = tv(this.value);\r\n        }\r\n        else {\r\n            let idBox = this.tuid.boxId(this.value);\r\n            content = tv(idBox); // idBox.content();\r\n        }\r\n        if (this.readonly === true)\r\n        {\r\n            return <div \r\n                className=\"form-control form-control-plaintext border border-info rounded bg-light cursor-pointer\"\r\n                onClick={this.onClick}>\r\n                {content}\r\n            </div>;\r\n        }\r\n        let {required} = this.fieldUI;\r\n        let redDot = (required === true || this.field.null === false) && <RedMark />;\r\n        return <>\r\n            {redDot}\r\n            <button className=\"form-control btn btn-outline-info\"\r\n                type=\"button\"\r\n                disabled={disabled}\r\n                style={buttonStyle}\r\n                onClick={this.onClick}>\r\n                {content}\r\n            </button>\r\n        </>;\r\n    })\r\n}\r\n","import { VBand, VFieldBand, VArrBand, VFieldsBand, VSubmitBand, FieldRes } from './vBand';\r\nimport { Field, ArrFields } from '../../uq';\r\nimport { VForm, FormOptions } from './vForm';\r\nimport { FormItems, FieldUI, FormItem } from '../formUI';\r\nimport { VSubmit } from './vSubmit';\r\nimport { VField, buildVField, VComputeField } from './vField';\r\nimport { VArr } from './vArr';\r\nimport { VTuidField } from './vField/vTuidField';\r\n\r\nexport class BandsBuilder {\r\n    private vForm: VForm;\r\n    private onSubmit: (values:any)=>Promise<void>;\r\n    private fields: Field[];\r\n    private arrs: ArrFields[];\r\n    private formItems: FormItems;\r\n    private layout: string[];\r\n    private res: any;\r\n    constructor(vForm:VForm, options: FormOptions, onSubmit: (values:any)=>Promise<void>) {\r\n        this.vForm = vForm;\r\n        this.onSubmit = onSubmit;\r\n        let {fields, arrs, ui, res} = options;\r\n        this.fields = fields;\r\n        this.arrs = arrs;\r\n        if (ui !== undefined) {\r\n            let {items, layout} = ui;\r\n            this.formItems = items;\r\n            this.layout = layout;\r\n        }\r\n        this.res = res;\r\n    }\r\n\r\n    build():VBand[] {\r\n        //return this.bandUIs === undefined? this.bandsOnFly() : this.bandsFromUI();\r\n        return this.layout === undefined? this.bandsOnFly() : this.bandsFromLayout();\r\n    }\r\n\r\n    private resFromName(name:string, res:any):string|FieldRes {\r\n        if (res === undefined) return;\r\n        let {fields} = res;\r\n        if (fields === undefined) return;\r\n        return fields[name] || name;\r\n    }\r\n\r\n    private bandsOnFly():VBand[] {\r\n        let bands:VBand[] = [];\r\n        this.bandsFromFields(bands, this.fields, this.res);\r\n        if (this.arrs !== undefined) {\r\n            for (let arr of this.arrs) bands.push(this.bandFromArr(arr));\r\n        }\r\n        if (this.onSubmit !== undefined) {\r\n            bands.push(new VSubmitBand(new VSubmit(this.vForm)));\r\n        }\r\n        return bands;\r\n    }\r\n\r\n    private bandsFromFields(bands:VBand[], fields:Field[], res:any) {\r\n        if (fields === undefined) return;\r\n        for (let field of fields) bands.push(this.bandFromField(field, res));\r\n    }\r\n\r\n    private bandsFromLayout():VBand[] {\r\n        let bands:VBand[] = [];\r\n        /*\r\n        for (let bandUI of this.bandUIs)  {\r\n            let band = this.bandFromUI(bandUI);\r\n            bands.push(band);\r\n        }\r\n        */\r\n        return bands;\r\n    }\r\n\r\n    /*\r\n    private bandFromUI(bandUI:BandUI):VBand {\r\n        let {band} = bandUI;\r\n        switch (band) {\r\n            default: return this.bandFromFieldUI(bandUI as FieldBandUI);\r\n            case 'arr': return this.bandFromArrUI(bandUI as ArrBandUI);\r\n            case 'fields': return this.bandFromFieldsUI(bandUI as FieldsBandUI);\r\n            case 'submit': return this.bandFromSubmitUI(bandUI as SubmitBandUI);\r\n        }\r\n    }\r\n    \r\n    private bandFromFieldUI(bandUI: FieldBandUI): VFieldBand {\r\n        let {label} = bandUI;\r\n        let vField = this.vFieldFromUI(bandUI);\r\n        return new VFieldBand(label, vField);\r\n    }\r\n    private bandFromArrUI(bandUI: ArrBandUI): VArrBand {\r\n        let {label, name} = bandUI;\r\n        let vArr = this.vArrFromUI(bandUI);\r\n        return new VArrBand(label, vArr);\r\n    }\r\n    private bandFromFieldsUI(bandUI: FieldsBandUI): VFieldsBand {\r\n        let {label, fieldUIs} = bandUI;\r\n        let vFields = fieldUIs.map(v => this.vFieldFromUI(v));\r\n        return new VFieldsBand(label, vFields);\r\n    }\r\n    private bandFromSubmitUI(bandUI: SubmitBandUI): VSubmitBand {\r\n        if (this.onSubmit === undefined) return;\r\n        let vSubmit = new VSubmit(this.vForm);\r\n        return new VSubmitBand(vSubmit);\r\n    }\r\n    */\r\n/*\r\n    private vFieldFromField(field:Field, fieldRes:FieldRes, formItem: FormItem): VField {\r\n        let fieldUI:FieldUI = undefined;\r\n        if (formItem !== undefined) {\r\n            if (typeof formItem === 'function') {\r\n                return new VComputeField(this.vForm, field, fieldRes);\r\n            }\r\n        }\r\n        let ret = buildVField(this.vForm, field, formItem, fieldRes);\r\n        if (ret !== undefined) return ret;\r\n        return new VTuidField(field, fieldUI, fieldRes, this.vForm);\r\n    }\r\n*/\r\n    private bandFromField(field:Field, res:any):VBand {\r\n        let {name} = field;\r\n        let fieldRes:FieldRes;\r\n        let rfn = this.resFromName(name, res);\r\n        let label:string;\r\n        if (typeof rfn === 'object') {\r\n            label = rfn.label;\r\n            fieldRes = rfn;\r\n        }\r\n        else {\r\n            label = rfn as string;\r\n            fieldRes = undefined;\r\n        }\r\n        let vField:VField;\r\n        let formItem:FormItem;\r\n        if (this.formItems !== undefined) formItem = this.formItems[name];\r\n        //let vField = this.vFieldFromField(field, fieldRes as FieldRes, formItem);\r\n        //let fieldUI:FieldUI = undefined;\r\n        if (typeof formItem === 'function') {\r\n            vField = new VComputeField(this.vForm, field, fieldRes);\r\n        }\r\n        else {\r\n            vField = buildVField(this.vForm, field, formItem as FieldUI, fieldRes);\r\n        }\r\n        if (vField === undefined) {\r\n            vField = new VTuidField(this.vForm, field, formItem as FieldUI, fieldRes);\r\n        }\r\n        return new VFieldBand(label || name, vField);\r\n    }\r\n\r\n    private bandFromArr(arr: ArrFields):VBand {\r\n        let {name, fields} = arr;\r\n        //let row = JSONContent;\r\n        //let bands:VBand[] = [];\r\n        //this.bandsFromFields(bands, fields, res);\r\n        let vArr = new VArr(this.vForm, arr); // name, res && res.label || name, row, bands);\r\n        return new VArrBand(name, vArr);\r\n    }\r\n\r\n    /*\r\n    private vFieldFromUI(fieldUI:FieldUI):VField {\r\n        return;\r\n    }\r\n\r\n    private vArrFromUI(arrBandUI:ArrBandUI):VArr {\r\n        return;\r\n    }\r\n    */\r\n}\r\n","import { VField, VIntField, VDecField, VStringField, VTextField, VDateTimeField, VDateField } from './vField';\r\nimport { Field } from '../../../uq';\r\nimport { FieldRes } from '../vBand';\r\nimport { VForm } from '../vForm';\r\nimport { FieldUI } from '../../formUI';\r\n\r\nexport function buildVField(form:VForm, field: Field, fieldUI: FieldUI, fieldRes:FieldRes): VField {\r\n    let vField:new (form:VForm, field:Field, ui:FieldUI, fieldRes:FieldRes) => VField;\r\n    switch (field.type) {\r\n        default: return;\r\n        case 'tinyint':\r\n        case 'smallint':\r\n        case 'int':\r\n        case 'bigint':\r\n            vField = VIntField;\r\n            break;\r\n        case 'id':\r\n            let {_tuid} = field;\r\n            if (_tuid !== undefined) return;\r\n            vField = VIntField;\r\n            break;\r\n        case 'dec':\r\n            vField = VDecField;\r\n            break;\r\n        case 'char':\r\n            vField = VStringField;\r\n            break;\r\n        case 'text':\r\n            vField = VTextField;\r\n            break;\r\n        case 'datetime':\r\n            vField = VDateTimeField;\r\n            break;\r\n        case 'date':\r\n            vField = VDateField;\r\n            break;\r\n    }\r\n    return new vField(form, field, fieldUI, fieldRes);\r\n}\r\n\r\n","export * from './vForm';\r\n","import {HttpChannel} from './httpChannel';\r\nimport { Caller } from './caller';\r\n\r\nexport async function refetchApi(channel:HttpChannel, url:string, options:any, \r\n    resolve:(values:any)=>any, reject:(reason:any)=>void)\r\n{\r\n    await channel.fetch(url, options, resolve, reject);\r\n}\r\n\r\nexport abstract class ApiBase {\r\n    protected token: string;\r\n    protected path: string;\r\n    protected showWaiting: boolean;\r\n\r\n    constructor(path: string, showWaiting: boolean) {\r\n        this.path = path || '';\r\n        this.showWaiting = showWaiting;\r\n    }\r\n\r\n    protected abstract async getHttpChannel(): Promise<HttpChannel>;\r\n\r\n    async xcall(caller:Caller<any>):Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.xcall(this.path, caller);\r\n    }\r\n\r\n    public async call(url:string, method:string, body:any):Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.callFetch(url, method, body);\r\n    }\r\n\r\n    public async get(path:string, params:any=undefined): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.get(this.path + path, params);\r\n    }\r\n\r\n    public async post(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.post(this.path + path, params);\r\n    }\r\n\r\n    public async put(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.put(this.path + path, params);\r\n    }\r\n\r\n    public async delete(path:string, params:any): Promise<any> {\r\n        let channel = await this.getHttpChannel();\r\n        return await channel.delete(this.path + path, params);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport {nav} from './nav';\r\n\r\nexport interface PageHeaderProps {\r\n    back?: 'back' | 'close' | 'none';\r\n    center: string | JSX.Element;\r\n    right?: JSX.Element;\r\n    logout?: boolean | (()=>Promise<void>);\r\n    className?: string;\r\n}\r\nexport interface PageHeaderState {\r\n    hasBack: boolean;\r\n}\r\n\r\nexport class PageHeader extends React.Component<PageHeaderProps, PageHeaderState> {\r\n    constructor(props: PageHeaderProps) {\r\n        super(props);\r\n        this.navChange = this.navChange.bind(this);\r\n        this.state = {\r\n            hasBack: false,\r\n        };\r\n    }\r\n    navChange() {\r\n        this.setState({\r\n            hasBack: nav.level > 1\r\n        })\r\n    }\r\n    componentWillMount() {\r\n        this.navChange();\r\n        //this.navChangeHandler = nav.events.add('change', this.navChange);\r\n    }\r\n    componentWillUnmount() {\r\n        //nav.events.remove('change', this.navChangeHandler);\r\n    }\r\n    async back() {\r\n        await nav.back(); // 这个才会显示confirm box，在dataForm里面，如果输入了数据的话\r\n    }\r\n    openWindow() {\r\n        window.open(document.location.href);\r\n    }\r\n    private logoutClick = () => {\r\n        nav.showLogout(this.logout);\r\n    }\r\n    private logout = async () => {\r\n        let {logout} = this.props;\r\n        if (typeof logout === 'function') {\r\n            await logout(); \r\n        }\r\n        await nav.logout(undefined);\r\n    }\r\n    render() {\r\n        let b = this.state.hasBack || self != top;\r\n        let {right, center, logout, className} = this.props;\r\n        let back:any, pop:any, debugLogout:any;\r\n        if (logout !== undefined && self === top) {\r\n            if (typeof logout === 'boolean' && logout === true\r\n                || typeof logout === 'function')\r\n            {\r\n                let {user} = nav;\r\n                if (user !== undefined) {\r\n                    let {nick, name} = user;\r\n                    debugLogout = <div className=\"d-flex align-items-center\">\r\n                        <small className=\"text-light\">{nick || name}</small>\r\n                        <a className=\"btn ml-2 cursor-pointer\"\r\n                            role=\"button\"\r\n                            onClick={this.logoutClick}>\r\n                            <i className=\"fa fa-sign-out fa-lg\" />\r\n                        </a>\r\n                    </div>;\r\n                }\r\n            }\r\n        }\r\n        if (b) {\r\n            switch (this.props.back) {\r\n                case 'none': back = undefined; break;\r\n                default:\r\n                case 'back': back = <nav onClick={this.back}><i className=\"fa fa-angle-left\" /></nav>; break;\r\n                case 'close': back = <nav onClick={this.back}><i className=\"fa fa-close\" /></nav>; break;\r\n            }\r\n        }\r\n        if (self != top) {\r\n            console.log(document.location.href);\r\n            pop = <header onClick={this.openWindow} />;\r\n        }\r\n        let rightView = (right || debugLogout) && <aside>{right} {debugLogout}</aside>;\r\n        return <header className={className}>\r\n            {pop}\r\n            {back}\r\n            <div>{center}</div>\r\n            {rightView}\r\n        </header>;\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { jsonStringify } from '../tools';\r\n\r\nexport const DefaultRow = (values) => <div className=\"px-3 py-2\">{jsonStringify(values)}</div>;\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { Page, List, FA } from '../../components';\r\nimport { Query } from '../../uq';\r\nimport { VForm } from '../form';\r\nimport { VEntity } from '../CVEntity';\r\nimport { QueryUI, CQuery } from './cQuery';\r\nimport { DefaultRow } from './defaultRow';\r\n\r\nexport class VQueryMain extends VEntity<Query, QueryUI, CQuery> {\r\n    protected vForm: VForm;\r\n    private row: React.StatelessComponent;\r\n\r\n    async open(param?:any):Promise<void> {\r\n        this.vForm = this.createForm(this.onSubmit, param);\r\n        let {row, queryRow} = this.ui;\r\n        this.row = queryRow || row || DefaultRow;\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    onSubmit = async () => {\r\n        let params = this.vForm.getValues();\r\n        if (this.entity.isPaged === true) {\r\n            await this.entity.resetPage(30, params);\r\n            await this.entity.loadPage();\r\n            this.replacePage(this.pageResult);\r\n        }\r\n        else {\r\n            let data = await this.entity.query(params);\r\n            this.replacePage(this.queryResult, data);\r\n        }\r\n    }\r\n\r\n    again = () => {\r\n        this.vForm.reset();\r\n        this.replacePage(this.view);\r\n    }\r\n\r\n    renderExtra() {\r\n        return;\r\n    }\r\n\r\n    renderRow = (item:any, index:number) => <this.row {...item} />;\r\n\r\n    protected view = () => <Page header={this.label}>\r\n        {this.vForm.render('mx-3 my-2')}\r\n        {this.renderExtra()}\r\n    </Page>;\r\n\r\n    protected pageResult = () => {\r\n        let {name, list} = this.entity;\r\n        let rightClose = <button\r\n            className=\"btn btn-outline-success\"\r\n            onClick={this.again}>\r\n            <FA name=\"search\" /> 再查询\r\n        </button>;\r\n        return <Page header={this.label} right={rightClose}>\r\n            <List items={list} item={{render: this.renderRow}} />\r\n        </Page>;\r\n    }\r\n\r\n    protected queryResult = observer((result:any) => {\r\n        let rightClose = <button\r\n            className=\"btn btn-outline-success\"\r\n            onClick={this.again}>\r\n            <FA name=\"search\" /> 再查询\r\n        </button>;\r\n        return <Page header={this.label} right={rightClose}>\r\n            <pre>{JSON.stringify(result, undefined, '\\t')}</pre>\r\n        </Page>;\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { Page, FA, SearchBox, List } from '../../components';\r\nimport { PageItems } from '../../tool';\r\nimport { Query } from '../../uq';\r\nimport { VEntity } from '../CVEntity';\r\nimport { QueryUI, CQuerySelect } from './cQuery';\r\nimport { DefaultRow } from './defaultRow';\r\n\r\nexport class VQuerySelect extends VEntity<Query, QueryUI, CQuerySelect> {\r\n    private row: React.StatelessComponent;\r\n\r\n    PageItems:QueryPageItems;\r\n    ownerId: number;\r\n\r\n    async open(param?:any) {\r\n        let {row, selectRow} = this.ui;\r\n        this.row = selectRow || row || DefaultRow;\r\n        //this.entity = this.controller.entity;\r\n        this.PageItems = new QueryPageItems(this.entity);\r\n        await this.onSearch(param);\r\n        this.openPage(this.view);\r\n    }\r\n    onSearch = async (key:string) => {\r\n        await this.PageItems.first(key);\r\n    }\r\n\r\n    renderRow = (item:any, index:number) => <this.row {...item} />;\r\n\r\n    private callOnSelected(item:any) {\r\n       this.closePage();\r\n       this.returnCall(item);\r\n    }\r\n    clickRow = (item:any) => {\r\n        this.callOnSelected(item);\r\n    }\r\n\r\n    view = () => {\r\n        let header = <SearchBox className=\"mx-1 w-100\"\r\n            initKey={''}\r\n            onSearch={this.onSearch} placeholder={'搜索'+this.label} />;\r\n        return <Page header={header}>\r\n            <List\r\n                items={this.PageItems.items}\r\n                item={{render: this.renderRow, onClick: this.clickRow}}\r\n                before={'搜索'+this.label+'资料'} />\r\n        </Page>;\r\n    };\r\n}\r\n\r\nexport class QueryPageItems extends PageItems<any> {\r\n    private query: Query;\r\n    constructor(query: Query) {\r\n        super();\r\n        this.query = query;\r\n    }\r\n    protected async load():Promise<any[]> {\r\n        await  this.query.loadSchema();\r\n        let ret:any[];\r\n        if (this.query.isPaged === true)\r\n            ret = await this.query.page(this.param, this.pageStart, this.pageSize);\r\n        else {\r\n            let data = await this.query.query(this.param);\r\n            //let data = await this.query.unpackReturns(res);\r\n            ret = data[this.query.returns[0].name];\r\n        }\r\n        return ret;\r\n    }\r\n    protected setPageStart(item:any) {\r\n        if (item === undefined) this.pageStart = 0;\r\n    }\r\n}\r\n","import { StatelessComponent } from 'react';\r\nimport { CEntity, EntityUI } from '../CVEntity';\r\nimport { Query } from '../../uq';\r\nimport { VQueryMain } from './vQueryMain';\r\nimport { VQuerySelect } from './vQuerySelect';\r\n\r\nexport interface QueryUI extends EntityUI {\r\n    CQuery?: typeof CQuery;\r\n    CQuerySelect?: typeof CQuerySelect;\r\n    main?: typeof VQueryMain;\r\n    row?: StatelessComponent;\r\n    queryRow?: StatelessComponent;\r\n    selectRow?: StatelessComponent;\r\n}\r\n\r\nexport abstract class CQueryBase extends CEntity<Query, QueryUI> {\r\n}\r\n\r\nexport class CQuery extends CQueryBase {\r\n    protected async internalStart() {\r\n        await this.openVPage(this.VQueryMain);\r\n    }\r\n\r\n    protected get VQueryMain():typeof VQueryMain {return this.ui && this.ui.main || VQueryMain}\r\n}\r\n\r\nexport class CQuerySelect extends CQueryBase {\r\n    protected async internalStart(param?:any) {\r\n        await this.openVPage(this.VQuerySelect, param);\r\n    }\r\n\r\n    protected get VQuerySelect():typeof VQuerySelect {return VQuerySelect}\r\n}\r\n","export * from './cQuery';\r\nexport * from './vQueryMain';\r\nexport * from './vQuerySelect';","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\nimport { Schema, UiSchema, ItemSchema, UiItem, UiTextItem } from '../schema';\r\nimport { ResUploader } from '../resUploader';\r\nimport { Image } from '../image';\r\nimport { nav } from '../nav';\r\nimport { Page } from '../page';\r\nimport { ItemEdit } from './itemEdit';\r\n\r\nexport class ImageItemEdit extends ItemEdit {\r\n    protected uiItem: UiTextItem;\r\n    private resUploader: ResUploader;\r\n    @observable private resId: string;\r\n    @observable private overSize: boolean = false;\r\n\r\n    protected async internalStart():Promise<any> {\r\n        this.resId = this.value;        \r\n        return new Promise<any>((resolve, reject) => {\r\n            nav.push(React.createElement(this.page, {resolve:resolve, reject:reject}), ()=>reject());\r\n        });\r\n    }\r\n\r\n    private upload = async () => {\r\n        if (!this.resUploader) return;\r\n        let ret = await this.resUploader.upload();\r\n        if (ret === null) {\r\n            this.overSize = true;\r\n            setTimeout(() => this.overSize = false, 3000);\r\n            return;\r\n        }\r\n        this.resId = ret;\r\n        this.isChanged = (this.resId != this.value);\r\n    }\r\n\r\n    private page = observer((props:{resolve:(value:any)=>void, reject: (resean?:any)=>void}):JSX.Element => {\r\n        let {resolve} = props;\r\n        let right = <button\r\n            className=\"btn btn-sm btn-success\"\r\n            disabled={!this.isChanged}\r\n            onClick={()=>resolve(this.resId)}>保存</button>;\r\n        let overSize:any;\r\n        if (this.overSize === true) {\r\n            overSize = <div className=\"text-danger\">\r\n                <i className=\"fa fa-times-circle\" /> 图片文件大小超过2M，无法上传\r\n            </div>;\r\n        }\r\n        return <Page header={'更改' + this.label} right={right}>\r\n            <div className=\"my-3 px-3 py-3 bg-white\">\r\n                <div>\r\n                    <div>上传图片：</div>\r\n                    <div className=\"my-3\">\r\n                        <ResUploader ref={v=>this.resUploader=v} multiple={false} maxSize={2048} />\r\n                    </div>\r\n                    <div>\r\n                        <button className=\"btn btn-primary\" onClick={this.upload}>上传</button>\r\n                    </div>\r\n                </div>\r\n                {overSize}\r\n                <div className=\"small muted my-4\">支持JPG、GIF、PNG格式图片，不超过2M。</div>\r\n                <div className=\"d-flex\">\r\n                    <div className=\"w-12c h-12c mr-4\"\r\n                        style={{border: '1px dotted gray', padding: '8px'}}>\r\n                        <Image className=\"w-100 h-100\" src={this.resId} />\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"small\">图片预览</div>\r\n                        <Image className=\"w-4c h-4c mt-3\" src={this.resId} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    })\r\n}\r\n","import {CenterApiBase} from '../net';\r\nimport {User, decodeUserToken} from '../tool/user';\r\n//import { nav } from '../ui';\r\n\r\nexport interface RegisterParameter {\r\n    nick:string, \r\n    user:string, \r\n    pwd:string,\r\n    country:number, \r\n    mobile:number, \r\n    mobileCountry:number,\r\n    email:string,\r\n    verify:string,\r\n};\r\n\r\nexport class UserApi extends CenterApiBase {\r\n    async login(params: {user: string, pwd: string, guest: number}): Promise<any> {\r\n        //(params as any).device = nav.local.device.get();\r\n        let ret = await this.get('login', params);\r\n        switch (typeof ret) {\r\n            default: return;\r\n            case 'string': return decodeUserToken(ret);\r\n            case 'object':\r\n                let token = ret.token;\r\n                let user = decodeUserToken(token);\r\n                let {nick, icon} = ret;\r\n                if (nick) user.nick = nick;\r\n                if (icon) user.icon = icon;\r\n                return user;\r\n        }\r\n        // !== undefined) return decodeToken(token);\r\n    }\r\n    async register(params: RegisterParameter): Promise<any>\r\n    {\r\n        return await this.post('register', params);\r\n    }\r\n\r\n    async setVerify(account:string, type:'mobile'|'email') {\r\n        return await this.post('set-verify', {account:account, type:type});\r\n    }\r\n\r\n    async checkVerify(account:string, verify:string) {\r\n        return await this.post('check-verify', {account:account, verify:verify});\r\n    }\r\n\r\n    async isExists(account:string) {\r\n        return await this.get('is-exists', {account:account});\r\n    }\r\n\r\n    async resetPassword(account:string, password:string, verify:string, type:'mobile'|'email') {\r\n        return await this.post('reset-password', {account:account, password, verify, type});\r\n    }\r\n    \r\n    async userSetProp(prop:string, value:any) {\r\n        await this.post('tie/user-set-prop', {prop:prop, value:value});\r\n    }\r\n}\r\n\r\nexport const userApi = new UserApi('tv/user/', undefined);\r\n","import {observable, IObservableArray, computed} from 'mobx';\r\nimport {uid} from './uid';\r\n\r\nexport abstract class PageItems<T> {\r\n    constructor(itemObservable:boolean = false) {\r\n        this._items = observable.array<T>([], {deep:itemObservable});\r\n    }\r\n    private isFirst: boolean = true;\r\n    @observable loading: boolean = false;\r\n    @observable private beforeLoad: boolean = true;\r\n    @observable protected loaded: boolean = false;\r\n    protected _items:IObservableArray<T>;\r\n    @observable allLoaded: boolean = false;\r\n    @computed get items():IObservableArray<T> {\r\n        if (this.beforeLoad === true) return null;\r\n        if (this.loaded === false) return undefined;\r\n        return this._items;\r\n    }\r\n\r\n    @observable topDiv:string;\r\n    @observable bottomDiv:string;\r\n    scrollToTop() {\r\n        this.topDiv = '$$'+uid();\r\n    }\r\n    scrollToBottom() {\r\n        this.bottomDiv = '$$'+uid();\r\n    }\r\n\r\n    protected param: any;\r\n    protected firstSize = 100;\r\n    protected pageStart = undefined;\r\n    protected pageSize = 30;\r\n    protected appendPosition:'head'|'tail' = 'tail';\r\n\r\n    protected abstract async load(param:any, pageStart:any, pageSize:number):Promise<T[]>;\r\n    protected abstract setPageStart(item:T);\r\n\r\n    reset() {\r\n        this.isFirst = true;\r\n        this.beforeLoad = true;\r\n        this.loaded = false;\r\n        this.param = undefined;\r\n        this.allLoaded = false;\r\n        this._items.clear();\r\n        this.setPageStart(undefined);\r\n    }\r\n\r\n    append(item:T) {\r\n        if (this.appendPosition === 'tail')\r\n            this._items.unshift(item);\r\n        else\r\n            this._items.push(item);\r\n    }\r\n\r\n    async first(param:any):Promise<void> {\r\n        this.reset();\r\n        this.beforeLoad = false;\r\n        this.param = param;\r\n        await this.more();        \r\n    }\r\n\r\n    async more():Promise<void> {\r\n        if (this.allLoaded === true) return;\r\n        if (this.loading === true) return;\r\n        this.loading = true;\r\n        let pageSize = this.pageSize + 1;\r\n        if (this.isFirst === true) {\r\n            if (this.firstSize > this.pageSize) pageSize = this.firstSize+1;\r\n        }\r\n        let ret = await this.load(\r\n                this.param, \r\n                this.pageStart,\r\n                pageSize);\r\n        this.loading = false;\r\n        this.loaded = true;\r\n        let len = ret.length;\r\n        if (this.isFirst===true && len>this.firstSize ||\r\n            this.isFirst===false && len>this.pageSize)\r\n        {\r\n            this.allLoaded = false;\r\n            --len;\r\n            ret.splice(len, 1);\r\n        }\r\n        else {\r\n            this.allLoaded = true;\r\n        }\r\n        if (len === 0) {\r\n            this._items.clear();\r\n            return;\r\n        }\r\n        this.setPageStart(ret[len-1]);\r\n        if (this.appendPosition === 'tail')\r\n            this._items.push(...ret);\r\n        else\r\n            this._items.unshift(...ret.reverse());\r\n        this.isFirst = false;\r\n    }\r\n}\r\n","import * as React from 'react';\r\n\r\nexport function Loading() {\r\n    return <div className=\"d-flex h-100 align-items-center justify-content-center\">\r\n        <i className=\"fa fa-spinner fa-spin fa-2x fa-fw text-info\" />\r\n    </div>;\r\n}\r\n","import * as React from 'react';\r\nimport { nav } from './nav';\r\n\r\nexport interface ResUploaderProps {\r\n    className?: string;\r\n    multiple?: boolean;\r\n    maxSize?: number;\r\n    onFilesChange?: (evt: React.ChangeEvent<HTMLInputElement>) => void;\r\n}\r\n\r\nexport class ResUploader extends React.Component<ResUploaderProps> {\r\n    private fileInput: HTMLInputElement;\r\n\r\n    upload = async ():Promise<string> => {\r\n        let {maxSize} = this.props;\r\n        if (maxSize === undefined || maxSize <= 0) \r\n            maxSize = 100000000000;\r\n        else\r\n            maxSize = maxSize * 1024;\r\n        let resUrl = nav.resUrl + 'upload';\r\n        var files:FileList = this.fileInput.files;\r\n        var data = new FormData();\r\n        let len = files.length;\r\n        for (let i=0; i<len; i++) {\r\n            let file = files[i];\r\n            if (file.size > maxSize) return null;\r\n            data.append('files[]', file, file.name);\r\n        }\r\n  \r\n        try {\r\n            let abortController = new AbortController();\r\n            let res = await fetch(resUrl, {\r\n                method: \"POST\",\r\n                body: data,\r\n                signal: abortController.signal,\r\n            });\r\n            let json = await res.json();\r\n            return ':' + json.res.id;\r\n        }\r\n        catch (err) {\r\n            console.error('%s %s', resUrl, err);\r\n        }\r\n    }\r\n    render() {\r\n        let {className, multiple, onFilesChange} = this.props;\r\n        return <input \r\n            className={className}\r\n            ref={t=>this.fileInput=t} \r\n            onChange={onFilesChange}\r\n            type='file' name='file' multiple={multiple} />\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { FA } from '../components';\r\n\r\nfunction icon(className:string, name:string) {\r\n    return <FA className={className} name={name} fixWidth={true} />;\r\n}\r\n\r\nexport const entityIcons:{[type:string]:JSX.Element} = {\r\n    tuid: icon('text-info', 'list-alt'),\r\n    action: icon('text-info', 'hand-o-right'),\r\n    map: icon('text-muted', 'list-ul'),\r\n    book: icon('text-muted', 'book'),\r\n    query: icon('text-warning', 'search'),\r\n    history: icon('text-info', 'hand-o-right'),\r\n    pending: icon('text-info', 'forward'),\r\n    sheet: icon('text-primary', 'wpforms'),\r\n};\r\n","import { Controller } from '../components';\r\nimport { CUq } from './cUq';\r\n\r\nexport abstract class ControllerUq extends Controller {\r\n    constructor(cUq: CUq, res:any) {\r\n        super(res);\r\n        this.cUq = cUq;\r\n    }\r\n    cUq: CUq;\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { Page, List, Muted, LMR } from '../../components';\r\nimport { VEntity } from '../CVEntity';\r\nimport { Sheet } from '../../uq';\r\nimport { CSheet, SheetUI } from './cSheet';\r\n\r\nexport class VSheetMain extends VEntity<Sheet, SheetUI, CSheet> {\r\n    async open() {\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    newClick = () => this.event('new');\r\n    schemaClick = () => this.event('schema'); \r\n    archivesClick = () => this.event('archives');\r\n    sheetStateClick = (state) => this.event('state', state);\r\n\r\n    renderState = (item:any, index:number) => {\r\n        let {state, count} = item;\r\n        if (count === 0) return null;\r\n        let badge = <span className=\"badge badge-success ml-5 align-self-end\">{count}</span>;\r\n        return <LMR className=\"px-3 py-2\" left={this.controller.getStateLabel(state)} right={badge} />;\r\n    }\r\n\r\n    protected view = observer(() => {\r\n        let list = this.controller.statesCount.filter(row=>row.count);\r\n        let right = <button className=\"btn btn-outline-primary\" onClick={this.archivesClick}>已归档</button>;\r\n        let templet:any;\r\n        if (this.isDev === true) {\r\n            templet = <button className=\"btn btn-primary mr-2\" color=\"primary\" onClick={this.schemaClick}>模板</button>;\r\n        }\r\n        return <Page header={this.label}>\r\n            <LMR\r\n                className=\"mx-3 my-2\"\r\n                right={right}>\r\n                <button className=\"btn btn-primary mr-2\" color=\"primary\" onClick={this.newClick}>新建</button>\r\n                {templet}\r\n            </LMR>\r\n            <List className=\"my-2\"\r\n                header={<Muted className=\"mx-3 my-1\">待处理{this.label}</Muted>}\r\n                none=\"[ 无 ]\"\r\n                items={list}\r\n                item={{render:this.renderState, onClick:this.sheetStateClick}} />\r\n        </Page>;\r\n    });\r\n}\r\n","import * as React from 'react';\r\nimport { Page } from '../../components';\r\nimport { Sheet } from '../../uq';\r\nimport { VForm } from '../form';\r\nimport { VEntity } from '../CVEntity';\r\nimport { SheetUI, CSheet } from './cSheet';\r\n\r\nexport class VSheetNew extends VEntity<Sheet, SheetUI, CSheet> {\r\n    vForm: VForm;\r\n\r\n    async open(param?:any) {\r\n        this.vForm = this.createForm(this.onSubmit, param);\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    private onSubmit = async ():Promise<void> => {\r\n        let values = this.vForm.getValues();\r\n        let valuesWithBox = this.vForm.values;\r\n        //let ret = \r\n        await this.controller.onSave(values, valuesWithBox);\r\n        /*\r\n        this.ceasePage();\r\n        //this.openPage(this.finishedPage);\r\n        await this.controller.showSaved(ret);\r\n        */\r\n    }\r\n\r\n    protected view = () => <Page header={this.label}>\r\n        {this.vForm.render()}\r\n    </Page>;\r\n}\r\n","import * as React from 'react';\r\nimport {List, Muted, LMR, EasyDate, FA} from '../../components';\r\nimport { Sheet } from '../../uq';\r\nimport { VForm } from '../form';\r\nimport { VEntity } from '../CVEntity';\r\nimport { CSheet, SheetUI, SheetData } from './cSheet';\r\n\r\nconst leftFlowStyle = {width: '8rem'};\r\n\r\nexport abstract class VSheetView extends VEntity<Sheet, SheetUI, CSheet> {\r\n    protected vForm: VForm;\r\n    protected sheetData: SheetData;\r\n    //data: any;\r\n    //state: string;\r\n    //flows:any[];\r\n\r\n    flowRow = (item:any, index:number):JSX.Element => {\r\n        let {date, user, preState, state, action} = item;\r\n        if (action === undefined) action = <><FA className=\"text-primary\" name=\"pencil-square-o\" /> 制单</>;\r\n        let to;\r\n        switch (state) {\r\n            case '$': break;\r\n            case '#': to = <><FA className=\"text-success\" name=\"file-archive-o\" /></>; break;\r\n            default: to = <><FA className=\"text-muted\" name=\"arrow-right\" /> &nbsp; {state}</>; break;\r\n        }\r\n        /*\r\n        return <div className=\"row\">\r\n            <div className=\"col-sm\"></div>\r\n            <div className=\"col-sm\"><div className=\"p-2\">{to}</div></div>\r\n            <div className=\"col-sm text-right\"><div className=\"p-2\"><Muted><EasyDate date={date} /></Muted></div></div>\r\n        </div>;\r\n        */\r\n        return <LMR \r\n            left={<div className=\"pl-3 py-2\" style={leftFlowStyle}>{action}</div>}\r\n            right={<div className=\"p-2\"><Muted><EasyDate date={date} /></Muted></div>}>\r\n            <div className=\"p-2\">{to}</div>\r\n        </LMR>;\r\n    }\r\n\r\n    protected sheetView = () => {\r\n        let {brief, flows} = this.sheetData;\r\n        let removed;\r\n        if (brief.state === '-')\r\n            removed = <div className=\"mx-3 my-2\" style={{color:'red'}}>本单据作废</div>;\r\n        return <div>\r\n            {removed}\r\n            {this.vForm.render()}\r\n    \r\n            <List header={<Muted className=\"mx-3 my-1\">流程</Muted>}\r\n                items={flows}\r\n                item={{render:this.flowRow}}/>\r\n        </div>;\r\n    };\r\n}\r\n","import * as React from 'react';\r\nimport { Page } from '../../components';\r\nimport { VForm, FormMode } from '../form';\r\nimport { VSheetView } from './vSheetView';\r\nimport { SheetData } from './cSheet';\r\n\r\nexport class VSheetEdit extends VSheetView { //VEntity<Sheet, SheetUI, CSheet> {\r\n    protected sheetData: SheetData;\r\n    async open(param: SheetData) {\r\n        this.sheetData = param;\r\n        this.vForm = this.createForm(this.onSubmit, param.data, FormMode.edit);\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    onSubmit = async ():Promise<void> => {\r\n        let values = this.vForm.getValues();\r\n        await this.controller.saveSheet(values, this.vForm.values);\r\n        this.closePage();\r\n        this.returnCall(this.vForm.values);\r\n    }\r\n\r\n    protected view = () => <Page header={this.label}>\r\n        {this.vForm.render()}\r\n    </Page>;\r\n}\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { FA, Page } from '../../components';\r\nimport { VSheetView } from './vSheetView';\r\nimport { SheetData } from './cSheet';\r\n\r\nexport class VSheetAction extends VSheetView { \r\n    async open(sheetData:SheetData) {\r\n        this.sheetData = sheetData;\r\n        //let {brief, data, flows} = await this.controller.getSheetData(sheetId);\r\n        //this.brief = brief;\r\n        //this.flows = flows;\r\n        //this.data = data;\r\n        //this.state = this.brief.state;\r\n        this.vForm = this.createForm(undefined, sheetData.data);\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    actionClick = async (action:any) => {\r\n        let {id, flow, state} = this.sheetData.brief;\r\n        let res = await this.controller.action(id, flow, state, action.name);\r\n        this.ceasePage();\r\n        this.openPage(this.acted);\r\n        //alert(jsonStringify(res));\r\n        //await this.backPage();\r\n    }\r\n\r\n    deleteClick = async () => {\r\n        alert('单据作废：程序正在设计中');\r\n    }\r\n\r\n    editClick = async () => {\r\n        //alert('修改单据：程序正在设计中');\r\n        let values = await this.controller.editSheet(this.sheetData);\r\n        this.vForm.setValues(values);\r\n    }\r\n\r\n    protected page = () => {\r\n        let {brief} = this.sheetData;\r\n        let {state, no} = brief;\r\n        let stateLabel = this.controller.getStateLabel(state);\r\n        let {states} = this.entity;\r\n        let s = states.find(v => v.name === state);\r\n        let actionButtons, startButtons;\r\n        if (s === undefined) {\r\n            let text:string, cn:string;\r\n            switch (state) {\r\n                default:\r\n                    text = '不认识的单据状态\\'' + state + '\\'';\r\n                    cn = 'text-info';\r\n                    break;\r\n                case '-': \r\n                    text = '已作废';\r\n                    cn = 'text-danger';\r\n                    break;\r\n                case '#':\r\n                    text = '已归档';\r\n                    cn = 'text-success';\r\n                    break;\r\n            }\r\n            actionButtons = <div className={classNames(cn)}>[{text}]</div>;\r\n        }\r\n        else {\r\n            actionButtons = <div className=\"flex-grow-1\">{s.actions.map((v,index) => \r\n                <button\r\n                    key={index}\r\n                    className=\"btn btn-primary mr-2\"\r\n                    onClick={()=>this.actionClick(v)}\r\n                >\r\n                    {this.controller.getActionLabel(state, v.name)}\r\n                </button>)}\r\n            </div>;\r\n            if (state === '$') {\r\n                startButtons = <div>\r\n                    <button className=\"btn btn-outline-info ml-2\" onClick={this.editClick}>修改</button>\r\n                    <button className=\"btn btn-outline-danger ml-2\" onClick={this.deleteClick}>作废</button>\r\n                </div>\r\n            }\r\n        };\r\n        return <Page header={this.label + ':' + stateLabel + '-' + no}>\r\n            <div className=\"mb-2\">\r\n                <div className=\"d-flex px-3 py-2 border-bottom bg-light\">\r\n                    {actionButtons}\r\n                    {startButtons}\r\n                </div>\r\n                <this.sheetView />\r\n            </div>\r\n        </Page>;\r\n    }\r\n\r\n    private acted = () => {\r\n        let {discription} = this.sheetData.brief;\r\n        return <Page header=\"已处理\" back=\"close\">\r\n            <div className=\"p-3 d-flex flex-column align-items-center\">\r\n                <div className=\"p-3\">{discription}</div>\r\n                <div className=\"text-success\"><FA name=\"check-circle-o\" /> 单据已处理！</div>\r\n                <div className=\"p-3\">\r\n                    <button className=\"btn btn-outline-info\" onClick={()=>this.backPage()}>返回</button>\r\n                </div>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Page } from '../../components';\r\nimport { VEntity } from '../CVEntity';\r\nimport { Sheet } from '../../uq';\r\nimport { SheetUI, CSheet } from './cSheet';\r\n\r\nexport class VSheetSchema extends VEntity<Sheet, SheetUI, CSheet> {\r\n    async open(param?:any) {\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    protected view = () => <Page header={this.label + \"模板\"}>\r\n        <pre className=\"mx-3 my-2\">{this.entity.schemaStringify()}</pre>\r\n    </Page>;\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { Page, List, LMR, FA, EasyDate, Muted } from '../../components';\r\nimport { VEntity } from '../CVEntity';\r\nimport { Sheet } from '../../uq';\r\nimport { SheetUI, CSheet } from './cSheet';\r\n\r\nexport class VArchives extends VEntity<Sheet, SheetUI, CSheet> {\r\n    list: any[];\r\n\r\n    async open() {\r\n        this.list = await this.entity.getArchives(undefined, 10);\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    archiveClick = async (brief:any) => {\r\n        if (brief.processing===1) return;\r\n        this.event('archived', brief);\r\n    }\r\n    archiveRow = (row:any, index:number) => {\r\n        let {id, no, discription, date} = row;\r\n        let left = <>\r\n            {row.processing===1? '... ' : ''}\r\n            {row.no} &nbsp; {row.discription}\r\n        </>;\r\n        let right = <Muted><EasyDate date={date} /></Muted>;\r\n        return <LMR className=\"px-3 py-2\" left={left} right={right} />\r\n    }\r\n\r\n    protected view = () => {\r\n        return <Page header={'已归档' + this.label}>\r\n            <List items={this.list} item={{render:this.archiveRow, onClick:this.archiveClick}} />\r\n        </Page>;\r\n    };\r\n}\r\n","import * as React from 'react';\r\nimport { Page, nav, List, Muted, FA, LMR, EasyDate } from '../../components';\r\nimport { VEntity } from '../CVEntity';\r\nimport { Sheet } from '../../uq';\r\nimport { CSheet, SheetUI } from './cSheet';\r\n\r\nexport class VSheetList extends VEntity<Sheet, SheetUI, CSheet> {\r\n    protected row: (values) => JSX.Element;\r\n    stateName: string;\r\n    stateLabel: string;\r\n\r\n    async open(item:any) {\r\n        this.row = this.ui.listRow || this.rowContent;\r\n        this.stateName = item.state;\r\n        this.stateLabel = this.controller.getStateLabel(this.stateName);\r\n        //await this.controller.getStateSheets(this.stateName, 0, 10);\r\n        await this.controller.pageStateItems.first(this.stateName);\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    rowClick = async (brief:any) => {\r\n        if (brief.processing===1) {\r\n            this.event('processing', brief.id);\r\n            return;\r\n        }\r\n        this.event('action', brief.id);\r\n    }\r\n\r\n    private onScrollBottom = () => {\r\n        console.log('onScrollBottom');\r\n        this.controller.pageStateItems.more();\r\n    }\r\n\r\n    protected rowContent = (row:any):JSX.Element => {\r\n        let {id, no, discription, date, processing} = row;\r\n        let left = <>            \r\n            {no} &nbsp; <Muted>{discription}</Muted> {processing===1? '...' : ''}\r\n        </>;\r\n        let right = <Muted><EasyDate date={date} /></Muted>;\r\n        return <LMR className=\"px-3 py-2\" left={left} right={right} />;\r\n    }\r\n\r\n    private renderRow = (row:any, index:number) => <this.row {...row} />\r\n\r\n    protected view = () => {\r\n        //let sheets = this.controller.stateSheets;\r\n        let {pageStateItems} = this.controller;\r\n        return <Page header={this.label + ' - ' + this.stateLabel} onScrollBottom={this.onScrollBottom}>\r\n            <List items={pageStateItems} item={{render:this.renderRow, onClick:this.rowClick}} />\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Page } from '../../components';\r\nimport { VSheetView } from './vSheetView';\r\nimport { CSheet, SheetUI, SheetData } from './cSheet';\r\n\r\nexport interface SheetStateFlows {\r\n    flows: any;\r\n    data: any;\r\n}\r\nexport class VArchived extends VSheetView {\r\n    //protected controller: CSheet;\r\n    //brief: any;\r\n\r\n    async open(sheetData:SheetData) {\r\n        this.sheetData = sheetData;\r\n        /*\r\n        let {brief, data, flows} = await this.controller.getArchived(inBrief.id);\r\n        this.brief = brief;\r\n        this.data = data;\r\n        this.flows = flows;\r\n        */\r\n        this.vForm = this.createForm(undefined, this.sheetData.data);\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    protected view = () => {\r\n        let {brief} = this.sheetData;\r\n        return <Page header={this.label + ':' + '-' + brief.no}>\r\n            <this.sheetView />\r\n        </Page>;\r\n    };\r\n}\r\n","import * as React from 'react';\r\nimport { Page, FA } from '../../components';\r\nimport { VSheet } from './vSheet';\r\n\r\nexport class VSheetSaved extends VSheet {\r\n    private brief: any;\r\n    async open(brief?:any) {\r\n        this.brief = brief;\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    private restart = async () => {\r\n        this.ceasePage();\r\n        await this.event('new');\r\n    }\r\n\r\n    actionClick = async (action:any) => {\r\n        this.ceasePage();\r\n        let {id, flow, state} = this.brief;\r\n        let res = await this.controller.action(id, flow, state, action.name);\r\n        this.openPage(this.acted);\r\n    }\r\n\r\n    private buttons = <>\r\n        <button className=\"btn btn-outline-primary mr-3\" onClick={this.restart}>继续开单</button>\r\n        <button className=\"btn btn-outline-info\" onClick={()=>this.backPage()}>返回</button>\r\n    </>;\r\n\r\n    private view = () => {\r\n        let {states} = this.entity;\r\n        const state = '$';\r\n        let s = states.find(v => v.name === state);\r\n        let actionButtons = <>{s.actions.map((v,index) => \r\n            <button\r\n                key={index}\r\n                className=\"btn btn-primary mr-3\"\r\n                onClick={()=>this.actionClick(v)}\r\n            >\r\n                {this.controller.getActionLabel(state, v.name)}\r\n            </button>)}\r\n        </>;\r\n        return <Page header=\"已保存\" back=\"close\">\r\n            <div className=\"p-3 d-flex flex-column align-items-center\">\r\n                <div className=\"text-success\"><FA name=\"check-circle-o\" /> 单据已保存！系统尚未处理</div>\r\n                <div className=\"p-3\">\r\n                    {actionButtons}\r\n                    {this.buttons}\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n\r\n    private acted = () => {\r\n        return <Page>\r\n            <div className=\"p-3 d-flex flex-column align-items-center\">\r\n                <div className=\"text-success\"><FA name=\"check-circle-o\" /> 单据已处理！</div>\r\n                <div className=\"p-3\">\r\n                    {this.buttons}\r\n                </div>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n","import { Sheet } from '../../uq';\r\nimport { SheetUI, CSheet } from './cSheet';\r\nimport { VEntity } from '../CVEntity';\r\n\r\nexport abstract class VSheet extends VEntity<Sheet, SheetUI, CSheet> {\r\n}\r\n","import React from 'react';\r\nimport { nav, Page } from '../../components';\r\nimport { VSheetView } from './vSheetView';\r\nimport { SheetData } from './cSheet';\r\n\r\nexport class VSheetProcessing extends VSheetView { \r\n    async open(sheetData:SheetData) {\r\n        this.sheetData = sheetData;\r\n        //let {brief, data, flows} = await this.controller.getSheetData(sheetId);\r\n        //this.brief = brief;\r\n        //this.flows = flows;\r\n        //this.data = data;\r\n        //this.state = this.brief.state;\r\n        this.vForm = this.createForm(undefined, sheetData.data);\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    protected page = () => {\r\n        let {brief} = this.sheetData;\r\n        let {state, no} = brief;\r\n        let stateLabel = this.controller.getStateLabel(state);\r\n        return <Page header={this.label + ':' + stateLabel + '-' + no}>\r\n            <div className=\"mb-2\">\r\n                <div className=\"d-flex px-3 py-2 border-bottom bg-light\">\r\n                    正在处理中...\r\n                </div>\r\n                <this.sheetView />\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import { IObservableArray, observable } from 'mobx';\r\nimport { postWsToTop } from '../../net';\r\nimport { TypeVPage, VPage } from '../../components';\r\nimport { PageItems } from '../../tool';\r\nimport { Sheet, StateCount } from '../../uq';\r\nimport { CEntity, EntityUI, VEntity } from '../CVEntity';\r\nimport { VSheetMain } from './vMain';\r\nimport { VSheetNew } from './vNew';\r\nimport { VSheetEdit } from './vEdit';\r\nimport { VSheetAction } from './vSheetAction';\r\nimport { VSheetSchema } from './vSchema';\r\nimport { VArchives } from './vArchives';\r\nimport { VSheetList } from './vList';\r\nimport { VArchived } from './vArchived';\r\nimport { VSheetSaved } from './vSaved';\r\nimport { VSheetProcessing } from './vSheetProcessing';\r\n\r\nexport interface SheetActionUI {\r\n    label: string;\r\n}\r\n\r\nexport interface StateUI {\r\n    label: string;\r\n    actions: {[name:string]: SheetActionUI}\r\n}\r\n\r\nexport interface SheetUI extends EntityUI {\r\n    CSheet?: typeof CSheet;\r\n    states?: {[name:string]: StateUI};\r\n    main?: TypeVPage<CSheet>;\r\n    sheetNew?: TypeVPage<CSheet>;\r\n    sheetSaved?: TypeVPage<CSheet>;\r\n    sheetEdit?: TypeVPage<CSheet>;\r\n    sheetAction?: TypeVPage<CSheet>;\r\n    listRow?: (row:any) => JSX.Element;\r\n    sheetTitle?: (sheetValues:any, x:any) => string;      // 返回单据的描述\r\n}\r\n\r\nexport interface SheetData {\r\n    brief: any;\r\n    data: any;\r\n    flows: any[];\r\n}\r\n\r\nexport class CSheet extends CEntity<Sheet, SheetUI> {\r\n    statesCount:IObservableArray<StateCount> = observable.array<StateCount>([], {deep:true});\r\n    curState:string;\r\n    pageStateItems: PageItems<any>;\r\n\r\n    protected async internalStart() {\r\n        await this.loadStateSheetCount();\r\n        this.pageStateItems = this.entity.createPageStateItems();\r\n        await this.openVPage(this.VSheetMain);\r\n    }\r\n\r\n    protected async onMessage(msg: any):Promise<void> {\r\n        let {type, body, from, to, push} = msg;\r\n        if (type === 'sheet') this.onSheet(from, to, body);\r\n    }\r\n    private onSheet(from:number, to:number[], sheetData:any) {\r\n        let me = this.user.id;\r\n        let {id, preState, state} = sheetData;\r\n        console.log({$:'onMessage sheet', from:from, to:to.join(','), id:id, preState:preState, state:state, me:me, sheetData:sheetData})\r\n        if (from === me) {\r\n            this.sheetActPreState(id, preState);\r\n        }\r\n        if (to.find(v=>v===me) !== undefined) {\r\n            this.sheetActState(id, state, sheetData);\r\n        }\r\n    }\r\n    private sheetActPreState(id:number, preState:string) {\r\n        this.changeStateCount(preState, -1);\r\n        if (this.curState === undefined || this.curState !== preState) return;\r\n        /*\r\n        let index = this.stateSheets.findIndex(v => v.id === id);\r\n        if (index>=0) {\r\n            this.stateSheets.splice(index, 1);\r\n        }*/\r\n        let index = this.pageStateItems.items.findIndex(v => v.id === id);\r\n        if (index>=0) {\r\n            this.pageStateItems.items.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    private sheetActState(id:number, state:string, msg:any) {\r\n        this.changeStateCount(state, 1);\r\n        if (this.curState === undefined || this.curState !== state) return;\r\n        /*\r\n        if (this.stateSheets.findIndex(v => v.id === id) < 0) {\r\n            this.stateSheets.push(msg);\r\n        }\r\n        */\r\n        if (this.pageStateItems.items.findIndex(v => v.id === id) < 0) {\r\n            this.pageStateItems.items.push(msg);\r\n        }\r\n    }\r\n\r\n    private changeStateCount(state:string, delta:number) {\r\n        if (state === undefined) return;\r\n        let index = this.statesCount.findIndex(v => v.state === state);\r\n        console.log({$:'changeState', state: state, delta: delta, index: index});\r\n        if (index < 0) return;\r\n        let stateCount = this.statesCount[index];\r\n        stateCount.count += delta;\r\n        if (stateCount.count < 0) stateCount.count = 0;\r\n    }\r\n\r\n    protected get VSheetMain():TypeVPage<CSheet> {return (this.ui&&this.ui.main) || VSheetMain}\r\n    protected get VSheetNew(): TypeVPage<CSheet> {return this.ui.sheetNew || VSheetNew}\r\n    protected get VSheetSaved(): TypeVPage<CSheet> {return this.ui.sheetSaved || VSheetSaved}\r\n    protected get VSheetEdit(): TypeVPage<CSheet> {return this.ui.sheetEdit || VSheetEdit}\r\n    protected get VSheetSchema(): TypeVPage<CSheet> {return VSheetSchema}\r\n    protected get VArchives(): TypeVPage<CSheet> {return VArchives}\r\n    protected get VArchived(): TypeVPage<CSheet> {return VArchived}\r\n    protected get VSheetList(): TypeVPage<CSheet> {return VSheetList}\r\n    protected get VSheetAction(): TypeVPage<CSheet> {return this.ui.sheetAction || VSheetAction}\r\n    protected get VSheetProcessing(): TypeVPage<CSheet> {return VSheetProcessing}\r\n    protected async onEvent(type:string, value:any) {\r\n        let c: TypeVPage<CSheet>;\r\n        switch (type) {\r\n            default: return;\r\n            case 'new': c = this.VSheetNew; break;\r\n            case 'schema': c = this.VSheetSchema; break;\r\n            case 'archives': c = this.VArchives; break;\r\n            case 'state':\r\n                this.curState = value.state;\r\n                c = this.VSheetList;\r\n                break;\r\n            case 'archived':\r\n                await this.showArchived(value); return;\r\n            case 'action':\r\n                await this.showAction(value); return;\r\n            case 'processing':\r\n                await this.showProcessing(value); return;\r\n        }\r\n        await this.openVPage(c, value);\r\n    }\r\n\r\n    async startSheet(sheetId:number) {\r\n        if (await this.beforeStart() === false) return;\r\n        await this.onEvent('action', sheetId);\r\n    }\r\n\r\n    async showAction(sheetId:number) {\r\n        let sheetData:SheetData = await this.getSheetData(sheetId);\r\n        postWsToTop({\r\n            body: {\r\n                $type: 'msg',\r\n                action: '$sheet',\r\n                msg: {\r\n                    id: sheetId,\r\n                    uq: this.cUq.uq.id,\r\n                    state: sheetData.brief.state\r\n                }\r\n            }\r\n        });\r\n        await this.openVPage(this.VSheetAction, sheetData);\r\n    }\r\n\r\n    async showProcessing(sheetId:number) {\r\n        let sheetData:SheetData = await this.getSheetData(sheetId);\r\n        await this.openVPage(this.VSheetProcessing, sheetData);\r\n    }\r\n\r\n    async editSheet(sheetData:SheetData):Promise<any> {\r\n        //alert('修改单据：程序正在设计中');\r\n        let values = await this.vCall(this.VSheetEdit, sheetData);\r\n        return values;\r\n    }\r\n\r\n    async showArchived(inBrief:any) {\r\n        let sheetData = await this.getArchived(inBrief.id);\r\n        await this.openVPage(this.VArchived, sheetData);\r\n    }\r\n\r\n    onSave = async (values:any, valuesWithBox:any):Promise<void> => {\r\n        //let values = this.vForm.getValues();\r\n        //let ret = await this.controller.saveSheet(values, this.vForm.values);\r\n        let ret = await this.saveSheet(values, valuesWithBox);\r\n        this.ceasePage();\r\n        //this.openPage(this.finishedPage);\r\n        await this.showSaved(ret);\r\n    }\r\n\r\n    async showSaved(sheetData:any) {\r\n        await this.openVPage(this.VSheetSaved, sheetData);\r\n    }\r\n\r\n    private getStateUI(stateName:string) {\r\n        let {states} = this.res;\r\n        if (states === undefined) return;\r\n        return states[stateName];\r\n    }\r\n    getStateLabel(stateName:string) {\r\n        let state = this.getStateUI(stateName);\r\n        let ret = (state && state.label) || stateName;\r\n        switch (ret) {\r\n            default: return ret;\r\n            case '$': return '新单';\r\n        }\r\n    }\r\n    getActionLabel(stateName:string, actionName:string) {\r\n        let state = this.getStateUI(stateName);\r\n        if (state === undefined) return actionName;\r\n        let actions = state.actions;\r\n        if (actions === undefined) return actionName;\r\n        let action = actions[actionName];\r\n        return (action && action.label) || actionName;\r\n    }\r\n\r\n    private async loadStateSheetCount():Promise<void> {\r\n        this.statesCount.clear();\r\n        let statesCount = await this.entity.stateSheetCount();\r\n        this.statesCount.splice(0, 0, ...statesCount);\r\n    }\r\n\r\n    async getSheetData(sheetId:number):Promise<SheetData> {\r\n        return await this.entity.getSheet(sheetId);\r\n    }\r\n\r\n    async getArchived(sheetId:number):Promise<SheetData> {\r\n        return await this.entity.getArchive(sheetId);\r\n    }\r\n\r\n    async saveSheet(values:any, valuesWithBox:any):Promise<any> {\r\n        let {sheetTitle} = this.ui;\r\n        let disc = sheetTitle === undefined? this.label : sheetTitle(valuesWithBox, this.x);\r\n        let ret = await this.entity.save(disc, values);\r\n        //let {id, state} = ret;\r\n        //if (id > 0) this.changeStateCount(state, 1);\r\n        return ret;\r\n    }\r\n\r\n    async action(id:number, flow:number, state:string, actionName:string):Promise<any> {\r\n        return await this.entity.action(id, flow, state, actionName);\r\n    }\r\n}\r\n","export * from './cSheet';\r\nexport * from './vSheet';\r\nexport * from './vMain';\r\nexport * from './vNew';\r\nexport * from './vEdit';\r\nexport * from './vList';\r\nexport * from './vSheetAction';\r\nexport * from './vSchema';\r\nexport * from './vArchived';\r\nexport * from './vSheetView';\r\n","import * as React from 'react';\r\nimport {observer} from 'mobx-react';\r\nimport classNames from 'classnames';\r\nimport '../../css/va-lmr.css';\r\n\r\nexport interface LMRProps {\r\n    className?: string | string[];\r\n    left?: string|JSX.Element;\r\n    right?: string|JSX.Element;\r\n    onClick?: ()=>void;\r\n}\r\n\r\n@observer\r\nexport class LMR extends React.Component<LMRProps> {\r\n    render() {\r\n        let {className, left, children, right, onClick} = this.props;\r\n        let l, r;\r\n        if (left !== undefined) l = <header>{left}</header>;\r\n        if (right !== undefined) r = <footer>{right}</footer>;\r\n        let cursor;\r\n        if (onClick !== undefined) cursor = 'cursor-pointer';\r\n        return <div className={classNames('va-lmr', className, cursor)} onClick={onClick}>\r\n            {l}\r\n            <div>{children}</div>\r\n            {r}\r\n        </div>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport {observer} from 'mobx-react';\r\nimport classNames from 'classnames';\r\nimport '../../css/va-badge.css';\r\n\r\nexport interface BadgeProps {\r\n    className?: string;\r\n    badge?: string|number;\r\n    size?: 'xs' | 'sm' | 'lg';\r\n    color?: 'secondary'|'success'|'danger'|'primary'|'info'|'warning';\r\n    badgeAlign?: 'left'|'center'|'right';\r\n    badgeVertical?: 'top'|'middle'|'bottom';\r\n}\r\n\r\n@observer\r\nexport class Badge extends React.Component<BadgeProps> {\r\n    render() {\r\n        let {className, badge, size, color, badgeAlign, badgeVertical, children} = this.props;\r\n        let cn = classNames(\r\n            className,\r\n            'va-badge',\r\n            size && 'va-badge-'+size,\r\n            'va-badge-' + (color||'secondary'),\r\n            badgeAlign && 'va-badg-'+badgeAlign,\r\n            badgeVertical && 'va-badg-'+badgeVertical,\r\n        );\r\n        let b;\r\n        if (badge) b = <b>{badge}</b>;\r\n        return <div className={cn}>\r\n            {children}\r\n            {b}\r\n        </div>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport * as classNames from 'classnames';\r\n\r\nexport interface FAProps {\r\n    name: string;\r\n    className?: string;\r\n    size?: 'lg'|'2x'|'3x'|'4x'|'5x';\r\n    spin?: boolean;\r\n    fixWidth?: boolean;\r\n    border?: boolean;\r\n    pull?: 'left'|'right';\r\n    pulse?: boolean;\r\n    rotate?: 90|180|270;\r\n    flip?: 'horizontal'|'vertical';\r\n    inverse?: boolean;\r\n}\r\n\r\nexport class FA extends React.Component<FAProps> {\r\n    render() {\r\n        let {name, className, size, spin, fixWidth, border, pull, pulse, rotate, flip, inverse} = this.props;\r\n        let cn = classNames(className, 'fa',\r\n            name && ('fa-' + name),\r\n            size && 'fa-'+size,\r\n            fixWidth && 'fa-fw',\r\n            border && 'fa-border',\r\n            pull && 'fa-pull-' + pull,\r\n            spin && 'fa-spin',\r\n            pulse && 'fa-pulse',\r\n            rotate && 'fa-rotate-' + rotate,\r\n            flip && 'fa-flip-' + flip,\r\n            inverse && 'fa-inverse',\r\n        );\r\n        return <i className={cn} />\r\n    }\r\n}\r\n\r\nexport interface StackedFAProps {\r\n    className?: string;\r\n    size?: 'lg',\r\n}\r\nexport class StackedFA extends React.Component<StackedFAProps> {\r\n    render() {\r\n        let {className, size, children} = this.props;\r\n        let cn = classNames(\r\n            'fa-stack',\r\n            className,\r\n            size && 'fa-' + size);\r\n        return <span className={cn}>\r\n            {children}\r\n        </span>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport {FA} from './FA';\r\n\r\nexport interface IconTextProps {\r\n    icon: string;\r\n    iconClass?: string;\r\n    text: string;\r\n    textClass?: string;\r\n}\r\n\r\nexport class IconText extends React.Component<IconTextProps> {\r\n    render() {\r\n        let {icon, iconClass, text, textClass} = this.props;\r\n        return <div className=\"py-2\">\r\n            <FA className={iconClass} name={icon} fixWidth={true} />\r\n            <span className={textClass}>{text}</span>\r\n        </div>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport * as classNames from 'classnames';\r\n\r\nexport const Muted = (props:any) => \r\n<small className={classNames('text-muted', props.className)} style={props.style}>\r\n    {props.children}\r\n</small>;\r\n","export * from './Badge';\r\nexport * from './LMR';\r\nexport * from './FA';\r\nexport * from './IconText';\r\nexport * from './Muted';\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport className from 'classnames';\r\nimport { Page, List, LMR, FA } from '../../components';\r\nimport { PureJSONContent } from '../tools';\r\nimport { Map } from '../../uq';\r\nimport { VEntity } from '../CVEntity';\r\nimport { CMap, MapItem, MapKey, MapUI } from './cMap';\r\nimport { tv } from '../cUq';\r\n\r\nexport class VMapMain extends VEntity<Map, MapUI, CMap> {\r\n    private isFrom: boolean;\r\n\r\n    async open(param?:any) {\r\n        this.isFrom = this.controller.isFrom;\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    itemRender = (item:MapItem, index:number) => {\r\n        return <this.ItemRow item={item} />;\r\n    }\r\n\r\n    private ItemRow = observer(({item}: {item:MapItem}) => {\r\n        let {tuid, box, children, isLeaf, keyIndex, values} = item;\r\n        let keyUI = this.controller.keyUIs[keyIndex];\r\n        let {content:keyContent, valuesContent, none:keyNone} = keyUI;\r\n        let add:any, remove:any;\r\n        if (this.isFrom === false) {\r\n            add = <button className=\"btn btn-link btn-sm\" onClick={()=>this.controller.addClick(item)}>\r\n                <FA name=\"plus\" />\r\n            </button>;\r\n            remove = <button className=\"btn btn-link btn-sm\" onClick={()=>this.controller.removeClick(item)}>\r\n                <FA className=\"text-info\" name=\"trash\" />\r\n            </button>;\r\n        }\r\n        let right:any;\r\n        if (isLeaf === false) {\r\n            if (keyIndex === 0)\r\n                right = add;\r\n            else\r\n                right = <>{remove} &nbsp; {add}</>;\r\n        }\r\n        else if (keyIndex > 0) {\r\n            right = remove;\r\n        }\r\n        let content:any, border:any, valuesView:any;\r\n        if (isLeaf === true) {\r\n            content = undefined; //<div className=\"ml-5\">leaf</div>;\r\n            if (values) {\r\n                //valuesView = null; // 现在不显示values content了\r\n                valuesView = (valuesContent || PureJSONContent)(values, this.x);\r\n            }\r\n        }\r\n        else {\r\n            border = 'border-bottom';\r\n            let none = keyNone && keyNone(this.x);\r\n            content = <List \r\n                className=\"ml-4\" \r\n                items={children} \r\n                item={{onClick:undefined, render:this.itemRender}}\r\n                none={none} />\r\n        }\r\n        let left = <div className=\"py-1 pr-3\">{tv(box, keyContent, this.x)}</div>;\r\n        return <div className=\"d-flex flex-column\">\r\n            <LMR className={className('px-3', 'py-2', border)}\r\n                left={left}\r\n                right={right}\r\n            >\r\n                <div className=\"py-1\">{valuesView}</div>\r\n            </LMR>\r\n            {content}\r\n        </div>;\r\n    });\r\n\r\n    protected get view() { return () => <Page header={this.label}>\r\n            <List items={this.controller.items} item={{className:'my-2', onClick:undefined, render:this.itemRender}} />\r\n        </Page>\r\n    };\r\n}\r\n","import * as React from 'react';\r\nimport { VEntity } from '../CVEntity';\r\nimport { MapUI, CMap } from './cMap';\r\nimport { Map } from '../../uq';\r\nimport { Page } from '../../components';\r\nimport { VForm } from '../form';\r\n\r\nexport class VInputValues extends VEntity<Map, MapUI, CMap> {\r\n    private vForm: VForm;\r\n\r\n    async open(param?:any) {\r\n        this.vForm = this.createForm(this.onValuesSubmit);\r\n        this.openPageElement(<this.view />);\r\n    }\r\n\r\n    private onValuesSubmit = async () => {\r\n        this.ceasePage();\r\n        let values = this.vForm.getValues();\r\n        this.returnCall(values);\r\n    }\r\n\r\n    private view = () => {\r\n        return <Page>\r\n            {this.vForm.render()}\r\n        </Page>\r\n    }\r\n}\r\n","import _ from 'lodash';\r\nimport { observable } from 'mobx';\r\nimport { Map, Tuid, BoxId, Field, fieldDefaultValue } from '../../uq';\r\nimport { PureJSONContent } from '../tools';\r\nimport { CEntity, EntityUI } from '../CVEntity';\r\nimport { VMapMain } from './vMain';\r\nimport { VInputValues } from './inputValues';\r\n\r\nexport interface MapKey {\r\n    content: (values, x?:any) => JSX.Element;\r\n    valuesContent?: (values, x?:any) => JSX.Element;\r\n    none?: (x:any)=>string;\r\n}\r\n\r\nexport interface MapUI extends EntityUI {\r\n    CMap?: typeof CMap;\r\n    keys?: MapKey[],\r\n}\r\n\r\nexport class MapItem {\r\n    parent: MapItem;\r\n    tuid: Tuid;\r\n    box: BoxId;\r\n    isLeaf: boolean;\r\n    keyIndex:number;\r\n    children: MapItem[] = observable.array([], {deep: true});\r\n    values: any;\r\n    constructor(parent:MapItem, tuid:Tuid, box:BoxId, keyIndex:number) {\r\n        this.parent = parent;\r\n        this.tuid = tuid;\r\n        this.box = box;\r\n        this.keyIndex = keyIndex;\r\n        this.isLeaf = false;\r\n    }\r\n}\r\n\r\nexport class CMap extends CEntity<Map, MapUI> {\r\n    isFrom: boolean;\r\n    items:MapItem[];\r\n    keyFields: Field[];\r\n    keyUIs: MapKey[];\r\n\r\n    protected async internalStart() {\r\n        let {keys, schemaFrom} = this.entity;\r\n        this.isFrom = schemaFrom !== undefined;\r\n        let q = this.entity.queries.all;\r\n        let result = await q.query({});\r\n        //let data = await this.entity.unpackReturns(res);\r\n        let ret = result.ret;\r\n        let keysLen = keys.length;\r\n        this.keyUIs = _.clone(this.ui.keys || []);\r\n        this.keyFields = [];\r\n        let retFields = q.returns[0].fields;\r\n        for (let i=0; i<keysLen; i++) {\r\n            this.keyFields.push(retFields[i]);\r\n            if (i >= this.keyUIs.length) {\r\n                this.keyUIs.push({\r\n                    content: PureJSONContent,\r\n                });\r\n            }\r\n        }\r\n        this.items = observable([]);\r\n        let item:MapItem = undefined;\r\n        for (let r of ret) {\r\n            let newItem = this.addItem(item, r);\r\n            if (newItem !== undefined) {\r\n                this.items.push(newItem);\r\n                item = newItem;\r\n            }\r\n        }\r\n\r\n        await this.openVPage(this.VMapMain);\r\n    }\r\n\r\n    private createItem(parent:MapItem, tuid:Tuid, box:BoxId, keyIndex:number, values?:any) {\r\n        let item = new MapItem(parent, tuid, box, keyIndex);\r\n        if (keyIndex === this.keyFields.length - 1) {\r\n            item.isLeaf = true;\r\n            item.values = values;\r\n        }\r\n        return item;\r\n    }\r\n\r\n    addItem(item:MapItem, row:any):MapItem {\r\n        let ret:MapItem = undefined;\r\n        let keysLen = this.keyFields.length;\r\n        let p = item;\r\n        for (let i=0;i<keysLen;i++) {\r\n            let key = this.keyFields[i];\r\n            let {name} = key;\r\n            let tuidBox = key._tuid;\r\n            let val:BoxId = row[name];\r\n            if (val === undefined) break;\r\n            let {id} = val;\r\n            if (i === 0) {\r\n                if (id === 0) continue;\r\n                if (p === undefined || p.box.id !== id) {\r\n                    ret = p = this.createItem(undefined, tuidBox.tuid, val, i, row);\r\n                }\r\n                continue;\r\n            }\r\n            let {children, box} = p;\r\n            let len = children.length;\r\n            if (len > 0) {\r\n                let n = children[len-1];\r\n                if (n.box.id === id) {\r\n                    p = n;\r\n                    continue;\r\n                }\r\n            }\r\n            if (id > 0) {\r\n                children.push(p = this.createItem(p, tuidBox.tuid, val, i, row));\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    async searchOnKey(keyField:Field, param):Promise<number> {\r\n        let {_tuid} = keyField;\r\n        let {tuid, ownerField} = _tuid;\r\n        let cTuidSelect = this.cUq.cTuidSelect(tuid);\r\n        let callParam = param;\r\n        if (ownerField !== undefined) {\r\n            callParam = param[ownerField.name];\r\n            if (typeof callParam === 'object') {\r\n                callParam = callParam.id;\r\n            }\r\n        }\r\n        let ret = await cTuidSelect.call(callParam);\r\n        return _tuid.getIdFromObj(ret);\r\n    }\r\n\r\n    addClick = async(item:MapItem) => {\r\n        let {keyIndex, children} = item;\r\n        let keysLen = this.keyFields.length;\r\n        let keysLast = keysLen-1;\r\n        let idx = keyIndex + 1;\r\n        if (idx >= keysLen) return;\r\n        let keyField = this.keyFields[idx];\r\n        let kn = keyField.name;\r\n        let tuid = keyField._tuid;\r\n        let searchParam = {} as any;\r\n        let data = {} as any;\r\n        for (let p=item;p!==undefined;p=p.parent) {\r\n            let {keyIndex:ki, box} = p;\r\n            let kn = this.keyFields[ki].name;\r\n            //searchParam[kn] = data['_' + kn] = box.id;\r\n            searchParam[kn] = data[kn] = box.id;\r\n        }\r\n\r\n        let id = await this.searchOnKey(keyField, searchParam);\r\n        if (id === undefined || id <= 0) return;\r\n        tuid.useId(id);\r\n        let idBox = tuid.boxId(id);\r\n        let arr1 = {} as any;\r\n        let values:any = {};\r\n        if (keyIndex+1===keysLast) {\r\n            tuid.useId(id);\r\n            //values[kn] = arr1['_' + kn] = idBox;\r\n            values[kn] = arr1[kn] = idBox;\r\n            if (this.entity.fields.length > 0) {\r\n                let ret = await this.vCall(VInputValues, data);\r\n                for (let i in ret) {\r\n                    //values[i] = arr1['_' + i] = ret[i];\r\n                    values[i] = arr1[i] = ret[i];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            //values[kn] = data['_' + kn] = idBox;\r\n            values[kn] = data[kn] = idBox;\r\n            for (let i=idx+1;i<keysLast;i++) {\r\n                //data['_' + this.keyFields[i].name] = 0;\r\n                data[this.keyFields[i].name] = 0;\r\n            }\r\n            // 填map的key field 0 值\r\n            //arr1['_' + this.keyFields[keysLast].name] = 0;\r\n            arr1[this.keyFields[keysLast].name] = 0;\r\n            let {fields} = this.entity;\r\n            for (let f of fields) {\r\n                let {name, type, null:nullable} = f;\r\n                if (!(nullable === true)) {\r\n                    //arr1['_' + f.name] = fieldDefaultValue(type);\r\n                    arr1[f.name] = fieldDefaultValue(type);\r\n                }\r\n            }\r\n        }\r\n        data.arr1 = [arr1];\r\n        await this.entity.actions.add.submit(data);\r\n        let rowIndex = children.findIndex(v => v.box.id === id);\r\n        if (rowIndex < 0) {\r\n            children.push(this.createItem(item, tuid.tuid, idBox, idx, values));\r\n        }\r\n        else {\r\n            let {fields} = this.entity;\r\n            if (fields !== undefined && fields.length > 0) {\r\n                let row = children[rowIndex];\r\n                children.splice(rowIndex, 1);\r\n                row.values = values;\r\n                /*\r\n                for (let f of fields) {\r\n                    let {name:fn} = f;\r\n                    row.values[fn] = values[fn];\r\n                }*/\r\n                children.splice(rowIndex, 0, row);\r\n            }\r\n        }\r\n        this.removeCeased();\r\n    }\r\n\r\n    removeClick = async(item:MapItem) => {\r\n        let keyField = this.keyFields[item.keyIndex];\r\n        let tuid = keyField._tuid;\r\n        let cTuidMain = this.cUq.cTuidMain(tuid.tuid);\r\n        let label = cTuidMain.getLable(tuid.tuid);\r\n        let confirmDelete:_.TemplateExecutor = \r\n            this.res.confirmDelete \r\n            || _.template('do you really want to remove ${label}?');\r\n        if (confirm(confirmDelete({label:label})) === false) return;\r\n        let map:Map = this.entity;\r\n        let data = {} as any;\r\n        let arr1 = data['arr1'] = [];\r\n        let v0 = {} as any;\r\n        arr1.push(v0);\r\n        for (let p=item; p!==undefined;p=p.parent) {\r\n            let ki=p.keyIndex;\r\n            //v0['_'+this.keyFields[ki].name] = p.box.id;\r\n            v0[this.keyFields[ki].name] = p.box.id;\r\n        }\r\n        let len = this.keyFields.length;\r\n        for (let i=item.keyIndex+1; i<len; i++) {\r\n            let k = this.keyFields[i];\r\n            //v0['_'+k.name] = -1;\r\n            v0[k.name] = -1;\r\n        }\r\n        await map.actions.del.submit(data);\r\n        let children = item.parent.children;\r\n        let index = children.findIndex(v => v === item);\r\n        if (index >= 0) children.splice(index, 1);\r\n    }\r\n\r\n    protected get VMapMain():typeof VMapMain {return VMapMain}\r\n}\r\n","export * from './cMap';\r\nexport * from './vMain';\r\n","import {CenterApiBase} from '../net';\r\n\r\nexport class CenterApi extends CenterApiBase {\r\n    async userAppUnits(app:number):Promise<any[]> {\r\n        return await this.get('tie/user-app-units', {app:app});\r\n    }\r\n}\r\n\r\nexport const centerApi = new CenterApi('tv/', undefined);\r\n","import * as React from 'react';\r\nimport { VPage, Page, FA, nav, LMR, List } from \"../../components\";\r\nimport { appInFrame } from '../../net';\r\nimport { CApp } from \"./CApp\";\r\n\r\nexport class VAppMain extends VPage<CApp> {\r\n    async open(param?:any) {\r\n        this.openPage(this.appPage);\r\n    }\r\n\r\n    render(param?:any) {\r\n        return this.appContent();\r\n    }\r\n\r\n    protected appPage = () => {\r\n        let {caption} = this.controller;\r\n        return <Page header={caption} logout={async()=>{appInFrame.unit = undefined}}>\r\n            {this.appContent()}\r\n        </Page>;\r\n    }\r\n\r\n    protected appContent = () => {\r\n        let {cUqArr} = this.controller;\r\n        let content:any;\r\n        if (cUqArr.length === 0) {\r\n            content = <div className=\"text-danger\">\r\n                <FA name=\"\" /> 此APP没有绑定任何的UQ\r\n            </div>;\r\n        }\r\n        else {\r\n            content = cUqArr.map((v,i) => <div key={i}>{v.render()}</div>);\r\n        }\r\n        return <>{content}</>;\r\n    };\r\n}\r\n\r\nexport class VUnsupportedUnit extends VPage<CApp> {\r\n    async open(predefinedUnit: number) {\r\n        this.openPage(this.page, predefinedUnit);\r\n    }\r\n\r\n    private page = (predefinedUnit: number) => {\r\n        let {user} = nav;\r\n        let userName:string = user? user.name : '[未登录]';\r\n        let {appOwner, appName} = this.controller.uqs;\r\n        return <Page header=\"APP无法运行\" logout={true}>\r\n            <div className=\"m-3 text-danger container\">\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">登录用户</div>\r\n                    <div className=\"col-sm text-body\">{userName}</div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">App</div>\r\n                    <div className=\"col-sm text-body\">{`${appOwner}/${appName}`}</div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">预设小号</div>\r\n                    <div className=\"col-sm text-body\">{predefinedUnit || <small className=\"\">[无预设小号]</small>}</div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">\r\n                        可能原因<FA name=\"exclamation-triangle\" />\r\n                    </div>\r\n                    <div className=\"col-sm text-body\">\r\n                        <ul className=\"p-0\">\r\n                            <li>没有小号运行 {appName}</li>\r\n                            <li>用户 <b>{userName}</b> 没有加入任何一个运行{appName}的小号</li>\r\n                            {\r\n                                predefinedUnit && \r\n                                <li>预设小号 <b>{predefinedUnit}</b> 没有运行App {appName}</li>\r\n                            }\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">小号{predefinedUnit}</div>\r\n                    <div className=\"col-sm text-body\">\r\n                        预设小号定义在 public/unit.json 文件中。\r\n                        定义了这个文件的程序，只能由url直接启动。\r\n                        用户第一次访问app之后，会缓存在localStorage里。<br/>\r\n                        如果要删去缓存的预定义Unit，logout然后再login。\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport class VUnitSelect extends VPage<CApp> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderRow = (item: any, index: number):JSX.Element => {\r\n        let {id, nick, name} = item;\r\n        return <LMR className=\"px-3 py-2\" right={'id: ' + id}>\r\n            <div>{nick || name}</div>\r\n        </LMR>;\r\n    }\r\n    private onRowClick = async (item: any) => {\r\n        appInFrame.unit = item.id; // 25;\r\n        await this.controller.start();\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"选择小号\" logout={true}>\r\n            <List items={this.controller.appUnits} item={{render: this.renderRow, onClick: this.onRowClick}}/>\r\n        </Page>\r\n    }\r\n}\r\n\r\nexport class VErrorsPage extends VPage<CApp> {\r\n    async open(errors:string[]) {\r\n        this.openPage(this.page, errors);\r\n    }\r\n\r\n    private page = (errors:string[]) => {\r\n        return <Page header=\"ERROR\">\r\n            <div className=\"m-3\">\r\n                <div>Load Uqs 发生错误：</div>\r\n                {errors.map((r, i) => <div key={i}>{r}</div>)}\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport class VAppStartError extends VPage<CApp> {\r\n    async open(error:any) {\r\n        this.openPage(this.page, error);\r\n    }\r\n\r\n    private page = (error:any) => {\r\n        return <Page header=\"App start error!\">\r\n            <pre>\r\n                {typeof error === 'string'? error : error.message}\r\n            </pre>\r\n        </Page>;\r\n    }\r\n}","import _ from 'lodash';\r\nimport { nav, Controller, TypeVPage, resLang, NavSettings} from '../../components';\r\nimport { loadAppUqs, appInFrame, getExHash, UqData} from '../../net';\r\nimport { CUq, UqUI } from '../cUq';\r\nimport { centerApi } from '../centerApi';\r\nimport { UQsMan } from '../../uq';\r\nimport { VUnsupportedUnit, VAppMain, VUnitSelect, VErrorsPage, VAppStartError } from './vApp';\r\n\r\nexport interface RoleAppUI {\r\n    CApp?: typeof CApp;\r\n    CUq?: typeof CUq;\r\n    main?: TypeVPage<CApp>;\r\n    uqs: {[uq:string]: UqUI | (()=>Promise<UqUI>)};\r\n    res?: any;\r\n}\r\n\r\nexport interface AppUI extends RoleAppUI, NavSettings {\r\n    appName: string;        // 格式: owner/appName\r\n    version: string;        // 版本变化，缓存的uqs才会重载\r\n    roles?: {[role:string]: RoleAppUI | (()=>Promise<RoleAppUI>)};\r\n}\r\n\r\nexport class CApp extends Controller {\r\n    private readonly cUqCollection: {[uq:string]: CUq} = {};\r\n    private readonly cImportUqs: {[uq:string]: CUq} = {};\r\n    protected ui:AppUI;\r\n    readonly name: string;\r\n    readonly version: string;\r\n    readonly uqs: UQsMan;\r\n    readonly caption: string; // = 'View Model 版的 Uq App';\r\n    appUnits:any[];\r\n\r\n    constructor(ui:AppUI) {\r\n        super(resLang(ui && ui.res));\r\n        nav.setSettings(ui);\r\n        this.name = ui.appName;\r\n        this.version = ui.version;\r\n        if (this.name === undefined) {\r\n            throw 'appName like \"owner/app\" must be defined in UI';\r\n        }\r\n        this.uqs = new UQsMan(this.name, undefined);\r\n        if (ui.uqs === undefined) ui.uqs = {};\r\n        this.ui = ui;\r\n        this.caption = this.res.caption || 'Tonva';\r\n    }\r\n    \r\n    getImportUq(uqOwner:string, uqName:string):CUq {\r\n        let uq = uqOwner + '/' + uqName;\r\n        let cUq = this.cImportUqs[uq];\r\n        if (cUq !== undefined) return cUq;\r\n        let ui = this.ui && this.ui.uqs && this.ui.uqs[uq];\r\n        let uqId = -1; // unknown\r\n        this.cImportUqs[uq] = cUq = this.getCUq(uq);\r\n        return cUq;\r\n    }\r\n\r\n    protected newCUq(uqData: UqData, uqUI: UqUI) {\r\n        let cUq = new (this.ui.CUq || CUq)(this, uqData, uqUI);\r\n        Object.setPrototypeOf(cUq.x, this.x);\r\n        return cUq;\r\n    }\r\n\r\n    get cUqArr():CUq[] {\r\n        let ret:CUq[] = [];\r\n        for (let i in this.cUqCollection) {\r\n            ret.push(this.cUqCollection[i]);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    getCUq(uq:string):CUq {\r\n        return this.cUqCollection[uq];\r\n    }\r\n\r\n    protected get VAppMain():TypeVPage<CApp> {return (this.ui&&this.ui.main) || VAppMain}\r\n    protected async beforeStart():Promise<boolean> {\r\n        try {\r\n            let retErrors = await this.load();\r\n            //let app = await loadAppUqs(this.appOwner, this.appName);\r\n            // if (isDevelopment === true) {\r\n            // 这段代码原本打算只是在程序员调试方式下使用，实际上，也可以开放给普通用户，production方式下\r\n            let {predefinedUnit} = appInFrame;\r\n            //let {id} = app;\r\n            //this.id = id;\r\n            let {user} = nav;\r\n            if (user !== undefined && user.id > 0) {\r\n                this.appUnits = await centerApi.userAppUnits(this.uqs.id);\r\n                switch (this.appUnits.length) {\r\n                    case 0:\r\n                        this.showUnsupport(predefinedUnit);\r\n                        return false;\r\n                    case 1:\r\n                        let appUnit = this.appUnits[0].id;\r\n                        if (appUnit === undefined || appUnit < 0 || \r\n                            predefinedUnit !== undefined && appUnit != predefinedUnit)\r\n                        {\r\n                            this.showUnsupport(predefinedUnit);\r\n                            return false;\r\n                        }\r\n                        appInFrame.unit = appUnit;\r\n                        break;\r\n                    default:\r\n                        if (predefinedUnit>0 && this.appUnits.find(v => v.id===predefinedUnit) !== undefined) {\r\n                            appInFrame.unit = predefinedUnit;\r\n                            break;\r\n                        }\r\n                        //nav.push(<this.selectUnitPage />)\r\n                        this.openVPage(VUnitSelect);\r\n                        return false;\r\n                }\r\n            }\r\n            if (retErrors !== undefined) {\r\n                this.openVPage(VErrorsPage);\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            this.openVPage(VAppStartError);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private async load(): Promise<string[]> {\r\n        let {appOwner, appName} = this.uqs;\r\n        let {localData} = this.uqs;\r\n        let uqAppData = localData.get();\r\n        if (!uqAppData || uqAppData.version !== this.version) {\r\n            uqAppData = await loadAppUqs(appOwner, appName);\r\n            uqAppData.version = this.version;\r\n            localData.set(uqAppData);\r\n            for (let uq of uqAppData.uqs) uq.newVersion = true;\r\n        }\r\n        let {id, uqs} = uqAppData;\r\n        this.uqs.id = id;\r\n\r\n        let retErrors:string[] = [];\r\n\r\n        let promiseInits: PromiseLike<void>[] = [];\r\n        let promises: PromiseLike<string>[] = [];\r\n        for (let uqData of uqs) {\r\n            let {id, uqOwner, uqName, access} = uqData;\r\n            let uqFullName = uqOwner + '/' + uqName;\r\n            let uqUI = this.ui.uqs[uqFullName] as UqUI || {};\r\n            let cUq = this.newCUq(uqData, uqUI);\r\n            this.cUqCollection[uqFullName] = cUq;\r\n            this.uqs.addUq(cUq.uq);\r\n            promiseInits.push(cUq.init());\r\n        }\r\n        await Promise.all(promiseInits);\r\n\r\n        for (let i in this.cUqCollection) {\r\n            let cUq = this.cUqCollection[i];\r\n            promises.push(cUq.loadEntities());\r\n        }\r\n        let results = await Promise.all(promises);\r\n        for (let result of results)\r\n        {\r\n            let retError = result; // await cUq.loadSchema();\r\n            if (retError !== undefined) {\r\n                retErrors.push(retError);\r\n                continue;\r\n            }\r\n        }\r\n        if (retErrors.length === 0) {\r\n            retErrors.push(...this.uqs.setTuidImportsLocal());\r\n            if (retErrors.length === 0) {\r\n                return;\r\n            }\r\n        }\r\n        return retErrors;\r\n    }\r\n\r\n    protected async internalStart(param:any) {\r\n        if (param !== true) {\r\n            this.clearPrevPages();\r\n        }\r\n        await this.showMainPage();\r\n    }\r\n\r\n    /*\r\n    render(): JSX.Element {\r\n        return this.renderView(this.VAppMain);\r\n    }*/\r\n\r\n    // 如果是独立app，删去显示app之前的页面。\r\n    // 如果非独立app，则不删\r\n    protected clearPrevPages() {\r\n        nav.clear();\r\n    }\r\n\r\n    private showUnsupport(predefinedUnit: number) {\r\n        this.clearPrevPages();\r\n        this.openVPage(VUnsupportedUnit, predefinedUnit);\r\n    }\r\n\r\n    private async showMainPage() {\r\n        // #tv-RwPBwMef-23-sheet-api-108\r\n        let exHash = getExHash();\r\n        if (exHash !== undefined) {\r\n            let parts = exHash.split('-');\r\n            if (parts.length > 3) {\r\n                let action = parts[3];\r\n                // sheet_debug 表示centerUrl是debug方式的\r\n                if (action === 'sheet' || action === 'sheet_debug') {\r\n                    let uqId = Number(parts[4]);\r\n                    let sheetTypeId = Number(parts[5]);\r\n                    let sheetId = Number(parts[6]);\r\n                    let cUq = this.getCUqFromId(uqId);\r\n                    if (cUq === undefined) {\r\n                        alert('unknown uqId: ' + uqId);\r\n                        return;\r\n                    }\r\n                    this.clearPrevPages();\r\n                    await cUq.navSheet(sheetTypeId, sheetId);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        this.openVPage(this.VAppMain);\r\n    }\r\n\r\n    private getCUqFromId(uqId:number): CUq {\r\n        for (let i in this.cUqCollection) {\r\n            let cUq = this.cUqCollection[i];\r\n            if (cUq.uq.id === uqId) return cUq;\r\n        }\r\n        return;\r\n    }\r\n}\r\n","export * from './CApp';\r\n","import * as React from 'react';\r\nimport { Pending } from '../../uq';\r\nimport { Page } from '../../components';\r\nimport { VEntity } from '../CVEntity';\r\nimport { CPending, PendingUI } from './cPending';\r\n\r\nexport class VPendingMain extends VEntity<Pending, PendingUI, CPending> {\r\n    async open(param?:any):Promise<void> {\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    protected view = () => <Page header={this.label}>\r\n        pending\r\n    </Page>;\r\n}\r\n","import { CEntity, EntityUI } from '../CVEntity';\r\nimport { Pending } from '../../uq';\r\nimport { VPendingMain } from './vPendingMain';\r\n\r\nexport interface PendingUI extends EntityUI {\r\n    CPending?: typeof CPending;\r\n    main: typeof VPendingMain,\r\n}\r\n\r\nexport class CPending extends CEntity<Pending, PendingUI> {\r\n    protected async internalStart() {\r\n        await this.openVPage(this.VPendingMain);\r\n    }\r\n\r\n    protected get VPendingMain():typeof VPendingMain {return VPendingMain}\r\n}\r\n","export * from './cPending';\r\nexport * from './vPendingMain';\r\n","import * as React from 'react';\r\nimport { History } from '../../uq';\r\nimport { Page } from '../../components';\r\nimport { VEntity } from '../CVEntity';\r\nimport { CHistory, HistoryUI } from './cHistory';\r\n\r\nexport class VHistoryMain extends VEntity<History, HistoryUI, CHistory> {\r\n    async open(param?:any):Promise<void> {\r\n        this.openPage(this.view);\r\n    }\r\n\r\n    protected view = () => <Page header={this.label}>\r\n        History\r\n    </Page>;\r\n}\r\n","import { CEntity, EntityUI } from '../CVEntity';\r\nimport { History } from '../../uq';\r\nimport { VHistoryMain } from './vHistoryMain';\r\n\r\nexport interface HistoryUI extends EntityUI {\r\n    CHistory?: typeof CHistory;\r\n    main: typeof VHistoryMain,\r\n}\r\n\r\nexport class CHistory extends CEntity<History, HistoryUI> {\r\n    protected async internalStart() {\r\n        await this.openVPage(this.VHistoryMain);\r\n    }\r\n\r\n    protected get VHistoryMain():typeof VHistoryMain {return VHistoryMain}\r\n}\r\n","export * from './cHistory';\r\nexport * from './vHistoryMain';\r\n","import * as React from 'react';\r\nimport { VPage, Page } from '../../components';\r\nimport { jsonStringify } from '../tools';\r\nimport { VForm } from '../form';\r\nimport { VEntity } from '../CVEntity';\r\nimport { CAction, ActionUI } from './cAction';\r\nimport { Action } from '../../uq';\r\n\r\nexport class VActionMain extends VEntity<Action, ActionUI, CAction> {\r\n    protected vForm: VForm;\r\n    protected returns: any;\r\n\r\n    async open(param?:any):Promise<void> {\r\n        this.vForm = this.createForm(this.onSubmit, param);\r\n        this.openPage(this.mainPage);\r\n    }\r\n\r\n    private onSubmit = async () => {\r\n        let values = this.vForm.getValues();\r\n        this.returns = await this.controller.submit(values);\r\n        this.closePage();\r\n        this.openPage(this.resultPage);\r\n    }\r\n\r\n    protected mainPage = () => {\r\n        let {label} = this.controller;\r\n        return <Page header={label}>\r\n            {this.vForm.render('mx-3 my-2')}\r\n        </Page>;\r\n    }\r\n\r\n    protected resultPage = () => {\r\n        let {label} = this.controller;\r\n        return <Page header={label} back=\"close\">\r\n            完成！\r\n            <pre>\r\n                {jsonStringify(this.returns)}\r\n            </pre>\r\n        </Page>;\r\n    }\r\n}\r\n","import { CEntity, EntityUI } from '../CVEntity';\r\nimport { Action } from '../../uq';\r\nimport { VActionMain } from './vActionMain';\r\n\r\nexport interface ActionUI extends EntityUI {\r\n    CAction?: typeof CAction;\r\n    //main: typeof VActionMain,\r\n}\r\n\r\nexport class CAction extends CEntity<Action, ActionUI> {\r\n    protected async internalStart() {\r\n        await this.openVPage(this.VActionMain);\r\n    }\r\n\r\n    protected get VActionMain():typeof VActionMain {return VActionMain}\r\n\r\n    async submit(values:any) {\r\n        return this.entity.submit(values);\r\n    }\r\n\r\n    async submitReturns(values:any) {\r\n        return this.entity.submitReturns(values);\r\n    }\r\n}\r\n","export * from './cAction';\r\nexport * from './vActionMain';\r\n","export * from './mainSubs';\r\nexport * from './model';","\r\nimport {setCenterToken} from './uqApi';\r\nimport {WSChannel} from './wsChannel';\r\n\r\nexport const netToken = {\r\n    set(userId:number, token:string) {\r\n        setCenterToken(userId, token);\r\n        WSChannel.setCenterToken(token);\r\n    },\r\n    clear() {\r\n        setCenterToken(0, undefined);\r\n        WSChannel.setCenterToken(undefined);\r\n    }\r\n};\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport {nav} from './nav';\r\nimport {Page} from './page';\r\nimport { User, env } from '../tool';\r\n\r\nexport abstract class Controller {\r\n    readonly res: any;\r\n    readonly x: any;\r\n    icon: string|JSX.Element;\r\n    label:string;\r\n    readonly isDev:boolean = env.isDevelopment;\r\n    get user():User {return nav.user}\r\n    get isLogined():boolean {\r\n        let {user} = nav;\r\n        if (user === undefined) return false;\r\n        return user.id > 0;\r\n    }\r\n    constructor(res:any) {\r\n        this.res = res || {};\r\n        this.x = this.res.x || {};\r\n    }\r\n\r\n    private receiveHandlerId:number;\r\n    private disposer:()=>void;\r\n\r\n    private dispose() {\r\n        // message listener的清理\r\n        nav.unregisterReceiveHandler(this.receiveHandlerId);\r\n        this.onDispose();\r\n    }\r\n\r\n    protected onDispose() {\r\n    }\r\n\r\n    protected async openVPage<C extends Controller>(vp: new (controller: C)=>VPage<C>, param?:any):Promise<void> {\r\n        await (new vp((this as any) as C)).open(param);\r\n    }\r\n\r\n    protected renderView<C extends Controller>(view: new (controller: C)=>View<C>, param?:any) {\r\n        return (new view((this as any) as C)).render(param);\r\n    }\r\n\r\n    async event(type:string, value:any) {\r\n        await this.onEvent(type, value);\r\n    }\r\n\r\n    protected async onEvent(type:string, value:any) {\r\n    }\r\n\r\n    protected msg(text:string) {\r\n        alert(text);\r\n    }\r\n    protected errorPage(header:string, err:any) {\r\n        this.openPage(<Page header=\"App error!\">\r\n            <pre>\r\n                {typeof err === 'string'? err : err.message}\r\n            </pre>\r\n        </Page>);\r\n    }\r\n\r\n    protected onMessage(message:any):Promise<void> {\r\n        return;\r\n    }\r\n\r\n    private onMessageReceive = async (message:any):Promise<void> => {\r\n        await this.onMessage(message);\r\n    }\r\n\r\n    protected async beforeStart():Promise<boolean> {\r\n        /*\r\n        console.log('this.receiveHandlerId = nav.registerReceiveHandler(this.onMessageReceive);');\r\n        this.receiveHandlerId = nav.registerReceiveHandler(this.onMessageReceive);\r\n        console.log('return true');\r\n        */\r\n        return true;\r\n    }\r\n    protected registerReceiveHandler() {\r\n        this.receiveHandlerId = nav.registerReceiveHandler(this.onMessageReceive);\r\n    }\r\n\r\n    protected abstract internalStart(param?:any, ...params:any[]):Promise<void>;\r\n    async start(param?:any, ...params:any[]):Promise<void> {\r\n        this.disposer = this.dispose.bind(this);\r\n        this.registerReceiveHandler();\r\n        let ret = await this.beforeStart();\r\n        if (ret === false) return;\r\n        await this.internalStart(param, ...params);\r\n    }\r\n\r\n    get isCalling():boolean {return this._resolve_$ !== undefined}\r\n\r\n    private _resolve_$:((value:any) => void)[];\r\n    async call<T>(param?:any, ...params:any[]):Promise<T> {\r\n        if (this._resolve_$ === undefined) this._resolve_$ = [];\r\n        return new Promise<T> (async (resolve, reject) => {\r\n            this._resolve_$.push(resolve);\r\n            await this.start(param, ...params);\r\n        });\r\n    }\r\n\r\n    async vCall<C extends Controller>(vp: new (controller: C)=>VPage<C>, param?:any):Promise<any> {\r\n        if (this._resolve_$ === undefined) this._resolve_$ = [];\r\n        return new Promise<any> (async (resolve, reject) => {\r\n            this._resolve_$.push(resolve);\r\n            await (new vp(this as any)).open(param);\r\n        });\r\n    }\r\n\r\n    returnCall(value:any) {\r\n        if (this._resolve_$ === undefined) return;\r\n        let resolve = this._resolve_$.pop();\r\n        if (resolve === undefined) {\r\n            alert('the Controller call already returned, or not called');\r\n            return;\r\n        }\r\n        resolve(value);\r\n    }\r\n\r\n    openPage(page:JSX.Element) {\r\n        nav.push(page, this.disposer);\r\n        this.disposer = undefined;\r\n    }\r\n\r\n    replacePage(page:JSX.Element) {\r\n        nav.replace(page, this.disposer);\r\n        this.disposer = undefined;\r\n    }\r\n\r\n    backPage() {\r\n        nav.back();\r\n    }\r\n\r\n    closePage(level?:number) {\r\n        nav.pop(level);\r\n    }\r\n\r\n    ceasePage(level?:number) {\r\n        nav.ceaseTop(level);\r\n    }\r\n\r\n    removeCeased() {\r\n        nav.removeCeased();\r\n    }\r\n\r\n    regConfirmClose(confirmClose: ()=>Promise<boolean>) {\r\n        nav.regConfirmClose(confirmClose);\r\n    }\r\n}\r\n\r\n\r\nexport abstract class View<C extends Controller> {\r\n    protected controller: C;\r\n    protected readonly res: any;\r\n    protected readonly x: any;\r\n\r\n    constructor(controller: C) {\r\n        this.controller = controller;\r\n        this.res = controller.res;\r\n        this.x = controller.x;\r\n    }\r\n\r\n    protected get isDev() {return  env.isDevelopment}\r\n\r\n    abstract render(param?:any): JSX.Element;\r\n\r\n    protected renderVm(vm: new (controller: C)=>View<C>, param?:any) {\r\n        return (new vm(this.controller)).render(param);\r\n    }\r\n\r\n    protected async openVPage(vp: new (controller: C)=>VPage<C>, param?:any):Promise<void> {\r\n        await (new vp(this.controller)).open(param);\r\n    }\r\n\r\n    protected async event(type:string, value?:any) {\r\n        /*\r\n        if (this._resolve_$_ !== undefined) {\r\n            await this._resolve_$_({type:type, value:value});\r\n            return;\r\n        }*/\r\n        await this.controller.event(type, value);\r\n    }\r\n\r\n    async vCall<C extends Controller>(vp: new (controller: C)=>VPage<C>, param?:any):Promise<any> {\r\n        return await this.controller.vCall(vp, param);\r\n    }\r\n\r\n    protected returnCall(value:any) {\r\n        this.controller.returnCall(value);\r\n    }\r\n\r\n    protected openPage(view: React.StatelessComponent<any>, param?:any) {\r\n        this.controller.openPage(React.createElement(view, param));\r\n    }\r\n\r\n    protected replacePage(view: React.StatelessComponent<any>, param?:any) {\r\n        this.controller.replacePage(React.createElement(view, param));\r\n    }\r\n\r\n    protected openPageElement(page: JSX.Element) {\r\n        this.controller.openPage(page);\r\n    }\r\n\r\n    protected replacePageElement(page: JSX.Element) {\r\n        this.controller.replacePage(page);\r\n    }\r\n\r\n    protected backPage() {\r\n        this.controller.backPage();\r\n    }\r\n\r\n    protected closePage(level?:number) {\r\n        this.controller.closePage(level);\r\n    }\r\n\r\n    protected ceasePage(level?:number) {\r\n        this.controller.ceasePage(level);\r\n    }\r\n\r\n    protected removeCeased() {\r\n        this.controller.removeCeased();\r\n    }\r\n\r\n    protected regConfirmClose(confirmClose: ()=>Promise<boolean>) {\r\n        this.controller.regConfirmClose(confirmClose);\r\n    }\r\n}\r\n\r\nexport abstract class VPage<C extends Controller> extends View<C> {\r\n    abstract open(param?:any):Promise<void>;\r\n\r\n    render(param?:any):JSX.Element {return null;}\r\n}\r\n\r\nexport type TypeVPage<C extends Controller> = new (controller: C)=>VPage<C>;\r\n\r\n","export * from './schema';\r\nexport * from './uiSchema';\r\nexport * from './toUiSelectItems';","import { UiSelectListItem } from './uiSchema';\r\n\r\nexport function toUiSelectItems(items: string[]):UiSelectListItem[] {\r\n    if (items === undefined) return;\r\n    let ret:UiSelectListItem[] = [];\r\n    for (let item of items) {\r\n        let pos = item.indexOf(':');\r\n        let val:number;\r\n        let title: string;\r\n        if (pos < 0) {\r\n            val = Number(item);\r\n        }\r\n        else {\r\n            val = Number(item.substr(0, pos));\r\n            title = item.substr(pos+1);\r\n        }\r\n        ret.push({value: val, title: title});\r\n    }\r\n    return ret;\r\n}","\r\nexport const mobileRegex = /^[0-9]*$/;\r\nexport const emailRegex = /\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/;\r\n// /^([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\\_|\\.]?)*[a-zA-Z0-9]+\\.[a-zA-Z]{2,3}$/\r\n\r\nexport const EmailFieldRule = (value:any): string|string[] => {\r\n    if (emailRegex.test(value as string) === false) return '电子邮件格式错误';\r\n}\r\n\r\nexport const MobileFieldRule = (value:any): string|string[] => {\r\n    if (emailRegex.test(value as string) === false) return '手机格式错误';\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nexport interface DropdownAction {\r\n    icon?: string;\r\n    caption?: string;\r\n    action?: () => void;\r\n}\r\n\r\nexport interface DropdownActionsProps {\r\n    icon?: string;\r\n    actions: DropdownAction[];\r\n    isRight?: boolean;\r\n}\r\n\r\nexport interface DropdownActionsState {\r\n    dropdownOpen: boolean;\r\n}\r\n\r\nexport class DropdownActions extends React.Component<DropdownActionsProps, DropdownActionsState> {\r\n    private menu: HTMLDivElement;\r\n    private button: HTMLElement;\r\n    constructor(props:DropdownActionsProps) {\r\n        super(props);\r\n        this.state = {\r\n            dropdownOpen: false\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        document.addEventListener('click', this.handleDocumentClick);\r\n        document.addEventListener('touchstart', this.handleDocumentClick);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.removeEventListener('click', this.handleDocumentClick);\r\n        document.removeEventListener('touchstart', this.handleDocumentClick);\r\n    }\r\n\r\n    private handleDocumentClick = (evt:any) => {\r\n        if (this.state.dropdownOpen === false) return;\r\n        if (this.button && this.button.contains(evt.target)) return;\r\n        if (!this.menu) return;\r\n        //if (!this.menu.contains(evt.target)) \r\n        this.toggle();\r\n    }\r\n\r\n    private toggle = () => {\r\n        this.setState({\r\n            dropdownOpen: !this.state.dropdownOpen\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let {icon, actions, isRight} = this.props;\r\n        if (isRight === undefined) isRight = true;\r\n        let hasIcon = actions.some(v => v.icon!==undefined);\r\n        let {dropdownOpen} = this.state;\r\n        //isOpen={this.state.dropdownOpen} toggle={this.toggle}\r\n        return <div className=\"dropdown\">\r\n            <button ref={v=>this.button=v} className=\"cursor-pointer dropdown-toggle btn btn-sm\"\r\n                data-toggle=\"dropdown\"\r\n                aria-expanded={dropdownOpen}\r\n                onClick={this.toggle}>\r\n                <i className={classNames('fa', 'fa-'+(icon||'ellipsis-v'))} />\r\n            </button>\r\n            <div ref={v => this.menu=v} className={classNames({\"dropdown-menu\":true, \"dropdown-menu-right\":isRight, \"show\":dropdownOpen})}>\r\n                {\r\n                    actions.map((v,index) => {\r\n                        let {icon, caption, action} = v;\r\n                        if (icon === undefined && caption === undefined) \r\n                            return <div className=\"dropdown-divider\" />;\r\n                        let i:any;\r\n                        if (hasIcon === true) {\r\n                            if (icon !== undefined) icon = 'fa-' + icon;\r\n                            i = <><i className={classNames('fa', icon, 'fa-fw')} aria-hidden={true}></i>&nbsp; </>;\r\n                        }\r\n                        if (action === undefined) \r\n                            return <h6 className=\"dropdown-header\">{i} {caption}</h6>;\r\n                        return <a className=\"dropdown-item\" key={index} href=\"#\" onClick={(evt:React.MouseEvent<HTMLAnchorElement>)=>{ evt.preventDefault();action()}}>{i} {caption}</a>\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\n/*\r\nexport class DropdownActions extends React.Component<DropdownActionsProps, DropdownActionsState> {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dropdownOpen: false\r\n        };\r\n    }\r\n    private toggle = () => {\r\n        this.setState({\r\n            dropdownOpen: !this.state.dropdownOpen\r\n        });\r\n    }\r\n    render() {\r\n        let {icon, actions, isRight} = this.props;\r\n        if (isRight === undefined) isRight = true;\r\n        let hasIcon = actions.some(v => v.icon!==undefined);\r\n        return <UncontrolledButtonDropdown isOpen={this.state.dropdownOpen} toggle={this.toggle}>\r\n            <DropdownToggle caret={true} size=\"sm\" className=\"cursor-pointer\">\r\n                <i className={classNames('fa', 'fa-'+(icon||'ellipsis-v'))} />\r\n            </DropdownToggle>\r\n            <DropdownMenu right={isRight}>\r\n                {actions.map((v,index) => {\r\n                    let {icon, caption, action} = v;\r\n                    if (icon === undefined && caption === undefined) \r\n                        return <div className=\"dropdown-divider\" />;\r\n                    let i;\r\n                    if (hasIcon === true) {\r\n                        if (icon !== undefined) icon = 'fa-' + icon;\r\n                        i = <><i className={classNames('fa', icon, 'fa-fw')} aria-hidden={true}></i>&nbsp; </>;\r\n                    }\r\n                    if (action === undefined) \r\n                        return <h6 className=\"dropdown-header\">{i} {caption}</h6>;\r\n                    return <DropdownItem key={index} onClick={action}>{i} {caption}</DropdownItem>\r\n                })}\r\n            </DropdownMenu>\r\n        </UncontrolledButtonDropdown>\r\n    }\r\n}\r\n*/","import * as React from 'react';\r\n\r\nexport interface EasyDateProps {\r\n    date: Date | number;\r\n}\r\n\r\nfunction renderDate(vDate:Date|number, withTime:boolean) {\r\n    if (!vDate) return null;\r\n    let date: Date;\r\n    switch (typeof vDate) {\r\n        default: date = vDate as Date; break;\r\n        case 'string': date = new Date(vDate); break;\r\n        case 'number': date = new Date((vDate as number)*1000); break;\r\n    }\r\n\r\n    let now = new Date();\r\n    let tick:number, nDate:number, _date:number, month:number, year:number, hm:string, nowYear:number;\r\n    let d = date;\r\n    tick = now.getTime() - d.getTime();\r\n    let hour=d.getHours(), minute=d.getMinutes();\r\n    nDate=now.getDate();\r\n    _date=d.getDate();\r\n    month=d.getMonth()+1;\r\n    year=d.getFullYear();\r\n    nowYear = now.getFullYear();\r\n    hm = withTime === true? ' ' + hour + ((minute<10?':0':':') + minute) : '';\r\n\r\n    if (tick < -24*3600*1000) {\r\n        if (year === nowYear)\r\n            return month+'月'+_date+'日' + hm;\r\n        else\r\n            return year+'年'+month+'月'+_date+'日' + hm;\r\n    }\r\n    if (tick < 24*3600*1000) {\r\n        return _date!==nDate? \r\n            (tick < 0? '明天 ' : '昨天 ') + hm \r\n            : withTime===true? hm : '今天';\r\n    }\r\n    if (year === nowYear) {\r\n        return month+'月'+_date+'日';\r\n    }\r\n    return year+'年'+month+'月'+_date+'日';\r\n}\r\n\r\n\r\nexport class EasyDate extends React.Component<EasyDateProps> {\r\n    render() {\r\n        return renderDate(this.props.date, false);\r\n    }\r\n}\r\n\r\nexport class EasyTime extends React.Component<EasyDateProps> {\r\n    render() {\r\n        return renderDate(this.props.date, true);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Image } from '.';\r\n\r\nexport interface MediaProps {\r\n    icon: string;\r\n    main: string|JSX.Element;\r\n    discription?: string | JSX.Element;\r\n    px?: number;\r\n    py?: number;\r\n}\r\n\r\nexport class Media extends React.Component<MediaProps> {\r\n    render() {\r\n        let {icon, main, discription, px, py} = this.props;\r\n        let disp:any;\r\n        if (typeof discription === 'string')\r\n            disp = <div>{discription}</div>;\r\n        else\r\n            disp = discription;\r\n        let cn = classNames(\r\n            'media', \r\n            px===undefined? 'px-0':'px-'+px, \r\n            py===undefined? 'py-2':'py-'+py);\r\n        return <div className={cn}>\r\n            <Image className=\"mr-3 w-4c h-4c\" src={icon} />\r\n            <div className=\"media-body\">\r\n                <h5 className=\"mt-0\">{main}</h5>\r\n                {disp}\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\n\r\nexport interface SearchBoxProps {\r\n    className?: string;\r\n    label?: string;\r\n    initKey?: string;\r\n    placeholder?: string;\r\n    buttonText?: string;\r\n    maxLength?: number;\r\n    size?: 'sm' | 'md' | 'lg';\r\n    inputClassName?: string;\r\n    onSearch: (key:string)=>Promise<void>;\r\n    onFocus?: ()=>void;\r\n    allowEmptySearch?: boolean;\r\n}\r\n\r\n/*\r\nexport interface SearchBoxState {\r\n    disabled: boolean;\r\n}*/\r\n\r\nexport class SearchBox extends React.Component<SearchBoxProps> { //}, SearchBoxState> {\r\n    private input: HTMLInputElement;\r\n    private key: string = null;\r\n    @observable private disabled: boolean;\r\n\r\n    private onChange = (evt: React.ChangeEvent<any>) => {\r\n        this.key = evt.target.value;\r\n        if (this.key !== undefined) {\r\n            this.key = this.key.trim();\r\n            if (this.key === '') this.key = undefined;\r\n        }\r\n        if (this.props.allowEmptySearch !== true) {\r\n            this.disabled = !this.key;\r\n        }\r\n    }\r\n    private onSubmit = async (evt: React.FormEvent<any>) => {\r\n        evt.preventDefault();\r\n        if (this.key === null) this.key = this.props.initKey || '';\r\n        if (this.props.allowEmptySearch !== true) {\r\n            if (!this.key) return;\r\n            if (this.input) this.input.disabled = true;\r\n        }\r\n        await this.props.onSearch(this.key);\r\n        if (this.input) this.input.disabled = false;\r\n    }\r\n    clear() {\r\n        if (this.input) this.input.value = '';\r\n    }\r\n    render() {\r\n        let {className, inputClassName, onFocus,\r\n            label, placeholder, buttonText, maxLength, size} = this.props;\r\n        let inputSize:string;\r\n        switch (size) {\r\n            default:\r\n            case 'sm': inputSize = 'input-group-sm'; break;\r\n            case 'md': inputSize = 'input-group-md'; break;\r\n            case 'lg': inputSize = 'input-group-lg'; break;\r\n        }\r\n        let lab:any;\r\n        if (label !== undefined) lab = <label className=\"input-group-addon\">{label}</label>;\r\n        return <form className={className} onSubmit={this.onSubmit} >\r\n            <div className={classNames(\"input-group\", inputSize)}>\r\n                {lab}\r\n                <input ref={v=>this.input=v} onChange={this.onChange}\r\n                    type=\"text\"\r\n                    name=\"key\"\r\n                    onFocus={onFocus}\r\n                    className={classNames('form-control', inputClassName || 'border-primary')}\r\n                    placeholder={placeholder}\r\n                    defaultValue={this.props.initKey}\r\n                    maxLength={maxLength} />\r\n                <div className=\"input-group-append\">\r\n                    <button className=\"btn btn-primary\"\r\n                        type=\"submit\"\r\n                        disabled={this.disabled}>\r\n                        <i className='fa fa-search' />\r\n                        <i className=\"fa\"/>\r\n                        {buttonText}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </form>;\r\n    }\r\n}\r\n","export * from './app';\r\nexport * from './startApp';\r\nexport * from './cUq';\r\nexport * from './action';\r\nexport * from './tuid';\r\nexport * from './sheet';\r\nexport * from './query';\r\nexport * from './map';\r\nexport * from './history';\r\nexport * from './pending';\r\nexport * from './form/viewModel';\r\nexport * from './form';\r\nexport * from './formUI';\r\nexport * from './ControllerUq';\r\nexport * from './CVEntity';\r\nexport * from './link';\r\nexport * from './icons';\r\n","import * as React from 'react';\r\nimport { Render } from './render';\r\n\r\nexport interface MainSubs<M, S> {\r\n    main: M;\r\n    subs: S[];\r\n}\r\n\r\nexport abstract class ViewBase<T> {\r\n    model: T;\r\n    abstract render(): JSX.Element;\r\n}\r\n\r\nexport class ViewMainSubs<M, S> extends ViewBase<MainSubs<M, S>> {\r\n    protected main: Render<M>;\r\n    protected sub: Render<S>;\r\n    constructor(main: Render<M>, sub: Render<S>) {\r\n        super();\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    protected subsContainer(subViews: JSX.Element[]): JSX.Element {\r\n        return <div>{subViews}</div>\r\n    }\r\n\r\n    protected renderSubItems(): JSX.Element[] {\r\n        let { subs } = this.model;\r\n        if (!subs) return null;\r\n        let subViews: JSX.Element[] = subs.map((v, index) => {\r\n            return <this.sub key={index} {...v} />;\r\n        });\r\n        return subViews;\r\n    }\r\n\r\n    protected renderSubs = (): JSX.Element => {\r\n        return this.subsContainer(this.renderSubItems());\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        let { main } = this.model;\r\n        return <>\r\n            <this.main {...main} />\r\n            <this.renderSubs />\r\n        </>;\r\n    }\r\n}\r\n\r\nexport class ViewListMainSubs<M, S> extends ViewBase<MainSubs<M, S>[]> {\r\n    private row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>;\r\n    private main: Render<M>;\r\n    private sub: Render<S>;\r\n    constructor(\r\n        row: new (main: Render<M>, sub: Render<S>) => ViewMainSubs<M, S>,\r\n        main: Render<M>,\r\n        sub: Render<S>) {\r\n        super();\r\n        this.row = row;\r\n        this.main = main;\r\n        this.sub = sub;\r\n    }\r\n    render(): JSX.Element {\r\n        return <>\r\n            {this.model.map((v, index) => {\r\n                let view = new this.row(this.main, this.sub);\r\n                view.model = v;\r\n                return <React.Fragment key={index}>{view.render()}</React.Fragment>;\r\n            })}\r\n        </>;\r\n    }\r\n}\r\n","import _ from 'lodash';\r\nimport { Context } from '../context';\r\nimport { FormRes } from '../formRes';\r\n\r\nexport abstract class Rule {\r\n    abstract check(defy:string[], value:any):void;\r\n}\r\n\r\nexport type ContextRule = (context:Context)=>{[target:string]:string[]|string} | string[] | string;\r\nexport type FieldRule = (value:any) => string[] | string;\r\n\r\nexport class RuleCustom extends Rule {\r\n    private func: FieldRule;\r\n    constructor(func: FieldRule) {\r\n        super();\r\n        this.func = func;\r\n    }\r\n    check(defy:string[], value:any) {\r\n        let ret = this.func(value);\r\n        if (ret === undefined) return;\r\n        switch (typeof ret) {\r\n            case 'undefined': return;\r\n            case 'string': defy.push(ret as string); return;\r\n            default: defy.push(...ret); return;\r\n        }        \r\n    }\r\n}\r\n\r\nexport abstract class RulePredefined extends Rule {\r\n    protected res: FormRes;\r\n    constructor(res: FormRes) {\r\n        super();\r\n        this.res = res;\r\n    }\r\n}\r\n\r\nexport class RuleRequired extends RulePredefined {\r\n    check(defy:string[], value:any) {\r\n        switch (typeof value) {\r\n            default:\r\n            case 'boolean': return;\r\n            case 'object':\r\n                if (value !== null) return;\r\n                break;\r\n            case 'string':\r\n                if ((value as string).trim().length > 0) return;\r\n                break;\r\n            case 'number':\r\n                if ((value as number) !== NaN) return;\r\n                break;\r\n            case 'undefined':\r\n                break;\r\n        }\r\n        defy.push(this.res.required);\r\n    }\r\n}\r\n\r\nexport class RuleNum extends RulePredefined {\r\n    private minMsg: _.TemplateExecutor;\r\n    private maxMsg: _.TemplateExecutor;\r\n    protected min: number;\r\n    protected max: number\r\n    constructor(res: FormRes, min?: number, max?: number) {\r\n        super(res);\r\n        this.minMsg = _.template(res.min);\r\n        this.maxMsg = _.template(res.max);\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    check(defy:string[], value:any) {\r\n        if (value === undefined || value === null) return;\r\n        let n = Number(value);\r\n        if (n === NaN) {\r\n            defy.push(this.res.number);\r\n        }\r\n        else {\r\n            this.checkMore(defy, n);\r\n        }\r\n    }\r\n\r\n    protected checkMore(defy:string[], value: number) {\r\n        if (this.min !== undefined && Number(value) < this.min) {\r\n            defy.push(this.minMsg({min:this.min}));\r\n        }\r\n        if (this.max !== undefined && Number(value) > this.max) {\r\n            defy.push(this.maxMsg({max:this.max}));\r\n        }\r\n    }\r\n}\r\n\r\nexport class RuleInt extends RuleNum {\r\n    protected checkMore(defy:string[], n: number) {\r\n        super.checkMore(defy, n);\r\n        if (Number.isInteger(n) === false) {\r\n            defy.push(this.res.integer);\r\n        }\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { UiItem, ChangingHandler, ChangedHandler } from '../../schema';\r\nimport { FieldProps } from '../field';\r\nimport { Context } from '../context';\r\nimport { ItemSchema } from '../../schema';\r\nimport { Rule, RuleRequired, RuleCustom, FieldRule } from '../rules';\r\nimport { computed, observable, reaction } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport abstract class Widget {\r\n    name: string;\r\n    protected context: Context;\r\n    protected fieldProps:FieldProps;\r\n    protected children: React.ReactNode;\r\n    protected itemSchema: ItemSchema;\r\n    protected ui: UiItem;\r\n    protected defaultValue: any;\r\n    protected value: any;\r\n    protected rules: Rule[];\r\n    @observable errors: string[] = [];\r\n    @observable protected contextErrors: string[] = [];\r\n    @computed protected get hasError():boolean {return (this.errors.length + this.contextErrors.length)>0}\r\n    protected readOnly:boolean;\r\n    protected disabled:boolean;\r\n    @observable visible:boolean;\r\n\r\n    constructor(context:Context, itemSchema:ItemSchema, fieldProps:FieldProps, children: React.ReactNode) {\r\n        this.context = context;\r\n        let {name} = itemSchema;\r\n        this.name = name;\r\n        this.itemSchema = itemSchema;\r\n        this.fieldProps = fieldProps;\r\n        this.children = children;\r\n        this.ui = context.getUiItem(name);\r\n        if (this.ui === undefined) {\r\n            this.readOnly = false;\r\n            this.disabled = false;\r\n            this.visible = true;\r\n        }\r\n        else {\r\n            let {readOnly, disabled, visible} = this.ui;\r\n            this.readOnly = (readOnly === true);\r\n            this.disabled = (disabled === true);\r\n            this.visible = !(visible === false);            \r\n        }\r\n        this.value = this.defaultValue =  context.getValue(name); //defaultValue;\r\n        this.init();\r\n    }\r\n\r\n    protected init() {\r\n        this.rules = [];\r\n        if (this.itemSchema.required === true) {\r\n            this.rules.push(new RuleRequired(this.context.form.res));\r\n        }\r\n        this.buildRules();\r\n        if (this.ui === undefined) return;\r\n        let {rules} = this.ui;\r\n        if (rules === undefined) return;\r\n        if (Array.isArray(rules) === false) {\r\n            this.rules.push(new RuleCustom(rules as FieldRule));\r\n            return;\r\n        }\r\n        for (let rule of rules as FieldRule[]) {\r\n            this.rules.push(new RuleCustom(rule));\r\n        }\r\n    }\r\n\r\n    protected buildRules() {\r\n    }\r\n\r\n    checkRules() {\r\n        let defy:string[] = [];\r\n        for (let r of this.rules) r.check(defy, this.value);\r\n        if (defy.length === 0) {\r\n            this.context.removeErrorWidget(this);\r\n        }\r\n        else {\r\n            this.context.addErrorWidget(this);\r\n            this.errors.push(...defy);\r\n        }\r\n    }\r\n\r\n    @computed get isOk() {\r\n        return this.errors.length ===0;\r\n    }\r\n\r\n    setError(err:string | string[]) {\r\n        if (err === undefined) return;\r\n        if (typeof err === 'string') this.errors.push(err);\r\n        else this.errors.push(...err);\r\n    }\r\n\r\n    setContextError(err:string | string[]) {\r\n        if (err === undefined) return;\r\n        if (typeof err === 'string') this.contextErrors.push(err);\r\n        else this.contextErrors.push(...err);\r\n    }\r\n\r\n    clearError() {\r\n        this.errors.splice(0);\r\n    }\r\n\r\n    clearContextError() {\r\n        this.contextErrors.splice(0);\r\n    }\r\n\r\n    protected parse(value:any):any {return value}\r\n\r\n    protected setElementValue(value:any) {}\r\n    protected setDataValue(value:any) {\r\n        if (this.isChanging === true) return;\r\n        this.context.initData[this.name] = this.value = this.parse(value);\r\n    }\r\n\r\n    setValue(value:any) {\r\n        if (this.isChanging === true) return;\r\n        //this.setDataValue(value);\r\n        //this.setElementValue(value);\r\n        this.changeValue(value, false);\r\n    }\r\n\r\n    getValue() {\r\n        return this.context.getValue(this.name);\r\n    }\r\n\r\n    getReadOnly():boolean {return this.readOnly}\r\n    getDisabled():boolean {return this.disabled}\r\n    getVisible():boolean {return this.visible}\r\n    setReadOnly(value:boolean) {this.readOnly = value}\r\n    setDisabled(value:boolean) {this.disabled = value}\r\n    setVisible(value:boolean) {this.visible = value}\r\n\r\n    private isChanging: boolean;\r\n    protected onInputChange = (evt: React.ChangeEvent<any>) => {\r\n        this.changeValue(evt.target.value, true);\r\n    }\r\n\r\n    protected changeValue(newValue: any, fromElement: boolean) {\r\n        let prev = this.value;\r\n        let onChanging: ChangingHandler;\r\n        let onChanged: ChangedHandler;\r\n        if (this.ui !== undefined) {\r\n            onChanging = this.ui.onChanging;\r\n            onChanged = this.ui.onChanged;\r\n        }\r\n        let allowChange = true;\r\n        if (onChanging !== undefined) {\r\n            this.isChanging = true;\r\n            allowChange = onChanging(this.context, this.value, prev);\r\n            this.isChanging = false;\r\n        }\r\n        if (allowChange === true) {\r\n            this.setDataValue(newValue);\r\n            if (fromElement !== true) this.setElementValue(newValue);\r\n            if (onChanged !== undefined) {\r\n                this.isChanging = true;\r\n                onChanged(this.context, this.value, prev);\r\n                this.isChanging = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected get className():string {\r\n        let fieldClass:string;\r\n        if (this.context.inNode === false) fieldClass = 'form-control';\r\n        return classNames(fieldClass, this.context.form.FieldClass, this.ui && this.ui.className);\r\n    }\r\n\r\n    protected abstract render():JSX.Element;\r\n\r\n    protected renderBody():JSX.Element {\r\n        let elDiscription;\r\n        if (this.hasError === false && this.ui) {\r\n            let {discription, discriptionClassName} = this.ui;\r\n            if (discriptionClassName === undefined) discriptionClassName = 'small text-muted';\r\n            elDiscription = <span className={discriptionClassName}>\r\n                {discription}\r\n            </span>;\r\n        }\r\n        return <>\r\n            {this.render()}\r\n            {elDiscription}\r\n        </>;\r\n    }\r\n\r\n    container = observer(():JSX.Element => {\r\n        if (this.visible === false) return null;\r\n        let {form, inNode} = this.context;\r\n        if (inNode === true) return this.render();\r\n        let label:any = this.label;\r\n        if (this.itemSchema.required === true && form.props.requiredFlag !== false) {\r\n            if (label !== null) label = <>{label}&nbsp;<span className=\"text-danger\">*</span></>;\r\n        }\r\n        return form.FieldContainer(label, this.renderBody());\r\n    })\r\n\r\n    protected get label():string {\r\n        let label:any;\r\n        if (this.ui === undefined) {\r\n            label = this.name;\r\n        }\r\n        else {\r\n            let uiLabel = this.ui.label;\r\n            if (uiLabel === null) label = null;\r\n            else label = uiLabel || this.name;\r\n        }\r\n        return label;\r\n    }\r\n\r\n    protected renderTemplet():JSX.Element | undefined {\r\n        if (this.children !== undefined) {\r\n            return <>{this.children}</>;\r\n        }\r\n        if (this.ui === undefined) return undefined;\r\n        let {Templet} = this.ui;\r\n        if (typeof Templet === 'function') return Templet(this.value);\r\n        return Templet;\r\n    }\r\n\r\n    protected renderErrors() {\r\n        let errorList:string[] = [...this.errors, ...this.contextErrors];\r\n        if (errorList.length === 0) return null;\r\n        let {inNode} = this.context;\r\n        let tag = inNode === true? 'span' : 'div';\r\n        return errorList.map(err => React.createElement(tag, \r\n            {\r\n                key: err, \r\n                className: 'text-danger d-inline-block my-2 ml-3'\r\n            },\r\n            <><i className=\"fa fa-exclamation-circle\" /> &nbsp;{err}</>\r\n        ));\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Widget } from './widget';\r\nimport { UiTextItem, StringSchema } from '../../schema';\r\n\r\nexport class TextWidget extends Widget {\r\n    protected inputType = 'text';\r\n    protected ui: UiTextItem;\r\n    protected input: HTMLInputElement;\r\n\r\n    protected setElementValue(value:any) {\r\n        if (this.input === null) return;\r\n        this.input.value = value;\r\n    }\r\n    protected get placeholder() {return (this.ui && this.ui.placeholder) || this.name}\r\n    protected onKeyDown = async (evt:React.KeyboardEvent<HTMLInputElement>) => {\r\n        this.internalOnKeyDown(evt);\r\n        if (evt.keyCode !== 13) return;\r\n        let {onEnter} = this.context.form.props;\r\n        if (onEnter === undefined) return;\r\n\r\n        this.changeValue(evt.currentTarget.value, true);\r\n\r\n        //this.checkRules();\r\n        //this.context.checkContextRules();\r\n        this.input.blur();\r\n\r\n        let ret = await onEnter(this.name, this.context);\r\n        if (ret !== undefined) {\r\n            this.context.setError(this.name, ret);\r\n        }\r\n    }\r\n\r\n    protected internalOnKeyDown(evt:React.KeyboardEvent<HTMLInputElement>) {\r\n    }\r\n\r\n    protected onBlur(evt: React.FocusEvent<any>) {\r\n        this.onInputChange(evt);\r\n        this.checkRules();\r\n        this.context.checkContextRules();\r\n    }\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        this.clearError();\r\n        this.context.removeErrorWidget(this);\r\n        this.context.clearErrors();\r\n    }\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    setReadOnly(value:boolean) {\r\n        if (this.input === null) return;\r\n        this.input.readOnly = this.readOnly = value;\r\n    }\r\n    setDisabled(value:boolean) {\r\n        if (this.input === null) return;\r\n        this.input.disabled = this.disabled = value;\r\n    }\r\n\r\n    render() {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        return <><input ref={input=>this.input = input}\r\n            className={classNames(this.className, cn)}\r\n            type={this.inputType}\r\n            defaultValue={this.value}\r\n            onChange={(evt: React.ChangeEvent<any>) => this.onChange(evt)}\r\n            placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown = {this.onKeyDown}\r\n            onFocus = {(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={(this.itemSchema as StringSchema).maxLength} />\r\n            {this.renderErrors()}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Widget } from './widget';\r\nimport { UiTextAreaItem } from '../../schema';\r\nimport { StringSchema } from '../../schema';\r\n\r\nexport class TextAreaWidget extends Widget {\r\n    protected itemSchema: StringSchema;\r\n    protected input: HTMLTextAreaElement;\r\n    protected ui: UiTextAreaItem;\r\n\r\n    protected setElementValue(value:any) {this.input.value = value}\r\n    protected onInputChange = (evt: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n        this.setValue(evt.currentTarget.value);\r\n    }\r\n\r\n    setReadOnly(value:boolean) {this.input.readOnly = this.readOnly = value}\r\n    setDisabled(value:boolean) {this.input.disabled = this.disabled = value}\r\n\r\n    render() {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn = {};\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        return <textarea ref={(input) => this.input=input} \r\n            className={classNames(this.className, cn)}\r\n            rows={this.ui && this.ui.rows}\r\n            maxLength={this.itemSchema.maxLength}\r\n            defaultValue={this.defaultValue} onChange={this.onInputChange} />\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { TextWidget } from './textWidget';\r\n\r\nexport class PasswordWidget extends TextWidget {\r\n    protected inputType = 'password';\r\n}\r\n\r\nexport class UrlWidget extends TextWidget {\r\n    protected inputType = 'url';\r\n}\r\n\r\nexport class EmailWidget extends TextWidget {\r\n    protected inputType = 'email';\r\n}\r\n","import * as React from 'react';\r\nimport { TextWidget } from './textWidget';\r\nimport { RuleNum, RuleInt } from '../rules';\r\nimport { NumBaseSchema } from '../../schema';\r\n\r\nexport class NumberWidget extends TextWidget {\r\n    protected inputType = 'number';\r\n    protected itemSchema: NumBaseSchema;\r\n\r\n    protected buildRules() {\r\n        super.buildRules();\r\n        let res = this.context.form.res;\r\n        let {min, max} = this.itemSchema;\r\n        this.rules.push(\r\n            this.itemSchema.type === 'integer'?\r\n                new RuleNum(res, min, max) :\r\n                new RuleInt(res, min, max)\r\n        );\r\n        /*\r\n        if (this.itemSchema.type === 'integer') {\r\n            this.rules.push(new RuleInt);\r\n        }\r\n        let {min, max} = this.itemSchema;\r\n        if (min !== undefined) this.rules.push(new RuleMin(min));\r\n        if (max !== undefined) this.rules.push(new RuleMax(max));\r\n        */\r\n    }\r\n\r\n    protected parse(value:any):any {\r\n        if (value === undefined || value === null) return;\r\n        return Number(value);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { NumberWidget } from './numberWidget';\r\n\r\nexport class UpdownWidget extends NumberWidget {\r\n    protected inputType = 'number';\r\n\r\n    protected isValidKey(key:number):boolean {\r\n        return key===46 || key===8 || key===37 || key===39\r\n            || key>=48 && key<=57\r\n            || key>=96 && key<=105\r\n            || key===109 || key===189;\r\n    }\r\n    \r\n    protected internalOnKeyDown(evt:React.KeyboardEvent<HTMLInputElement>) {\r\n        let key = evt.keyCode;\r\n        event.returnValue = this.isValidKey(key);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { TextWidget } from './textWidget';\r\n\r\nexport class DateWidget extends TextWidget {\r\n    protected inputType = 'date';\r\n}\r\n\r\nexport class DateTimeWidget extends TextWidget {\r\n    protected inputType = 'datetime';\r\n}\r\n\r\nexport class TimeWidget extends TextWidget {\r\n    protected inputType = 'time';\r\n}\r\n\r\nexport class MonthWidget extends TextWidget {\r\n    protected inputType = 'month';\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Widget } from './widget';\r\nimport { UiCheckItem } from '../../schema';\r\n\r\nexport class CheckBoxWidget extends Widget {\r\n    protected input: HTMLInputElement;\r\n    protected ui: UiCheckItem;\r\n    protected trueValue: any;\r\n    protected falseValue: any;\r\n\r\n    protected init() {\r\n        super.init();\r\n        if (this.ui !== undefined) {\r\n            let {trueValue, falseValue} = this.ui;\r\n            if (trueValue === undefined) this.trueValue = true;\r\n            else this.trueValue = trueValue;\r\n            if (falseValue === undefined) this.falseValue = false;\r\n            else this.falseValue = falseValue;\r\n        }\r\n        else {\r\n            this.trueValue = true;\r\n            this.falseValue = false;\r\n        }\r\n    }\r\n    protected setElementValue(value:any) {\r\n        this.input.checked = value === this.trueValue;\r\n    }\r\n    setReadOnly(value:boolean) {this.input.readOnly = this.readOnly = value}\r\n    setDisabled(value:boolean) {this.input.disabled = this.disabled = value}\r\n\r\n    protected onInputChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setDataValue(evt.target.checked === true? this.trueValue : this.falseValue);\r\n    }\r\n\r\n    protected onClick = () => {\r\n        this.context.clearErrors();\r\n    }\r\n\r\n    render() {\r\n        let cn = classNames(this.className, 'form-check-inline p-0');\r\n        let input = <input\r\n            ref={(input)=>this.input = input}\r\n            className={'align-self-center'}\r\n            type=\"checkbox\"\r\n            defaultChecked={this.defaultValue} \r\n            onChange={this.onInputChange}\r\n            onClick={this.onClick} />;\r\n        if (this.context.inNode === true) {\r\n            return <label className={cn}>\r\n                {input} {(this.ui&&this.ui.label) || this.name}\r\n            </label>\r\n        }\r\n        else {\r\n            return <div className={cn}>\r\n                <label className=\"w-100 h-100 mb-0 d-flex justify-content-center\">{input}</label>\r\n            </div>;\r\n        }\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { Widget } from './widget';\r\nimport { UiSelect } from '../../schema';\r\n\r\nexport class SelectWidget extends Widget {\r\n    protected select: HTMLSelectElement;\r\n    protected ui: UiSelect;\r\n    @observable protected readOnly: boolean;\r\n\r\n    protected setElementValue(value:any) {this.select.value = value}\r\n    protected onInputChange = (evt:React.ChangeEvent<HTMLSelectElement>) => {\r\n        this.setDataValue(evt.target.value);\r\n    }\r\n\r\n    setReadOnly(value:boolean) {this.select.disabled = this.readOnly = !value}\r\n    setDisabled(value:boolean) {this.select.disabled = this.disabled = value}\r\n\r\n    render() {\r\n        if (this.readOnly === true) {\r\n            let option = this.ui.list.find(v => v.value === this.value);\r\n            let title = (option === undefined)? '(???)' : option.title;\r\n            return <span className=\"form-control w-min-6c\">{title}</span>;\r\n        }\r\n        return <select\r\n            ref={(select)=>this.select = select}\r\n            className={classNames(this.className, 'form-control')}\r\n            defaultValue={this.defaultValue} \r\n            onChange={this.onInputChange}>\r\n            {this.ui.list.map((v,index) => {\r\n                let {title, value} = v;\r\n                let cn:string;\r\n                //if (value === undefined || value === null) cn = 'text-light small';\r\n                //else cn = 'text-danger';\r\n                return <option className={cn} key={index} value={value}>{title || value}</option>\r\n            })}\r\n        </select>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { TextWidget } from './textWidget';\r\nimport { Widget } from './widget';\r\nimport { UiRadio } from '../../schema';\r\nimport { RowContext } from '../context';\r\n\r\n\r\nconst radioStyle:React.CSSProperties = {height: 'auto'};\r\n\r\nexport class RadioWidget extends Widget {\r\n    protected inputs: {[index:number]: HTMLInputElement} = {};\r\n    protected ui: UiRadio;\r\n\r\n    protected setElementValue(value:any) {\r\n        for (let i in this.inputs) {\r\n            let input = this.inputs[i];\r\n            input.checked = value === input.value;\r\n        }\r\n    }\r\n    setReadOnly(value:boolean) {\r\n        this.readOnly = value;\r\n        for (let i in this.inputs) this.inputs[i].readOnly = value;\r\n    }\r\n    setDisabled(value:boolean) {\r\n        this.disabled = value;\r\n        for (let i in this.inputs) this.inputs[i].disabled = value\r\n    }\r\n\r\n    /*\r\n    protected onInputChange = (evt: React.ChangeEvent<any>) => {\r\n        this.changeValue(evt.target.value, true);\r\n    }\r\n    */\r\n\r\n    render() {\r\n        let {defaultValue, list} = this.ui;\r\n        let {isRow, inNode} = this.context;\r\n        let rowKey:number;\r\n        if (isRow === true) {\r\n            rowKey = (this.context as RowContext).rowKey;\r\n        }\r\n        let cn = classNames(this.className, 'py-0');\r\n        return <span className={cn} style={radioStyle}>\r\n                {list.map((v,index) => {\r\n                    let {value, title} = v;\r\n                    let name = this.name;\r\n                    if (rowKey !== undefined) name += '-' + rowKey;\r\n                    return <label key={index} className=\"form-radio-inline\">\r\n                        <input ref={input=>this.inputs[index]=input} type=\"radio\" name={name}\r\n                            value={value} defaultChecked={(this.defaultValue || defaultValue)===value}\r\n                            onChange={this.onInputChange} />\r\n                        {title || value}\r\n                    </label>;\r\n                    //</span>\r\n                })}\r\n            </span>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { UiRange } from '../../schema';\r\nimport { Widget } from './widget';\r\n\r\nexport class RangeWidget extends Widget {\r\n    protected inputType = 'range';\r\n    protected input: HTMLInputElement;\r\n    protected ui: UiRange;\r\n\r\n    setReadOnly(value:boolean) {this.input.readOnly = this.readOnly = value}\r\n    setDisabled(value:boolean) {this.input.disabled = this.disabled = value}\r\n\r\n    render() {\r\n        let {min, max, step} = this.ui;\r\n        return <><input ref={input=>this.input = input}\r\n            className={classNames(this.className, 'form-control', 'w-min-6c')}\r\n            type={this.inputType}\r\n            defaultValue={this.defaultValue} \r\n            onChange={this.onInputChange}\r\n            max={max}\r\n            min={min}\r\n            step={step}\r\n            />\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Widget } from './widget';\r\nimport { UiIdItem, TempletType } from '../../schema';\r\nimport { observable } from 'mobx';\r\n\r\nexport class IdWidget extends Widget {\r\n    protected ui: UiIdItem;\r\n    @observable protected value:number;\r\n    setReadOnly(value:boolean) {this.readOnly = value}\r\n    setDisabled(value:boolean) {this.disabled = value}    \r\n\r\n    protected onClick = async () => {\r\n        let pickId = this.ui && this.ui.pickId;\r\n        if (pickId === undefined) {\r\n            alert('no pickId defined!');\r\n            return;\r\n        }\r\n        let id = await pickId(this.context, this.name, this.value);        \r\n        this.setDataValue(id);\r\n        this.clearError();\r\n        this.clearContextError();\r\n        this.checkRules();\r\n    }\r\n\r\n    render() {\r\n        let placeholder:string|JSX.Element, Templet: TempletType;\r\n        if (this.ui !== undefined) {\r\n            placeholder = this.ui.placeholder;\r\n            Templet = this.ui.Templet;\r\n        }\r\n        let cn = {\r\n            'form-control': true,\r\n            'required-item': this.itemSchema.required === true,\r\n            'cursor-pointer': true,\r\n            'is-invalid': this.hasError,\r\n        };\r\n        let content;\r\n        if (this.value === undefined || this.value === null) {\r\n            content = placeholder || 'placeholder';\r\n            cn['text-muted'] = true;\r\n        }\r\n        else if (Templet === undefined) {\r\n            content = <>{this.value}</>;\r\n        }\r\n        else if (typeof Templet === 'function') {\r\n            content = Templet(this.value);\r\n        }\r\n        else {\r\n            content = Templet;\r\n        }\r\n        return <>\r\n            <div className={classNames(cn)} onClick={this.onClick}>{content}</div>\r\n            {this.renderErrors()}\r\n        </>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { DataType } from '../../schema';\r\nimport { UiType } from '../../schema';\r\n\r\nexport const Unknown = (dataType:DataType, uiType:UiType, dataTypes:DataType[]) => {\r\n    return <span className=\"text-danger\">!!data type {dataType} only support {(dataTypes || []).join(', ')}, can't use ui {uiType}!!</span>;\r\n};\r\n","import * as React from 'react';\r\nimport { UiButton, TempletType } from '../../schema';\r\nimport { Unknown } from './unknown';\r\nimport { Widget } from './widget';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport class ButtonWidget extends Widget {\r\n    protected ui: UiButton;\r\n\r\n    protected onClick = async () => {\r\n        this.clearError();\r\n        this.clearContextError();\r\n        let {name, type} = this.itemSchema;\r\n        if (type === 'submit') {\r\n            await this.context.submit(name);\r\n        }\r\n        /*\r\n        let {onButtonClick} = this.context.form.props;\r\n        if (onButtonClick === undefined) {\r\n            alert(`button ${name} clicked. you should define form onButtonClick`);\r\n            return;\r\n        }\r\n        let ret = await onButtonClick(name, this.context);\r\n        if (ret === undefined) return;\r\n        this.context.setError(name, ret);\r\n        */\r\n    }\r\n\r\n    private observerRender = observer(() => {\r\n        let {name, type} = this.itemSchema;\r\n        let Templet:TempletType, cn:string, caption:string;\r\n        if (this.ui !== undefined) {\r\n            let {widget:widgetType} = this.ui;\r\n            if (widgetType !== 'button') return Unknown(type, widgetType, ['button']);\r\n            Templet = this.ui.Templet;\r\n            cn = this.ui.className;\r\n            caption = this.ui.label;\r\n        }\r\n        let {form, hasError} = this.context;\r\n        let context = this.context;\r\n        let disabled = type==='submit' && hasError;\r\n        let content:any;\r\n        if (this.children !== undefined) content = this.children;\r\n        else if (typeof Templet === 'function') content = Templet();\r\n        else if (Templet !== undefined) content = Templet;\r\n        else content = caption; \r\n        let button = <button \r\n            className={cn} \r\n            type=\"button\"\r\n            disabled={disabled}\r\n            onClick={this.onClick}>\r\n            {content || name}\r\n        </button>;\r\n        if (context.inNode === true) return <>{button}{this.renderErrors()}</>;\r\n        return <div className={form.ButtonClass}>\r\n            <div>{this.renderErrors()}</div>\r\n            {button}\r\n        </div>;\r\n    });\r\n    \r\n    protected get label():string {return null}\r\n\r\n    render() {\r\n        return <this.observerRender />\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Form } from './form';\r\nimport { UiSchema, UiArr, UiItem } from '../schema';\r\nimport { ArrSchema, ItemSchema } from '../schema';\r\nimport { Widget as Widget } from './widgets/widget';\r\n//import { ArrRow } from './arrRow';\r\nimport { observable, computed } from 'mobx';\r\nimport { ContextRule } from './rules';\r\nimport { observer } from 'mobx-react';\r\n\r\nexport abstract class Context {\r\n    private subContexts:{[name:string]:{[rowKey:string]:Context}};\r\n    readonly form: Form;\r\n    readonly uiSchema: UiSchema;\r\n    readonly initData: any;\r\n    readonly inNode: boolean;           // true: 在</> 流中定义Field\r\n    readonly widgets: {[name:string]: Widget} = {};\r\n    readonly rules: ContextRule[];\r\n    readonly isRow: boolean;\r\n    @observable errors: string[] = [];\r\n    @observable errorWidgets:Widget[] = [];\r\n\r\n    constructor(form: Form, uiSchema: UiSchema, data: any, inNode: boolean, isRow: boolean) {\r\n        this.form = form;\r\n        this.uiSchema = uiSchema;\r\n        this.initData = data;\r\n        this.inNode = inNode;\r\n        this.isRow = isRow;\r\n        if (uiSchema !== undefined) {\r\n            let {rules} = uiSchema;\r\n            if (rules !== undefined) {\r\n                this.rules = [];\r\n                if (Array.isArray(rules) === false)\r\n                    this.rules.push(rules as ContextRule);\r\n                else\r\n                    this.rules.push(...rules as ContextRule[]);\r\n            }\r\n        }\r\n    }\r\n\r\n    getArrRowContexts(arrName: string) {\r\n        if (this.subContexts === undefined) this.subContexts = {};\r\n        let arrRowContexts = this.subContexts[name];\r\n        if (arrRowContexts === undefined) this.subContexts[name] = arrRowContexts = {};\r\n        return arrRowContexts;\r\n    }\r\n\r\n    abstract get data():any;\r\n    abstract getItemSchema(itemName:string):ItemSchema;\r\n    abstract getUiItem(itemName:string):UiItem;\r\n    get arrName():string {return undefined}\r\n    getValue(itemName:string):any {return this.initData[itemName]}\r\n    setValue(itemName:string, value:any) {\r\n        this.initData[itemName] = value;\r\n        let widget = this.widgets[itemName];\r\n        if (widget !== undefined) widget.setValue(value);\r\n    }\r\n    getDisabled(itemName:string):boolean {\r\n        let widget = this.widgets[itemName];\r\n        if (widget !== undefined) return widget.getDisabled();\r\n        return undefined;\r\n    }\r\n    setDisabled(itemName:string, value:boolean) {\r\n        let widget = this.widgets[itemName];\r\n        if (widget !== undefined) widget.setDisabled(value);\r\n    }\r\n    getReadOnly(itemName:string):boolean {\r\n        let widget = this.widgets[itemName];\r\n        if (widget !== undefined) widget.getReadOnly();\r\n        return undefined;\r\n    }\r\n    setReadOnly(itemName:string, value:boolean) {\r\n        let widget = this.widgets[itemName];\r\n        if (widget !== undefined) widget.setReadOnly(value);\r\n    }\r\n    getVisible(itemName:string):boolean {\r\n        let widget = this.widgets[itemName];\r\n        if (widget !== undefined) widget.getVisible();\r\n        return undefined;\r\n    }\r\n    setVisible(itemName:string, value:boolean) {\r\n        let widget = this.widgets[itemName];\r\n        if (widget !== undefined) widget.setVisible(value);\r\n    }\r\n\r\n    async submit(buttonName: string) {\r\n        this.checkRules()\r\n        if (this.hasError === true) {\r\n            let err = '';\r\n            for (let ew of this.errorWidgets) {\r\n                err += ew.name + ':\\n' + ew.errors.join('\\n');\r\n            }\r\n            console.error(err);\r\n            return;\r\n        }\r\n        let {onButtonClick} = this.form.props;\r\n        if (onButtonClick === undefined) {\r\n            alert(`button ${buttonName} clicked. you should define form onButtonClick`);\r\n            return;\r\n        }\r\n        let ret = await onButtonClick(buttonName, this);\r\n        if (ret === undefined) return;\r\n        this.setError(buttonName, ret);\r\n\r\n    }\r\n\r\n    checkFieldRules() {\r\n        for (let i in this.widgets) {\r\n            this.widgets[i].checkRules();\r\n        }\r\n        if (this.subContexts === undefined) return;\r\n        for (let i in this.subContexts) {\r\n            let arrRowContexts = this.subContexts[i];\r\n            for (let j in arrRowContexts) {\r\n                arrRowContexts[j].checkFieldRules();\r\n            }\r\n        }\r\n    }\r\n\r\n    checkContextRules() {\r\n        this.clearErrors();\r\n        if (this.rules === undefined) return;\r\n        for (let rule of this.rules) {\r\n            let ret = rule(this);\r\n            if (ret === undefined) continue;\r\n            if (Array.isArray(ret) === true) {\r\n                this.errors.push(...ret as string[]);\r\n            }\r\n            else if (typeof ret === 'string') {\r\n                this.errors.push(ret as string);\r\n            }\r\n            else {\r\n                for (let i in ret as object) this.setError(i, ret[i]);\r\n            }\r\n        }\r\n        if (this.subContexts === undefined) return;\r\n        for (let i in this.subContexts) {\r\n            let arrRowContexts = this.subContexts[i];\r\n            for (let j in arrRowContexts) {\r\n                let rowContext = arrRowContexts[j];\r\n                rowContext.clearErrors();\r\n                rowContext.checkContextRules();\r\n            }\r\n        }\r\n    }\r\n\r\n    setError(itemName:string, error:string) {\r\n        let widget = this.widgets[itemName];\r\n        if (widget === undefined) return;\r\n        widget.setContextError(error);\r\n        this.addErrorWidget(widget);\r\n    }\r\n\r\n    clearContextErrors() {\r\n        for (let i in this.widgets) {\r\n            let widget = this.widgets[i];\r\n            if (widget === undefined) continue;\r\n            widget.clearContextError();\r\n        }\r\n    }\r\n\r\n    clearWidgetsErrors() {\r\n        for (let i in this.widgets) {\r\n            let widget = this.widgets[i];\r\n            if (widget === undefined) continue;\r\n            widget.clearError();\r\n        }\r\n    }\r\n\r\n    checkRules() {\r\n        this.clearErrors();\r\n        this.clearWidgetsErrors();\r\n        this.checkFieldRules();\r\n        if (this.hasError === true) return;\r\n        this.checkContextRules();\r\n    }\r\n\r\n    addErrorWidget(widget:Widget) {\r\n        let pos = this.errorWidgets.findIndex(v => v === widget);\r\n        if (pos < 0) this.errorWidgets.push(widget);\r\n    }\r\n    removeErrorWidget(widget:Widget) {\r\n        let pos = this.errorWidgets.findIndex(v => v === widget);\r\n        if (pos >= 0) this.errorWidgets.splice(pos, 1);\r\n    }\r\n\r\n    protected checkHasError():boolean {\r\n        let ret = (this.errorWidgets.length + this.errors.length) > 0;\r\n        if (ret === true) return true;\r\n        if (this.subContexts === undefined) return false;\r\n        for (let i in this.subContexts) {\r\n            let arrRowContexts = this.subContexts[i];\r\n            for (let j in arrRowContexts) {\r\n                if (arrRowContexts[j].hasError === true) return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @computed get hasError():boolean {\r\n        return this.checkHasError();\r\n    };\r\n\r\n    clearErrors() {\r\n        this.errors.splice(0);\r\n        this.errorWidgets.splice(0);\r\n        this.clearContextErrors();\r\n    }\r\n\r\n    renderErrors = observer((): JSX.Element => {\r\n        let {errors} = this;\r\n        if (errors.length === 0) return null;\r\n        return <>\r\n            {errors.map(err => <span key={err} className=\"text-danger inline-block my-1 ml-3\">\r\n                <i className=\"fa fa-exclamation-circle\" /> &nbsp;{err}\r\n            </span>)}\r\n        </>\r\n    });\r\n}\r\n\r\nlet rowKeySeed:number = 1;\r\nexport class RowContext extends Context {\r\n    readonly parentContext: Context;\r\n    readonly arrSchema: ArrSchema;\r\n    readonly uiSchema: UiArr;\r\n    //readonly row: ArrRow;\r\n    readonly rowKey: number;\r\n    readonly data: any;\r\n    constructor(parentContext:Context, arrSchema: ArrSchema, data: any, inNode: boolean) {\r\n        let uiArr:UiArr;\r\n        let {uiSchema} = parentContext;\r\n        if (uiSchema !== undefined) {\r\n            let {items} = uiSchema;\r\n            if (items !== undefined) uiArr = items[arrSchema.name] as UiArr;\r\n        }\r\n        super(parentContext.form, uiArr, data, inNode, true);\r\n        this.parentContext = parentContext;\r\n        this.arrSchema = arrSchema;\r\n        this.rowKey = rowKeySeed++;\r\n        this.data = data;\r\n    }\r\n    getItemSchema(itemName:string):ItemSchema {return this.arrSchema.itemSchemas[itemName]}\r\n    getUiItem(itemName:string):UiItem {\r\n        if (this.uiSchema === undefined) return undefined;\r\n        let {items} = this.uiSchema;\r\n        if (items === undefined) return undefined;\r\n        return items[itemName]\r\n    }\r\n    get arrName():string {return this.arrSchema.name}\r\n    clearErrors() {\r\n        super.clearErrors();\r\n        this.parentContext.clearErrors();\r\n    }\r\n\r\n    get parentData():any {return this.parentContext.data;}\r\n}\r\n\r\nexport class FormContext extends Context {\r\n    constructor(form:Form, inNode:boolean) {\r\n        super(form, form.uiSchema, form.data, inNode, false);\r\n    }\r\n    get data():any {return this.form.data}\r\n    getItemSchema(itemName:string):ItemSchema {return this.form.itemSchemas[itemName]}\r\n    getUiItem(itemName:string):UiItem {\r\n        let {uiSchema} = this.form;\r\n        if (uiSchema === undefined) return undefined;\r\n        let {items} = uiSchema;\r\n        if (items === undefined) return undefined;\r\n        return items[itemName];\r\n    }\r\n}\r\n\r\nexport const ContextContainer = React.createContext<Context>({} as any);\r\n","import * as React from 'react';\r\nimport {observer} from 'mobx-react';\r\nimport classNames from 'classnames';\r\n//import { ArrRow } from '../arrRow';\r\nimport { Context, RowContext, ContextContainer } from '../context';\r\nimport { ArrSchema } from '../../schema';\r\nimport { UiArr, TempletType } from '../../schema';\r\nimport { Unknown } from './unknown';\r\nimport { factory } from './factory';\r\n\r\nexport const ArrComponent = observer((\r\n    {parentContext, arrSchema, children}:{parentContext: Context, arrSchema: ArrSchema, children: React.ReactNode}) => \r\n{\r\n    let {name, arr} = arrSchema;\r\n    let data = parentContext.initData[name] as any[];\r\n    let {form} = parentContext;\r\n    let arrRowContexts = parentContext.getArrRowContexts(name);\r\n    let ui = parentContext.getUiItem(name) as UiArr;\r\n    let arrLabel = name;\r\n    let Templet:TempletType;\r\n    let selectable:boolean, deletable:boolean, restorable:boolean;\r\n    let {ArrContainer, RowContainer, RowSeperator, uiSchema} = form;\r\n    if (uiSchema !== undefined) {\r\n        let {selectable:formSelectable, deletable:formDeletable, restorable:formRestorable} = uiSchema;\r\n        if (selectable !== true) selectable = formSelectable;\r\n        if (deletable !== true) deletable = formDeletable;\r\n        if (restorable !== true) restorable = formRestorable;\r\n    }\r\n    if (ui !== undefined) {\r\n        let {widget:widgetType, label, \r\n            selectable:arrSelectable, deletable:arrDeletable, restorable:arrRestorable,\r\n            ArrContainer:ac, RowContainer:rc, RowSeperator:rs\r\n        } = ui;\r\n        if (arrSelectable !== undefined) selectable = arrSelectable;\r\n        if (arrDeletable !== undefined) deletable = arrDeletable;\r\n        if (arrRestorable !== undefined) restorable = arrRestorable;\r\n        if (ac !== undefined) ArrContainer = ac;\r\n        if (rc !== undefined) RowContainer = rc;\r\n        if (rs !== undefined) RowSeperator = rs;\r\n        Templet = ui.Templet;\r\n        if (widgetType !== 'arr') return Unknown(arrSchema.type, widgetType, ['arr']);\r\n        arrLabel = label || arrLabel;\r\n    }\r\n    let first = true;\r\n    return ArrContainer(arrLabel, <>\r\n        {data.map((row:any, index) => {\r\n            let rowContext: RowContext;\r\n            let rowContent: JSX.Element;\r\n            let sep = undefined;\r\n            if (first === false) sep = RowSeperator;\r\n            else first = false;\r\n            if (children !== undefined) {\r\n                rowContext = new RowContext(parentContext, arrSchema, row, true);\r\n                rowContent = <>{children}</>;\r\n            }\r\n            else {\r\n                let typeofTemplet = typeof Templet;\r\n                if (typeofTemplet === 'function') {\r\n                    rowContext = new RowContext(parentContext, arrSchema, row, true);\r\n                    rowContent = React.createElement(observer(Templet as React.StatelessComponent), row);\r\n                }\r\n                else if (typeofTemplet === 'object') {\r\n                    rowContext = new RowContext(parentContext, arrSchema, row, true);\r\n                    rowContent = Templet as JSX.Element;\r\n                }\r\n                else {\r\n                    rowContext = new RowContext(parentContext, arrSchema, row, false);\r\n                    rowContent = <>{\r\n                        arr.map((v, index) => {\r\n                            return <React.Fragment key={v.name}>\r\n                                {factory(rowContext, v, undefined)}\r\n                            </React.Fragment>\r\n                        })}\r\n                    </>;\r\n                }\r\n            }\r\n            let {rowKey} = rowContext;\r\n            arrRowContexts[rowKey] = rowContext;\r\n\r\n            let selectCheck:JSX.Element, deleteIcon:JSX.Element;\r\n            if (selectable === true) {\r\n                let onClick = (evt: React.MouseEvent<HTMLInputElement>)=>{\r\n                    let {checked} = (evt.target as HTMLInputElement);\r\n                    row.$isSelected = checked;\r\n                    let {$source} = row;\r\n                    if ($source !== undefined) $source.$isSelected = checked;\r\n                    rowContext.clearErrors();\r\n                }\r\n                selectCheck = <div className=\"form-row-checkbox\">\r\n                    <input type=\"checkbox\" onClick={onClick} defaultChecked={row.$isSelected} />\r\n                </div>;\r\n            }\r\n            let isDeleted = !(row.$isDeleted===undefined || row.$isDeleted===false);\r\n            if (deletable === true) {\r\n                let icon = isDeleted? 'fa-undo' : 'fa-trash';\r\n                let onDelClick = () => {\r\n                    if (restorable === true) {\r\n                        row.$isDeleted = !isDeleted;\r\n                        let {$source} = row;\r\n                        if ($source !== undefined) $source.$isDeleted = !isDeleted;\r\n                    }\r\n                    else {\r\n                        let p = data.indexOf(row);\r\n                        if (p>=0) data.splice(p, 1);\r\n                    }\r\n                    rowContext.clearErrors();\r\n                }\r\n                deleteIcon = <div className=\"form-row-edit text-info\" onClick={onDelClick}>\r\n                    <i className={classNames('fa', icon, 'fa-fw')} />\r\n                </div>;\r\n            }\r\n            let editContainer = selectable===true || deletable===true?\r\n                (content:any) => <fieldset disabled={isDeleted}><div className={classNames('d-flex', {'deleted':isDeleted, 'row-selected':row.$isSelected})}>\r\n                    {selectCheck}\r\n                    <div className={selectable===true && deletable===true? \"form-row-content\":\"form-row-content-1\"}>{content}</div>\r\n                    {deleteIcon}\r\n                </div></fieldset>\r\n                :\r\n                (content:any) => content;\r\n\r\n            return <ContextContainer.Provider key={rowKey} value={rowContext}>\r\n                {sep}\r\n                {RowContainer(editContainer(<><rowContext.renderErrors />{rowContent}</>))}\r\n            </ContextContainer.Provider>;\r\n        })}\r\n    </>);\r\n});\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { Widget } from './widget';\r\nimport { UiImageItem } from '../../schema';\r\nimport { Image } from '../../image';\r\nimport { ImageItemEdit } from '../../edit/imageItemEdit';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\nexport class ImageWidget extends Widget {\r\n    protected input: HTMLInputElement;\r\n    protected ui: UiImageItem;\r\n    @observable private imageSrc: string;\r\n\r\n    protected init() {\r\n        super.init();\r\n        this.imageSrc = this.value;\r\n    }\r\n\r\n    protected onClick = async () => {\r\n        let edit = new ImageItemEdit(this.itemSchema, this.ui, this.ui.label, this.value);\r\n        let ret = await edit.start();\r\n        if (ret !== null) {\r\n            this.setValue(ret);\r\n            this.imageSrc = ret;\r\n        }\r\n        await edit.end();\r\n    }\r\n\r\n    render() {\r\n        return <this.observerRender />;\r\n    }\r\n\r\n    private observerRender = observer(() => {\r\n        let cn = [\r\n            'bg-white p-1 d-flex justify-content-center',\r\n        ];\r\n        let onClick: any;\r\n        if (!this.readOnly && !this.disabled) {\r\n            cn.push('cursor-pointer');\r\n            onClick = this.onClick;\r\n        }\r\n        return <div className={classNames(cn)} onClick={onClick}>\r\n            <Image src={this.imageSrc} className=\"w-4c h-4c\"/>\r\n        </div>;\r\n    });\r\n}\r\n","import * as React from 'react';\r\nimport {observer} from 'mobx-react';\r\nimport { Schema, ArrSchema, DataType, ButtonSchema, ItemSchema } from '../../schema';\r\nimport { UiItem, UiArr, UiType, UiButton, TempletType, TypeWidget, UiCustom } from '../../schema';\r\nimport { TextWidget } from './textWidget';\r\nimport { TextAreaWidget } from './textareaWidget';\r\nimport { PasswordWidget, UrlWidget, EmailWidget } from './passwordWidget';\r\nimport { UpdownWidget } from './updownWidget';\r\nimport { NumberWidget } from './numberWidget';\r\nimport { DateWidget, DateTimeWidget, TimeWidget, MonthWidget } from './dateWidget';\r\nimport { CheckBoxWidget } from './checkBoxWidget';\r\nimport { FieldProps } from '../field';\r\nimport { Context, RowContext, FormContext, ContextContainer } from '../context';\r\nimport { SelectWidget } from './selectWidget';\r\nimport { RadioWidget } from './radioWidget';\r\nimport { RangeWidget } from './rangeWidget';\r\nimport { IdWidget } from './idWidget';\r\nimport { ButtonWidget } from './buttonWidget';\r\nimport { ArrComponent } from './arrComponent';\r\nimport { ImageWidget } from './imageWidget';\r\n\r\nconst widgetsFactory: {[type: string]: {widget?: TypeWidget, dataTypes?: DataType[]}} = {\r\n    id: {\r\n        dataTypes: ['id'],\r\n        widget: IdWidget,\r\n    },\r\n    text: {\r\n        dataTypes: ['integer', 'number', 'string'],\r\n        widget: TextWidget\r\n    },\r\n    textarea: {\r\n        dataTypes: ['string'],\r\n        widget: TextAreaWidget\r\n    },\r\n    password: {\r\n        dataTypes: ['string'],\r\n        widget: PasswordWidget\r\n    },\r\n    date: {\r\n        dataTypes: ['date'],\r\n        widget: DateWidget\r\n    },\r\n    datetime: {\r\n        dataTypes: ['date'],\r\n        widget: DateTimeWidget\r\n    },\r\n    time: {\r\n        dataTypes: ['date'],\r\n        widget: TimeWidget\r\n    },\r\n    month: {\r\n        dataTypes: ['date'],\r\n        widget: MonthWidget\r\n    },\r\n    select: {\r\n        dataTypes: ['integer', 'number', 'string', 'date', 'boolean'],\r\n        widget: SelectWidget\r\n    },\r\n    url: {\r\n        dataTypes: ['string'],\r\n        widget: UrlWidget\r\n    },\r\n    email: {\r\n        dataTypes: ['string'],\r\n        widget: EmailWidget\r\n    },\r\n    number: {\r\n        dataTypes: ['integer', 'number'],\r\n        widget: NumberWidget\r\n    },\r\n    updown: {\r\n        dataTypes: ['integer', 'number'],\r\n        widget: UpdownWidget\r\n    },\r\n    color: {\r\n\r\n    },\r\n    checkbox: {\r\n        dataTypes: ['boolean', 'integer', 'number'],\r\n        widget: CheckBoxWidget\r\n    },\r\n    image: {\r\n        dataTypes: ['string'],\r\n        widget: ImageWidget,\r\n    },\r\n    checkboxes: {\r\n\r\n    },\r\n    radio: {\r\n        dataTypes: ['integer', 'number', 'string', 'date', 'boolean'],\r\n        widget: RadioWidget\r\n    },\r\n    range: {\r\n        dataTypes: ['integer'],\r\n        widget: RangeWidget,\r\n    },\r\n    button: {\r\n        dataTypes: ['button', 'submit'],\r\n        widget: ButtonWidget,\r\n    }\r\n}\r\n\r\nexport function factory(context: Context, itemSchema: ItemSchema, children:React.ReactNode, fieldProps?: FieldProps):JSX.Element {\r\n    if (context === undefined) {\r\n        debugger;\r\n        return null;\r\n    }\r\n    if (itemSchema === undefined) return undefined;\r\n    let {name, type} = itemSchema;\r\n    switch (type) {\r\n    case 'arr':\r\n        let arrSchema = context.getItemSchema(name) as ArrSchema;\r\n        return <ArrComponent parentContext={context} arrSchema={arrSchema} children={children} />;\r\n    default:\r\n        break;\r\n    }\r\n\r\n    let typeWidget: TypeWidget;\r\n    let ui = context.getUiItem(name);\r\n    function getTypeWidget(t:DataType): TypeWidget {\r\n        switch(t) {\r\n        default: return TextWidget; \r\n        case 'id': return IdWidget;\r\n        case 'integer': return UpdownWidget;\r\n        case 'number': return NumberWidget; \r\n        case 'string': return TextWidget; \r\n        case 'date': return DateWidget; \r\n        case 'boolean': return CheckBoxWidget; \r\n        case 'button':\r\n        case 'submit': return ButtonWidget;\r\n        }\r\n    }\r\n    if (ui === undefined) { \r\n        typeWidget = getTypeWidget(type);\r\n    }\r\n    else {\r\n        let {widget:widgetType} = ui;\r\n        switch (widgetType) {\r\n        default:\r\n            if (widgetType !== undefined) {\r\n                let widgetFactory = widgetsFactory[widgetType];\r\n                typeWidget = widgetFactory.widget;\r\n            }\r\n            if (typeWidget === undefined) typeWidget = getTypeWidget(type);\r\n            break;\r\n        case 'custom':\r\n            typeWidget = (ui as UiCustom).WidgetClass;\r\n            break;\r\n        case 'group':\r\n            return <span>impletment group</span>;\r\n        }\r\n        //label = uiLabel || name;\r\n    }\r\n    \r\n    let {isRow, widgets} = context;\r\n    let widget = new typeWidget(context, itemSchema, fieldProps, children);\r\n    widgets[name] = widget;\r\n\r\n    return <widget.container />;\r\n    /*\r\n    if (isRow === false) {\r\n        let WidgetElement = observer(() => widget.container());\r\n        return <WidgetElement />;\r\n    }\r\n    else {\r\n        let widgetElement = widget.container();\r\n        return widgetElement;\r\n    }\r\n    */\r\n}\r\n\r\n","import _ from 'lodash';\r\nimport { KeyValueRes, Res } from '../res';\r\n\r\nexport interface FormRes extends KeyValueRes {\r\n    required: string;\r\n    number: string;\r\n    integer: string;\r\n    min: string;\r\n    max: string;\r\n}\r\n\r\nexport const formRes:Res<FormRes> = {\r\n    _: {\r\n        required: 'required',\r\n        number: 'not valid number',\r\n        integer: 'not valid integer',\r\n        min: 'min value is ${min}',\r\n        max: 'max value is ${max}',\r\n    },\r\n    zh: {\r\n        _: {\r\n            required: '必须填',\r\n            number: '需要数字',\r\n            integer: '需要整数',\r\n            min: '不能小于${min}',\r\n            max: '不能大于${max}',\r\n        }\r\n    },\r\n}\r\n","import * as React from 'react';\r\nimport {observable, IReactionDisposer, autorun, isObservable} from 'mobx';\r\nimport classNames from 'classnames';\r\nimport { Schema, ItemSchema, ArrSchema } from '../schema';\r\nimport { UiSchema, TempletType } from '../schema';\r\nimport { factory } from './widgets';\r\nimport 'font-awesome/css/font-awesome.min.css';\r\nimport { ContextContainer, FormContext, Context, RowContext } from './context';\r\nimport { FormRes, formRes } from './formRes';\r\nimport { resLang } from '../res';\r\n\r\nexport type FormButtonClick = (name:string, context: Context) => Promise<any>;\r\nexport type InputEnter = (name:string, context: Context) => Promise<any>;\r\n\r\nexport interface FormProps {\r\n    className?: string;\r\n    schema: Schema;\r\n    uiSchema?: UiSchema;\r\n    formData?: any;\r\n    onButtonClick?: FormButtonClick;\r\n    onEnter?: InputEnter;\r\n    fieldLabelSize?: number;            // col-sm-2 for label\r\n    requiredFlag?: boolean;             // default=true\r\n    beforeShow?: (formContext:FormContext) => void;\r\n    res?: FormRes;\r\n\r\n    Container?: (content:JSX.Element) => JSX.Element;\r\n    FieldContainer?: (label:string|JSX.Element, content:JSX.Element) => JSX.Element;\r\n    FieldClass?: string;\r\n    ButtonClass?: string;\r\n}\r\n\r\nexport class Form extends React.Component<FormProps> {\r\n    readonly schema: Schema;\r\n    readonly itemSchemas: {[name:string]: ItemSchema};\r\n    readonly uiSchema: UiSchema;\r\n    readonly res?: FormRes;\r\n    protected formContext: FormContext;\r\n    //private content: any;\r\n    //private formData: any;\r\n    private disposer: IReactionDisposer;\r\n    //@observable \r\n    readonly data:any;\r\n\r\n    readonly Container: (content:JSX.Element) => JSX.Element;\r\n    readonly FieldContainer: (label:any, content:JSX.Element) => JSX.Element;\r\n    readonly FieldClass: string;\r\n    readonly ButtonClass: string;\r\n    //readonly ArrContainer: (label:any, content:JSX.Element) => JSX.Element;\r\n    //readonly RowContainer: (content:JSX.Element) => JSX.Element;\r\n    //readonly RowSeperator: JSX.Element;\r\n\r\n    constructor(props:FormProps) {\r\n        super(props);\r\n        let {schema, uiSchema, formData, \r\n            Container, FieldContainer, FieldClass, \r\n            ButtonClass, res,\r\n        } = props;\r\n        this.Container = Container || this.DefaultContainer;\r\n        this.FieldContainer = FieldContainer || this.DefaultFieldContainer;\r\n        this.FieldClass = FieldClass!==undefined && FieldClass!==''&&FieldClass!==null? FieldClass : this.DefaultFieldClass;\r\n        this.res = res || this.DefaultRes;\r\n        this.ButtonClass = ButtonClass || this.DefaultButtonClass;\r\n\r\n        this.schema = schema;\r\n        this.itemSchemas = {};\r\n        for (let itemSchema of this.schema) {\r\n            this.itemSchemas[itemSchema.name] = itemSchema;\r\n        }\r\n        this.uiSchema = uiSchema;\r\n\r\n        //this.formData = formData;\r\n        this.disposer = autorun(this.watch);\r\n        this.data = {};\r\n        // this.initRender();\r\n    }\r\n\r\n    private renderContent():any {\r\n        this.initData(this.props.formData);\r\n        let {children} = this.props;\r\n        if (children !== undefined) {\r\n            this.formContext = new FormContext(this, true);\r\n            return <>{children}</>;\r\n        }\r\n\r\n        let Templet: TempletType;\r\n        if (this.uiSchema !== undefined) {\r\n            Templet = this.uiSchema.Templet;\r\n        }\r\n        if (Templet !== undefined) {\r\n            this.formContext = new FormContext(this, true);\r\n            return typeof(Templet) === 'function'? Templet(this.data) : Templet;\r\n        }\r\n\r\n        this.formContext = new FormContext(this, false);\r\n        return <>{this.schema.map((v, index) => {\r\n            return <React.Fragment key={index}>{factory(this.formContext, v, children)}</React.Fragment>\r\n        })}</>;\r\n    }\r\n\r\n    private initData(formData: any) {\r\n        if (formData === undefined) formData = {};\r\n        for (let itemSchema of this.schema) {\r\n            this.initDataItem(itemSchema, this.data, formData);\r\n        }\r\n    }\r\n\r\n    private initDataItem(itemSchema: ItemSchema, data:any, formData: any):any {\r\n        let {name, type} = itemSchema;\r\n        if (type === 'button') return;\r\n        if (type !== 'arr') {\r\n            data[name] = formData[name];\r\n            return;\r\n        }\r\n\r\n        let arrItem:ArrSchema = itemSchema as ArrSchema;\r\n        let {arr:arrItems} = arrItem;\r\n        if (arrItems === undefined) return;\r\n        let arrDict = arrItem.itemSchemas = {};\r\n        for (let item of arrItems) {\r\n            arrDict[item.name] = item;\r\n        }\r\n        let val:any[] = formData[name];\r\n        if (val === undefined) val = [];\r\n        else if (Array.isArray(val) === false) val = [val];\r\n        let arr:any[] = [];\r\n        for (let row of val) {\r\n            let {$isSelected, $isDeleted} = row;\r\n            let r = {\r\n                $source: row,\r\n                $isSelected: $isSelected,\r\n                $isDeleted: $isDeleted,\r\n            };\r\n            for (let item of arrItems) {\r\n                this.initDataItem(item, r, row);\r\n                /*\r\n                let {name:nm} = item;\r\n                let v = row[nm];\r\n                if (v === undefined) v = null;\r\n                r[nm] = v;\r\n                */\r\n            }\r\n            arr.push(r);\r\n        }\r\n        // 如果没有observable，行删除标志点击不管用\r\n        // 不知道这里为什么要去掉observable。有可能会有别的问题\r\n        data[name] = observable(arr);\r\n        //data[name] = arr;\r\n        return;\r\n    }\r\n\r\n    private watch = () => {\r\n        let {formData} = this.props;\r\n        if (formData === undefined) return;\r\n        //this.initData(formData);\r\n        this.calcSelectOrDelete();\r\n    }\r\n    private calcSelectOrDelete() {\r\n        for (let itemSchema of this.schema) {\r\n            this.arrItemOperated(itemSchema);\r\n        }\r\n    }\r\n\r\n    private arrItemOperated(itemSchema: ItemSchema) {\r\n        let {name, type} = itemSchema;\r\n        if (type !== 'arr') return;\r\n        if (this.data === undefined) return;\r\n        let formArrVal = this.data[name];\r\n        if (formArrVal === undefined) return;\r\n        let {arr: arrItems} = itemSchema as ArrSchema;\r\n        for (let row of formArrVal) {\r\n            let {$source} = row;\r\n            if ($source === undefined) continue;\r\n            let {$isSelected, $isDeleted} = $source;\r\n            row.$isSelected = $isSelected;\r\n            row.$isDeleted = $isDeleted;\r\n            //console.log($isSelected, $isDeleted);\r\n            for (let item of arrItems) {\r\n                this.arrItemOperated(item);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        let {beforeShow} = this.props;\r\n        if (beforeShow !== undefined) beforeShow(this.formContext);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.disposer !== undefined) this.disposer();\r\n    }\r\n\r\n    render() {\r\n        let content = this.renderContent();\r\n        return <ContextContainer.Provider value={this.formContext}>\r\n            <this.formContext.renderErrors />\r\n            {this.Container(content)}\r\n        </ContextContainer.Provider>;\r\n    }\r\n\r\n    async buttonClick(buttonName:string) {\r\n        this.formContext.checkRules()\r\n        if (this.formContext.hasError === true) return;\r\n\r\n        let {onButtonClick} = this.formContext.form.props;\r\n        if (onButtonClick === undefined) {\r\n            alert(`you should define form onButtonClick`);\r\n            return;\r\n        }\r\n        let ret = await onButtonClick(buttonName, this.formContext);\r\n        if (ret === undefined) return;\r\n        this.formContext.setError(buttonName, ret);\r\n    }\r\n\r\n    protected DefaultContainer = (content:JSX.Element): JSX.Element => {\r\n        return <form className={classNames(this.props.className)} onSubmit={e=>e.preventDefault()}>\r\n            {content}\r\n        </form>;\r\n    }\r\n    protected DefaultFieldContainer = (label:string|JSX.Element, content:JSX.Element): JSX.Element => {\r\n        let {fieldLabelSize} = this.props;\r\n\r\n        if (fieldLabelSize > 0) {\r\n            let labelView:any;\r\n            if (label === null) {\r\n                fieldLabelSize = 0;\r\n            }\r\n            else {\r\n                labelView = <label className={classNames('col-sm-' + fieldLabelSize, 'col-form-label')}>{label}</label>\r\n            }\r\n            let fieldCol = 'col-sm-' + (12 - fieldLabelSize);\r\n            return <div className=\"form-group row\">\r\n                {labelView}\r\n                <div className={fieldCol}>{content}</div>\r\n            </div>;\r\n        }\r\n        return <div className=\"form-group\">\r\n            {label===null? null:<label className=\"col-form-label\">{label}</label>}\r\n            {content}\r\n        </div>;\r\n    }\r\n    protected DefaultFieldClass:string = undefined;\r\n    protected DefaultButtonClass = 'text-center py-2';\r\n    protected DefaultRes:FormRes = resLang<FormRes>(formRes);\r\n\r\n    ArrContainer = (label:any, content:JSX.Element): JSX.Element => {\r\n        return <div>\r\n            <div className={classNames('small text-muted text-center bg-light py-1 px-3 mt-4 mb-1')}>{label}</div>\r\n            {content}\r\n        </div>;\r\n    }\r\n    RowContainer = (content:JSX.Element): JSX.Element => {\r\n        let cn = classNames({\r\n            'py-3': true\r\n        });\r\n        return <div className={cn}>{content}</div>\r\n    }\r\n    RowSeperator = <div className=\"border border-gray border-top\" />;\r\n}\r\n","import * as React from 'react';\r\nimport { factory } from './widgets';\r\nimport { ContextContainer, Context } from './context';\r\n\r\nexport interface FieldProps {\r\n    name: string;\r\n}\r\n\r\nexport class FormField extends React.Component<FieldProps> {\r\n    static contextType = ContextContainer;\r\n    render() {\r\n        let {name, children } = this.props;\r\n        let context:Context = this.context;\r\n        if (context === undefined) return <span className=\"text-danger\">!only in Form!</span>;\r\n        let itemSchema = context.getItemSchema(name);\r\n        let content = factory(context, itemSchema, children, this.props);\r\n        if (content === undefined) {\r\n            return <span className=\"text-danger\">!!{name} is not defined!!</span>;\r\n        }\r\n        return content;\r\n    }\r\n}\r\n","export {Form} from './form';\r\nexport {FormField} from './field';\r\nexport {Context, RowContext} from './context';\r\nexport * from './widgets';\r\n","import {CenterApiBase} from '../net';\r\n\r\nexport class CenterApi extends CenterApiBase {\r\n    async userAppUnits(app:number):Promise<any[]> {\r\n        return await this.get('tie/user-app-units', {app:app});\r\n    }\r\n}\r\n\r\nexport const centerApi = new CenterApi('tv/', undefined);\r\n","import * as React from 'react';\r\nimport { VPage, Page, FA, nav, LMR, List } from \"../components\";\r\nimport { appInFrame } from '../net';\r\nimport { CAppBase } from \"./CAppBase\";\r\n\r\n/*\r\nexport class VAppMain extends VPage<CMainBase> {\r\n    async open(param?:any) {\r\n        this.openPage(this.appPage);\r\n    }\r\n\r\n    render(param?:any) {\r\n        return this.appContent();\r\n    }\r\n\r\n    protected appPage = () => {\r\n        let {caption} = this.controller;\r\n        return <Page header={caption} logout={async()=>{appInFrame.unit = undefined}}>\r\n            {this.appContent()}\r\n        </Page>;\r\n    }\r\n\r\n    protected appContent = () => {\r\n        let {cUqArr} = this.controller;\r\n        let content:any;\r\n        if (cUqArr.length === 0) {\r\n            content = <div className=\"text-danger\">\r\n                <FA name=\"\" /> 此APP没有绑定任何的UQ\r\n            </div>;\r\n        }\r\n        else {\r\n            content = cUqArr.map((v,i) => <div key={i}>{v.render()}</div>);\r\n        }\r\n        return <>{content}</>;\r\n    };\r\n}\r\n*/\r\nexport class VUnsupportedUnit extends VPage<CAppBase> {\r\n    async open(predefinedUnit: number) {\r\n        this.openPage(this.page, predefinedUnit);\r\n    }\r\n\r\n    private page = (predefinedUnit: number) => {\r\n        let {user} = nav;\r\n        let userName:string = user? user.name : '[未登录]';\r\n        let {appOwner, appName} = this.controller.uqsMan;\r\n        return <Page header=\"APP无法运行\" logout={true}>\r\n            <div className=\"m-3 text-danger container\">\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">登录用户</div>\r\n                    <div className=\"col-sm text-body\">{userName}</div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">App</div>\r\n                    <div className=\"col-sm text-body\">{`${appOwner}/${appName}`}</div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">预设小号</div>\r\n                    <div className=\"col-sm text-body\">{predefinedUnit || <small className=\"\">[无预设小号]</small>}</div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">\r\n                        可能原因<FA name=\"exclamation-triangle\" />\r\n                    </div>\r\n                    <div className=\"col-sm text-body\">\r\n                        <ul className=\"p-0\">\r\n                            <li>没有小号运行 {appName}</li>\r\n                            <li>用户 <b>{userName}</b> 没有加入任何一个运行{appName}的小号</li>\r\n                            {\r\n                                predefinedUnit && \r\n                                <li>预设小号 <b>{predefinedUnit}</b> 没有运行App {appName}</li>\r\n                            }\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-group row\">\r\n                    <div className=\"col-sm-3 font-weight-bold\">小号{predefinedUnit}</div>\r\n                    <div className=\"col-sm text-body\">\r\n                        预设小号定义在 public/unit.json 文件中。\r\n                        定义了这个文件的程序，只能由url直接启动。\r\n                        用户第一次访问app之后，会缓存在localStorage里。<br/>\r\n                        如果要删去缓存的预定义Unit，logout然后再login。\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport class VUnitSelect extends VPage<CAppBase> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderRow = (item: any, index: number):JSX.Element => {\r\n        let {id, nick, name} = item;\r\n        return <LMR className=\"px-3 py-2\" right={'id: ' + id}>\r\n            <div>{nick || name}</div>\r\n        </LMR>;\r\n    }\r\n    private onRowClick = async (item: any) => {\r\n        appInFrame.unit = item.id; // 25;\r\n        await this.controller.start();\r\n    }\r\n\r\n    private page = () => {\r\n        return <Page header=\"选择小号\" logout={true}>\r\n            <List items={this.controller.appUnits} item={{render: this.renderRow, onClick: this.onRowClick}}/>\r\n        </Page>\r\n    }\r\n}\r\n\r\nexport class VErrorsPage extends VPage<CAppBase> {\r\n    async open(errors:string[]) {\r\n        this.openPage(this.page, errors);\r\n    }\r\n\r\n    private page = (errors:string[]) => {\r\n        return <Page header=\"ERROR\">\r\n            <div className=\"m-3\">\r\n                <div>Load Uqs 发生错误：</div>\r\n                {errors.map((r, i) => <div key={i}>{r}</div>)}\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport class VStartError extends VPage<CAppBase> {\r\n    async open(error:any) {\r\n        this.openPage(this.page, error);\r\n    }\r\n\r\n    private page = (error:any) => {\r\n        return <Page header=\"App start error!\">\r\n            <pre>\r\n                {typeof error === 'string'? error : error.message}\r\n            </pre>\r\n        </Page>;\r\n    }\r\n}","import _ from 'lodash';\r\nimport { Controller, nav } from \"../components\";\r\nimport { UqMan, Tuid, Action, Sheet, Query, Map, UQsMan, TVs } from \"../uq\";\r\nimport { appInFrame, loadAppUqs, UqAppData } from \"../net\";\r\nimport { centerApi } from \"./centerApi\";\r\nimport { VUnitSelect, VErrorsPage, VStartError, VUnsupportedUnit } from \"./vMain\";\r\n\r\ntype EntityType = Tuid | Action | Sheet | Query | Map;\r\n\r\nexport interface IConstructor<T> {\r\n    new (...args: any[]): T;\r\n\r\n    // Or enforce default constructor\r\n    // new (): T;\r\n}\r\n\r\nexport interface AppConfig {\r\n    appName: string;        // 格式: owner/appName\r\n    version: string;        // 版本变化，缓存的uqs才会重载\r\n    tvs: TVs;\r\n    uqNameMap?: {[uqName:string]: string};      // uqName='owner/uq' 映射到内存简单名字：uq, 可以注明映射，也可以自动。有可能重\r\n    loginTop?: JSX.Element;\r\n}\r\n\r\nexport abstract class CAppBase extends Controller {\r\n    protected readonly name: string;\r\n    protected readonly version: string;\r\n\r\n    readonly uqs: any; //IUQs;\r\n    readonly uqsMan: UQsMan;\r\n    appUnits:any[];\r\n\r\n    // appName: owner/name\r\n    constructor(config: AppConfig) {\r\n        super(undefined);\r\n        let {appName, version, tvs} = config;\r\n        this.name = appName;\r\n        if (appName === undefined) {\r\n            throw 'appName like \"owner/app\" must be defined in MainConfig';\r\n        }\r\n        this.version = version;\r\n        this.uqs = {};\r\n        this.uqsMan = new UQsMan(this.name, tvs);\r\n    }\r\n\r\n    protected async beforeStart():Promise<boolean> {\r\n        try {\r\n            let retErrors = await this.load();\r\n            //let app = await loadAppUqs(this.appOwner, this.appName);\r\n            // if (isDevelopment === true) {\r\n            // 这段代码原本打算只是在程序员调试方式下使用，实际上，也可以开放给普通用户，production方式下\r\n            let {predefinedUnit} = appInFrame;\r\n            //let {id} = app;\r\n            //this.id = id;\r\n            let {user} = nav;\r\n            if (user !== undefined && user.id > 0) {\r\n                this.appUnits = await centerApi.userAppUnits(this.uqsMan.id);\r\n                switch (this.appUnits.length) {\r\n                    case 0:\r\n                        this.showUnsupport(predefinedUnit);\r\n                        return false;\r\n                    case 1:\r\n                        let appUnit = this.appUnits[0].id;\r\n                        if (appUnit === undefined || appUnit < 0 || \r\n                            predefinedUnit !== undefined && appUnit != predefinedUnit)\r\n                        {\r\n                            this.showUnsupport(predefinedUnit);\r\n                            return false;\r\n                        }\r\n                        appInFrame.unit = appUnit;\r\n                        break;\r\n                    default:\r\n                        if (predefinedUnit>0 && this.appUnits.find(v => v.id===predefinedUnit) !== undefined) {\r\n                            appInFrame.unit = predefinedUnit;\r\n                            break;\r\n                        }\r\n                        //nav.push(<this.selectUnitPage />)\r\n                        this.openVPage(VUnitSelect);\r\n                        return false;\r\n                }\r\n            }\r\n            if (retErrors !== undefined) {\r\n                this.openVPage(VErrorsPage);\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            this.openVPage(VStartError);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private async load(): Promise<string[]> {\r\n        let {appOwner, appName} = this.uqsMan;\r\n        let {localData} = this.uqsMan;\r\n        let uqAppData:UqAppData = localData.get();\r\n        if (!uqAppData || uqAppData.version !== this.version) {\r\n            uqAppData = await loadAppUqs(appOwner, appName);\r\n            uqAppData.version = this.version;\r\n            localData.set(uqAppData);\r\n            // \r\n            for (let uq of uqAppData.uqs) uq.newVersion = true;\r\n        }\r\n        let {id, uqs} = uqAppData;\r\n        this.uqsMan.id = id;\r\n        await this.uqsMan.init(uqs);\r\n        let retErrors = await this.uqsMan.load();\r\n        if (retErrors.length === 0) {\r\n            retErrors.push(...this.uqsMan.setTuidImportsLocal());\r\n            if (retErrors.length === 0) {\r\n                this.uqsMan.writeUQs(this.uqs);\r\n                /*\r\n                _.merge(this.uqs, this.uqsMan.uqsColl);\r\n                for (let i in this.uqs) {\r\n                    let p = i.indexOf('/');\r\n                    if (p < 0) continue;\r\n                    let uq = this.uqs[i];\r\n                    \r\n                    let n = i.substr(p+1);\r\n                    let l = n.toLowerCase();\r\n                    this.uqs[n] = uq;\r\n                    if (l !== n) this.uqs[l] = uq;\r\n                }\r\n                */\r\n                return;\r\n            }\r\n        }\r\n        return retErrors;\r\n    }\r\n\r\n    private showUnsupport(predefinedUnit: number) {\r\n        nav.clear();\r\n        this.openVPage(VUnsupportedUnit, predefinedUnit);\r\n    }\r\n}\r\n","//import * as React from 'react';\r\nimport { AppConfig, CAppBase } from './CAppBase';\r\n//import { AppUI, CApp } from './app';\r\n\r\n/*\r\nfunction convertUIKeyToLowercase(obj: any) {\r\n    for (let i in obj) {\r\n        let v = obj[i];\r\n        obj[i.toLowerCase()] = v;\r\n        if (typeof v !== 'object') continue;\r\n        if (React.isValidElement(v)) continue;\r\n        if (Array.isArray(v) !== true) {\r\n            convertUIKeyToLowercase(v);\r\n            continue;\r\n        }\r\n        for (let i of (v as any[])) {\r\n            convertUIKeyToLowercase(i);\r\n        }\r\n    }\r\n}\r\n*/\r\n// const appName = 'JKDev/jkOrder';\r\nexport async function start(CApp: new (config: AppConfig) => CAppBase, appConfig: AppConfig) {\r\n    //convertUIKeyToLowercase(ui);\r\n    //let cApp = new (ui && ui.CApp || CApp)(ui);\r\n    //await cApp.start();\r\n    let cApp = new CApp(appConfig);\r\n    await cApp.start();\r\n}\r\n","import { Controller } from \"../components\";\r\nimport { IConstructor } from \"./CAppBase\";\r\n\r\nexport abstract class CBase extends Controller {\r\n    protected readonly uqs: any;\r\n    readonly cApp: any;\r\n\r\n    constructor(cApp: any) {\r\n        super(undefined);\r\n        this.cApp = cApp;\r\n        this.uqs = cApp.uqs;\r\n        this.init();\r\n    }\r\n\r\n    protected init() {}\r\n\r\n    protected newC<T extends CBase>(type: IConstructor<T>):T {\r\n        return new type(this.cApp);\r\n    }\r\n\r\n    protected newSub<T extends CSub>(type: IConstructor<T>):T {\r\n        return new type(this);\r\n    }\r\n}\r\n\r\nexport abstract class CSub extends CBase {\r\n    protected readonly owner: CBase;\r\n\r\n    constructor(owner: CBase) {\r\n        super(owner.cApp);\r\n        this.owner = owner;\r\n    }\r\n}\r\n","export * from './CAppBase';\r\nexport * from './start';\r\nexport * from './CBase';","import * as React from 'react';\r\nimport { Schema, UiSchema, ItemSchema, UiItem, UiTextItem } from '../schema';\r\nimport { nav } from '../nav';\r\nimport { Page } from '../page';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\nimport { ItemEdit } from './itemEdit';\r\n\r\nexport class StringItemEdit extends ItemEdit {\r\n    protected uiItem: UiTextItem;\r\n    protected async internalStart():Promise<any> {\r\n        return new Promise<any>((resolve, reject) => {\r\n            let element = React.createElement(this.page, {resolve:resolve, reject:reject});\r\n            nav.push(element,reject);\r\n        });\r\n    }\r\n\r\n    private onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.newValue = evt.target.value;\r\n        let preValue = this.value;\r\n        this.isChanged = (this.newValue != preValue);\r\n    }\r\n\r\n    private onBlur = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.verifyValue();\r\n    }\r\n\r\n    private onFocus = () => {\r\n        this.error = undefined;\r\n    }\r\n\r\n    private page = observer((props:{resolve:(value:any)=>void, reject: (resean?:any)=>void}):JSX.Element => {\r\n        let {resolve, reject} = props;\r\n        let right = <button\r\n            className=\"btn btn-sm btn-success\"\r\n            disabled={!this.isChanged}\r\n            onClick={()=>{\r\n                this.verifyValue();\r\n                if (this.error === undefined) resolve(this.newValue);\r\n            }}>保存</button>;\r\n        return <Page header={'更改' + this.label} right={right}>\r\n            <div className=\"m-3\">\r\n                <input type=\"text\" \r\n                    onChange={this.onChange}\r\n                    onBlur={this.onBlur}\r\n                    onFocus={this.onFocus}\r\n                    className=\"form-control\" \r\n                    defaultValue={this.value} />\r\n                {\r\n                    this.uiItem && <div className=\"small muted m-2\">{this.uiItem.placeholder}</div>\r\n                }\r\n                {this.error && <div className=\"text-danger\">{this.error}</div>}\r\n            </div>\r\n        </Page>;\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { ItemSchema, UiRadio } from '../schema';\r\nimport { nav } from '../nav';\r\nimport { Page } from '../page';\r\nimport { observer } from 'mobx-react';\r\nimport { ItemEdit } from './itemEdit';\r\n\r\nexport class RadioItemEdit extends ItemEdit {\r\n    protected uiItem: UiRadio;\r\n\r\n    constructor(itemSchema: ItemSchema, uiItem:UiRadio, label:string, value: any) {\r\n        super(itemSchema, uiItem, label, value);\r\n        if (this.value === undefined) {\r\n            this.value = uiItem.defaultValue;\r\n        }\r\n    }\r\n\r\n    protected async internalStart():Promise<any> {\r\n        return new Promise<any>((resolve, reject) => {\r\n            let element = React.createElement(this.page, {resolve:resolve, reject:reject});\r\n            nav.push(element,reject);\r\n        });\r\n    }\r\n\r\n    private onChange = (value: any) => {\r\n        this.newValue = value;\r\n        let preValue = this.value;\r\n        this.isChanged = (this.newValue != preValue);\r\n    }\r\n\r\n    private page = observer((props:{resolve:(value:any)=>void, reject: (resean?:any)=>void}):JSX.Element => {\r\n        let {resolve, reject} = props;\r\n        let {name} = this.itemSchema;\r\n        let {list} = this.uiItem;\r\n        let right = <button\r\n            className=\"btn btn-sm btn-success\"\r\n            disabled={!this.isChanged}\r\n            onClick={()=>{\r\n                this.verifyValue();\r\n                if (this.error === undefined) resolve(this.newValue);\r\n            }}>保存</button>;\r\n        let content = list?\r\n            list.map((v, index:number) => {\r\n                let {title, value} = v;\r\n                return <label key={index} className=\"px-3 py-2 cursor-pointer\">\r\n                    <input name={name} type=\"radio\" value={value} \r\n                        onClick={()=>this.onChange(value)} \r\n                        defaultChecked={value === this.value} /> {title || value} &nbsp;\r\n                </label>;\r\n            })\r\n            :\r\n            <>no list defined</>;\r\n        return <Page header={'更改' + this.label} right={right}>\r\n            <div className=\"m-3\">{content}</div>\r\n        </Page>;\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { Schema, UiSchema, ItemSchema, UiItem, UiTextItem, UiSelect } from '../schema';\r\nimport { nav } from '../nav';\r\nimport { Page } from '../page';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\nimport { ItemEdit } from './itemEdit';\r\n\r\nexport class SelectItemEdit extends ItemEdit {\r\n    protected uiItem: UiSelect;\r\n    protected async internalStart():Promise<any> {\r\n        return new Promise<any>((resolve, reject) => {\r\n            let element = React.createElement(this.page, {resolve:resolve, reject:reject});\r\n            nav.push(element,reject);\r\n        });\r\n    }\r\n\r\n    private onChange = (value:any) => {\r\n        this.newValue = value;\r\n        let preValue = this.value;\r\n        this.isChanged = (this.newValue != preValue);\r\n    }\r\n\r\n    private page = observer((props:{resolve:(value:any)=>void, reject: (resean?:any)=>void}):JSX.Element => {\r\n        let {resolve, reject} = props;\r\n        let {list} = this.uiItem;\r\n        let content = list?\r\n            list.map((v, index:number) => {\r\n                let {title, value} = v;\r\n                return <div key={index} className=\"px-3 py-2 cursor-pointer bg-white mb-1\" onClick={()=>{this.onChange(value); resolve(this.newValue)}}>\r\n                    {title || value}\r\n                </div>;\r\n            })\r\n            :\r\n            <>no list defined</>;\r\n        return <Page header={'更改' + this.label}>\r\n            <div className=\"my-3\">\r\n                {content}\r\n            </div>\r\n        </Page>;\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { UiIdItem } from '../schema';\r\nimport { Page } from '../page';\r\nimport { observer } from 'mobx-react';\r\nimport { ItemEdit } from './itemEdit';\r\n\r\nexport class IdItemEdit extends ItemEdit {\r\n    protected uiItem: UiIdItem;\r\n    protected async internalStart():Promise<any> {\r\n        return new Promise<any>(async (resolve, reject) => {\r\n            //let element = React.createElement(this.page, {resolve:resolve, reject:reject});\r\n            //nav.push(element,reject);\r\n\r\n            let {pickId} = this.uiItem;\r\n            if (pickId === undefined) {\r\n                alert('IdItemEdit.pickId = undefined');\r\n                return;\r\n            }\r\n            let boxId = await pickId(undefined, undefined, this.value);\r\n            //if (typeof id === 'object') {\r\n            //    id = (id as any).id;\r\n            //}\r\n            this.onChange(boxId.id);\r\n            resolve(boxId);\r\n            //this.newValue = id;\r\n        });\r\n    }\r\n\r\n    protected async internalEnd():Promise<void> {}\r\n\r\n    private onChange = (value:any) => {\r\n        this.newValue = value;\r\n        let preValue = this.value;\r\n        this.isChanged = (this.newValue != preValue);\r\n    }\r\n\r\n    private page = observer((props:{resolve:(value:any)=>void, reject: (resean?:any)=>void}):JSX.Element => {\r\n        /*\r\n        let {resolve, reject} = props;\r\n        let {list} = this.uiItem;\r\n        let content = list?\r\n            list.map((v, index:number) => {\r\n                let {title, value} = v;\r\n                return <div key={index} className=\"px-3 py-2 cursor-pointer bg-white mb-1\" onClick={()=>{this.onChange(value); resolve(this.newValue)}}>\r\n                    {title || value}\r\n                </div>;\r\n            })\r\n            :\r\n            <>no list defined</>;\r\n        return <Page header={'更改' + this.label}>\r\n            <div className=\"my-3\">\r\n                {content}\r\n            </div>\r\n        </Page>;\r\n        */\r\n        return <Page header={'更改' + this.label}>\r\n            ddd\r\n        </Page>\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { observer } from 'mobx-react';\r\nimport { Schema, UiSchema, ItemSchema, UiItem, UiSelectBase, UiTextItem, UiIdItem, toUiSelectItems } from '../schema';\r\nimport { ItemEdit } from './itemEdit';\r\nimport { StringItemEdit } from './stringItemEdit';\r\nimport { ImageItemEdit } from './imageItemEdit';\r\nimport { Image } from '../image';\r\nimport { RadioItemEdit } from './radioItemEdit';\r\nimport { SelectItemEdit } from './selectItemEdit';\r\nimport { IdItemEdit } from './idItemEdit';\r\n\r\nexport interface EditProps {\r\n    className?: string;\r\n    schema: Schema;\r\n    data: any;\r\n    onItemClick?: (itemSchema: ItemSchema, uiItem: UiItem, value: any) => Promise<void>;\r\n    onItemChanged?: (itemSchema: ItemSchema, newValue:any, preValue:any) => Promise<void>;\r\n    stopEdit?: boolean;\r\n    uiSchema?: UiSchema;\r\n    sepClassName?: string;\r\n    topBorderClassName?: string;\r\n    bottomBorderClassName?: string;\r\n    rowContainerClassName?: string;\r\n}\r\n\r\n@observer\r\nexport class Edit extends React.Component<EditProps> {\r\n    private defaultSepClassName = 'border-top edit-sep-light-gray';\r\n    private defaultRowContainerClassName = 'd-flex px-3 py-2 bg-white align-items-center';\r\n    private topBorder:JSX.Element;\r\n    private bottomBorder:JSX.Element;\r\n    private rowContainerClassName?: string;\r\n    private sep:JSX.Element;\r\n    private uiSchema: {[name:string]: UiItem};\r\n\r\n    constructor(props: EditProps) {\r\n        super(props);\r\n        let {topBorderClassName, bottomBorderClassName, sepClassName, rowContainerClassName, uiSchema, stopEdit} = props;\r\n        this.topBorder = <div className={topBorderClassName || this.defaultSepClassName} />;\r\n        this.bottomBorder = <div className={bottomBorderClassName || this.defaultSepClassName} />;\r\n        this.rowContainerClassName = rowContainerClassName || this.defaultRowContainerClassName;\r\n        if (stopEdit !== true) this.rowContainerClassName += ' cursor-pointer';\r\n        this.sep = <div className={sepClassName || this.defaultSepClassName} />;\r\n        this.uiSchema = (uiSchema && uiSchema.items) || {};\r\n    }\r\n\r\n    render() {\r\n        let elItems:JSX.Element[] = [];\r\n        let {schema} = this.props;\r\n        let len = schema.length;\r\n\r\n        elItems.push(this.topBorder);\r\n        for (let i=0; i<len; i++) {\r\n            let itemSchema = schema[i];\r\n            if (i>0) elItems.push(this.sep);\r\n            let value = this.props.data[itemSchema.name];\r\n            elItems.push(this.renderRow(itemSchema, value));\r\n        }\r\n        elItems.push(this.bottomBorder);\r\n\r\n        return <div>\r\n            {elItems.map((v, index) => <React.Fragment key={index}>{v}</React.Fragment>)}\r\n        </div>;\r\n    }\r\n\r\n    private renderRow = (itemSchema: ItemSchema, value:any):JSX.Element => {\r\n        let {name, type, required} = itemSchema;\r\n        let divValue:any;\r\n        let uiItem = this.uiSchema[name];\r\n        let label:string;\r\n        if (uiItem === undefined) {\r\n            label = name;\r\n        }\r\n        else {\r\n            label = uiItem.label;\r\n            let templet = uiItem.Templet;\r\n            if (templet !== undefined) {\r\n                if (typeof templet === 'function')\r\n                    divValue = <b>{templet(value)}</b>;\r\n                else\r\n                    divValue = <b>{templet}</b>;\r\n            }\r\n            else if (value !== undefined) {\r\n                switch (uiItem.widget) {\r\n                    case 'radio':\r\n                    case 'select':\r\n                        let {list} = uiItem as UiSelectBase;\r\n                        divValue = <b>{list.find(v => v.value === value).title}</b>;\r\n                        break;\r\n                    case 'id':\r\n                        divValue = <b>no templet for {name}={value}</b>\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        //let value:any = this.props.data[name];\r\n        /*\r\n        if (uiItem !== undefined && value) {\r\n            switch (uiItem.widget) {\r\n                case 'radio':\r\n                case 'select':\r\n                    let {list} = uiItem as UiSelectBase;\r\n                    divValue = <b>{list.find(v => v.value === value).title}</b>;\r\n                    break;\r\n                case 'id':\r\n                    divValue = <b>no templet for {name}={value}</b>\r\n                    break;\r\n            }\r\n        }\r\n        */\r\n        if (divValue === undefined) {\r\n            switch (type) {\r\n                default:\r\n                    divValue = value? <b>{value}</b> : <small className=\"text-muted\">(无)</small>;\r\n                    break;\r\n                case 'image':\r\n                    divValue = <Image className=\"w-4c h-4c\" src={value} />;\r\n                    break;\r\n            }\r\n        }\r\n        let requireFlag = required===true && <span className=\"text-danger\">*</span>;\r\n        return <div className={this.rowContainerClassName} onClick={async ()=>await this.rowClick(itemSchema, uiItem, label, value)}>\r\n            <div className=\"w-6c\">{label} {requireFlag}</div>\r\n            <div className=\"flex-fill d-flex justify-content-end\">{divValue}</div>\r\n            {this.props.stopEdit!==true && <div className=\"w-2c text-right\"><i className=\"fa fa-angle-right\" /></div>}\r\n        </div>;\r\n    };\r\n\r\n    private rowClick = async (itemSchema: ItemSchema, uiItem: UiItem, label:string, value: any) => {\r\n        let {onItemChanged, onItemClick, stopEdit} = this.props;\r\n        if (stopEdit === true) return;\r\n        let changeValue:any;\r\n        if (onItemClick !== undefined) {\r\n            await onItemClick(itemSchema, uiItem, value);\r\n            return;\r\n        }\r\n        let itemEdit:ItemEdit = createItemEdit(itemSchema, uiItem, label, value);\r\n        if (itemEdit === undefined) {\r\n            alert('undefined: let itemEdit:ItemEdit = createItemEdit(itemSchema, uiItem, label, value);');\r\n            return;\r\n        }\r\n        try {\r\n            changeValue = await itemEdit.start();\r\n            if (changeValue != value) {\r\n                if (onItemChanged === undefined) {\r\n                    alert(`${itemSchema.name} value changed, new: ${changeValue}, pre: ${value}`);\r\n                    this.props.data[itemSchema.name] = changeValue;\r\n                }\r\n                else {\r\n                    await onItemChanged(itemSchema, changeValue, value);\r\n                }\r\n            }\r\n            await itemEdit.end();\r\n        }\r\n        catch (err) {\r\n            // 如果直接back，会触发reject，就到这里了\r\n            console.log('no value changed');\r\n        }\r\n    }\r\n}\r\n\r\nfunction createItemEdit(itemSchema: ItemSchema, uiItem:UiItem, label:string, value: any):ItemEdit {\r\n    let itemEdit: new (itemSchema: ItemSchema, uiItem:UiItem, label:string, value: any) => ItemEdit;\r\n    if (uiItem !== undefined) {\r\n        switch (uiItem.widget) {\r\n            default: break;\r\n            case 'id': itemEdit = IdItemEdit; break;\r\n            case 'text': itemEdit = StringItemEdit; break;\r\n            case 'image': itemEdit = ImageItemEdit; break;\r\n            case 'radio': itemEdit = RadioItemEdit; break;\r\n            case 'select': itemEdit = SelectItemEdit; break;\r\n        }\r\n    }\r\n    if (itemEdit === undefined) {\r\n        switch (itemSchema.type) {\r\n            case 'string': itemEdit = StringItemEdit; break;\r\n            case 'image': itemEdit = ImageItemEdit; break;\r\n        }\r\n    }\r\n    if (itemEdit === undefined) return;\r\n    return new itemEdit(itemSchema, uiItem, label, value);\r\n}\r\n","export * from './edit';\r\n","import * as React from 'react';\r\nimport { IObservableArray, computed } from 'mobx';\r\nimport { PageItems } from '../../tool/pageItems';\r\nimport {List} from './index';\r\n\r\nexport abstract class ListBase {\r\n    protected list: List;\r\n    constructor(list: List) {\r\n        this.list = list;\r\n    }\r\n    get isPaged():boolean {\r\n        let items = this.list.props.items;\r\n        return (items !== null && items !== undefined && Array.isArray(items) === false);\r\n    }\r\n    get items():any[]|IObservableArray<any> {\r\n        let items = this.list.props.items;\r\n        if (items === null) return null;\r\n        if (items === undefined) return undefined;\r\n        if (Array.isArray(items) === true)\r\n            return items as IObservableArray<any>;\r\n        else\r\n            return (items as PageItems<any>).items;\r\n    }\r\n    @computed get loading():boolean {\r\n        let items = this.list.props.items;\r\n        if (items === null) return false;\r\n        if (items === undefined) return true;\r\n        let pageItems = items as PageItems<any>;\r\n        if (pageItems.items === undefined) return false;\r\n        return pageItems.loading;\r\n    }\r\n    get selectedItems():any[] { return; }\r\n    //updateProps(nextProps:any) {}\r\n    dispose() {};\r\n    abstract render: (item:any, index:number) => JSX.Element;\r\n    protected renderContent(item:any, index:number) {\r\n        let {render} = this.list.props.item;\r\n        if (render === undefined) return <div className=\"px-3 py-2\">{JSON.stringify(item)}</div>;\r\n        return render(item, index);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport * as classNames from 'classnames';\r\nimport {ListBase} from './base';\r\n\r\nexport class Clickable extends ListBase {\r\n    render = (item:any, index:number):JSX.Element => {\r\n        let {className, key, onClick} = this.list.props.item;\r\n        return <li key={key===undefined?index:key(item)} className={classNames('va-row-clickable', className)} onClick={()=>onClick && onClick(item)}>\r\n            {this.renderContent(item, index)}\r\n        </li>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport * as classNames from 'classnames';\r\nimport {ListBase} from './base';\r\nimport { uid } from '../../tool/uid';\r\n\r\nexport class Static extends ListBase {\r\n    render = (item:any, index:number):JSX.Element => {\r\n        let {className, key, render} = this.list.props.item;\r\n        if (typeof item === 'string') {\r\n            let cn = classNames('va-list-gap', 'px-3', 'pt-1');\r\n            return <li key={uid()} className={cn}>{item}</li>;\r\n        }\r\n        return <li key={key===undefined?index:key(item)} className={classNames(className)}>\r\n            {this.renderContent(item, index)}\r\n        </li>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport {observable, computed, IObservableArray, isObservable, toJS, autorun, IReactionDisposer} from 'mobx';\r\nimport classNames from 'classnames';\r\nimport {ListBase} from './base';\r\nimport {uid} from '../../tool/uid';\r\nimport { PageItems } from '../../tool/pageItems';\r\nimport { List } from './index';\r\n\r\nexport interface SelectableItem {\r\n    selected: boolean;\r\n    item: any;\r\n    labelId: string;\r\n}\r\n\r\nexport class Selectable extends ListBase {\r\n    @observable private _items: SelectableItem[];\r\n    //private _selectedItems: any[];\r\n    private input: HTMLInputElement;\r\n    private disposer: IReactionDisposer;\r\n\r\n    constructor(list: List) {\r\n        super(list);\r\n        this.disposer = autorun(this.buildItems);\r\n        //this.buildItems();\r\n    }\r\n    dispose() {this.disposer()};\r\n    private buildItems = () => {\r\n        console.log('buildItems in selectable.tsx');\r\n        let {items, selectedItems, compare} = this.list.props;\r\n        let itemsArray:any[] | IObservableArray<any>;\r\n        if (items === undefined) {\r\n            this._items = undefined;\r\n            return;\r\n        }\r\n        if (items === null) {\r\n            this._items = null;\r\n            return;\r\n        }\r\n        if (Array.isArray(items) === true) {\r\n            itemsArray = items as any;\r\n        }\r\n        else {\r\n            itemsArray = (items as PageItems<any>).items;\r\n        }\r\n        //let items = this.items;\r\n        //this._selectedItems = selectedItems;\r\n\r\n        let comp: ((item:any, selectItem:any)=>boolean);\r\n        if (compare === undefined) {\r\n            comp = (item:any, selectItem:any) => item === selectItem;\r\n        }\r\n        else {\r\n            comp = compare;\r\n        }\r\n        let retItems = itemsArray.map(v => {\r\n            let isObserved = isObservable(v);\r\n            //let obj = isObserved === true? toJS(v) : v;\r\n            //let obj = v;\r\n            let selected = selectedItems === undefined?\r\n                false\r\n                : selectedItems.find(si => comp(v, si)) !== undefined;\r\n            return {\r\n                selected: selected, \r\n                item: v, \r\n                labelId:uid()\r\n            };\r\n        });\r\n        this._items = retItems;\r\n    }\r\n\r\n    get items() {\r\n        //if (this._items === undefined) \r\n        //this.buildItems();\r\n        return this._items;\r\n    }\r\n    selectAll() {\r\n        if (this._items) this._items.forEach(v => v.selected = true);\r\n    }\r\n    unselectAll() {\r\n        if (this._items) this._items.forEach(v => v.selected = false);\r\n    }\r\n    /*\r\n    updateProps(nextProps:any) {\r\n        if (nextProps.selectedItems === this._selectedItems) return;\r\n        this.buildItems();\r\n    }\r\n    */\r\n    private onSelect(item:SelectableItem, selected:boolean) {\r\n        item.selected = selected;\r\n        let anySelected = this._items.some(v => v.selected);\r\n        this.list.props.item.onSelect(item.item, selected, anySelected);\r\n    }\r\n    \r\n    get selectedItems():any[] {\r\n        return this._items.filter(v => v.selected === true).map(v => v.item);\r\n    }\r\n    /*\r\n    set selectedItems(value: any[]) {\r\n        if (value === undefined) return;\r\n        if (this._items === undefined) return;\r\n        let sLen = this._items.length;\r\n        let list = value.slice();\r\n        for (let n=0; n<sLen; n++) {\r\n            let sItem = this._items[n];\r\n            let len = list.length;\r\n            if (len === 0) break;\r\n            let item = sItem.item;\r\n            for (let i=0; i<len; i++) {\r\n                let v = list[i];\r\n                if (item === v) {\r\n                    sItem.selected = true;\r\n                    value.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n    }\r\n    */\r\n    //w-100 mb-0 pl-3\r\n    //m-0 w-100\r\n    render = (item:SelectableItem, index:number):JSX.Element => {\r\n        let {className, key, render, onSelect} = this.list.props.item;\r\n        let {labelId, selected, item:obItem} = item;\r\n        return <li key={key===undefined?index:key(item)} className={classNames(className)}>\r\n            <div className=\"d-flex align-items-center px-3\">\r\n                <input ref={input=>{\r\n                        if (!input) return;\r\n                        this.input = input; input.checked = selected;\r\n                    }}\r\n                    className=\"\" type=\"checkbox\" value=\"\" id={labelId}\r\n                    defaultChecked={selected}\r\n                    onChange={(e)=>{\r\n                        this.onSelect(item, e.target.checked)} \r\n                    }/>\r\n                <label className=\"\" style={{flex:1, marginBottom:0}} htmlFor={labelId}>\r\n                    {this.renderContent(obItem, index)}\r\n                </label>\r\n            </div>\r\n        </li>\r\n    }\r\n}\r\n/*\r\n<label>\r\n<label className=\"custom-control custom-checkbox\">\r\n    <input type='checkbox' className=\"custom-control-input\"\r\n        //checked={selected}\r\n        onChange={(e)=>this.onSelect(item, e.target.checked)} />\r\n    <span className=\"custom-control-indicator\" />\r\n</label>\r\n{this.renderContent(item.item, index)}\r\n</label>\r\n*/\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport {observer} from 'mobx-react';\r\nimport {PageItems} from '../../tool/pageItems';\r\nimport {ListBase} from './base';\r\nimport {Clickable} from './clickable';\r\nimport {Static} from './static';\r\nimport {Selectable} from './selectable';\r\nimport '../../css/va-list.css';\r\nimport { IObservableArray } from 'mobx';\r\n\r\ntype StaticRow = string|JSX.Element|(()=>string|JSX.Element);\r\n\r\nexport interface ListProps {\r\n    className?: string|string[];\r\n    items: any[] | IObservableArray<any> | PageItems<any>;\r\n    item: {\r\n        className?: string|string[];\r\n        render?: (item:any, index:number) => JSX.Element;\r\n        onSelect?: (item:any, isSelected:boolean, anySelected:boolean)=>void;\r\n        onClick?: (item:any)=>void;\r\n        key?: (item:any)=>string|number;\r\n    };\r\n    compare?:(item:any, selectItem:any)=>boolean;\r\n    selectedItems?:any[];\r\n    header?: StaticRow;\r\n    footer?: StaticRow;\r\n    before?: StaticRow;\r\n    loading?: StaticRow;\r\n    none?: StaticRow;\r\n}\r\n\r\n@observer\r\nexport class List extends React.Component<ListProps> {\r\n    private listBase: ListBase;\r\n    private selectable: Selectable;\r\n    constructor(props:ListProps) {\r\n        super(props);\r\n        this.buildBase();\r\n    }\r\n    _$scroll = (direct: 'top'|'bottom') => {\r\n        console.log('############### items scroll to ' + direct);\r\n    }\r\n    private buildBase() {\r\n        let {item} = this.props;\r\n        let {onClick, onSelect} = item;\r\n        if (onSelect !== undefined)\r\n            this.selectable = this.listBase = new Selectable(this);\r\n        else if (onClick !== undefined)\r\n            this.listBase = new Clickable(this);\r\n        else\r\n            this.listBase = new Static(this);\r\n    }\r\n    /*\r\n    componentWillUpdate(nextProps:ListProps, nextState, nextContext) {\r\n        //this.listBase.updateProps(nextProps);\r\n    }\r\n    */\r\n    componentWillUnmount() {\r\n        this.listBase.dispose();\r\n    }\r\n    selectAll() {\r\n        if (this.selectable) this.selectable.selectAll();\r\n    }\r\n    unselectAll() {\r\n        if (this.selectable) this.selectable.unselectAll();\r\n    }\r\n    get selectedItems():any[] {\r\n        return this.listBase.selectedItems;\r\n    }\r\n    render() {\r\n        let {className, header, footer, before, loading, none, item, selectedItems} = this.props;\r\n        if (before === undefined) before = '-';\r\n        if (loading === undefined) loading = () => <i className=\"fa fa-spinner fa-spin fa-2x fa-fw text-info\" />;\r\n        if (none === undefined) none = 'none';\r\n        //this.listBase.selectedItems = selectedItems;\r\n        let {isPaged, items, loading:isLoading} = this.listBase;\r\n        function staticRow(row:StaticRow, type:string) {\r\n            if (!row) return;\r\n            switch (typeof row) {\r\n                default:\r\n                case 'string': return <li className={\"va-list-\"+type}>{row}</li>;\r\n                case 'function': return <li className={\"va-list-\"+type}>{(row as ()=>string|JSX.Element)()}</li>;\r\n                case 'object': return <li>{row}</li>\r\n            } \r\n        }\r\n        let content:any, waitingMore:any;\r\n        if (items === null)\r\n            content = staticRow(before, 'before');\r\n        else if (items === undefined)\r\n            content = staticRow(loading, 'loading');\r\n        else if (items.length === 0)\r\n            content = staticRow(none, 'none');\r\n        else {\r\n            content = items.map((item, index) => {\r\n                return this.listBase.render(item, index);\r\n            });\r\n        }\r\n        if (isLoading === true && items) {\r\n            waitingMore = staticRow(loading, 'loading');\r\n        }\r\n        return <ul className={classNames('va-list', className)}>\r\n            {staticRow(header, 'header')}\r\n            {content}\r\n            {waitingMore}\r\n            {staticRow(footer, 'footer')}\r\n        </ul>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport className from 'classnames';\r\nimport {PropGridProps} from './PropGrid';\r\nimport {LabeledProp, StringProp, NumberProp, ListProp, ComponentProp} from './propView';\r\n\r\nexport abstract class PropRow {\r\n    setValues(values: any) {}\r\n    abstract render(key:string): any;\r\n}\r\n\r\nexport class PropBorder extends PropRow {\r\n    render(key:string): JSX.Element {\r\n        return <div key={'_b_' + key} className=\"\">\r\n            <div className=\"w-100\">\r\n                <div style={{borderTop: '1px solid #f0f0f0'}} />\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport class PropGap extends PropRow {\r\n    private param: string;\r\n    constructor(param?: string) {\r\n        super();\r\n        this.param = param;\r\n    }\r\n    render(key:string): JSX.Element {\r\n        let w: string;\r\n        switch (this.param) {\r\n            default: w = 'py-2'; break;\r\n            case '=': w = 'py-1'; break;\r\n            case '-': w = 'pb-1'; break;\r\n        }\r\n        let cn = className(w);\r\n        return <div key={'_g_' + key} className={cn} style={{backgroundColor: '#f0f0f0'}} />;\r\n    }\r\n}\r\n\r\nconst valueAlignStart = 'justify-content-start';\r\nconst valueAlignCenter = 'justify-content-center';\r\nconst valueAlignEnd = 'justify-content-end';\r\nexport abstract class LabeledPropRow extends PropRow {\r\n    protected gridProps: PropGridProps;\r\n    protected prop: LabeledProp;\r\n    protected content: any;\r\n    protected col: string;\r\n    //protected values: any;\r\n    constructor(gridProps:PropGridProps, prop: LabeledProp) {\r\n        super();\r\n        this.gridProps = gridProps;\r\n        this.prop = prop;\r\n        this.col = gridProps.labelFixLeft === true? 'col' : 'col-sm';\r\n        //this.values = values;\r\n    }\r\n    render(key:string):any {\r\n        let {onClick, bk} = this.prop;\r\n        let cn = className({\r\n            \"cursor-pointer\": onClick !== undefined,\r\n            \"bg-white\": bk === undefined, \r\n            \"row\": true\r\n        });\r\n        return <div key={key} className={cn} onClick={onClick}>\r\n            {this.renderLabel()}\r\n            {this.renderProp()}\r\n        </div>;\r\n    }\r\n    protected renderLabel():any {\r\n        let {label} = this.prop;\r\n        if (label === undefined) return null;\r\n        return <label className={this.col + '-3 col-form-label'}>\r\n            {label}\r\n        </label>;\r\n    }\r\n    protected renderProp():any {\r\n        let {label} = this.prop;\r\n        let align, vAlign;\r\n        switch (this.gridProps.alignValue) {\r\n            case 'left': align = valueAlignStart; break;\r\n            case 'center': align = valueAlignCenter; break;\r\n            case 'right': align = valueAlignEnd; break;\r\n        }\r\n        switch (this.prop.vAlign) {\r\n            case 'top': vAlign = 'align-items-start'; break;\r\n            default:\r\n            case 'center': vAlign = 'align-items-center'; break;\r\n            case 'bottom': vAlign = 'align-items-end'; break;\r\n            case 'stretch': vAlign = 'align-items-stretch'; break;\r\n        }\r\n        let col:string = this.col + (label===undefined? '-12':'-9');\r\n        let cn = className(align, vAlign, col, 'd-flex');\r\n        return <div className={cn}>\r\n            {this.renderPropBody()}\r\n        </div>;\r\n    }\r\n    protected renderPropBody():any {\r\n        return <div className=\"form-control-plaintext\">\r\n            {this.renderPropContent()}\r\n        </div>;\r\n    }\r\n    protected renderPropContent():any {\r\n        return this.content;\r\n    }\r\n}\r\n\r\nexport class StringPropRow extends LabeledPropRow {\r\n    protected prop: StringProp;\r\n    setValues(values:any) {\r\n        if (values === undefined) this.content = undefined;\r\n        else this.content = values[this.prop.name];\r\n    }\r\n}\r\n\r\nexport class NumberPropRow extends LabeledPropRow {\r\n    protected prop: NumberProp;\r\n    setValues(values:any) {\r\n        if (values === undefined) this.content = undefined;\r\n        else this.content = values[this.prop.name];\r\n    }\r\n}\r\n\r\nexport class ListPropRow extends LabeledPropRow {\r\n    protected prop: ListProp;\r\n    setValues(values:any) {\r\n        if (values === undefined) this.content = undefined;\r\n        else {\r\n            let list = this.prop.list;\r\n            if (typeof list === 'string') this.content = values[list];\r\n            else this.content = undefined;\r\n        }\r\n    }\r\n    protected renderPropBody() {\r\n        let {list, row} = this.prop;\r\n        let items:any[] = typeof list === 'string'? this.content : list;\r\n        if (items === undefined) return <div/>;\r\n        // new row(item)\r\n        return <div className=\"w-100\">\r\n            {\r\n                items.map((item, index) => <React.Fragment key={index}>\r\n                    {index===0? null: <div style={{width:'100%', borderBottom:'1px solid #f0f0f0'}} />}\r\n                    {React.createElement(row, item)}\r\n                </React.Fragment>)\r\n            }\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport class ComponentPropRow extends LabeledPropRow {\r\n    protected prop: ComponentProp;\r\n    protected renderPropBody() {\r\n        let {component} = this.prop;\r\n        return component;\r\n    }\r\n    protected renderProp():any {\r\n        let {label, full} = this.prop;\r\n        let align, vAlign;\r\n        switch (this.gridProps.alignValue) {\r\n            case 'left': align = valueAlignStart; break;\r\n            case 'center': align = valueAlignCenter; break;\r\n            case 'right': align = valueAlignEnd; break;\r\n        }\r\n        switch (this.prop.vAlign) {\r\n            case 'top': vAlign = 'align-items-start'; break;\r\n            default:\r\n            case 'center': vAlign = 'align-items-center'; break;\r\n            case 'bottom': vAlign = 'align-items-end'; break;\r\n            case 'stretch': vAlign = 'align-items-stretch'; break;\r\n        }\r\n        let col:string;\r\n        if (full !== true)\r\n            col = this.col + (label===undefined? '-12':'-9');\r\n        else\r\n            col = 'w-100';\r\n        let cn = className(align, vAlign, col, 'd-flex');\r\n        return <div className={cn}>\r\n            {this.renderPropBody()}\r\n        </div>;\r\n    }\r\n}\r\n","import { PropGridProps } from './PropGrid';\r\nimport {\r\n    PropRow, PropBorder, PropGap, \r\n    StringPropRow, NumberPropRow, ListPropRow, ComponentPropRow\r\n} from './row';\r\n\r\nexport interface Format {\r\n\r\n}\r\n\r\nexport interface PropBase {\r\n    onClick?: () => void;\r\n}\r\n\r\nexport interface LabeledProp extends PropBase {\r\n    label?: string;\r\n    bk?: string;\r\n    vAlign?: 'top' | 'bottom' | 'center' | 'stretch';\r\n}\r\n\r\nexport interface StringProp extends LabeledProp {\r\n    type: 'string';\r\n    name: string;\r\n}\r\n\r\nexport interface NumberProp extends LabeledProp {\r\n    type: 'number';\r\n    name: string;\r\n}\r\n\r\nexport interface FormatProp extends LabeledProp {\r\n    type: 'format';\r\n    format: Format;\r\n}\r\n\r\nexport interface ListProp extends LabeledProp {\r\n    type: 'list';\r\n    list: string | any[];  // string 表示名字，否则就是值\r\n    row: new (props: any) => React.Component;\r\n}\r\n\r\nexport interface ComponentProp extends LabeledProp {\r\n    type: 'component';\r\n    full?: boolean;\r\n    component: any; //JSX.Element;\r\n}\r\n\r\nexport type Prop = StringProp | NumberProp | FormatProp | ListProp | ComponentProp | string;\r\n\r\nexport class PropView {\r\n    private gridProps: PropGridProps\r\n    private props: Prop[];\r\n    //private values:any;\r\n    private rows: PropRow[];\r\n\r\n    constructor(gridProps: PropGridProps, props: Prop[]) {\r\n        this.gridProps = gridProps;\r\n        this.props = props;\r\n        //this.values = values;\r\n        this.buildRows();\r\n    }\r\n\r\n    private buildRows() {\r\n        this.rows = [];\r\n        let isGap: boolean = true;\r\n        for (let prop of this.props) {\r\n            if (typeof prop === 'string') {\r\n                this.rows.push(new PropGap(prop));\r\n                isGap = true;\r\n            }\r\n            else {\r\n                if (!isGap) this.rows.push(new PropBorder());\r\n                let row;\r\n                switch (prop.type) {\r\n                    default: continue;\r\n                    case 'string': row = new StringPropRow(this.gridProps, prop); break;\r\n                    case 'number': row = new NumberPropRow(this.gridProps, prop); break;\r\n                    case 'list': row = new ListPropRow(this.gridProps, prop); break;\r\n                    case 'component': row = new ComponentPropRow(this.gridProps, prop); break;\r\n                }\r\n                this.rows.push(row);\r\n                isGap = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    setValues(values: any) {\r\n        for (let r of this.rows) r.setValues(values);\r\n    }\r\n\r\n    render() {\r\n        return this.rows.map((row, index) => row.render(String(index)));\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport {observer} from 'mobx-react';\r\nimport {Prop, PropView} from './propView';\r\n\r\nexport interface PropGridProps {\r\n    className?: string;\r\n    rows: Prop[];\r\n    values: any;\r\n    alignValue?: 'left'|'center'|'right';\r\n    labelFixLeft?: boolean;\r\n}\r\n\r\n@observer\r\nexport class PropGrid extends React.Component<PropGridProps> {\r\n    render() {\r\n        let {className, rows, values} = this.props;\r\n        let propView = new PropView(this.props, rows);\r\n        propView.setValues(values);\r\n        let cn = classNames('container-fluid', className);\r\n        return <div className={cn}>\r\n            {propView.render()}\r\n        </div>;\r\n    }\r\n}\r\n","export * from './propView';\r\nexport * from './row';\r\nexport * from './PropGrid';\r\n","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport classNames from 'classnames';\r\nimport { IObservableValue } from 'mobx/lib/internal';\r\nimport '../../css/va-tab.css';\r\n\r\nexport type TabCaption = (selected: boolean) => JSX.Element;\r\n\r\nexport interface TabProp {\r\n    name: string;\r\n    caption: TabCaption;\r\n    content: () => JSX.Element;\r\n    notify?: IObservableValue<number>;\r\n    load?: () => Promise<void>;\r\n}\r\n\r\nexport interface TabsProps {\r\n    tabs: TabProp[];\r\n    tabPosition?: 'top' | 'bottom';\r\n    size?: 'sm' | 'lg' | 'md';\r\n    tabBack?: string;\r\n    contentBack?: string;\r\n    sep?: string;\r\n    selected?: string;\r\n}\r\n\r\nclass Tab {\r\n    name: string;\r\n    @observable selected: boolean;\r\n    caption: TabCaption;\r\n    contentBuilder: () => JSX.Element;\r\n    notify: IObservableValue<number>;\r\n    load?: () => Promise<void>;\r\n\r\n    private _content: JSX.Element;\r\n\r\n    get content(): JSX.Element {\r\n        if (this.selected !== true) return this._content;\r\n        if (this._content !== undefined) return this._content;\r\n        return this._content = this.contentBuilder();\r\n    }\r\n\r\n    async start() {\r\n        //if (this._content !== undefined) return;\r\n        if (this.load === undefined) return;\r\n        await this.load();\r\n    }\r\n}\r\n\r\nexport const TabCaptionComponent = (label: string, icon: string, color: string) => <div\r\n    className={'d-flex justify-content-center align-items-center flex-column cursor-pointer ' + color}>\r\n    <div><i className={'fa fa-lg fa-' + icon} /></div>\r\n    <small>{label}</small>\r\n</div>;\r\n\r\n@observer export class Tabs extends React.Component<TabsProps> {\r\n    private size: string;\r\n    private tabBack: string;\r\n    private contentBack: string;\r\n    private sep: string;\r\n    @observable private selectedTab: Tab;\r\n    @observable private tabs: Tab[];\r\n\r\n    constructor(props: TabsProps) {\r\n        super(props);\r\n        let { size, tabs, tabBack, contentBack, sep, selected } = this.props;\r\n        this.size = size || 'md';\r\n        this.tabs = tabs.map(v => {\r\n            let tab = new Tab();\r\n            tab.name = v.name;\r\n            tab.selected = false;\r\n            tab.caption = v.caption;\r\n            tab.contentBuilder = v.content;\r\n            tab.notify = v.notify;\r\n            tab.load = v.load;\r\n            return tab;\r\n        });\r\n        this.tabBack = tabBack || 'bg-light';\r\n        this.contentBack = contentBack;\r\n        this.sep = sep || 'border-top border-gray';\r\n        if (selected !== undefined) {\r\n            this.selectedTab = this.tabs.find(v => v.name === selected);\r\n        }\r\n        if (this.selectedTab === undefined) this.selectedTab = this.tabs[0];\r\n        this.selectedTab.selected = true;\r\n    }\r\n\r\n    async componentWillMount() {\r\n        if (this.tabs === undefined) return;\r\n        if (this.tabs.length === 0) return;\r\n        let tab = this.tabs[0];\r\n        await tab.start();\r\n    }\r\n\r\n    private tabClick = async (tab: Tab) => {\r\n        await tab.start();\r\n        this.selectedTab.selected = false;\r\n        tab.selected = true;\r\n        this.selectedTab = tab;\r\n    }\r\n\r\n    showTab(tabName: string) {\r\n        let tab = this.tabs.find(v => v.name === tabName);\r\n        if (tab === undefined) return;\r\n        if (this.selectedTab !== undefined) this.selectedTab.selected = false;\r\n        tab.selected = true;\r\n        this.selectedTab = tab;\r\n    }\r\n\r\n    render() {\r\n        let cn = classNames('tab', 'tab-' + this.size);\r\n        let content = <div className={classNames(this.contentBack, 'tab-content')}>\r\n            {this.tabs.map((v, index) => {\r\n                let style: React.CSSProperties = {\r\n                    display: v.selected === true ? undefined : 'none'\r\n                };\r\n                return <div key={index} style={style}>{v.content}</div>;\r\n            })}\r\n        </div>;\r\n\r\n        let tabs = <div className={classNames(this.tabBack, this.sep, 'tab-tabs')}>\r\n            {this.tabs.map((v, index) => {\r\n                let { selected, caption, notify } = v;\r\n                let notifyCircle: any;\r\n                if (notify !== undefined) {\r\n                    let num = notify.get();\r\n                    if (num !== undefined) {\r\n                        if (num > 0) notifyCircle = <u>{num > 99 ? '99+' : num}</u>;\r\n                        else if (num < 0) notifyCircle = <u className=\"dot\" />;\r\n                    }\r\n                }\r\n                return <div key={index} className=\"\" onClick={() => this.tabClick(v)}>\r\n                    <div className=\"align-self-center\">\r\n                        {notifyCircle}\r\n                        {caption(selected)}\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </div>;\r\n\r\n        return <div className={cn}>\r\n            {\r\n                this.props.tabPosition === 'top' ?\r\n                    <>{tabs}{content}</> :\r\n                    <>{content}{tabs}</>\r\n            }\r\n        </div>\r\n    }\r\n};\r\n","export * from './tabs';\r\n","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { VPage, Page, Form, ItemSchema, UiSchema, StringSchema, UiTextItem, UiPasswordItem, ButtonSchema, Edit, ImageSchema, nav, UiImageItem } from '../components';\r\nimport { userApi } from './userApi';\r\n\r\nexport class EditMeInfo extends React.Component {\r\n    private schema:ItemSchema[] = [\r\n        {name:'nick', type:'string'} as StringSchema,\r\n        {name:'icon', type:'image'} as ImageSchema\r\n    ];\r\n    private uiSchema:UiSchema = {\r\n        items: {\r\n            nick: {widget:'text', label:'别名', placeholder:'好的别名更方便记忆'} as UiTextItem,\r\n            icon: {widget:'image', label:'头像'} as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data:any;\r\n\r\n    constructor(props:any) {\r\n        super(props);\r\n        let {nick, icon} = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema:ItemSchema, newValue:any, preValue:any) => {\r\n        let {name} = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    render() {\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={this.schema} uiSchema={this.uiSchema}\r\n                data={this.data}\r\n                onItemChanged={this.onItemChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n","// export {default as LoginView} from './login';\r\nexport * from './meInfo';\r\nexport { userApi } from './userApi';","import * as React from 'react';\r\nimport {FetchError} from '../net/fetchError';\r\nimport { refetchApi } from '../net';\r\n\r\nexport interface FetchErrorProps extends FetchError {\r\n    clearError: ()=>void\r\n}\r\n\r\nexport default class FetchErrorView extends React.Component<FetchErrorProps, null> {\r\n    private reApi = async () => {\r\n        this.props.clearError();\r\n        const {channel, url, options, resolve, reject} = this.props;\r\n        await refetchApi(channel, url, options, resolve, reject);\r\n    }\r\n    private close = async () => {\r\n        this.props.clearError();\r\n    }\r\n    render() {\r\n        let {error, url} = this.props;\r\n            //let errMsg = fetchError.errorMsg;\r\n        let errContent;\r\n        if (typeof error === 'object') {\r\n            let err = [];\r\n            for (let i in error) {\r\n                err.push(<li key={i}><label>{i}</label><div>{error[i]}</div></li>);\r\n            }\r\n            errContent = <ul>{err}</ul>;\r\n        }\r\n        else {\r\n            errContent = <div>{error}</div>;\r\n        }\r\n        return <li>\r\n            <article className=\"page-container\">\r\n                <section>\r\n                    <div  className=\"va-error\">\r\n                        <div>网络出现问题</div>\r\n                        <div>点击重新访问</div>\r\n                        <div>url: {url}</div>\r\n                        {errContent}\r\n                        <div className=\"p-3\">\r\n                            <button type='button' onClick={this.reApi}>重新API</button>\r\n                            <button type='button' onClick={this.close}>关闭</button>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </article>\r\n        </li>;\r\n    }\r\n}\r\n","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nexport const tvAddress = (values: any) => {\r\n    let { country, province, city, county } = values;\r\n    return <>\r\n        {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nexport const tvCountry = (values: any) => {\r\n    return <> {values.chineseName} </>;\r\n}\r\n\r\nexport const tvCurrency = (values: any) => {\r\n    return <> {values.name} </>;\r\n}\r\n\r\nexport const common = {\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    currency: tvCurrency,\r\n};\r\n","import * as React from 'react';\r\nimport { Image } from 'tonva';\r\n\r\nconst imagePath = \"http://www.jkchemical.com/static/Structure/\";\r\nconst altimagePath = \"http://www.jkchemical.com/static/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')} style={style} className={className} altImage={altimagePath} />;\r\n}\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\nimport { ProductImage } from '../../tools/productImage';\r\n\r\nexport const tvProduct = (values: any) => {\r\n    let product = values;\r\n    let { brand, description, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"row d-flex\">\r\n        <div className=\"col-12\">\r\n            <div className=\"row py-2\">\r\n                <div className=\"col-12\"><strong>{description}</strong></div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {item('CAS', CAS)}\r\n                        {item('纯度', purity)}\r\n                        {item('分子式', molecularFomula)}\r\n                        {item('分子量', molecularWeight)}\r\n                        {item('产品编号', origin)}\r\n                        {tv(brand, (values: any) => <>{item(\"品牌\", values.name)}</>)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n};\r\n\r\nconst tvPackx = (values: any) => {\r\n    let { radiox, radioy, unit } = values;\r\n    if (radiox !== 1) return <>{radiox} * {radioy}{unit}</>;\r\n    return <>{radioy}{unit}</>;\r\n}\r\n\r\nfunction item(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 text-muted pr-0\">{caption}:</div>\r\n        <div className=\"col-8\">{value}</div>\r\n    </>;\r\n}\r\n\r\nconst tvProductCategory = (values: any) => {\r\n    let { children } = values;\r\n    return <>\r\n        aaa\r\n    </>\r\n};\r\n\r\nexport const product = {\r\n    productx: tvProduct,\r\n    packx: tvPackx,\r\n    productCategory: tvProductCategory,\r\n}\r\n","import { TVs } from \"tonva\";\r\nimport { common } from \"./common\";\r\nimport { warehouse } from \"./warehouse\";\r\nimport { product } from \"./product\";\r\nimport { salesTask } from './salesTask';\r\n\r\nexport const tvs:TVs = {\r\n    salesTask: salesTask,\r\n    common: common,\r\n    warehouse: warehouse,\r\n    product: product,\r\n}\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nconst tvSalestask = (values: any) => {\r\n    let { desciption, customer, type, sourceid } = values;\r\n    return <>\r\n        {tv(desciption)}{tv(customer)}{tv(type)}{tv(sourceid)}\r\n    </>\r\n};\r\n\r\nexport const salesTask = {\r\n    salesTask: tvSalestask    \r\n}","import * as React from 'react';\r\n\r\nconst tvWarehouse = (values: any) => {\r\n    let { name } = values;\r\n    return <div>\r\n        {name}\r\n    </div>\r\n}\r\n\r\nexport const warehouse = {\r\n    warehouse: tvWarehouse,\r\n}\r\n","import * as React from 'react';\r\nimport logo from '../images/logo.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center\">\r\n    <img className=\"h-3c position-absolute\" src={logo} />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">轻代理</span>\r\n    </div>\r\n</div>;","import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page, Tabs, TabProp } from 'tonva';\r\nimport { CSalesTaskApp } from 'CSalesTaskApp';\r\nimport { observable } from 'mobx';\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VHome extends VPage<CSalesTaskApp> {\r\n    async open(param?: any) {\r\n        this.calcSum();\r\n        this.openPage(this.render);\r\n\r\n    }\r\n\r\n    render = (param?: any): JSX.Element => {\r\n        let { cSalesTask, cCustomer, cProduct, cMe, cMessage } = this.controller;\r\n        let faceTabs: any[] = [\r\n            { name: 'home', label: '任务', content: cSalesTask.tab, icon: 'home', notify: undefined/*store.homeCount*/ },\r\n            { name: 'member', label: '客户', content: cCustomer.tab, icon: 'vcard' },\r\n            { name: 'member', label: '产品', content: cProduct.tab, icon: 'flask' },\r\n            { name: 'member', label: '我的', content: cMe.tab, icon: 'user', load: cMe.load, notify: cMessage.count }\r\n        ].map(v => {\r\n            let { name, label, icon, content, notify, load } = v;\r\n            return {\r\n                name: name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                content: content,\r\n                notify: notify,\r\n                load: load,\r\n            }\r\n        });\r\n        return <Page header={false}>\r\n            <Tabs tabs={faceTabs} />\r\n        </Page>;\r\n    }\r\n\r\n    count = observable.box<number>(0);\r\n    protected calcSum = () => {\r\n        this.count.set(0);\r\n    }\r\n\r\n}\r\n","import { CSub, CBase } from \"tonva\";\r\nimport { UQs } from \"./uqs\";\r\n\r\nexport abstract class CUqBase extends CBase {\r\n    protected readonly uqs: UQs;\r\n}\r\n\r\nexport abstract class CUqSub extends CSub {\r\n    protected readonly uqs: UQs;\r\n    protected readonly owner: CUqBase;\r\n}\r\n","import { Entity } from 'tonva';\r\nimport { CApp } from '../CApp';\r\n//import { CSalesTaskApp } from 'CSalesTaskApp';\r\n\r\nexport abstract class Loader<T> {\r\n    protected cApp: CApp;\r\n    private entities: Entity[] = [];\r\n    private schemaLoaded: boolean = false;\r\n    constructor(cApp: CApp) {\r\n        this.cApp = cApp;\r\n        //this.initEntities();\r\n    }\r\n\r\n    //protected abstract initEntities(): void;\r\n\r\n    protected async loadSchemas() {\r\n        if (this.schemaLoaded === true) return;\r\n        await Promise.all(this.entities);\r\n        this.schemaLoaded = true;\r\n    }\r\n\r\n    async load(param: any): Promise<T> {\r\n        await this.loadSchemas();\r\n        let data = this.initData();\r\n        await this.loadToData(param, data);\r\n        return data;\r\n    }\r\n    protected abstract async loadToData(param: any, data: T): Promise<void>;\r\n    protected abstract initData(): T;\r\n}\r\n","import _ from 'lodash';\r\nimport { Tuid, TuidDiv, Map, Query } from 'tonva';\r\nimport { ProductPackRow } from './Product';\r\nimport { Loader } from '../mainSubs/loader';\r\nimport { MainSubs, MainProductChemical, MainBrand } from '../mainSubs';\r\n\r\nexport class LoaderBrand extends Loader<MainBrand> {\r\n    //private brandTuid: Tuid;\r\n\r\n    /*\r\n    protected initEntities() {\r\n        let { cUqProduct } = this.cApp;\r\n        this.brandTuid = cUqProduct.tuid('brand');\r\n    }\r\n    */\r\n\r\n    protected async loadToData(brandId: number, data: MainBrand): Promise<void> {\r\n        let brand = await this.cApp.uqs.product.Brand.load(brandId);\r\n        data.id = brand.id;\r\n        data.name = brand.name;\r\n    }\r\n\r\n    protected initData(): MainBrand {\r\n        return {} as MainBrand;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemical extends Loader<MainProductChemical> {\r\n    /*\r\n    private productTuid: Tuid;\r\n    private packTuid: TuidDiv;\r\n    private productChemicalMap: Map;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.packTuid = this.productTuid.div['packx'];\r\n        this.productChemicalMap = cUqProduct.map('productChemical');\r\n    }\r\n    */\r\n\r\n    protected async loadToData(productId: number, data: MainProductChemical): Promise<void> {\r\n\r\n        let product = await this.cApp.uqs.product.ProductX.load(productId);\r\n        _.merge(data, product);\r\n\r\n        let brandLoader = new LoaderBrand(this.cApp);\r\n        data.brand = await brandLoader.load(data.brand.id);\r\n\r\n        let productChemical = await this.cApp.uqs.product.ProductChemical.obj({ product: productId });\r\n        if (productChemical) {\r\n            let { chemical, purity, CAS, molecularFomula, molecularWeight } = productChemical;\r\n            data.chemical = chemical;\r\n            data.purity = purity;\r\n            data.CAS = CAS;\r\n            data.molecularFomula = molecularFomula;\r\n            data.molecularWeight = molecularWeight;\r\n        }\r\n\r\n        data.packs = [];\r\n        product.packx.forEach(e => {\r\n            // let { id, radiox, radioy, unit } = e;\r\n            data.packs.push(e);\r\n        });\r\n    }\r\n\r\n    protected initData(): MainProductChemical {\r\n        return {} as MainProductChemical;\r\n    }\r\n}\r\n\r\nexport class LoaderProductChemicalWithPrices extends Loader<MainSubs<MainProductChemical, ProductPackRow>> {\r\n    /*\r\n    private priceMap: Map;\r\n    private agentPriceMap: Map;\r\n    private getInventoryAllocationQuery: Query;\r\n    private getFutureDeliveryTime: Query;\r\n    private getPromotionPackQuery: Query;\r\n\r\n    protected initEntities() {\r\n\r\n        let { cUqProduct, cUqWarehouse, cUqPromotion } = this.cApp;\r\n        this.priceMap = cUqProduct.map('pricex');\r\n        this.agentPriceMap = cUqProduct.map('AgentPrice');\r\n        this.getInventoryAllocationQuery = cUqWarehouse.query(\"getInventoryAllocation\");\r\n        this.getFutureDeliveryTime = cUqProduct.query(\"getFutureDeliveryTime\");\r\n        this.getPromotionPackQuery = cUqPromotion.query(\"getPromotionPack\");\r\n    }\r\n    */\r\n\r\n    protected initData(): MainSubs<MainProductChemical, ProductPackRow> {\r\n        return { main: {} as MainProductChemical, subs: [] as ProductPackRow[] };\r\n    }\r\n\r\n    protected async loadToData(productId: any, data: MainSubs<MainProductChemical, ProductPackRow>): Promise<void> {\r\n        let uqProduct = this.cApp.uqs.product;\r\n        let productLoader = new LoaderProductChemical(this.cApp);\r\n        data.main = await productLoader.load(productId);\r\n\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        let { id: currentSalesRegionId } = currentSalesRegion;\r\n        let prices = await uqProduct.PriceX.table({ product: productId, salesRegion: currentSalesRegionId });\r\n        let agentprices = await uqProduct.AgentPrice.table({ product: productId, salesRegion: currentSalesRegionId });\r\n        data.subs = prices;\r\n        let promises: PromiseLike<any>[] = [];\r\n        data.subs.forEach(v => {\r\n            promises.push(this.cApp.uqs.warehouse.GetInventoryAllocation.table({ product: productId, pack: v.pack, salesRegion: currentSalesRegion }));\r\n            promises.push(this.cApp.uqs.promotion.GetPromotionPack.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n\r\n        let fd = await this.getFutureDeliveryTimeDescription(productId, currentSalesRegionId);\r\n        for (let i = 0; i < data.subs.length; i++) {\r\n            data.subs[i].futureDeliveryTimeDescription = fd;\r\n            data.subs[i].inventoryAllocation = results[i * 2];\r\n            let aa = this.getagentPrices(agentprices, data.subs[i].pack.id);\r\n            // data.subs[i].agentPrices = aa;\r\n            let promotion = results[i * 2 + 1];\r\n            let discount = promotion && promotion.discount;\r\n            if (discount) {\r\n                data.subs[i].promotionPrice = Math.round((1 - discount) * data.subs[i].retail);\r\n            }\r\n\r\n            for (let j = 0; j < agentprices.length; j++) {\r\n                let pid = agentprices[j].pack.id;\r\n                let pidx = data.subs[i].pack.id;\r\n                if (pidx == pid) {\r\n                    data.subs[i].agentPrice = agentprices[j].agentPrice;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    getagentPrices = async (agents: any[], pack: any) => {\r\n        for (let i = 0; i < agents.length; i++) {\r\n            let { pack: packid, agentprice } = agents[i];\r\n            if (packid = pack) {\r\n                return agentprice;\r\n            }\r\n        }\r\n    }\r\n\r\n    private getFutureDeliveryTimeDescription = async (productId: number, salesRegionId: number) => {\r\n        let futureDeliveryTime = await this.cApp.uqs.product.GetFutureDeliveryTime.table({ product: productId, salesRegion: salesRegionId });\r\n        if (futureDeliveryTime.length > 0) {\r\n            let { minValue, maxValue, unit, deliveryTimeDescription } = futureDeliveryTime[0];\r\n            return minValue + (maxValue > minValue ? '~' + maxValue : '') + ' ' + unit;\r\n        }\r\n    }\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { VPage, Page, PageItems, Image } from 'tonva';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { List, LMR, EasyDate, FA } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { tv } from 'tonva';\r\n\r\nexport class VMain extends VPage<CSalesTask> {\r\n\r\n    private tasklist: any;\r\n    async open(param: any) {\r\n\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n        return <this.page />;\r\n    }\r\n\r\n    private onScrollBottom = async () => {\r\n    }\r\n\r\n    //选择任务\r\n    private onSalesTaskClick = async (param: any) => {\r\n        let task = {\r\n            id: param.id,\r\n            type: param.type,\r\n            biz: param.biz,\r\n            description: param.description,\r\n            remindDate: null,\r\n            deadline: param.deadline,\r\n            customer: param.customer\r\n        }\r\n        this.controller.showTaskDetailEdit(task);\r\n    }\r\n\r\n    //添加任务\r\n    private onSalesTaskAdd = async () => {\r\n        await this.controller.showSelectTaskType();\r\n    }\r\n\r\n    private renderSalesTask = (salesTask: any, index: number) => {\r\n\r\n        let { bizName, deadline, biz, customer, type, typeName, priorty } = salesTask;\r\n        let cnFlag = classNames({\r\n            'my-1 mr-3': true,\r\n            'text-danger': priorty > 0,\r\n            'text-info': !(priorty > 0)\r\n        })\r\n\r\n        let left = <div className={cnFlag}>{this.controller.getTaskIcon(bizName)}</div>;\r\n        let right = <div className=\"text-right\">\r\n            {deadline && <small className=\"text-muted\">时限：<EasyDate date={deadline} /></small>}\r\n        </div>\r\n        return <LMR className=\"px-3 py-2\" left={left}>\r\n            <LMR className=\"\" right={right}>\r\n                <div className=\"font-weight-bold\">{tv(customer, (v) => <>{v.name}</>)}</div>\r\n            </LMR>\r\n            <LMR className=\"\" right={<div className=\"text-muted\"><small>{tv(type, (v) => <>{v.description}</>)}</small></div>}>\r\n                <div className=\"text-muted\" ><small>{tv(biz, (v) => <>{v.description}</>)}</small></div>\r\n            </LMR>\r\n        </LMR>\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { tasks } = this.controller;\r\n        if (tasks === undefined) return null;\r\n\r\n        let none = <div className=\"my-3 mx-2\" style={{ color: '#888' }}>无任务</div>;\r\n        let right = <div onClick={this.onSalesTaskAdd} className=\"cursor-pointer px-3 py-2\"><FA name=\"plus\" /></div>;\r\n        let left = <div> 销售助手</div>\r\n        let item = { render: this.renderSalesTask, onClick: this.onSalesTaskClick };\r\n        let { tasksNow, dateTasksList } = tasks;\r\n\r\n        return <Page header=\"销售助手\" onScrollBottom={this.onScrollBottom} right={right} headerClassName=\"bg-primary pl-3\">\r\n            {tasksNow.length == 0 && dateTasksList.length == 0 && none}\r\n            {tasksNow.length > 0 && <List before={''} none={none} items={tasksNow} item={item} />}\r\n            {\r\n                dateTasksList.map((v, index: number) => {\r\n                    let { date, list } = v;\r\n                    if (list.length === 0) return null;\r\n                    return <React.Fragment key={index}>\r\n                        <div className=\"small text-muted pt-3 px-3 pb-2 text-center\"><EasyDate date={date} /></div>\r\n                        <List before={''} none={none} items={list} item={item} />\r\n                    </React.Fragment>;\r\n                })\r\n            }\r\n        </Page>\r\n    });\r\n\r\n}\r\n\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { View } from 'tonva';\r\nimport { CType } from '../CType';\r\nimport { PropGrid, Prop, LMR, ComponentProp, FA, EasyDate } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { Task } from '../../model';\r\n\r\nconst cnRow = 'w-100 py-3';\r\nconst cnRowCustor = classNames(cnRow, 'cursor-pointer');\r\nconst right = <div className=\"w-2c text-right\"><i className=\"fa fa-chevron-right\" /></div>;\r\n\r\nexport class VDetailTop extends View<CType> {\r\n\r\n    render(task: Task) {\r\n\r\n        let { showCustomerDetail, showTaskHistory } = this.controller.cSalesTask;\r\n        let { type, biz, customer, description, deadline, id } = task;\r\n\r\n        let onShowSalesTaskHistory = async () => await showTaskHistory(id);\r\n        let onClickCustomer = async () => await showCustomerDetail(customer.id);\r\n\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                name: 'type',\r\n                component: <LMR className={cnRowCustor}\r\n                    left={<div className=\"mr-2 \"> <FA name=\"bookmark-o\" className=\"text-info mr-2 pt-1\" /> </div>}>\r\n                    <span className=\"font-weight-bold mr-3 my-3\">{tv(type, v => <>{v.description}</>)} </span>  {tv(biz, v => <>{v.description}</>)}\r\n                </LMR>,\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className={cnRowCustor} onClick={onClickCustomer}\r\n                    left={<div className=\"mr-2\"> <FA name=\"user\" className=\"text-info mr-2 pt-1\" /> </div>}\r\n                    right={right}>\r\n                    {tv(customer, v => <>{v.name}</>)}\r\n                </LMR>,\r\n            } as ComponentProp,\r\n\r\n        ];\r\n        if (deadline) {\r\n            rows.push({\r\n                type: 'component',\r\n                name: 'deadline',\r\n                component: <LMR className={cnRow}\r\n                    left={<div className=\"mr-2\"> <FA name=\"clock-o\" className=\"text-info mr-2 pt-1 \" /> </div>}>\r\n                    {<EasyDate date={deadline} />}\r\n                </LMR>,\r\n            } as ComponentProp);\r\n        }\r\n        /** \r\n        rows.push({\r\n            type: 'component',\r\n            name: 'customer',\r\n            component: <LMR className={cnRowCustor} onClick={onShowSalesTaskHistory}\r\n                left={<span><FA className=\"text-warning\" name=\"hand-o-right\" /> &nbsp; 详情</span>}\r\n                right={right} />,\r\n            //label: '执行过程',\r\n        } as ComponentProp);\r\n        */\r\n        if (description) {\r\n            rows.push({\r\n                type: 'component',\r\n                name: 'description',\r\n                component: <div className=\"w-100 py-3\">{description}</div>,\r\n            } as ComponentProp);\r\n        }\r\n        return <PropGrid className=\"my-2\" rows={rows} values={task} />;\r\n    }\r\n}","import * as React from 'react';\r\nimport { View } from 'tonva';\r\nimport { CType } from '../CType';\r\nimport { PropGrid, Prop, LMR, ComponentProp, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { Task } from '../../model';\r\n\r\nexport class VCreateTop extends View<CType> {\r\n\r\n    private itemss = \"cursor-pointer my-2 w-100\";\r\n    render(task: Task) {\r\n        let { showCustomerDetail } = this.controller.cSalesTask;\r\n        let { customer } = task;\r\n\r\n        let onClickCustoemr = async () => await showCustomerDetail(customer.id);\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className={this.itemss} onClick={onClickCustoemr}\r\n                    left={<div> <FA name=\"user\" className=\"text-info mr-2 pt-1 \" /> </div>}\r\n                    right={<div className=\"text-right\"><i className=\"fa fa-chevron-right\" /></div>}>\r\n                    {tv(customer, v => <>{v.name}</>)}\r\n                </LMR>,\r\n            } as ComponentProp,\r\n        ];\r\n        return <PropGrid className=\"my-2\" rows={rows} values={task} />;\r\n    }\r\n}","import * as React from 'react';\r\nimport { View } from 'tonva';\r\nimport { CType } from '../CType';\r\nimport { PropGrid, Prop, LMR, ComponentProp, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { Task } from '../../model';\r\n\r\nexport class VActionsBottom extends View<CType> {\r\n\r\n    render(task: Task) {\r\n        let { showTaskComplet, showTaskExtension, showTaskInvalid } = this.controller.cSalesTask;\r\n        let tasks = {\r\n            id: task.id,\r\n            type: task.type,\r\n            biz: task.biz,\r\n            description: null,\r\n            remindDate: null,\r\n            deadline: null,\r\n            customer: task.customer\r\n        }\r\n        let onProcess = async () => await showTaskComplet(tasks);\r\n        let onPostpond = async () => await showTaskExtension(tasks);\r\n        let onInvalid = async () => await showTaskInvalid(tasks);\r\n\r\n        return <div className=\"d-flex px-1\">\r\n            <div className=\"flex-grow-1 align-self-center justify-content-start\">\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={onProcess} >&nbsp;处理&nbsp;</button>\r\n            </div>\r\n            <button type=\"button\" className=\"btn btn-outline-info ml-2 align-self-center\" onClick={onPostpond} >延迟</button>\r\n            <button type=\"button\" className=\"btn btn-outline-info ml-2 align-self-center\" onClick={onInvalid} >取消</button>\r\n        </div>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { View, Widget, UiSelectBase } from 'tonva';\r\nimport { CType } from '../CType';\r\nimport { LMR, FA } from 'tonva';\r\nimport { Task } from '../../model';\r\nimport { TaskCommonType } from '../taskCommonType';\r\nimport { CCommonType } from '../commontype/CCommonType';\r\n\r\nexport class VDetailContent extends View<CType> {\r\n\r\n    render(task: Task): JSX.Element {\r\n\r\n        let model = this.controller.cSalesTask.getCommonType(task.biz.obj.name);\r\n        let { completuiSchema } = model.taskCommonType;\r\n\r\n        let { fields } = task;\r\n        if (fields === undefined) return <></>;\r\n\r\n        return <div className='w-100'>\r\n            {fields.map((v, index) => {\r\n                let { fieldName, value } = v;\r\n                let { label, list } = completuiSchema.items[fieldName] as UiSelectBase;\r\n                let left = <div className=''><FA name='caret-right' className='small text-info' fixWidth={true} />{label || fieldName}</div>;\r\n                var selectItem: any;\r\n                if (list) {\r\n                    selectItem = list.find(v => v.value === value);\r\n                }\r\n                return <div className='row bg-white py-2' key={index}>\r\n                    <div className=\"col-4 align-self-center\">{left}</div>\r\n                    <div className=\"col-8\">{selectItem ? selectItem.title : value} </div>\r\n                </div>\r\n            })}\r\n        </div>;\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, PageItems, Schema, Form, Context, UiIdItem, UiCheckItem, LMR, FA } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { Task } from '../../model';\r\nimport { CCommonType } from './CCommonType';\r\nimport classNames from 'classnames';\r\n\r\nexport class VFinish extends VPage<CCommonType> {\r\n\r\n    private task: Task\r\n    private form: Form;\r\n\r\n    async open(task: Task) {\r\n        this.task = task;\r\n        this.openPage(this.page, task);\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        return this.render(param);\r\n    });\r\n\r\n    private onCompletionTask = async (model: any) => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { completSchema } = this.controller.taskCommonType;\r\n        let fieldValues = completSchema.map((v, index) => {\r\n            let { name } = v;\r\n            return {\r\n                fieldName: name,\r\n                value: context.form.data[name]\r\n            };\r\n        })\r\n        this.task.fields = fieldValues;\r\n        await this.controller.cSalesTask.finishTask(this.task);\r\n        this.closePage(2);\r\n    }\r\n\r\n    private onCreateProduct = async () => {\r\n        await this.controller.cSalesTask.showPorductSelect(this.task);\r\n    }\r\n\r\n    private onCreateProject = async () => {\r\n        await this.controller.cSalesTask.showCreateProject(this.task);\r\n    }\r\n\r\n    private onCreateProjectPack = async () => {\r\n        await this.controller.cSalesTask.showPorductPackSelect(this.task);\r\n    }\r\n\r\n    render(task: Task) {\r\n        this.task = task;\r\n        let { completSchema, completuiSchema } = this.controller.taskCommonType;\r\n        let { showTaskProductDetail, showTaskProjectDetail, showTaskProjectPackDetail } = this.controller.cSalesTask;\r\n        let onShowProduct = async () => await showTaskProductDetail(this.task);\r\n        let onShowProject = async () => await showTaskProjectDetail(this.task);\r\n        let onshowTaskProjectPackDetail = async () => await showTaskProjectPackDetail(this.task);\r\n\r\n        let cssLMR = \"bg-white row my-1 py-2\";\r\n        return <div className=\"mx-3\">\r\n            <Form ref={v => this.form = v}\r\n                schema={completSchema}\r\n                uiSchema={completuiSchema}\r\n                onButtonClick={this.onFormButtonClick}\r\n                requiredFlag={false}\r\n            />\r\n            <LMR className={cssLMR} right={<div onClick={this.onCreateProduct} className=\"mr-3\"><FA name=\"plus\" /></div>} >\r\n                <div className=\"w-100 ml-3\" onClick={onShowProduct} >产品列表 <span className=\"fa-stack\"></span></div>\r\n            </LMR>\r\n            <LMR className={cssLMR} right={<div onClick={this.onCreateProjectPack} className=\"mr-3\"><FA name=\"plus\" /></div>} >\r\n                <div className=\"w-100 ml-3\" onClick={onshowTaskProjectPackDetail} >包装列表 <span className=\"fa-stack\"></span></div>\r\n            </LMR>\r\n            <LMR className={cssLMR} right={<div onClick={this.onCreateProject} className=\"mr-3\"><FA name=\"plus\" /></div>} >\r\n                <div className=\"w-100 ml-3\" onClick={onShowProject} >项目列表 <span className=\"fa-stack\"></span></div>\r\n            </LMR>\r\n            <button type=\"button\" className=\"btn btn-primary w-100  my-3\" onClick={this.onCompletionTask} >提交</button>\r\n        </div >\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Controller, Page } from 'tonva';\r\nimport { CSalesTask } from '../CSalestask';\r\nimport { VDetailTop } from './share/VDetailTop';\r\nimport { VCreateTop } from './share/VCreateTop';\r\nimport { VActionsBottom } from './share/VActionsBottom';\r\nimport { Task } from '../model';\r\nimport { VDetailContent } from './share/VDetailContent';\r\nimport { VFinish } from './commonType/VFinish';\r\nimport { CCommonType } from './commonType';\r\n\r\nexport abstract class CType extends Controller {\r\n    caption: string;\r\n    cSalesTask: CSalesTask;\r\n    icon: any = 'plus';\r\n\r\n    //显示任务明细--无操作\r\n    async showDetailFromId(taskid: number): Promise<void> {\r\n        let task = await this.cSalesTask.loadTask(taskid);\r\n        this.openPage(\r\n            this.renderDetailValues(task)\r\n        );\r\n    }\r\n\r\n    private renderDetailValues = (task: Task): JSX.Element => {\r\n        let { caption, renderDetailTop, renderDetailContent } = this;\r\n        return <Page header={caption} headerClassName='bg-primary' >\r\n            {renderDetailTop(task)}\r\n            {renderDetailContent(task)}\r\n        </Page >\r\n    }\r\n\r\n    //显示任务明细--有操作\r\n    async showDetailEdit(task: Task): Promise<void> {\r\n        let tasks = await this.cSalesTask.loadTask(task.id);\r\n        task.fields = tasks.fields\r\n        this.openPage(\r\n            this.renderDetailEdit(task)\r\n        );\r\n    }\r\n\r\n    private renderDetailEdit = (task: Task): JSX.Element => {\r\n        let { caption, renderDetailTop, renderActionsBottom, renderDetailContent } = this;\r\n        return <Page header={caption} footer={renderActionsBottom(task)} headerClassName='bg-primary'  >\r\n            {renderDetailTop(task)}\r\n            {renderDetailContent(task)}\r\n        </Page >\r\n    }\r\n\r\n    protected renderDetailTop = (task: Task): JSX.Element => {\r\n        return this.renderView(VDetailTop, task);\r\n    }\r\n\r\n    protected renderDetailContent = (task: Task): JSX.Element => {\r\n        return this.renderView(VDetailContent, task);\r\n    }\r\n\r\n    protected renderActionsBottom = (task: Task): JSX.Element => {\r\n        return this.renderView(VActionsBottom, task);\r\n    }\r\n\r\n    //完结任务\r\n    async showComplet(task: Task): Promise<void> {\r\n        let tasks = await this.cSalesTask.loadTask(task.id);\r\n        this.openPage(\r\n            this.renderComplet(tasks)\r\n        );\r\n    }\r\n\r\n    private renderComplet = (task: Task): JSX.Element => {\r\n        let { caption } = this;\r\n        return <Page header={caption} headerClassName='bg-primary' >\r\n            {this.renderCompletContent(task)}\r\n        </Page >\r\n    }\r\n\r\n    private renderCompletContent = (task: Task): JSX.Element => {\r\n        return this.renderView(VFinish, task);\r\n    }\r\n\r\n\r\n    //创建任务\r\n    async showCreate(task: Task): Promise<void> {\r\n        await task.biz.assure();\r\n        this.openPage(<Page header={\"biz.name\"}>没有继承showCreate！</Page>);\r\n    }\r\n\r\n    renderCreateTop = (task: Task): JSX.Element => {\r\n        return this.renderView(VCreateTop, task);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, LMR, Prop, ComponentProp, FA, tv, PropGrid } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { Task } from '../model';\r\nimport { CSalesTask } from '../CSalesTask';\r\n\r\nexport class VCreateCheck extends VPage<CSalesTask> {\r\n\r\n    private task: Task\r\n    async open(task: Task) {\r\n        this.task = task;\r\n        this.openPage(this.page, task);\r\n    }\r\n\r\n    private onAddTask = async (model: any) => {\r\n        this.task.description = undefined;\r\n        this.task.deadline = undefined;\r\n        this.controller.getCTaskType(this.task.biz.name).showCreate(this.task);\r\n    }\r\n\r\n    private onFinishTask = async () => {\r\n        this.task.priorty = 0;\r\n        await this.controller.createAndFinishTask(this.task);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        return this.render(param);\r\n    });\r\n\r\n    private itemss = \"cursor-pointer my-2 w-100\";\r\n    render(task: Task) {\r\n        let { showCustomerDetail } = this.controller.cApp.cSalesTask;\r\n        let { customer, type, biz } = task;\r\n\r\n        let onClickCustoemr = async () => await showCustomerDetail(customer.id);\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                name: 'type',\r\n                component: <LMR className={this.itemss}\r\n                    left={<div> <FA name=\"bookmark-o\" className=\"text-info mr-2 pt-1\" /> </div>}>\r\n                    <span className=\"font-weight-bold mr-3\">{tv(type, v => <>{v.description}</>)} </span>  {tv(biz, v => <>{v.description}</>)}\r\n                </LMR>,\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className={this.itemss} onClick={onClickCustoemr}\r\n                    left={<div> <FA name=\"user\" className=\"text-info mr-2 pt-1 \" /> </div>}\r\n                    right={<div className=\"text-right\"><i className=\"fa fa-chevron-right\" /></div>}>\r\n                    {tv(customer, v => <>{v.name}</>)}\r\n                </LMR>,\r\n            } as ComponentProp,\r\n\r\n        ];\r\n        let footer = <div className=\"d-flex px-1\">\r\n            <div className=\"flex-grow-1 align-self-center justify-content-start\">\r\n                <button type=\"button\" className=\"btn btn-primary\" onClick={this.onAddTask} >&nbsp;新建&nbsp;</button>\r\n            </div>\r\n            <button type=\"button\" className=\"btn btn-outline-info ml-2 align-self-center\" onClick={this.onFinishTask} >处理</button>\r\n        </div>\r\n\r\n        let header = <div>{this.task.biz.description}&nbsp;</div>;\r\n\r\n        return <Page header={header} footer={footer} headerClassName='bg-primary'>\r\n            <PropGrid className=\"my-2\" rows={rows} values={task} />\r\n        </Page>\r\n    }\r\n\r\n}","import * as React from 'react';\r\nimport { VPage, Page, PageItems, Schema, Form, Context, UiIdItem, UiCheckItem, FA } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { Task } from '../../model';\r\nimport { CCommonType } from './CCommonType';\r\n\r\nexport class VCreate extends VPage<CCommonType> {\r\n\r\n    private task: Task;\r\n    private form: Form;\r\n\r\n    async open(task: Task) {\r\n        this.task = task;\r\n        this.openPage(this.page, task);\r\n    }\r\n\r\n    private onAddSalesTask = async (model: any) => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { description, priorty, deadline } = context.form.data;\r\n        this.task.description = description;\r\n        this.task.priorty = priorty;\r\n        this.task.deadline = deadline;\r\n        await this.controller.cSalesTask.createTask(context.form.data, this.task);\r\n        this.closePage(5);\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        return this.render(param);\r\n    });\r\n\r\n    render(param: any) {\r\n        let { schema, uiSchema } = this.controller.taskCommonType;\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onAddSalesTask}>保存</button>;\r\n        return <Page header={this.controller.caption} footer={footer} headerClassName='bg-primary' >\r\n            <div className=\"App-container container text-left\">\r\n                {this.controller.renderCreateTop(param)}\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={uiSchema}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    requiredFlag={false}\r\n                />\r\n            </div>\r\n        </Page >\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { CType } from '../CType';\r\nimport { VPage } from 'tonva';\r\nimport { FA } from 'tonva';\r\nimport { VDetail } from './VDetail';\r\nimport { VCreateCheck } from '../../views/VCreateCheck';\r\n//import { VAdd } from './VCreate';\r\nimport { Task } from '../../model';\r\nimport { TaskCommonType } from '../taskCommonType';\r\nimport { VCreate } from './VCreate';\r\nimport { VCreateProduct } from '../../views/VCreateProduct';\r\n\r\nexport class CCommonType extends CType {\r\n    taskCommonType: TaskCommonType;\r\n\r\n    constructor(taskCommonType: TaskCommonType, res: any) {\r\n        super(res);\r\n        this.taskCommonType = taskCommonType;\r\n        this.icon = taskCommonType.icon;\r\n        this.caption = taskCommonType.caption;\r\n    }\r\n\r\n    protected internalStart(param?: TaskCommonType): Promise<void> {\r\n        return;\r\n    }\r\n\r\n    /**\r\n    protected renderContent = (task: Task): JSX.Element => {\r\n        return this.renderView(VDetail, task);\r\n    }\r\n    */\r\n\r\n    async showCreate(task: Task): Promise<void> {\r\n        this.openVPage(VCreate, task);\r\n        return;\r\n    }\r\n\r\n    //显示查询客户页面\r\n    showCrateCheck = async (task: Task) => {\r\n        this.openVPage(VCreateCheck, task);\r\n    }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { FA, UiRadio } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiCheckItem, UiInputItem } from 'tonva';\r\n\r\nexport const Marketing: TaskCommonType = {\r\n    caption: '组合营销',\r\n    icon: <FA name='newspaper-o' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'description', type: 'string', required: false },\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            description: { widget: 'text', label: '内容', placeholder: '请填写任务内容' } as UiInputItem,\r\n            priorty: { widget: 'checkbox', label: '重要性', placeholder: '重要性' } as UiCheckItem,\r\n            deadline: { widget: 'date', label: '要求完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '结案', defaultValue: 1, list: [{ value: 0, title: '成功' }, { value: 1, title: '失败' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiCheckItem, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const Trial: TaskCommonType = {\r\n    caption: '产品试用',\r\n    icon: <FA name='newspaper-o' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'description', type: 'string', required: false },\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            description: { widget: 'text', label: '内容', placeholder: '请填写任务内容' } as UiInputItem,\r\n            priorty: { widget: 'checkbox', label: '重要性', placeholder: '重要性' } as UiCheckItem,\r\n            deadline: { widget: 'date', label: '要求完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n\r\n            description2: { widget: 'radio', label: '描述2', defaultValue: 1, list: [{ value: 0, title: '女' }, { value: 1, title: '男' }] } as UiRadio,\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '结案', defaultValue: 1, list: [{ value: 0, title: '成功' }, { value: 1, title: '失败' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const BagOrderCancel: TaskCommonType = {\r\n    caption: '大额订单取消',\r\n    icon: <FA name='newspaper-o' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n        { name: 'description', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            priorty: { widget: 'radio', label: '重要性', defaultValue: 0, list: [{ value: 0, title: '一般' }, { value: 1, title: '重要' }] } as UiRadio,\r\n            deadline: { widget: 'date', label: '完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            description: { widget: 'text', label: '备注', placeholder: '请填写任务备注' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '结案', defaultValue: 1, list: [{ value: 0, title: '成功' }, { value: 1, title: '失败' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const BagOrder: TaskCommonType = {\r\n    caption: '大额订单跟踪',\r\n    icon: <FA name='newspaper-o' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n        { name: 'description', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            priorty: { widget: 'radio', label: '重要性', defaultValue: 0, list: [{ value: 0, title: '一般' }, { value: 1, title: '重要' }] } as UiRadio,\r\n            deadline: { widget: 'date', label: '完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            description: { widget: 'text', label: '备注', placeholder: '请填写任务备注' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '结案', defaultValue: 1, list: [{ value: 0, title: '成功' }, { value: 1, title: '失败' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA, UiRadio } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiCheckItem, UiInputItem } from 'tonva';\r\n\r\nexport const NotUptoStandard: TaskCommonType = {\r\n    caption: '客户计划未达标',\r\n    icon: <FA name='newspaper-o' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'description', type: 'string', required: false },\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            description: { widget: 'text', label: '内容', placeholder: '请填写任务内容' } as UiInputItem,\r\n            priorty: { widget: 'checkbox', label: '重要性', placeholder: '重要性' } as UiCheckItem,\r\n            deadline: { widget: 'date', label: '要求完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '结案', defaultValue: 1, list: [{ value: 0, title: '成功' }, { value: 1, title: '失败' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiCheckItem, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const RepeatPurchase: TaskCommonType = {\r\n    caption: '单一产品重复采购',\r\n    icon: <FA name='newspaper-o' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'description', type: 'string', required: false },\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            description: { widget: 'text', label: '内容', placeholder: '请填写任务内容' } as UiInputItem,\r\n            priorty: { widget: 'checkbox', label: '重要性', placeholder: '重要性' } as UiCheckItem,\r\n            deadline: { widget: 'date', label: '要求完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n\r\n            description2: { widget: 'radio', label: '描述2', defaultValue: 1, list: [{ value: 0, title: '女' }, { value: 1, title: '男' }] } as UiRadio,\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '结案', defaultValue: 1, list: [{ value: 0, title: '成功' }, { value: 1, title: '失败' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA, toUiSelectItems } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const NonReagent: TaskCommonType = {\r\n    caption: '大包装报价跟踪',\r\n    icon: <FA name='shopping-bag' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n        { name: 'description', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            priorty: {\r\n                widget: 'radio', label: '重要性', defaultValue: 0,\r\n                list: [{ value: 0, title: '一般' }, { value: 1, title: '重要' }],\r\n                radioClassName: 'w-min-6c d-inline-block'\r\n            } as UiRadio,\r\n            deadline: { widget: 'date', label: '完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            description: { widget: 'text', label: '备注', placeholder: '请填写任务备注' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '丢单原因', defaultValue: 1, list: [{ value: 0, title: '货期' }, { value: 1, title: '价格' }, { value: 1, title: '质量' }, { value: 1, title: '资质' }, { value: 1, title: '发票' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const Reagent: TaskCommonType = {\r\n    caption: '试剂报价跟踪',\r\n    icon: <FA name='shopping-bag' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n        { name: 'description', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            priorty: { widget: 'radio', label: '重要性', defaultValue: 0, list: [{ value: 0, title: '一般' }, { value: 1, title: '重要' }] } as UiRadio,\r\n            deadline: { widget: 'date', label: '完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            description: { widget: 'text', label: '备注', placeholder: '请填写任务备注' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '丢单原因', defaultValue: 1, list: [{ value: 0, title: '货期' }, { value: 1, title: '价格' }, { value: 1, title: '质量' }, { value: 1, title: '资质' }, { value: 1, title: '发票' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const Signback: TaskCommonType = {\r\n    caption: '订单催签返',\r\n    icon: <FA name='shopping-bag' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n        { name: 'description', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            priorty: { widget: 'radio', label: '重要性', defaultValue: 0, list: [{ value: 0, title: '一般' }, { value: 1, title: '重要' }] } as UiRadio,\r\n            deadline: { widget: 'date', label: '完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            description: { widget: 'text', label: '备注', placeholder: '请填写任务备注' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'result', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            result: { widget: 'radio', label: '丢单原因', defaultValue: 1, list: [{ value: 0, title: '货期' }, { value: 1, title: '价格' }, { value: 1, title: '质量' }, { value: 1, title: '资质' }, { value: 1, title: '发票' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', }\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiCheckItem, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const CustomerDev: TaskCommonType = {\r\n    caption: '客户开发',\r\n    icon: <FA name='address-book' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'description', type: 'string', required: false },\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            description: { widget: 'text', label: '内容', placeholder: '请填写任务内容' } as UiInputItem,\r\n            priorty: { widget: 'checkbox', label: '重要性', placeholder: '重要性' } as UiCheckItem,\r\n            deadline: { widget: 'date', label: '要求完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n\r\n            description2: { widget: 'radio', label: '描述2', defaultValue: 1, list: [{ value: 0, title: '女' }, { value: 1, title: '男' }] } as UiRadio,\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'name', type: 'string', required: false },\r\n        { name: 'telephone', type: 'number', required: false },\r\n        { name: 'email', type: 'string', required: false },\r\n        { name: 'wechat', type: 'string', required: false },\r\n        { name: 'teacher', type: 'string', required: false },\r\n        { name: 'potential', type: 'string', required: false },\r\n        { name: 'research', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            name: { widget: 'text', label: '姓名', placeholder: '请输入姓名' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '请输入电话' } as UiInputItem,\r\n            email: { widget: 'text', label: '邮箱', placeholder: '请输入邮箱' } as UiInputItem,\r\n            wechat: { widget: 'text', label: '微信', placeholder: '请输入微信号' } as UiInputItem,\r\n            teacher: { widget: 'text', label: '老师', placeholder: '请输入老师' } as UiInputItem,\r\n            potential: { widget: 'radio', label: '潜力值', defaultValue: 1, list: [{ value: 0, title: '小于10万' }, { value: 1, title: '10万-30万' }, { value: 2, title: '大于30万' }] } as UiRadio,\r\n            research: { widget: 'radio', label: '研究方向', defaultValue: 1, list: [{ value: 0, title: '有机' }, { value: 1, title: '化学' }, { value: 1, title: '分析' }, { value: 1, title: '材料' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiCheckItem, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const NewCustomer: TaskCommonType = {\r\n    caption: '新客户开发',\r\n    icon: <FA name='address-book' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'description', type: 'string', required: false },\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            description: { widget: 'text', label: '内容', placeholder: '请填写任务内容' } as UiInputItem,\r\n            priorty: { widget: 'checkbox', label: '重要性', placeholder: '重要性' } as UiCheckItem,\r\n            deadline: { widget: 'date', label: '要求完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n\r\n            description2: { widget: 'radio', label: '描述2', defaultValue: 1, list: [{ value: 0, title: '女' }, { value: 1, title: '男' }] } as UiRadio,\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'name', type: 'string', required: false },\r\n        { name: 'telephone', type: 'number', required: false },\r\n        { name: 'email', type: 'string', required: false },\r\n        { name: 'wechat', type: 'string', required: false },\r\n        { name: 'teacher', type: 'string', required: false },\r\n        { name: 'potential', type: 'string', required: false },\r\n        { name: 'research', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            name: { widget: 'text', label: '姓名', placeholder: '请输入姓名' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '请输入电话' } as UiInputItem,\r\n            email: { widget: 'text', label: '邮箱', placeholder: '请输入邮箱' } as UiInputItem,\r\n            wechat: { widget: 'text', label: '微信', placeholder: '请输入微信号' } as UiInputItem,\r\n            teacher: { widget: 'text', label: '老师', placeholder: '请输入老师' } as UiInputItem,\r\n            potential: { widget: 'radio', label: '潜力值', defaultValue: 1, list: [{ value: 0, title: '小于10万' }, { value: 1, title: '10万-30万' }, { value: 2, title: '大于30万' }] } as UiRadio,\r\n            research: { widget: 'radio', label: '研究方向', defaultValue: 1, list: [{ value: 0, title: '有机' }, { value: 1, title: '化学' }, { value: 1, title: '分析' }, { value: 1, title: '材料' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    } as UiSchema\r\n}\r\n","export * from './CType';\r\n\r\nimport { 试剂报价跟踪 } from './试剂报价跟踪';\r\nimport { 大包装报价跟踪 } from './大包装报价跟踪';\r\nimport { CType } from './CType';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { TaskCommonType } from './taskCommonType';\r\nimport { CCommonType } from './commonType/CCommonType';\r\nimport { Marketing, Trial, NonReagent, Reagent, BagOrderCancel, BagOrder, Signback, NotUptoStandard, RepeatPurchase, CustomerDev, CustomerInfoDev, NewCustomer, Graduation } from './templets';\r\n\r\ninterface CTaskTypeConstructor {\r\n    new(res: any): CType;\r\n}\r\n\r\nconst taskTypeConstuctors: { [type: string]: CTaskTypeConstructor | TaskCommonType } = {\r\n    reagent: Reagent,\r\n    nonreagent: NonReagent,\r\n    signback: Signback,\r\n\r\n    bagorder: BagOrder,\r\n    bagordercancel: BagOrderCancel,\r\n    marketing: Marketing,\r\n    notuptostandard: NotUptoStandard,\r\n    repeatpurchase: RepeatPurchase,\r\n    trial: Trial,\r\n\r\n    customerdev: CustomerDev,\r\n    customerinfodev: CustomerInfoDev,\r\n    newcustomerdev: NewCustomer,\r\n    graduation: Graduation,\r\n    newcustomer: NewCustomer,\r\n};\r\n\r\nexport function createTaskTypes(cSalesTask: CSalesTask): { [type: string]: CType } {\r\n    let res: any = undefined;\r\n    let ret: { [type: string]: CType } = {};\r\n\r\n    for (let i in taskTypeConstuctors) {\r\n        let t = taskTypeConstuctors[i];\r\n        if (typeof t === 'function') {\r\n            let tt = ret[i] = new (t as any)(res);\r\n            tt.cSalesTask = cSalesTask;\r\n            if (!tt.caption) tt.caption = i;\r\n        }\r\n        else {\r\n            let tt = ret[i] = new CCommonType(t, res);\r\n            tt.cSalesTask = cSalesTask;\r\n        }\r\n    }\r\n    return ret;\r\n}","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiCheckItem, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const CustomerInfoDev: TaskCommonType = {\r\n    caption: '客户信息开发',\r\n    icon: <FA name='address-book' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'description', type: 'string', required: false },\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            description: { widget: 'text', label: '内容', placeholder: '请填写任务内容' } as UiInputItem,\r\n            priorty: { widget: 'checkbox', label: '重要性', placeholder: '重要性' } as UiCheckItem,\r\n            deadline: { widget: 'date', label: '要求完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n\r\n            description2: { widget: 'radio', label: '描述2', defaultValue: 1, list: [{ value: 0, title: '女' }, { value: 1, title: '男' }] } as UiRadio,\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'name', type: 'string', required: false },\r\n        { name: 'telephone', type: 'number', required: false },\r\n        { name: 'email', type: 'string', required: false },\r\n        { name: 'wechat', type: 'string', required: false },\r\n        { name: 'teacher', type: 'string', required: false },\r\n        { name: 'potential', type: 'string', required: false },\r\n        { name: 'research', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            name: { widget: 'text', label: '姓名', placeholder: '请输入姓名' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '请输入电话' } as UiInputItem,\r\n            email: { widget: 'text', label: '邮箱', placeholder: '请输入邮箱' } as UiInputItem,\r\n            wechat: { widget: 'text', label: '微信', placeholder: '请输入微信号' } as UiInputItem,\r\n            teacher: { widget: 'text', label: '老师', placeholder: '请输入老师' } as UiInputItem,\r\n            potential: { widget: 'radio', label: '潜力值', defaultValue: 1, list: [{ value: 0, title: '小于10万' }, { value: 1, title: '10万-30万' }, { value: 2, title: '大于30万' }] } as UiRadio,\r\n            research: { widget: 'radio', label: '研究方向', defaultValue: 1, list: [{ value: 0, title: '有机' }, { value: 1, title: '化学' }, { value: 1, title: '分析' }, { value: 1, title: '材料' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { FA } from 'tonva';\r\nimport { TaskCommonType } from '../../taskCommonType';\r\nimport { UiSchema, UiCheckItem, UiInputItem, UiRadio } from 'tonva';\r\n\r\nexport const Graduation: TaskCommonType = {\r\n    caption: '毕业清洗',\r\n    icon: <FA name='address-book' size=\"lg\" fixWidth={true} />,\r\n    schema: [\r\n        { name: 'description', type: 'string', required: false },\r\n        { name: 'priorty', type: 'number', required: false },\r\n        { name: 'deadline', type: 'string', required: false },\r\n    ],\r\n    uiSchema: {\r\n        items: {\r\n            description: { widget: 'text', label: '内容', placeholder: '请填写任务内容' } as UiInputItem,\r\n            priorty: { widget: 'checkbox', label: '重要性', placeholder: '重要性' } as UiCheckItem,\r\n            deadline: { widget: 'date', label: '要求完成时间', placeholder: '要求完成时间' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n\r\n            description2: { widget: 'radio', label: '描述2', defaultValue: 1, list: [{ value: 0, title: '女' }, { value: 1, title: '男' }] } as UiRadio,\r\n        }\r\n    } as UiSchema,\r\n    completSchema: [\r\n        { name: 'name', type: 'string', required: false },\r\n        { name: 'telephone', type: 'number', required: false },\r\n        { name: 'email', type: 'string', required: false },\r\n        { name: 'wechat', type: 'string', required: false },\r\n        { name: 'teacher', type: 'string', required: false },\r\n        { name: 'potential', type: 'string', required: false },\r\n        { name: 'research', type: 'string', required: false },\r\n    ],\r\n    completuiSchema: {\r\n        items: {\r\n            name: { widget: 'text', label: '姓名', placeholder: '请输入姓名' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '请输入电话' } as UiInputItem,\r\n            email: { widget: 'text', label: '邮箱', placeholder: '请输入邮箱' } as UiInputItem,\r\n            wechat: { widget: 'text', label: '微信', placeholder: '请输入微信号' } as UiInputItem,\r\n            teacher: { widget: 'text', label: '老师', placeholder: '请输入老师' } as UiInputItem,\r\n            potential: { widget: 'radio', label: '潜力值', defaultValue: 1, list: [{ value: 0, title: '小于10万' }, { value: 1, title: '10万-30万' }, { value: 2, title: '大于30万' }] } as UiRadio,\r\n            research: { widget: 'radio', label: '研究方向', defaultValue: 1, list: [{ value: 0, title: '有机' }, { value: 1, title: '化学' }, { value: 1, title: '分析' }, { value: 1, title: '材料' }] } as UiRadio,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    } as UiSchema\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, PageItems, Form, UiSchema, UiTextAreaItem, Context, UiCustom, Schema, UiRadio, Widget } from 'tonva';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { observer } from 'mobx-react';\r\nimport { Task } from '../model';\r\nimport { observable } from 'mobx';\r\n\r\nconst schema: Schema = [\r\n    { name: 'resulttype', type: 'string', required: false },\r\n    { name: 'date', type: 'string', required: true },\r\n    { name: 'result', type: 'string', required: false },\r\n];\r\n\r\nclass SomeDay extends Widget {\r\n    @observable dateVisible = false;\r\n    private list = [{ value: 1, title: '明天' }, { value: 2, title: '后天' }];\r\n\r\n    private onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        let val = evt.currentTarget.value;\r\n        this.dateVisible = val === '0';\r\n        var day2 = new Date();\r\n        if (val === '1') {\r\n            day2.setDate(day2.getDate() + 1);\r\n            let ss = day2.getFullYear() + \"-\" + (day2.getMonth() + 1) + \"-\" + day2.getDate();\r\n            this.setValue(ss);\r\n        } else if (val === '2') {\r\n            day2.setDate(day2.getDate() + 2);\r\n            let ss = day2.getFullYear() + \"-\" + (day2.getMonth() + 1) + \"-\" + day2.getDate();\r\n            this.setValue(ss);\r\n        }\r\n    }\r\n\r\n    private onDateChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setValue(evt.currentTarget.value);\r\n    }\r\n\r\n    render = () => {\r\n        return <div className=\"form-control\" style={{ height: 'auto' }}>\r\n            {this.list.map((v, index) => {\r\n                return <label className=\"my-1\"><input type=\"radio\" value={v.value} name=\"a\" onChange={this.onChange} /> {v.title} &nbsp; </label>\r\n            })}\r\n            <div>\r\n                <label className=\"my-1\"><input type=\"radio\" value={0} name=\"a\" onChange={this.onChange} /> 日期 &nbsp; </label>\r\n                {this.dateVisible && <input type=\"date\" defaultValue={(new Date).toDateString()} onChange={this.onDateChange} />}\r\n            </div>\r\n        </div>\r\n    };\r\n}\r\n\r\n\r\nexport class VSalesTaskExtension extends VPage<CSalesTask> {\r\n\r\n    private form: Form;\r\n    private task: Task;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            resulttype: { visible: false },\r\n            date: {\r\n                widget: 'custom',\r\n                label: '提醒日期',\r\n                WidgetClass: SomeDay,\r\n            } as UiCustom,\r\n            result: { widget: 'textarea', label: '备注', placeholder: '请输入处理结果！', rows: 12 } as UiTextAreaItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    }\r\n    async open(task: Task) {\r\n        this.task = task;\r\n        this.openPage(this.page, task);\r\n    }\r\n\r\n\r\n    private onExtensionTask = async (model: any) => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { result, resulttype, date } = context.form.data;\r\n        await this.controller.extensionTask(this.task, result, resulttype, date);\r\n        this.closePage(2);\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onExtensionTask} >提交</button>;\r\n        return <Page header=\"推迟\" footer={footer} headerClassName='bg-primary' >\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                />\r\n            </div>\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, nav } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { LMR, List, EasyDate } from 'tonva';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { tv } from 'tonva';\r\n\r\nexport class VTaskHistory extends VPage<CSalesTask> {\r\n\r\n    async open(tasks: any) {\r\n        this.openPage(this.page, tasks);\r\n    }\r\n\r\n    private renderHistory = (taskhistory: any, index: number) => {\r\n        let { date, status, principal, result } = taskhistory;\r\n        let right = <small className=\"text-muted\">{principal.id !== nav.user.id && <span className=\"text-muted small\"></span>}{tv(status, (v) => v.name)} </small>;\r\n        return <div className=\"d-block p-3\">\r\n            <LMR left={<small className=\"text-muted\">{<EasyDate date={date} />} </small>}\r\n                right={<small className=\"text-muted\">{right}</small>}>\r\n            </LMR>\r\n            <div>{result}</div>\r\n        </div>;\r\n    }\r\n\r\n    private page = observer((tasks: any) => {\r\n\r\n        let none = <div className=\"m-3 text-muted small\">【未处理】</div>;\r\n        return <Page header=\"处理详情\" >\r\n            <List before={''} none={none} items={tasks.tasks} item={{ render: this.renderHistory }} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, PageItems } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CSelectType } from './CSelectType';\r\nimport { LMR, List, FA } from 'tonva';\r\n\r\nexport class VSelectType extends VPage<CSelectType> {\r\n\r\n    async open(customer: any) {\r\n        this.openPage(this.page, customer);\r\n    }\r\n\r\n    private renderList = (model: any, index: number) => {\r\n        let { description, name } = model;\r\n        let left = <div className='text-info mr-3' >{this.controller.owner.getTaskIcon(name)}</div>\r\n        return <LMR className=\"px-3 py-2\" left={left}>\r\n            <div className=\"font-weight-bold\">{description}</div>\r\n        </LMR>\r\n    }\r\n\r\n    private onClickTaskType = async (model: any) => {\r\n        await this.controller.selectTaskType(model);\r\n        //this.ceasePage(1);\r\n    }\r\n\r\n    private ai = () => {\r\n        let { cCustomer } = this.controller.cApp;\r\n        let onshowCreateCustomer = async () => await cCustomer.showSelectCustomerUnit();\r\n\r\n        let searchTask =\r\n            <LMR className=\"p-3 bg-white mb-1 cursor-pointer\" left={<FA className=\"text-success mr-3 mt-1\" name=\"android\" size=\"lg\" fixWidth={true} />}\r\n                onClick={this.controller.aiClick}>\r\n                <div className=\"font-weight-bold\">帮我找找机会</div>\r\n            </LMR>;\r\n        let newCustomer =\r\n            <LMR className=\"p-3 bg-white mb-1 cursor-pointer\" left={<FA className=\"text-success mr-3 mt-1\" name=\"vcard\" size=\"lg\" fixWidth={true} />}\r\n                onClick={onshowCreateCustomer}>\r\n                <div className=\"font-weight-bold\">新建客户</div>\r\n            </LMR>;\r\n        return <div>\r\n\r\n            {newCustomer}\r\n        </div>\r\n    }\r\n\r\n    private page = ((customer: any) => {\r\n        let { tasktypelist } = this.controller;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">无任务类型！</div>;\r\n        return <Page header=\"新建任务\" headerClassName='bg-primary' >\r\n            {this.ai()}\r\n            <List none={none} items={tasktypelist} item={{ render: this.renderList, onClick: this.onClickTaskType }} />\r\n        </Page>\r\n    })\r\n}","export const consts = {\r\n\r\n    uqSalesTask: '百灵威系统工程部/salestask',\r\n    uqCustomer: '百灵威系统工程部/customer',\r\n    uqProduct: \"百灵威系统工程部/product\",\r\n    uqCommon: '百灵威系统工程部/common',\r\n    uqPromotion: '百灵威系统工程部/promotion',\r\n    uqWarehouse: \"百灵威系统工程部/warehouse\",\r\n    appIcon: 'http://101.200.46.56/imgs/Bear-icon.png',\r\n\r\n    headerClass: 'bg-primary py-1',\r\n}","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { VPage, Page, PageItems, tv, EasyDate } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CSelectType } from './CSelectType';\r\nimport { LMR, List, FA } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { consts } from '../../consts';\r\n\r\nexport class VAi extends VPage<CSelectType> {\r\n\r\n    @observable private finished: boolean;\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderItem = (salesTask: any, index: number) => {\r\n\r\n\r\n        let { bizName, deadline, biz, customer, type, typeName, priorty } = salesTask;\r\n        let cnFlag = classNames({\r\n            'my-1 mr-3': true,\r\n            'text-danger': priorty > 0,\r\n            'text-info': !(priorty > 0)\r\n        })\r\n\r\n        let left = <div className={cnFlag}>{}</div>;\r\n        let right = <div className=\"text-right\">\r\n            {deadline && <small className=\"text-muted\">时限：<EasyDate date={deadline} /></small>}\r\n        </div>\r\n        return <LMR className=\"px-3 py-2\" left={left}>\r\n            <LMR className=\"\" right={right}>\r\n                <div className=\"font-weight-bold\">{tv(customer, (v) => <>{v.name}</>)}</div>\r\n            </LMR>\r\n            <LMR className=\"\" right={<div className=\"text-muted\"><small>{tv(type, (v) => <>{v.description}</>)}</small></div>}>\r\n                <div className=\"text-muted\" ><small>{tv(biz, (v) => <>{v.description}</>)}</small></div>\r\n            </LMR>\r\n        </LMR>\r\n    }\r\n\r\n    private onClickJKTask = async (model: any) => {\r\n        await this.controller.showJkTaskDetail(model);\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { pageMyJKTask } = this.controller;\r\n\r\n        let none = <div className=\"my-3 mx-2 text-warning\">正在筹备中</div>;\r\n        return <Page header=\"AI\" headerClassName={consts.headerClass}>\r\n            <List none={none} items={pageMyJKTask} item={{ render: this.renderItem, onClick: this.onClickJKTask }} />\r\n        </Page>;\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, PageItems, Schema, UiSchema, UiInputItem, UiRadio, Edit, ItemSchema, nav, EasyDate } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { LMR, StringProp, ComponentProp, Prop, PropGrid, FA } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport classNames from 'classnames';\r\nimport { consts } from '../../consts';\r\nimport { observable } from 'mobx';\r\nimport { CSelectType } from './CSelectType';\r\n\r\nconst cnRow = 'w-100 py-3';\r\nconst cnRowCustor = classNames(cnRow, 'cursor-pointer');\r\n\r\nexport class VAiDetail extends VPage<CSelectType> {\r\n\r\n    @observable private task: any;\r\n\r\n    async open(task: any) {\r\n        this.task = task;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    onCancel = () => {\r\n        this.closePage();\r\n    }\r\n\r\n    onCreate = () => {\r\n        this.controller.createTask(this.task);\r\n        this.closePage(3);\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { type, biz, customer, deadline, description } = this.task;\r\n\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                name: 'type',\r\n                component: <LMR className={cnRowCustor}\r\n                    left={<div className=\"mr-2 \"> <FA name=\"bookmark-o\" className=\"text-info mr-2 pt-1\" /> </div>}>\r\n                    <span className=\"font-weight-bold mr-3 my-3\">{tv(type, v => <>{v.description}</>)} </span>  {tv(biz, v => <>{v.description}</>)}\r\n                </LMR>,\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className={cnRowCustor} onClick={null}\r\n                    left={<div className=\"mr-2\"> <FA name=\"user\" className=\"text-info mr-2 pt-1\" /> </div>}>\r\n                    {tv(customer, v => <>{v.name}</>)}\r\n                </LMR>,\r\n            } as ComponentProp,\r\n\r\n        ];\r\n        if (deadline) {\r\n            rows.push({\r\n                type: 'component',\r\n                name: 'deadline',\r\n                component: <LMR className={cnRow}\r\n                    left={<div className=\"mr-2\"> <FA name=\"clock-o\" className=\"text-info mr-2 pt-1 \" /> </div>}>\r\n                    {<EasyDate date={deadline} />}\r\n                </LMR>,\r\n            } as ComponentProp);\r\n        }\r\n        if (description) {\r\n            rows.push({\r\n                type: 'component',\r\n                name: 'description',\r\n                component: <div className=\"w-100 py-3\">{description}</div>,\r\n            } as ComponentProp);\r\n        }\r\n\r\n        let left = <div className=\"flex-grow-1 align-self-center justify-content-start\">\r\n            <button type=\"button\" className=\"btn btn-primary\" onClick={this.onCreate} >&nbsp;添加&nbsp;</button>\r\n        </div>;\r\n        let rigth = <div>\r\n            <button type=\"button\" className=\"btn btn-outline-info ml-2 align-self-center\" >撤销</button>\r\n            <button type=\"button\" className=\"btn btn-outline-info ml-2 align-self-center\" onClick={this.onCancel} >取消</button>\r\n        </div>;\r\n\r\n        return <Page header=\"任务详细\" headerClassName={consts.headerClass}>\r\n\r\n            <PropGrid className=\"my-2\" rows={rows} values={this.task} />\r\n            <LMR className=\" mx-3 \" left={left} right={rigth}></LMR>\r\n        </Page>\r\n    })\r\n}","import _ from 'lodash';\r\nimport { Tuid, Controller, Query, PageItems, Action, Map } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { CUqSub } from '../../CBase';\r\nimport { CApp } from '../../CApp';\r\nimport { TaskType, Task } from '../model';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { VSelectType } from './VSelectType';\r\nimport { VAi } from './VAi';\r\nimport { VAiDetail } from './VAiDetail';\r\n\r\n\r\n//页面类\r\nclass PageMyJKTask extends PageItems<any> {\r\n\r\n    private searchQuery: Query;\r\n\r\n    constructor(searchQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchQuery = searchQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class CSelectType extends CUqSub {\r\n    private taskBook: any;\r\n    private tasks: [];\r\n    private customerid: number;\r\n    private task: Task;\r\n    @observable tasktypelist: any;\r\n    @observable pageMyJKTask: PageMyJKTask;\r\n    @observable organization: any;\r\n\r\n    cApp: CApp;\r\n    owner: CSalesTask;\r\n\r\n    /*\r\n    cSalesTask: CSalesTask;\r\n    private tuidTaskType: Tuid;\r\n    private tuidOrganization: Tuid;\r\n    private querySearchJKTask: Query;\r\n    private querygetCustomerOrganization: Query;\r\n    private actionImportTask: Action;\r\n\r\n    //构造函数\r\n    constructor(cSalesTask: CSalesTask, res: any) {\r\n        super(res);\r\n        this.cSalesTask = cSalesTask;\r\n        this.pageMyJKTask = null;\r\n\r\n        let { cUqSalesTask, cUqCustomer } = this.cSalesTask.cApp;\r\n        this.tuidTaskType = cUqSalesTask.tuid(\"tasktype\");\r\n        this.tuidOrganization = cUqSalesTask.tuid(\"Organization\");\r\n        this.querySearchJKTask = cUqSalesTask.query(\"SearchJKTask\");\r\n        this.querygetCustomerOrganization = cUqCustomer.query(\"getCustomerOrganization\");\r\n        this.actionImportTask = cUqSalesTask.action(\"ImportTask\");\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(param: any) {\r\n        this.pageMyJKTask = null;\r\n\r\n        this.customerid = param;\r\n        await this.searchByKey('');\r\n        this.openVPage(VSelectType, param);\r\n    }\r\n\r\n    //搜索任务类型\r\n    async searchByKey(key: string) {\r\n\r\n        this.tasktypelist = await this.uqs.salesTask.TaskType.search(key, 0, 100);\r\n    }\r\n\r\n    //返回添加任务页面\r\n    selectTaskType = async (type: any) => {\r\n        this.task = {\r\n            id: null,\r\n            type: type,\r\n            biz: null,\r\n            description: null,\r\n            remindDate: null,\r\n            deadline: null,\r\n            customer: null\r\n        }\r\n        this.owner.cSalesTaskBiz.start(this.task)\r\n    }\r\n\r\n    returnTaskType = async (type: any): Promise<any> => {\r\n        this.returnCall(type);\r\n    }\r\n\r\n    aiClick = async () => {\r\n        this.pageMyJKTask = new PageMyJKTask(this.uqs.salesTask.SearchJKTask);\r\n        this.pageMyJKTask.first({ key: undefined });\r\n        this.openVPage(VAi);\r\n    }\r\n\r\n    showJkTaskDetail = async (model: any) => {\r\n        await this.searchCustomerRelation(model.customer.id);\r\n        this.openVPage(VAiDetail, model);\r\n    }\r\n\r\n    createTask = async (model: any) => {\r\n        let { id, customer } = model;\r\n        let { name } = customer.obj;\r\n\r\n        await this.uqs.salesTask.ImportTask.submit({ task: id, customername: name, organization: this.organization.id, organizationName: this.organization.name });\r\n        await this.owner.searchTaskByKey('');\r\n    }\r\n\r\n    searchCustomerRelation = async (param: any) => {\r\n        let aa = { id: param };\r\n        let relesions = await this.uqs.salesTask.getCustomerOrganization.query({ customerId: param })\r\n        if (relesions && relesions.ret.length > 0) {\r\n            let org = relesions.ret[0].organization;\r\n            this.organization = await this.uqs.salesTask.Organization.load(org);\r\n        }\r\n    }\r\n\r\n}\r\n","import { observable } from 'mobx';\r\nimport _ from 'lodash';\r\nimport { Task } from './task';\r\n\r\ninterface DateTasks {\r\n    date: Date;\r\n    list: Task[];\r\n}\r\n\r\nexport class Tasks {\r\n    @observable tasksNow: Task[];\r\n    @observable dateTasksList: DateTasks[];\r\n\r\n    constructor(taskArr: Task[]) {\r\n        this.tasksNow = observable.array([], { deep: true });\r\n        this.dateTasksList = observable.array([], { deep: true });\r\n\r\n        for (let task of taskArr) {\r\n            this.add(task);\r\n        }\r\n    }\r\n\r\n    postPone(date: Date, task: Task) {\r\n        this.remove(task);\r\n        let t = _.clone(task);\r\n        t.remindDate = date;\r\n        this.add(t);\r\n    }\r\n\r\n    add(task: Task) {\r\n        let { remindDate } = task;\r\n        if (!remindDate) {\r\n            this.tasksNow.push(task);\r\n            return;\r\n        }\r\n        let dateTasks = this.dateTasksList.find(v => v.date.getTime() === remindDate.getTime());\r\n        if (dateTasks === undefined) {\r\n            dateTasks = { date: remindDate, list: [task] };\r\n            // 插入到合适的地方\r\n            this.dateTasksList.push(dateTasks);\r\n        }\r\n        else {\r\n            dateTasks.list.push(task);\r\n        }\r\n    }\r\n\r\n    remove(task: Task) {\r\n        let index = this.tasksNow.findIndex(v => v.id === task.id);\r\n        if (index >= 0) {\r\n            this.tasksNow.splice(index, 1);\r\n            return;\r\n        }\r\n        let len = this.dateTasksList.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let dt = this.dateTasksList[i];\r\n            let { list } = dt;\r\n            index = list.findIndex(v => v.id === task.id);\r\n            if (index >= 0) {\r\n                list.splice(index, 1);\r\n                if (list.length === 0) {\r\n                    this.dateTasksList.splice(i, 1);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiTextAreaItem } from 'tonva';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { observer } from 'mobx-react';\r\nimport { Task } from '../model';\r\n\r\nconst schema: Schema = [\r\n    { name: 'resulttype', type: 'id', required: false },\r\n    { name: 'result', type: 'string', required: false },\r\n];\r\n\r\n\r\nexport class VSalesTaskInvalid extends VPage<CSalesTask> {\r\n\r\n    private form: Form;\r\n    private task: Task;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            resulttype: { visible: false },\r\n            result: { widget: 'textarea', label: '原因', placeholder: '请输入取消原因！', rows: 12 } as UiTextAreaItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    }\r\n    async open(task: Task) {\r\n        this.task = task;\r\n        this.openPage(this.page, task);\r\n    }\r\n\r\n    private onInvalidTask = async (model: any) => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { result, resulttype } = context.form.data;\r\n        await this.controller.onInvalidTask(this.task, result, resulttype);\r\n        this.closePage(2);\r\n    }\r\n\r\n    private page = observer((salestask: any) => {\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onInvalidTask} >提交</button>;\r\n        return <Page header=\"取消\" footer={footer} headerClassName='bg-primary' >\r\n            <div className=\"App-container container text-left\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                />\r\n            </div>\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, nav, BoxId } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { LMR, List, EasyDate, FA } from 'tonva';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { tv } from 'tonva';\r\nimport { consts } from '../../consts';\r\n\r\nexport class VEmployeeHistory extends VPage<CSalesTask> {\r\n\r\n    private tasks: any;\r\n    async open(tasks: any) {\r\n        if (tasks.length > 0) {\r\n            this.tasks = tasks;\r\n        } else {\r\n            this.tasks = null;\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderHistory = (taskhistory: any, index: number) => {\r\n        let { task, date, status, biz, result } = taskhistory;\r\n\r\n        return <div className=\"d-block p-3\">\r\n            <LMR >\r\n                <div><small className=\"text-muted\"><EasyDate date={date} /> </small></div>\r\n                <LMR right={<small>  {tv(status, (v) => v.name)}</small>}\r\n                    left={<div><span><FA name='user' className='mr-3 text-info' ></FA></span>{tv(task, (v) => tv(v.customer, (vs) => vs.name))}</div>} >\r\n                </LMR>\r\n                <LMR right={<small>{tv(task, (v) => tv(v.type, (vs) => vs.description || '#'))}</small>}\r\n                    left={<small>{tv(task, (v) => tv(v.biz, (vs) => vs.description || '#'))}</small>}>\r\n                </LMR>\r\n            </LMR>\r\n        </div >;\r\n    }\r\n\r\n    //选择任务\r\n    private onTaskClick = async (param: any) => {\r\n        this.controller.showDetailFromId(param.task.obj);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let none = <div className=\"m-3 text-muted small\">【无记录】</div>;\r\n        return <Page header=\"已完成任务\" headerClassName={consts.headerClass}>\r\n            <List before={''} none={none} items={this.tasks} item={{ render: this.renderHistory, onClick: this.onTaskClick }} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, nav } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { LMR, List, EasyDate, FA } from 'tonva';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { tv } from 'tonva';\r\nimport { consts } from '../../consts';\r\n\r\nexport class VCustomerHistory extends VPage<CSalesTask> {\r\n\r\n    private tasks: any;\r\n    async open(tasks: any) {\r\n        if (tasks.length > 0) {\r\n            this.tasks = tasks;\r\n        } else {\r\n            this.tasks = null;\r\n        }\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderHistory = (taskhistory: any, index: number) => {\r\n        let { task, date, status, principal, result } = taskhistory;\r\n        // right={tv(principal)}\r\n        return <div className=\"d-block p-3\">\r\n            <LMR className='small' left={<small className=\"text-muted\"><EasyDate date={date} /></small>}\r\n                right={<small>{tv(status, (v) => v.name)}</small>}>\r\n            </LMR>\r\n            <LMR left={<small>{tv(task, v => tv(v.biz, vs => vs.description))}</small>}\r\n                right={<small>{tv(task, v => tv(v.type, vs => vs.description))}</small>}></LMR>\r\n        </div >;\r\n    }\r\n\r\n    //选择任务\r\n    private onSalesTaskClick = async (param: any) => {\r\n        this.controller.showTaskDetailEdit(param.task.obj);\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let none = <div className=\"m-3 text-muted small\">【无记录】</div>;\r\n        return <Page header=\"交流记录\" headerClassName={consts.headerClass}>\r\n            <List before={''} none={none} items={this.tasks} item={{ render: this.renderHistory, onClick: this.onSalesTaskClick }} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, List, FA, tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CSelectBiz } from './CSelectBiz';\r\n\r\nexport class VSelectBiz extends VPage<CSelectBiz> {\r\n\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderItem = (model: any, index: number) => {\r\n        let { biz, type } = model;\r\n        let left = <div className='text-info mr-3' >{tv(type, (obj) => this.controller.owner.getTaskIcon(biz.obj.name))}</div>\r\n        return <LMR className=\"px-3 py-2\" left={left}>\r\n            <div className=\"font-weight-bold\">{tv(biz, obj => obj.description)}</div>\r\n        </LMR>\r\n    }\r\n\r\n    private onClickTaskBiz = async (model: any) => {\r\n        await this.controller.selectTaskBiz(model);\r\n        //this.ceasePage(1);\r\n    }\r\n\r\n    private page = () => {\r\n        let { taskType, taskBizs } = this.controller;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">正在筹备中</div>;\r\n        return <Page header={taskType.description || taskType.name} headerClassName='bg-primary' >\r\n            <List none={none} items={taskBizs} item={{ render: this.renderItem, onClick: this.onClickTaskBiz }} />\r\n        </Page>\r\n    };\r\n}","import _ from 'lodash';\r\nimport { Tuid, Controller, Map } from 'tonva';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { VAi } from './VAi';\r\nimport { VSelectBiz } from './VSelectBiz';\r\nimport { TaskType, Task } from '../model';\r\nimport { CUqBase, CUqSub } from '../../CBase';\r\n\r\n/**\r\n *\r\n */\r\nexport class CSelectBiz extends CUqSub {\r\n    owner: CSalesTask;\r\n\r\n    taskBizs: any[];\r\n    taskType: TaskType;\r\n    private task: Task;\r\n\r\n    /*\r\n    private mapTaskBiz: Map;\r\n    //构造函数\r\n    constructor(cSalesTask: CSalesTask, res: any) {\r\n        super(res);\r\n        this.cSalesTask = cSalesTask;\r\n        let { cUqSalesTask } = this.cSalesTask.cApp;\r\n        this.mapTaskBiz = cUqSalesTask.map('taskbiz');\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(task: Task) {\r\n        this.task = task;\r\n        this.taskType = task.type;\r\n        await this.getBizFromTaskTypeId(this.taskType);\r\n        this.openVPage(VSelectBiz);\r\n    }\r\n\r\n    //搜索任务类型\r\n    private async getBizFromTaskTypeId(taskType: TaskType) {\r\n        let ret = await this.uqs.salesTask.TaskBiz.query({ type: taskType });\r\n        this.taskBizs = ret.ret;\r\n    }\r\n\r\n    //返回添加任务页面\r\n    selectTaskBiz = async (taskbiz: any) => {\r\n        this.task.biz = taskbiz.biz.obj;\r\n        this.cApp.cCustomer.showSelectCustomer(this.task)\r\n        //this.cSalesTask.cApp.cCustomer.start(this.task);\r\n    }\r\n\r\n    //返回添加任务页面\r\n    returnTaskBiz = async (type: any): Promise<any> => {\r\n        this.returnCall(type);\r\n    }\r\n\r\n\r\n    aiClick = () => {\r\n        this.openVPage(VAi);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { Image } from 'tonva';\r\n\r\nconst imagePath = \"http://www.jkchemical.com/static/Structure/\";\r\nconst altimagePath = \"http://www.jkchemical.com/static/Structure/999.png\";\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')} style={style} className={className} altImage={altimagePath} />;\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Schema, Form, Context, tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { ProductImage } from '../../tools/productImage';\r\nimport { CreateProduct } from '../model';\r\nimport { CSalesTask } from '../CSalesTask';\r\n\r\nconst schema: Schema = [\r\n    { name: 'note', type: 'string', required: false },\r\n    //{ name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VCreateProduct extends VPage<CSalesTask> {\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            note: { widget: 'textarea', label: '备注', placeholder: '' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    }\r\n    private form: Form;\r\n    private createproduct: CreateProduct\r\n    async open(param: CreateProduct) {\r\n        this.createproduct = param;\r\n        this.openPage(this.page, param);\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        return this.render(param);\r\n    });\r\n\r\n\r\n    private onCreateTaskProduct = async (model: any) => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        this.createproduct.note = context.data.note;\r\n        await this.controller.createTaskProduct(this.createproduct);\r\n        this.closePage(2);\r\n    }\r\n\r\n    private renderBrand = (brand: any) => {\r\n        return this.productPropItem('品牌', brand.name);\r\n    }\r\n\r\n    private productPropItem = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n        </>;\r\n    }\r\n\r\n    private productItem = (param: CreateProduct) => {\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = param.product;\r\n        return <div className=\"d-block mb-4 px-2\">\r\n            <div className=\"py-2\">\r\n                <div><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {this.productPropItem('CAS', CAS)}\r\n                        {this.productPropItem('纯度', purity)}\r\n                        {this.productPropItem('分子式', molecularFomula)}\r\n                        {this.productPropItem('分子量', molecularWeight)}\r\n                        {this.productPropItem('产品编号', origin)}\r\n                        {tv(brand, this.renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    render(param: CreateProduct) {\r\n        return <Page header=\"添加产品\" footer={null} headerClassName='bg-primary'>\r\n            <div className=\"mx-3\">\r\n                {this.productItem(param)}\r\n                <Form ref={v => this.form = v}\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    requiredFlag={false}\r\n                />\r\n                <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onCreateTaskProduct} >添加</button>\r\n            </div>\r\n        </Page >\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Schema, tv, List } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { ProductImage } from '../../tools/productImage';\r\n\r\nconst schema: Schema = [\r\n    { name: 'note', type: 'string', required: false },\r\n    //{ name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VProductDetail extends VPage<CSalesTask> {\r\n    private products: any[];\r\n\r\n    async open(param: any) {\r\n\r\n        this.products = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return this.render();\r\n    });\r\n\r\n    private renderBrand = (brand: any) => {\r\n        return this.productPropItem('品牌', brand.name);\r\n    }\r\n\r\n    private productPropItem = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n        </>;\r\n    }\r\n    private renderItem = (param: any, index: number) => {\r\n        //param.product.assure();\r\n        //let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = param.product.obj;\r\n        return tv(param.product, (product) => {\r\n            let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n            return <div className=\"d-block mb-4 px-2\">\r\n                <div className=\"py-2\">\r\n                    <div><strong>{description}</strong></div>\r\n                    <div>{descriptionC}</div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {this.productPropItem('CAS', CAS)}\r\n                            {this.productPropItem('纯度', purity)}\r\n                            {this.productPropItem('分子式', molecularFomula)}\r\n                            {this.productPropItem('分子量', molecularWeight)}\r\n                            {this.productPropItem('产品编号', origin)}\r\n                            {tv(brand, this.renderBrand)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let none = <div className=\"my-3 mx-2 text-muted\">无产品</div>;\r\n        return <Page header=\"产品详情\" headerClassName='bg-primary'>\r\n            <div>\r\n                <List before=\"\" none={none} items={this.products} item={{ render: this.renderItem }} />\r\n            </div>\r\n        </Page >\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, UiSchema, UiInputItem, Schema, Form, Context, tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CreateProduct, Task } from '../model';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { ProductImage } from '../../tools/productImage';\r\n\r\nconst schema: Schema = [\r\n    { name: 'note', type: 'string', required: false },\r\n    //{ name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VCreateProject extends VPage<CSalesTask> {\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            note: { widget: 'textarea', label: '备注', placeholder: '' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', },\r\n        }\r\n    }\r\n    private form: Form;\r\n    private task: Task;\r\n    async open(task: Task) {\r\n        this.task = task;\r\n        this.openPage(this.page, task);\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        return this.render(param);\r\n    });\r\n\r\n    private onCreateTaskProject = async (model: any) => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.createTaskProject(this.task, context.data.note);\r\n        this.closePage();\r\n    }\r\n\r\n    render(param: CreateProduct) {\r\n        return <Page header=\"添加项目\" footer={null} headerClassName='bg-primary'>\r\n            <div className=\"mx-3\">\r\n                <Form ref={v => this.form = v}\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    requiredFlag={false}\r\n                />\r\n                <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onCreateTaskProject} >添加</button>\r\n            </div>\r\n        </Page >\r\n    }\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, List, tv } from 'tonva';\r\nimport { CSalesTask } from '../CSalesTask';\r\n\r\nexport class VProjectDetail extends VPage<CSalesTask> {\r\n\r\n    private projects: any;\r\n\r\n    async open(projects: any) {\r\n        this.projects = projects;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return this.render();\r\n    });\r\n\r\n    private renderItem = (param: any, index: number) => {\r\n        return tv(param.project, (project) => {\r\n            let { name } = project;\r\n            return <div className=\"px-3\" >{name}</div>\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        let none = <div className=\"my-3 mx-2 text-muted\">无项目</div>;\r\n        return <Page header=\"项目详情\" headerClassName=\"bg-primary py-1\">\r\n            < List before={''} none={none} items={this.projects} item={{ render: this.renderItem }} />\r\n        </Page >\r\n    }\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { VPage, Page, PageItems } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { tv } from 'tonva';\r\nimport { LMR, List, EasyDate, SearchBox, StringProp, ComponentProp, Prop, PropGrid, FA } from 'tonva';\r\nimport { ProductImage } from '../tools/productImage';\r\nimport { CProduct } from './CProduct';\r\n\r\nexport class VProductSelect extends VPage<CProduct> {\r\n\r\n    private createproduct: any;\r\n    async open(createproduct: any) {\r\n        this.createproduct = createproduct;\r\n        this.openPage(this.page, createproduct);\r\n    }\r\n\r\n    //每个视图都有一个render方法， 用于自定义页面\r\n    render(member: any): JSX.Element {\r\n        return <this.page />;\r\n    }\r\n\r\n    private renderBrand = (brand: any) => {\r\n        return this.productPropItem('品牌', brand.name);\r\n    }\r\n\r\n    private productPropItem = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n        </>;\r\n    }\r\n    private renderProduct = (product: any, index: number) => {\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"d-block mb-4 px-2\">\r\n            <div className=\"py-2\">\r\n                <div><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {this.productPropItem('CAS', CAS)}\r\n                        {this.productPropItem('纯度', purity)}\r\n                        {this.productPropItem('分子式', molecularFomula)}\r\n                        {this.productPropItem('分子量', molecularWeight)}\r\n                        {this.productPropItem('产品编号', origin)}\r\n                        {tv(brand, this.renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageProduct.more();\r\n    }\r\n\r\n    private onSelectItem = async (product: any) => {\r\n        let { showPorductSelectDetail } = this.controller.cApp.cSalesTask;\r\n        this.createproduct.product = product;\r\n        showPorductSelectDetail(this.createproduct);\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n        let { pageProduct, returnProduct } = this.controller;\r\n\r\n        let add = <div className=\"cursor-pointer \"><FA name=\"plus\" /></div>;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">未搜索到产品</div>;\r\n\r\n        return <Page header='添加产品' onScrollBottom={this.onScrollBottom} headerClassName='bg-primary py-1'>\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2 \"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchByKey(key)}\r\n                placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n            <List before={''} none={none} items={pageProduct} item={{ render: this.renderProduct, onClick: this.onSelectItem }} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, PageItems } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { tv } from 'tonva';\r\nimport { LMR, List, EasyDate, SearchBox, StringProp, ComponentProp, Prop, PropGrid, FA } from 'tonva';\r\nimport { CProduct } from './CProduct';\r\nimport { ProductImage } from '../tools/productImage';\r\n\r\nexport class VProductList extends VPage<CProduct> {\r\n\r\n    async open(customer: any) {\r\n\r\n        this.openPage(this.page, customer);\r\n    }\r\n\r\n    //每个视图都有一个render方法， 用于自定义页面\r\n    render(member: any): JSX.Element {\r\n        return <this.page />;\r\n    }\r\n\r\n    private renderBrand = (brand: any) => {\r\n        return this.productPropItem('品牌', brand.name);\r\n    }\r\n\r\n    private productPropItem = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n        </>;\r\n    }\r\n    private renderProduct = (product: any, index: number) => {\r\n        let { showProductDetail } = this.controller;\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        let onshowProductDetail = async () => await showProductDetail(product);\r\n        return <div className=\"d-block mb-4 px-2\" onClick={onshowProductDetail}>\r\n            <div className=\"py-2\">\r\n                <div><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {this.productPropItem('CAS', CAS)}\r\n                        {this.productPropItem('纯度', purity)}\r\n                        {this.productPropItem('分子式', molecularFomula)}\r\n                        {this.productPropItem('分子量', molecularWeight)}\r\n                        {this.productPropItem('产品编号', origin)}\r\n                        {tv(brand, this.renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageProduct.more();\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n\r\n        let { pageProduct } = this.controller;\r\n        let add = <div className=\"cursor-pointer \"><FA name=\"plus\" /></div>;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">未搜索到产品</div>;\r\n\r\n        return <Page header='产品' onScrollBottom={this.onScrollBottom} headerClassName='bg-primary py-1 px-3'>\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2 \"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchByKey(key)}\r\n                placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n            <List before={''} none={none} items={pageProduct} item={{ render: this.renderProduct, onClick: null }} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, ItemSchema, ObjectSchema, NumSchema, tv, RowContext, UiSchema, UiCustom, Form, FormField } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { ProductImage } from '../tools/productImage';\r\nimport { MainProductChemical } from '../model/product';\r\nimport { MinusPlusWidget } from '../tools/minusPlusWidget';\r\nimport { consts } from '../consts';\r\nimport { CProduct, renderBrand } from './CProduct';\r\nimport { ProductPackRow } from './Product';\r\nimport { ViewMainSubs } from '../mainSubs';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'agentPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n\r\n];\r\n\r\nexport class VProductDetail extends VPage<CProduct> {\r\n    private product: MainProductChemical;\r\n\r\n    async open(product: any) {\r\n        this.product = product.main;\r\n        this.openPage(this.page, product);\r\n    }\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-sm-9\">\r\n                    <div className=\"row\">\r\n                        {this.item('CAS', CAS)}\r\n                        {this.item('纯度', purity)}\r\n                        {this.item('分子式', molecularFomula)}\r\n                        {this.item('分子量', molecularWeight)}\r\n                        {this.item('产品编号', origin)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private item = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4\">{value}</div>\r\n        </>;\r\n    }\r\n\r\n    private arrTemplet = (item: any) => {\r\n        let { pack, retail, promotionPrice, agentPrice, inventoryAllocation, futureDeliveryTimeDescription } = item;\r\n\r\n        let right = null;\r\n        let agent = null;\r\n        if (retail) {\r\n            let price: number = promotionPrice;\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>￥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"text-right row\">\r\n                <div >\r\n                    <span className=\"text-muted h5\">{retailUI}</span>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">￥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n            </div >\r\n            right = price && <div><span className=\"text-warning small\"><strong className=\"small\">牌</strong></span> <span className=\"text-right h5 text-danger\"><span className=\"small\">￥</span>{price}</span></div>;\r\n            agent = agentPrice && <div><span className=\"text-warning small\"><strong className=\"small\">代</strong></span> <span className=\"text-right h5 text-danger\"><span className=\"small \">￥</span>{agentPrice}</span></div>;\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        let deliveryTimeUI = <></>;\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                return <div key={index} className=\"text-success\">\r\n                    {tv(warehouse, (values: any) => <>{values.name}</>)}: {quantity}\r\n                    {deliveryTimeDescription}\r\n                </div>\r\n            });\r\n        } else {\r\n            deliveryTimeUI = <div>{futureDeliveryTimeDescription && '期货: ' + futureDeliveryTimeDescription}</div>\r\n        }\r\n\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-5\">\r\n                    <div className=\"h5\" ><b>{tv(pack, v => <div>{v.radioy}{v.unit}</div>)}</b></div>\r\n                    <div>{deliveryTimeUI}</div>\r\n                </div>\r\n                <div className=\"col-7\">\r\n                    {agent}\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"my-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n\r\n        let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n        viewProduct.model = product;\r\n        return <Page header={\"产品明细\"} headerClassName={consts.headerClass}>\r\n            <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, SearchBox, FA, tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CProduct } from './CProduct';\r\nimport { ProductImage } from '../tools/productImage';\r\n\r\nexport class VProductPackSelect extends VPage<CProduct> {\r\n\r\n    private createproduct: any;\r\n    async open(createproduct: any) {\r\n        this.createproduct = createproduct;\r\n        this.openPage(this.page, createproduct);\r\n    }\r\n\r\n    //每个视图都有一个render方法， 用于自定义页面\r\n    render(member: any): JSX.Element {\r\n        return <this.page />;\r\n    }\r\n\r\n    private renderBrand = (brand: any) => {\r\n        return this.productPropItem('品牌', brand.name);\r\n    }\r\n\r\n    private productPropItem = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n        </>;\r\n    }\r\n    private renderProduct = (product: any, index: number) => {\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"d-block mb-4 px-2\">\r\n            <div className=\"py-2\">\r\n                <div><strong>{description}</strong></div>\r\n                <div>{descriptionC}</div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-9\">\r\n                    <div className=\"row\">\r\n                        {this.productPropItem('CAS', CAS)}\r\n                        {this.productPropItem('纯度', purity)}\r\n                        {this.productPropItem('分子式', molecularFomula)}\r\n                        {this.productPropItem('分子量', molecularWeight)}\r\n                        {this.productPropItem('产品编号', origin)}\r\n                        {tv(brand, this.renderBrand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageProduct.more();\r\n    }\r\n\r\n\r\n    private onSelectItem = async (product: any) => {\r\n        let { showPorductPackSelectDetail } = this.controller.cApp.cSalesTask;\r\n        this.createproduct.product = product;\r\n        showPorductPackSelectDetail(this.createproduct);\r\n    }\r\n\r\n\r\n    private page = observer((customer: any) => {\r\n        let { pageProduct, returnProduct } = this.controller;\r\n        let add = <div className=\"cursor-pointer \"><FA name=\"plus\" /></div>;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">未搜索到产品</div>;\r\n\r\n        return <Page header='选择包装' onScrollBottom={this.onScrollBottom} headerClassName='bg-primary py-1'>\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2 \"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchByKey(key)}\r\n                placeholder=\"搜索品名、编号、CAS、MDL等\" />\r\n            <List before={''} none={none} items={pageProduct} item={{ render: this.renderProduct, onClick: this.onSelectItem }} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { Query, tv, Tuid, Action } from 'tonva';\r\nimport { PageItems, Controller, nav, Page, Image } from 'tonva';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { ProductImage } from '../tools/productImage';\r\nimport { VProductSelect } from './VProductSelect';\r\nimport { VProductList } from './VProductList';\r\nimport { VProductDetail } from './VProductDetail';\r\nimport { LoaderProductChemicalWithPrices } from './item';\r\nimport { VProductPackSelect } from './VProductPackSelect';\r\n\r\n//页面类\r\nclass PageProduct extends PageItems<any> {\r\n\r\n    private searchProductQuery: Query;\r\n\r\n    constructor(searchProductQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchProductQuery = searchProductQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchProductQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.seq;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class CProduct extends CUqBase {\r\n    cApp: CApp;\r\n    @observable pageProduct: PageProduct;\r\n    @observable customerlist: any;\r\n\r\n    /*\r\n    private productTuid: Tuid;\r\n    private querySearchProduct: Query;\r\n    private getPromotionPackQuery: Query;\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqProduct } = this.cApp;\r\n        this.productTuid = cUqProduct.tuid('productx');\r\n        this.querySearchProduct = cUqProduct.query(\"searchProduct\");\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(param: any) {\r\n\r\n        let { currentSalesRegion, currentLanguage } = this.cApp;\r\n        this.pageProduct = null;\r\n        this.openVPage(VProductSelect, param);\r\n        //this.getPromotionPackQuery.obj({ product: productId, pack: v.pack, salesRegion: currentSalesRegion, language: currentLanguage })\r\n    }\r\n\r\n    //查询客户--通过名称\r\n    searchByKey = async (key: string) => {\r\n        this.pageProduct = new PageProduct(this.uqs.product.SearchProduct);\r\n        await this.pageProduct.first({ keyWord: key, salesRegion: 1 });\r\n    }\r\n\r\n    //选择客户--给调用页面返回客户id\r\n    returnProduct = async (product: any): Promise<any> => {\r\n        this.returnCall(product);\r\n    }\r\n\r\n    //显示产品明细\r\n    showProductDetail = async (param: any): Promise<any> => {\r\n        let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n        let product = await loader.load(param.id);\r\n        //let product = await this.productTuid.load(param.productid)\r\n        this.openVPage(VProductDetail, product)\r\n    }\r\n\r\n    //显示选择产品\r\n    showProductSelect = async (product: any): Promise<any> => {\r\n        this.openVPage(VProductSelect, product)\r\n    }\r\n\r\n    //显示选择包装\r\n    showProductPackSelect = async (product: any): Promise<any> => {\r\n        this.openVPage(VProductPackSelect, product)\r\n    }\r\n\r\n\r\n    render = observer(() => {\r\n        this.pageProduct = null;\r\n        return this.renderView(VProductList);\r\n    })\r\n\r\n    tab = () => {\r\n        return <this.render />;\r\n    }\r\n}\r\n\r\n\r\nexport function renderBrand(brand: any) {\r\n    return productPropItem('品牌', brand.name);\r\n}\r\n\r\nexport function productPropItem(caption: string, value: any) {\r\n    if (value === null || value === undefined) return null;\r\n    return <>\r\n        <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n        <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n    </>;\r\n}\r\n\r\nexport function renderProduct(product: any, index: number) {\r\n    let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n    return <div className=\"d-block mb-4 px-2\">\r\n        <div className=\"py-2\">\r\n            <div><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n        </div>\r\n        <div className=\"row\">\r\n            <div className=\"col-3\">\r\n                <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n            </div>\r\n            <div className=\"col-9\">\r\n                <div className=\"row\">\r\n                    {productPropItem('CAS', CAS)}\r\n                    {productPropItem('纯度', purity)}\r\n                    {productPropItem('分子式', molecularFomula)}\r\n                    {productPropItem('分子量', molecularWeight)}\r\n                    {productPropItem('产品编号', origin)}\r\n                    {tv(brand, renderBrand)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, LMR, ItemSchema, ObjectSchema, NumSchema, tv, RowContext, UiSchema, UiCustom, Form, FormField, Context } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from '../../consts';\r\nimport { ProductImage } from '../../tools/productImage';\r\nimport { MainProductChemical } from '../../model/product';\r\nimport { ViewMainSubs } from '../../mainSubs';\r\nimport { renderBrand } from '../../product/CProduct';\r\nimport { ProductPackRow } from '../../product/Product';\r\nimport { CSalesTask } from '../CSalesTask';\r\n\r\nconst schema: ItemSchema[] = [\r\n    { name: 'pack', type: 'object' } as ObjectSchema,\r\n    { name: 'retail', type: 'number' } as NumSchema,\r\n    { name: 'vipPrice', type: 'number' } as NumSchema,\r\n    { name: 'promotionPrice', type: 'number' } as NumSchema,\r\n    { name: 'currency', type: 'string' },\r\n\r\n];\r\n\r\nexport class VCreateProductPack extends VPage<CSalesTask> {\r\n    private product: MainProductChemical;\r\n    private pack: any[] = [];\r\n\r\n    async open(product: any) {\r\n        this.product = product.main;\r\n        this.openPage(this.page, product);\r\n    }\r\n\r\n    private renderProduct = (product: MainProductChemical) => {\r\n\r\n        let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n        return <div className=\"mb-3 px-2\">\r\n            <div className=\"py-2\"><strong>{description}</strong></div>\r\n            <div>{descriptionC}</div>\r\n            <div className=\"row mt-3\">\r\n                <div className=\"col-sm-3\">\r\n                    <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                </div>\r\n                <div className=\"col-sm-9\">\r\n                    <div className=\"row\">\r\n                        {this.item('CAS', CAS)}\r\n                        {this.item('纯度', purity)}\r\n                        {this.item('分子式', molecularFomula)}\r\n                        {this.item('分子量', molecularWeight)}\r\n                        {this.item('产品编号', origin)}\r\n                        {renderBrand(brand)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private item = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4\">{value}</div>\r\n        </>;\r\n    }\r\n\r\n    private arrTemplet = (item: any) => {\r\n        let { pack, retail, promotionPrice, inventoryAllocation, futureDeliveryTimeDescription } = item;\r\n        let right = null;\r\n        if (retail) {\r\n            let price: number = promotionPrice;\r\n            let retailUI: any;\r\n            if (price) {\r\n                retailUI = <small className=\"text-muted\"><del>￥{retail}</del></small>;\r\n            }\r\n            else {\r\n                price = retail;\r\n            }\r\n            right = <div className=\"row\">\r\n                <div className=\"col-sm-6 pb-2 d-flex justify-content-end align-items-center\">\r\n                    <small className=\"text-muted\">{retailUI}</small>&nbsp; &nbsp;\r\n                    <span className=\"text-danger\">￥ <span className=\"h5\">{price}</span></span>\r\n                </div>\r\n            </div >\r\n        } else {\r\n            right = <small>请询价</small>\r\n        }\r\n\r\n        let deliveryTimeUI = <></>;\r\n        if (inventoryAllocation && inventoryAllocation.length > 0) {\r\n            deliveryTimeUI = inventoryAllocation.map((v, index) => {\r\n                let { warehouse, quantity, deliveryTimeDescription } = v;\r\n                return <div key={index} className=\"text-success\">\r\n                    {tv(warehouse, (values: any) => <>{values.name}</>)}: {quantity}\r\n                    {deliveryTimeDescription}\r\n                </div>\r\n            });\r\n        } else {\r\n            deliveryTimeUI = <div>{futureDeliveryTimeDescription && '期货: ' + futureDeliveryTimeDescription}</div>\r\n        }\r\n        return <div className=\"px-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-6\">\r\n                    <div><input type=\"checkbox\" name=\"productpack\" onChange={this.onChangePack} value={pack.id} ></input><b>{tv(pack, v => <div>{v.radioy}{v.unit}</div>)}</b></div>\r\n                    <div>{deliveryTimeUI}</div>\r\n                </div>\r\n                <div className=\"col-6\">\r\n                    {right}\r\n                </div>\r\n            </div>\r\n        </div >;\r\n    }\r\n\r\n    private onChangePack = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        let { value, checked } = evt.currentTarget;\r\n        if (checked) {\r\n            this.addArr(value);\r\n        } else {\r\n            this.removeArr(value);\r\n        }\r\n    }\r\n\r\n    private removeArr(item) {\r\n        for (var i = 0; i < this.pack.length; i++) {\r\n            if (this.pack[i] == item) {\r\n                this.pack.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n\r\n    private addArr(item) {\r\n        this.pack.push(item);\r\n    }\r\n\r\n\r\n    private uiSchema: UiSchema = {\r\n        Templet: this.arrTemplet,\r\n    };\r\n\r\n    private renderPack = (pack: ProductPackRow) => {\r\n        return <>\r\n            <div className=\"sep-product-select\" />\r\n            <Form className=\"my-3\" schema={schema} uiSchema={this.uiSchema} formData={pack} />\r\n        </>;\r\n    }\r\n\r\n    private onCreateTaskProductPack = async (model: any) => {\r\n        let { createTaskProjectPack, createproduct } = this.controller;\r\n        createproduct.pack = this.pack;\r\n        await createTaskProjectPack(createproduct);\r\n\r\n    }\r\n\r\n    private page = observer((product: any) => {\r\n\r\n        let viewProduct = new ViewMainSubs<MainProductChemical, ProductPackRow>(this.renderProduct, this.renderPack);\r\n        viewProduct.model = product;\r\n        return <Page header={\"添加产品包装\"} headerClassName={consts.headerClass}>\r\n            <div className=\"px-2 py-2 bg-white mb-3\">{viewProduct.render()}</div>\r\n            <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onCreateTaskProductPack} >添加</button>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Schema, tv, List } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CSalesTask } from '../CSalesTask';\r\nimport { ProductImage } from '../../tools/productImage';\r\n\r\nconst schema: Schema = [\r\n    { name: 'note', type: 'string', required: false },\r\n    //{ name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VProductPackDetail extends VPage<CSalesTask> {\r\n    private products: any[];\r\n\r\n    async open(param: any) {\r\n\r\n        this.products = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return this.render();\r\n    });\r\n\r\n    private renderBrand = (brand: any) => {\r\n        return this.productPropItem('品牌', brand.name);\r\n    }\r\n\r\n    private productPropItem = (caption: string, value: any) => {\r\n        if (value === null || value === undefined) return null;\r\n        return <>\r\n            <div className=\"col-4 col-sm-2 col-lg-4 text-muted pr-0 small\">{caption}</div>\r\n            <div className=\"col-8 col-sm-4 col-lg-8\">{value}</div>\r\n        </>;\r\n    }\r\n\r\n    private renderItem = (param: any, index: number) => {\r\n        //param.product.assure();\r\n        //let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = param.product.obj;\r\n        return tv(param.product, (product) => {\r\n            let { brand, description, descriptionC, CAS, purity, molecularFomula, molecularWeight, origin, imageUrl } = product;\r\n            return <div className=\"d-block mb-4 px-2\">\r\n                <div className=\"py-2\">\r\n                    <div><strong>{description}</strong></div>\r\n                    <div>{descriptionC}</div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\">\r\n                        <ProductImage chemicalId={imageUrl} className=\"w-100\" />\r\n                    </div>\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row\">\r\n                            {this.productPropItem('CAS', CAS)}\r\n                            {this.productPropItem('纯度', purity)}\r\n                            {this.productPropItem('分子式', molecularFomula)}\r\n                            {this.productPropItem('分子量', molecularWeight)}\r\n                            {this.productPropItem('产品编号', origin)}\r\n                            {tv(brand, this.renderBrand)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    {\r\n                        tv(param.pack, v =>\r\n                            <div>{v.radioy}{v.unit}</div>\r\n                        )\r\n                    }\r\n                </div>\r\n            </div>\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let none = <div className=\"my-3 mx-2 text-muted\">无产品包装</div>;\r\n        return <Page header=\"产品包装详情\" headerClassName='bg-primary'>\r\n            <div>\r\n                <List before=\"\" none={none} items={this.products} item={{ render: this.renderItem }} />\r\n            </div>\r\n        </Page >\r\n    }\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\nimport { Query, Tuid, Action, FA, nav } from 'tonva';\r\nimport { PageItems, Controller } from 'tonva';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { LoaderProductChemicalWithPrices } from '../product/item';\r\nimport { VMain } from './views/VMain';\r\nimport { CType, createTaskTypes } from '../salestask/types/createTypes';\r\nimport { VSalesTaskExtension } from './views/VSalesTaskExtension';\r\nimport { VTaskHistory } from './views/VTaskHistory';\r\nimport { CSelectType } from './type';\r\nimport { Task, TaskField, TaskType, BizType, CreateProduct } from './model';\r\nimport { Tasks } from './model/tasks';\r\nimport { VSalesTaskInvalid } from './views/VSalesTaskInvalid';\r\nimport { VEmployeeHistory } from './views/VEmployeeHistory';\r\nimport { VCustomerHistory } from './views/VCustomerHistory';\r\nimport { CSelectBiz } from './type/CSelectBiz';\r\nimport { VCreateCheck } from './views/VCreateCheck';\r\nimport { VCreateProduct } from './views/VCreateProduct';\r\nimport { VProductDetail } from './views/VProductDetail';\r\nimport { CCommonType } from './types/commonType';\r\nimport { VCreateProject } from './views/VCreateProject';\r\nimport { VProjectDetail } from './views/VProjectDetail';\r\nimport { VCreateProductPack } from './views/VCreateProductPack';\r\nimport { VProductPackDetail } from './views/VProductPackDetail';\r\n\r\nclass PageSalesTask extends PageItems<any> {\r\n\r\n    private searchsalestskQuery: Query;\r\n\r\n    constructor(searchsalestskQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchsalestskQuery = searchsalestskQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchsalestskQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\n/**\r\n *\r\n */\r\nexport class CSalesTask extends CUqBase {\r\n    private taskTypes: { [type: string]: CType } = {};\r\n\r\n    cApp: CApp;\r\n    cSelectType: CSelectType;\r\n    cSalesTaskBiz: CSelectBiz;\r\n\r\n    @observable tasks: Tasks;\r\n    @observable createproduct: CreateProduct;\r\n\r\n    /*\r\n    protected actionCompletionTask: Action;\r\n    protected actionCompletionCustomerInfoTask: Action;\r\n    protected extensionTaskAction: Action;\r\n    protected addTaskAction: Action;\r\n    protected createTaskProductAction: Action;\r\n    protected createTaskProductPackAction: Action;\r\n    protected createTaskProjectAction: Action;\r\n    private taskTuid: Tuid;\r\n    private tuidCustomer: Tuid;\r\n    private tuidTaskType: Tuid;\r\n    private tuidProduct: Tuid;\r\n    private qeurySearchTask: Query;\r\n    private qeurySearchHistory: Query;\r\n    private qeurySearchEmployeeHistory: Query;\r\n    private qeurySearchCustomerHistory: Query;\r\n    private qeurySearchTaskCompletion: Query;\r\n    private qeurySearchTaskProduct: Query;\r\n    private qeurySearchTaskProject: Query;\r\n    private qeurySearchTaskProductPack: Query;\r\n\r\n    private taskBook: any;\r\n\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        this.cSelectType = new CSelectType(this, undefined);\r\n        this.cSalesTaskBiz = new CSelectBiz(this, undefined);\r\n\r\n        let { cUqSalesTask, cUqCustomer, cUqProduct } = this.cApp;\r\n        this.taskTuid = cUqSalesTask.tuid(\"task\");\r\n        this.tuidCustomer = cUqCustomer.tuid('customer');\r\n        this.tuidTaskType = cUqSalesTask.tuid(\"tasktype\");\r\n        this.tuidProduct = cUqProduct.tuid('productx');\r\n\r\n        this.taskBook = cUqSalesTask.book(\"taskbook\");\r\n        this.actionCompletionTask = cUqSalesTask.action('CompletionTask');\r\n        this.actionCompletionCustomerInfoTask = cUqSalesTask.action('CompletionCustomerInfoTask');\r\n\r\n        this.extensionTaskAction = cUqSalesTask.action('ExtensionTask');\r\n        this.addTaskAction = cUqSalesTask.action('AddTask');\r\n        this.createTaskProductAction = cUqSalesTask.action('CreateTaskProduct');\r\n        this.createTaskProjectAction = cUqSalesTask.action('CreateTaskProject');\r\n        this.createTaskProductPackAction = cUqSalesTask.action('CreateTaskProductPack');\r\n\r\n        this.qeurySearchTask = cUqSalesTask.query(\"searchtask\");\r\n        this.qeurySearchHistory = cUqSalesTask.query(\"searchhistorytask\");\r\n        this.qeurySearchEmployeeHistory = cUqSalesTask.query(\"searchhistorytaskbyemployee\");\r\n        this.qeurySearchCustomerHistory = cUqSalesTask.query(\"searchhistorytaskbycustomer\");\r\n        this.qeurySearchTaskCompletion = cUqSalesTask.query(\"searchtaskcompletion\");\r\n        this.qeurySearchTaskProduct = cUqSalesTask.query(\"SearchTaskProduct\");\r\n        this.qeurySearchTaskProject = cUqSalesTask.query(\"SearchTaskProject\");\r\n        this.qeurySearchTaskProductPack = cUqSalesTask.query(\"SearchTaskProductPack\");\r\n\r\n        this.taskTypes = createTaskTypes(this);\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(param: any) {\r\n        this.cSelectType = this.newSub(CSelectType);\r\n        this.cSalesTaskBiz = this.newSub(CSelectBiz);\r\n\r\n        this.taskTypes = createTaskTypes(this);\r\n\r\n        await this.searchTaskByKey(param);\r\n    }\r\n\r\n    //搜索开始------------------------------------------------\r\n    //搜索所有未处理任务\r\n    searchTaskByKey = async (key: string) => {\r\n        let tasks = await this.uqs.salesTask.SearchTask.table({});\r\n        this.tasks = new Tasks(tasks);\r\n    }\r\n    //搜索单个任务\r\n    loadTask = async (taskid: number) => {\r\n        let task = await this.uqs.salesTask.Task.load(taskid);\r\n        task.fields = await this.searchTaskCompletion(taskid);\r\n        return task;\r\n    }\r\n    //搜索处理结果的记录\r\n    searchTaskCompletion = async (taskid: number) => {\r\n        return await this.uqs.salesTask.SearchTaskCompletion.table({ taskid: taskid });\r\n    }\r\n    //显示任务沟通记录\r\n    showTaskHistory = async (taskid: number) => {\r\n        let tasks = await this.uqs.salesTask.SearchHistoryTask.table({ taskid: taskid });\r\n        this.openVPage(VTaskHistory, { tasks: tasks });\r\n    }\r\n    //显示员工沟通记录\r\n    showEmployeeHistory = async () => {\r\n        let tasks = await this.uqs.salesTask.SearchHistoryTaskByEmployee.table({});\r\n        this.openVPage(VEmployeeHistory, { tasks: tasks });\r\n    }\r\n    //显示客户沟通记录\r\n    showCustomerHistory = async (customerid: number) => {\r\n        let tasks = await this.uqs.salesTask.SearchHistoryTaskByCustomer.table({ customerid: customerid });\r\n        this.openVPage(VCustomerHistory, tasks);\r\n    }\r\n    //获取类型的图表\r\n    getTaskIcon(typeName: string) {\r\n        let tt = this.taskTypes[typeName];\r\n        if (tt === undefined) {\r\n            if (typeName == 'qualify') {\r\n                return <FA name='address-book' size=\"lg\" fixWidth={true} />;\r\n            } else if (typeName == 'legend') {\r\n                return <FA name='newspaper-o' size=\"lg\" fixWidth={true} />;\r\n            } else {\r\n                return <FA name='shopping-bag' size=\"lg\" fixWidth={true} />;\r\n            }\r\n        }\r\n        return tt.icon;\r\n    }\r\n    //获取任务类型\r\n    getCTaskType(typeName: string): CType {\r\n        return this.taskTypes[typeName];\r\n    }\r\n    //获取任务类型\r\n    getCommonType(bizName: string): CCommonType {\r\n        let model = this.getCTaskType(bizName);\r\n        return model as CCommonType;\r\n    }\r\n    //搜索结束------------------------------------------------\r\n\r\n\r\n    //显示开始------------------------------------------------\r\n    //显示销售任务明细页面\r\n    showTaskDetailEdit = async (task: Task) => {\r\n        let name = task.biz.obj ? task.biz.obj.name : task.biz.name;\r\n        let tt = this.getCTaskType(task.biz.obj.name);\r\n        if (tt !== undefined) tt.showDetailEdit(task);\r\n    }\r\n    //显示销售任务明细页面\r\n    showDetailFromId = async (task: Task) => {\r\n        this.getCTaskType(task.biz.obj.name).showDetailFromId(task.id);\r\n    }\r\n    //显示任务完结页面\r\n    showTaskComplet = async (task: Task) => {\r\n        let name = task.biz.obj ? task.biz.obj.name : task.biz.name;\r\n        this.getCTaskType(name).showComplet(task);\r\n    }\r\n    //显示结束------------------------------------------------\r\n\r\n\r\n    //处理任务开始------------------------------------------------\r\n    //完结任务\r\n    async finishTask(task: Task) {\r\n        //完结任务--后台数据\r\n        let { id, fields, type } = task;\r\n        let param = {\r\n            taskid: id,\r\n            resulttype: \"compl\",\r\n            result: \"完结\",\r\n            fields: fields\r\n        };\r\n\r\n        if (type.obj.name == \"qualify\") {\r\n            await this.uqs.salesTask.CompletionCustomerInfoTask.submit(param);\r\n        } else {\r\n            await this.uqs.salesTask.CompletionTask.submit(param);\r\n        }\r\n        this.tasks.remove(task);\r\n        this.closePage(2);\r\n    }\r\n\r\n\r\n    //添加并完结任务\r\n    createAndFinishTask = async (task: Task) => {\r\n        let newtask = await this.createTasks(task);\r\n        await this.showTaskComplet(newtask);\r\n    }\r\n\r\n    //显示任务延期页面\r\n    showTaskExtension = async (model: Task) => {\r\n        this.openVPage(VSalesTaskExtension, model);\r\n    }\r\n    //延期任务\r\n    async extensionTask(task: Task, result: string, resulttype: string, date: Date) {\r\n\r\n        let param = { taskid: task.id, result: result, remindDate: date };\r\n        await this.uqs.salesTask.ExtensionTask.submit(param);\r\n        this.tasks.postPone(date, task);\r\n    }\r\n\r\n    //显示拒绝任务页面\r\n    showTaskInvalid = async (model: Task) => {\r\n        this.openVPage(VSalesTaskInvalid, model);\r\n    }\r\n    //拒绝任务\r\n    onInvalidTask = async (task: Task, result: string, resulttype: string) => {\r\n        let param = { taskid: task.id, resulttype: \"Inval\", result: result };\r\n        await this.uqs.salesTask.CompletionTask.submit(param);\r\n        /*\r\n        let index = this.tasks.findIndex(v => v.id === model.id);\r\n        if (index >= 0) this.tasks.splice(index, 1);\r\n        */\r\n        this.tasks.remove(task);\r\n    }\r\n\r\n    //显示选择产品页面\r\n    showPorductSelect = async (task: Task) => {\r\n        let { cProduct } = this.cApp;\r\n        this.createproduct = {\r\n            task: task,\r\n            product: undefined,\r\n            pack: undefined,\r\n            note: undefined\r\n        }\r\n        cProduct.showProductSelect(this.createproduct);\r\n    }\r\n\r\n    showPorductSelectDetail = async (createproduct: any) => {\r\n        this.createproduct = createproduct;\r\n        this.openVPage(VCreateProduct, this.createproduct);\r\n    }\r\n\r\n    //添加产品\r\n    createTaskProduct = async (createproduct: CreateProduct) => {\r\n        this.createproduct = createproduct;\r\n        let { product, task, note } = this.createproduct;\r\n        note = note ? note : undefined;\r\n        let param = { taskid: task.id, productid: product.id, note: note };\r\n        this.uqs.salesTask.CreateTaskProduct.submit(param);\r\n    }\r\n\r\n    //显示产品列表\r\n    showTaskProductDetail = async (task: Task) => {\r\n        let products = await this.uqs.salesTask.SearchTaskProduct.table({ taskid: task.id });\r\n        /*products.map((v, index) => {\r\n            await v.product.assure();\r\n            let aa = v.product;\r\n            let aaa = 1;\r\n        })*/\r\n        await this.openVPage(VProductDetail, products);\r\n    }\r\n\r\n    //添加包装-显示\r\n    showPorductPackSelect = async (task: Task) => {\r\n        let { cProduct } = this.cApp;\r\n        let createproduct = {\r\n            task: task,\r\n            product: undefined,\r\n            pack: undefined,\r\n            note: undefined\r\n        }\r\n        cProduct.showProductPackSelect(createproduct);\r\n    }\r\n    showPorductPackSelectDetail = async (createproduct: any) => {\r\n        this.createproduct = createproduct;\r\n        let loader = new LoaderProductChemicalWithPrices(this.cApp);\r\n        let product = await loader.load(createproduct.product.id);\r\n\r\n        this.openVPage(VCreateProductPack, product)\r\n    }\r\n\r\n    //添加包装\r\n    createTaskProjectPack = async (createproduct: any) => {\r\n        this.createproduct = createproduct;\r\n        let { task, product, note, pack } = this.createproduct;\r\n        let productid = product.id;\r\n        let taskid = task.id;\r\n\r\n        let promises: PromiseLike<any>[] = [];\r\n        pack.forEach(v => {\r\n            promises.push(this.uqs.salesTask.CreateTaskProductPack.submit({ task: taskid, product: productid, pack: v, note: note }));\r\n        })\r\n        let results = await Promise.all(promises);\r\n        this.closePage(2);\r\n    }\r\n\r\n    //显示包装列表\r\n    showTaskProjectPackDetail = async (task: Task) => {\r\n        let projects = await this.uqs.salesTask.SearchTaskProductPack.table({ taskid: task.id });\r\n        this.openVPage(VProductPackDetail, projects);\r\n    }\r\n\r\n\r\n    //添加项目-显示\r\n    showCreateProject = async (task: Task) => {\r\n        this.openVPage(VCreateProject, task);\r\n    }\r\n\r\n    //添加项目\r\n    createTaskProject = async (task: Task, note: string) => {\r\n        let param = { taskid: task.id, note: note };\r\n        await this.uqs.salesTask.CreateTaskProject.submit(param);\r\n    }\r\n\r\n    //显示项目列表\r\n    showTaskProjectDetail = async (task: Task) => {\r\n        let projects = await this.uqs.salesTask.SearchTaskProject.table({ taskid: task.id });\r\n        this.openVPage(VProjectDetail, projects);\r\n    }\r\n\r\n    //处理任务结束------------------------------------------------\r\n\r\n\r\n    //添加任务开始------------------------------------------------\r\n    //显示任务类页面\r\n    showSelectTaskType = async () => {\r\n        //return await this.cSalesTaskType.call();\r\n        await this.cSelectType.start();\r\n    }\r\n    //显示选择处理方式的页面\r\n    showCrateCheck = async (task: Task) => {\r\n        this.openVPage(VCreateCheck, task);\r\n    }\r\n\r\n    //添加任务\r\n    createTask = async (param: any, task: Task) => {\r\n        let newtask = await this.createTasks(task);\r\n        await this.searchTaskByKey('');\r\n    }\r\n\r\n    private createTasks = async (task: Task) => {\r\n        let { customer, type, biz, description, priorty, deadline } = task;\r\n        let customerId = customer.id;\r\n        let typeId = type.id;\r\n        let bizIds = biz.id;\r\n        priorty = priorty ? 1 : 0;\r\n        deadline = deadline ? deadline : undefined;\r\n        description = description ? description : undefined;\r\n        //添加任务--后台数据\r\n        let model = { id: undefined, description: description, customer: customerId, type: typeId, biz: bizIds, sourceID: \"\", sourceType: \"\", sourceNo: \"\", priorty: priorty, deadline: deadline };\r\n        let ret = await this.uqs.salesTask.AddTask.submit(model);\r\n        task.id = ret.id;\r\n        return task;\r\n        /** \r\n        //添加任务--前台页面\r\n        this.tasks.unshift({\r\n            id: ret.id,\r\n            description: description,\r\n            customer: this.tuidCustomer.boxId(customerId),\r\n            type: this.taskTypeTuid.boxId(typeId),\r\n            sourceID: \"\",\r\n            sourceType: \"\",\r\n            sourceNo: \"\",\r\n            priorty: priorty,\r\n            deadline: deadline\r\n        });\r\n        **/\r\n    }\r\n    //添加任务结束------------------------------------------------\r\n\r\n    //显示客户明细页面\r\n    showCustomerDetail = async (customerId: any) => {\r\n        let { cCustomer } = this.cApp;\r\n        cCustomer.showCustomerDetail(customerId);\r\n    }\r\n\r\n    render = observer(() => {\r\n        if (this.isLogined) {\r\n            return this.renderView(VMain);\r\n        } else {\r\n            return <div\r\n                className=\"d-flex h-100 flex-column align-items-center justify-content-center\">\r\n                <div className=\"flex-fill\" />\r\n                <button className=\"btn btn-success w-20c\"\r\n                    onClick={() => nav.showLogin(this.loginCallback, true)}>\r\n                    <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n            </button>\r\n                <div className=\"flex-fill\" />\r\n                <div className=\"flex-fill\" />\r\n            </div>;\r\n        }\r\n    })\r\n\r\n    private loginCallback = async () => {\r\n        nav.pop();\r\n        await this.internalStart(undefined);\r\n    }\r\n\r\n    tab = () => {\r\n        return <this.render />;\r\n    }\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { List, FA } from 'tonva';\r\nimport { CAddress } from './CAddress';\r\n\r\nexport class VAddress extends VPage<CAddress> {\r\n    private provinceId: number;\r\n    private cityId: number;\r\n    private countyId: number;\r\n    private backLevel = 0;\r\n\r\n    async open(param: any) {\r\n        let provinces = await this.controller.getCountryProvince(43);\r\n        this.openPage(this.page, { items: provinces });\r\n    }\r\n\r\n    private page = (provinces: any) => {\r\n        this.backLevel++;\r\n        return <Page header=\"选择所在省市\">\r\n            <div className=\"row no-gutters\">\r\n                {provinces.items.map(v => this.renderPCC(v, this.onProvinceClick))}\r\n            </div>\r\n        </Page>\r\n    }\r\n\r\n    private renderPCC = (pcc: any, onClick: any) => {\r\n        let { id, chineseName } = pcc;\r\n        return <div key={id} className=\"col-6 col-md-4 col-lg-3 cursor-pointer\" >\r\n            <div className=\"pt-1 pb-1 px-2\" onClick={() => onClick(pcc)}\r\n                style={{ border: '1px solid #eeeeee', marginRight: '-1px', marginBottom: '-1px' }}\r\n            >\r\n                <span className=\"ml-1 align-middle\">\r\n                    <FA name=\"chevron-right\" className=\"text-info small\" />\r\n                    &nbsp; {chineseName}\r\n                </span>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private onProvinceClick = async (item: any) => {\r\n        this.provinceId = item.id;\r\n        let cities = await this.controller.getProvinceCities(this.provinceId);\r\n        if (cities) {\r\n            let len = cities.length;\r\n            if (len === 1) {\r\n                await this.onCityClick(cities[0]);\r\n                return;\r\n            }\r\n            if (len > 0) {\r\n                this.backLevel++;\r\n                this.openPageElement(<Page header=\"选择所在城市\">\r\n                    <div className=\"row no-gutters\">\r\n                        {cities.map(v => this.renderPCC(v, this.onCityClick))}\r\n                    </div>\r\n                </Page>);\r\n                return;\r\n            }\r\n        } else {\r\n            this.closePage(1);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCityClick = async (item: any) => {\r\n        this.cityId = item.id;\r\n        let counties = await this.controller.getCityCounties(this.cityId);\r\n        if (counties && counties.length > 0) {\r\n            this.backLevel++;\r\n            this.openPageElement(<Page header=\"选择所在区县\">\r\n                <div className=\"row no-gutters\">\r\n                    {counties.map(v => this.renderPCC(v, this.onCountyClick))}\r\n                </div>\r\n            </Page>);\r\n        } else {\r\n            this.closePage(2);\r\n            this.saveAddress();\r\n        }\r\n    }\r\n\r\n    private onCountyClick = async (item: any) => {\r\n        this.countyId = item.id;\r\n        this.closePage(this.backLevel);\r\n        this.saveAddress();\r\n    }\r\n\r\n    private saveAddress = async () => {\r\n        await this.controller.saveAddress(43, this.provinceId, this.cityId, this.countyId);\r\n    }\r\n}\r\n","import { VAddress } from './VAddress';\r\nimport { CUqBase } from '../CBase';\r\n\r\nexport class CAddress extends CUqBase {\r\n    //private cApp: CSalesTaskApp;\r\n    /*\r\n    private getCountryProvincesQuery: Query;\r\n    private getProvinceCitiesQuery: Query;\r\n    private getCityCountiesQuery: Query;\r\n    private addressTuid: Tuid;\r\n    */\r\n\r\n    /*\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCommon } = this.cApp;\r\n        this.getCountryProvincesQuery = cUqCommon.query('GetCountryProvinces');\r\n        this.getProvinceCitiesQuery = cUqCommon.query('GetProvinceCities');\r\n        this.getCityCountiesQuery = cUqCommon.query('GetCityCounties');\r\n        this.addressTuid = cUqCommon.tuid(\"Address\");\r\n    }\r\n    */\r\n\r\n    protected async internalStart() {\r\n        this.openVPage(VAddress);\r\n    }\r\n\r\n    getCountryProvince = async (countryId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCountryProvinces.table({ country: countryId });\r\n    }\r\n\r\n    getProvinceCities = async (provinceId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetProvinceCities.table({ province: provinceId });\r\n    }\r\n\r\n    getCityCounties = async (cityId: number): Promise<any[]> => {\r\n        return await this.uqs.common.GetCityCounties.table({ city: cityId });\r\n    }\r\n\r\n    saveAddress = async (countryId: number, provinceId: number, cityId?: number, countyId?: number): Promise<any> => {\r\n        let {Address} = this.uqs.common;\r\n        let newAddress = await Address.save(undefined, { country: countryId, province: provinceId, city: cityId, county: countyId });\r\n        let addressId = newAddress && Address.boxId(newAddress.id);\r\n        this.returnCall(addressId);\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, PageItems } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CCustomer } from './CCustomer';\r\nimport { LMR, List, EasyDate, SearchBox, FA } from 'tonva';\r\n\r\nexport class VCustomerSelect extends VPage<CCustomer> {\r\n\r\n    async open(customer: any) {\r\n        this.openPage(this.page, customer);\r\n    }\r\n\r\n    private renderCustomer(salesTask: any, index: number) {\r\n        let { name } = salesTask;\r\n        return <LMR className=\"px-3 py-2 \" left={<FA name='user' className=' my-2 mr-3 text-info' />}>\r\n            <div className=\"font-weight-bold\"></div>\r\n            <div>{name}</div>\r\n        </LMR >\r\n    }\r\n\r\n    private onClickCustomer = async (model: any) => {\r\n        await this.controller.selectCustomer(model);\r\n        //this.ceasePage();\r\n    }\r\n\r\n    private page = observer((customer: any) => {\r\n        let { pageCustomer } = this.controller;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">请搜索客户！</div>;\r\n        return <Page header=\"选择客户\" headerClassName='bg-primary' onScrollBottom={this.onScrollBottom} >\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2\"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchByKey(key)}\r\n                placeholder=\"搜索客户姓名、单位\" />\r\n            <List before={''} none={none} items={pageCustomer} item={{ render: this.renderCustomer, onClick: this.onClickCustomer }} />\r\n        </Page>\r\n    })\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageCustomerSearch.more();\r\n    }\r\n}","\r\nexport function telephoneValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"固定电话格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function mobileValidation(value: string) {\r\n    if (value && !/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value))\r\n        return \"手机号格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function emailValidation(value: string) {\r\n    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n        return \"Email格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function faxValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"传真号码格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function numberValidation(value: string) {\r\n    if (value && !/(^[\\-0-9][0-9]*(.[0-9]+)?)$/.test(value))\r\n        return \"金额式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function addressDetailValidation(value: string) {\r\n    return (value && value.length > 200) ? \"详细地址最多200个字！\" : undefined;\r\n}\r\n\r\nexport function zipCodeValidation(value: string) {\r\n    return (value && value.length > 15) ? \"邮编过长，请修改后录入！\" : undefined;\r\n}\r\n\r\n\r\nexport function organizationNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function departmentNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"部门名称名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function salutationValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function nameValidation(value: string) {\r\n    return (value && value.length > 50) ? \"姓名最多50个字！\" : undefined;\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, PageItems, Schema, UiSchema, UiInputItem, UiRadio, Edit, ItemSchema, nav, UiIdItem, Context } from 'tonva';\r\nimport { tv } from 'tonva';\r\nimport { LMR, StringProp, ComponentProp, Prop, PropGrid, FA } from 'tonva';\r\nimport { CCustomer } from './CCustomer';\r\nimport { consts } from '../consts';\r\nimport { mobileValidation, nameValidation, emailValidation } from 'nv/tools/inputValidations';\r\n\r\nconst schema: Schema = [\r\n    { name: 'name', type: 'string' },\r\n    { name: 'telephone', type: 'number' },\r\n    { name: 'email', type: 'string' },\r\n    { name: 'wechat', type: 'string' },\r\n    { name: 'teacher', type: 'string' },\r\n    { name: 'potential', type: 'string' },\r\n    { name: 'research', type: 'string' },\r\n    { name: 'addressString', type: 'string' },\r\n];\r\n\r\nexport class VCustomerDetail extends VPage<CCustomer> {\r\n\r\n    @observable private customer: any;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            name: { widget: 'text', label: '姓名', placeholder: '请输入姓名', rules: nameValidation } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '请输入电话', rules: mobileValidation } as UiInputItem,\r\n            gender: { widget: 'radio', label: '潜力值', defaultValue: 1, list: [{ value: 0, title: '男' }, { value: 1, title: '女' }] } as UiRadio,\r\n            birthDay: { widget: 'datetime', label: '生日', placeholder: '请输入生日' } as UiInputItem,\r\n            email: { widget: 'text', label: '邮箱', placeholder: '请输入邮箱', rules: emailValidation } as UiInputItem,\r\n            wechat: { widget: 'text', label: '微信', placeholder: '请输入微信号' } as UiInputItem,\r\n            teacher: { widget: 'text', label: '老师', placeholder: '请输入老师' } as UiInputItem,\r\n            addressString: { widget: 'text', label: '地址', placeholder: '请输地址' } as UiInputItem,\r\n            potential: { widget: 'radio', label: '潜力值', defaultValue: 1, list: [{ value: 0, title: '小于10万' }, { value: 1, title: '10万-30万' }, { value: 2, title: '大于30万' }] } as UiRadio,\r\n            research: { widget: 'radio', label: '研究方向', defaultValue: 1, list: [{ value: 0, title: '有机' }, { value: 1, title: '化学' }, { value: 1, title: '分析' }, { value: 1, title: '材料' }] } as UiRadio,\r\n        }\r\n    }\r\n\r\n    async open(customer: any) {\r\n        this.customer = customer;\r\n        this.openPage(this.page, customer);\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.customer[name] = newValue;\r\n        await this.controller.updateMyCustomer(this.customer);\r\n\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { cSalesTask, cCustomerUnit, cCustomer } = this.controller.cApp\r\n        let { showCustomerHistory } = cSalesTask;\r\n        let { id: customerid, unit } = param\r\n        let { showCustomerUnitDetail } = cCustomerUnit;\r\n        let { showInnerCustomerSelect: showCustomerSelect } = cCustomer;\r\n        let { innerCustomer, IsOccupy } = this.controller;\r\n\r\n        let onshowCustomerHistory = async () => await showCustomerHistory(customerid);\r\n        let onshowCustomerUnitDetail = async () => await showCustomerUnitDetail(unit);\r\n        let onshowCustomerSelect = async () => await showCustomerSelect(customerid);\r\n\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-3\" onClick={onshowCustomerUnitDetail}\r\n                    left={< div > <small><FA name='university' className='text-info' /></small> &nbsp;{tv(unit, v => v.name)}</div>}\r\n                    right={< div className=\"w-2c text-right\" > <i className=\"fa fa-chevron-right small\" /></div >}>\r\n                </LMR >,\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-3\" onClick={onshowCustomerHistory}\r\n                    left={< div > <small><FA name='hand-o-right' className='text-info' /></small> &nbsp;沟通记录</div>}\r\n                    right={< div className=\"w-2c text-right\" > <i className=\"fa fa-chevron-right small \" /></div >}>\r\n                </LMR >,\r\n            } as ComponentProp,\r\n            /**{\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-3\" onClick={onshowCustomerSelect}\r\n                    left={< div > <small><FA name='share-alt' className='text-info' /></small> &nbsp;内部客户</div>}\r\n                    right={< div className=\"w-2c text-right\" > <i className=\"fa fa-chevron-right small\" /></div >}>\r\n                    <div className=\"px-3\"> {innerCustomer && tv(innerCustomer, v => v.name)}</div>\r\n                </LMR >,\r\n            } as ComponentProp**/\r\n        ];\r\n\r\n        var header: any = <span>客户详情</span>;\r\n        if (IsOccupy.code == 1) {\r\n            header = <span >客户详情（被占用）</span>;\r\n        }\r\n\r\n        return <Page header={header} headerClassName={consts.headerClass}>\r\n            <PropGrid className=\"my-2\" rows={rows} values={this.customer} alignValue=\"right\" />\r\n            <Edit\r\n                schema={schema}\r\n                uiSchema={this.uiSchema}\r\n                data={this.customer}\r\n                onItemChanged={this.onItemChanged} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, List, SearchBox, FA, tv, PropGrid, ComponentProp, Prop } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CCustomer } from './CCustomer';\r\n\r\nexport class VCustomerList extends VPage<CCustomer> {\r\n\r\n    async open(customer: any) {\r\n\r\n        this.openPage(this.page, customer);\r\n    }\r\n\r\n    //每个视图都有一个render方法， 用于自定义页面\r\n    render(member: any): JSX.Element {\r\n        return <this.page />;\r\n    }\r\n\r\n    private renderCustomer(customer: any, index: number) {\r\n        let { name, unit, IsOccupy } = customer;\r\n\r\n        let occupy: any\r\n        if (IsOccupy == 1) {\r\n            occupy = <FA name='user' className=' my-2 mr-3 text-danger' />\r\n        } else {\r\n            occupy = <FA name='user' className=' my-2 mr-3 text-info' />\r\n        }\r\n        let left = <div>{occupy}<span className=\"font-weight-bold\">{name}</span></div>;\r\n        let right = <div className=\"text-muted  my-2 mr-3 \"><small> {tv(unit, s => s.name)}</small></div>;\r\n        return <LMR className=\"px-3 py-2 \" left={left} right={right}></LMR>\r\n    }\r\n\r\n    private onClickCustomer = async (model: any) => {\r\n        await this.controller.showCustomerDetail(model.id);\r\n    }\r\n\r\n    private page = observer((customer: any) => {\r\n        let { pageCustomer, showSelectCustomerUnit, showCustomerSearch } = this.controller;\r\n        let { showCustomerSearchByUnit } = this.controller.cApp.cCustomerUnit;\r\n        let onshowSelectCustomerUnit = async () => await showSelectCustomerUnit();\r\n        let onshowCustomerSearch = async () => await showCustomerSearch(null);\r\n        let onshowCustomerSearchByCustomer = async () => await showCustomerSearchByUnit();\r\n\r\n        let right = <div className=\"cursor-pointer py-2\">\r\n            <span onClick={onshowCustomerSearch} ><FA name=\"search\" /></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            <span onClick={onshowSelectCustomerUnit} ><FA name=\"plus\" /></span>\r\n        </div>;\r\n        let none = <div className=\"my-3 mx-2 text-warning\"></div>;\r\n        let tit = <span>客户</span>\r\n\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-3\" onClick={onshowCustomerSearchByCustomer}\r\n                    left={< div > <small><FA name='university' className='text-info' /></small> &nbsp;客户单位</div>}\r\n                    right={< div className=\"w-2c text-right\" > <i className=\"fa fa-chevron-right small\" /></div >}>\r\n                </LMR >,\r\n            } as ComponentProp\r\n        ];\r\n\r\n        return <Page header={tit} onScrollBottom={this.onScrollBottom} headerClassName='bg-primary py-1 px-3' right={right} >\r\n            <PropGrid className=\"my-2\" rows={rows} values={undefined} alignValue=\"right\" />\r\n            <List before={''} none={none} items={pageCustomer} item={{ render: this.renderCustomer, onClick: this.onClickCustomer }} />\r\n        </Page>\r\n    })\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageCustomer.more();\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, PageItems, Schema, Form, UiSchema, UiInputItem, UiCheckItem, Context, UiRadio, toUiSelectItems, LMR, FA, Prop, ComponentProp, PropGrid } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CCustomer } from './CCustomer';\r\nimport { consts } from '../consts';\r\nimport { mobileValidation, nameValidation } from 'nv/tools/inputValidations';\r\n\r\n\r\n\r\nconst schema: Schema = [\r\n    { name: 'Name', type: 'string', required: true },\r\n    { name: 'Salutation', type: 'string', required: false },\r\n    { name: 'telephone', type: 'string', required: true },\r\n    { name: 'Gender', type: 'number', required: false },\r\n    { name: 'BirthDay', type: 'date', required: false },\r\n    { name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VCreateCustomer extends VPage<CCustomer> {\r\n    private customerunit: any;\r\n    private form: Form;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            Name: { widget: 'text', label: '姓名', placeholder: '请输入姓名', rules: nameValidation } as UiInputItem,\r\n            Salutation: { widget: 'text', label: '称谓', placeholder: '请输入称谓' } as UiInputItem,\r\n            telephone: { widget: 'text', label: '电话', placeholder: '请输入电话号码', rules: mobileValidation } as UiInputItem,\r\n            Gender: {\r\n                widget: 'radio', label: '性别', placeholder: '性别',\r\n                defaultValue: 1,\r\n                list: toUiSelectItems(['1:男', '2:女']),\r\n                radioClassName: 'w-min-6c d-inline-block'\r\n            } as UiRadio,\r\n            BirthDay: { widget: 'date', label: '生日', placeholder: '' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', className: 'btn btn-primary w-8c' },\r\n        }\r\n    }\r\n\r\n    async open(param: any) {\r\n        this.customerunit = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.createMyCustomer(context.data, this.customerunit);\r\n    }\r\n\r\n    private itemss = \"cursor-pointer mx-3 my-2 w-100\";\r\n    private page = observer(() => {\r\n\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                name: 'unit',\r\n                component: <LMR className={this.itemss}\r\n                    left={<div> <FA name=\"university\" className=\"text-info mr-2 pt-1 \" /> </div>}>\r\n                    {this.customerunit.name}\r\n                </LMR>,\r\n            } as ComponentProp,\r\n        ];\r\n        return <Page header=\"新建客户\" headerClassName={consts.headerClass} >\r\n            <PropGrid className=\"my-2\" rows={rows} values={null} />\r\n            <Form ref={v => this.form = v} className=\"my-3 mx-3\"\r\n                schema={schema}\r\n                uiSchema={this.uiSchema}\r\n                onButtonClick={this.onFormButtonClick}\r\n                requiredFlag={false}\r\n            />\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CCustomer } from './CCustomer';\r\n\r\nexport class VCreateCustomerFinish extends VPage<CCustomer> {\r\n\r\n    private result: number;\r\n    async open(param: number) {\r\n        this.result = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    comeBack = () => {\r\n        this.controller.searchByKey('');\r\n        this.closePage(3);\r\n    }\r\n    private page = observer(() => {\r\n\r\n        var show: any;\r\n        if (this.result == 1) {\r\n            show = <span className=\"text-danger\" > 客户已被其他轻代理占用，跟踪此客户无法获取绩效！</span>;\r\n        }\r\n        return <Page header='新建客户' headerClassName='bg-primary py-1 px-3'>\r\n            <div className=\"w-100 text-center m-3 text-muted\">\r\n                客户添加成功，请在客户搜索页面查看详情！<br />\r\n                {show}\r\n            </div>\r\n            <div className=\"w-100 text-center\">\r\n                <label className=\"text-success\" onClick={this.comeBack}> 返回</label>\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, PageItems } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CCustomer } from './CCustomer';\r\nimport { LMR, List, EasyDate, SearchBox, FA } from 'tonva';\r\n\r\nexport class VMyCustomerSelect extends VPage<CCustomer> {\r\n\r\n    private temp: any;\r\n    async open(temp: any) {\r\n        this.temp = temp;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderCustomer(salesTask: any, index: number) {\r\n        let { name } = salesTask;\r\n        return <LMR className=\"px-3 py-2 \" left={<FA name='user' className=' my-2 mr-3 text-info' />}>\r\n            <div className=\"font-weight-bold\"></div>\r\n            <div>{name}</div>\r\n        </LMR >\r\n    }\r\n\r\n    private onClickCustomer = async (model: any) => {\r\n        await this.controller.returnCustomer(model);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = observer((customer: any) => {\r\n        let { pageCustomer } = this.controller;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">请搜索客户！</div>;\r\n        return <Page header=\"选择客户\" headerClassName='bg-primary'>\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2\"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchByKey(key)}\r\n                placeholder=\"搜索客户姓名、单位\" />\r\n            <List before={''} none={none} items={pageCustomer} item={{ render: this.renderCustomer, onClick: this.onClickCustomer }} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, List, SearchBox, FA, tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CCustomer } from './CCustomer';\r\n\r\nexport class VCustomerSearch extends VPage<CCustomer> {\r\n\r\n    async open(customer: any) {\r\n\r\n        this.openPage(this.page, customer);\r\n    }\r\n\r\n    //每个视图都有一个render方法， 用于自定义页面\r\n    render(member: any): JSX.Element {\r\n        return <this.page />;\r\n    }\r\n\r\n    private renderCustomer(customer: any, index: number) {\r\n        let { name, unit } = customer;\r\n        let left = <div><FA name='user' className=' my-2 mr-3 text-info' /> <span className=\"font-weight-bold\">{name}</span></div>\r\n        let right = <div className=\"text-muted  my-2 mr-3 \"><small> {tv(unit, s => s.name)}</small></div>;\r\n        return <LMR className=\"px-3 py-2 \" left={left} right={right}></LMR>\r\n    }\r\n\r\n    private onClickCustomer = async (model: any) => {\r\n        await this.controller.showCustomerDetail(model.id);\r\n    }\r\n\r\n    private page = observer((customer: any) => {\r\n        let { pageCustomerSearch, showSelectCustomerUnit } = this.controller;\r\n        let onshowSelectCustomerUnit = async () => await showSelectCustomerUnit();\r\n\r\n        let right = <div className=\"cursor-pointer py-2\">\r\n            <span onClick={onshowSelectCustomerUnit} ><FA name=\"plus\" /></span>\r\n        </div>;\r\n        let none = <div className=\"my-3 mx-2 text-warning\"></div>;\r\n        return <Page header='搜索客户' onScrollBottom={this.onScrollBottom} headerClassName='bg-primary py-1'  >\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2  \"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchCustomerByKey(key)}\r\n                placeholder=\"搜索客户姓名、单位\" />\r\n            <List before={''} none={none} items={pageCustomerSearch} item={{ render: this.renderCustomer, onClick: this.onClickCustomer }} />\r\n        </Page>\r\n    })\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageCustomerSearch.more();\r\n    }\r\n}","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { PageItems, Controller, Query, Tuid, Action, Map, Context } from 'tonva';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { Task } from '../salestask/model';\r\nimport { CAddress } from '../address/CAddress';\r\nimport { VCustomerUnitSelect } from '../customerunit/VCustomerUnitSelect';\r\nimport { VCustomerSelect } from './VCustomerSelect';\r\nimport { VCustomerDetail } from './VCustomerDetail';\r\nimport { VCustomerList } from './VCustomerList';\r\nimport { VCreateCustomer } from './VCreateCustomer';\r\nimport { VCreateCustomerFinish } from './VCreateCustomerFinish';\r\nimport { VMyCustomerSelect } from './VMyCustomerSelect';\r\nimport { VCustomerSearch } from './VCustomerSearch';\r\n\r\n//页面类\r\nclass PageMyCustomer extends PageItems<any> {\r\n\r\n    private searchCustomerQuery: Query;\r\n\r\n    constructor(searchCustomerQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 11;\r\n        this.searchCustomerQuery = searchCustomerQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchCustomerQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\n\r\n\r\nclass PageMyCustomerCearch extends PageItems<any> {\r\n\r\n    private searchCustomerQuery: Query;\r\n\r\n    constructor(searchCustomerQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 11;\r\n        this.searchCustomerQuery = searchCustomerQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchCustomerQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n *\r\n */\r\nexport class CCustomer extends CUqBase {\r\n    cApp: CApp;\r\n\r\n    @observable pageCustomer: PageMyCustomer;\r\n    @observable pageCustomerSearch: PageMyCustomerCearch;\r\n    @observable innerCustomer: any;\r\n    @observable IsOccupy: any;\r\n    private task: Task;\r\n\r\n    /*\r\n    private tuidMyCustomer: Tuid;\r\n    private querySearchMyCustomer: Query;\r\n    private querysearchCustomerMyCustomerMap: Query;\r\n    private actionCreateMyCustomer: Action;\r\n    private actionUpateCustomerMyCustomerMap: Action;\r\n\r\n    private mapCustomerMyCustomerMap: Map;\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqSalesTask } = this.cApp;\r\n\r\n        this.tuidMyCustomer = cUqSalesTask.tuid(\"mycustomer\");\r\n        this.querySearchMyCustomer = cUqSalesTask.query(\"searchmycustomer\");\r\n        this.actionCreateMyCustomer = cUqSalesTask.action(\"CreateMyCustomer\");\r\n        this.mapCustomerMyCustomerMap = cUqSalesTask.map(\"CustomerMyCustomerMap\");\r\n        this.actionUpateCustomerMyCustomerMap = cUqSalesTask.action(\"UpateCustomerMyCustomerMap\");\r\n        this.querysearchCustomerMyCustomerMap = cUqSalesTask.query(\"searchCustomerMyCustomerMap\");\r\n\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(task: Task) {\r\n        this.pageCustomer = null;\r\n        this.task = task;\r\n        this.searchByKey('');\r\n        this.openVPage(VMyCustomerSelect);\r\n    }\r\n\r\n    //查询客户--通过名称\r\n    searchByKey = async (key: string) => {\r\n        this.pageCustomer = new PageMyCustomer(this.uqs.salesTask.searchMyCustomer);\r\n        this.pageCustomer.first({ key: key });\r\n    }\r\n\r\n    //查询客户--通过名称\r\n    searchCustomerByKey = async (key: string) => {\r\n        this.pageCustomerSearch = new PageMyCustomerCearch(this.uqs.salesTask.searchMyCustomer);\r\n        this.pageCustomerSearch.first({ key: key });\r\n    }\r\n\r\n    //加载客户明细\r\n    loadCustomerDetail = async (customerid: number) => {\r\n        return await this.uqs.salesTask.MyCustomer.load(customerid);\r\n    }\r\n\r\n    //查询客户--通过ID\r\n    showCustomerDetail = async (customerid: number) => {\r\n        let mycustomer = await this.loadCustomerDetail(customerid);\r\n\r\n        let IsOccupy = await this.uqs.salesTask.MyCustomerIsOccupy.query({ mycustomer: mycustomer.id });\r\n        this.IsOccupy = IsOccupy.ret[0];\r\n\r\n        let customer = await this.uqs.salesTask.CustomerMyCustomerMap.query({ mycustomer: mycustomer.id });\r\n        if (customer.ret.length > 0) {\r\n            this.innerCustomer = customer.ret[0].customer;\r\n        } else {\r\n            this.innerCustomer = null;\r\n        }\r\n        this.openVPage(VCustomerDetail, mycustomer);\r\n    }\r\n\r\n    showSelectCustomer = async (task: Task) => {\r\n        this.searchByKey('');\r\n        this.task = task;\r\n        this.openVPage(VCustomerSelect);\r\n    }\r\n\r\n    showCustomerSearch = async (val: any): Promise<any> => {\r\n        if (val == null) {\r\n            this.pageCustomerSearch = null;\r\n        } else {\r\n            this.searchCustomerByKey(val);\r\n        }\r\n        this.openVPage(VCustomerSearch);\r\n    }\r\n\r\n    //选择客户--给调用页面返回客户id\r\n    selectCustomer = async (customer: any): Promise<any> => {\r\n        this.task.customer = customer;\r\n        this.cApp.cSalesTask.showCrateCheck(this.task);\r\n    }\r\n\r\n    //选择客户--给调用页面返回客户id\r\n    returnCustomer = async (customer: any): Promise<any> => {\r\n        this.returnCall(customer);\r\n    }\r\n\r\n    //显示新建客户页面\r\n    showCreateCustomer = (param: any) => {\r\n        this.openVPage(VCreateCustomer, param);\r\n    }\r\n\r\n    //显示选择客户的页面\r\n    showSelectCustomerUnit = () => {\r\n        this.cApp.cCustomerUnit.start();\r\n    }\r\n\r\n    //新建客户\r\n    createMyCustomer = async (param: any, customerunit: any) => {\r\n        let par = {\r\n            unit: customerunit.id,\r\n            no: undefined,\r\n            name: param.Name,\r\n            firstName: \"\",\r\n            lastName: \"\",\r\n            telephone: param.telephone,\r\n            gender: param.Gender ? 1 : param.Gender,\r\n            salutation: param.Salutation,\r\n            birthDay: param.BirthDay\r\n        }\r\n        let ret = await this.uqs.salesTask.CreateMyCustomer.submit(par);\r\n        let { code } = ret;\r\n        this.openVPage(VCreateCustomerFinish, code);\r\n    }\r\n\r\n    //修改单位信息\r\n    updateMyCustomer = async (param: any) => {\r\n        await this.uqs.salesTask.MyCustomer.save(param.id, param);\r\n    }\r\n\r\n    showInnerCustomerSelect = async (mycustomer: any) => {\r\n        let { cWebUser } = this.cApp;\r\n        this.innerCustomer = await cWebUser.call();\r\n        await this.createWebUserMyCustomerMap(this.innerCustomer.id, mycustomer);\r\n    }\r\n\r\n    createWebUserMyCustomerMap = async (customer: any, mycustomer: any) => {\r\n        await this.uqs.salesTask.UpateCustomerMyCustomerMap.submit({ mycustomer: mycustomer, customer: customer });\r\n    }\r\n\r\n    pickAddress = async (context: Context, name: string, value: number): Promise<number> => {\r\n        let cAddress = this.newC(CAddress);\r\n        return await cAddress.call<number>();\r\n    }\r\n\r\n    render = observer(() => {\r\n        return this.renderView(VCustomerList);\r\n    })\r\n\r\n    tab = () => {\r\n        this.searchByKey('');\r\n        return <this.render />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { LMR, VPage, nav, Image, ComponentProp, Prop, PropGrid, FA } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport classNames from 'classnames';\r\nimport { runInThisContext } from 'vm';\r\n//import wer from '../images/wer.jpg';\r\n\r\nfunction rowCom(iconName: string, iconColor: string, caption: string, value: any, onClick: any) {\r\n    return <LMR className=\"cursor-pointer w-100 py-2 my-2 align-items-center  \" onClick={onClick}\r\n        left={<FA name={iconName} className={'mr-3 ' + iconColor} fixWidth={true} size=\"lg\" />}\r\n        right={<div className=\"w-2c text-right\" > <i className=\"fa fa-chevron-right\" /></div>}>\r\n        {caption}<span className=\" ml-3\">{value}</span>\r\n    </LMR>;\r\n}\r\n\r\nexport class VMe extends VPage<CMe> {\r\n    private user: any;\r\n    private inviteCode: any;\r\n    //private salesAmont: any;\r\n\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n        let { user, inviteCode } = this.controller;\r\n        this.user = user;\r\n        this.inviteCode = inviteCode;\r\n        this.controller.onComputeAchievement();\r\n        return <this.page />;\r\n    }\r\n\r\n    private userSpan(name: string, nick: string): JSX.Element {\r\n        return nick ?\r\n            <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n            : <b>{name}</b>\r\n    }\r\n\r\n    private meInfo() {\r\n        let { user, showMeDetail, showMessage, showTeam, salesAmont } = this.controller;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        let { showCustomerSearch } = this.controller.cApp.cCustomer;\r\n        let { cMessage } = this.controller.cApp\r\n        let count: any = cMessage.count.get();\r\n        let onshowMeDetail = async () => await showMeDetail();\r\n        let onshowMessage = async () => await showMessage();\r\n        let onshowTeam = async () => await showTeam();\r\n        let onshowCustomerSearch = async () => await showCustomerSearch();\r\n        let pointer, badge;\r\n        if (count > 0) {\r\n            pointer = 'cursor-pointer';\r\n            if (count < 100) badge = <u>{count}</u>;\r\n            else badge = <u>99+</u>;\r\n        }\r\n\r\n        let { teamCount, customerCount, activeCustomerCount } = salesAmont;\r\n        return <div className=\"toggle cursor-pointer px-2 py-2 w-100\"\r\n            style={{ backgroundColor: '#f0f0f0', marginRight: '-1px', marginBottom: '-1px' }}>\r\n            <LMR\r\n                left={<div onClick={onshowMeDetail}> <Image className=\"w-3c h-3c mr-3\" src={icon} /> </div>}\r\n                right={<div className={classNames('jk-cart ml-1 mr-2', pointer)} onClick={onshowMessage} >\r\n                    <FA className=\"fa-lg\" name=\"envelope-o\" />\r\n                    {badge}\r\n                </div>}>\r\n                <div onClick={onshowMeDetail} className=\"  \" >\r\n                    <div>{this.userSpan(name, nick)}</div>\r\n                    <div className=\"small\"><span >邀请码:</span> {this.inviteCode}</div>\r\n                </div>\r\n            </LMR>\r\n            <LMR className=\"cursor-pointer w-100 pt-1\">\r\n                {\r\n                    <table className=\"w-100 text-center\">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>\r\n                                    <div className=\"text-center\" onClick={onshowTeam}>\r\n                                        <div>{teamCount}</div>\r\n                                        <small><small>&nbsp;&nbsp;&nbsp;&nbsp;团队&nbsp;&nbsp;&nbsp;&nbsp;</small></small>\r\n                                    </div>\r\n                                </td>\r\n                                <td>\r\n                                    <div className=\"text-center\" onClick={onshowCustomerSearch}>\r\n                                        <div >{customerCount}</div>\r\n                                        <small><small>&nbsp;&nbsp;&nbsp;&nbsp;客户&nbsp;&nbsp;&nbsp;&nbsp;</small></small>\r\n                                    </div>\r\n                                </td>\r\n                                <td>\r\n                                    <div className=\"text-center\" onClick={onshowCustomerSearch}>\r\n                                        <div >{activeCustomerCount}</div>\r\n                                        <small><small>活跃客户</small></small>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                }\r\n            </LMR >\r\n        </div>;\r\n    }\r\n\r\n    private achievement() {\r\n\r\n        let { salesAmont } = this.controller;\r\n        let { oneAchievement, twoAchievement, threeAchievement } = salesAmont;\r\n        let divTag = (t: string, achievement: number) => <div\r\n            className=\"cursor-pointer\"\r\n            onClick={async () => await this.controller.showAchievementDetail(t)}>\r\n            {achievement <= 0.001 ?\r\n                <div className=\"h5\"> - </div>\r\n                :\r\n                <div className=\"h5\"><strong>{achievement.toFixed(2)}</strong> <span className=\"h6\"><small>元</small></span></div>\r\n            }\r\n            <div className=\"h6\"><small>{t}</small></div>\r\n        </div>;\r\n\r\n        return <div className=\"toggle rounded text-center text-white bg-primary pt-5 pb-3\">\r\n            <div className=\"py-4\" >\r\n                <div className=\"text-warning\" onClick={async () => await this.controller.showAchievementDetail('A')}>\r\n                    <span className=\"h1\">{(oneAchievement + twoAchievement + threeAchievement).toFixed(2)}</span>\r\n                    <small> 元</small>\r\n                </div>\r\n                <h6 className=\"text-warning\"><small>累计收益</small></h6>\r\n            </div>\r\n            <div className=\"d-flex justify-content-around\">\r\n                {divTag('待到款', (oneAchievement + twoAchievement + threeAchievement))}\r\n                {divTag('可提现', 0)}\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { cSalesTask, cMessage, cCoupon } = this.controller.cApp\r\n        let { showEmployeeHistory } = cSalesTask;\r\n        let { salesAmont, showSet } = this.controller;\r\n\r\n        let onshowEmployeeHistory = async () => await showEmployeeHistory();\r\n        let onshowCreateCoupon = async () => await cCoupon.showCreateCoupon()\r\n\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                component: <LMR className=\"cursor-pointer w-100 py-2 my-2 \">\r\n                    {\r\n                        <table className=\"w-100 \">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td className=\"w-4\">\r\n                                        <div className=\"text-center\" onClick={onshowCreateCoupon}>\r\n                                            <FA name=\"th-large\" className='text-warning' fixWidth={true} size=\"lg\" />\r\n                                            <br />\r\n                                            <small><small>&nbsp;优惠码&nbsp;</small></small>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"w-4\">\r\n                                        <div className=\"text-center\" onClick={onshowEmployeeHistory} >\r\n                                            <FA name=\"tag\" className='text-info' fixWidth={true} size=\"lg\" />\r\n                                            <br />\r\n                                            <small><small >完成任务</small></small>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"w-4\">\r\n                                        <div className=\"text-center\" onClick={showSet} >\r\n                                            <FA name=\"cog\" className='text-info' fixWidth={true} size=\"lg\" />\r\n                                            <br />\r\n                                            <small><small>&nbsp;&nbsp;设置&nbsp;&nbsp;</small></small>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    }\r\n                </LMR >,\r\n            } as ComponentProp,\r\n        ];\r\n        //style={{ backgroundImage: `url(${wer})`, marginRight: '-1px', marginBottom: '-1px' }}\r\n        return <div className=\"bg-white\" >\r\n            {this.achievement()}\r\n            {this.meInfo()}\r\n            <PropGrid className=\"\" rows={rows} values={null} alignValue=\"right\" />\r\n        </div >\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, ItemSchema, ImageSchema, StringSchema, UiSchema, UiTextItem, UiImageItem, Edit, nav, userApi, LMR, FA } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VMeDetail extends VPage<CMe> {\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n            nick: { widget: 'text', label: '昵称', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n        }\r\n    }\r\n\r\n    @observable private data: any;\r\n    async open(position: any) {\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user[name] = newValue;\r\n    }\r\n\r\n    private page = () => {\r\n\r\n        return <Page header='个人信息' headerClassName='bg-primary py-1' >\r\n            <Edit schema={this.schema} uiSchema={this.uiSchema}\r\n                data={this.data}\r\n                onItemChanged={this.onItemChanged}\r\n            />\r\n            <LMR className=\"d-flex px-3 py-2 bg-white align-items-center cursor-pointer\"\r\n                right={this.controller.inviteCode}>\r\n                邀请码\r\n            </LMR>\r\n        </Page >\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, LMR, Prop, ComponentProp, FA, PropGrid } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from '../consts';\r\nimport { CMe } from './CMe';\r\n\r\nfunction rowCom(iconName: string, iconColor: string, caption: string, value: any, onClick: any) {\r\n    return <LMR className=\"cursor-pointer w-100 py-2 my-2 align-items-center  \" onClick={onClick}\r\n        left={<FA name={iconName} className={'mr-3 ' + iconColor} fixWidth={true} size=\"lg\" />}\r\n        right={<div className=\"w-2c text-right\" > <i className=\"fa fa-chevron-right\" /></div>}>\r\n        {caption}<span className=\" ml-3\">{value}</span>\r\n    </LMR>;\r\n}\r\nfunction rowComNone(iconName: string, iconColor: string, caption: string, value: any, onClick: any) {\r\n    return <LMR className=\"cursor-pointer w-100 py-2 my-2 align-items-center  \" onClick={onClick}\r\n        left={<FA name={iconName} className={'mr-3 ' + iconColor} fixWidth={true} size=\"lg\" />}\r\n        right={<div className=\"w-2c text-right\" ></div>}>\r\n        {caption}<span className=\" ml-3\">{value}</span>\r\n    </LMR>;\r\n}\r\n\r\nexport class VAchievement extends VPage<CMe> {\r\n    private salesAmont: any;\r\n\r\n    async open(param: any) {\r\n        this.salesAmont = param[0];\r\n        if (this.salesAmont == null) {\r\n            this.salesAmont = { oneSaleVolume: 0, twoSaleVolume: 0, threeSaleVolume: 0, oneAchievement: 0, twoAchievement: 0, threeAchievement: 0 }\r\n        }\r\n        this.openPage(this.page, param);\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { oneSaleVolume, twoSaleVolume, threeSaleVolume, oneAchievement, twoAchievement, threeAchievement } = this.salesAmont;\r\n\r\n        let onshowAchievementDetailA = async () => await this.controller.showAchievementDetail(\"A\");\r\n        let onshowAchievementDetailB = async () => await this.controller.showAchievementDetail(\"B\");\r\n        let onshowAchievementDetailC = async () => await this.controller.showAchievementDetail(\"C\");\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                component: rowComNone('cny', 'text-warning', '销售金额', oneSaleVolume, undefined),\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                component: rowCom('gg', 'text-info', 'A类绩效', oneAchievement, onshowAchievementDetailA),\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                component: rowCom('gg', 'text-danger', 'B类绩效', twoAchievement, onshowAchievementDetailB),\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                component: rowCom('gg', 'text-warning', 'C类绩效', threeAchievement, onshowAchievementDetailC),\r\n            } as ComponentProp,\r\n        ];\r\n\r\n        return <Page header=\"我的业绩\" headerClassName={consts.headerClass} >\r\n            <PropGrid className=\"\" rows={rows} values={null} alignValue=\"right\" />\r\n        </Page >\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, ItemSchema, ImageSchema, StringSchema, UiSchema, UiTextItem, UiImageItem, Edit, nav, userApi, LMR, FA, Prop, IconText, PropGrid } from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport { observable } from 'mobx';\r\nimport { consts } from '../consts';\r\nimport { appConfig } from 'nv';\r\n\r\nexport class VSet extends VPage<CMe> {\r\n\r\n    async open(position: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private logout = () => {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private page = () => {\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                component: <div className=\"w-100 d-flex justify-content-between\">\r\n                    <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于本APP\" />\r\n                    <div className=\"py-2 small\">V{appConfig.version}</div>\r\n                </div>,\r\n            },\r\n            ''\r\n        ];\r\n\r\n        let footer = <button type=\"button\" className=\"btn btn-outline-danger flex-grow-1 mx-3 my-1 w-100\" onClick={this.logout} ><FA name=\"sign-out\" size=\"lg\" /> 退出</button>;\r\n        return <Page header='设置' headerClassName={consts.headerClass} footer={footer}>\r\n            <PropGrid rows={rows} values={{}} />\r\n        </Page >\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, LMR, List, EasyDate, tv, FA, TabCaption, TabProp, Tabs } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { observer, Observer } from 'mobx-react';\r\nimport { CMe } from './CMe';\r\nimport { consts } from '../consts';\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\nconst tabCaption = (caption: string, amount: number): TabCaption => {\r\n    return (selected: boolean) => <div className=\"w-100 small pt-2 text-center\">\r\n        <div className={color(selected)}>{caption}</div>\r\n        <div className={color(selected)}>{amount}</div>\r\n    </div>;\r\n}\r\n\r\nexport class VAchievementDetail extends VPage<CMe> {\r\n\r\n    @observable private achievementsA: any[] = [];\r\n    @observable private achievementsB: any[];\r\n    @observable private achievementsC: any[];\r\n    private oneAchievement: any;\r\n    private twoAchievement: any;\r\n    private threeAchievement: any;\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n        let { oneAchievement, twoAchievement, threeAchievement } = this.controller.salesAmont;\r\n        this.oneAchievement = oneAchievement;\r\n        this.twoAchievement = twoAchievement;\r\n        this.threeAchievement = threeAchievement;\r\n    }\r\n\r\n    private renderItem(model: any, index: number) {\r\n        let { date, Amount, order, status } = model;\r\n        var statusShow: any;\r\n        if (status == 1) {\r\n            statusShow = \"待转入\";\r\n        } else {\r\n            statusShow = \"已转入\";\r\n        }\r\n        let data = <EasyDate date={date} />;\r\n        let amount = <div>{Amount}</div>;\r\n        return <div className=\"d-block\">\r\n            <div>\r\n                <LMR className=\"px-3 pt-2 small\" left={<div className=\"text-muted\">收益产生日期</div>} right={data}></LMR>\r\n                <LMR className=\"px-3 small\" left={<div className=\"text-muted\">订单号</div>} right={order}></LMR>\r\n                <LMR className=\"px-3 small\" left={<div className=\"text-muted\">状态</div>} right={statusShow}></LMR>\r\n                <LMR className=\"px-3 pb-2 small\" left={<div className=\"text-muted\">预估金额</div>} right={amount}></LMR>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private tabs: TabProp[] = [\r\n        {\r\n            name: 'a',\r\n            caption: tabCaption('A类业绩', this.oneAchievement),\r\n            content: () => {\r\n                return <List items={this.achievementsA} item={{ render: this.renderItem }} none=\"无业绩\" />\r\n            },\r\n            load: async () => {\r\n                this.achievementsA = [];\r\n                this.achievementsA.push(...await this.controller.searchAchievementDetail(1));\r\n                //this.achievementsA = await this.controller.searchAchievementDetail(1);\r\n            }\r\n        }, {\r\n            name: 'b',\r\n            caption: tabCaption('B类业绩', this.twoAchievement),\r\n            content: () => {\r\n                return <List items={this.achievementsB} item={{ render: this.renderItem }} none=\"无业绩\" />\r\n            },\r\n            load: async () => {\r\n                this.achievementsB = [];\r\n                this.achievementsB.push(...await this.controller.searchAchievementDetail(2));\r\n            }\r\n        }, {\r\n            name: 'c',\r\n            caption: tabCaption('C类业绩', this.threeAchievement),\r\n            content: () => {\r\n                return <List items={this.achievementsC} item={{ render: this.renderItem }} none=\"无业绩\" />\r\n            },\r\n            load: async () => {\r\n                this.achievementsC = [];\r\n                this.achievementsC.push(...await this.controller.searchAchievementDetail(3));\r\n            }\r\n        }\r\n    ];\r\n\r\n    private page = observer(() => {\r\n\r\n        let tabs: TabProp[] = [\r\n            {\r\n                name: 'a',\r\n                caption: tabCaption('A类业绩', this.oneAchievement),\r\n                content: () => {\r\n                    return <List items={this.achievementsA} item={{ render: this.renderItem }} none=\"无业绩\" />\r\n                },\r\n                load: async () => {\r\n                    this.achievementsA = [];\r\n                    this.achievementsA.push(...await this.controller.searchAchievementDetail(1));\r\n                    //this.achievementsA = await this.controller.searchAchievementDetail(1);\r\n                }\r\n            }, {\r\n                name: 'b',\r\n                caption: tabCaption('B类业绩', this.twoAchievement),\r\n                content: () => {\r\n                    return <List items={this.achievementsB} item={{ render: this.renderItem }} none=\"无业绩\" />\r\n                },\r\n                load: async () => {\r\n                    this.achievementsB = [];\r\n                    this.achievementsB.push(...await this.controller.searchAchievementDetail(2));\r\n                }\r\n            }, {\r\n                name: 'c',\r\n                caption: tabCaption('C类业绩', this.threeAchievement),\r\n                content: () => {\r\n                    return <List items={this.achievementsC} item={{ render: this.renderItem }} none=\"无业绩\" />\r\n                },\r\n                load: async () => {\r\n                    this.achievementsC = [];\r\n                    this.achievementsC.push(...await this.controller.searchAchievementDetail(3));\r\n                }\r\n            }\r\n        ];\r\n        return <Page header=\"我的业绩\" headerClassName={consts.headerClass}>\r\n            <Tabs tabs={tabs} tabPosition=\"top\" />\r\n        </Page>\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport _ from 'lodash';\r\nimport { Query, Controller, Map, Tuid, Action, nav, loadAppUqs } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VTeam } from '../team/VTeam';\r\nimport { VTeamDetail } from '../team/VTeamDetail';\r\nimport { VMe } from './VMe';\r\nimport { VMeDetail } from './VMeDetail';\r\nimport { VAchievement } from './VAchievement';\r\nimport { VSet } from './VSet';\r\nimport { VAchievementDetail } from './VAchievementDetail';\r\nimport { observable } from 'mobx';\r\n\r\n/**\r\n *\r\n */\r\nexport class CMe extends CUqBase {\r\n    inviteCode: string;\r\n    position: any;\r\n    @observable salesAmont: any = { oneSaleVolume: 0.00, twoSaleVolume: 0.00, threeSaleVolume: 0.00, oneAchievement: 0.0, twoAchievement: 0.0, threeAchievement: 0.0, teamCount: 0.0, customerCount: 0.0, activeCustomerCount: 0.0 };\r\n    /*\r\n    private querySearchPosition: Query;\r\n    private querySearchAchievement: Query;\r\n    private querySearchAchievementHistory: Query;\r\n    private actionComputeAchievement: Action;\r\n\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqSalesTask } = this.cApp;\r\n        this.querySearchPosition = cUqSalesTask.query(\"searchposition\");\r\n        this.querySearchAchievement = cUqSalesTask.query(\"SearchAchievement\");\r\n        this.querySearchAchievementHistory = cUqSalesTask.query(\"SearchAchievementHistory\");\r\n        this.actionComputeAchievement = cUqSalesTask.action(\"ComputeAchievement\");\r\n\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(param: any) {\r\n        await this.load();\r\n        nav.clear();\r\n        this.openVPage(VMe, param);\r\n    }\r\n\r\n    //加载邀请码\r\n    load = async () => {\r\n        this.position = await this.uqs.salesTask.SearchPosition.table({});\r\n        let code = String(this.position[0].code + 100000000);\r\n        let p1 = code.substr(1, 4);\r\n        let p2 = code.substr(5);\r\n        this.inviteCode = p1 + ' ' + p2;\r\n        var a = 1;\r\n    }\r\n\r\n    //显示我的个人信息\r\n    showMeDetail = async () => {\r\n        this.openVPage(VMeDetail)\r\n    }\r\n\r\n    //搜索我的邀请码\r\n    searchPosition = async () => {\r\n        let position = await this.uqs.salesTask.SearchPosition.table({});\r\n        return position;\r\n    }\r\n\r\n    //显示我的团队\r\n    showTeam = async () => {\r\n        let { cTeam } = this.cApp\r\n        await cTeam.start();\r\n    }\r\n\r\n    //显示业绩\r\n    showAchievement = async () => {\r\n        await this.uqs.salesTask.ComputeAchievement.submit({});\r\n        let query = { user: this.user.id };\r\n        let achievement = await this.uqs.salesTask.SearchAchievement.table(query);\r\n        this.openVPage(VAchievement, achievement);\r\n    }\r\n\r\n    //显示业绩历史记录\r\n    showAchievementDetail = async (param: any) => {\r\n        this.openVPage(VAchievementDetail, param);\r\n    }\r\n\r\n    //搜索业绩历史记录\r\n    searchAchievementDetail = async (type: number) => {\r\n        await this.onComputeAchievement();\r\n        let param = { types: type };\r\n        let list = await this.uqs.salesTask.SearchAchievementHistory.table(param);\r\n        return list;\r\n    }\r\n\r\n\r\n    //显示消息\r\n    showMessage = async () => {\r\n        await this.cApp.cMessage.start();\r\n    }\r\n\r\n    //显示消息\r\n    showSet = async () => {\r\n        this.openVPage(VSet)\r\n    }\r\n\r\n    /*\r\n    render = observer(() => {\r\n        return this.renderView(VMe);\r\n    })\r\n    */\r\n\r\n    onComputeAchievement = async () => {\r\n        await this.uqs.salesTask.ComputeAchievement.submit({});\r\n        let query = { user: this.user.id };\r\n\r\n        let result = await this.uqs.salesTask.SearchAchievement.obj(query);\r\n        if (result) {\r\n            this.salesAmont = result;\r\n        }\r\n    }\r\n\r\n    render = () => {\r\n        return this.renderView(VMe);\r\n    }\r\n\r\n    tab = () => {\r\n\r\n        return <this.render />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, Form, UiSchema, UiInputItem, Schema, Context, StringSchema } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CStart } from './CStart';\r\nimport { consts } from '../consts';\r\n\r\n\r\nconst schema: Schema = [\r\n    { name: 'invitacode', type: 'number', required: true },\r\n    { name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VStart extends VPage<CStart> {\r\n\r\n    private form: Form;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            invitacode: { widget: 'text', label: '邀请码', placeholder: '请输入邀请码' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', className: 'btn btn-primary w-8c' },\r\n        }\r\n    }\r\n\r\n    async open(position: any) {\r\n\r\n        this.openPage(this.page, position);\r\n    }\r\n\r\n    //每个视图都有一个render方法， 用于自定义页面\r\n    render(member: any): JSX.Element {\r\n        return <this.page />;\r\n    }\r\n\r\n    private onCreatePosition = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.createPosition(context.form.data);\r\n\r\n    }\r\n\r\n    private onEnter = async (name: string, context: Context): Promise<any> => {\r\n        if (name === 'invitacode') {\r\n            await this.onCreatePosition();\r\n        }\r\n    }\r\n\r\n    private page = observer((position: any) => {\r\n\r\n        //let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onCreatePosition}>保存</button>;\r\n        return <Page header='轻代理' headerClassName='bg-primary py-1 px-3' logout={true} back='none' >\r\n            <Form ref={v => this.form = v} className=\"m-3\"\r\n                schema={schema}\r\n                uiSchema={this.uiSchema}\r\n                onButtonClick={this.onFormButtonClick}\r\n                requiredFlag={false}\r\n                onEnter={this.onEnter}\r\n            />\r\n        </Page>\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { CStart } from './CStart';\r\nimport { VPage, Page, FA } from 'tonva';\r\nimport { consts } from '../consts';\r\n\r\nexport class VOK extends VPage<CStart> {\r\n    async open(position: any) {\r\n\r\n        this.openPage(this.page, position);\r\n    }\r\n\r\n    private page = (position: any) => {\r\n        return <Page header=\"注册成功\" headerClassName='bg-primary py-1 px-3'>\r\n            <div className=\"p-5 text-center\">\r\n                <p className=\"text-primary mb-5\">欢迎加入轻代理体系。 &nbsp; <FA name=\"hand-peace-o\" size=\"2x\" className=\"text-danger\" /></p>\r\n                <button className=\"btn btn-outline-primary w-6c\" onClick={this.controller.startApp}>开始体验</button>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { CStart } from './CStart';\r\nimport { VPage, Page, FA } from 'tonva';\r\nimport { consts } from '../consts';\r\n\r\nexport class VError extends VPage<CStart> {\r\n    async open(position: any) {\r\n        await this.openPage(this.page, position);\r\n    }\r\n\r\n\r\n    private page = (position: any) => {\r\n        return <Page header=\"无法通过\" back=\"none\" headerClassName={consts.headerClass}>\r\n            <div className=\"p-5 text-center\">\r\n                <p className=\"text-primary mb-5\">\r\n                    <FA name=\"minus-circle\" size=\"2x\" className=\"text-danger\" />\r\n                    <br /><br />\r\n                    无效的邀请码</p>\r\n                <button className=\"btn btn-outline-primary w-6c\" onClick={this.controller.startApp}>返回</button>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { CStart } from './CStart';\r\nimport { VPage, Page, FA, nav } from 'tonva';\r\nimport { consts } from '../consts';\r\n\r\nexport class VAgencyClauseDetil extends VPage<CStart> {\r\n\r\n    private pa: any\r\n    async open(param: any) {\r\n        this.pa = param;\r\n        await this.openPage(this.page, param);\r\n    }\r\n\r\n\r\n\r\n    private page = (param: any) => {\r\n        return <Page header=\"服务条款与隐私政策\" headerClassName={consts.headerClass}>\r\n            <div className=\"p-4 text-center\">\r\n                <p className=\"mb-5 pl-2 \">\r\n                    <p className=\"text-left\"   >\r\n                        <span className=\"text-muted small\" >VS.20190827</span><br />\r\n                    </p>\r\n                    <p className=\"text-left\"   >\r\n                        百灵威化学技术有限公司 （以下简称“本公司”）提供。用户在登录本网站后，请仔细阅读本《服务条款与隐私政策》，如您不同意有关条款或本网站对其进行的修改，请停止使用本网站提供的服务。您一旦使用本网站提供的内容，包括但不限于浏览网站信息、下载网站内容、使用网站提供的第三方网站链接等，即视为您已了解并完全同意本《服务条款与隐私政策》中的所有条款。\r\n                    <br />\r\n                        <br />\r\n                        <span className=\"text-info\" >一、网站使用</span><br />\r\n\r\n                        除非相关法律法规许可或征得本公司同意，本网站的信息及其任何组成部分不得被重新编辑、复制、仿制、抄袭，或为任何未经本公司允许的商业目的所使用。如果本公司确定客户行为违法或有损本网站和本公司的合法利益，则本公司保留包括但不限于拒绝提供服务、冻结或删除会员帐户、采取相关法律措施的权利。<br />\r\n                        <br />\r\n                        <span className=\"text-info\" >二、链接</span><br />\r\n                        （一）本网站对第三方网站的链接<br />\r\n                        必要时，本网站将提供对第三方经营的其他网站的超级链接或指引服务，或者通过帧联及其他方式在本网站上提供第三方网站的内容，此“内容”包括但不限于本网站上包含或可获得的任何材料、文件、信息、图片、图表、标识、设计以及本网站上提供的任何其他信息。<br />\r\n                        对第三方网站的链接仅为供您方便之用。本公司保留在任何时间终止对第三方网站链接的权利。所链接网站、网站上的内容及其描述或提供的产品与服务均不受本公司的控制，因此本公司不对任何该等网站及其上的内容、产品或服务（包括对第三方网站的进一步链接）负责。您一旦决定登录或使用任何所链接的网站，应当注意可能会受到适用于该网站的任何条款和条件的限制，同时自行采取预防措施以便在登录或使用该网站时避免病毒或其他破坏性因素。对于您登录或使用所链接网站所产生的任何损失，由您自行承担。<br />\r\n                        本公司对于任何所链接网站或其上所显示的内容、描述或提供的任何产品或服务不作任何保证或陈述，并且不对其作出任何认可、建议、批准或介绍。除非本公司另行明确规定或同意，本公司将不是您与任何被链接网站的提供者之间达成的任何协议的当事方。本公司不对因任何被链接网站上提供的内容、产品、服务等存在的任何中断、延迟、漏洞或疏忽所导致的任何损害或损失（无论该损害或损失是直接、间接、特别或是偶然的）负责。本网站上出现对第三方网站的链接并不表示本公司或本网站与其相关联，或已获得合法授权使用被链接网站中显示的或可通过其链接到的任何商标、商号、标识或著作权。<br />\r\n                        （二）第三方网站对本网站的链接<br />\r\n                        第三方网站对本网站的链接，并不必然表示本公司对第三方作出了某种认可、授权、赞助，或表明其属于本公司的关联企业、合资企业、合作企业或业务伙伴。在多数情况下，本公司并未意识到第三方已提供对本网站的链接。<br />\r\n                        <span className=\"text-info\" >三、知识产权保护</span><br />\r\n                        本网站所载述的域名、商标、商号、信息、文字、图形、图像、声音、链接、软件及所有其它内容均由本公司、其内容提供商及第三方许可人提供。上述内容的知识产权依具体情况分别为本公司、其内容提供商及第三方许可人所拥有。\r\n                        除法律另有规定或双方另有约定外，未经本公司和/或其他权利人事先许可，任何人不得以任何形式通过任何方式（包括但不限于电子、机械复印或录制等方式）复制、展示、修改、转让、分发、重新发布、下载、张贴或传输本网站的内容。\r\n                        未经本公司或商标权人事先许可，任何单位及个人不得以任何方式或理由对本网站的商标、商号或标识的任何部分进行使用、复制、修改、传播或与其它产品捆绑使用。\r\n                    <br />\r\n                        <span className=\"text-info\" >四、免责声明</span><br />\r\n                        本网站所提供的信息，具备一定的准确性、有效性和完整性，但因数据庞大，且受数据来源的不确定性影响，不能保证绝对的准确性、有效性和完整性。本公司及其员工一概毋须以任何方式就任何信息传递或传送的失误、不准确或错误对用户或任何其他人士负任何直接或间接的责任。在法律允许的范围内，本公司不承担用户或任何人士就使用或未能使用本网站所提供的信息或任何链接或项目所引致的任何直接、间接、附带、从属、特殊、惩罚性的损害赔偿（包括但不限于收益、预期利润的损失或失去的业务、未实现预期的节减）。本公司保留自行决定更正本网站中任何部分的任何错误或遗漏的权利。本公司可以在任何时间对本网站、本网站上描述的内容和产品、项目、服务或价格作出任何其他修改而无需通知。\r\n                        本网站、本网站上的信息和内容以及在本网站上可获得的软件和材料均“依原样”提供而不包含明示或暗示的任何性质的陈述或保证。在法律许可的最大限度内，本公司声明不作出任何明示或暗示的陈述和保证，包括但不限于有关安全性、准确性、完整性、适销性、无侵权、适合任何特别目的或没有计算机病毒的保证。您应为使用本网站承担全部责任和风险。\r\n                    如发生以下情况，本网站不对用户的直接或间接损失承担法律责任：<br />\r\n                        1. 营业中断。<br />\r\n                        2. 无法登录本网站，或登录本网站延迟或中断。<br />\r\n                        3. 数据无法传送、错误传送、毁损、灭失或其他修改。<br />\r\n                        4. 因处理本网站上对其它网站的链接或本网站上存在对其它网站的链接所遭受的任何种类的损失或损害。<br />\r\n                        5. 就客户使用本网站（包括链接到第三方网站或自第三方网站链接）而可能产生的计算机病毒、系统失灵或功能紊乱。<br />\r\n                        6. 本《服务条款与隐私政策》第四条中规定的六种情形所引起的用户个人资料的披露或泄露。<br />\r\n                        7. 因不可抗力或本公司无法合理控制的其他原因所导致的用户损失。<br />\r\n                        <br />\r\n                        <span className=\"text-info\" >五、服务变更、中断或终止</span><br />\r\n                        1. 如因系统维护或升级的需要而需暂停网络服务，百灵威将尽可能事先进行通告。<br />\r\n                        2. 如发生下列任何一种情形，百灵威有权随时中断或终止向用户提供本协议项下的网络服务而无需通知用户：<br />\r\n                        (a) 用户提供的资料不真实；<br />\r\n                        (b) 用户违反本协议中规定的使用规则。<br />\r\n                        3. 除前款所述情形外，百灵威同时保留在不事先通知用户的情况下随时中断或终止部分或全部网络服务的权利，对于所有服务的中断或终止而造成的任何损失，百灵威无需对用户或任何第三方承担任何责任。<br />\r\n                        4. 用户若反对任何服务条款的建议或对后来的条款修改有异议，或对网络服务不满，用户只有以下追索权：<br />\r\n                        (a) 不再使用百灵威提供的网络服务。<br />\r\n                        (b) 通告百灵威停止使用百灵威的网络服务，得到百灵威确认后，用户使用网络服务的权利马上中止。从即时起，百灵威不再对用户承担任何义务。<br />\r\n                        <br />\r\n                        <span className=\"text-info\" >六、关于Cookies</span><br />\r\n                        百灵威在您的设备上放置小数据文件（“cookies”）以增强网站的功能。 这是大多数商业网站的常见做法。 这些文本文件允许网站存储您的操作和偏好（例如地理区域），以便您以后的访问更加个性化和简化。 Cookie旨在增强您的用户体验。 例如，他们会将商品存储在购物车中，直到您下次访问为止。<br />\r\n                        Cookie取决于浏览器，您可以通过浏览器阻止Cookie被放置在您的设备上和/或您可以在访问网站后删除Cookie。 这些操作中的任何一种都会限制您的用户体验并导致J＆K网站无法按预期运行。<br />\r\n                        <br />\r\n                        <span className=\"text-info\" >七、个人信息和隐私政策</span><br />\r\n                        1)\t百灵威收集的信息<br />\r\n                        本公司将收集您用户资料中的某些信息，以满足法律和业务要求。此信息包括但不限于您的姓名和联系信息。当然，您只会向百灵威提供准确的信息，并且您对与您的用户个人资料帐户相关的所有活动负全部责任。您同意在信息发生任何变化时更新您的个人资料信息。您有责任保密您的用户名和密码，并立即通知我们有任何违反此保密规定的行为。<br />\r\n                        百灵威可能会收集有关其客户和网站用户的汇总统计数据，供其内部使用；可能会使用网站用户和/或客户信息来提供相关信息、促销和奖励。<br />\r\n                        通过cookie可能会收集另外一些信息（参见上文第六节）。<br />\r\n                        <br />\r\n                        2)\t信息安全<br />\r\n                        本公司不会出售您的信息，也不会与任何其他个人或企业共享或披露您的信息，除非为您提供您所要求的产品和服务。 这种信息共享可能涉及，但不限于，您从百灵威订购产品的分发、交付、合作伙伴的沟通。 未经相关个人许可，本公司不会向任何第三方分享、出售或分发与其客户、消费者或网站用户有关的任何个人信息。<br />\r\n                        百灵威使用安全套接字层（SSL）软件协议在传输数据时加密您的信息。<br />\r\n                        百灵威遵守所有关于其开展业务的司法管辖区内的数据传输的国家和国际协议。<br />\r\n                        <br />\r\n                        3)\t许可<br />\r\n                        您可以选择退出百灵威的某些通信（例如，通过电子邮件发送促销优惠），方法是通过您在用户档案中做出的选择。<br />\r\n                        您可以选择不与百灵威共享您的个人信息，但在这种情况下，您将无法建立用户帐户。 如果没有用户帐户，您仍然可以浏览网站的大部分内容，但无法在线订购或查看某些页面。<br />\r\n                        您可以选择在计算机上禁用cookie，但cookie是网站许多方面功能的组成部分。 如果您不允许使用Cookie，则无法将商品添加到购物车或执行任何要求您登录用户帐户的功能。 此外，如果没有Cookie，百灵威网站将无法定制您的用户体验，以反映您所在地区的产品和服务。<br />\r\n                        <br />\r\n                        4)\t用户限制<br />\r\n                        百灵威不向18岁以下的客户销售产品或服务。 本公司不会故意收集、使用或透露18岁以下人士的个人数据。<br />\r\n                        <br />\r\n                        5)\t联系信息<br />\r\n                        百灵威致力于向客户保证有权访问他们的信息并更正他们认为不准确的任何信息。 如果您对收集和使用您的个人信息有任何疑问或异议，请通过privacy@jk-sci.com与我们联系。<br />\r\n                        <br />\r\n                        <span className=\"text-info\" >八、条款修改</span><br />\r\n                        本公司保留在任何时间自行修改、增删本《服务条款与隐私政策》中任何内容的权利。您每次登录或使用本网站时均视为同意受当时有效的条款的制约。因此，您每次登录或使用本网站时应查看本《服务条款与隐私政策》的日期，并检查与上一版本的修改之处。<br />\r\n                        <br />\r\n                        <span className=\"text-info\" >九、法律适用与司法管辖</span><br />\r\n                        本《服务条款与隐私政策》的制定、执行和解释及争议的解决均应适用中华人民共和国法律。双方因使用本网站所产生的争议，协商不成的，任何一方可以向本公司所在地人民法院提起诉讼。<br />\r\n                    </p>\r\n                </p>\r\n            </div>\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport * as _ from 'lodash';\r\nimport { Query, Controller, Map, Tuid, Action, nav } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VStart } from './VStart';\r\nimport { VOK } from './VOK';\r\nimport { VError } from './VError';\r\nimport { VAgencyClauseDetil } from './VAgencyClauseDetil';\r\n\r\n\r\n/**\r\n *\r\n */\r\nexport class CStart extends CUqBase {\r\n    /*\r\n    private tuidUser: Tuid;\r\n    private querySearchPosition: Query;\r\n    private actionPosition: Action;\r\n\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqSalesTask, } = this.cApp;\r\n        this.tuidUser = cUqSalesTask.tuid(\"$user\")\r\n        this.querySearchPosition = cUqSalesTask.query(\"searchposition\");\r\n        this.actionPosition = cUqSalesTask.action(\"CreatePosition\");\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(param: any) {\r\n        this.user;\r\n        var isPosition: Boolean;\r\n        isPosition = await this.isPosition();\r\n        if (!isPosition) {\r\n            nav.clear();\r\n            //await this.openVPage(AgencyClause, param);\r\n            await this.openVPage(VStart, param);\r\n        }\r\n        else {\r\n            //await this.openVPage(AgencyClause, param);\r\n            await this.cApp.cSalesTask.start();\r\n            //await this.openVPage(VStart, param);\r\n        }\r\n    }\r\n\r\n    //同意条款\r\n    onAgreeAgencyClause = async (param: any) => {\r\n        //await this.cApp.cSalesTask.start();\r\n        await this.openVPage(VStart, param);\r\n    }\r\n\r\n    showAgencyClauseDetil = () => {\r\n        this.openVPage(VAgencyClauseDetil);\r\n    }\r\n\r\n    //判断是否有邀请码\r\n    isPosition = async () => {\r\n        let position = await this.searchPosition();\r\n        if (position && position.length > 0) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    //搜索识别码\r\n    searchPosition = async () => {\r\n        let position = await this.uqs.salesTask.SearchPosition.table({});\r\n        return position;\r\n    }\r\n\r\n    startApp = async () => {\r\n        await this.cApp.start();\r\n    }\r\n\r\n    //新建识别码\r\n    createPosition = async (param: any) => {\r\n        let { invitacode } = param;\r\n        invitacode = invitacode.replace(/\\s/g, \"\");;\r\n        if (isNaN(invitacode) === true) {\r\n            await this.openVPage(VError);\r\n            return;\r\n        }\r\n\r\n        let position = await this.uqs.salesTask.CreatePosition.submit({ invitacode: invitacode });\r\n        let { succeed } = position;\r\n        this.ceasePage();\r\n        if (succeed === 1) {\r\n            await this.uqs.salesTask.$user.save(this.user.id, this.user);\r\n            await this.openVPage(VOK, position);\r\n        } else if (succeed === -1) {\r\n            await this.openVPage(VError, position);\r\n        }\r\n        return position;\r\n    }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, List, LMR, tv, FA } from 'tonva';\r\nimport { CMe } from '../me/CMe';\r\nimport { CTeam } from './CTeam';\r\n\r\nexport class VTeam extends VPage<CTeam> {\r\n\r\n    private team: any;\r\n    async open(team: any) {\r\n        this.team = team;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private userSpan(name: any, nick: string): JSX.Element {\r\n        return nick ?\r\n            <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n            : <b>{name}</b>\r\n    }\r\n\r\n\r\n    private renderItem = (team: any, index: number) => {\r\n\r\n        let { showPeerDetail } = this.controller;\r\n        let onshowPeerDetail = async () => await showPeerDetail(team);\r\n\r\n        let { children } = team;\r\n        let codes = tv(children, v => v.name);\r\n        return <LMR className=\"px-3 py-2 \" onClick={onshowPeerDetail}\r\n            left={<FA name='user' className=' my-2 mr-3 text-info' />}\r\n            right={<div className=\"w-2c text-right\" > <i className=\"fa fa-chevron-right\" /></div>}>\r\n            <div className=\"font-weight-bold \">{this.userSpan(codes, team.assigned)}</div>\r\n        </LMR>\r\n    }\r\n\r\n    private page = () => {\r\n        let none = <div className=\"my-3 mx-2 text-muted\">还没有团队哦！马上发展团队吧！！</div>;\r\n        return <Page header='我的团队' headerClassName='bg-primary py-1' >\r\n            <List before={''} none={none} items={this.team} item={{ render: this.renderItem }} />\r\n        </Page>\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, ItemSchema, StringSchema, UiSchema, UiTextItem, Edit, LMR, FA } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from '../consts';\r\nimport { CTeam } from './CTeam';\r\n\r\nexport class VTeamDetail extends VPage<CTeam> {\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'assigend', type: 'string' } as StringSchema,\r\n    ];\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            assigend: { widget: 'text', label: '备注名', placeholder: '' } as UiTextItem,\r\n        }\r\n    }\r\n\r\n    @observable private data: any;\r\n    private peer: any;\r\n    async open(param: any) {\r\n        let { assigned, children } = param;\r\n        this.peer = children;\r\n        this.data = {\r\n            assigend: assigned,\r\n        };\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await this.controller.savePeerAssigned(this.peer, newValue);\r\n        this.data[name] = newValue;\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { achievement } = this.controller;\r\n        let { oneSaleVolume, twoSaleVolume, threeSaleVolume } = achievement;\r\n        let right = <div className=\" h5 px-3\"> {oneSaleVolume} <FA name=\"cny\" className=\"text-warning small\" /></div>;\r\n        return <Page header=\"粉丝信息\" headerClassName={consts.headerClass}>\r\n            <Edit\r\n                schema={this.schema}\r\n                uiSchema={this.uiSchema}\r\n                data={this.data}\r\n                onItemChanged={this.onItemChanged} />\r\n            <LMR className=\" bg-white pl-3 py-2\"\r\n                left={<div><span>销量</span></div>}\r\n                right={right}>\r\n            </LMR>\r\n        </Page>\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport * as _ from 'lodash';\r\nimport { Query, Controller, Map, Tuid, Action, nav, loadAppUqs } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { VMe } from '../me/VMe';\r\nimport { VTeam } from './VTeam';\r\nimport { VMeDetail } from '../me/VMeDetail';\r\nimport { VTeamDetail } from './VTeamDetail';\r\nimport { CUqBase } from '../CBase';\r\nimport { observable } from 'mobx';\r\n\r\n/**\r\n *\r\n */\r\nexport class CTeam extends CUqBase {\r\n    @observable achievement: any;\r\n    /*\r\n    private qeurySearchTeam: Query;\r\n    private actionSavePeerAssigned: Action;\r\n\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqSalesTask } = this.cApp;\r\n        this.qeurySearchTeam = cUqSalesTask.query(\"searchteam\");\r\n        this.actionSavePeerAssigned = cUqSalesTask.action(\"savePeerassigned\");\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart() {\r\n        let team = await this.searchTeam();\r\n        this.openVPage(VTeam, team);\r\n    }\r\n\r\n    //搜索我的团队\r\n    searchTeam = async () => {\r\n        let team = await this.uqs.salesTask.SearchTeam.table({});\r\n        return team;\r\n    }\r\n\r\n    //显示粉丝信息\r\n    showPeerDetail = async (team: any) => {\r\n\r\n        let query = { user: 47 };\r\n        let achievement = await this.uqs.salesTask.SearchAchievement.table(query);\r\n        if (achievement.length > 0) {\r\n            this.achievement = achievement[0];\r\n        }\r\n        this.openVPage(VTeamDetail, team);\r\n    }\r\n\r\n    //保存粉丝自定义信息\r\n    savePeerAssigned = async (peer: any, newValue: any) => {\r\n        let param = { peer: peer.id, Assigned: newValue };\r\n        this.uqs.salesTask.SavePeerAssigned.submit(param);\r\n    }\r\n\r\n    render = observer(() => {\r\n        return this.renderView(VMe);\r\n    })\r\n\r\n    tab = () => {\r\n        return <this.render />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, List, LMR, tv, FA, EasyDate } from 'tonva';\r\nimport { CMessage } from './CMessage';\r\n\r\nexport class VMessage extends VPage<CMessage> {\r\n\r\n    private message: any;\r\n    async open(message: any) {\r\n        this.message = message;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderItem = (model: any, index: number) => {\r\n        let { date, note, peer } = model;\r\n        let left = <small className=\"text-muted\"><EasyDate date={date} /></small>;\r\n        let rigth = <small className=\"text-muted\">{tv(peer, v => v.name)}</small>;\r\n        return <div className=\"d-block p-3\">\r\n            <LMR left={left} right={rigth}></LMR>\r\n            <LMR > {note}</LMR>\r\n        </div>\r\n    }\r\n\r\n    private page = () => {\r\n        let none = <div className=\"my-3 mx-2 text-muted\"></div>;\r\n        return <Page header='消息' headerClassName='bg-primary py-1' >\r\n            <List before={''} none={none} items={this.message} item={{ render: this.renderItem }} />\r\n        </Page>\r\n    }\r\n}\r\n","import _ from 'lodash';\r\nimport { Query, Controller, Action, PageItems } from 'tonva';\r\nimport { CUqBase } from '../CBase';\r\nimport { VMessage } from './VMessage';\r\nimport { observable } from 'mobx';\r\n\r\n/**\r\n *\r\n */\r\nclass PageMessage extends PageItems<any> {\r\n\r\n    private searchQuery: Query;\r\n\r\n    constructor(searchQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchQuery = searchQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\nexport class CMessage extends CUqBase {\r\n    @observable pageMessage: PageMessage;\r\n    count = observable.box<number>(0);\r\n\r\n    /*\r\n    private querySearchMessage: Query;\r\n    private querySearchNowMessage: Query;\r\n    private actionUpdateNowMessage: Action;\r\n\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqSalesTask } = this.cApp;\r\n        this.querySearchMessage = cUqSalesTask.query(\"SearchMessage\");\r\n        this.querySearchNowMessage = cUqSalesTask.query(\"SearchNowMessage\");\r\n        this.actionUpdateNowMessage = cUqSalesTask.action(\"UpdateNowMessage\");\r\n        this.searchNowMessage(); // 移动到internalStart去了\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(param: any) {\r\n        //this.pageMessage = null;\r\n        this.searchNowMessage(); // 从constructor移过来的\r\n        await this.showMessage();\r\n    }\r\n\r\n    //搜索未读信息\r\n    searchNowMessage = async () => {\r\n        let messages = await this.uqs.salesTask.searchNowMessage.table({});\r\n        if (messages && messages.length > 0) {\r\n            this.count.set(messages[0].count);\r\n        } else {\r\n            this.count.set(0);\r\n        }\r\n    }\r\n\r\n    //更新消息\r\n    updateNowMessage = async () => {\r\n        await this.uqs.salesTask.UpdateNowMessage.submit({});\r\n        await this.searchNowMessage();\r\n        let a = 0;\r\n    }\r\n\r\n    //显示消息\r\n    showMessage = async () => {\r\n        await this.searchMessage();\r\n        this.openVPage(VMessage, this.pageMessage);\r\n        await this.updateNowMessage();\r\n    }\r\n\r\n    //搜索消息\r\n    searchMessage = async () => {\r\n        this.pageMessage = new PageMessage(this.uqs.salesTask.searchMessage);\r\n        await this.pageMessage.first({});\r\n    }\r\n\r\n\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, PageItems } from 'tonva';\r\nimport { LMR, List, EasyDate, SearchBox, FA } from 'tonva';\r\nimport { CCustomerUnit } from './CCustomerUnit';\r\n\r\nexport class VCustomerUnitSelect extends VPage<CCustomerUnit> {\r\n\r\n    private title: any;\r\n    private type: any; //显示类型\r\n\r\n    async open(param: any) {\r\n        this.type = param;\r\n        if (this.type == \"1\") {\r\n            this.title = \"新建客户\";\r\n        } else if (this.type == \"2\") {\r\n            this.title = \"搜索客户\";\r\n        }\r\n\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderItem(salesTask: any, index: number) {\r\n        let { name } = salesTask;\r\n        return <LMR className=\"px-3 py-1 \" left={<FA name='university' className=' my-2 mr-3 text-info' />}>\r\n            <div className=\"font-weight-bold\"></div>\r\n            <div>{name}</div>\r\n        </LMR >\r\n    }\r\n\r\n    private onClickRow = async (model: any) => {\r\n        if (this.type == 1) {\r\n            await this.controller.showCreateCustomer(model);\r\n        } else {\r\n            await this.controller.cApp.cCustomer.showCustomerSearch(model.name);\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { pageUnit, showCreateUnit } = this.controller;\r\n        let onshowCreateUnit = async () => await showCreateUnit();\r\n\r\n        let none = <div className=\"my-3 mx-2 text-warning\">没有搜索到单位！</div>;\r\n        let text: any;\r\n        if (this.type == 1) {\r\n            text = <div className=\"my-3 mx-2 text-warning\">新建客户前先选择单位，或点击右上角加号新建单位！</div>;\r\n        } else {\r\n            text = \"\";\r\n        }\r\n        let right = <div onClick={onshowCreateUnit} className=\"cursor-pointer px-3 py-2\"><FA name=\"plus\" /></div>;\r\n        return <Page header={this.title} onScrollBottom={this.onScrollBottom} headerClassName='bg-primary' right={right}>\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2\"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchByKey(key)}\r\n                placeholder=\"搜索单位\" />\r\n            <List before={''} none={none} items={pageUnit} item={{ render: this.renderItem, onClick: this.onClickRow }} />\r\n            {(!pageUnit) && text}\r\n        </Page>\r\n    })\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageUnit.more();\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, Schema, Form, UiSchema, UiInputItem, Context } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from '../consts';\r\nimport { CCustomerUnit } from './CCustomerUnit';\r\n\r\nconst schema: Schema = [\r\n    { name: 'Name', type: 'string', required: true },\r\n    { name: 'submit', type: 'submit' },\r\n];\r\n\r\nexport class VCreateCustomerUnit extends VPage<CCustomerUnit> {\r\n    private form: Form;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            Name: { widget: 'text', label: '名称', placeholder: '请输入单位名称' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交', className: 'btn btn-primary w-8c' },\r\n        }\r\n    }\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.createMyCustomerUnit(context.data);\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        return <Page header=\"新建单位\" headerClassName={consts.headerClass} >\r\n            <Form ref={v => this.form = v} className=\"my-3 mx-3\"\r\n                schema={schema}\r\n                uiSchema={this.uiSchema}\r\n                onButtonClick={this.onFormButtonClick}\r\n                requiredFlag={false}\r\n            />\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, StringProp, Prop, PropGrid, FA, Edit, Schema, UiSchema, UiInputItem, ItemSchema, nav } from 'tonva';\r\nimport { consts } from '../consts';\r\nimport { CCustomerUnit } from './CCustomerUnit';\r\n\r\nconst schema: Schema = [\r\n    { name: 'name', type: 'string' },\r\n];\r\n\r\nexport class VCustomerUnitDetail extends VPage<CCustomerUnit> {\r\n\r\n    @observable private unit: any;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            name: { widget: 'text', label: '单位名称', placeholder: '请输入单位名称' } as UiInputItem,\r\n        }\r\n    }\r\n\r\n    async open(unit: any) {\r\n        this.unit = unit;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.unit[name] = newValue;\r\n        await this.controller.updateMyCustomerUnit(this.unit);\r\n\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let right = <div className=\"cursor-pointer py-2 px-3 \"><FA name=\"pencil\" /></div>;\r\n        return <Page header=\"客户单位详情\" headerClassName={consts.headerClass}  >\r\n            <Edit\r\n                schema={schema}\r\n                uiSchema={this.uiSchema}\r\n                data={this.unit}\r\n                onItemChanged={this.onItemChanged} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { CCustomerUnit } from './CCustomerUnit';\r\n\r\nexport class VCreateCustomerUnitFinish extends VPage<CCustomerUnit> {\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page, param);\r\n    }\r\n\r\n    comeBack = () => {\r\n        this.closePage(2);\r\n    }\r\n\r\n\r\n    private showresult = (param: any) => {\r\n        if (param.code === 0) {\r\n            return <>\r\n                单位已存在，创建失败！\r\n            </>;\r\n        } else {\r\n            return <>\r\n                单位添加成功，请在单位搜索页面查看详情！\r\n            </>;\r\n        }\r\n\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        return <Page header='新建单位' headerClassName='bg-primary py-1 px-3'>\r\n            <div className=\"w-100 text-center m-3 text-muted\">\r\n                {this.showresult(param)}\r\n            </div>\r\n            <div className=\"w-100 text-center\">\r\n                <label className=\"text-success\" onClick={this.comeBack}> 返回</label>\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import _ from 'lodash';\r\nimport { Query, PageItems, Controller, Tuid, Action } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { Task } from '../salestask/model';\r\nimport { VCustomerUnitSelect } from './VCustomerUnitSelect';\r\nimport { VCreateCustomerUnit } from './VCreateCustomerUnit';\r\nimport { VCustomerUnitDetail } from './VCustomerUnitDetail';\r\nimport { VCreateCustomerUnitFinish } from './VCreateCustomerUnitFinish';\r\n\r\n//页面类\r\nclass PageUnit extends PageItems<any> {\r\n\r\n    private searchQuery: Query;\r\n\r\n    constructor(searchQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchQuery = searchQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class CCustomerUnit extends CUqBase {\r\n    cApp: CApp;\r\n    @observable pageUnit: PageUnit;\r\n\r\n    /*\r\n    private tuidMyCustomerUnit: Tuid;\r\n    private querySearchMyCustomerunit: Query;\r\n    private actionCreateMyCustomerunit: Action;\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCustomer, cUqSalesTask } = this.cApp;\r\n\r\n        this.tuidMyCustomerUnit = cUqSalesTask.tuid(\"mycustomerunit\");\r\n        this.querySearchMyCustomerunit = cUqSalesTask.query(\"searchmycustomerunit\");\r\n        this.actionCreateMyCustomerunit = cUqSalesTask.action(\"CreateMyCustomerunit\");\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(task: Task) {\r\n        this.pageUnit = null;\r\n        this.searchByKey('');\r\n        this.openVPage(VCustomerUnitSelect, 1);\r\n    }\r\n\r\n\r\n    showCustomerSearchByUnit = async (): Promise<any> => {\r\n        this.pageUnit = null;\r\n        this.searchByKey('');\r\n        this.openVPage(VCustomerUnitSelect, 2);\r\n    }\r\n\r\n    //查询客户--通过名称\r\n    searchByKey = async (key: string) => {\r\n\r\n        this.pageUnit = new PageUnit(this.uqs.salesTask.searchMyCustomerUnit);\r\n        this.pageUnit.first({ key: key });\r\n    }\r\n\r\n    //显示新建单位\r\n    showCreateUnit = () => {\r\n        //this.openVPage(VCreateCustomerFinish);\r\n        this.openVPage(VCreateCustomerUnit);\r\n    }\r\n\r\n    //新建客户单位\r\n    createMyCustomerUnit = async (param: any) => {\r\n        let par = {\r\n            no: undefined,\r\n            name: param.Name,\r\n        }\r\n        let ref = await this.uqs.salesTask.CreateMyCustomerUnit.submit(par);\r\n        this.openVPage(VCreateCustomerUnitFinish, ref);\r\n    }\r\n\r\n    //显示单位明细\r\n    showCustomerUnitDetail = async (param: any) => {\r\n        let unit = await this.uqs.salesTask.MyCustomerUnit.load(param);\r\n        this.openVPage(VCustomerUnitDetail, unit);\r\n    }\r\n\r\n    //显示新建客户页面\r\n    showCreateCustomer = async (param: any) => {\r\n        this.cApp.cCustomer.showCreateCustomer(param);\r\n    }\r\n\r\n    //显示单位明细\r\n    showCustomerUnitEdit = async (param: any) => {\r\n        let unit = await this.uqs.salesTask.MyCustomerUnit.load(param);\r\n        this.openVPage(VCustomerUnitDetail, unit);\r\n    }\r\n\r\n    //修改单位信息\r\n    updateMyCustomerUnit = async (param: any) => {\r\n        await this.uqs.salesTask.MyCustomerUnit.save(param.id, param);\r\n        this.closePage();\r\n    }\r\n\r\n\r\n}","import * as React from 'react';\r\nimport * as _ from 'lodash';\r\nimport { VPage, Page, LMR, SearchBox, FA, List, EasyDate, tv } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from '../consts';\r\nimport { CCoupon } from './CCoupon';\r\n\r\nexport class VCouponList extends VPage<CCoupon> {\r\n\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderItem = (coupon: any, index: number) => {\r\n        let { showCouponDetail } = this.controller;\r\n        let onshowCouponDetail = async () => await showCouponDetail(coupon.id);\r\n        var inviteCode = \"\";\r\n        let { code, validitydate, discount, preferential } = coupon;\r\n        if (code) {\r\n            code = String(code + 100000000);\r\n            let p1 = code.substr(1, 4);\r\n            let p2 = code.substr(5);\r\n            inviteCode = p1 + ' ' + p2;\r\n        }\r\n\r\n        let aleft = <div><FA name='th-large' className=' my-2 mr-3 text-warning' />{inviteCode}</div>;\r\n        let aright = <div className=\"text-muted\"><small>有效期：<EasyDate date={validitydate} /></small></div>;\r\n        var bcenter: any;\r\n        var bleft: any;\r\n        if (discount) {\r\n            var discountShow: any;\r\n            discountShow = (1 - discount) * 10;\r\n\r\n            bleft = <div><small><span className=\" mx-3 \">{discountShow.toFixed(1)} 折</span></small></div>;\r\n        }\r\n        if (preferential) {\r\n            bcenter = <div className=\"text-muted\"><small>优惠：<span className=\"mx-3\">￥{preferential}</span></small></div>;\r\n        }\r\n\r\n        return <LMR className=\"px-3 py-2\" onClick={onshowCouponDetail}>\r\n            <LMR left={aleft} right={aright}></LMR>\r\n            <LMR left={bleft}>\r\n                {bcenter}\r\n            </LMR>\r\n        </LMR >\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { pageCoupon, showCreateCoupon } = this.controller;\r\n        let onshowCreateCoupon = async () => await showCreateCoupon();\r\n\r\n        let right = <div onClick={onshowCreateCoupon} className=\"cursor-pointer py-2\"><FA name=\"plus\" /></div>;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">还没有优惠码哦！马上添加招揽客户吧！</div>;\r\n        return <Page header='优惠码' headerClassName={consts.headerClass} >\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2  \"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchByKey(key)}\r\n                placeholder=\"搜索优惠编码\"\r\n            />\r\n            <List before={''} none={none} items={pageCoupon} item={{ render: this.renderItem, onClick: null }} />\r\n        </Page>\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, Schema, Form, UiSchema, UiInputItem, Context, UiRadio, toUiSelectItems, Widget, UiCustom, FA, LMR, UiIdItem, tv } from 'tonva';\r\nimport { consts } from '../consts';\r\nimport { CCoupon } from './CCoupon';\r\n\r\nconst schema: Schema = [\r\n    { name: 'validitydate', type: 'date', required: false },\r\n    { name: 'discount', type: 'string', required: false },\r\n    //{ name: 'preferential', type: 'string', required: false },\r\n    { name: 'customer', type: 'id', required: false },\r\n    { name: 'submit', type: 'submit' },\r\n];\r\n\r\n\r\nclass ValidityDate extends Widget {\r\n    //protected inputs: {[index:number]: HTMLInputElement} = {};\r\n    @observable dateVisible = false;\r\n    //value = 1;\r\n    private list = [\r\n        { value: 1, title: '    一周', name: 'b', checked: undefined },\r\n        { value: 2, title: '两周', name: 'b', checked: undefined }\r\n    ];\r\n\r\n    private onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        let val = evt.currentTarget.value;\r\n        this.dateVisible = val === '0';\r\n        var day2 = new Date();\r\n        if (val === '1') {\r\n            day2.setDate(day2.getDate() + 7);\r\n        } else if (val === '2') {\r\n            day2.setDate(day2.getDate() + 14);\r\n        }\r\n        let ss = day2.getFullYear() + \"-\" + (day2.getMonth() + 1) + \"-\" + day2.getDate();\r\n        this.setValue(ss);\r\n    }\r\n\r\n    render = () => {\r\n        return <div className=\"form-control\" style={{ height: 'auto' }}>\r\n            {this.list.map((v, index) => {\r\n                let { value, title } = v;\r\n                return <label className=\"my-1 mx-3\" key={index}>\r\n                    <input type=\"radio\" value={value} name={this.name} defaultChecked={value === this.value}\r\n                        onChange={this.onChange} /> {title} &nbsp;\r\n                </label>\r\n            })}\r\n        </div>\r\n    };\r\n}\r\n\r\nclass Discount extends Widget {\r\n    @observable dateVisible = false;\r\n    //value = 0.05;\r\n    private list = [\r\n        { value: 0.05, title: '9.5折', name: 'a', checked: undefined },\r\n        { value: 0.1, title: '9.0折', name: 'a', checked: undefined },\r\n        { value: 0.15, title: '8.5折', name: 'a', checked: undefined },\r\n        { value: 0.2, title: '8.0折', name: 'a', checked: undefined },\r\n        { value: 0.3, title: '7.0折', name: 'a', checked: undefined },\r\n        { value: 0.4, title: '6.0折', name: 'a', checked: undefined }\r\n    ];\r\n\r\n    private onChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        let val = evt.currentTarget.value;\r\n        this.dateVisible = val === '0';\r\n        this.setValue(val);\r\n    }\r\n\r\n    private onDateChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        let value = parseInt(evt.currentTarget.value);\r\n        if (value < 10) {\r\n            let as = evt.target.value;\r\n            this.setValue(evt.currentTarget.value);\r\n        } else {\r\n            this.setValue(0);\r\n        }\r\n    }\r\n\r\n    render = () => {\r\n        return <div className=\"form-control\" style={{ height: 'auto' }}>\r\n            {this.list.map((v, index) => {\r\n                let { value, name, title } = v;\r\n                return <label key={index} className=\"my-1 mx-3\">\r\n                    <input type=\"radio\" value={value}\r\n                        name={this.name} defaultChecked={value === this.value}\r\n                        onChange={this.onChange} /> {title} &nbsp; </label>\r\n            })}\r\n            <div>\r\n                <table>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td><label className=\"my-1 mx-3\"><input type=\"radio\" value={-1} name=\"a\" onChange={this.onChange} /> 无&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label></td>\r\n                            <td><label className=\"my-1 mx-3\"><input type=\"radio\" value={0} name=\"a\" onChange={this.onChange} /> 其他</label></td>\r\n                            <td>{this.dateVisible && <input type=\"text\" className=\"col-xs-4 col-sm-4\" onChange={this.onDateChange} />}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"small text-muted px-3 py-2\">说明：折扣表示最大折扣，具体折扣以下单时时为准</div>\r\n        </div>\r\n    };\r\n}\r\n\r\nexport class VCreateCoupon extends VPage<CCoupon> {\r\n    @observable showTip: boolean = false;\r\n    private form: Form;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            validitydate: {\r\n                widget: 'custom',\r\n                label: '有效期',\r\n                WidgetClass: ValidityDate,\r\n            } as UiCustom,\r\n            discount: {\r\n                widget: 'custom',\r\n                label: '折扣',\r\n                WidgetClass: Discount,\r\n                //discription: '最小折扣',\r\n            } as UiCustom,\r\n            //preferential: { widget: 'text', label: '优惠金额', placeholder: '请输入优惠金额', rules: numberValidation } as UiInputItem,\r\n            customer: {\r\n                widget: 'id', label: '客户', placeholder: '请选择客户',\r\n                pickId: async (context: Context, name: string, value: number) => await this.controller.showAddCouponCustomer(context, name, value),\r\n                Templet: (item: any) => {\r\n                    let { name, unit } = item;\r\n                    if (!item) return <small className=\"text-muted\">请选择客户</small>;\r\n                    return <div>\r\n                        {name}\r\n                        <small className=\" mx-3\" >{tv(unit, (v) => <>{v.name}</>)}</small>\r\n                    </div>;\r\n                }\r\n            } as UiIdItem,\r\n            submit: { widget: 'button', label: '提交', className: 'btn btn-primary w-8c' },\r\n        }\r\n    }\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n\r\n        let { validitydate, discount } = context.data;\r\n        if (validitydate == undefined || discount == undefined) {\r\n            this.showTip = true;\r\n        } else {\r\n            await this.controller.createCoupon(context.data);\r\n            this.showTip = false;\r\n        }\r\n    }\r\n\r\n    private page = observer((param: any) => {\r\n        let { cCoupon } = this.controller.cApp\r\n        let onshowCreateCoupon = async () => await cCoupon.start();\r\n\r\n        let right = <div onClick={onshowCreateCoupon} className=\"cursor-pointer py-2 mx-3\"><FA name=\"ellipsis-h\" /></div>;\r\n\r\n        return <Page header=\"产生优惠码\" headerClassName={consts.headerClass} right={right} >\r\n            <Form ref={v => this.form = v} className=\"my-3 mx-3\"\r\n                schema={schema}\r\n                uiSchema={this.uiSchema}\r\n                onButtonClick={this.onFormButtonClick}\r\n                requiredFlag={false} />\r\n            {this.showTip && < div className=\"small text-danger mx-4\"  >提示：请选择有效期和折扣！</div>}\r\n        </Page >\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, StringProp, Prop, PropGrid, ComponentProp, tv, LMR, EasyDate, FA } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from '../consts';\r\nimport { CCoupon } from './CCoupon';\r\n\r\nexport class VCouponDetail extends VPage<CCoupon> {\r\n\r\n    private coupon: any;\r\n    async open(coupon: any) {\r\n\r\n        this.coupon = coupon;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderisValid(param: any) {\r\n        if (param == 1) {\r\n            return \"有效\";\r\n        } else {\r\n            return \"无效\";\r\n        }\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { code, validitydate, discount, preferential, isValid, customer } = this.coupon;\r\n        let { invalidCoupon } = this.controller;\r\n        //let onshowCouponCustomer = async () => await showCouponCustomer(this.coupon);\r\n        let oninvalidCoupon = async () => await invalidCoupon(this.coupon);\r\n\r\n        var inviteCode: string = \"\";\r\n        if (code) {\r\n            let p1 = code.substr(0, 4);\r\n            let p2 = code.substr(4);\r\n            inviteCode = p1 + ' ' + p2;\r\n        }\r\n        var discountShow: any;\r\n        discountShow = (1 - discount) * 10;\r\n\r\n        let rows: Prop[] = [\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-3\" left=\"优惠编号：\">\r\n                    <div className=\"mx-3\">{inviteCode}</div>\r\n                </LMR >\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-3\" left=\"有 效 期 ：\">\r\n                    <div className=\"mx-3\">{<EasyDate date={validitydate} />}</div>\r\n                </LMR >\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-3\" left=\"优惠力度：\">\r\n                    <div className=\"mx-3\">折扣：{discountShow.toFixed(1)} 折 </div>\r\n                </LMR >\r\n            } as ComponentProp\r\n        ];\r\n        if (customer.id != undefined) {\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    name: 'customer',\r\n                    component: <>\r\n                        {\r\n                            tv(\r\n                                customer, v =>\r\n                                <LMR className=\"cursor-pointer w-100 py-3\"\r\n                                    left=\"指定客户：\"\r\n                                    right={<div>{tv(v.unit, s => s.name)}</div>}>\r\n                                    <div className=\"mx-3\">{v.name}</div>\r\n                                </LMR >\r\n                            )\r\n                        }\r\n                    </>\r\n                } as ComponentProp\r\n            )\r\n        }\r\n\r\n        rows.push(\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-3\" left=\"当前状态：\" >\r\n                    <div className=\"mx-3\">  {this.renderisValid(isValid)}</div>\r\n                </LMR >\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-1\"\r\n                    left={< div>使用情况</div>}>\r\n                </LMR >\r\n            } as ComponentProp,\r\n            {\r\n                type: 'component',\r\n                name: 'customer',\r\n                component: <LMR className=\"cursor-pointer w-100 py-1\">\r\n                </LMR >\r\n            } as ComponentProp\r\n        );\r\n        let footer = <button onClick={oninvalidCoupon} type=\"submit\" className=\"btn btn-danger flex-grow-1 mx-3 my-1\" >作废</button>;\r\n        return <Page header=\"优惠码详情\" headerClassName={consts.headerClass} footer={footer}>\r\n            <PropGrid className=\"my-2\" rows={rows} values={this.coupon} alignValue=\"right\" />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CCoupon } from './CCoupon';\r\n\r\nexport class VCreateCouponEnd extends VPage<CCoupon> {\r\n\r\n    private code: string\r\n    async open(code: string) {\r\n        this.code = code;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    comeBack = () => {\r\n        this.closePage(2);\r\n    }\r\n    private page = observer(() => {\r\n        var inviteCode = \"\";\r\n        if (this.code) {\r\n            this.code = String(this.code);\r\n            let p1 = this.code.substr(0, 4);\r\n            let p2 = this.code.substr(4);\r\n            inviteCode = p1 + ' ' + p2;\r\n        }\r\n        return <Page header='优惠码' back=\"none\" headerClassName='bg-primary py-1 px-3'>\r\n            <div className=\"w-100 text-center m-3 text-muted\">\r\n                优惠码已生成，赶快发给客户吧！\r\n            </div>\r\n            <div className=\"w-100 text-center m-3 fa-2x text-info\">\r\n                {inviteCode}\r\n            </div>\r\n            <div className=\"w-100 text-center\">\r\n                <label className=\"text-success\" onClick={this.comeBack}> 返回</label>\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import _ from 'lodash';\r\nimport { observable } from 'mobx';\r\nimport { Query, PageItems, Context } from 'tonva';\r\nimport { CApp } from '../CApp';\r\nimport { CUqBase } from '../CBase';\r\nimport { VCouponList } from './VCouponList';\r\nimport { VCreateCoupon } from './VCreateCoupon';\r\nimport { VCouponDetail } from './VCouponDetail';\r\nimport { VCreateCouponEnd } from './VCreateCouponEnd';\r\n\r\n//页面类\r\nclass PageCoupon extends PageItems<any> {\r\n\r\n    private searchQuery: Query;\r\n\r\n    constructor(searchQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchQuery = searchQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\n/**\r\n *\r\n */\r\nexport class CCoupon extends CUqBase {\r\n    cApp: CApp;\r\n    @observable pageCoupon: PageCoupon;\r\n    @observable customers: any;\r\n\r\n    /*\r\n    private tuidCoupon: Tuid;\r\n    private querySearchCoupon: Query;\r\n    private querySearchCouponCustomer: Query;\r\n    private actionCreateCoupon: Action;\r\n    private actionAddCouponCustomer: Action;\r\n    private actionIsCanUseCoupon: Action;\r\n\r\n\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n        let { cUqSalesTask } = this.cApp;\r\n        this.tuidCoupon = cUqSalesTask.tuid(\"Coupon\");\r\n        this.querySearchCoupon = cUqSalesTask.query(\"SearchCoupon\");\r\n        this.querySearchCouponCustomer = cUqSalesTask.query(\"SearchCouponCustomer\");\r\n        this.actionCreateCoupon = cUqSalesTask.action(\"CreateCoupon\");\r\n        this.actionAddCouponCustomer = cUqSalesTask.action(\"CreateCouponCustomer\");\r\n        this.actionIsCanUseCoupon = cUqSalesTask.action(\"IsCanUseCoupon\");\r\n\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart() {\r\n        this.pageCoupon = null;\r\n        await this.searchByKey(undefined);\r\n        this.openVPage(VCouponList);\r\n        this.IsCanUseCoupon();\r\n    }\r\n\r\n    //查询客户--通过名称\r\n    searchByKey = async (key: string) => {\r\n        this.pageCoupon = new PageCoupon(this.uqs.salesTask.SearchCoupon);\r\n        this.pageCoupon.first({ key: key });\r\n    }\r\n\r\n    //显示添加优惠码页面\r\n    showCouponDetail = async (couponid: any) => {\r\n        let coupon = await this.uqs.salesTask.Coupon.load(couponid);\r\n        this.openVPage(VCouponDetail, coupon);\r\n    }\r\n\r\n    IsCanUseCoupon = async () => {\r\n\r\n        let coupon = {\r\n            code: \"36747841\",\r\n            webuser: \"47\"\r\n        }\r\n        let aa = await this.uqs.salesTask.IsCanUseCoupon.submit(coupon);\r\n        let bb = aa;\r\n    }\r\n\r\n    //显示添加优惠码页面\r\n    showCreateCoupon = async () => {\r\n        this.openVPage(VCreateCoupon);\r\n    }\r\n\r\n    //添加优惠码\r\n    createCoupon = async (param: any) => {\r\n\r\n        var customerid: number, discount: any;\r\n        if (param.customer) {\r\n            customerid = param.customer.id;\r\n        } else {\r\n            customerid = undefined;\r\n        }\r\n        if (param.discount == \"-1\") {\r\n            discount = undefined;\r\n        }\r\n\r\n        let coupon = {\r\n            validitydate: param.validitydate,\r\n            discount: param.discount,\r\n            preferential: 0,\r\n            mycustomer: customerid\r\n        }\r\n        let couponid = await this.uqs.salesTask.CreateCoupon.submit(coupon);\r\n        let code = couponid.code;\r\n        this.openVPage(VCreateCouponEnd, code)\r\n    }\r\n    //作废优惠码\r\n    invalidCoupon = async (param: any) => {\r\n        let tuidCoupon = this.uqs.salesTask.Coupon;\r\n        var coupon = await tuidCoupon.load(param.id);\r\n        coupon.isValid = 2;\r\n        await tuidCoupon.save(coupon.id, coupon);\r\n    }\r\n\r\n    /***\r\n    //显示客户\r\n    showCouponCustomer = async (param: any) => {\r\n        this.searchCouponCustomer(param.id);\r\n        await this.openVPage(VCouponCustomer, param);\r\n    }\r\n    //搜索优惠码客户\r\n    searchCouponCustomer = async (couponid: any) => {\r\n        let param = { coupon: couponid }\r\n        let cust = await this.querySearchCouponCustomer.table(param);\r\n        this.customers = cust;\r\n    }\r\n    */\r\n\r\n    //显示客户\r\n    showAddCouponCustomer = async (context: Context, name: string, value: number): Promise<any> => {\r\n        let { cCustomer } = this.cApp;\r\n        let d = await cCustomer.call();\r\n        return d;\r\n    }\r\n\r\n    //添加客户\r\n    addCouponCustomer = async (coupon: any, customer: any) => {\r\n        let param = { coupon: coupon.id, customer: customer.id }\r\n        this.uqs.salesTask.AddCouponCustomer.submit(param);\r\n        this.customers.unshift({\r\n            coupon: coupon,\r\n            customer: customer\r\n        });\r\n        this.closePage();\r\n    }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { LMR, List, EasyDate, SearchBox, FA } from 'tonva';\r\nimport { CInnerCustomer } from './CInnerCustomer';\r\n\r\nexport class VInnerCustomerCall extends VPage<CInnerCustomer> {\r\n\r\n    async open(customer: any) {\r\n        this.openPage(this.page, customer);\r\n    }\r\n\r\n    private renderCustomer(model: any, index: number) {\r\n        let { name } = model;\r\n        return <LMR className=\"px-3 py-2 \" left={<FA name='user' className=' my-2 mr-3 text-info' />}>\r\n            <div className=\"font-weight-bold\"></div>\r\n            <div>{name}</div>\r\n        </LMR >\r\n    }\r\n\r\n    private onClickCustomer = async (model: any) => {\r\n        await this.controller.returnWebUser(model);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = observer((customer: any) => {\r\n        let { pageWebUser } = this.controller;\r\n        let none = <div className=\"my-3 mx-2 text-warning\">请搜索客户！</div>;\r\n        return <Page header=\"选择内部客户\" headerClassName='bg-primary'>\r\n            <SearchBox className=\"px-1 w-100  mt-2 mr-2\"\r\n                size='md'\r\n                onSearch={(key: string) => this.controller.searchByKey(key)}\r\n                placeholder=\"搜索客户姓名、单位\" />\r\n            <List before={''} none={none} items={pageWebUser} item={{ render: this.renderCustomer, onClick: this.onClickCustomer }} />\r\n        </Page>\r\n    })\r\n}","import * as _ from 'lodash';\r\nimport { Query, PageItems, Controller, nav, Page, Image } from 'tonva';\r\n//import { CSalesTaskApp } from '../CSalesTaskApp';\r\nimport { observable } from 'mobx';\r\nimport { CUqBase } from '../CBase';\r\nimport { Task } from '../salestask/model';\r\nimport { VInnerCustomerCall } from './VInnerCustomerCall';\r\n\r\n//页面类\r\nclass PageCWebUser extends PageItems<any> {\r\n\r\n    private searchQuery: Query;\r\n\r\n    constructor(searchQuery: Query) {\r\n        super();\r\n        this.firstSize = this.pageSize = 10;\r\n        this.searchQuery = searchQuery;\r\n    }\r\n\r\n    protected async load(param: any, pageStart: any, pageSize: number): Promise<any[]> {\r\n        if (pageStart === undefined) pageStart = 0;\r\n        let ret = await this.searchQuery.page(param, pageStart, pageSize);\r\n        return ret;\r\n    }\r\n\r\n    protected setPageStart(item: any): any {\r\n        this.pageStart = item === undefined ? 0 : item.id;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n */\r\nexport class CInnerCustomer extends CUqBase {\r\n    @observable pageWebUser: PageCWebUser;\r\n\r\n    /*\r\n    private querySearchWebUser: Query;\r\n\r\n    //构造函数\r\n    constructor(cApp: CSalesTaskApp, res: any) {\r\n        super(res);\r\n        this.cApp = cApp;\r\n\r\n        let { cUqCustomer } = this.cApp;\r\n        this.querySearchWebUser = cUqCustomer.query(\"searchCustomer\");\r\n\r\n    }\r\n    */\r\n\r\n    //初始化\r\n    protected async internalStart(task: Task) {\r\n        this.pageWebUser = null;\r\n        this.openVPage(VInnerCustomerCall);\r\n    }\r\n\r\n    //查询客户--通过名称\r\n    searchByKey = async (key: string) => {\r\n        this.pageWebUser = new PageCWebUser(this.uqs.customer.SearchWebUser);\r\n        this.pageWebUser.first({ key: key });\r\n    }\r\n\r\n    returnWebUser = async (webuser: any): Promise<any> => {\r\n        this.returnCall(webuser);\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { CAppBase, Controller, IConstructor, CUq, User, nav } from \"tonva\";\r\nimport { CSalesTask } from './salestask';\r\nimport { consts } from './consts';\r\nimport { CCustomer } from './customer/CCustomer';\r\nimport { CProduct } from './product/CProduct';\r\nimport { CMe } from './me/CMe';\r\nimport { CStart } from './start/CStart';\r\nimport { CTeam } from './team/CTeam';\r\nimport { CMessage } from './message/CMessage';\r\nimport { CCustomerUnit } from './customerunit/CCustomerUnit';\r\nimport { CCoupon } from './coupon/CCoupon';\r\nimport { CInnerCustomer } from './innercustomer/CInnerCustomer';\r\n\r\nimport { UQs } from \"./uqs\";\r\nimport { CUqBase } from \"./CBase\";\r\nimport { VHome } from './ui';\r\n\r\nexport class CApp extends CAppBase {\r\n    readonly uqs: UQs;\r\n\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n\r\n    /** 定义 Conctorlle*/\r\n    cSalesTask: CSalesTask;\r\n    cCustomer: CCustomer;\r\n    cProduct: CProduct;\r\n    cMe: CMe;\r\n    cTeam: CTeam;\r\n    cStart: CStart;\r\n    cMessage: CMessage;\r\n    cCustomerUnit: CCustomerUnit;\r\n    cCoupon: CCoupon;\r\n    cWebUser: CInnerCustomer;\r\n\r\n    protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n        return new type(this);\r\n    }\r\n\r\n    protected async internalStart() {\r\n        /** 初始化 Conctrolle*/\r\n        this.cCustomer = this.newC(CCustomer);\r\n        this.cProduct = this.newC(CProduct);\r\n        this.cSalesTask = this.newC(CSalesTask);\r\n        this.cMe = this.newC(CMe);\r\n        this.cTeam = this.newC(CTeam);\r\n        this.cStart = this.newC(CStart);\r\n        this.cMessage = this.newC(CMessage);\r\n        this.cCustomerUnit = this.newC(CCustomerUnit);\r\n        this.cCoupon = this.newC(CCoupon);\r\n        this.cWebUser = this.newC(CInnerCustomer);\r\n\r\n        this.currentSalesRegion = await this.uqs.common.SalesRegion.load(1);\r\n        this.currentLanguage = await this.uqs.common.Language.load(197);\r\n\r\n        /** 启动销售任务列表*/\r\n        //this.cSalesTask.start();\r\n\r\n        /** 启动邀请码页面 */\r\n        this.cStart.start();\r\n\r\n        /**计算业绩**/\r\n        //await this.cMe.onComputeAchievement();\r\n\r\n        /** 启动主程序*/\r\n        //await super.internalStart(param);\r\n        nav.clear();\r\n        this.openVPage(VHome);\r\n    }\r\n}\r\n","import { AppConfig } from \"tonva\";\r\n//import { jnkTop } from \"./me/loginTop\";\r\nimport { tvs } from \"./tvs\";\r\nimport { jnkTop } from './ui';\r\n\r\nexport { CApp } from './CApp';\r\n\r\nexport const appConfig: AppConfig = {\r\n    appName: \"百灵威系统工程部/salestask\",\r\n    version: \"1.0.6\",                   // 版本变化，缓存的uqs才会重载\r\n    tvs: tvs,\r\n    loginTop: jnkTop,\r\n};\r\n","\r\nimport * as React from 'react';\r\nimport './App.css';\r\nimport { start, NavView, nav } from 'tonva';\r\nimport { CApp, appConfig } from './nv';\r\n//import { faceTabs } from 'facetabs';\r\n\r\n//const tonvaApp = \"bruce/TestApp\";\r\nnav.setSettings(appConfig);\r\nclass App extends React.Component {\r\n\r\n    private onLogined = async () => {\r\n\r\n        await start(CApp, appConfig);\r\n        /*\r\n        let page = <Page header={false}>\r\n          <Tabs tabs={faceTabs} />\r\n        </Page>\r\n        nav.push(page);\r\n        */\r\n        //let b = new B('b');\r\n        //await b.d();\r\n        //nav.push(<div>ddd</div>)\r\n    }\r\n    public render() {\r\n        // notLogined={this.onLogined}\r\n        return <NavView onLogined={this.onLogined} />\r\n    }\r\n}\r\n\r\nexport default App;\r\n\r\n/*\r\nclass B extends A {\r\n  constructor(b:string) {\r\n    super(b);\r\n  }\r\n  //get super() {return this.A}\r\n  async test():Promise<string> {return 'B'}\r\n  async superTest() {\r\n    console.log('superTest: ' + super.t())\r\n    return super.test()\r\n  }\r\n  t() {return 'tb'}\r\n  async d() {\r\n    console.log(super.test);\r\n    console.log(this.test);\r\n    console.log(super.t);\r\n    console.log(this.t);\r\n    console.log('A.test ' + await this.superTest());\r\n    console.log('B.test ' + await this.test());\r\n    console.log('A.t ' + super.t());\r\n    console.log('B.t ' + this.t());\r\n  }\r\n}\r\n*/","// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log('New content is available; please refresh.');\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log('Content is cached for offline use.');\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type')!.indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root') as HTMLElement\r\n);\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}