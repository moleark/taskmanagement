(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){"use strict";var r=n(11);n.d(t,"PageItems",function(){return r.b});n(8);var i=n(3);n.o(i,"CAppBase")&&n.d(t,"CAppBase",function(){return i.CAppBase}),n.o(i,"CBase")&&n.d(t,"CBase",function(){return i.CBase}),n.o(i,"CSub")&&n.d(t,"CSub",function(){return i.CSub}),n.o(i,"Controller")&&n.d(t,"Controller",function(){return i.Controller}),n.o(i,"EasyDate")&&n.d(t,"EasyDate",function(){return i.EasyDate}),n.o(i,"Edit")&&n.d(t,"Edit",function(){return i.Edit}),n.o(i,"FA")&&n.d(t,"FA",function(){return i.FA}),n.o(i,"Form")&&n.d(t,"Form",function(){return i.Form}),n.o(i,"Image")&&n.d(t,"Image",function(){return i.Image}),n.o(i,"LMR")&&n.d(t,"LMR",function(){return i.LMR}),n.o(i,"List")&&n.d(t,"List",function(){return i.List}),n.o(i,"NavView")&&n.d(t,"NavView",function(){return i.NavView}),n.o(i,"Page")&&n.d(t,"Page",function(){return i.Page}),n.o(i,"PropGrid")&&n.d(t,"PropGrid",function(){return i.PropGrid}),n.o(i,"SearchBox")&&n.d(t,"SearchBox",function(){return i.SearchBox}),n.o(i,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return i.TabCaptionComponent}),n.o(i,"Tabs")&&n.d(t,"Tabs",function(){return i.Tabs}),n.o(i,"VPage")&&n.d(t,"VPage",function(){return i.VPage}),n.o(i,"View")&&n.d(t,"View",function(){return i.View}),n.o(i,"Widget")&&n.d(t,"Widget",function(){return i.Widget}),n.o(i,"nav")&&n.d(t,"nav",function(){return i.nav}),n.o(i,"start")&&n.d(t,"start",function(){return i.start}),n.o(i,"toUiSelectItems")&&n.d(t,"toUiSelectItems",function(){return i.toUiSelectItems}),n.o(i,"tv")&&n.d(t,"tv",function(){return i.tv}),n.o(i,"userApi")&&n.d(t,"userApi",function(){return i.userApi});var o=n(76);n.d(t,"userApi",function(){return o.a});n(20);var a=n(65);n.o(a,"CAppBase")&&n.d(t,"CAppBase",function(){return a.CAppBase}),n.o(a,"CBase")&&n.d(t,"CBase",function(){return a.CBase}),n.o(a,"CSub")&&n.d(t,"CSub",function(){return a.CSub}),n.o(a,"Controller")&&n.d(t,"Controller",function(){return a.Controller}),n.o(a,"EasyDate")&&n.d(t,"EasyDate",function(){return a.EasyDate}),n.o(a,"Edit")&&n.d(t,"Edit",function(){return a.Edit}),n.o(a,"FA")&&n.d(t,"FA",function(){return a.FA}),n.o(a,"Form")&&n.d(t,"Form",function(){return a.Form}),n.o(a,"Image")&&n.d(t,"Image",function(){return a.Image}),n.o(a,"LMR")&&n.d(t,"LMR",function(){return a.LMR}),n.o(a,"List")&&n.d(t,"List",function(){return a.List}),n.o(a,"NavView")&&n.d(t,"NavView",function(){return a.NavView}),n.o(a,"Page")&&n.d(t,"Page",function(){return a.Page}),n.o(a,"PropGrid")&&n.d(t,"PropGrid",function(){return a.PropGrid}),n.o(a,"SearchBox")&&n.d(t,"SearchBox",function(){return a.SearchBox}),n.o(a,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return a.TabCaptionComponent}),n.o(a,"Tabs")&&n.d(t,"Tabs",function(){return a.Tabs}),n.o(a,"VPage")&&n.d(t,"VPage",function(){return a.VPage}),n.o(a,"View")&&n.d(t,"View",function(){return a.View}),n.o(a,"Widget")&&n.d(t,"Widget",function(){return a.Widget}),n.o(a,"nav")&&n.d(t,"nav",function(){return a.nav}),n.o(a,"start")&&n.d(t,"start",function(){return a.start}),n.o(a,"toUiSelectItems")&&n.d(t,"toUiSelectItems",function(){return a.toUiSelectItems}),n.o(a,"tv")&&n.d(t,"tv",function(){return a.tv});var s=n(71);n.d(t,"CAppBase",function(){return s.a}),n.d(t,"CBase",function(){return s.b}),n.d(t,"CSub",function(){return s.c}),n.d(t,"start",function(){return s.d})},function(e,t,n){"use strict";var r=n(9);n.d(t,"NavView",function(){return r.a}),n.d(t,"nav",function(){return r.b});n(31);var i=n(14);n.d(t,"Page",function(){return i.a});var o=n(55);n.d(t,"Controller",function(){return o.a}),n.d(t,"VPage",function(){return o.b}),n.d(t,"View",function(){return o.c});var a=n(56);n.o(a,"CAppBase")&&n.d(t,"CAppBase",function(){return a.CAppBase}),n.o(a,"CBase")&&n.d(t,"CBase",function(){return a.CBase}),n.o(a,"CSub")&&n.d(t,"CSub",function(){return a.CSub}),n.o(a,"EasyDate")&&n.d(t,"EasyDate",function(){return a.EasyDate}),n.o(a,"Edit")&&n.d(t,"Edit",function(){return a.Edit}),n.o(a,"FA")&&n.d(t,"FA",function(){return a.FA}),n.o(a,"Form")&&n.d(t,"Form",function(){return a.Form}),n.o(a,"Image")&&n.d(t,"Image",function(){return a.Image}),n.o(a,"LMR")&&n.d(t,"LMR",function(){return a.LMR}),n.o(a,"List")&&n.d(t,"List",function(){return a.List}),n.o(a,"Muted")&&n.d(t,"Muted",function(){return a.Muted}),n.o(a,"PropGrid")&&n.d(t,"PropGrid",function(){return a.PropGrid}),n.o(a,"SearchBox")&&n.d(t,"SearchBox",function(){return a.SearchBox}),n.o(a,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return a.TabCaptionComponent}),n.o(a,"Tabs")&&n.d(t,"Tabs",function(){return a.Tabs}),n.o(a,"Widget")&&n.d(t,"Widget",function(){return a.Widget}),n.o(a,"emailRegex")&&n.d(t,"emailRegex",function(){return a.emailRegex}),n.o(a,"mobileRegex")&&n.d(t,"mobileRegex",function(){return a.mobileRegex}),n.o(a,"resLang")&&n.d(t,"resLang",function(){return a.resLang}),n.o(a,"start")&&n.d(t,"start",function(){return a.start}),n.o(a,"toUiSelectItems")&&n.d(t,"toUiSelectItems",function(){return a.toUiSelectItems}),n.o(a,"tv")&&n.d(t,"tv",function(){return a.tv}),n.o(a,"userApi")&&n.d(t,"userApi",function(){return a.userApi});var s=n(70);n.d(t,"Form",function(){return s.a}),n.d(t,"Widget",function(){return s.b});var u=n(72);n.d(t,"Edit",function(){return u.a});var c=n(27);n.d(t,"resLang",function(){return c.a});var l=n(75);n.d(t,"TabCaptionComponent",function(){return l.a}),n.d(t,"Tabs",function(){return l.b});n(37);var h=n(22);n.d(t,"Image",function(){return h.a});n(38);var d=n(60);n.d(t,"emailRegex",function(){return d.a}),n.d(t,"mobileRegex",function(){return d.b});var p=n(73);n.d(t,"List",function(){return p.a});n(61);var m=n(62);n.d(t,"EasyDate",function(){return m.a});var f=n(74);n.d(t,"PropGrid",function(){return f.a});var v=n(42);n.d(t,"FA",function(){return v.a}),n.d(t,"LMR",function(){return v.b}),n.d(t,"Muted",function(){return v.c});n(63);var b=n(64);n.d(t,"SearchBox",function(){return b.a})},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var r=n(1),i=n(3),o=n(28),a=n(39),s=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;Object.setPrototypeOf(o.x,t.x);var s=n.name,u=n.typeName;return o.entity=n,o.ui=r,o.label=o.res.label||s,o.icon=a.a[u],o}return r.d(t,e),t.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.entity.loadSchema()];case 1:return e.sent(),[2,!0]}})})},t.prototype.createForm=function(e,t,n){var r=this.buildFormOptions(n),i=new o.b(r,e);return i.setValues(t),i},t.prototype.buildFormOptions=function(e){var t,n,r,i,a,s=this.entity,u=s.fields,c=s.arrFields;void 0!==this.res&&(t=this.res.none,n=this.res.submit,r=this.res.arrNew,i=this.res.arrEdit,a=this.res.arrTitleNewButton),void 0===t&&(t=this.cUq.res.none||"none"),void 0===n&&(n=this.cUq.res.submit||"Submit"),void 0===r&&(r=this.cUq.res.arrNew||"New"),void 0===i&&(i=this.cUq.res.arrEdit||"Edit"),void 0===a&&(a=this.cUq.res.arrTitleNewButton),void 0===e&&(e=o.a.new);var l=this.ui.form;return{fields:u,arrs:c,ui:l,res:this.res||{},inputs:this.buildInputs(l),none:t,submitCaption:n,arrNewCaption:r,arrEditCaption:i,arrTitleNewButton:a,mode:e}},t.prototype.buildInputs=function(e){var t=this.entity,n=t.fields,r=t.arrFields,i={};if(this.buildFieldsInputs(i,n,void 0,e),void 0!==r)for(var o=0,a=r;o<a.length;o++){var s=a[o],u=s.name,c=s.fields,l=e&&e.items;this.buildFieldsInputs(i,c,u,l&&l[u])}return i},t.prototype.buildFieldsInputs=function(e,t,n,r){if(void 0!==n){var i=e[n];void 0===i&&(e[n]=i={},e=i)}for(var o=0,a=t;o<a.length;o++){var s=a[o],u=s.name,c=s._tuid;if(void 0!==c){var l=c.tuid,h=r&&r.items&&r.items[u];e[u]={select:this.buildSelect(s,n,h),content:this.buildContent(s,n),placeHolder:this.cUq.getTuidPlaceHolder(l)}}}},t.prototype.buildSelect=function(e,t,n){var i=this;return function(e,t,o){return r.b(i,void 0,Promise,function(){var i,o,a,s,u,c;return r.e(this,function(r){switch(r.label){case 0:return i=t._tuid,i.tuid,o=i.ownerField,a=void 0,s=void 0,void 0!==o&&(s=e.getValue(o.name)),n&&!0===n.autoList&&(console.log("select search set param=empty string"),s=""),[4,a.call(s)];case 1:return u=r.sent(),a.removeCeased(),void 0===u?[2,void 0]:(c=a.idFromItem(u),i.useId(c),[2,c])}})})}},t.prototype.buildContent=function(e,t){},t.prototype.cQuerySelect=function(e){return this.cUq.cQuerySelect(e)},t}(n(40).a),u=function(e){function t(t){var n=e.call(this,t)||this;return n.entity=t.entity,n.ui=t.ui,n}return r.d(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this.controller.label},enumerable:!0,configurable:!0}),t.prototype.createForm=function(e,t,n){return this.controller.createForm(e,t,n)},t}(i.VPage)},function(e,t,n){"use strict";var r=n(19),i=n(30),o=n(1),a=n(24),s=n(17),u=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.guest=function(){return o.b(this,void 0,Promise,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.get("",{})];case 1:switch(typeof(e=t.sent())){default:return[2];case"string":return[2,Object(a.a)(e)];case"object":return[2,Object(a.a)(e.token)]}return[2]}})})},t.prototype.unitFromName=function(e){return o.b(this,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return[2,(t=n.sent())&&t.unit]}})})},t}(s.a))("tv/guest/",void 0),c=function(){function e(e){this.method="POST",this.params=e}return e.prototype.buildParams=function(){return this.params},Object.defineProperty(e.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),e}(),l=n(13),h=n(25);n.d(t,"f",function(){return r.a}),n.d(t,"m",function(){return r.b}),n.d(t,"n",function(){return i.b}),n.d(t,"i",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"l",function(){return s.h}),n.d(t,"e",function(){return s.d}),n.d(t,"d",function(){return s.c}),n.d(t,"q",function(){return s.j}),n.d(t,"p",function(){return s.i}),n.d(t,"b",function(){return s.a}),n.d(t,"c",function(){return s.b}),n.d(t,"k",function(){return s.g}),n.d(t,"g",function(){return l.a}),n.d(t,"h",function(){return l.f}),n.d(t,"o",function(){return h.b}),n.d(t,"j",function(){return h.a})},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g}),n.d(t,"b",function(){return w});var r,i=n(1),o=n(0),a=n(5),s=n(14),u=n(51),c=n(77),l=n(13),h=n(11),d=n(8),p=n(19),m=n(27),f=n(37),v=(n(54),n(80),n(94),n(96),n(42)),b=(new RegExp("Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile","i").test(navigator.userAgent),n(81),[]),y=1,g=function(t){function n(e){var n=t.call(this,e)||this;return n.waitCount=0,n.upgradeUq=function(){w.start()},n.isHistoryBack=!1,n.clearError=function(){n.setState({fetchError:void 0})},n.back=n.back.bind(n),n.navBack=n.navBack.bind(n),n.stack=[],n.state={stack:n.stack,wait:0,fetchError:void 0},n}return i.d(n,t),n.prototype.componentWillMount=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){return window.addEventListener("popstate",this.navBack),[2]})})},n.prototype.componentDidMount=function(){return i.b(this,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return w.set(this),[4,w.start()];case 1:return e.sent(),[2]}})})},Object.defineProperty(n.prototype,"level",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),n.prototype.startWait=function(){var t=this;0===this.waitCount&&(this.setState({wait:1}),this.waitTimeHandler=e.setTimeout(function(){t.waitTimeHandler=void 0,t.setState({wait:2})},1e3)),++this.waitCount,this.setState({fetchError:void 0})},n.prototype.endWait=function(){var e=this;setTimeout(function(){--e.waitCount,0===e.waitCount&&(void 0!==e.waitTimeHandler&&(clearTimeout(e.waitTimeHandler),e.waitTimeHandler=void 0),e.setState({wait:0}))},100)},n.prototype.onError=function(e){return i.b(this,void 0,void 0,function(){var t;return i.e(this,function(n){switch(n.label){case 0:return void 0===(t=e.error)||!0!==t.unauthorized?[3,2]:[4,w.showLogin(void 0)];case 1:return n.sent(),[2];case 2:return this.setState({fetchError:e}),[2]}})})},n.prototype.showUpgradeUq=function(e,t){return i.b(this,void 0,Promise,function(){return i.e(this,function(n){return this.show(o.createElement(s.a,{header:!1},o.createElement("div",null,"UQ\u5347\u7ea7\u4e86\uff0c\u8bf7\u70b9\u51fb\u6309\u94ae\u5347\u7ea7 ",o.createElement("br",null),o.createElement("small",{className:"text-muted"},e," ver-",t),o.createElement("button",{className:"btn btn-primary",onClick:this.upgradeUq},"\u5347\u7ea7")))),[2]})})},n.prototype.show=function(e,t){return this.clear(),this.push(e,t)},n.prototype.push=function(e,t){this.removeCeased(),this.stack.length>0&&window.history.pushState("forward",null,null);var n=y++;return this.stack.push({key:n,view:e,ceased:!1,disposer:t}),this.refresh(),n},n.prototype.replace=function(e,t){var n=void 0,r=this.stack;r.length>0&&(n=r.pop());var i=y++;return this.stack.push({key:i,view:e,ceased:!1,disposer:t}),void 0!==n&&this.dispose(n.disposer),this.refresh(),i},n.prototype.ceaseTop=function(e){void 0===e&&(e=1);for(var t=this.stack.length-1,n=0;n<e&&!(t<0);n++,t--){this.stack[t].ceased=!0}},n.prototype.pop=function(e){void 0===e&&(e=1);var t=this.stack,n=t.length;if(!(e<=0||n<=1)){n<e&&(e=n);for(var r=0,i=0;i<e&&0!==t.length;i++)this.popAndDispose(),++r;r>=n&&r--,this.refresh(),this.isHistoryBack}},n.prototype.popTo=function(e){if(void 0!==e&&void 0!==this.stack.find(function(t){return t.key===e}))for(;this.stack.length>0;){var t=this.stack.length;if(this.stack[t-1].key===e)break;this.pop()}},n.prototype.topKey=function(){var e=this.stack.length;if(0!==e)return this.stack[e-1].key},n.prototype.removeCeased=function(){for(;;){var e=this.stack.length-1;if(e<0)break;if(!1===this.stack[e].ceased)break;var t=this.stack.pop().disposer;this.dispose(t)}this.refresh()},n.prototype.popAndDispose=function(){this.removeCeased();var e=this.stack.pop();if(void 0!==e){var t=e.disposer;return this.dispose(t),this.removeCeased(),e}},n.prototype.dispose=function(e){void 0!==e&&(void 0===this.stack.find(function(t){return t.disposer===e})&&e())},n.prototype.clear=function(){for(this.stack.length;this.stack.length>0;)this.popAndDispose()},n.prototype.regConfirmClose=function(e){var t=this.stack,n=t.length;0!==n&&(t[n-1].confirmClose=e)},n.prototype.navBack=function(){w.log("backbutton pressed - nav level: "+this.stack.length),this.isHistoryBack=!0,this.back(!0),this.isHistoryBack=!1},n.prototype.back=function(e){return void 0===e&&(e=!0),i.b(this,void 0,void 0,function(){var t,n,r;return i.e(this,function(i){switch(i.label){case 0:return t=this.stack,0===(n=t.length)?[2]:1===n?(self!=window.top&&window.top.postMessage({type:"pop-app"},"*"),[2]):(r=t[n-1],!0===e&&r.confirmClose?[4,r.confirmClose()]:[3,2]);case 1:return!0===i.sent()&&this.pop(),[3,3];case 2:this.pop(),i.label=3;case 3:return[2]}})})},n.prototype.confirmBox=function(e){return window.confirm(e)},n.prototype.render=function(){var e=this.state,t=e.wait,n=e.fetchError,r=this.state.stack,a=r.length-1,s=null,u=null;switch(t){case 1:s=o.createElement("li",{className:"va-wait va-wait1"});break;case 2:s=o.createElement("li",{className:"va-wait va-wait2"},o.createElement(f.a,null))}n&&(u=o.createElement(c.a,i.a({clearError:this.clearError},n)));var l=!0===w.testing&&o.createElement("span",{className:"cursor-pointer position-absolute",style:{lineHeight:0}},o.createElement(v.a,{className:"text-warning",name:"info-circle"}));return o.createElement("ul",{className:"va"},r.map(function(e,t){var n=e.key,r=e.view;return o.createElement("li",{key:n,style:t<a?{visibility:"hidden"}:void 0},r)}),s,u,l)},n.prototype.refresh=function(){this.setState({stack:this.stack})},n}(o.Component),w=new(function(){function e(){this.local=new h.a,this.user=void 0,this.arrs=["/test","/test/"];var e=m.b.lang,t=m.b.district;this.language=e,this.culture=t,this.testing=!1}return Object.defineProperty(e.prototype,"guest",{get:function(){var e=this.local.guest;if(void 0===e)return 0;var t=e.get();return void 0===t?0:t.guest},enumerable:!0,configurable:!0}),e.prototype.set=function(e){this.nav=e},e.prototype.registerReceiveHandler=function(e){if(void 0!==this.ws)return this.ws.onWsReceiveAny(e)},e.prototype.unregisterReceiveHandler=function(e){void 0!==this.ws&&void 0!==e&&this.ws.endWsReceive(e)},e.prototype.onReceive=function(e){return i.b(this,void 0,void 0,function(){return i.e(this,function(t){switch(t.label){case 0:return void 0===this.ws?[2]:[4,this.ws.receive(e)];case 1:return t.sent(),[2]}})})},e.prototype.getPredefinedUnitName=function(){return i.b(this,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e=this.unitJsonPath(),[4,fetch(e,{})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent().unit];case 3:return t.sent(),this.local.unit.remove(),[2];case 4:return[2]}})})},e.prototype.loadPredefinedUnit=function(){return i.b(this,void 0,void 0,function(){var e,t,n,r;return i.e(this,function(i){switch(i.label){case 0:return void 0!==(e=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UNIT)?[2,Number(e)]:void 0===(n=this.local.unit.get())?[3,2]:!0!==h.c.isDevelopment?[2,n.id]:[4,this.getPredefinedUnitName()];case 1:return void 0===(t=i.sent())?[2]:n.name===t?[2,n.id]:[3,4];case 2:return[4,this.getPredefinedUnitName()];case 3:if(void 0===(t=i.sent()))return[2];i.label=4;case 4:return[4,d.i.unitFromName(t)];case 5:return void 0!==(r=i.sent())&&this.local.unit.set({id:r,name:t}),[2,r]}})})},e.prototype.setSettings=function(e){this.navSettings=e},e.prototype.unitJsonPath=function(){var e=document.location.href;e=e.toLowerCase();for(var t=0,n=this.arrs;t<n.length;t++){var r=n[t];if(!0===e.endsWith(r)){e=e.substr(0,e.length-r.length);break}}return!0!==e.endsWith("/")&&!0!==e.endsWith("\\")||(e=e.substr(0,e.length-1)),e+"/unit.json"},e.prototype.start=function(){return i.b(this,void 0,void 0,function(){var e,t,n,r,o,a,s,u,c,m,f;return i.e(this,function(i){switch(i.label){case 0:return i.trys.push([0,11,12,13]),this.testing=h.c.testing,[4,d.j.start(this.testing)];case 1:return i.sent(),void 0!==(e=document.location.hash)&&e.length>0&&((t=Object(l.g)())<0&&(t=void 0),this.hashParam=e.substring(1,t)),w.clear(),this.startWait(),n=d.j.url,r=d.j.ws,o=d.j.resHost,this.centerHost=n,this.resUrl=Object(d.o)(o),this.wsHost=r,Object(d.q)(n),void 0!==(a=this.local.guest.get())?[3,3]:[4,d.i.guest()];case 2:a=i.sent(),i.label=3;case 3:return w.setGuest(a),s=Object(l.f)(),u=Object(l.j)(s),void 0!==s&&window!==window.parent&&void 0!==u?(this.ws=p.d,console.log("this.ws = wsBridge in sub frame"),self!==window.parent&&window.parent.postMessage({type:"sub-frame-started",hash:u.hash},"*"),[2]):[4,this.loadPredefinedUnit()];case 4:return c=i.sent(),u.predefinedUnit=c,void 0!==(m=this.local.user.get())?[3,9]:void 0===(f=this.nav.props.notLogined)?[3,6]:[4,f()];case 5:return i.sent(),[3,8];case 6:return[4,w.showLogin(void 0)];case 7:i.sent(),i.label=8;case 8:return[2];case 9:return[4,w.logined(m)];case 10:return i.sent(),[3,13];case 11:return i.sent(),[3,13];case 12:return this.endWait(),[7];case 13:return[2]}})})},e.prototype.showAppView=function(){return i.b(this,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return void 0===(e=this.nav.props.onLogined)?(w.push(o.createElement("div",null,"NavView has no prop onLogined")),[2]):(w.clear(),[4,e()]);case 1:return t.sent(),console.log("logined: AppView shown"),[2]}})})},e.prototype.setGuest=function(e){this.local.guest.set(e),u.a.set(0,e.token)},e.prototype.saveLocalUser=function(){this.local.user.set(this.user)},e.prototype.logined=function(e,t){return i.b(this,void 0,void 0,function(){return i.e(this,function(n){switch(n.label){case 0:return Object(d.l)(),console.log("logined: %s",JSON.stringify(e)),this.user=e,this.saveLocalUser(),u.a.set(e.id,e.token),void 0===t?[3,1]:(t(e),[3,3]);case 1:return[4,this.showAppView()];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.wsConnect=function(){(this.ws=new d.f(this.wsHost,this.user.token)).connect()},e.prototype.loginTop=function(e){return this.navSettings&&this.navSettings.loginTop||e},e.prototype.showLogin=function(e,t){return i.b(this,void 0,void 0,function(){var r,a;return i.e(this,function(i){switch(i.label){case 0:return[4,n.e(1).then(n.bind(null,114))];case 1:return r=i.sent(),a=o.createElement(r.default,{withBack:t,callback:e}),!0!==t&&(this.nav.clear(),this.pop()),this.nav.push(a),[2]}})})},e.prototype.showLogout=function(e){return i.b(this,void 0,void 0,function(){var t=this;return i.e(this,function(n){return w.push(o.createElement(s.a,{header:"\u5b89\u5168\u9000\u51fa",back:"close"},o.createElement("div",{className:"m-5 border border-info bg-white rounded p-3 text-center"},o.createElement("div",null,"\u9000\u51fa\u5f53\u524d\u8d26\u53f7\u4e0d\u4f1a\u5220\u9664\u4efb\u4f55\u5386\u53f2\u6570\u636e\uff0c\u4e0b\u6b21\u767b\u5f55\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\u672c\u8d26\u53f7"),o.createElement("div",{className:"mt-3"},o.createElement("button",{className:"btn btn-danger",onClick:function(){return t.logout(e)}},"\u9000\u51fa"))))),[2]})})},e.prototype.logout=function(e){return i.b(this,void 0,void 0,function(){var t;return i.e(this,function(n){switch(n.label){case 0:return d.g.unit=void 0,this.local.logoutClear(),this.user=void 0,Object(d.l)(),t=this.local.guest.get(),Object(d.p)(0,t&&t.token),this.ws=void 0,void 0!==e?[3,2]:[4,w.start()];case 1:return n.sent(),[3,4];case 2:return[4,e()];case 3:n.sent(),n.label=4;case 4:return[2]}})})},e.prototype.changePassword=function(){return i.b(this,void 0,void 0,function(){var e;return i.e(this,function(t){switch(t.label){case 0:return[4,n.e(2).then(n.bind(null,113))];case 1:return e=t.sent(),w.push(o.createElement(e.ChangePasswordPage,null)),[2]}})})},Object.defineProperty(e.prototype,"level",{get:function(){return this.nav.level},enumerable:!0,configurable:!0}),e.prototype.startWait=function(){this.nav.startWait()},e.prototype.endWait=function(){this.nav.endWait()},e.prototype.onError=function(e){return i.b(this,void 0,void 0,function(){return i.e(this,function(t){switch(t.label){case 0:return[4,this.nav.onError(e)];case 1:return t.sent(),[2]}})})},e.prototype.showUpgradeUq=function(e,t){return i.b(this,void 0,Promise,function(){return i.e(this,function(n){switch(n.label){case 0:return[4,this.nav.showUpgradeUq(e,t)];case 1:return n.sent(),[2]}})})},e.prototype.show=function(e,t){this.nav.show(e,t)},e.prototype.push=function(e,t){this.nav.push(e,t)},e.prototype.replace=function(e,t){this.nav.replace(e,t)},e.prototype.pop=function(e){void 0===e&&(e=1),this.nav.pop(e)},e.prototype.topKey=function(){return this.nav.topKey()},e.prototype.popTo=function(e){this.nav.popTo(e)},e.prototype.clear=function(){this.nav.clear()},e.prototype.navBack=function(){this.nav.navBack()},e.prototype.ceaseTop=function(e){this.nav.ceaseTop(e)},e.prototype.removeCeased=function(){this.nav.removeCeased()},e.prototype.back=function(e){return void 0===e&&(e=!0),i.b(this,void 0,void 0,function(){return i.e(this,function(t){switch(t.label){case 0:return[4,this.nav.back(e)];case 1:return t.sent(),[2]}})})},e.prototype.regConfirmClose=function(e){this.nav.regConfirmClose(e)},e.prototype.confirmBox=function(e){return this.nav.confirmBox(e)},e.prototype.navToApp=function(e,t,n,r,a){return i.b(this,void 0,Promise,function(){var s=this;return i.e(this,function(i){return[2,new Promise(function(i,u){var c=!0===s.centerHost.includes("http://localhost:")?"sheet_debug":"sheet",h=void 0===a?Object(l.c)(e,t):Object(l.c)(e,t,c,[n,r,a]);console.log("navToApp: %s",JSON.stringify(h)),w.push(o.createElement("article",{className:"app-container"},o.createElement("span",{id:h.hash,onClick:function(){return s.back()}},o.createElement("i",{className:"fa fa-arrow-left"})),o.createElement("iframe",{src:h.url})),function(){i()})})]})})},e.prototype.navToSite=function(e){window.open(e)},Object.defineProperty(e.prototype,"logs",{get:function(){return b},enumerable:!0,configurable:!0}),e.prototype.log=function(e){b.push(e)},e.prototype.logMark=function(){var e=new Date;r=e.getTime(),b.push("log-mark: "+e.toTimeString())},e.prototype.logStep=function(e){b.push(e+": "+((new Date).getTime()-r))},i.c([a.l],e.prototype,"user",void 0),e}())}).call(this,n(35))},,function(e,t,n){"use strict";n(24),n(16);var r=n(36),i=n(1),o=n(5),a=(function(){function e(e){void 0===e&&(e=100),this.arr=[],this.dict=new Map,this.maxCount=e}e.prototype.loadIds=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];if(null!==i){var o=this.dict.get(i);void 0===o&&(t.push(i),o={id:i},this.dict.set(i,o))}}this.loadId(t)},e.prototype.get=function(e){if(void 0===e||null===e)return null;var t=this.dict.get(e);return void 0===t&&(this.dict.set(e,{id:e}),this.loadId([e]),t=this.dict.get(e)),t},e.prototype.setItem=function(e,t){void 0===t?(this.dict.set(e,null),this.arr.push({id:e})):(this.dict.set(e,t),this.arr.push(t)),this.arr.length>this.maxCount&&(t=this.arr.shift(),this.dict.delete(t.id))},e.prototype.loadId=function(e){return i.b(this,void 0,void 0,function(){var t,n,r,o,a,s,u,c,l;return i.e(this,function(i){switch(i.label){case 0:return[4,this._loadIds(e)];case 1:if(void 0!==(t=i.sent()))return[3,6];n=0,r=e,i.label=2;case 2:return n<r.length?null===(l=r[n])?[3,4]:[4,this._loadId(l)]:[3,5];case 3:o=i.sent(),this.setItem(l,o),i.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:for(a=function(e){var n=t.find(function(t){return t.id===e});s.setItem(e,n)},s=this,u=0,c=e;u<c.length;u++)l=c[u],a(l);i.label=7;case 7:return[2]}})})},i.c([o.l],e.prototype,"dict",void 0)}(),n(10)),s=n.n(a),u=new(function(){function e(){}return e.prototype.getItem=function(e){return localStorage.getItem(e)},e.prototype.setItem=function(e,t){localStorage.setItem(e,t)},e.prototype.removeItem=function(e){localStorage.removeItem(e)},e}()),c=function(){function e(e,t){this.local=e,this.key=t}return e.prototype.get=function(){try{var e=this.local.getItem(this.key);if(null===e)return;if(void 0===e)return;return JSON.parse(e)}catch(t){return void this.local.removeItem(this.key)}},e.prototype.set=function(e){var t=JSON.stringify(e);this.local.setItem(this.key,t)},e.prototype.remove=function(e){void 0===e?this.local.removeItem(this.key):this.local.removeLocal(e)},e.prototype.child=function(e){return this.local.child(e)},e.prototype.arr=function(e){return this.local.arr(e)},e.prototype.map=function(e){return this.local.map(e)},e}(),l=function(){function e(e){this.name=e,this.caches={},this.locals={}}return e.prototype.getItem=function(e){var t=this.keyForGet(e);if(void 0!==t)return u.getItem(t)},e.prototype.setItem=function(e,t){var n=this.keyForSet(e);u.setItem(n,t)},e.prototype.removeItem=function(e){var t=this.keyForSet(e);void 0!==t&&localStorage.removeItem(t)},e.prototype.arr=function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new h(r)}return n},e.prototype.map=function(e){var t=String(e),n=this.locals[t];if(void 0===n){var r=this.keyForSet(e);this.locals[t]=n=new d(r)}return n},e.prototype.removeLocal=function(e){var t=e.name,n=this.keyForRemove(t);if(void 0!==n){var r=this.locals[t];void 0===r?r=new h(n):this.locals[t]=void 0,r.removeAll()}},e.prototype.child=function(e){var t=String(e),n=this.caches[t];return void 0!==n?n:this.caches[t]=new c(this,e)},e}(),h=function(e){function t(t){var n=e.call(this,t)||this,r=u.getItem(n.name);return n.index=null===r?[]:r.split("\n").map(function(e){return Number(e)}),n}return i.d(t,e),t.prototype.saveIndex=function(){u.setItem(this.name,this.index.join("\n"))},t.prototype.keyForGet=function(e){if(!(s.a.indexOf(this.index,e)<0))return this.name+"."+e},t.prototype.keyForSet=function(e){var t=s.a.indexOf(this.index,e);return t<0?(this.index.unshift(e),this.index.length>500&&this.index.pop()):(this.index.splice(t,1),this.index.unshift(e)),this.saveIndex(),this.name+"."+e},t.prototype.keyForRemove=function(e){var t=s.a.indexOf(this.index,e);if(!(t<0))return this.index.splice(t,1),this.saveIndex(),this.name+"."+e},t.prototype.removeAll=function(){for(var e=0,t=this.index;e<t.length;e++){var n=t[e];u.removeItem(this.name+"."+n)}u.removeItem(this.name),this.index.splice(0)},t.prototype.item=function(e){return this.child(e)},t}(l),d=function(e){function t(t){var n=e.call(this,t)||this;n.max=0,n.index={};var r=u.getItem(n.name);null!==r&&r.split("\n").forEach(function(e){var t=e.indexOf("\t");if(!(t<0)){var r=e.substr(0,t),i=Number(e.substr(t+1));!0!==isNaN(i)&&(n.index[r]=i,i>n.max&&(n.max=i))}});return n}return i.d(t,e),t.prototype.saveIndex=function(){var e=[];for(var t in this.index){var n=this.index[t];void 0!==n&&e.push(t+"\t"+n)}u.setItem(this.name,e.join("\n"))},t.prototype.keyForGet=function(e){var t=this.index[e];if(void 0!==t)return this.name+"."+t},t.prototype.keyForSet=function(e){var t=this.index[e];return void 0===t&&(++this.max,t=this.max,this.index[e]=t,this.saveIndex()),this.name+"."+t},t.prototype.keyForRemove=function(e){var t=this.index[e];if(void 0!==t)return this.index[e]=void 0,this.saveIndex(),this.name+"."+t},t.prototype.removeAll=function(){for(var e in this.index)u.removeItem(this.name+"."+this.index[e]),this.index[e]=void 0;u.removeItem(this.name),this.max=0},t.prototype.item=function(e){return this.child(e)},t}(l),p=["/test","/test/","-test","-test/"];var m,f={testing:m=function(){for(var e=document.location.pathname.toLowerCase(),t=0,n=p;t<n.length;t++){var r=n[t];if(!0===e.endsWith(r))return!0}return!1}(),isDevelopment:!1,localDb:new d(!0===m?"$$":"$")},v=function(){function e(){this.user=f.localDb.child("user"),this.guest=f.localDb.child("guest"),this.unit=f.localDb.child("unit")}return e.prototype.logoutClear=function(){[this.user,this.unit].forEach(function(e){return e.remove()})},e}();n.d(t,"b",function(){return r.a}),n.d(t,"a",function(){return v}),n.d(t,"c",function(){return f})},function(e,t,n){"use strict";function r(e,t){switch(e.substr(0,1)){default:return t;case"$":case"_":return}}function i(e){return JSON.stringify(e,r," ")}var o=n(0),a=function(e,t){return o.createElement(o.Fragment,null,"content: ",JSON.stringify(e))};n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a})},function(e,t,n){"use strict";n.d(t,"i",function(){return d}),n.d(t,"a",function(){return m}),n.d(t,"h",function(){return f}),n.d(t,"j",function(){return g}),n.d(t,"g",function(){return w}),n.d(t,"f",function(){return E}),n.d(t,"c",function(){return C}),n.d(t,"e",function(){return P}),n.d(t,"b",function(){return N}),n.d(t,"d",function(){return x});var r=n(1),i=n(10),o=n.n(i),a=n(3),s=n(16),u=n(17),c=n(19),l=n(25),h={};function d(){for(var e in h)h[e]=void 0}var p={},m=new(function(){function e(){}return Object.defineProperty(e.prototype,"unit",{get:function(){return this._unit},set:function(e){this._unit=e},enumerable:!0,configurable:!0}),e}());function f(){return self!==window.parent}function v(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return console.log("initSubWin: set nav.user",e),t=a.nav.user=e,Object(u.i)(t.id,t.token),[4,a.nav.showAppView()];case 1:return n.sent(),[2]}})})}function b(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,a,s,c,l,h,d;return r.e(this,function(r){switch(r.label){case 0:return void 0===(n=p[e])?[2,{name:t,db:void 0,url:void 0,token:void 0}]:(i=n.unit,o=n.predefinedUnit,(i=i||o)||console.error("no unit defined in unit.json or not logined in",i),a=t.split("/"),s={unit:i,uqOwner:a[0],uqName:a[1]},console.log("uqTokenApi.uq onReceiveAppApiMessage",s),[4,u.k.uq(s)]);case 1:return c=r.sent(),l=c.db,h=c.url,d=c.token,[2,{name:t,db:l,url:h,token:d}]}})})}function y(e){return r.b(this,void 0,void 0,function(){var t,n,i,o,a,s,u;return r.e(this,function(r){if(t=e.apiName,n=e.db,i=e.url,o=e.urlTest,a=e.token,void 0===(s=k[t]))throw"error app api return";return u=l.a.getUrlOrTest(n,i,o),console.log("onAppApiReturn(message:any): url="+i+", real="+u),s.resolve({name:t,db:n,url:u,token:a}),[2]})})}function g(e){if(e){var t=e.split("-"),n=t.length;if(n>0){var r=1;m.hash=t[r++],n>0&&(m.unit=Number(t[r++])),n>1&&(m.page=t[r++]),n>2&&(m.param=t.slice(r++))}}return m}function w(){var e=document.location.hash;if(void 0!==e&&e.length>0){var t=e.lastIndexOf("#tv-");return t<0&&(t=e.lastIndexOf("#tvdebug-")),t}return-1}function E(){var e=w();if(!(e<0))return document.location.hash.substring(e)}function C(e,t,n,r){for(var i;;){if(i=Object(s.a)(),void 0===p[i]){p[i]={hash:i,unit:t};break}}if(e+="#tv-"+i+"-"+t,void 0!==n&&(e+="-"+n,void 0!==r))for(var o=0;o<r.length;o++)e+="-"+r[o];return{url:e,hash:i}}window.addEventListener("message",function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:switch(t=e.data,t.type){case"sub-frame-started":return[3,1];case"ws":return[3,2];case"init-sub-win":return[3,4];case"pop-app":return[3,6];case"center-api":return[3,7];case"center-api-return":return[3,9];case"app-api":return[3,10];case"app-api-return":return[3,12]}return[3,14];case 1:return function(e){var t=e.data,n=e.source;Object(c.c)(n),r=t.hash,i=document.getElementById(r),void 0!==i&&(i.hidden=!0);var r,i;var s=o.a.clone(a.nav.user);s.type="init-sub-win",n.postMessage(s,"*")}(e),[3,15];case 2:return[4,a.nav.onReceive(t.msg)];case 3:return r.sent(),[3,15];case 4:return[4,v(t)];case 5:return r.sent(),[3,15];case 6:return a.nav.navBack(),[3,15];case 7:return[4,T(e.source,t)];case 8:return r.sent(),[3,15];case 9:return function(e){var t=e.callId,n=e.result,r=S[t];if(void 0===r)return;S[t]=void 0,r.resolve(n)}(t),[3,15];case 10:return[4,b(t.hash,t.apiName)];case 11:return n=r.sent(),e.source.postMessage({type:"app-api-return",apiName:t.apiName,db:n.db,url:n.url,token:n.token},"*"),[3,15];case 12:return console.log("app-api-return: %s",JSON.stringify(t)),console.log("await onAppApiReturn(message);"),[4,y(t)];case 13:return r.sent(),[3,15];case 14:return this.console.log("message: %s",JSON.stringify(t)),[3,15];case 15:return[2]}})})});var k={};function P(e,t,n){return r.b(this,void 0,Promise,function(){var i,o,a,s,c,d,p=this;return r.e(this,function(v){switch(v.label){case 0:return f()?[3,2]:(i=function(){var e=m.unit,t=m.predefinedUnit,n=e||t;if(void 0===n)throw"no unit defined in unit.json or not logined in";return n}(),[4,u.k.uq({unit:i,uqOwner:t,uqName:n})]);case 1:return void 0===(o=v.sent()).token&&(o.token=u.f),a=o.db,s=o.url,c=o.urlTest,d=l.a.getUrlOrTest(a,s,c),console.log("realUrl: %s",d),o.url=d,h[e]=o,[2,o];case 2:return console.log("**** before buildAppUq ****",m),void 0!==k[e]?[2]:[2,new Promise(function(t,n){k[e]={resolve:function(n){return r.b(p,void 0,void 0,function(){var i,o,a,s;return r.e(this,function(r){switch(r.label){case 0:return[4,n];case 1:return i=r.sent(),o=i.db,a=i.url,s=i.token,h[e]={name:e,db:o,url:a,token:s},k[e]=void 0,console.log("**** after buildAppUq ****",m),t(),[2]}})})},reject:n},(window.opener||window.parent).postMessage({type:"app-api",apiName:e,hash:m.hash},"*")})]}})})}function N(e){return h[e]}var S={};function x(e,t,n){return r.b(this,void 0,Promise,function(){var i=this;return r.e(this,function(o){switch(o.label){case 0:return console.log("bridgeCenterApi: url=%s, method=%s",e,t),[4,new Promise(function(o,a){return r.b(i,void 0,void 0,function(){var i;return r.e(this,function(r){for(;;)if(i=Object(s.a)(),void 0===S[i]){S[i]={id:i,resolve:o,reject:a};break}return(window.opener||window.parent).postMessage({type:"center-api",callId:i,url:e,method:t,body:n},"*"),[2]})})})];case 1:return[2,o.sent()]}})})}function T(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,a,s;return r.e(this,function(r){switch(r.label){case 0:return n=t.callId,i=t.url,o=t.method,a=t.body,[4,u.e.directCall(i,o,a)];case 1:return s=r.sent(),e.postMessage({type:"center-api-return",callId:n,result:s},"*"),[2]}})})}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(1),i=n(0),o=n(4),a=n(6),s=n.n(a),u=n(10),c=n.n(u),l=n(31),h=100,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bottomTime=0,t.topTime=0,t.onScroll=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,o,a,s,u;return r.e(this,function(r){return t=this.props,n=t.onScroll,i=t.onScrollTop,o=t.onScrollBottom,n&&this.props.onScroll(e),(a=e.target).scrollTop<30&&void 0!==i&&(s=(new Date).getTime())-this.topTime>h&&(this.topTime=s,i()),a.scrollTop+a.offsetHeight>a.scrollHeight-30&&void 0!==o&&(u=(new Date).getTime())-this.bottomTime>h&&(this.bottomTime=u,o()),[2]})})},t}return r.d(t,e),t.prototype.eachChild=function(e,t){var n=this,r=e.props;if(void 0!==r){var o=r.children;void 0!==o&&i.Children.forEach(o,function(e,r){var i=e._$scroll;i&&i(t),console.log(e.toString()),n.eachChild(e,t)})}},t.prototype.render=function(){return i.createElement("main",{className:this.props.className,onScroll:this.onScroll},this.props.children)},t}(i.Component),p=function(e){function t(t){var n,r=e.call(this,t)||this,i=t.tabs;if(void 0===i||0===i.length)return r;r.tabs=i;for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a],l=c.a.clone(u);void 0===n&&!0===l.isSelected?n=l:l.isSelected=!1,l.isMounted=!1,o.push(l)}return r.state={cur:n,tabs:o},r}return r.d(t,e),t.prototype.componentDidMount=function(){return r.b(this,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return void 0===this.tabs?[2]:void 0===(e=this.state.tabs.find(function(e){return!0===e.isSelected}))&&void 0===(e=this.state.tabs[0])?[2]:[4,e.load];case 1:return t.sent()?[4,e.load()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.onTabClick=function(e){return r.b(this,void 0,void 0,function(){var t,n,i,o,a,s;return r.e(this,function(r){switch(r.label){case 0:if(!0===e.isSelected)return[2];for(n=this.state.tabs,i=0,o=n;i<o.length;i++)(a=o[i])===e?(a.isSelected=!0,t=a):a.isSelected=!1;return!0===t.isMounted?[3,2]:void 0===(s=t.load)?[3,2]:[4,s()];case 1:r.sent(),r.label=2;case 2:return this.setState({cur:t,tabs:n}),[2]}})})},t.prototype.onTouchStart=function(e){},t.prototype.renderTabs=function(e){var t=this,n=this.props,r=n.header,o=n.back,a=n.right,u=n.keepHeader,c=n.headerClassName,h=n.tabPosition,p=this.state.cur,m=i.createElement("div",null,this.state.tabs.map(function(e,n){var r,o,a,u=e.icon,c=e.isSelected,l=e.title,h=e.redDot;if(void 0!==u&&(r=i.createElement("img",{src:u})),void 0!==h){var d=h.get();d<0?(a=s()("red-dot"),o=i.createElement("u",null)):d>0&&(a=s()("red-dot","num"),o=i.createElement("u",null,d))}return i.createElement("div",{key:n,className:s()("va-tab",{cur:c}),onClick:function(){return t.onTabClick(e)}},r,i.createElement("div",{className:a},l,o))})),f=!1!==r&&i.createElement(l.a,{back:o,center:!0===u?r:p&&(p.header||p.title),right:a,className:c});return i.createElement("article",{className:"page-container"},f,"top"===h&&m,i.createElement("section",{className:"position-relative"},this.props.sideBar,this.state.tabs.map(function(e,t){var n=e.isSelected,r=e.isMounted,o=e.content;if(!0===n||!0===r)return e.isMounted=!0,i.createElement(d,{key:t,className:s()({invisible:!1===n}),onScroll:e.onScroll,onScrollTop:e.onScrollTop,onScrollBottom:e.onScrollBottom},"function"===typeof o?o():o)})),"top"!==h&&m,e)},t.prototype.renderSingle=function(e){var t=this.props,n=t.back,r=t.header,o=t.right,a=t.onScroll,s=t.onScrollTop,u=t.onScrollBottom,c=t.children,h=t.headerClassName,p=!1!==r&&i.createElement(l.a,{back:n,center:r,right:o,logout:this.props.logout,className:h});return i.createElement("article",{className:"page-container",onTouchStart:this.onTouchStart},p,i.createElement("section",{className:"position-relative"},this.props.sideBar,i.createElement(d,{onScroll:a,onScrollTop:s,onScrollBottom:u},c)),e)},t.prototype.render=function(){var e=this.props.footer,t=void 0!==e&&i.createElement("footer",null,e);return void 0!==this.tabs?this.renderTabs(t):this.renderSingle(t)},t=r.c([o.a],t)}(i.Component)},function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var r=n(0),i=n(4),o=n(12),a=function(){function e(){}return e.prototype.render=function(e){return void 0===this.view?r.createElement("div",null,"??? viewModel \u5fc5\u987b\u5b9a\u4e49 view ???"):r.createElement(this.view,{vm:this,className:e})},e}(),s=Object(i.a)(o.a),u=function(e){return r.createElement("div",{className:"px-3 py-2"},Object(o.b)(e))}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=8;function o(){for(var e=r.length,t="",n=0;n<i;n++)t+=r.charAt(Math.floor(Math.random()*e));return t}},function(e,t,n){"use strict";var r=n(1),i=n(10),o=n.n(i),a=n(13),s=n(9),u=n(11),c=["POST","PUT"],l=function(){function e(e,t,n){var i=this;this.startWait=function(){void 0!==i.ui&&i.ui.startWait()},this.endWait=function(e,t){void 0!==i.ui&&i.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)},this.showError=function(e){return r.b(i,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0===this.ui?[3,2]:[4,this.ui.showError(e)];case 1:t.sent(),t.label=2;case 2:return[2]}})})},this.hostUrl=e,this.apiToken=t,this.ui=n,this.timeout=!0===u.c.isDevelopment?5e5:5e3}return e.prototype.used=function(){this.post("",{})},e.prototype.xcall=function(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,a,s,u,l;return r.e(this,function(r){switch(r.label){case 0:if(n=this.buildOptions(),i=t.headers,o=t.path,a=t.method,void 0!==i)for(u in s=n.headers,i)s.append(u,encodeURI(i[u]));return n.method=a,l=t.buildParams(),c.indexOf(a)>=0&&void 0!==l&&(n.body=JSON.stringify(l)),[4,this.innerFetch(e+o,n)];case 1:return[2,r.sent()]}})})},e.prototype.innerFetchResult=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.innerFetch(e,t)];case 1:return[2,n.sent().res]}})})},e.prototype.get=function(e,t){return void 0===t&&(t=void 0),r.b(this,void 0,Promise,function(){var n,i,o,a,s,u;return r.e(this,function(r){switch(r.label){case 0:if(t&&(n=Object.keys(t)).length>0)for(i="?",o=0,a=n;o<a.length;o++)s=a[o],void 0!==t[s]&&(e+=i+s+"="+t[s],i="&");return(u=this.buildOptions()).method="GET",[4,this.innerFetchResult(e,u)];case 1:return[2,r.sent()]}})})},e.prototype.post=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return(n=this.buildOptions()).method="POST",n.body=JSON.stringify(t),[4,this.innerFetchResult(e,n)];case 1:return[2,r.sent()]}})})},e.prototype.put=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return(n=this.buildOptions()).method="PUT",n.body=JSON.stringify(t),[4,this.innerFetchResult(e,n)];case 1:return[2,r.sent()]}})})},e.prototype.delete=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return(n=this.buildOptions()).method="DELETE",n.body=JSON.stringify(t),[4,this.innerFetchResult(e,n)];case 1:return[2,r.sent()]}})})},e.prototype.fetch=function(e,t,n,i){return r.b(this,void 0,Promise,function(){function o(e){return{channel:a,url:u,options:t,resolve:n,reject:i,error:e}}var a,u,c,l,h,d,p,m=this;return r.e(this,function(f){switch(f.label){case 0:a=this,this.startWait(),u=e,f.label=1;case 1:return f.trys.push([1,6,,8]),console.log("%s %s",t.method,u),c=setTimeout(function(){return a.endWait(e,i)},this.timeout),[4,fetch(encodeURI(u),t)];case 2:if(!1===(l=f.sent()).ok)throw clearTimeout(c),a.endWait(),console.log("call error %s",l.statusText),l.statusText;return(h=l.headers.get("content-type"))&&h.indexOf("json")>=0?[2,l.json().then(function(e){return r.b(m,void 0,void 0,function(){var t;return r.e(this,function(r){switch(r.label){case 0:return clearTimeout(c),a.endWait(),!0===e.ok?("object"!==typeof e||Array.isArray(e),[2,n(e)]):void 0!==(t=e.error)?[3,2]:[4,a.showError(o("not valid tonva json"))];case 1:return r.sent(),[3,4];case 2:return[4,a.showError(o(t))];case 3:r.sent(),i(t),r.label=4;case 4:return[2]}})})}).catch(function(e){return r.b(m,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,a.showError(o(e))];case 1:return t.sent(),[2]}})})})]:[3,3];case 3:return[4,l.text()];case 4:d=f.sent(),clearTimeout(c),a.endWait(),n(d),f.label=5;case 5:return[3,8];case 6:return"string"===typeof(p=f.sent())&&!0===p.toLowerCase().startsWith("unauthorized")?(s.b.logout(),[2]):[4,this.showError(o(p.message))];case 7:return f.sent(),[3,8];case 8:return[2]}})})},e.prototype.callFetch=function(e,t,n){return r.b(this,void 0,Promise,function(){var i,o=this;return r.e(this,function(a){switch(a.label){case 0:return(i=this.buildOptions()).method=t,i.body=n,[4,new Promise(function(t,n){return r.b(o,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.fetch(e,i,t,n)];case 1:return r.sent(),[2]}})})})];case 1:return[2,a.sent()]}})})},e.prototype.buildOptions=function(){return{headers:this.buildHeaders(),method:void 0,body:void 0}},e.prototype.buildHeaders=function(){var e=s.b.language,t=s.b.culture,n=new Headers;n.append("Content-Type","application/json;charset=UTF-8");var r=e;return t&&(r+="-"+t),n.append("Accept-Language",r),this.apiToken&&n.append("Authorization",this.apiToken),n},e}(),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.innerFetch=function(e,t){return r.b(this,void 0,Promise,function(){var n,i=this;return r.e(this,function(o){switch(o.label){case 0:return n=this.hostUrl+e,void 0===this.apiToken&&Object(a.h)()?[4,Object(a.d)(n,t.method,t.body)]:[3,2];case 1:return[2,o.sent()];case 2:return[4,new Promise(function(e,o){return r.b(i,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.fetch(n,t,e,o)];case 1:return r.sent(),[2]}})})})];case 3:return[2,o.sent()]}})})},t}(l),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.innerFetch=function(e,t){return r.b(this,void 0,Promise,function(){var n,i=this;return r.e(this,function(o){switch(o.label){case 0:return n=this.hostUrl+e,[4,new Promise(function(e,o){return r.b(i,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.fetch(n,t,e,o)];case 1:return r.sent(),[2]}})})})];case 1:return[2,o.sent()]}})})},t}(l),p=function(){function e(){}return e.prototype.startWait=function(){s.b.startWait()},e.prototype.endWait=function(){s.b.endWait()},e.prototype.showError=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return s.b.endWait(),[4,s.b.onError(e)];case 1:return t.sent(),[2]}})})},e.prototype.showUpgradeUq=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,s.b.showUpgradeUq(e,t)];case 1:return n.sent(),[2]}})})},e}(),m=n(30),f=n(25),v=n(3);n.d(t,"h",function(){return g}),n.d(t,"d",function(){return w}),n.d(t,"c",function(){return k}),n.d(t,"j",function(){return P}),n.d(t,"f",function(){return x}),n.d(t,"i",function(){return I}),n.d(t,"a",function(){return F}),n.d(t,"k",function(){return V}),n.d(t,"e",function(){return q}),n.d(t,"b",function(){return j}),n.d(t,"g",function(){return R});var b={},y={};function g(){b={},y={},E={},Object(a.i)()}var w=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return r&&(a.uqOwner=n,a.uqName=r,a.uq=n+"/"+r),a.access=i,a.showWaiting=o,a}return r.d(t,e),t.prototype.init=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,Object(a.e)(this.uq,this.uqOwner,this.uqName)];case 1:return e.sent(),[2]}})})},t.prototype.getHttpChannel=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o,s;return r.e(this,function(r){switch(r.label){case 0:return!0===this.showWaiting||void 0===this.showWaiting?(e=b,t=new p):e=y,void 0!==(n=e[this.uq])?[2,n]:(i=Object(a.b)(this.uq))?[3,2]:[4,this.init()];case 1:r.sent(),i=Object(a.b)(this.uq),r.label=2;case 2:return o=i.url,s=i.token,this.token=s,n=new d(o,s,t),[2,e[this.uq]=n]}})})},t.prototype.loadAccess=function(){return r.b(this,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return e=void 0===this.access?"":this.access.join("|"),[4,this.get("access",{acc:e})];case 1:return[2,t.sent()]}})})},t.prototype.schema=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("schema/"+e)];case 1:return[2,t.sent()]}})})},t.prototype.queueModify=function(e,t,n){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.post("queue-modify",{start:e,page:t,entities:n})];case 1:return[2,r.sent()]}})})},t}(m.a),E={};var C,k=function(e){function t(t){var n=e.call(this,"tv/",void 0,void 0,void 0,!0)||this;return n.unitId=t,n}return r.d(t,e),t.prototype.getHttpChannel=function(){return r.b(this,void 0,Promise,function(){var e,t,n;return r.e(this,function(r){switch(r.label){case 0:return void 0!==(e=E[this.unitId])?[2,e]:(t=E,n=this.unitId,[4,this.buildChannel()]);case 1:return[2,t[n]=r.sent()]}})})},t.prototype.buildChannel=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o,a,s;return r.e(this,function(r){switch(r.label){case 0:return e=new p,[4,new j("tv/",void 0).unitxUq(this.unitId)];case 1:return t=r.sent(),n=t.token,i=t.db,o=t.url,a=t.urlTest,s=f.a.getUrlOrTest(i,o,a),this.token=n,[2,new d(s,n,e)]}})})},t}(w);function P(e){console.log("setCenterUrl %s",e),C=e,x=void 0,S=void 0,N=void 0}var N,S,x=void 0,T=0;function I(e,t){T=e,x=t,console.log("setCenterToken %s",t),S=void 0,N=void 0}var F=function(e){function t(t,n){return e.call(this,t,n)||this}return r.d(t,e),t.prototype.getHttpChannel=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return[2,!0===this.showWaiting||void 0===this.showWaiting?void 0!==N?N:N=new h(C,x,new p):void 0!==S?S:S=new h(C,x)]})})},t}(m.a),A="uqTokens",V=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localMap=u.c.localDb.map(A),t}return r.d(t,e),t.prototype.uq=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,a,s,u,c,l,h,d,p,m,v,b,y;return r.e(this,function(r){switch(r.label){case 0:t=e.uqOwner,n=e.uqName,i=t+"/"+n,a=this.localMap.child(i),r.label=1;case 1:return r.trys.push([1,3,,4]),void 0!==(s=a.get())&&(m=s.unit,u=s.user,m===e.unit&&u===T||(a.remove(),s=void 0)),c=Math.floor(Date.now()/1e3),void 0!==s&&(l=s.tick,void 0!==(h=s.value)&&c-l<86400)?[2,o.a.clone(h)]:((d=o.a.clone(e)).testing=f.a.testing,[4,this.get("app-uq",d)]);case 2:if(void 0===(p=r.sent()))throw m=e.unit,v=e.uqOwner,b=e.uqName,"center get app-uq(unit="+m+", '"+v+"/"+b+"') - not exists or no unit-service";return s={unit:e.unit,user:T,tick:c,value:p},a.set(s),[2,o.a.clone(p)];case 3:throw y=r.sent(),a.remove(),y;case 4:return[2]}})})},t}(F))("tv/tie/",void 0),q=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.directCall=function(e,t,n){return this.call(e,t,n)},t}(F))("",void 0),O="appUqs",j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.local=u.c.localDb.item(O),t}return r.d(t,e),t.prototype.uqs=function(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,a;return r.e(this,function(r){switch(r.label){case 0:return(i=this.local.get())&&(o=i.appOwner,a=i.appName,e===o&&t===a&&(n=i)),void 0!==n?[3,2]:[4,this.uqsPure(e,t)];case 1:(n=r.sent()).appName=t,n.appOwner=e,this.local.set(n),r.label=2;case 2:return[2,n]}})})},t.prototype.uqsPure=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.get("tie/app-uqs",{appOwner:e,appName:t})];case 1:return[2,n.sent()]}})})},t.prototype.isOkCheckUqs=function(e,t){return r.b(this,void 0,Promise,function(){var n,i,a,s,u,c,l,h;return r.e(this,function(r){switch(r.label){case 0:return[4,this.uqsPure(e,t)];case 1:if(n=r.sent(),i=this.local.get(),a=i.id,s=i.uqs,u=n.id,c=n.uqs,a!==u)return[2,!1];if(s.length!==c.length)return[2,!1];for(l=s.length,h=0;h<l;h++)if(!1===o.a.isMatch(s[h],c[h]))return[2,!1];return[2,!0]}})})},t.prototype.checkUqs=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.isOkCheckUqs(e,t)];case 1:return!1===(n=r.sent())&&(this.local.remove(),v.nav.start()),[2,n]}})})},t.prototype.unitxUq=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("tie/unitx-uq",{unit:e})];case 1:return[2,t.sent()]}})})},t.prototype.changePassword=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.post("tie/reset-password",e)];case 1:return[2,t.sent()]}})})},t}(F);function R(e,t){return r.b(this,void 0,Promise,function(){var n,i;return r.e(this,function(r){switch(r.label){case 0:return[4,(n=new j("tv/",void 0)).uqs(e,t)];case 1:return i=r.sent(),[4,n.checkUqs(e,t)];case 2:return r.sent(),[2,i]}})})}},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(6),a=n.n(o),s=function(e){function t(t){var n=e.call(this)||this;return n.onClick=function(){return r.b(n,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.controller.start()];case 1:return e.sent(),[2]}})})},n.controller=t,n.icon=t.icon,n.label=t.label,n}return r.d(t,e),t.prototype.render=function(e){return i.createElement("div",{className:a()("px-3","py-2","align-items-center","cursor-pointer",e),onClick:this.onClick},this.icon," \xa0 ",this.label)},t}(function(){return function(){}}());n.d(t,"a",function(){return s})},function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return l});var r,i=n(1);function o(e){r=e}function a(e){window.top.postMessage({type:"ws",msg:e},"*")}var s=function(){function e(){this.handlerSeed=1,this.anyHandlers={},this.msgHandlers={}}return e.prototype.onWsReceiveAny=function(e){var t=this.handlerSeed++;return this.anyHandlers[t]=e,t},e.prototype.onWsReceive=function(e,t){var n=this.handlerSeed++;return this.msgHandlers[n]={type:e,handler:t},n},e.prototype.endWsReceive=function(e){delete this.anyHandlers[e],delete this.msgHandlers[e]},e.prototype.receive=function(e){return i.b(this,void 0,void 0,function(){var t,n,r,o,a,s,u,c,l,h,d;return i.e(this,function(i){switch(i.label){case 0:for(r in t=e.$type,n=[],this.anyHandlers)n.push(r);o=0,i.label=1;case 1:return o<n.length?(c=n[o],[4,this.anyHandlers[c](e)]):[3,4];case 2:i.sent(),i.label=3;case 3:return o++,[3,1];case 4:for(s in a=[],this.msgHandlers)a.push(s);u=0,i.label=5;case 5:return u<a.length?(c=a[u],l=this.msgHandlers[c],h=l.type,d=l.handler,h!==t?[3,7]:[4,d(e)]):[3,8];case 6:i.sent(),i.label=7;case 7:return u++,[3,5];case 8:return[2]}})})},e}(),u=1,c=new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wsBaseId="WsBridge seed "+u++,t}return i.d(t,e),t}(s)),l=function(e){function t(t,n){var r=e.call(this)||this;return r.wsBaseId="WSChannel seed "+u++,r.wsHost=t,r.token=n,r}return i.d(t,e),t.setCenterToken=function(e){t.centerToken=e},t.prototype.connect=function(){var e=this;if(void 0===this.ws){var n=this;return new Promise(function(r,o){var a=new WebSocket(e.wsHost,e.token||t.centerToken);console.log("connect webSocket %s",e.wsHost),a.onopen=function(t){console.log("webSocket connected %s",e.wsHost),n.ws=a,r()},a.onerror=function(e){o("webSocket can't open!")},a.onmessage=function(t){return i.b(e,void 0,void 0,function(){return i.e(this,function(e){switch(e.label){case 0:return[4,n.wsMessage(t)];case 1:return[2,e.sent()]}})})},a.onclose=function(e){n.ws=void 0,console.log("webSocket closed!")}})}},t.prototype.close=function(){void 0!==this.ws&&(this.ws.close(),this.ws=void 0)},t.prototype.wsMessage=function(e){return i.b(this,void 0,Promise,function(){var t,n;return i.e(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),console.log("websocket message: %s",e.data),function(e){void 0!==r&&r.postMessage({type:"ws",msg:e},"*")}(t=JSON.parse(e.data)),[4,this.receive(t)];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),console.log("ws msg error: ",n),[3,3];case 3:return[2]}})})},t.prototype.sendWs=function(e){var t=this;this.connect().then(function(){t.ws.send(e)})},t}(s)},function(e,t,n){"use strict";var r=n(1),i=n(10),o=n.n(i),a=n(8),s=(n(49),function(){function e(e,t,n){this.ver=0,this.fieldMaps={},this.uq=e,this.name=t,this.typeId=n,this.sys=this.name.indexOf("$")>=0,this.cache=this.uq.localMap.item(this.name),this.uqApi=this.uq.uqApi}return Object.defineProperty(e.prototype,"sName",{get:function(){return this.jName||this.name},enumerable:!0,configurable:!0}),e.prototype.fieldMap=function(e){void 0===e&&(e="$");var t=this.fieldMaps[e];if(void 0===t){var n=void 0;if("$"===e)n=this.fields;else if(void 0!==this.arrFields){void 0!==(r=this.arrFields.find(function(t){return t.name===e}))&&(n=r.fields)}else if(void 0!==this.returns){var r;void 0!==(r=this.returns.find(function(t){return t.name===e}))&&(n=r.fields)}if(void 0===n)return{};t={};for(var i=0,o=n;i<o.length;i++){var a=o[i];t[a.name]=a}this.fieldMaps[e]=t}return t},e.prototype.loadSchema=function(){return r.b(this,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return void 0!==this.schema?[2]:(e=this.cache.get())?[3,2]:[4,this.uq.loadEntitySchema(this.name)];case 1:e=t.sent(),t.label=2;case 2:return this.setSchema(e),this.buildFieldsTuid(),[2]}})})},e.prototype.clearSchema=function(){this.schema=void 0},e.prototype.setSchema=function(e){if(void 0!==e){var t=e.name,n=e.version;this.ver=n||0,t!==this.name&&(this.jName=t),this.cache.set(e),this.schema=e}},e.prototype.buildFieldsTuid=function(){var e=this.schema,t=e.fields,n=e.arrs,r=e.returns;this.uq.buildFieldTuid(this.fields=t),this.uq.buildArrFieldsTuid(this.arrFields=n,t),this.uq.buildArrFieldsTuid(this.returns=r,t)},e.prototype.schemaStringify=function(){return JSON.stringify(this.schema,function(e,t){if("_tuid"!==e)return t},4)},e.prototype.tuidFromName=function(e,t){if(void 0!==this.schema){var n=this.schema,r=n.fields,i=n.arrs,o=this.uq,a=e.toLowerCase();if(void 0===t)return c(a,r);if(void 0!==i){var s=t.toLowerCase(),u=i.find(function(e){return e.name===s});if(void 0!==u)return c(a,u.fields)}}function c(e,t){if(void 0!==t){var n=t.find(function(t){return t.name===e});if(void 0!==n)return o.getTuid(n.tuid)}}},e.prototype.buildParams=function(e){var t={},n=this.fields;void 0!==n&&this.buildFieldsParams(t,n,e);var r=this.arrFields;if(void 0!==r)for(var i=0,o=r;i<o.length;i++){var a=o[i],s=a.name,u=a.fields;if(void 0!==e[s]){var c=[];t[s]=c;for(var l=0,h=e;l<h.length;l++){var d=h[l],p={};this.buildFieldsParams(p,u,d),c.push(p)}}}return t},e.prototype.buildFieldsParams=function(e,t,n){for(var r=0,i=t;r<i.length;r++){var o=i[r],a=o.name,s=o.type,u=n[a],c=void 0;if("datetime"===s)c=this.buildDateTimeParam(u);else switch(typeof u){default:c=u;break;case"object":var l=o._tuid;c=void 0===l?u.id:l.getIdFromObj(u)}e[a]=c}},e.prototype.buildDateTimeParam=function(e){var t;switch(typeof e){default:throw"escape datetime field in pack data error: value="+e;case"undefined":return;case"object":t=e;break;case"string":case"number":t=new Date(e)}return Math.floor(t.getTime()/1e3)},e.prototype.buildDateParam=function(e){var t;switch(typeof e){default:throw"escape datetime field in pack data error: value="+e;case"undefined":return;case"string":return e;case"object":t=e;break;case"number":t=new Date(e)}var n=t.toISOString(),r=n.indexOf("T");return r>0?n.substr(0,r):n},e.prototype.pack=function(e){var t=[],n=this.fields;void 0!==n&&this.packRow(t,n,e);var r=this.arrFields;if(void 0!==r)for(var i=0,o=r;i<o.length;i++){var a=o[i];this.packArr(t,a.fields,e[a.name])}return t.join("")},e.prototype.escape=function(e,t){var n=e[t.name];switch(t.type){case"datetime":return this.buildDateTimeParam(n);default:switch(typeof n){default:return n;case"object":var r=t._tuid;return void 0===r?n.id:r.getIdFromObj(n);case"string":for(var i=n.length,o="",a=0,s=0;s<i;s++){switch(n.charCodeAt(s)){case 9:o+=n.substring(a,s)+"\\t",a=s+1;break;case 10:o+=n.substring(a,s)+"\\n",a=s+1}}return o+n.substring(a);case"undefined":return""}}},e.prototype.packRow=function(e,t,n){var r=t.length;if(0!==r){var i="";i+=this.escape(n,t[0]);for(var o=1;o<r;o++){var a=t[o];i+="\t"+this.escape(n,a)}e.push(i+"\n")}},e.prototype.packArr=function(e,t,n){if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r];this.packRow(e,t,o)}e.push("\n")},e.prototype.cacheFieldsInValue=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i.name,a=i._tuid;if(void 0!==a){var s=e[o];e[o]=a.boxId(s)}}},e.prototype.unpackTuidIdsOfFields=function(e,t){if(void 0===t)return e;for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];if(o)for(var a=o.length,s=0;s<a;){if(10===o.charCodeAt(s)){++s;break}var u={};s=this.unpackRow(u,t,o,s),n.push(u)}}return n},e.prototype.unpackSheet=function(e){var t={},n=this.fields,r=0;void 0!==n&&(r=this.unpackRow(t,n,e,r));var i=this.arrFields;if(void 0!==i)for(var o=0,a=i;o<a.length;o++){var s=a[o];r=this.unpackArr(t,s,e,r)}return t},e.prototype.unpackReturns=function(e){var t={},n=0,r=this.returns;if(void 0!==r)for(var i=0,o=r;i<o.length;i++){var a=o[i];n=this.unpackArr(t,a,e,n)}return t},e.prototype.unpackRow=function(e,t,n,r){for(var i=0,o=0,a=r,s=0,u=n.length,c=t.length;r<u;r++)if(i=o,9===(o=n.charCodeAt(r))){var l=t[s],h=l.name;if(8!==i){if(r>a){var d=n.substring(a,r);e[h]=this.to(e,d,l)}}else e[h]=null;if(a=r+1,++s>=c)return(r=n.indexOf("\n",a))>=0?++r:r=u,r}else if(10===o){var p=t[s],m=p.name;if(8!==i){if(r>a){d=n.substring(a,r);e[m]=this.to(e,d,p)}}else e[m]=null;return++s,++r}var f=t[s],v=f.name;if(8!==i){d=n.substring(a);e[v]=this.to(e,d,f)}return u},e.prototype.to=function(e,t,n){switch(n.type){default:return t;case"datetime":case"time":var r=Number(t);return!0===isNaN(r)?new Date(t):new Date(1e3*r);case"date":var i=t.split("-");return new Date(Number(i[0]),Number(i[1])-1,Number(i[2]));case"tinyint":case"smallint":case"int":case"bigint":case"dec":return Number(t);case"id":var o=Number(t),a=n._tuid;return void 0===a?o:a.boxId(o)}},e.prototype.unpackArr=function(e,t,n,r){for(var i=[],o=n.length,a=t.name,s=t.fields;r<o;){if(10===n.charCodeAt(r)){++r;break}var u={};i.push(u),r=this.unpackRow(u,s,n,r)}return e[a]=i,r},e}()),u=function(e){function t(t,n){var r=e.call(this,n)||this;return r.tries=0,r.entity=t,r}return r.d(t,e),t.prototype.request=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.entity.loadSchema()];case 1:return e.sent(),[4,this.innerRequest()];case 2:return[2,e.sent()]}})})},t.prototype.innerCall=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.entity.uqApi.xcall(this)];case 1:return[2,e.sent()]}})})},t.prototype.innerRequest=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i;return r.e(this,function(r){switch(r.label){case 0:return[4,this.innerCall()];case 1:return e=r.sent(),t=e.$uq,n=e.$modify,i=e.res,this.entity.uq.pullModify(n),void 0===t?[2,this.xresult(i)]:[4,this.retry(t)];case 2:return[2,r.sent()]}})})},t.prototype.xresult=function(e){return e},Object.defineProperty(t.prototype,"headers",{get:function(){var e=this.entity,t=e.ver;return{uq:""+e.uq.uqVersion,en:""+t}},enumerable:!0,configurable:!0}),t.prototype.retry=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:if(++this.tries,this.tries>5)throw"can not get right uq response schema, 5 tries";return this.rebuildSchema(e),[4,this.innerRequest()];case 1:return[2,t.sent()]}})})},t.prototype.rebuildSchema=function(e){var t=e.uq,n=e.entity;void 0!==t&&this.entity.uq.buildEntities(t),void 0!==n&&this.entity.setSchema(n)},t}(a.a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(u),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"query/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.xresult=function(e){return this.entity.unpackReturns(e)},t.prototype.buildParams=function(){return this.entity.buildParams(this.params)},t}(u),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"query-page/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e,t=this.params,n=t.pageStart,r=t.pageSize,i=t.params;return(e=void 0===i?{key:""}:this.entity.buildParams(i)).$pageStart=n,e.$pageSize=r,e},t.prototype.xresult=function(e){return this.entity.unpackReturns(e).$page},t}(u),d=n(5),p=n(78),m=function(){function e(e){this.queue=[],this.cache=d.l.map({},{deep:!1}),this.waitingIds=[],this.divName=void 0,this.tuidInner=e,this.initLocalArr()}return e.prototype.initLocalArr=function(){this.localArr=this.tuidInner.cache.arr(this.tuidInner.name+".ids")},e.prototype.useId=function(e,t){if(void 0!==e&&0!==e&&!1!==Object(p.isNumber)(e))if(!0!==this.cache.has(e))if(this.tuidInner.cacheTuids(!0===t?70:20),this.cache.set(e,e),this.waitingIds.findIndex(function(t){return t===e})>=0)this.moveToHead(e);else{if(this.queue.length>=1e3){var n=this.queue.shift();if(n===e)return void this.queue.push(n);if(!0===this.cache.has(n))this.cache.delete(n);else{var r=this.waitingIds.findIndex(function(e){return e===n});this.waitingIds.splice(r,1)}}this.waitingIds.push(e),this.queue.push(e)}else this.moveToHead(e)},e.prototype.moveToHead=function(e){var t=this.queue.findIndex(function(t){return t===e});this.queue.splice(t,1),this.queue.push(e)},e.prototype.getValue=function(e){return this.cache.get(e)},e.prototype.remove=function(e){this.cache.delete(e);var t=this.queue.findIndex(function(t){return t===e});this.queue.splice(t,1)},e.prototype.valueFromId=function(e){var t;switch(typeof e){case"object":t=e.id;break;case"number":t=e;break;default:return}return this.getValue(t)},e.prototype.resetCache=function(e){this.remove(e),this.useId(e)},e.prototype.cacheValue=function(e){if(void 0===e)return!1;var t=this.getIdFromObj(e);if(void 0===t)return!1;var n=this.waitingIds.findIndex(function(e){return e===t});return n>=0&&this.waitingIds.splice(n,1),this.cache.set(t,e),!0},e.prototype.getIdFromObj=function(e){return this.tuidInner.getIdFromObj(e)},e.prototype.cacheIds=function(){return r.b(this,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return 0===this.waitingIds.length?[2]:[4,this.loadIds()];case 1:return e=t.sent(),[4,this.cacheIdValues(e)];case 2:return t.sent(),[2]}})})},e.prototype.cacheIdValues=function(e){return r.b(this,void 0,void 0,function(){var t,n,i,o;return r.e(this,function(r){if(void 0===e)return[2];for(t=this.unpackTuidIds(e),n=0,i=t;n<i.length;n++)o=i[n],!1!==this.cacheValue(o)&&this.cacheTuidFieldValues(o);return[2]})})},e.prototype.modifyIds=function(e){return r.b(this,void 0,Promise,function(){var t,n,i=this;return r.e(this,function(r){switch(r.label){case 0:return[4,this.loadTuidIdsOrLocal(e)];case 1:return t=r.sent(),0===(n=t.filter(function(e){var t=e.indexOf("\t");t<0&&(t=e.length);var n=Number(e.substr(0,t));return void 0!==i.localArr.getItem(n)})).length?[2]:[4,this.cacheIdValues(n)];case 2:return r.sent(),[2]}})})},e.prototype.loadIds=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.loadTuidIdsOrLocal(this.waitingIds)];case 1:return[2,e.sent()]}})})},e.prototype.unpackTuidIds=function(e){return this.tuidInner.unpackTuidIds(e)},e.prototype.cacheTuidFieldValues=function(e){this.tuidInner.cacheTuidFieldValues(e)},e.prototype.assureObj=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:switch(typeof this.cache.get(e)){case"object":return[2];case"number":this.cache.set(e,e)}return[4,this.loadTuidIdsOrLocal([e])];case 1:return t=n.sent(),[4,this.cacheIdValues(t)];case 2:return n.sent(),[2]}})})},e.prototype.loadTuidIdsOrLocal=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,a,s,u,c,l,h,d,p;return r.e(this,function(r){switch(r.label){case 0:for(t=[],n=[],i=0,a=e;i<a.length;i++)s=a[i],void 0===(u=this.localArr.getItem(s))?n.push(s):t.push(u);return(c=n.length)>0?[4,this.tuidInner.loadTuidIds(this.divName,n)]:[3,2];case 1:for(l=r.sent(),h=function(e){var r=l[e];if(!r)return"continue";var i=r.indexOf("\t");i<0&&(i=r.length);var a=Number(r.substr(0,i));o.a.remove(n,function(e){return e===a}),t.push(r),d.localArr.setItem(a,r)},d=this,p=0;p<c;p++)h(p);for(c=n.length,p=0;p<c;p++)this.localArr.setItem(n[p],"");r.label=2;case 2:return[2,t]}})})},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.div=n,r.divName=n.name,r.localArr=t.cache.arr(t.name+".ids."+r.divName),r}return r.d(t,e),t.prototype.initLocalArr=function(){},t.prototype.getIdFromObj=function(e){return this.div.getIdFromObj(e)},t.prototype.unpackTuidIds=function(e){return this.div.unpackTuidIds(e)},t.prototype.cacheTuidFieldValues=function(e){this.div.cacheTuidFieldValues(e)},t}(m),v=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.typeName="tuid",i.isImport=!1,i}return r.d(t,e),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t);var n=t.id;this.idName=n},t.prototype.buildTuidBox=function(){return new x(this)},t.prototype.getIdFromObj=function(e){return e[this.idName]},t.prototype.cacheIds=function(){},t.prototype.modifyIds=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return[2]})})},t}(s),b=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.idCache=new m(i),i.localArr=i.cache.arr(i.name+".whole"),!0===t.newVersion&&i.localArr.removeAll(),i}return r.d(t,e),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t);var n=t.arrs;if(void 0!==n){this.divs={};for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o.name,s=new T(this.uq,this,a);this.divs[a]=s,s.setSchema(o),s.buildFieldsTuid()}}},t.prototype.useId=function(e,t){this.idCache.useId(e,t)},t.prototype.boxId=function(e){if("object"===typeof e)return e;this.useId(e);var t=this.uq.createBoxId;return t?t(this,e):{id:e}},t.prototype.valueFromId=function(e){return this.idCache.getValue(e)},t.prototype.assureBox=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.idCache.assureObj(e)];case 1:return t.sent(),[2]}})})},t.prototype.cacheIds=function(){if(this.idCache.cacheIds(),void 0!==this.divs)for(var e in this.divs)this.divs[e].cacheIds()},t.prototype.modifyIds=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.idCache.modifyIds(e)];case 1:return t.sent(),[2]}})})},t.prototype.cacheTuids=function(e){this.uq.cacheTuids(e)},Object.defineProperty(t.prototype,"hasDiv",{get:function(){return void 0!==this.divs},enumerable:!0,configurable:!0}),t.prototype.div=function(e){return this.divs&&this.divs[e]},t.prototype.loadTuidIds=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return[4,new w(this,{divName:e,ids:t}).request()];case 1:return(n=r.sent()).length>0&&(this.cached=!0),[2,n]}})})},t.prototype.loadMain=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return"object"===typeof e&&(e=e.id),[4,this.idCache.assureObj(e)];case 1:return t.sent(),[2,this.idCache.valueFromId(e)]}})})},t.prototype.load=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,o,a,s,u,c;return r.e(this,function(r){switch(r.label){case 0:return void 0===e||0===e?[2]:("object"===typeof e&&(e=e.id),(t=this.localArr.getItem(e))?(n=JSON.parse(t),[3,3]):[3,1]);case 1:return[4,new g(this,e).request()];case 2:void 0!==(n=r.sent())&&this.localArr.setItem(e,JSON.stringify(n)),r.label=3;case 3:if(void 0===n)return[2];for(i=0,o=this.schema.fields;i<o.length;i++)a=o[i],void 0!==(s=a.tuid)&&void 0!==(u=this.uq.getTuid(s))&&(c=a.name,n[c]=u.boxId(n[c]));return this.idCache.cacheValue(n),this.cacheTuidFieldValues(n),[2,n]}})})},t.prototype.cacheTuidFieldValues=function(e){var t=this.schema,n=t.fields,r=t.arrs;if(this.cacheFieldsInValue(e,n),void 0!==r)for(var i=0,o=r;i<o.length;i++){var a=o[i],s=a.name,u=a.fields,c=e[s];if(void 0!==c)for(var l=this.div(s),h=0,d=c;h<d.length;h++){var p=d[h];l.cacheValue(p),this.cacheFieldsInValue(p,u)}}},t.prototype.buildFieldsTuid=function(){e.prototype.buildFieldsTuid.call(this);var t=this.schema.mainFields;this.uq.buildFieldTuid(this.cacheFields=t||this.fields)},t.prototype.unpackTuidIds=function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)},t.prototype.save=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){return n=new E(this,{id:e,props:t}).request(),void 0!==e&&(this.idCache.remove(e),this.localArr.removeItem(e)),[2,n]})})},t.prototype.search=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.searchArr(void 0,e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.searchArr=function(e,t,n,i){return r.b(this,void 0,Promise,function(){var o,a,s,u,c;return r.e(this,function(r){switch(r.label){case 0:return[4,new C(this,{arr:void 0,owner:e,key:t,pageStart:n,pageSize:i}).request()];case 1:for(o=r.sent(),a=this.schema.fields,s=0,u=o;s<u.length;s++)c=u[s],this.cacheFieldsInValue(c,a);return[2,o]}})})},t.prototype.loadArr=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return void 0===n||0===n?[2]:[4,new k(this,{arr:e,owner:t,id:n}).request()];case 1:return[2,r.sent()]}})})},t.prototype.saveArr=function(e,t,n,i){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new P(this,{arr:e,owner:t,id:n,props:i}).request()];case 1:return[2,r.sent()]}})})},t.prototype.posArr=function(e,t,n,i){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new N(this,{arr:e,owner:t,id:n,order:i}).request()];case 1:return[2,r.sent()]}})})},t}(v),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(u),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"tuid/"+this.entity.name+"/"+this.params},enumerable:!0,configurable:!0}),t}(y),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.params.divName;return"tuidids/"+this.entity.name+"/"+(void 0!==e?e:"$")},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){return this.params.ids},t.prototype.xresult=function(e){return e.split("\n")},t}(y),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"tuid/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e=this.entity.schema,t=e.fields,n=e.arrs,r=this.params,i=r.id,o=r.props,a={$id:i};if(this.transParams(a,o,t),void 0!==n)for(var s=0,u=n;s<u.length;s++){var c=u[s],l=c.name,h=[],d=c.fields,p=o[l];if(void 0!==p)for(var m=0,f=p;m<f.length;m++){var v=f[m],b={};this.transParams(b,v,d),h.push(b)}a[l]=h}return a},t.prototype.transParams=function(e,t,n){if(void 0!==t)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o.name,s=o.tuid,u=o.type,c=t[a];if(void 0!==s)"object"===typeof c&&null!==c&&(c=c.id);else switch(u){case"date":c=this.entity.buildDateParam(c);break;case"datetime":c=this.entity.buildDateTimeParam(c)}e[a]=c}},t}(y),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"tuids/"+this.entity.name},enumerable:!0,configurable:!0}),t}(y),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.params,t=e.arr,n=e.owner,r=e.id;return"tuid-arr/"+this.entity.name+"/"+n+"/"+t+"/"+r},enumerable:!0,configurable:!0}),t}(y),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr/"+this.entity.name+"/"+n+"/"+t+"/"},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e=this.params,t=e.id,n=e.props,r=o.a.clone(n);return r.$id=t,r},t}(y),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.params,t=e.arr,n=e.owner;return"tuid-arr-pos/"+this.entity.name+"/"+n+"/"+t+"/"},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e=this.params;return{bid:e.id,$order:e.order}},t}(y),S=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r)||this;return o.isImport=!0,o.from=i,o}return r.d(t,e),t.prototype.setFrom=function(e){this.tuidLocal=e},t.prototype.useId=function(e){this.tuidLocal.useId(e)},t.prototype.boxId=function(e){return this.tuidLocal.boxId(e)},t.prototype.valueFromId=function(e){return this.tuidLocal.valueFromId(e)},t.prototype.assureBox=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.tuidLocal.assureBox(e)];case 1:return t.sent(),[2]}})})},Object.defineProperty(t.prototype,"hasDiv",{get:function(){return this.tuidLocal.hasDiv},enumerable:!0,configurable:!0}),t.prototype.div=function(e){return this.tuidLocal.div(e)},t.prototype.loadMain=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.tuidLocal.loadMain(e)];case 1:return[2,t.sent()]}})})},t.prototype.load=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.tuidLocal.load(e)];case 1:return[2,t.sent()]}})})},t.prototype.save=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.tuidLocal.save(e,t)];case 1:return[2,n.sent()]}})})},t.prototype.search=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.search(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.searchArr=function(e,t,n,i){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.searchArr(e,t,n,i)];case 1:return[2,r.sent()]}})})},t.prototype.loadArr=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.loadArr(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.saveArr=function(e,t,n,i){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.saveArr(e,t,n,i)];case 1:return r.sent(),[2]}})})},t.prototype.posArr=function(e,t,n,i){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuidLocal.posArr(e,t,n,i)];case 1:return r.sent(),[2]}})})},t}(v),x=function(){function e(e){this.ownerField=void 0,this.tuid=e}return e.prototype.boxId=function(e){return this.tuid.boxId(e)},e.prototype.getIdFromObj=function(e){return this.tuid.getIdFromObj(e)},e.prototype.useId=function(e){return this.tuid.useId(e)},e.prototype.showInfo=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return alert("showInfo not implemented"),[2]})})},e}(),T=function(e){function t(t,n,r){var i=e.call(this,t,r,0)||this;return i.typeName="div",i.tuid=n,i.idName="id",i.idCache=new f(n,i),i}return r.d(t,e),Object.defineProperty(t.prototype,"owner",{get:function(){return this.tuid},enumerable:!0,configurable:!0}),t.prototype.buildFieldsTuid=function(){e.prototype.buildFieldsTuid.call(this);var t=this.schema.mainFields;this.uq.buildFieldTuid(this.cacheFields=t)},t.prototype.buildTuidDivBox=function(e){return new I(this.tuid,this,e)},t.prototype.getIdFromObj=function(e){return e[this.idName]},t.prototype.cacheValue=function(e){this.idCache.cacheValue(e)},t.prototype.useId=function(e,t){this.idCache.useId(e,t)},t.prototype.valueFromId=function(e){return this.idCache.getValue(e)},t.prototype.assureBox=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.idCache.assureObj(e)];case 1:return t.sent(),[2]}})})},t.prototype.cacheIds=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.idCache.cacheIds()];case 1:return e.sent(),[2]}})})},t.prototype.cacheTuidFieldValues=function(e){var t=this.schema.fields;this.cacheFieldsInValue(e,t)},t.prototype.unpackTuidIds=function(e){return this.unpackTuidIdsOfFields(e,this.cacheFields)},t}(b),I=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.div=n,i.ownerField=r,i}return r.d(t,e),t.prototype.boxId=function(e){return this.div.boxId(e)},t.prototype.getIdFromObj=function(e){return this.div.getIdFromObj(e)},t.prototype.useId=function(e){return this.div.useId(e)},t}(x),F=function(){function e(e){var t=this;this.loadIds=function(){t.clearCacheTimer();var e=t.uq.tuids;for(var n in e){e[n].cacheIds()}},this.uq=e}return e.prototype.cacheTuids=function(e){this.clearCacheTimer(),this.cacheTimer=setTimeout(this.loadIds,e)},e.prototype.clearCacheTimer=function(){void 0!==this.cacheTimer&&(clearTimeout(this.cacheTimer),this.cacheTimer=void 0)},e.prototype.pullModify=function(e){if(void 0!==e){var t=Math.floor(Date.now()/1e3);void 0===this.modifyMax&&(this.modifyMax=this.uq.localModifyMax.get(),void 0===this.modifyMax&&(this.modifyMax={max:e,seconds:t},this.uq.localModifyMax.set(this.modifyMax)));var n=this.modifyMax,r=n.max;if(!(t-n.seconds<3600)&&!(e<=r)){var i=[],o=this.uq.tuids;for(var a in o)i.push(a);0!==i.length&&(this.modifyMax.seconds=t,this.innerPullModify(i.join("\t")))}}},e.prototype.innerPullModify=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,o,a,s,u,c,l,h,d,p,m,f,v,b,y,g,w,E,C,k;return r.e(this,function(r){switch(r.label){case 0:return t=this.uq,n=t.uqApi,i=t.tuids,o=this.modifyMax.max,[4,n.queueModify(o,30,e)];case 1:for(a=r.sent(),s={},u=0,c=0,l=a.queue;c<l.length;c++)h=l[c],d=h.id,p=h.entity,m=h.key,void 0!==(E=i[p])&&(void 0===(f=s[p])&&(f=s[p]={tuid:E,ids:[]}),f.ids.push(m),d>u&&(u=d));for(b in v=[],s)v.push(b);y=0,r.label=2;case 2:return y<v.length?(g=v[y],w=s[g],E=w.tuid,C=w.ids,[4,E.modifyIds(C)]):[3,5];case 3:r.sent(),r.label=4;case 4:return y++,[3,2];case 5:return k=Math.floor(Date.now()/1e3),this.modifyMax={max:u,seconds:k},this.uq.localModifyMax.set(this.modifyMax),[2]}})})},e}(),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"action"},enumerable:!0,configurable:!0}),t.prototype.submit=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new V(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.submitReturns=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new q(this,e).request()];case 1:return[2,t.sent()]}})})},t}(s),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"action/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){return{data:this.entity.pack(this.params)}},t}(c),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"action/"+this.entity.name+"/returns"},enumerable:!0,configurable:!0}),t.prototype.xresult=function(e){for(var t=this.entity.returns,n=t.length,r={},i=0;i<n;i++){r[t[i].name]=e[i]}return r},t}(V),O=n(36),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"sheet"},enumerable:!0,configurable:!0}),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t),this.states=t.states},t.prototype.build=function(e){this.states=[];for(var t=0,n=e.ops;t<n.length;t++){var r=n[t];this.states.push({name:r,actions:void 0})}},t.prototype.createSheetState=function(e,t){var n={name:e,actions:[]},r=n.actions;for(var i in t){var o={name:i};r.push(o)}return n},t.prototype.save=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return n=this.uq.id,[4,new L(this,{app:n,discription:e,data:t}).request()];case 1:return[2,r.sent()]}})})},t.prototype.action=function(e,t,n,i){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new M(this,{id:e,flow:t,state:n,action:i}).request()];case 1:return[2,r.sent()]}})})},t.prototype.unpack=function(e){var t=e[0][0];return{brief:t,data:this.unpackSheet(t.data),flows:e[1]}},t.prototype.getSheet=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,new D(this,e).request()];case 1:return 0!==(t=n.sent())[0].length?[3,3]:[4,this.getArchive(e)];case 2:return[2,n.sent()];case 3:return[2,this.unpack(t)]}})})},t.prototype.getArchive=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,new B(this,e).request()];case 1:return t=n.sent(),[2,this.unpack(t)]}})})},t.prototype.getArchives=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,new U(this,{pageStart:e,pageSize:t}).request()];case 1:return[2,n.sent()]}})})},t.prototype.getStateSheets=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new W(this,{state:e,pageStart:t,pageSize:n}).request()];case 1:return[2,r.sent()]}})})},t.prototype.createPageStateItems=function(){return new K(this)},t.prototype.stateSheetCount=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,new z(this,void 0).request()];case 1:return[2,e.sent()]}})})},t.prototype.mySheets=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new H(this,{state:e,pageStart:t,pageSize:n}).request()];case 1:return[2,r.sent()]}})})},t}(s),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name+"/"+this.suffix},enumerable:!0,configurable:!0}),t}(u),L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name},enumerable:!0,configurable:!0}),t.prototype.buildParams=function(){var e=this.params,t=e.app,n=e.discription,r=e.data;return{app:t,discription:n,data:this.entity.pack(r)}},t}(R),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="PUT",t}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name},enumerable:!0,configurable:!0}),t}(R),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),t.prototype.buildParams=function(){},Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name+"/get/"+this.params},enumerable:!0,configurable:!0}),t}(R),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t}return r.d(t,e),t.prototype.buildParams=function(){},Object.defineProperty(t.prototype,"path",{get:function(){return"sheet/"+this.entity.name+"/archive/"+this.params},enumerable:!0,configurable:!0}),t}(R),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.suffix="archives",t}return r.d(t,e),t}(R),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.suffix="states",t}return r.d(t,e),t}(R),z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.method="GET",t.suffix="statecount",t}return r.d(t,e),t.prototype.xresult=function(e){return this.entity.states.map(function(t){var n=t.name,r=0,i=e.find(function(e){return e.state===n});return void 0!==i&&(r=i.count),{state:n,count:r}})},t}(R),H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.suffix="my-sheets",t}return r.d(t,e),t.prototype.xresult=function(e){return e},t}(R),K=function(e){function t(t){var n=e.call(this,!0)||this;return n.sheet=t,n.pageSize=10,n}return r.d(t,e),t.prototype.load=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.sheet.getStateSheets(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(O.a),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"query"},enumerable:!0,configurable:!0}),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t);var n=t.returns;this.isPaged=n&&void 0!==n.find(function(e){return"$page"===e.name})},t.prototype.resetPage=function(e,t){this.pageStart=void 0,this.pageSize=e,this.params=t,this.more=!1,this.list=void 0},Object.defineProperty(t.prototype,"hasMore",{get:function(){return this.more},enumerable:!0,configurable:!0}),t.prototype.loadPage=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i;return r.e(this,function(r){switch(r.label){case 0:if(void 0===this.pageSize)throw"call resetPage(size:number, params:any) first";if(void 0!==this.pageStart)switch(this.startField.type){default:e=this.pageStart;break;case"date":case"time":case"datetime":e=this.pageStart.getTime()}return[4,this.page(this.params,e,this.pageSize+1)];case 1:return t=r.sent(),this.list=d.l.array([],{deep:!1}),void 0!==t&&(t.length>this.pageSize?(this.more=!0,t.pop(),n=this.returns.find(function(e){return"$page"===e.name}),this.startField=n.fields[0],this.pageStart=t[t.length-1][this.startField.name]):this.more=!1,(i=this.list).push.apply(i,t)),[2]}})})},t.prototype.page=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new h(this,{pageStart:t,pageSize:n+1,params:e}).request()];case 1:return[2,r.sent()]}})})},t.prototype.query=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new l(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.table=function(e){return r.b(this,void 0,Promise,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.query(e)];case 1:for(n in t=r.sent())return[2,t[n]];return[2]}})})},t.prototype.obj=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.table(e)];case 1:return(t=n.sent()).length>0?[2,t[0]]:[2]}})})},t.prototype.scalar=function(e){return r.b(this,void 0,Promise,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.obj(e)];case 1:for(n in t=r.sent())return[2,t[n]];return[2]}})})},r.c([d.l],t.prototype,"list",void 0),t}(s),J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.queryApiName="book",t}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"book"},enumerable:!0,configurable:!0}),t}(Q),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.queryApiName="history",t}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"history"},enumerable:!0,configurable:!0}),t}(Q),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actions={},t.queries={},t}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"map"},enumerable:!0,configurable:!0}),t.prototype.setSchema=function(t){e.prototype.setSchema.call(this,t),this.schemaFrom=this.schema.from;var n=t.actions,r=t.queries,i=t.keys;for(var o in this.uq.buildFieldTuid(this.keys=i),n){var a=n[o],s=a.name,u=this.uq.newAction(s,void 0);u.setSchema(a),u.buildFieldsTuid(),this.actions[o]=u}for(var o in r){var c=r[o],l=(s=c.name,this.uq.newQuery(s,void 0));l.setSchema(c),l.buildFieldsTuid(),this.queries[o]=l}},t.prototype.add=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new Y(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.del=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new _(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.all=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,new $(this,void 0).request()];case 1:return[2,e.sent()]}})})},t.prototype.page=function(e,t,n){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,new ee(this,{pageStart:t,pageSize:n,param:e}).request()];case 1:return[2,r.sent()]}})})},t.prototype.query=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,new te(this,e).request()];case 1:return[2,t.sent()]}})})},t.prototype.table=function(e){return r.b(this,void 0,Promise,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.query(e)];case 1:for(n in t=r.sent())return[2,t[n]];return[2]}})})},t.prototype.obj=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.table(e)];case 1:return(t=n.sent()).length>0?[2,t[0]]:[2]}})})},t.prototype.scalar=function(e){return r.b(this,void 0,Promise,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return[4,this.obj(e)];case 1:for(n in t=r.sent())return[2,t[n]];return[2]}})})},t}(s),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.innerCall=function(){return r.b(this,void 0,Promise,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return e=this.getCaller(this.params),[4,this.entity.uqApi.xcall(e)];case 1:return t=n.sent(),[2,{res:e.xresult(t.res)}]}})})},t.prototype.buildParams=function(){return e.prototype.buildParams.call(this)},t}(u),Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new ne(this.entity,this.entity.actions.add,e)},t}(Z),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new re(this.entity,this.entity.actions.add,e)},t}(Z),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new ie(this.entity,this.entity.queries.all,e)},t}(Z),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new oe(this.entity,this.entity.queries.page,e)},t}(Z),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.getCaller=function(e){return new ae(this.entity,this.entity.queries.query,e)},t}(Z),ne=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/add"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(V),re=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/del"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(V),ie=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/all"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(h),oe=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/page"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(h),ae=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.map=t,i}return r.d(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return"map/"+this.map.name+"/query"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){},enumerable:!0,configurable:!0}),t}(l),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.queryApiName="pending",t}return r.d(t,e),Object.defineProperty(t.prototype,"typeName",{get:function(){return"pending"},enumerable:!0,configurable:!0}),t}(Q),ue=n(0),ce=n(4),le=function(e,t){return ue.createElement(ue.Fragment,null,"content: ",JSON.stringify(e))},he=function(){function e(e,t,n){this.id=e,this.tuid=t,this.ui=n,this.isUndefined=void 0===this.tuid}return Object.defineProperty(e.prototype,"obj",{get:function(){return this.tuid.valueFromId(this.id)},enumerable:!0,configurable:!0}),e.prototype.render=function(e,t){if(void 0!==this.id&&null!==this.id){var n=this.boxName,r=this.obj;if(!0===this.isUndefined)return void 0!==e?e(r,t):le(r,t);switch(typeof r){case"undefined":return ue.createElement("del",{className:"text-black-50"},n," undefined");case"number":return ue.createElement("del",{className:"text-black-50"},n," ",this.id)}if(void 0===e&&(e=this.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){var i=e(r);return void 0!==i?i:ue.createElement("del",{className:"text-danger"},n," ",this.id)}return le(r)}},Object.defineProperty(e.prototype,"boxName",{get:function(){return this.tuid.name},enumerable:!0,configurable:!0}),e.prototype.assure=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.tuid.assureBox(this.id)];case 1:return e.sent(),[2]}})})},e}();Object(ce.a)(function(e){var t=e.tuidValue,n=e.ui,r=e.x,i=e.nullUI;if(void 0===t)return void 0===i?ue.createElement(ue.Fragment,null,"[undefined]"):i();if(null===t)return void 0===i?ue.createElement(ue.Fragment,null,"[null]"):i();var o=typeof t;switch(o){default:if(void 0===n)return ue.createElement(ue.Fragment,null,o,"-",t);var a=n(t,r);return void 0!==a?a:ue.createElement(ue.Fragment,null,t);case"object":var s=function(e,t,n){var r,i=e;switch(typeof e){case"undefined":r=ue.createElement(ue.Fragment,null,"boxId undefined");break;case"number":r=ue.createElement(ue.Fragment,null,"id:",e);break;default:if("function"!==typeof i.render){if(void 0!==t)return t(e,n);r=le(e,n)}}return void 0!==r?ue.createElement("del",{className:"text-danger"},r):i.render(t,n)}(t,n,r);return void 0!==s?s:void 0===i?ue.createElement(ue.Fragment,null,"id null"):i();case"number":return ue.createElement(ue.Fragment,null,"id...",t)}});function de(e){switch(e){case"tinyint":case"smallint":case"int":case"bigint":case"dec":return 0;case"char":case"text":return"";case"datetime":case"date":return"2000-1-1";case"time":return"0:00"}}var pe=function(){function e(e,t,n,r){var i=this;this.actions={},this.sheets={},this.queries={},this.books={},this.maps={},this.histories={},this.pendings={},this.tuids={},this.createBoxIdFromTVs=function(e,t){var n=e.name;e.sName;return new he(t,e,i.tvs[n])},this.tuidArr=[],this.actionArr=[],this.sheetArr=[],this.queryArr=[],this.bookArr=[],this.mapArr=[],this.historyArr=[],this.pendingArr=[],this.createBoxId=n,void 0===n&&(this.createBoxId=this.createBoxIdFromTVs,this.tvs=r||{});var o=t.id,s=t.uqOwner,u=t.uqName,c=t.access,l=t.newVersion;this.newVersion=l,this.uqOwner=s,this.uqName=u,this.id=o,this.name=s+"/"+u,this.uqVersion=0,this.localMap=e.localMap.map(this.name),this.localModifyMax=this.localMap.child("$modifyMax"),this.localAccess=this.localMap.child("$access");var h;document.location.hash;h=null===c||void 0===c||"*"===c?[]:c.split(";").map(function(e){return e.trim()}).filter(function(e){return e.length>0}),"$$$/$unitx"===this.name?this.uqApi=new a.d(a.g.unit):this.uqApi=new a.e("tv/",s,u,h,!0),this.tuidsCache=new F(this)}return Object.defineProperty(e.prototype,"entities",{get:function(){return o.a.merge({},this.actions,this.sheets,this.queries,this.books,this.maps,this.histories,this.pendings,this.tuids)},enumerable:!0,configurable:!0}),e.prototype.tuid=function(e){return this.tuids[e.toLowerCase()]},e.prototype.tuidDiv=function(e,t){var n=this.tuids[e.toLowerCase()];return n&&n.div(t.toLowerCase())},e.prototype.action=function(e){return this.actions[e.toLowerCase()]},e.prototype.sheet=function(e){return this.sheets[e.toLowerCase()]},e.prototype.query=function(e){return this.queries[e.toLowerCase()]},e.prototype.book=function(e){return this.books[e.toLowerCase()]},e.prototype.map=function(e){return this.maps[e.toLowerCase()]},e.prototype.history=function(e){return this.histories[e.toLowerCase()]},e.prototype.pending=function(e){return this.pendings[e.toLowerCase()]},e.prototype.sheetFromTypeId=function(e){for(var t in this.sheets){var n=this.sheets[t];if(n.typeId===e)return n}},e.prototype.init=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.uqApi.init()];case 1:return e.sent(),[2]}})})},e.prototype.loadEntities=function(){return r.b(this,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),(e=this.localAccess.get())?[3,2]:[4,this.uqApi.loadAccess()];case 1:e=t.sent(),t.label=2;case 2:return e?(this.buildEntities(e),"common"===this.uqName&&this.pullModify(12),[3,4]):[2];case 3:return[2,t.sent()];case 4:return[2]}})})},e.prototype.buildEntities=function(e){this.localAccess.set(e);var t=e.access,n=e.tuids,r=e.version;this.uqVersion=r,this.buildTuids(n),this.buildAccess(t)},e.prototype.loadEntitySchema=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.uqApi.schema(e)];case 1:return[2,t.sent()]}})})},e.prototype.getTuid=function(e){return this.tuids[e]},e.prototype.buildTuids=function(e){for(var t in e){(i=e[t]).name;var n=i.typeId,r=i.from;this.newTuid(t,n,r).sys=!0}for(var t in e){var i=e[t];this.getTuid(t).setSchema(i)}for(var t in this.tuids){this.tuids[t].buildFieldsTuid()}},e.prototype.buildAccess=function(e){for(var t in e){var n=e[t];switch(typeof n){case"string":this.fromType(t,n);break;case"object":this.fromObj(t,n)}}},e.prototype.cacheTuids=function(e){this.tuidsCache.cacheTuids(e)},e.prototype.newAction=function(e,t){var n=this.actions[e];return void 0!==n?n:(n=this.actions[e]=new A(this,e,t),this.actionArr.push(n),n)},e.prototype.newTuid=function(e,t,n){var r=this.tuids[e];return void 0!==r?r:(r=void 0!==n?new S(this,e,t,n):new b(this,e,t),this.tuids[e]=r,this.tuidArr.push(r),r)},e.prototype.newQuery=function(e,t){var n=this.queries[e];return void 0!==n?n:(n=this.queries[e]=new Q(this,e,t),this.queryArr.push(n),n)},e.prototype.newBook=function(e,t){var n=this.books[e];return void 0!==n?n:(n=this.books[e]=new J(this,e,t),this.bookArr.push(n),n)},e.prototype.newMap=function(e,t){var n=this.maps[e];return void 0!==n?n:(n=this.maps[e]=new X(this,e,t),this.mapArr.push(n),n)},e.prototype.newHistory=function(e,t){var n=this.histories[e];if(void 0===n)return n=this.histories[e]=new G(this,e,t),this.historyArr.push(n),n},e.prototype.newPending=function(e,t){var n=this.pendings[e];if(void 0===n)return n=this.pendings[e]=new se(this,e,t),this.pendingArr.push(n),n},e.prototype.newSheet=function(e,t){var n=this.sheets[e];return void 0!==n?n:(n=this.sheets[e]=new j(this,e,t),this.sheetArr.push(n),n)},e.prototype.fromType=function(e,t){var n=t.split("|");t=n[0];var r=Number(n[1]);switch(t){case"tuid":break;case"action":this.newAction(e,r);break;case"query":this.newQuery(e,r);break;case"book":this.newBook(e,r);break;case"map":this.newMap(e,r);break;case"history":this.newHistory(e,r);break;case"sheet":this.newSheet(e,r);break;case"pending":this.newPending(e,r)}},e.prototype.fromObj=function(e,t){switch(t.$){case"sheet":this.buildSheet(e,t)}},e.prototype.buildSheet=function(e,t){var n=this.sheets[e];void 0===n&&(n=this.newSheet(e,t.id)),n.build(t)},e.prototype.buildFieldTuid=function(e,t){if(void 0!==e){for(var n=0,r=e;n<r.length;n++){var i=(l=r[n]).tuid;if(void 0!==i){var o=this.getTuid(i);void 0!==o&&(l._tuid=o.buildTuidBox())}}for(var a=function(n){var r=n.owner;if(void 0===r)return"continue";var i=e.find(function(e){return e.name===r});if(void 0===i&&(void 0!==t&&(i=t.find(function(e){return e.name===r})),void 0===i))throw"owner field "+r+" is undefined";var o=n.arr,a=n.tuid,u=s.getTuid(i._tuid.tuid.name);if(void 0===u)return"continue";var c=u.div(o||a);if(n._tuid=c&&c.buildTuidDivBox(i),void 0===n._tuid)throw"owner field ${owner} is not tuid"},s=this,u=0,c=e;u<c.length;u++){var l;a(l=c[u])}}},e.prototype.buildArrFieldsTuid=function(e,t){if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n].fields;void 0!==i&&this.buildFieldTuid(i,t)}},e.prototype.pullModify=function(e){this.tuidsCache.pullModify(e)},e}(),me=n(11),fe=function(){function e(e,t){this.tvs=t||{},this.buildTVs(),this.collection={};var n=e.split("/");if(2!==n.length)throw"tonvaApp name must be / separated, owner/app";this.appOwner=n[0],this.appName=n[1],this.localMap=me.c.localDb.map(e),this.localData=this.localMap.child("uqData")}return e.prototype.addUq=function(e){this.collection[e.name]=e},e.prototype.buildTVs=function(){for(var e in this.tvs){var t=this.tvs[e];if(void 0!==t){var n=e.toLowerCase();if(n!==e)for(var r in this.tvs[n]=t,t){var i=t[r];if(void 0!==i){var o=r.toLowerCase();o!==r&&(t[o]=i)}}}}},e.prototype.init=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,o,a,s,u,c,l;return r.e(this,function(r){switch(r.label){case 0:for(t=[],n=0,i=e;n<i.length;n++)o=i[n],o.id,a=o.uqOwner,s=o.uqName,o.access,u=a+"/"+s,c=new pe(this,o,void 0,this.tvs[u]||this.tvs[s]),this.collection[u]=c,(l=u.toLowerCase())!==u&&(this.collection[l]=c),t.push(c.init());return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.load=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o,a,s,u,c;return r.e(this,function(r){switch(r.label){case 0:for(n in e=[],t=[],this.collection)i=this.collection[n],t.push(i.loadEntities());return[4,Promise.all(t)];case 1:for(o=r.sent(),a=0,s=o;a<s.length;a++)u=s[a],void 0===(c=u)||e.push(c);return[2,e]}})})},e.prototype.writeUQs=function(e){for(var t in this.collection){for(var n=this.collection[t],r=n.uqName,i=r.toLowerCase(),o=n.entities,a=0,s=Object.keys(o);a<s.length;a++){var u=o[s[a]],c=u.name,l=u.sName;c!==l&&(o[l]=u)}e[t]=o,e[r]=o,i!==r&&(e[i]=o)}},e.prototype.setTuidImportsLocal=function(){var e=[];for(var t in this.collection)for(var n=0,r=this.collection[t].tuidArr;n<r.length;n++){var i=r[n];if(!0===i.isImport){var o=this.setInner(i);o&&e.push(o)}}return e},e.prototype.setInner=function(e){var t=e.from,n=t.owner+"/"+t.uq,r=this.collection[n];if(void 0===r)return"setInner(tuidImport: TuidImport): uq "+n+" is not loaded";var i=e.name,o=r.tuid(i);return void 0===o?"setInner(tuidImport: TuidImport): uq "+n+" has no Tuid "+i:!0===o.isImport?"setInner(tuidImport: TuidImport): uq "+n+" Tuid "+i+" is import":void e.setFrom(o)},e}();n.d(t,"c",function(){return de}),n.d(t,"b",function(){return pe}),n.d(t,"a",function(){return fe})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(9),o=n(5),a=function(){function e(e,t,n,r){this.isChanged=!1,this.itemSchema=e,this.uiItem=t,this.value=r;var i=e.name;this.name=i,this.label=n}return e.prototype.start=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.internalStart()];case 1:return[2,e.sent()]}})})},e.prototype.end=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.internalEnd()];case 1:return e.sent(),[2]}})})},e.prototype.internalEnd=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return i.b.pop(),[2]})})},e.prototype.verifyValue=function(){if(void 0!==this.uiItem){var e=this.uiItem.rules;if(void 0!==e){var t=this.newValue;if(Array.isArray(e))for(var n=0,r=e;n<r.length;n++){var i=o(r[n]);if(void 0!==i){this.error=i;break}}else this.error=o(e)}}function o(e,n){var r=e(t);if(void 0!==r)return"object"!==typeof r?r:JSON.stringify(r)}},r.c([o.l],e.prototype,"error",void 0),r.c([o.l],e.prototype,"isChanged",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(6),o=n.n(i),a=n(9);function s(e){var t=e.className,n=e.style,i=e.src,s=e.altImage;return i?(!0===i.startsWith(":")&&(i=a.b.resUrl+i.substr(1)),r.createElement("img",{src:i,className:t,style:n,onError:function(e){e.currentTarget.src=s||"https://tv.jkchemical.com/imgs/0001.png"}})):r.createElement("div",{className:o()(t,"image-none"),style:n},r.createElement("i",{className:"fa fa-file-o"}))}},function(e,t,n){"use strict";var r=n(1),i=n(3),o=n(12),a=n(20),s=n(18),u=n(7),c=n(0),l=n.n(c),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return c.createElement(i.Page,{header:t.label},"Book")},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(u.b),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VBookMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VBookMain",{get:function(){return h},enumerable:!0,configurable:!0}),t}(u.a),p=n(41),m=n(47),f=n(32),v=n(26),b=n(43),y=function(e){function t(t){var n=e.call(this,t)||this;n.isSysVisible=!1,n.view=function(){var e,t=n.controller,r=t.res,o=t.uq,a=t.error,s={render:function(e,t){return e.render()},onClick:void 0},u=[{header:r.tuid||"TUID",items:n.tuidLinks},{cn:"my-2",header:r.map||"MAP",items:n.mapLinks},{cn:"my-2",header:r.sheet||"SHEET",items:n.sheetLinks},{cn:"my-2",header:r.action||"ACTION",items:n.actionLinks},{cn:"my-2",header:r.query||"QUERY",items:n.queryLinks},{cn:"mt-2 mb-4",header:r.book||"BOOK",items:n.bookLinks},{cn:"mt-2 mb-4",header:r.history||"HISTORY",items:n.historyLinks},{cn:"mt-2 mb-4",header:r.pending||"PENDING",items:n.pendingLinks}];return e=void 0!==a?l.a.createElement("div",{className:"p-3 text-danger"},"\u8fde\u63a5\u9519\u8bef: ",a):u.map(function(e,t){var n=e.cn,r=e.header,o=e.items;return o.length>0&&l.a.createElement(i.List,{key:t,className:n,header:l.a.createElement("div",{className:"px-3 py-1 bg-light"},l.a.createElement(i.Muted,null,r)),items:o,item:s})}),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"px-3 py-1 small"},r.uq||o),e)};var r=t.uq,o=r.tuidArr,a=r.mapArr,u=r.sheetArr,c=r.actionArr,h=r.queryArr,d=r.bookArr,p=r.historyArr,m=r.pendingArr;return n.tuidLinks=o.filter(function(e){return n.isVisible(e)}).map(function(e){return new s.a(n.controller.cTuidMain(e))}),n.mapLinks=a.filter(function(e){return n.isVisible(e)}).map(function(e){return new s.a(n.controller.cMap(e))}),n.sheetLinks=u.filter(function(e){return n.isVisible(e)}).map(function(e){return new s.a(n.controller.cSheet(e))}),n.actionLinks=c.filter(function(e){return n.isVisible(e)}).map(function(e){return new s.a(n.controller.cAction(e))}),n.queryLinks=h.filter(function(e){return n.isVisible(e)}).map(function(e){return new s.a(n.controller.cQuery(e))}),n.bookLinks=d.filter(function(e){return n.isVisible(e)}).map(function(e){return new s.a(n.controller.cBook(e))}),n.historyLinks=p.filter(function(e){return n.isVisible(e)}).map(function(e){return new s.a(n.controller.cHistory(e))}),n.pendingLinks=m.filter(function(e){return n.isVisible(e)}).map(function(e){return new s.a(n.controller.cPending(e))}),n}return r.d(t,e),t.prototype.isVisible=function(e){return!0!==e.sys||this.isSysVisible},t.prototype.render=function(e){return void 0===this.view?l.a.createElement("div",null,"??? viewModel \u5fc5\u987b\u5b9a\u4e49 view ???"):l.a.createElement(this.view)},t}(i.View),g=n(46),w=n(45),E=n(4),C=function(){return function(e,t,n){this.tuid=e,this.ui=t,this.res=n}}(),k=function(){function e(e,t){this.tuidUR=e,this.id=t,this.isUndefined=void 0===this.tuidUR.tuid}return Object.defineProperty(e.prototype,"obj",{get:function(){return this.tuidUR.tuid.valueFromId(this.id)},enumerable:!0,configurable:!0}),e.prototype.render=function(e,t){if(void 0!==this.id&&null!==this.id){var n=this.boxName,r=this.obj;if(!0===this.isUndefined)return void 0!==e?e(r,t):Object(o.a)(r,t);switch(typeof r){case"undefined":return c.createElement("del",{className:"text-black-50"},n," undefined");case"number":return c.createElement("del",{className:"text-black-50"},n," ",this.id)}if(void 0===e&&(e=this.tuidUR.ui),void 0!==e&&("function"!==typeof e&&(e=e.content),void 0!==e)){var i=e(r,this.tuidUR.res);return void 0!==i?i:c.createElement("del",{className:"text-danger"},n," ",this.id)}return Object(o.a)(r)}},Object.defineProperty(e.prototype,"boxName",{get:function(){return this.tuidUR.tuid.name},enumerable:!0,configurable:!0}),e.prototype.assure=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.tuidUR.tuid.assureBox(this.id)];case 1:return e.sent(),[2]}})})},e}();var P=Object(E.a)(function(e){var t=e.tuidValue,n=e.ui,r=e.x,i=e.nullUI;if(void 0===t)return void 0===i?c.createElement(c.Fragment,null,"[undefined]"):i();if(null===t)return void 0===i?c.createElement(c.Fragment,null,"[null]"):i();var a=typeof t;switch(a){default:if(void 0===n)return c.createElement(c.Fragment,null,a,"-",t);var s=n(t,r);return void 0!==s?s:c.createElement(c.Fragment,null,t);case"object":var u=function(e,t,n){var r,i=e;switch(typeof e){case"undefined":r=c.createElement(c.Fragment,null,"boxId undefined");break;case"number":r=c.createElement(c.Fragment,null,"id:",e);break;default:if("function"!==typeof i.render){if(void 0!==t)return t(e,n);r=Object(o.a)(e,n)}}return void 0!==r?c.createElement("del",{className:"text-danger"},r):i.render(t,n)}(t,n,r);return void 0!==u?u:void 0===i?c.createElement(c.Fragment,null,"id null"):i();case"number":return c.createElement(c.Fragment,null,"id...",t)}}),N=function(e,t,n,r){return c.createElement(P,{tuidValue:e,ui:t,x:n,nullUI:r})};function S(e){if(void 0!==e)for(var t in e)e[t.toLowerCase()]=e[t]}var x=function(e){function t(t,n,r){var o=e.call(this,Object(i.resLang)(r.res))||this;return o.tuidURs={},o.createBoxId=function(e,t){var n=e.name,r=o.tuidURs[n];if(void 0===r){var i=o.getUI(e),a=i.ui,s=i.res;o.tuidURs[n]=r=new C(e,a,s)}return new k(r,t)},o.isSysVisible=!1,o.cApp=t,S(r.tuid),S(r.sheet),S(r.map),S(r.query),S(r.action),S(r.book),S(r.history),S(r.pending),o.ui=r,o.CTuidMain=r.CTuidMain||v.d,o.CTuidEdit=r.CTuidEdit||v.a,o.CTuidList=r.CTuidList||v.c,o.CTuidSelect=r.CTuidSelect||v.e,o.CTuidInfo=r.CTuidInfo||v.b,o.CQuery=r.CQuery||f.a,o.CQuerySelect=r.CQuerySelect||f.b,o.CMap=r.CMap||b.a,o.CAction=r.CAction||m.a,o.CSheet=r.CSheet||p.a,o.CBook=r.CBook||d,o.CHistory=r.CHistory||g.a,o.CPending=r.CPending||w.a,o.uq=new a.b(t.uqs,n,o.createBoxId,void 0),o}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return[2]})})},t.prototype.init=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.uq.init()];case 1:return[2,e.sent()]}})})},t.prototype.loadEntities=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.uq.loadEntities()];case 1:return e.sent(),[3,3];case 2:return[2,e.sent()];case 3:return[2]}})})},t.prototype.getQuerySearch=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return void 0!==(t=this.uq.query(e))?[3,1]:(alert("QUERY "+e+" \u6ca1\u6709\u5b9a\u4e49!"),[3,3]);case 1:return[4,t.loadSchema()];case 2:n.sent(),t.returns.length>1&&alert("QUERY "+e+" \u8fd4\u56de\u591a\u5f20\u8868, \u65e0\u6cd5\u505aQuerySearch"),n.label=3;case 3:return[2,t]}})})},t.prototype.getTuidPlaceHolder=function(e){var t=this.res,n=t.tuidPlaceHolder,r=t.entity,i=e.name;if(void 0!==r){var o=r[i];void 0!==o&&o.label}return n||"Select"},t.prototype.getNone=function(){return this.res.none||"none"},t.prototype.isVisible=function(e){return!0!==e.sys||this.isSysVisible},t.prototype.navSheet=function(e,t){return r.b(this,void 0,void 0,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return void 0===(n=this.uq.sheetFromTypeId(e))?(alert("sheetTypeId "+e+" is not exists!"),[2]):[4,this.cSheet(n).startSheet(t)];case 1:return r.sent(),[2]}})})},t.prototype.sheet=function(e){return this.uq.sheet(e)},t.prototype.action=function(e){return this.uq.action(e)},t.prototype.query=function(e){return this.uq.query(e)},t.prototype.book=function(e){return this.uq.book(e)},t.prototype.map=function(e){return this.uq.map(e)},t.prototype.history=function(e){return this.uq.history(e)},t.prototype.pending=function(e){return this.uq.pending(e)},t.prototype.tuid=function(e){return this.uq.tuid(e)},t.prototype.tuidDiv=function(e,t){return this.uq.tuidDiv(e,t)},t.prototype.cSheetFromName=function(e){var t=this.uq.sheet(e);if(void 0!==t)return this.cSheet(t)},t.prototype.cActionFromName=function(e){var t=this.uq.action(e);if(void 0!==t)return this.cAction(t)},t.prototype.cQueryFromName=function(e){var t=this.uq.query(e);if(void 0!==t)return this.cQuery(t)},t.prototype.cBookFromName=function(e){var t=this.uq.book(e);if(void 0!==t)return this.cBook(t)},t.prototype.cMapFromName=function(e){var t=this.uq.map(e);if(void 0!==t)return this.cMap(t)},t.prototype.cHistoryFromName=function(e){var t=this.uq.history(e);if(void 0!==t)return this.cHistory(t)},t.prototype.cPendingFromName=function(e){var t=this.uq.pending(e);if(void 0!==t)return this.cPending(t)},t.prototype.cTuidMainFromName=function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidMain(t)},t.prototype.cTuidEditFromName=function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidEdit(t)},t.prototype.cTuidInfoFromName=function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidInfo(t)},t.prototype.cTuidSelectFromName=function(e){var t=this.uq.tuid(e);if(void 0!==t)return this.cTuidSelect(t)},t.prototype.cFromName=function(e,t){switch(e){case"sheet":var n=this.uq.sheet(t);if(void 0===n)return;return this.cSheet(n);case"action":var r=this.uq.action(t);if(void 0===r)return;return this.cAction(r);case"tuid":var i=this.uq.tuid(t);if(void 0===i)return;return this.cTuidMain(i);case"query":var o=this.uq.query(t);if(void 0===o)return;return this.cQuery(o);case"book":var a=this.uq.book(t);if(void 0===a)return;return this.cBook(a);case"map":var s=this.uq.map(t);if(void 0===s)return;return this.cMap(s);case"history":var u=this.uq.history(t);if(void 0===u)return;return this.cHistory(u);case"pending":var c=this.uq.pending(t);if(void 0===c)return;return this.cPending(c)}},t.prototype.linkFromName=function(e,t){return this.link(this.cFromName(e,t))},t.prototype.getUI=function(e){var t,n,r=e.name,i=e.typeName;if(void 0!==this.ui)if("div"===i){var o=e.owner,a=this.ui[o.typeName];if(a)if(u=a[o.name]){var s=u.divs;s&&(t=s[r])}}else{var u;void 0!==(u=this.ui[i])&&(t=u[r])}var c=this.res.entity;return void 0!==c&&(n=c[r]),{ui:t||{},res:n||{}}},t.prototype.link=function(e){return new s.a(e)},Object.defineProperty(t.prototype,"tuidLinks",{get:function(){var e=this;return this.uq.tuidArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cTuidMain(t))})},enumerable:!0,configurable:!0}),t.prototype.cTuidMain=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidMain||this.CTuidMain)(this,e,n,r)},t.prototype.cTuidEdit=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidEdit||this.CTuidEdit)(this,e,n,r)},t.prototype.cTuidList=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidList||this.CTuidList)(this,e,n,r)},t.prototype.cTuidSelect=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidSelect||this.CTuidSelect)(this,e,n,r)},t.prototype.cTuidInfo=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CTuidInfo||this.CTuidInfo)(this,e,n,r)},t.prototype.cSheet=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CSheet||this.CSheet)(this,e,n,r)},Object.defineProperty(t.prototype,"sheetLinks",{get:function(){var e=this;return this.uq.sheetArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cSheet(t))})},enumerable:!0,configurable:!0}),t.prototype.cAction=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CAction||this.CAction)(this,e,n,r)},Object.defineProperty(t.prototype,"actionLinks",{get:function(){var e=this;return this.uq.actionArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cAction(t))})},enumerable:!0,configurable:!0}),t.prototype.cQuery=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CQuery||this.CQuery)(this,e,n,r)},t.prototype.cQuerySelect=function(e){var t=this.uq.query(e);if(void 0!==t){var n=this.getUI(t),r=n.ui,i=n.res;return new(r&&r.CQuerySelect||this.CQuerySelect)(this,t,r,i)}},Object.defineProperty(t.prototype,"queryLinks",{get:function(){var e=this;return this.uq.queryArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cQuery(t))})},enumerable:!0,configurable:!0}),t.prototype.cBook=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CBook||this.CBook)(this,e,n,r)},Object.defineProperty(t.prototype,"bookLinks",{get:function(){var e=this;return this.uq.bookArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cBook(t))})},enumerable:!0,configurable:!0}),t.prototype.cHistory=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CHistory||this.CHistory)(this,e,n,r)},Object.defineProperty(t.prototype,"historyLinks",{get:function(){var e=this;return this.uq.historyArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cHistory(t))})},enumerable:!0,configurable:!0}),t.prototype.cPending=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CPending||this.CPending)(this,e,n,r)},Object.defineProperty(t.prototype,"pendingLinks",{get:function(){var e=this;return this.uq.pendingArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cPending(t))})},enumerable:!0,configurable:!0}),t.prototype.cMap=function(e){var t=this.getUI(e),n=t.ui,r=t.res;return new(n&&n.CMap||this.CMap)(this,e,n,r)},Object.defineProperty(t.prototype,"mapLinks",{get:function(){var e=this;return this.uq.mapArr.filter(function(t){return e.isVisible(t)}).map(function(t){return e.link(e.cMap(t))})},enumerable:!0,configurable:!0}),t.prototype.getTuidContent=function(e){var t=this.getUI(e).ui;return t&&t.content||o.a},t.prototype.getTuidDivContent=function(e){var t=e.owner,n=this.getUI(t).ui;return n&&n.divs&&n.divs[e.name].content||o.a},t.prototype.showTuid=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.cTuidInfo(e).start(t)];case 1:return n.sent(),[2]}})})},t.prototype.showTuidDiv=function(e,t){return r.b(this,void 0,Promise,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return n=e.owner,[4,this.cTuidInfo(n).start(t)];case 1:return r.sent(),[2]}})})},Object.defineProperty(t.prototype,"VUq",{get:function(){return y},enumerable:!0,configurable:!0}),t.prototype.render=function(){return new this.VUq(this).render()},t}(i.Controller);n.d(t,"a",function(){return x}),n.d(t,"b",function(){return N})},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=n(50),i=n.n(r);function o(e){var t=i()(e);return{id:t.id,name:t.name,guest:t.guest,token:e}}function a(e){return{id:0,guest:i()(e).guest,token:e}}},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return l});var r=n(1),i=n(11),o=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_RES_HOST||"https://tv.jkchemical.com",a={centerhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_CENTER_DEBUG_HOST||"localhost:3000",local:!1},reshost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_RES_DEBUG_HOST||"localhost:3015",local:!1},uqhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_HOST||"localhost:3015",local:!1},unitxhost:{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_HOST||"localhost:3015",local:!1},"uq-build":{value:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"https://tv.jkchemical.com"}).REACT_APP_UQ_DEBUG_BUILDER_HOST||"localhost:3009",local:!1}};function s(e){return!0===e.startsWith("https://")?e.endsWith("/")?e:e+"/":"http://"+e+"/"}function u(e){return s(e)+"res/"}var c={method:"GET",mode:"no-cors",headers:{"Content-Type":"text/plain"}},l=new(function(){function e(){}return e.prototype.start=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return this.testing=e,!0!==i.c.isDevelopment?[3,2]:[4,this.tryLocal()];case 1:n.sent(),n.label=2;case 2:return t=this.getCenterHost(),this.url=function(e){return s(e)}(t),this.ws=function(e){return!0===e.startsWith("https://")?(!0===(e=e.substr("https://".length)).endsWith("/")&&(e=e.substr(0,e.length-1)),"wss://"+e+"/tv/"):"ws://"+e+"/tv/"}(t),this.resHost=this.getResHost(),[2]}})})},e.prototype.debugHostUrl=function(e){return"http://"+e+"/hello"},e.prototype.tryLocal=function(){return r.b(this,void 0,void 0,function(){var e,t,n,i,o,s,u,c,l,h,d,m,f,v;return r.e(this,function(r){switch(r.label){case 0:for(h in e=[],t=[],n=function(e){var n=a[e].value;t.findIndex(function(e){return e===n})<0&&t.push(n)},a)n(h);for(i=0,o=t;i<o.length;i++)s=o[i],u=this.debugHostUrl(s),e.push(p(u));return[4,Promise.all(e)];case 1:for(c=r.sent(),l=t.length,h=0;h<l;h++)for(f in d=c[h],m=t[h],a)(v=a[f]).value===m&&(v.local=d);return[2]}})})},e.prototype.getCenterHost=function(){var e=a.centerhost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")?t:!0===i.c.isDevelopment&&!0===n?t:"https://tv.jkchemical.com"},e.prototype.getResHost=function(){var e=a.reshost,t=e.value,n=e.local;return!0===document.location.hash.includes("sheet_debug")?t:!0===i.c.isDevelopment&&!0===n?t:o},e.prototype.getUrlOrDebug=function(e,t){if(void 0===t&&(t="uqhost"),!1===i.c.isDevelopment)return e;var n=a[t];if(void 0===n)return e;var r=n.value;return!1===n.local?e:"http://"+r+"/"},e.prototype.getUrlOrTest=function(e,t,n){var r;return!0===this.testing?("-"!==n&&(t=n),r="uq/test/"+e+"/"):r="uq/prod/"+e+"/",(t=this.getUrlOrDebug(t))+r},e.prototype.localCheck=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,p(e)];case 1:return[2,t.sent()]}})})},e}()),h=200;function d(e){return new Promise(function(t,n){fetch(e,c).then(function(e){e.text().then(t).catch(n)}).catch(n);var r=new Error("Connection timed out");setTimeout(n,h,r)})}function p(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,d(e)];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})}},function(e,t,n){"use strict";var r=n(1),i=n(10),o=n.n(i),a=n(7),s=n(0),u=n.n(s),c=n(3),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onNew=function(){return t.event("new")},t.onList=function(){return t.event("list")},t.onSearch=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){return[2,this.event("list",e)]})})},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t.prototype.entityRender=function(e,t){return e.render()},t.prototype.entityClick=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,e.onClick()];case 1:return t.sent(),[2]}})})},Object.defineProperty(t.prototype,"view",{get:function(){var e,t=this.controller,n=t.label;!1===t.isImport&&(e=s.createElement("button",{className:"btn btn-outline-success ml-2",onClick:this.onNew},"\u65b0\u589e"));var r=s.createElement(s.Fragment,null,e,s.createElement("button",{className:"btn btn-outline-info ml-2",onClick:this.onList},"\u5168\u90e8")),i=s.createElement(c.LMR,{className:"m-3",right:r},s.createElement(c.SearchBox,{className:"w-100",size:"md",onSearch:this.onSearch,placeholder:"\u641c\u7d22"+n}));return function(){return s.createElement(c.Page,{header:n},i)}},enumerable:!0,configurable:!0}),t}(a.b),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.next=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return this.vForm.reset(),this.closePage(),[2]})})},t.finish=function(){t.closePage(2),t.event("edit-end")},t.onSubmit=function(){return r.b(t,void 0,void 0,function(){var e,t,n,i,o,a,u;return r.e(this,function(r){switch(r.label){case 0:return e=this.vForm.getValues(),[4,this.controller.entity.save(this.id,e)];case 1:if(t=r.sent(),(n=t.id)<0){if(void 0!==(i=this.controller.entity.unique))for(o=0,a=i;o<a.length;o++)u=a[o],this.vForm.setError(u,"\u4e0d\u80fd\u91cd\u590d");return[2]}return this.controller.isCalling?(this.returnCall(n),this.closePage(),[2]):(this.openPageElement(s.createElement(c.Page,{header:this.label+"\u63d0\u4ea4\u6210\u529f",back:"none"},s.createElement("div",{className:"m-3"},s.createElement("span",{className:"text-success"},s.createElement(c.FA,{name:"check-circle",size:"lg"})," \u6210\u529f\u63d0\u4ea4\uff01"),s.createElement("div",{className:"mt-5"},s.createElement("button",{className:"btn btn-primary mr-3",onClick:this.next},"\u7ee7\u7eed\u5f55\u5165"),s.createElement("button",{className:"btn btn-outline-primary",onClick:this.finish},"\u4e0d\u7ee7\u7eed"))))),this.event("item-changed",{id:this.id,values:e}),[2])}})})},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){return this.vForm=this.createForm(this.onSubmit,e),void 0!==e&&(this.id=e.id),this.openPage(this.editView),[2]})})},Object.defineProperty(t.prototype,"editView",{get:function(){var e=this;return function(){return s.createElement(c.Page,{header:(void 0===e.id?"\u65b0\u589e":"\u7f16\u8f91")+" - "+e.label},e.vForm.render("py-3"))}},enumerable:!0,configurable:!0}),t.prototype.resetForm=function(){this.vForm.reset()},t}(a.b),d=n(15),p=n(4),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainView=Object(p.a)(function(){var e=u.a.createElement(c.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:t.onSearchMain,placeholder:"\u641c\u7d22"+t.label});return u.a.createElement(c.Page,{header:e,back:"close"},u.a.createElement(c.List,{items:t.controller.PageItems.items,item:{render:t.renderMainRow,onClick:t.clickMainRow},before:"\u641c\u7d22"+t.label+"\u8d44\u6599"}))}),t.onSearchMain=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.controller.searchMain(e)];case 1:return t.sent(),[2]}})})},t.renderMainRow=function(e,n){return u.a.createElement(t.mainRowContent,r.a({},e))},t.clickMainRow=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return this.ceasePage(),void 0===this.controller.entity.hasDiv?(this.returnCall(e),[2]):[4,this.showDiv(this.entity.getIdFromObj(e))];case 1:return t.sent(),[2]}})})},t.divView=function(e){return u.a.createElement(c.Page,{header:"\u9009\u62e9Div"},u.a.createElement(c.List,{items:e.items,item:{render:t.renderDivRow,onClick:t.clickDivRow}}))},t.renderDivRow=function(e,n){return u.a.createElement(t.divRowContent,r.a({},e))},t.clickDivRow=function(e){t.ceasePage(),t.returnCall(e)},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0!==e?[3,2]:[4,this.showMain(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.showDiv(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.showMain=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return this.mainRowContent=this.ui.rowContent||d.b,[4,this.controller.searchMain(e)];case 1:return t.sent(),this.openPage(this.mainView),[2]}})})},t.prototype.showDiv=function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return void 0!==(t=this.ui.divs)&&(this.divRowContent=t[this.entity.name].rowContent),void 0===this.divRowContent&&(this.divRowContent=d.b),[4,this.controller.getDivItems(e)];case 1:return n=r.sent(),this.openPage(this.divView,{items:n}),[2]}})})},t}(a.b),f=n(12),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.next=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return this.vForm.reset(),this.closePage(),[2]})})},t.finish=function(){t.closePage(2)},t.onSubmit=function(){return r.b(t,void 0,void 0,function(){var e,t,n=this;return r.e(this,function(r){switch(r.label){case 0:return e=this.vForm.getValues(),[4,this.entity.save(this.id,e)];case 1:return(t=r.sent())&&alert("\u8fd9\u91cc\u8fd8\u8981\u5224\u65ad\u8fd4\u56de\u503c\uff0c\u5148\u4e0d\u5904\u7406\u4e86 \n"+Object(f.b)(t)),this.openPage(function(){return s.createElement(c.Page,{header:n.label+"\u63d0\u4ea4\u6210\u529f",back:"none"},s.createElement("div",{className:"m-3"},s.createElement("span",{className:"text-success"},s.createElement(c.FA,{name:"check-circle",size:"lg"})," \u6210\u529f\u63d0\u4ea4\uff01"),s.createElement("div",{className:"mt-5"},s.createElement("button",{className:"btn btn-primary mr-3",onClick:n.next},"\u7ee7\u7eed\u5f55\u5165"),s.createElement("button",{className:"btn btn-outline-primary",onClick:n.finish},"\u4e0d\u7ee7\u7eed"))))}),[2]}})})},t.view=function(){return s.createElement(c.Page,{header:t.label},t.vForm.render("py-3"))},t}return r.d(t,e),t.prototype.buildForm=function(e){this.vForm=this.createForm(void 0,e)},t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.buildForm(e),this.openPage(this.view),[2]})})},t.prototype.render=function(e){return this.buildForm(e),this.vForm.render()},t.prototype.loadId=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.id=e,[2]})})},t.prototype.resetForm=function(){this.vForm.reset()},t}(a.b)),b=function(e){function t(t){var n=e.call(this,!0)||this;return n.tuid=t,n}return r.d(t,e),t.prototype.load=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.tuid.search(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(n(11).b),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.onSelected=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return!1===this.controller.isImport?this.event("edit",e.id):this.event("info",e.id),[2]})})},t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSearch=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.controller.searchMain(e)];case 1:return t.sent(),[2]}})})},t.renderRow=function(e,n){return s.createElement(t.rowContent,r.a({},e))},t.clickRow=function(e){t.callOnSelected(e)},t.rowKey=function(e){return e.id},t.view=Object(p.a)(function(){var e=s.createElement(c.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:t.onSearch,placeholder:"\u641c\u7d22"+t.label});return s.createElement(c.Page,{header:e},s.createElement(c.List,{items:t.controller.PageItems.items,item:{render:t.renderRow,onClick:t.clickRow,key:t.rowKey},before:"\u641c\u7d22"+t.label+"\u8d44\u6599"}))}),t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return this.rowContent=this.ui.rowContent||d.b,this.ownerId=Number(e),[4,this.controller.searchMain("")];case 1:return t.sent(),this.openPage(this.view),[2]}})})},t.prototype.callOnSelected=function(e){void 0!==this.onSelected?this.onSelected(e):alert("onSelect is undefined")},t}(a.b)),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.buildPageItems=function(){return new b(this.entity)},t.prototype.searchMain=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0===this.PageItems&&(this.PageItems=this.buildPageItems()),void 0===e?[3,2]:[4,this.PageItems.first(e)];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.getDivItems=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.entity.searchArr(e,void 0,0,1e3)];case 1:return[2,t.sent()]}})})},t}(a.a),w=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return r.d(t,e),t.prototype.from=function(){return this},t.prototype.cUqFrom=function(){return this.cUq},t.prototype.cEditFrom=function(){return this.cUq.cTuidEditFromName(this.entity.name)},t.prototype.cInfoFrom=function(){return this.cUq.cTuidInfoFromName(this.entity.name)},t.prototype.cSelectFrom=function(){return this.cUq.cTuidSelectFromName(this.entity.name)},t.prototype.getLable=function(e){if(e===this.entity)return this.label;var t=e.name,n=this.res.arrs;if(void 0!==n){var r=n[t];if(void 0!==r){var i=r.label;if(void 0!==i)return i}}return t},Object.defineProperty(t.prototype,"VTuidMain",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VTuidEdit",{get:function(){return h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VTuidList",{get:function(){return y},enumerable:!0,configurable:!0}),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return this.isImport=this.entity.isImport,[4,this.openVPage(this.VTuidMain)];case 1:return e.sent(),[2]}})})},t.prototype.onEvent=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:switch(e){case"new":return[3,2];case"list":return[3,4];case"edit":return[3,6];case"item-changed":return[3,8];case"info":return[3,9]}return[3,1];case 1:return[2];case 2:return[4,this.onNew()];case 3:return n.sent(),[3,11];case 4:return[4,this.onList()];case 5:return n.sent(),[3,11];case 6:return[4,this.onEdit(t)];case 7:return n.sent(),[2];case 8:return this.itemChanged(t),[2];case 9:return[4,new N(this.cUq,this.entity,this.ui,this.res).start(t)];case 10:return n.sent(),[2];case 11:return[2]}})})},t.prototype.edit=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return void 0!==(t=this.ui&&this.ui.CTuidEdit)?[3,2]:[4,this.openVPage(this.VTuidEdit,e)];case 1:return n.sent(),[3,4];case 2:return[4,new t(this.cUq,this.entity,this.ui,this.res).start(e)];case 3:n.sent(),n.label=4;case 4:return[2]}})})},t.prototype.onNew=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.edit(void 0)];case 1:return e.sent(),[2]}})})},t.prototype.onList=function(){return r.b(this,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return void 0!==(e=this.ui&&this.ui.CTuidList)?[3,2]:[4,this.openVPage(this.VTuidList,void 0)];case 1:return t.sent(),[3,4];case 2:return[4,new e(this.cUq,this.entity,this.ui,this.res).start(void 0)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.onEdit=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return t=void 0,void 0===e?[3,2]:[4,this.entity.load(e)];case 1:t=n.sent(),n.label=2;case 2:return this.edit(t),[2]}})})},t.prototype.itemChanged=function(e){var t=e.id,n=e.values;if(void 0!==this.PageItems){var r=this.PageItems.items.find(function(e){return e.id===t});void 0!==r&&o.a.merge(r,n)}},t}(g),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return this.isImport=this.entity.isImport,[4,this.openVPage(this.VTuidMain)];case 1:return e.sent(),[2]}})})},t}(w),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return this.isImport=this.entity.isImport,"number"!==typeof e?[3,2]:[4,this.onEdit(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.edit(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.edit=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(this.VTuidEdit,e)];case 1:return t.sent(),[2]}})})},t}(w),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return this.isImport=this.entity.isImport,[4,this.openVPage(this.VTuidList)];case 1:return e.sent(),[2]}})})},t}(w),P=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return alert("tuid div: ??"),[2]})})}}(g),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(this.VTuidSelect,e)];case 1:return t.sent(),[2]}})})},t.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.entity.loadSchema()];case 1:return e.sent(),void 0!==this.PageItems&&this.PageItems.reset(),[2,!0]}})})},Object.defineProperty(t.prototype,"VTuidSelect",{get:function(){return m},enumerable:!0,configurable:!0}),t.prototype.idFromItem=function(e){return e.id},t}(g)),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.entity.load(e)];case 1:return t=n.sent(),[4,this.openVPage(this.VTuidInfo,t)];case 2:return n.sent(),[2]}})})},Object.defineProperty(t.prototype,"VTuidInfo",{get:function(){return v},enumerable:!0,configurable:!0}),t}(g);n.d(t,"d",function(){return E}),n.d(t,"a",function(){return C}),n.d(t,"c",function(){return k}),n.d(t,"e",function(){return P}),n.d(t,"b",function(){return N})},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=n(10),i=n.n(r),o={lang:void 0,district:void 0};function a(e){var t=o.lang,n=o.district,r={};if(void 0===e)return r;i.a.merge(r,e._);var a=e[t];if(void 0===a)return r;i.a.merge(r,a._);var s=a[n];if(void 0===s)return r;i.a.merge(r,s);var u=r.entity;if(void 0!==u)for(var c in u)u[c.toLowerCase()]=u[c];return r}!function(){var e,t,n=navigator.languages&&navigator.languages[0]||navigator.language;if(n){var r=n.split("-");e=r[0],r.length>1&&(t=r[1])}else e="zh",t="CN";!function(e,t){o.lang=e,o.district=t}(e,t)}()},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n.n(i),a=n(4),s=function(){function e(e){this.view=function(){return i.createElement("div",null)},this.label=e}return e.prototype.render=function(){return i.createElement("div",{key:this.key,className:"px-3"},i.createElement("div",{className:"form-group row"},i.createElement("label",{className:"col-sm-2 col-form-label"},this.label),i.createElement("div",{className:"col-sm-10"},this.renderContent())))},e.prototype.setAddRow=function(e){},Object.defineProperty(e.prototype,"key",{get:function(){return this.label},enumerable:!0,configurable:!0}),e.prototype.getVFields=function(){},e.prototype.getVArr=function(){},e.prototype.getVSubmit=function(){},e.prototype.renderContent=function(){return i.createElement("div",{className:"form-control form-control-plaintext bg-white border border-info rounded "},"content")},e}(),u=function(e){function t(t,n){var r=e.call(this,t)||this;return r.vField=n,r}return r.d(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return this.vField.name},enumerable:!0,configurable:!0}),t.prototype.getVFields=function(){return[this.vField]},t.prototype.renderContent=function(){return this.vField.render()},t}(s),c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.vArr=n,r}return r.d(t,e),t.prototype.setAddRow=function(e){this.vArr.setAddRow(e)},Object.defineProperty(t.prototype,"key",{get:function(){return this.vArr.name},enumerable:!0,configurable:!0}),t.prototype.getVArr=function(){return this.vArr},t.prototype.render=function(){return i.createElement(i.Fragment,{key:this.key},this.vArr&&this.vArr.render())},t}(s),l=(function(e){function t(t,n){var r=e.call(this,t)||this;return r.vFields=n,r}r.d(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return this.vFields[0].name},enumerable:!0,configurable:!0}),t.prototype.getVFields=function(){return this.vFields},t.prototype.renderContent=function(){return i.createElement("div",{className:"form-control form-control-plaintext bg-white border border-info rounded "},"fields")}}(s),function(e){function t(t){var n=e.call(this,void 0)||this;return n.vSubmit=t,n}return r.d(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return"$submit"},enumerable:!0,configurable:!0}),t.prototype.getVSubmit=function(){return this.vSubmit},t.prototype.render=function(){return i.createElement("div",{key:"$submit",className:"px-3"},i.createElement("div",{className:"form-group row"},i.createElement("div",{className:"offset-sm-2 col-sm-10"},this.vSubmit.render())))},t}(s)),h=n(15),d=n(5),p=function(e){function t(t){var n=e.call(this)||this;return n.onClickSubmit=function(){return r.b(n,void 0,void 0,function(){return r.e(this,function(e){return this.vForm.submit(),[2]})})},n.view=Object(a.a)(function(){var e=n.vForm.isOk;return i.createElement("button",{type:"button",onClick:n.onClickSubmit,className:n.className,disabled:!1===e},n.caption)}),n.vForm=t,n.caption=n.vForm.submitCaption,n.className="btn btn-primary w-25",n}return r.d(t,e),r.c([d.l],t.prototype,"caption",void 0),r.c([d.l],t.prototype,"className",void 0),t}(h.c),m=n(6),f=n.n(m),v=n(3),b=function(){return function(){}}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.check=function(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(NaN!==t)return;break;case"undefined":}e.push("\u4e0d\u80fd\u4e3a\u7a7a")},t}(b),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.check=function(e,t){void 0!==t&&null!==t&&(NaN===Number(t)&&e.push("\u5fc5\u987b\u662f\u6570\u5b57"))},t}(b),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.check=function(e,t){if(void 0!==t&&null!==t){var n=Number(t);!0!==Number.isNaN(n)&&!1!==Number.isInteger(n)||e.push("\u5fc5\u987b\u662f\u6574\u6570")}},t}(b),E=function(e){function t(t){var n=e.call(this)||this;return n.min=t,n}return r.d(t,e),t.prototype.check=function(t,n){e.prototype.check.call(this,t,n),Number(n)<this.min&&t.push("\u4e0d\u80fd\u5c0f\u4e8e"+this.min)},t}(g),C=function(e){function t(t){var n=e.call(this)||this;return n.max=t,n}return r.d(t,e),t.prototype.check=function(t,n){e.prototype.check.call(this,t,n),Number(n)>this.max&&t.push("\u4e0d\u80fd\u5c0f\u4e8e"+this.max)},t}(g),k=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.form=t,o.field=n,o.name=n.name,o.fieldUI=r||{},o.fieldRes=i||{},o.init(),o}return r.d(t,e),t.prototype.init=function(){this.buildRules()},t.prototype.buildRules=function(){this.rules=[],(!0===this.fieldUI.required||void 0!==this.field&&!1===this.field.null)&&this.rules.push(new y)},Object.defineProperty(t.prototype,"checkRules",{get:function(){for(var e=[],t=0,n=this.rules;t<n.length;t++){n[t].check(e,this.value)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOk",{get:function(){return 0===this.rules.length||0===this.checkRules.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.form.values[this.name]},enumerable:!0,configurable:!0}),t.prototype.setValue=function(e){this.form.values[this.name]=e},Object.defineProperty(t.prototype,"error",{get:function(){return this.form.errors[this.name]},set:function(e){this.form.errors[this.name]=e},enumerable:!0,configurable:!0}),t.prototype.parse=function(e){return e},Object.defineProperty(t.prototype,"readonly",{get:function(){var e=this.form.mode;return e===j.readonly||e===j.edit&&!1===this.fieldUI.editable},enumerable:!0,configurable:!0}),r.c([d.e],t.prototype,"checkRules",null),r.c([d.e],t.prototype,"isOk",null),r.c([d.e],t.prototype,"value",null),t}(h.c),P=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return i.createElement("input",{type:"text",className:"form-control form-control-plaintext border border-info rounded bg-light",placeholder:"unkown control: -"})},t}r.d(t,e)}(k),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderError=function(e){var n=t.form.errors[t.name];if(void 0!==n)return i.createElement("div",{className:e},i.createElement(v.FA,{name:"exclamation-circle"})," ",n)},t.ref=function(e){t.input=e,t.setInputValue()},t.onFocus=function(){t.error=void 0},t.onBlur=function(){var e=t.checkRules;e.length>0&&(t.error=e[0]),t.form.computeFields()},t.onChange=function(e){var n=t.parse(e.currentTarget.value);null!==n&&t.setValue(n)},t.view=Object(a.a)(function(){var e,n,r,o=t.fieldUI.required,a=t.fieldRes,s=a.placeHolder,u=a.suffix,c=["form-control","form-control-input"];return!0===t.readonly?n=i.createElement("input",{className:f()(c,"bg-light"),ref:t.ref,type:t.inputType,readOnly:!0}):(n=i.createElement("input",{className:f()(c),ref:t.ref,type:t.inputType,onFocus:t.onFocus,onBlur:t.onBlur,onChange:t.onChange,placeholder:s,readOnly:!1,maxLength:t.maxLength,onKeyPress:t.onKeyPress}),!0!==o&&!1!==t.field.null||(e=i.createElement(N,null))),r=void 0===u?n:i.createElement("div",{className:"input-group"},n,i.createElement("div",{className:"input-group-append"},i.createElement("span",{className:"input-group-text"},u))),i.createElement(i.Fragment,null,e,r,t.renderError("text-danger small mt-1 mx-2"))}),t}return r.d(t,e),Object.defineProperty(t.prototype,"maxLength",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.setValue=function(t){e.prototype.setValue.call(this,t),this.setInputValue()},t.prototype.setInputValue=function(){if(this.input){var e=this.value;this.input.value=null===e||void 0===e?"":e}},t}(k)),N=function(){return i.createElement("b",{style:{color:"red",position:"absolute",left:"0.1em",top:"0.5em"}},"*")},S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="text",t}return r.d(t,e),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.field.size},enumerable:!0,configurable:!0}),t}(P),x=45,T=46,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="number",t.onKeyPress=function(e){var n=e.charCode;if(!(8===n||0===n||13===n||n>=48&&n<=57))if(void 0!==t.extraChars&&t.extraChars.indexOf(n)>=0)switch(n){case T:t.onKeyDot();break;case x:t.onKeyNeg(),e.preventDefault()}else e.preventDefault()},t}return r.d(t,e),t.prototype.init=function(){if(e.prototype.init.call(this),this.extraChars=[],void 0!==this.fieldUI){var t=this.fieldUI,n=t.min;t.max;void 0!==n?n<0&&this.extraChars.push(x):this.extraChars.push(x)}switch(this.field.type){case"dec":case"bigint":case"int":case"smallint":case"tinyint":this.extraChars.push(T)}},t.prototype.buildRules=function(){e.prototype.buildRules.call(this),this.rules.push(new g);var t=this.fieldUI,n=t.min,r=t.max;void 0!==n&&this.rules.push(new E(n)),void 0!==r&&this.rules.push(new C(r))},t.prototype.parse=function(e){try{if(0===e.trim().length)return;var t=Number(e);return NaN===t?null:t}catch(n){return null}},t.prototype.setInputValue=function(){if(this.input){var e=this.value;this.parse(this.input.value)!=e&&(this.input.value=null===e||void 0===e?"":e)}},t.prototype.onKeyDot=function(){var e=this.input.value;e.indexOf(".")>=0&&(this.input.value=e.replace(".",""))},t.prototype.onKeyNeg=function(){var e=this.input.value,t=e.indexOf("-");e=t>=0?e.replace("-",""):"-"+e,this.input.value=e},t}(P),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.buildRules=function(){e.prototype.buildRules.call(this),this.rules.push(new w)},t}(I),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(I),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(S),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(S),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(S);var j,R=function(e){function t(t,n,r){var i=e.call(this,t,n,void 0,r)||this;return i.view=Object(a.a)(function(){var e=i.form.values[i.field.name],t=i.fieldRes,n=t.placeHolder,r=t.suffix;null===e&&(e="");var a=o.a.createElement("input",{className:"form-control form-control-input bg-light",type:"text",placeholder:n,readOnly:!0,value:e});return void 0===r?a:o.a.createElement("div",{className:"input-group"},a,o.a.createElement("div",{className:"input-group-append"},o.a.createElement("span",{className:"input-group-text"},r)))}),i}return r.d(t,e),t}(k),L=n(10),M=n.n(L),D=function(e){function t(t,n,o){var a=e.call(this)||this;a.rowPage=function(){return i.createElement(v.Page,{header:a.label,back:"close"},a.vForm.render("py-3"))},a.onSubmit=function(){return r.b(a,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return e=this.vForm.valueBoxs,[4,this.onRowChanged(e)];case 1:return t.sent(),[2]}})})},a.onRowChanged=function(e){return r.b(a,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0!==this.rowValues?[3,4]:(e.$owner=this.ownerForm.values,this.list.push(e),void 0!==this.onEditRow?[3,1]:(this.vForm.reset(),[3,3]));case 1:return[4,this.onEditRow(void 0,this.onRowChanged)];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:M.a.merge(this.rowValues,e),void 0===this.onEditRow&&v.nav.pop(),t.label=5;case 5:return[2]}})})},a.renderItem=function(e,t){return void 0===a.rowContent?i.createElement("div",{className:"px-3 py-2"},i.createElement(h.a,r.a({},e))):i.createElement(a.rowContent,r.a({},e))},a.showRow=function(e){return r.b(a,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return void 0===this.onEditRow?[3,2]:[4,this.onEditRow(e,this.onRowChanged)];case 1:return t.sent(),[2];case 2:return this.vForm.reset(),void 0!==e&&this.vForm.setValues(e),v.nav.push(i.createElement(this.rowPage,null)),[2]}})})},a.editRow=function(e){return r.b(a,void 0,Promise,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return this.rowValues=e,void 0!==(t=this.vForm.vSubmit)&&(t.caption=this.editSubmitCaption,t.className="btn btn-outline-success"),this.vForm.mode=this.ownerForm.mode,[4,this.showRow(e)];case 1:return n.sent(),[2]}})})},a.internalAddRow=function(){return r.b(a,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return this.rowValues=void 0,(e=this.vForm.vSubmit).caption=this.newSubmitCaption,e.className="btn btn-outline-success",this.vForm.reset(),this.vForm.mode=j.new,[4,this.showRow(void 0)];case 1:return t.sent(),[2]}})})},a.view=function(){var e;void 0===a.addRow&&a.mode===j.readonly||(e=i.createElement("button",{onClick:a.addRow||a.internalAddRow,type:"button",className:"btn btn-link p-0"},a.ownerForm.arrTitleNewButton));var t=a.header||i.createElement("div",{className:"px-3 bg-light small",style:{paddingTop:"1px",paddingBottom:"1px"}},i.createElement("div",{className:"flex-fill align-self-center"},a.label),e);return i.createElement(v.List,{className:"pb-3",header:t,none:i.createElement(v.Muted,{className:"px-3 py-2"},a.none),items:a.list,item:{render:a.renderItem,onClick:a.editRow}})},a.ownerForm=t;var s=n.name,u=n.fields;a.name=s;var c=t.ui,l=t.res,d=t.mode,p=t.inputs,m=t.values,f=l.arrs,b=void 0!==f?f[s]:{},y=b.label,g=b.none,w=b.newSubmit,E=b.editSubmit;a.none=g||t.none,a.newSubmitCaption=w||t.arrNewCaption,a.editSubmitCaption=E||t.arrEditCaption,a.label=y||s;var C=c&&c.items[s]||{};return a.rowContent=C.rowContent,a.mode=d,void 0===a.onEditRow?a.vForm=new H({fields:u,arrs:void 0,ui:C,res:b,inputs:p[s],none:t.none,submitCaption:"submit",arrNewCaption:void 0,arrEditCaption:void 0,arrTitleNewButton:void 0,mode:d},d===j.readonly?void 0:a.onSubmit):a.onEditRow=o,a.list=m[s],a}return r.d(t,e),t.prototype.reset=function(){this.vForm.reset(),this.list.clear()},t.prototype.setAddRow=function(e){this.addRow=e},t}(h.c),B=n(23),U={textAlign:"left",paddingLeft:"0.75rem",paddingRight:"0.75rem",overflow:"hidden"},W=function(e){function t(t,n,o,s){var u=e.call(this,t,n,o,s)||this;return u.onClick=function(){return r.b(u,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return!0!==this.readonly?[3,2]:this.value?[4,this.tuid.showInfo()]:[2];case 1:return t.sent(),[2];case 2:return void 0===this.input?[3,4]:[4,this.input.select(this.vForm,this.field,this.vForm.getValues())];case 3:return e=t.sent(),[3,5];case 4:alert("call undefined"),e=0,t.label=5;case 5:return this.setValue(this.tuid.boxId(e)),[2]}})})},u.view=Object(a.a)(function(){var e,t=u.fieldRes.placeHolder,n=!1,r=u.field._tuid.ownerField;if(void 0!==r){var o=r.name;r.arr;n=null===u.vForm.getValue(o)}if(null===u.value)e=i.createElement(i.Fragment,null,t||u.input.placeHolder);else if("object"===typeof u.value)e=Object(B.b)(u.value);else{var a=u.tuid.boxId(u.value);e=Object(B.b)(a)}if(!0===u.readonly)return i.createElement("div",{className:"form-control form-control-plaintext border border-info rounded bg-light cursor-pointer",onClick:u.onClick},e);var s=(!0===u.fieldUI.required||!1===u.field.null)&&i.createElement(N,null);return i.createElement(i.Fragment,null,s,i.createElement("button",{className:"form-control btn btn-outline-info",type:"button",disabled:n,style:U,onClick:u.onClick},e))}),u.tuid=n._tuid,u.vForm=t,u.input=t.inputs[n.name],u}return r.d(t,e),t}(k),z=function(){function e(e,t,n){this.vForm=e,this.onSubmit=n;var r=t.fields,i=t.arrs,o=t.ui,a=t.res;if(this.fields=r,this.arrs=i,void 0!==o){var s=o.items,u=o.layout;this.formItems=s,this.layout=u}this.res=a}return e.prototype.build=function(){return void 0===this.layout?this.bandsOnFly():this.bandsFromLayout()},e.prototype.resFromName=function(e,t){if(void 0!==t){var n=t.fields;if(void 0!==n)return n[e]||e}},e.prototype.bandsOnFly=function(){var e=[];if(this.bandsFromFields(e,this.fields,this.res),void 0!==this.arrs)for(var t=0,n=this.arrs;t<n.length;t++){var r=n[t];e.push(this.bandFromArr(r))}return void 0!==this.onSubmit&&e.push(new l(new p(this.vForm))),e},e.prototype.bandsFromFields=function(e,t,n){if(void 0!==t)for(var r=0,i=t;r<i.length;r++){var o=i[r];e.push(this.bandFromField(o,n))}},e.prototype.bandsFromLayout=function(){return[]},e.prototype.bandFromField=function(e,t){var n,r,i,o,a=e.name,s=this.resFromName(a,t);return"object"===typeof s?(r=s.label,n=s):(r=s,n=void 0),void 0!==this.formItems&&(o=this.formItems[a]),void 0===(i="function"===typeof o?new R(this.vForm,e,n):function(e,t,n,r){var i;switch(t.type){default:return;case"tinyint":case"smallint":case"int":case"bigint":i=F;break;case"id":if(void 0!==t._tuid)return;i=F;break;case"dec":i=A;break;case"char":i=S;break;case"text":i=V;break;case"datetime":i=q;break;case"date":i=O}return new i(e,t,n,r)}(this.vForm,e,o,n))&&(i=new W(this.vForm,e,o,n)),new u(r||a,i)},e.prototype.bandFromArr=function(e){var t=e.name,n=(e.fields,new D(this.vForm,e));return new c(t,n)},e}();!function(e){e[e.new=0]="new",e[e.edit=1]="edit",e[e.readonly=2]="readonly"}(j||(j={}));var H=function(){function e(e,t){var n=this;this.vFields={},this.vArrs={},this.onFormSubmit=function(e){return e.preventDefault(),!1},this.view=Object(a.a)(function(e){var t=e.className;return i.createElement("form",{className:t,onSubmit:n.onFormSubmit},n.bands.map(function(e){return e.render()}))});var r=e.fields,o=e.arrs,s=e.ui,u=e.res,c=e.inputs,l=e.none,h=e.submitCaption,d=e.arrNewCaption,p=e.arrEditCaption,m=e.arrTitleNewButton,f=e.mode;this.fields=r,this.arrs=o,this.ui=s,void 0!==this.ui&&(this.formItems=this.ui.items),this.res=u,this.inputs=c,this.none=l,this.submitCaption=h,this.arrNewCaption=d,this.arrEditCaption=p,this.arrTitleNewButton=m||i.createElement("small",null,i.createElement(v.FA,{name:"plus"})," \u65b0\u589e"),this.mode=void 0===t?j.readonly:f,this.buildFormValues(),this.buildBands(e,t),this.onSubmit=t}return e.prototype.buildBands=function(e,t){this.bandColl={};var n=new z(this,e,t);this.bands=n.build();for(var r=0,i=this.bands;r<i.length;r++){var o=i[r];this.bandColl[o.key]=o;var a=o.getVFields();if(void 0!==a)for(var s=0,u=a;s<u.length;s++){var c=u[s];this.vFields[c.name]=c}var l=o.getVArr();void 0!==l&&(this.vArrs[l.name]=l);var h=o.getVSubmit();void 0!==h&&(this.vSubmit=h)}},e.prototype.getBand=function(e){return this.bandColl[e]},e.prototype.computeFields=function(){if(void 0!==this.formItems){var e=this.values;for(var t in this.formItems){var n=this.formItems[t];"function"===typeof n&&(e[t]=n.call(this,e))}}},e.prototype.submit=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return void 0===this.onSubmit?[2]:[4,this.onSubmit()];case 1:return e.sent(),[2]}})})},e.prototype.getValues=function(){for(var e={},t=this.values,n=0,r=this.fields;n<r.length;n++){var i=t[u=r[n].name];e[u]=null!==i&&"object"===typeof i?i.id:i}if(void 0!==this.arrs)for(var o=0,a=this.arrs;o<a.length;o++)for(var s=a[o],u=s.name,c=s.fields,l=s.id,h=s.order,d=e[u]=[],p=0,m=this.vArrs[u].list;p<m.length;p++){var f=m[p],v={};void 0!==l&&(v[l]=f[l]),void 0!==h&&(v[h]=f[h]);for(var b=0,y=c;b<y.length;b++){var g=y[b].name;i=f[g];v[g]=null!==i&&"object"===typeof i?i.id:i}d.push(v)}return e},Object.defineProperty(e.prototype,"valueBoxs",{get:function(){for(var e={},t=this.values,n=0,r=this.fields;n<r.length;n++){var i=(v=r[n]).name,o=v._tuid,a=t[i];e[i]=void 0===o||"object"===typeof a?a:o.boxId(a)}if(void 0===this.arrs)return e;for(var s=0,u=this.arrs;s<u.length;s++)for(var c=u[s],l=(i=c.name,c.fields),h=(c.id,c.order,0),d=e[i]=this.vArrs[i].list.slice();h<d.length;h++)for(var p=d[h],m=0,f=l;m<f.length;m++){var v,b=(v=f[m]).name;o=v._tuid,a=p[b];p[b]=void 0===o||"object"===typeof a?a:o.boxId(a)}return e},enumerable:!0,configurable:!0}),e.prototype.setValues=function(e){if(void 0!==e){for(var t=this.values,n=this.errors,r=0,i=this.fields;r<i.length;r++){var o=i[r].name;n[o]=void 0;var a=e[o];t[o]=a}for(var s in this.vArrs){var u=e[s];if(void 0!==u){var c=t[s];c.clear(),c.push.apply(c,u)}}}else this.reset()},Object.defineProperty(e.prototype,"isOk",{get:function(){for(var e in this.vFields)if(!1===this.vFields[e].isOk)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e=this.values,t=this.errors,n=0,r=this.fields;n<r.length;n++){var i=r[n].name;e[i]=null,t[i]=void 0}for(var o in this.vFields){var a=this.vFields[o];void 0!==a.name&&a.setValue(null)}for(var o in this.vArrs){this.vArrs[o].reset()}},e.prototype.getValue=function(e){return this.values[e]},e.prototype.setValue=function(e,t){this.values[e]=t},e.prototype.setError=function(e,t){this.errors[e]=t},e.prototype.buildFieldValues=function(e){for(var t={valueFromFieldName:function(e){return this[e]}},n=0,r=e;n<r.length;n++){t[r[n].name]=null}return t},e.prototype.buildObservableValues=function(){var e=this.buildFieldValues(this.fields);if(void 0!==this.arrs)for(var t=0,n=this.arrs;t<n.length;t++){e[n[t].name]=d.l.array([],{deep:!0})}return Object(d.l)(e)},e.prototype.buildFormValues=function(){this.values=this.buildObservableValues(),this.errors=Object(d.l)(this.buildFieldValues(this.fields))},e.prototype.render=function(e){return void 0===e&&(e="py-3"),i.createElement(this.view,{className:e})},r.c([d.e],e.prototype,"isOk",null),e}();n.d(t,"a",function(){return j}),n.d(t,"b",function(){return H})},,function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r=n(1);function i(e,t,n,i,o){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,e.fetch(t,n,i,o)];case 1:return r.sent(),[2]}})})}var o=function(){function e(e,t){this.path=e||"",this.showWaiting=t}return e.prototype.xcall=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,t.sent().xcall(this.path,e)];case 2:return[2,t.sent()]}})})},e.prototype.call=function(e,t,n){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,r.sent().callFetch(e,t,n)];case 2:return[2,r.sent()]}})})},e.prototype.get=function(e,t){return void 0===t&&(t=void 0),r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,n.sent().get(this.path+e,t)];case 2:return[2,n.sent()]}})})},e.prototype.post=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,n.sent().post(this.path+e,t)];case 2:return[2,n.sent()]}})})},e.prototype.put=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,n.sent().put(this.path+e,t)];case 2:return[2,n.sent()]}})})},e.prototype.delete=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.getHttpChannel()];case 1:return[4,n.sent().delete(this.path+e,t)];case 2:return[2,n.sent()]}})})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(0),o=n(9),a=function(e){function t(t){var n=e.call(this,t)||this;return n.logoutClick=function(){o.b.showLogout(n.logout)},n.logout=function(){return r.b(n,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return"function"!==typeof(e=this.props.logout)?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[4,o.b.logout(void 0)];case 3:return t.sent(),[2]}})})},n.navChange=n.navChange.bind(n),n.state={hasBack:!1},n}return r.d(t,e),t.prototype.navChange=function(){this.setState({hasBack:o.b.level>1})},t.prototype.componentWillMount=function(){this.navChange()},t.prototype.componentWillUnmount=function(){},t.prototype.back=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,o.b.back()];case 1:return e.sent(),[2]}})})},t.prototype.openWindow=function(){window.open(document.location.href)},t.prototype.render=function(){var e,t,n,r=this.state.hasBack||self!=top,a=this.props,s=a.right,u=a.center,c=a.logout,l=a.className;if(void 0!==c&&self===top&&("boolean"===typeof c&&!0===c||"function"===typeof c)){var h=o.b.user;if(void 0!==h){var d=h.nick,p=h.name;n=i.createElement("div",{className:"d-flex align-items-center"},i.createElement("small",{className:"text-light"},d||p),i.createElement("a",{className:"btn ml-2 cursor-pointer",role:"button",onClick:this.logoutClick},i.createElement("i",{className:"fa fa-sign-out fa-lg"})))}}if(r)switch(this.props.back){case"none":e=void 0;break;default:case"back":e=i.createElement("nav",{onClick:this.back},i.createElement("i",{className:"fa fa-angle-left"}));break;case"close":e=i.createElement("nav",{onClick:this.back},i.createElement("i",{className:"fa fa-close"}))}self!=top&&(console.log(document.location.href),t=i.createElement("header",{onClick:this.openWindow}));var m=(s||n)&&i.createElement("aside",null,s," ",n);return i.createElement("header",{className:l},t,e,i.createElement("div",null,u),m)},t}(i.Component)},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(0),a=n.n(o),s=n(4),u=n(3),c=n(12),l=function(e){return a.a.createElement("div",{className:"px-3 py-2"},Object(c.b)(e))},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return e=this.vForm.getValues(),!0!==this.entity.isPaged?[3,3]:[4,this.entity.resetPage(30,e)];case 1:return n.sent(),[4,this.entity.loadPage()];case 2:return n.sent(),this.replacePage(this.pageResult),[3,5];case 3:return[4,this.entity.query(e)];case 4:t=n.sent(),this.replacePage(this.queryResult,t),n.label=5;case 5:return[2]}})})},t.again=function(){t.vForm.reset(),t.replacePage(t.view)},t.renderRow=function(e,n){return o.createElement(t.row,r.a({},e))},t.view=function(){return o.createElement(u.Page,{header:t.label},t.vForm.render("mx-3 my-2"),t.renderExtra())},t.pageResult=function(){var e=t.entity,n=(e.name,e.list),r=o.createElement("button",{className:"btn btn-outline-success",onClick:t.again},o.createElement(u.FA,{name:"search"})," \u518d\u67e5\u8be2");return o.createElement(u.Page,{header:t.label,right:r},o.createElement(u.List,{items:n,item:{render:t.renderRow}}))},t.queryResult=Object(s.a)(function(e){var n=o.createElement("button",{className:"btn btn-outline-success",onClick:t.again},o.createElement(u.FA,{name:"search"})," \u518d\u67e5\u8be2");return o.createElement(u.Page,{header:t.label,right:n},o.createElement("pre",null,JSON.stringify(e,void 0,"\t")))}),t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){var t,n,i;return r.e(this,function(r){return this.vForm=this.createForm(this.onSubmit,e),t=this.ui,n=t.row,i=t.queryRow,this.row=i||n||l,this.openPage(this.view),[2]})})},t.prototype.renderExtra=function(){},t}(i.b),d=n(11),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSearch=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.PageItems.first(e)];case 1:return t.sent(),[2]}})})},t.renderRow=function(e,n){return o.createElement(t.row,r.a({},e))},t.clickRow=function(e){t.callOnSelected(e)},t.view=function(){var e=o.createElement(u.SearchBox,{className:"mx-1 w-100",initKey:"",onSearch:t.onSearch,placeholder:"\u641c\u7d22"+t.label});return o.createElement(u.Page,{header:e},o.createElement(u.List,{items:t.PageItems.items,item:{render:t.renderRow,onClick:t.clickRow},before:"\u641c\u7d22"+t.label+"\u8d44\u6599"}))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){var t,n,i;return r.e(this,function(r){switch(r.label){case 0:return t=this.ui,n=t.row,i=t.selectRow,this.row=i||n||l,this.PageItems=new m(this.entity),[4,this.onSearch(e)];case 1:return r.sent(),this.openPage(this.view),[2]}})})},t.prototype.callOnSelected=function(e){this.closePage(),this.returnCall(e)},t}(i.b),m=function(e){function t(t){var n=e.call(this)||this;return n.query=t,n}return r.d(t,e),t.prototype.load=function(){return r.b(this,void 0,Promise,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.query.loadSchema()];case 1:return n.sent(),!0!==this.query.isPaged?[3,3]:[4,this.query.page(this.param,this.pageStart,this.pageSize)];case 2:return e=n.sent(),[3,5];case 3:return[4,this.query.query(this.param)];case 4:t=n.sent(),e=t[this.query.returns[0].name],n.label=5;case 5:return[2,e]}})})},t.prototype.setPageStart=function(e){void 0===e&&(this.pageStart=0)},t}(d.b),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(i.a),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VQueryMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VQueryMain",{get:function(){return this.ui&&this.ui.main||h},enumerable:!0,configurable:!0}),t}(f),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(this.VQuerySelect,e)];case 1:return t.sent(),[2]}})})},Object.defineProperty(t.prototype,"VQuerySelect",{get:function(){return p},enumerable:!0,configurable:!0}),t}(f);n.d(t,"a",function(){return v}),n.d(t,"b",function(){return b})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(1),i=n(0),o=n(4),a=n(5),s=n(38),u=n(22),c=n(9),l=n(14),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.overSize=!1,t.upload=function(){return r.b(t,void 0,void 0,function(){var e,t=this;return r.e(this,function(n){switch(n.label){case 0:return this.resUploader?[4,this.resUploader.upload()]:[2];case 1:return null===(e=n.sent())?(this.overSize=!0,setTimeout(function(){return t.overSize=!1},3e3),[2]):(this.resId=e,this.isChanged=this.resId!=this.value,[2])}})})},t.page=Object(o.a)(function(e){var n,r=e.resolve,o=i.createElement("button",{className:"btn btn-sm btn-success",disabled:!t.isChanged,onClick:function(){return r(t.resId)}},"\u4fdd\u5b58");return!0===t.overSize&&(n=i.createElement("div",{className:"text-danger"},i.createElement("i",{className:"fa fa-times-circle"})," \u56fe\u7247\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc72M\uff0c\u65e0\u6cd5\u4e0a\u4f20")),i.createElement(l.a,{header:"\u66f4\u6539"+t.label,right:o},i.createElement("div",{className:"my-3 px-3 py-3 bg-white"},i.createElement("div",null,i.createElement("div",null,"\u4e0a\u4f20\u56fe\u7247\uff1a"),i.createElement("div",{className:"my-3"},i.createElement(s.a,{ref:function(e){return t.resUploader=e},multiple:!1,maxSize:2048})),i.createElement("div",null,i.createElement("button",{className:"btn btn-primary",onClick:t.upload},"\u4e0a\u4f20"))),n,i.createElement("div",{className:"small muted my-4"},"\u652f\u6301JPG\u3001GIF\u3001PNG\u683c\u5f0f\u56fe\u7247\uff0c\u4e0d\u8d85\u8fc72M\u3002"),i.createElement("div",{className:"d-flex"},i.createElement("div",{className:"w-12c h-12c mr-4",style:{border:"1px dotted gray",padding:"8px"}},i.createElement(u.a,{className:"w-100 h-100",src:t.resId})),i.createElement("div",null,i.createElement("div",{className:"small"},"\u56fe\u7247\u9884\u89c8"),i.createElement(u.a,{className:"w-4c h-4c mt-3",src:t.resId})))))}),t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return this.resId=this.value,[2,new Promise(function(t,n){c.b.push(i.createElement(e.page,{resolve:t,reject:n}),function(){return n()})})]})})},r.c([a.l],t.prototype,"resId",void 0),r.c([a.l],t.prototype,"overSize",void 0),t}(n(21).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(8),o=n(24),a=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.login=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,a,s;return r.e(this,function(r){switch(r.label){case 0:return[4,this.get("login",e)];case 1:switch(typeof(t=r.sent())){default:return[2];case"string":return[2,Object(o.b)(t)];case"object":return n=t.token,i=Object(o.b)(n),a=t.nick,s=t.icon,a&&(i.nick=a),s&&(i.icon=s),[2,i]}return[2]}})})},t.prototype.register=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.post("register",e)];case 1:return[2,t.sent()]}})})},t.prototype.setVerify=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.post("set-verify",{account:e,type:t})];case 1:return[2,n.sent()]}})})},t.prototype.checkVerify=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.post("check-verify",{account:e,verify:t})];case 1:return[2,n.sent()]}})})},t.prototype.isExists=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("is-exists",{account:e})];case 1:return[2,t.sent()]}})})},t.prototype.resetPassword=function(e,t,n,i){return r.b(this,void 0,void 0,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.post("reset-password",{account:e,password:t,verify:n,type:i})];case 1:return[2,r.sent()]}})})},t.prototype.userSetProp=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.post("tie/user-set-prop",{prop:e,value:t})];case 1:return n.sent(),[2]}})})},t}(i.b))("tv/user/",void 0)},,function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(5),o=n(16),a=function(){function e(e){void 0===e&&(e=!1),this.isFirst=!0,this.loading=!1,this.beforeLoad=!0,this.loaded=!1,this.allLoaded=!1,this.firstSize=100,this.pageStart=void 0,this.pageSize=30,this.appendPosition="tail",this._items=i.l.array([],{deep:e})}return Object.defineProperty(e.prototype,"items",{get:function(){return!0===this.beforeLoad?null:!1!==this.loaded?this._items:void 0},enumerable:!0,configurable:!0}),e.prototype.scrollToTop=function(){this.topDiv="$$"+Object(o.a)()},e.prototype.scrollToBottom=function(){this.bottomDiv="$$"+Object(o.a)()},e.prototype.reset=function(){this.isFirst=!0,this.beforeLoad=!0,this.loaded=!1,this.param=void 0,this.allLoaded=!1,this._items.clear(),this.setPageStart(void 0)},e.prototype.append=function(e){"tail"===this.appendPosition?this._items.unshift(e):this._items.push(e)},e.prototype.first=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return this.reset(),this.beforeLoad=!1,this.param=e,[4,this.more()];case 1:return t.sent(),[2]}})})},e.prototype.more=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o;return r.e(this,function(r){switch(r.label){case 0:return!0===this.allLoaded?[2]:!0===this.loading?[2]:(this.loading=!0,e=this.pageSize+1,!0===this.isFirst&&this.firstSize>this.pageSize&&(e=this.firstSize+1),[4,this.load(this.param,this.pageStart,e)]);case 1:return t=r.sent(),this.loading=!1,this.loaded=!0,n=t.length,!0===this.isFirst&&n>this.firstSize||!1===this.isFirst&&n>this.pageSize?(this.allLoaded=!1,--n,t.splice(n,1)):this.allLoaded=!0,0===n?(this._items.clear(),[2]):(this.setPageStart(t[n-1]),"tail"===this.appendPosition?(i=this._items).push.apply(i,t):(o=this._items).unshift.apply(o,t.reverse()),this.isFirst=!1,[2])}})})},r.c([i.l],e.prototype,"loading",void 0),r.c([i.l],e.prototype,"beforeLoad",void 0),r.c([i.l],e.prototype,"loaded",void 0),r.c([i.l],e.prototype,"allLoaded",void 0),r.c([i.e],e.prototype,"items",null),r.c([i.l],e.prototype,"topDiv",void 0),r.c([i.l],e.prototype,"bottomDiv",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0);function i(){return r.createElement("div",{className:"d-flex h-100 align-items-center justify-content-center"},r.createElement("i",{className:"fa fa-spinner fa-spin fa-2x fa-fw text-info"}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(0),o=n(9),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.upload=function(){return r.b(t,void 0,Promise,function(){var e,t,n,i,a,s,u,c,l;return r.e(this,function(r){switch(r.label){case 0:for(void 0===(e=this.props.maxSize)||e<=0?e=1e11:e*=1024,t=o.b.resUrl+"upload",n=this.fileInput.files,i=new FormData,a=n.length,s=0;s<a;s++){if((u=n[s]).size>e)return[2,null];i.append("files[]",u,u.name)}r.label=1;case 1:return r.trys.push([1,4,,5]),c=new AbortController,[4,fetch(t,{method:"POST",body:i,signal:c.signal})];case 2:return[4,r.sent().json()];case 3:return[2,":"+r.sent().res.id];case 4:return l=r.sent(),console.error("%s %s",t,l),[3,5];case 5:return[2]}})})},t}return r.d(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.multiple,o=t.onFilesChange;return i.createElement("input",{className:n,ref:function(t){return e.fileInput=t},onChange:o,type:"file",name:"file",multiple:r})},t}(i.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n.n(r),o=n(3);function a(e,t){return i.a.createElement(o.FA,{className:e,name:t,fixWidth:!0})}var s={tuid:a("text-info","list-alt"),action:a("text-info","hand-o-right"),map:a("text-muted","list-ul"),book:a("text-muted","book"),query:a("text-warning","search"),history:a("text-info","hand-o-right"),pending:a("text-info","forward"),sheet:a("text-primary","wpforms")}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),i=function(e){function t(t,n){var r=e.call(this,n)||this;return r.cUq=t,r}return r.d(t,e),t}(n(3).Controller)},function(e,t,n){"use strict";var r=n(1),i=n(5),o=n(8),a=n(7),s=n(0),u=n.n(s),c=n(4),l=n(3),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.newClick=function(){return t.event("new")},t.schemaClick=function(){return t.event("schema")},t.archivesClick=function(){return t.event("archives")},t.sheetStateClick=function(e){return t.event("state",e)},t.renderState=function(e,n){var r=e.state,i=e.count;if(0===i)return null;var o=s.createElement("span",{className:"badge badge-success ml-5 align-self-end"},i);return s.createElement(l.LMR,{className:"px-3 py-2",left:t.controller.getStateLabel(r),right:o})},t.view=Object(c.a)(function(){var e,n=t.controller.statesCount.filter(function(e){return e.count}),r=s.createElement("button",{className:"btn btn-outline-primary",onClick:t.archivesClick},"\u5df2\u5f52\u6863");return!0===t.isDev&&(e=s.createElement("button",{className:"btn btn-primary mr-2",color:"primary",onClick:t.schemaClick},"\u6a21\u677f")),s.createElement(l.Page,{header:t.label},s.createElement(l.LMR,{className:"mx-3 my-2",right:r},s.createElement("button",{className:"btn btn-primary mr-2",color:"primary",onClick:t.newClick},"\u65b0\u5efa"),e),s.createElement(l.List,{className:"my-2",header:s.createElement(l.Muted,{className:"mx-3 my-1"},"\u5f85\u5904\u7406",t.label),none:"[ \u65e0 ]",items:n,item:{render:t.renderState,onClick:t.sheetStateClick}}))}),t}return r.d(t,e),t.prototype.open=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(a.b),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(){return r.b(t,void 0,Promise,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return e=this.vForm.getValues(),t=this.vForm.values,[4,this.controller.onSave(e,t)];case 1:return n.sent(),[2]}})})},t.view=function(){return s.createElement(l.Page,{header:t.label},t.vForm.render())},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.vForm=this.createForm(this.onSubmit,e),this.openPage(this.view),[2]})})},t}(a.b),p=n(28),m={width:"8rem"},f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flowRow=function(e,t){var n,r=e.date,i=(e.user,e.preState,e.state),o=e.action;switch(void 0===o&&(o=s.createElement(s.Fragment,null,s.createElement(l.FA,{className:"text-primary",name:"pencil-square-o"})," \u5236\u5355")),i){case"$":break;case"#":n=s.createElement(s.Fragment,null,s.createElement(l.FA,{className:"text-success",name:"file-archive-o"}));break;default:n=s.createElement(s.Fragment,null,s.createElement(l.FA,{className:"text-muted",name:"arrow-right"})," \xa0 ",i)}return s.createElement(l.LMR,{left:s.createElement("div",{className:"pl-3 py-2",style:m},o),right:s.createElement("div",{className:"p-2"},s.createElement(l.Muted,null,s.createElement(l.EasyDate,{date:r})))},s.createElement("div",{className:"p-2"},n))},t.sheetView=function(){var e,n=t.sheetData,r=n.brief,i=n.flows;return"-"===r.state&&(e=s.createElement("div",{className:"mx-3 my-2",style:{color:"red"}},"\u672c\u5355\u636e\u4f5c\u5e9f")),s.createElement("div",null,e,t.vForm.render(),s.createElement(l.List,{header:s.createElement(l.Muted,{className:"mx-3 my-1"},"\u6d41\u7a0b"),items:i,item:{render:t.flowRow}}))},t}return r.d(t,e),t}(a.b),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(){return r.b(t,void 0,Promise,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return e=this.vForm.getValues(),[4,this.controller.saveSheet(e,this.vForm.values)];case 1:return t.sent(),this.closePage(),this.returnCall(this.vForm.values),[2]}})})},t.view=function(){return s.createElement(l.Page,{header:t.label},t.vForm.render())},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.sheetData=e,this.vForm=this.createForm(this.onSubmit,e.data,p.a.edit),this.openPage(this.view),[2]})})},t}(f),b=n(6),y=n.n(b),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actionClick=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,o;return r.e(this,function(r){switch(r.label){case 0:return t=this.sheetData.brief,n=t.id,i=t.flow,o=t.state,[4,this.controller.action(n,i,o,e.name)];case 1:return r.sent(),this.ceasePage(),this.openPage(this.acted),[2]}})})},t.deleteClick=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return alert("\u5355\u636e\u4f5c\u5e9f\uff1a\u7a0b\u5e8f\u6b63\u5728\u8bbe\u8ba1\u4e2d"),[2]})})},t.editClick=function(){return r.b(t,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return[4,this.controller.editSheet(this.sheetData)];case 1:return e=t.sent(),this.vForm.setValues(e),[2]}})})},t.page=function(){var e,n,r=t.sheetData.brief,i=r.state,o=r.no,a=t.controller.getStateLabel(i),s=t.entity.states.find(function(e){return e.name===i});if(void 0===s){var c=void 0,h=void 0;switch(i){default:c="\u4e0d\u8ba4\u8bc6\u7684\u5355\u636e\u72b6\u6001'"+i+"'",h="text-info";break;case"-":c="\u5df2\u4f5c\u5e9f",h="text-danger";break;case"#":c="\u5df2\u5f52\u6863",h="text-success"}e=u.a.createElement("div",{className:y()(h)},"[",c,"]")}else e=u.a.createElement("div",{className:"flex-grow-1"},s.actions.map(function(e,n){return u.a.createElement("button",{key:n,className:"btn btn-primary mr-2",onClick:function(){return t.actionClick(e)}},t.controller.getActionLabel(i,e.name))})),"$"===i&&(n=u.a.createElement("div",null,u.a.createElement("button",{className:"btn btn-outline-info ml-2",onClick:t.editClick},"\u4fee\u6539"),u.a.createElement("button",{className:"btn btn-outline-danger ml-2",onClick:t.deleteClick},"\u4f5c\u5e9f")));return u.a.createElement(l.Page,{header:t.label+":"+a+"-"+o},u.a.createElement("div",{className:"mb-2"},u.a.createElement("div",{className:"d-flex px-3 py-2 border-bottom bg-light"},e,n),u.a.createElement(t.sheetView,null)))},t.acted=function(){var e=t.sheetData.brief.discription;return u.a.createElement(l.Page,{header:"\u5df2\u5904\u7406",back:"close"},u.a.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},u.a.createElement("div",{className:"p-3"},e),u.a.createElement("div",{className:"text-success"},u.a.createElement(l.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u5904\u7406\uff01"),u.a.createElement("div",{className:"p-3"},u.a.createElement("button",{className:"btn btn-outline-info",onClick:function(){return t.backPage()}},"\u8fd4\u56de"))))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.sheetData=e,this.vForm=this.createForm(void 0,e.data),this.openPage(this.page),[2]})})},t}(f),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return s.createElement(l.Page,{header:t.label+"\u6a21\u677f"},s.createElement("pre",{className:"mx-3 my-2"},t.entity.schemaStringify()))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(a.b),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.archiveClick=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){return 1===e.processing?[2]:(this.event("archived",e),[2])})})},t.archiveRow=function(e,t){e.id,e.no,e.discription;var n=e.date,r=s.createElement(s.Fragment,null,1===e.processing?"... ":"",e.no," \xa0 ",e.discription),i=s.createElement(l.Muted,null,s.createElement(l.EasyDate,{date:n}));return s.createElement(l.LMR,{className:"px-3 py-2",left:r,right:i})},t.view=function(){return s.createElement(l.Page,{header:"\u5df2\u5f52\u6863"+t.label},s.createElement(l.List,{items:t.list,item:{render:t.archiveRow,onClick:t.archiveClick}}))},t}return r.d(t,e),t.prototype.open=function(){return r.b(this,void 0,void 0,function(){var e;return r.e(this,function(t){switch(t.label){case 0:return e=this,[4,this.entity.getArchives(void 0,10)];case 1:return e.list=t.sent(),this.openPage(this.view),[2]}})})},t}(a.b),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowClick=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){return 1===e.processing?(this.event("processing",e.id),[2]):(this.event("action",e.id),[2])})})},t.onScrollBottom=function(){console.log("onScrollBottom"),t.controller.pageStateItems.more()},t.rowContent=function(e){e.id;var t=e.no,n=e.discription,r=e.date,i=e.processing,o=s.createElement(s.Fragment,null,t," \xa0 ",s.createElement(l.Muted,null,n)," ",1===i?"...":""),a=s.createElement(l.Muted,null,s.createElement(l.EasyDate,{date:r}));return s.createElement(l.LMR,{className:"px-3 py-2",left:o,right:a})},t.renderRow=function(e,n){return s.createElement(t.row,r.a({},e))},t.view=function(){var e=t.controller.pageStateItems;return s.createElement(l.Page,{header:t.label+" - "+t.stateLabel,onScrollBottom:t.onScrollBottom},s.createElement(l.List,{items:e,item:{render:t.renderRow,onClick:t.rowClick}}))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return this.row=this.ui.listRow||this.rowContent,this.stateName=e.state,this.stateLabel=this.controller.getStateLabel(this.stateName),[4,this.controller.pageStateItems.first(this.stateName)];case 1:return t.sent(),this.openPage(this.view),[2]}})})},t}(a.b),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){var e=t.sheetData.brief;return s.createElement(l.Page,{header:t.label+":-"+e.no},s.createElement(t.sheetView,null))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.sheetData=e,this.vForm=this.createForm(void 0,this.sheetData.data),this.openPage(this.view),[2]})})},t}(f),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.restart=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return this.ceasePage(),[4,this.event("new")];case 1:return e.sent(),[2]}})})},t.actionClick=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,o;return r.e(this,function(r){switch(r.label){case 0:return this.ceasePage(),t=this.brief,n=t.id,i=t.flow,o=t.state,[4,this.controller.action(n,i,o,e.name)];case 1:return r.sent(),this.openPage(this.acted),[2]}})})},t.buttons=s.createElement(s.Fragment,null,s.createElement("button",{className:"btn btn-outline-primary mr-3",onClick:t.restart},"\u7ee7\u7eed\u5f00\u5355"),s.createElement("button",{className:"btn btn-outline-info",onClick:function(){return t.backPage()}},"\u8fd4\u56de")),t.view=function(){var e=t.entity.states,n=e.find(function(e){return"$"===e.name}),r=s.createElement(s.Fragment,null,n.actions.map(function(e,n){return s.createElement("button",{key:n,className:"btn btn-primary mr-3",onClick:function(){return t.actionClick(e)}},t.controller.getActionLabel("$",e.name))}));return s.createElement(l.Page,{header:"\u5df2\u4fdd\u5b58",back:"close"},s.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},s.createElement("div",{className:"text-success"},s.createElement(l.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u4fdd\u5b58\uff01\u7cfb\u7edf\u5c1a\u672a\u5904\u7406"),s.createElement("div",{className:"p-3"},r,t.buttons)))},t.acted=function(){return s.createElement(l.Page,null,s.createElement("div",{className:"p-3 d-flex flex-column align-items-center"},s.createElement("div",{className:"text-success"},s.createElement(l.FA,{name:"check-circle-o"})," \u5355\u636e\u5df2\u5904\u7406\uff01"),s.createElement("div",{className:"p-3"},t.buttons)))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.brief=e,this.openPage(this.view),[2]})})},t}(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t}(a.b)),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(){var e=t.sheetData.brief,n=e.state,r=e.no,i=t.controller.getStateLabel(n);return u.a.createElement(l.Page,{header:t.label+":"+i+"-"+r},u.a.createElement("div",{className:"mb-2"},u.a.createElement("div",{className:"d-flex px-3 py-2 border-bottom bg-light"},"\u6b63\u5728\u5904\u7406\u4e2d..."),u.a.createElement(t.sheetView,null)))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.sheetData=e,this.vForm=this.createForm(void 0,e.data),this.openPage(this.page),[2]})})},t}(f),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.statesCount=i.l.array([],{deep:!0}),t.onSave=function(e,n){return r.b(t,void 0,Promise,function(){var t;return r.e(this,function(r){switch(r.label){case 0:return[4,this.saveSheet(e,n)];case 1:return t=r.sent(),this.ceasePage(),[4,this.showSaved(t)];case 2:return r.sent(),[2]}})})},t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.loadStateSheetCount()];case 1:return e.sent(),this.pageStateItems=this.entity.createPageStateItems(),[4,this.openVPage(this.VSheetMain)];case 2:return e.sent(),[2]}})})},t.prototype.onMessage=function(e){return r.b(this,void 0,Promise,function(){var t,n,i,o;return r.e(this,function(r){return t=e.type,n=e.body,i=e.from,o=e.to,e.push,"sheet"===t&&this.onSheet(i,o,n),[2]})})},t.prototype.onSheet=function(e,t,n){var r=this.user.id,i=n.id,o=n.preState,a=n.state;console.log({$:"onMessage sheet",from:e,to:t.join(","),id:i,preState:o,state:a,me:r,sheetData:n}),e===r&&this.sheetActPreState(i,o),void 0!==t.find(function(e){return e===r})&&this.sheetActState(i,a,n)},t.prototype.sheetActPreState=function(e,t){if(this.changeStateCount(t,-1),void 0!==this.curState&&this.curState===t){var n=this.pageStateItems.items.findIndex(function(t){return t.id===e});n>=0&&this.pageStateItems.items.splice(n,1)}},t.prototype.sheetActState=function(e,t,n){this.changeStateCount(t,1),void 0!==this.curState&&this.curState===t&&this.pageStateItems.items.findIndex(function(t){return t.id===e})<0&&this.pageStateItems.items.push(n)},t.prototype.changeStateCount=function(e,t){if(void 0!==e){var n=this.statesCount.findIndex(function(t){return t.state===e});if(console.log({$:"changeState",state:e,delta:t,index:n}),!(n<0)){var r=this.statesCount[n];r.count+=t,r.count<0&&(r.count=0)}}},Object.defineProperty(t.prototype,"VSheetMain",{get:function(){return this.ui&&this.ui.main||h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetNew",{get:function(){return this.ui.sheetNew||d},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetSaved",{get:function(){return this.ui.sheetSaved||P},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetEdit",{get:function(){return this.ui.sheetEdit||v},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetSchema",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VArchives",{get:function(){return E},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VArchived",{get:function(){return k},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetList",{get:function(){return C},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetAction",{get:function(){return this.ui.sheetAction||g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VSheetProcessing",{get:function(){return N},enumerable:!0,configurable:!0}),t.prototype.onEvent=function(e,t){return r.b(this,void 0,void 0,function(){var n;return r.e(this,function(r){switch(r.label){case 0:switch(e){case"new":return[3,2];case"schema":return[3,3];case"archives":return[3,4];case"state":return[3,5];case"archived":return[3,6];case"action":return[3,8];case"processing":return[3,10]}return[3,1];case 1:return[2];case 2:return n=this.VSheetNew,[3,12];case 3:return n=this.VSheetSchema,[3,12];case 4:return n=this.VArchives,[3,12];case 5:return this.curState=t.state,n=this.VSheetList,[3,12];case 6:return[4,this.showArchived(t)];case 7:return r.sent(),[2];case 8:return[4,this.showAction(t)];case 9:return r.sent(),[2];case 10:return[4,this.showProcessing(t)];case 11:return r.sent(),[2];case 12:return[4,this.openVPage(n,t)];case 13:return r.sent(),[2]}})})},t.prototype.startSheet=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.beforeStart()];case 1:return!1===t.sent()?[2]:[4,this.onEvent("action",e)];case 2:return t.sent(),[2]}})})},t.prototype.showAction=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.getSheetData(e)];case 1:return t=n.sent(),Object(o.m)({body:{$type:"msg",action:"$sheet",msg:{id:e,uq:this.cUq.uq.id,state:t.brief.state}}}),[4,this.openVPage(this.VSheetAction,t)];case 2:return n.sent(),[2]}})})},t.prototype.showProcessing=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.getSheetData(e)];case 1:return t=n.sent(),[4,this.openVPage(this.VSheetProcessing,t)];case 2:return n.sent(),[2]}})})},t.prototype.editSheet=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.vCall(this.VSheetEdit,e)];case 1:return[2,t.sent()]}})})},t.prototype.showArchived=function(e){return r.b(this,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return[4,this.getArchived(e.id)];case 1:return t=n.sent(),[4,this.openVPage(this.VArchived,t)];case 2:return n.sent(),[2]}})})},t.prototype.showSaved=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(this.VSheetSaved,e)];case 1:return t.sent(),[2]}})})},t.prototype.getStateUI=function(e){var t=this.res.states;if(void 0!==t)return t[e]},t.prototype.getStateLabel=function(e){var t=this.getStateUI(e),n=t&&t.label||e;switch(n){default:return n;case"$":return"\u65b0\u5355"}},t.prototype.getActionLabel=function(e,t){var n=this.getStateUI(e);if(void 0===n)return t;var r=n.actions;if(void 0===r)return t;var i=r[t];return i&&i.label||t},t.prototype.loadStateSheetCount=function(){return r.b(this,void 0,Promise,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return this.statesCount.clear(),[4,this.entity.stateSheetCount()];case 1:return e=n.sent(),(t=this.statesCount).splice.apply(t,[0,0].concat(e)),[2]}})})},t.prototype.getSheetData=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.entity.getSheet(e)];case 1:return[2,t.sent()]}})})},t.prototype.getArchived=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.entity.getArchive(e)];case 1:return[2,t.sent()]}})})},t.prototype.saveSheet=function(e,t){return r.b(this,void 0,Promise,function(){var n,i;return r.e(this,function(r){switch(r.label){case 0:return n=this.ui.sheetTitle,i=void 0===n?this.label:n(t,this.x),[4,this.entity.save(i,e)];case 1:return[2,r.sent()]}})})},t.prototype.action=function(e,t,n,i){return r.b(this,void 0,Promise,function(){return r.e(this,function(r){switch(r.label){case 0:return[4,this.entity.action(e,t,n,i)];case 1:return[2,r.sent()]}})})},t}(a.a);n.d(t,"a",function(){return S})},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(4),a=n(6),s=n.n(a),u=(n(98),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.className,r=t.badge,o=t.size,a=t.color,u=t.badgeAlign,c=t.badgeVertical,l=t.children,h=s()(n,"va-badge",o&&"va-badge-"+o,"va-badge-"+(a||"secondary"),u&&"va-badg-"+u,c&&"va-badg-"+c);return r&&(e=i.createElement("b",null,r)),i.createElement("div",{className:h},l,e)},t=r.c([o.a],t)}(i.Component),n(100),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e,t,n,r=this.props,o=r.className,a=r.left,u=r.children,c=r.right,l=r.onClick;return void 0!==a&&(e=i.createElement("header",null,a)),void 0!==c&&(t=i.createElement("footer",null,c)),void 0!==l&&(n="cursor-pointer"),i.createElement("div",{className:s()("va-lmr",o,n),onClick:l},e,i.createElement("div",null,u),t)},t=r.c([o.a],t)}(i.Component)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.name,n=e.className,r=e.size,o=e.spin,s=e.fixWidth,u=e.border,c=e.pull,l=e.pulse,h=e.rotate,d=e.flip,p=e.inverse,m=a(n,"fa",t&&"fa-"+t,r&&"fa-"+r,s&&"fa-fw",u&&"fa-border",c&&"fa-pull-"+c,o&&"fa-spin",l&&"fa-pulse",h&&"fa-rotate-"+h,d&&"fa-flip-"+d,p&&"fa-inverse");return i.createElement("i",{className:m})},t}(i.Component),l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.size,r=e.children,o=a("fa-stack",t,n&&"fa-"+n);return i.createElement("span",{className:o},r)}}(i.Component),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.iconClass,r=e.text,o=e.textClass;return i.createElement("div",{className:"py-2"},i.createElement(c,{className:n,name:t,fixWidth:!0}),i.createElement("span",{className:o},r))}}(i.Component),function(e){return i.createElement("small",{className:a("text-muted",e.className),style:e.style},e.children)});n.d(t,"b",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return l})},function(e,t,n){"use strict";var r=n(1),i=n(10),o=n.n(i),a=n(5),s=n(20),u=n(12),c=n(7),l=n(0),h=n(4),d=n(6),p=n.n(d),m=n(3),f=n(23),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemRender=function(e,n){return l.createElement(t.ItemRow,{item:e})},t.ItemRow=Object(h.a)(function(e){var n,r,i,o,a,s,c=e.item,h=(c.tuid,c.box),d=c.children,v=c.isLeaf,b=c.keyIndex,y=c.values,g=t.controller.keyUIs[b],w=g.content,E=g.valuesContent,C=g.none;if(!1===t.isFrom&&(n=l.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){return t.controller.addClick(c)}},l.createElement(m.FA,{name:"plus"})),r=l.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){return t.controller.removeClick(c)}},l.createElement(m.FA,{className:"text-info",name:"trash"}))),!1===v?i=0===b?n:l.createElement(l.Fragment,null,r," \xa0 ",n):b>0&&(i=r),!0===v)o=void 0,y&&(s=(E||u.a)(y,t.x));else{a="border-bottom";var k=C&&C(t.x);o=l.createElement(m.List,{className:"ml-4",items:d,item:{onClick:void 0,render:t.itemRender},none:k})}var P=l.createElement("div",{className:"py-1 pr-3"},Object(f.b)(h,w,t.x));return l.createElement("div",{className:"d-flex flex-column"},l.createElement(m.LMR,{className:p()("px-3","py-2",a),left:P,right:i},l.createElement("div",{className:"py-1"},s)),o)}),t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.isFrom=this.controller.isFrom,this.openPage(this.view),[2]})})},Object.defineProperty(t.prototype,"view",{get:function(){var e=this;return function(){return l.createElement(m.Page,{header:e.label},l.createElement(m.List,{items:e.controller.items,item:{className:"my-2",onClick:void 0,render:e.itemRender}}))}},enumerable:!0,configurable:!0}),t}(c.b),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onValuesSubmit=function(){return r.b(t,void 0,void 0,function(){var e;return r.e(this,function(t){return this.ceasePage(),e=this.vForm.getValues(),this.returnCall(e),[2]})})},t.view=function(){return l.createElement(m.Page,null,t.vForm.render())},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.vForm=this.createForm(this.onValuesSubmit),this.openPageElement(l.createElement(this.view,null)),[2]})})},t}(c.b),y=function(){return function(e,t,n,r){this.children=a.l.array([],{deep:!0}),this.parent=e,this.tuid=t,this.box=n,this.keyIndex=r,this.isLeaf=!1}}(),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addClick=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,o,a,u,c,l,h,d,p,m,f,v,y,g,w,E,C,k,P,N,S,x,T,I,F;return r.e(this,function(r){switch(r.label){case 0:if(t=e.keyIndex,n=e.children,i=this.keyFields.length,o=i-1,(a=t+1)>=i)return[2];for(u=this.keyFields[a],c=u.name,l=u._tuid,h={},d={},p=e;void 0!==p;p=p.parent)m=p.keyIndex,f=p.box,v=this.keyFields[m].name,h[v]=d[v]=f.id;return[4,this.searchOnKey(u,h)];case 1:return void 0===(y=r.sent())||y<=0?[2]:(l.useId(y),g=l.boxId(y),w={},E={},t+1!==o?[3,4]:(l.useId(y),E[c]=w[c]=g,this.entity.fields.length>0?[4,this.vCall(b,d)]:[3,3]));case 2:for(k in C=r.sent())E[k]=w[k]=C[k];r.label=3;case 3:return[3,5];case 4:for(E[c]=d[c]=g,k=a+1;k<o;k++)d[this.keyFields[k].name]=0;for(w[this.keyFields[o].name]=0,I=this.entity.fields,P=0,N=I;P<N.length;P++)S=N[P],S.name,x=S.type,!0!==S.null&&(w[S.name]=Object(s.c)(x));r.label=5;case 5:return d.arr1=[w],[4,this.entity.actions.add.submit(d)];case 6:return r.sent(),(T=n.findIndex(function(e){return e.box.id===y}))<0?n.push(this.createItem(e,l.tuid,g,a,E)):void 0!==(I=this.entity.fields)&&I.length>0&&(F=n[T],n.splice(T,1),F.values=E,n.splice(T,0,F)),this.removeCeased(),[2]}})})},t.removeClick=function(e){return r.b(t,void 0,void 0,function(){var t,n,i,a,s,u,c,l,h,d,p,m,f,v,b,y;return r.e(this,function(r){switch(r.label){case 0:if(t=this.keyFields[e.keyIndex],n=t._tuid,i=this.cUq.cTuidMain(n.tuid),a=i.getLable(n.tuid),s=this.res.confirmDelete||o.a.template("do you really want to remove ${label}?"),!1===confirm(s({label:a})))return[2];for(u=this.entity,l=(c={}).arr1=[],h={},l.push(h),d=e;void 0!==d;d=d.parent)p=d.keyIndex,h[this.keyFields[p].name]=d.box.id;for(m=this.keyFields.length,f=e.keyIndex+1;f<m;f++)v=this.keyFields[f],h[v.name]=-1;return[4,u.actions.del.submit(c)];case 1:return r.sent(),b=e.parent.children,(y=b.findIndex(function(t){return t===e}))>=0&&b.splice(y,1),[2]}})})},t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){var e,t,n,i,s,c,l,h,d,p,m,f,v,b;return r.e(this,function(r){switch(r.label){case 0:return e=this.entity,t=e.keys,n=e.schemaFrom,this.isFrom=void 0!==n,[4,(i=this.entity.queries.all).query({})];case 1:for(s=r.sent(),c=s.ret,l=t.length,this.keyUIs=o.a.clone(this.ui.keys||[]),this.keyFields=[],h=i.returns[0].fields,d=0;d<l;d++)this.keyFields.push(h[d]),d>=this.keyUIs.length&&this.keyUIs.push({content:u.a});for(this.items=Object(a.l)([]),p=void 0,m=0,f=c;m<f.length;m++)v=f[m],void 0!==(b=this.addItem(p,v))&&(this.items.push(b),p=b);return[4,this.openVPage(this.VMapMain)];case 2:return r.sent(),[2]}})})},t.prototype.createItem=function(e,t,n,r,i){var o=new y(e,t,n,r);return r===this.keyFields.length-1&&(o.isLeaf=!0,o.values=i),o},t.prototype.addItem=function(e,t){for(var n=void 0,r=this.keyFields.length,i=e,o=0;o<r;o++){var a=this.keyFields[o],s=a.name,u=a._tuid,c=t[s];if(void 0===c)break;var l=c.id;if(0!==o){var h=i.children,d=(i.box,h.length);if(d>0){var p=h[d-1];if(p.box.id===l){i=p;continue}}l>0&&h.push(i=this.createItem(i,u.tuid,c,o,t))}else{if(0===l)continue;void 0!==i&&i.box.id===l||(n=i=this.createItem(void 0,u.tuid,c,o,t))}}return n},t.prototype.searchOnKey=function(e,t){return r.b(this,void 0,Promise,function(){var n,i,o,a,s,u;return r.e(this,function(r){switch(r.label){case 0:return n=e._tuid,i=n.tuid,o=n.ownerField,a=this.cUq.cTuidSelect(i),s=t,void 0!==o&&"object"===typeof(s=t[o.name])&&(s=s.id),[4,a.call(s)];case 1:return u=r.sent(),[2,n.getIdFromObj(u)]}})})},Object.defineProperty(t.prototype,"VMapMain",{get:function(){return v},enumerable:!0,configurable:!0}),t}(c.a);n.d(t,"a",function(){return g})},function(e,t,n){"use strict";var r=n(1),i=n(3),o=n(8),a=n(23),s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.userAppUnits=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("tie/user-app-units",{app:e})];case 1:return[2,t.sent()]}})})},t}(o.b))("tv/",void 0),u=n(20),c=n(0),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.appPage=function(){var e=t.controller.caption;return c.createElement(i.Page,{header:e,logout:function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return o.g.unit=void 0,[2]})})}},t.appContent())},t.appContent=function(){var e,n=t.controller.cUqArr;return e=0===n.length?c.createElement("div",{className:"text-danger"},c.createElement(i.FA,{name:""})," \u6b64APP\u6ca1\u6709\u7ed1\u5b9a\u4efb\u4f55\u7684UQ"):n.map(function(e,t){return c.createElement("div",{key:t},e.render())}),c.createElement(c.Fragment,null,e)},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.appPage),[2]})})},t.prototype.render=function(e){return this.appContent()},t}(i.VPage),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){var n=i.nav.user,r=n?n.name:"[\u672a\u767b\u5f55]",o=t.controller.uqs,a=o.appOwner,s=o.appName;return c.createElement(i.Page,{header:"APP\u65e0\u6cd5\u8fd0\u884c",logout:!0},c.createElement("div",{className:"m-3 text-danger container"},c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u767b\u5f55\u7528\u6237"),c.createElement("div",{className:"col-sm text-body"},r)),c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"App"),c.createElement("div",{className:"col-sm text-body"},a+"/"+s)),c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u9884\u8bbe\u5c0f\u53f7"),c.createElement("div",{className:"col-sm text-body"},e||c.createElement("small",{className:""},"[\u65e0\u9884\u8bbe\u5c0f\u53f7]"))),c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u53ef\u80fd\u539f\u56e0",c.createElement(i.FA,{name:"exclamation-triangle"})),c.createElement("div",{className:"col-sm text-body"},c.createElement("ul",{className:"p-0"},c.createElement("li",null,"\u6ca1\u6709\u5c0f\u53f7\u8fd0\u884c ",s),c.createElement("li",null,"\u7528\u6237 ",c.createElement("b",null,r)," \u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u8fd0\u884c",s,"\u7684\u5c0f\u53f7"),e&&c.createElement("li",null,"\u9884\u8bbe\u5c0f\u53f7 ",c.createElement("b",null,e)," \u6ca1\u6709\u8fd0\u884cApp ",s)))),c.createElement("div",{className:"form-group row"},c.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u5c0f\u53f7",e),c.createElement("div",{className:"col-sm text-body"},"\u9884\u8bbe\u5c0f\u53f7\u5b9a\u4e49\u5728 public/unit.json \u6587\u4ef6\u4e2d\u3002 \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u7531url\u76f4\u63a5\u542f\u52a8\u3002 \u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95eeapp\u4e4b\u540e\uff0c\u4f1a\u7f13\u5b58\u5728localStorage\u91cc\u3002",c.createElement("br",null),"\u5982\u679c\u8981\u5220\u53bb\u7f13\u5b58\u7684\u9884\u5b9a\u4e49Unit\uff0clogout\u7136\u540e\u518dlogin\u3002"))))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderRow=function(e,t){var n=e.id,r=e.nick,o=e.name;return c.createElement(i.LMR,{className:"px-3 py-2",right:"id: "+n},c.createElement("div",null,r||o))},t.onRowClick=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return o.g.unit=e.id,[4,this.controller.start()];case 1:return t.sent(),[2]}})})},t.page=function(){return c.createElement(i.Page,{header:"\u9009\u62e9\u5c0f\u53f7",logout:!0},c.createElement(i.List,{items:t.controller.appUnits,item:{render:t.renderRow,onClick:t.onRowClick}}))},t}return r.d(t,e),t.prototype.open=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.page),[2]})})},t}(i.VPage),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return c.createElement(i.Page,{header:"ERROR"},c.createElement("div",{className:"m-3"},c.createElement("div",null,"Load Uqs \u53d1\u751f\u9519\u8bef\uff1a"),e.map(function(e,t){return c.createElement("div",{key:t},e)})))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return c.createElement(i.Page,{header:"App start error!"},c.createElement("pre",null,"string"===typeof e?e:e.message))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),f=function(e){function t(t){var n=e.call(this,Object(i.resLang)(t&&t.res))||this;if(n.cUqCollection={},n.cImportUqs={},i.nav.setSettings(t),n.name=t.appName,n.version=t.version,void 0===n.name)throw'appName like "owner/app" must be defined in UI';return n.uqs=new u.a(n.name,void 0),void 0===t.uqs&&(t.uqs={}),n.ui=t,n.caption=n.res.caption||"Tonva",n}return r.d(t,e),t.prototype.getImportUq=function(e,t){var n=e+"/"+t,r=this.cImportUqs[n];if(void 0!==r)return r;this.ui&&this.ui.uqs&&this.ui.uqs[n];return this.cImportUqs[n]=r=this.getCUq(n),r},t.prototype.newCUq=function(e,t){var n=new(this.ui.CUq||a.a)(this,e,t);return Object.setPrototypeOf(n.x,this.x),n},Object.defineProperty(t.prototype,"cUqArr",{get:function(){var e=[];for(var t in this.cUqCollection)e.push(this.cUqCollection[t]);return e},enumerable:!0,configurable:!0}),t.prototype.getCUq=function(e){return this.cUqCollection[e]},Object.defineProperty(t.prototype,"VAppMain",{get:function(){return this.ui&&this.ui.main||l},enumerable:!0,configurable:!0}),t.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){var e,t,n,a,u;return r.e(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,this.load()];case 1:return e=r.sent(),t=o.g.predefinedUnit,void 0!==(n=i.nav.user)&&n.id>0?(a=this,[4,s.userAppUnits(this.uqs.id)]):[3,3];case 2:switch(a.appUnits=r.sent(),this.appUnits.length){case 0:return this.showUnsupport(t),[2,!1];case 1:if(void 0===(u=this.appUnits[0].id)||u<0||void 0!==t&&u!=t)return this.showUnsupport(t),[2,!1];o.g.unit=u;break;default:if(t>0&&void 0!==this.appUnits.find(function(e){return e.id===t})){o.g.unit=t;break}return this.openVPage(d),[2,!1]}r.label=3;case 3:return void 0!==e?(this.openVPage(p),[2,!1]):[2,!0];case 4:return r.sent(),this.openVPage(m),[2,!1];case 5:return[2]}})})},t.prototype.load=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,a,s,u,c,l,h,d,p,m,f,v,b,y,g,w,E,C,k,P,N,S,x;return r.e(this,function(r){switch(r.label){case 0:return e=this.uqs,t=e.appOwner,n=e.appName,i=this.uqs.localData,(a=i.get())&&a.version===this.version?[3,2]:[4,Object(o.k)(t,n)];case 1:for((a=r.sent()).version=this.version,i.set(a),s=0,u=a.uqs;s<u.length;s++)u[s].newVersion=!0;r.label=2;case 2:for(c=a.id,l=a.uqs,this.uqs.id=c,h=[],d=[],p=[],m=0,f=l;m<f.length;m++)v=f[m],v.id,b=v.uqOwner,y=v.uqName,v.access,g=b+"/"+y,w=this.ui.uqs[g]||{},C=this.newCUq(v,w),this.cUqCollection[g]=C,this.uqs.addUq(C.uq),d.push(C.init());return[4,Promise.all(d)];case 3:for(E in r.sent(),this.cUqCollection)C=this.cUqCollection[E],p.push(C.loadEntities());return[4,Promise.all(p)];case 4:for(k=r.sent(),P=0,N=k;P<N.length;P++)S=N[P],void 0===(x=S)||h.push(x);return 0===h.length&&(h.push.apply(h,this.uqs.setTuidImportsLocal()),0===h.length)?[2]:[2,h]}})})},t.prototype.internalStart=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return!0!==e&&this.clearPrevPages(),[4,this.showMainPage()];case 1:return t.sent(),[2]}})})},t.prototype.clearPrevPages=function(){i.nav.clear()},t.prototype.showUnsupport=function(e){this.clearPrevPages(),this.openVPage(h,e)},t.prototype.showMainPage=function(){return r.b(this,void 0,void 0,function(){var e,t,n,i,a,s,u;return r.e(this,function(r){switch(r.label){case 0:return void 0===(e=Object(o.h)())?[3,2]:(t=e.split("-")).length>3?"sheet"!==(n=t[3])&&"sheet_debug"!==n?[3,2]:(i=Number(t[4]),a=Number(t[5]),s=Number(t[6]),void 0===(u=this.getCUqFromId(i))?(alert("unknown uqId: "+i),[2]):(this.clearPrevPages(),[4,u.navSheet(a,s)])):[3,2];case 1:return r.sent(),[2];case 2:return this.openVPage(this.VAppMain),[2]}})})},t.prototype.getCUqFromId=function(e){for(var t in this.cUqCollection){var n=this.cUqCollection[t];if(n.uq.id===e)return n}},t}(i.Controller);n.d(t,"a",function(){return f})},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(0),a=n(3),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return o.createElement(a.Page,{header:t.label},"pending")},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(i.b),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VPendingMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VPendingMain",{get:function(){return s},enumerable:!0,configurable:!0}),t}(i.a);n.d(t,"a",function(){return u})},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(0),a=n(3),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=function(){return o.createElement(a.Page,{header:t.label},"History")},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return this.openPage(this.view),[2]})})},t}(i.b),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VHistoryMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VHistoryMain",{get:function(){return s},enumerable:!0,configurable:!0}),t}(i.a);n.d(t,"a",function(){return u})},function(e,t,n){"use strict";var r=n(1),i=n(7),o=n(0),a=n(3),s=n(12),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onSubmit=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return e=this.vForm.getValues(),t=this,[4,this.controller.submit(e)];case 1:return t.returns=n.sent(),this.closePage(),this.openPage(this.resultPage),[2]}})})},t.mainPage=function(){var e=t.controller.label;return o.createElement(a.Page,{header:e},t.vForm.render("mx-3 my-2"))},t.resultPage=function(){var e=t.controller.label;return o.createElement(a.Page,{header:e,back:"close"},"\u5b8c\u6210\uff01",o.createElement("pre",null,Object(s.b)(t.returns)))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){return this.vForm=this.createForm(this.onSubmit,e),this.openPage(this.mainPage),[2]})})},t}(i.b),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return[4,this.openVPage(this.VActionMain)];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"VActionMain",{get:function(){return u},enumerable:!0,configurable:!0}),t.prototype.submit=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return[2,this.entity.submit(e)]})})},t.prototype.submitReturns=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return[2,this.entity.submitReturns(e)]})})},t}(i.a);n.d(t,"a",function(){return c})},function(e,t,n){"use strict";var r=n(68);n.d(t,"ViewMainSubs",function(){return r.a});n(69)},function(e,t){},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(17),i=n(19),o={set:function(e,t){Object(r.i)(e,t),i.a.setCenterToken(t)},clear:function(){Object(r.i)(0,void 0),i.a.setCenterToken(void 0)}}},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l});var r=n(1),i=n(0),o=n(9),a=n(14),s=n(11),u=function(){function e(e){var t=this;this.isDev=s.c.isDevelopment,this.onMessageReceive=function(e){return r.b(t,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.onMessage(e)];case 1:return t.sent(),[2]}})})},this.res=e||{},this.x=this.res.x||{}}return Object.defineProperty(e.prototype,"user",{get:function(){return o.b.user},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLogined",{get:function(){var e=o.b.user;return void 0!==e&&e.id>0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){o.b.unregisterReceiveHandler(this.receiveHandlerId),this.onDispose()},e.prototype.onDispose=function(){},e.prototype.openVPage=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,new e(this).open(t)];case 1:return n.sent(),[2]}})})},e.prototype.renderView=function(e,t){return new e(this).render(t)},e.prototype.event=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.onEvent(e,t)];case 1:return n.sent(),[2]}})})},e.prototype.onEvent=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return[2]})})},e.prototype.msg=function(e){alert(e)},e.prototype.errorPage=function(e,t){this.openPage(i.createElement(a.a,{header:"App error!"},i.createElement("pre",null,"string"===typeof t?t:t.message)))},e.prototype.onMessage=function(e){},e.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return[2,!0]})})},e.prototype.registerReceiveHandler=function(){this.receiveHandlerId=o.b.registerReceiveHandler(this.onMessageReceive)},e.prototype.start=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return this.disposer=this.dispose.bind(this),this.registerReceiveHandler(),[4,this.beforeStart()];case 1:return!1===n.sent()?[2]:[4,this.internalStart.apply(this,[e].concat(t))];case 2:return n.sent(),[2]}})})},Object.defineProperty(e.prototype,"isCalling",{get:function(){return void 0!==this._resolve_$},enumerable:!0,configurable:!0}),e.prototype.call=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.b(this,void 0,Promise,function(){var n=this;return r.e(this,function(i){return void 0===this._resolve_$&&(this._resolve_$=[]),[2,new Promise(function(i,o){return r.b(n,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return this._resolve_$.push(i),[4,this.start.apply(this,[e].concat(t))];case 1:return n.sent(),[2]}})})})]})})},e.prototype.vCall=function(e,t){return r.b(this,void 0,Promise,function(){var n=this;return r.e(this,function(i){return void 0===this._resolve_$&&(this._resolve_$=[]),[2,new Promise(function(i,o){return r.b(n,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return this._resolve_$.push(i),[4,new e(this).open(t)];case 1:return n.sent(),[2]}})})})]})})},e.prototype.returnCall=function(e){if(void 0!==this._resolve_$){var t=this._resolve_$.pop();void 0!==t?t(e):alert("the Controller call already returned, or not called")}},e.prototype.openPage=function(e){o.b.push(e,this.disposer),this.disposer=void 0},e.prototype.replacePage=function(e){o.b.replace(e,this.disposer),this.disposer=void 0},e.prototype.backPage=function(){o.b.back()},e.prototype.closePage=function(e){o.b.pop(e)},e.prototype.ceasePage=function(e){o.b.ceaseTop(e)},e.prototype.removeCeased=function(){o.b.removeCeased()},e.prototype.regConfirmClose=function(e){o.b.regConfirmClose(e)},e}(),c=function(){function e(e){this.controller=e,this.res=e.res,this.x=e.x}return Object.defineProperty(e.prototype,"isDev",{get:function(){return s.c.isDevelopment},enumerable:!0,configurable:!0}),e.prototype.renderVm=function(e,t){return new e(this.controller).render(t)},e.prototype.openVPage=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,new e(this.controller).open(t)];case 1:return n.sent(),[2]}})})},e.prototype.event=function(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.controller.event(e,t)];case 1:return n.sent(),[2]}})})},e.prototype.vCall=function(e,t){return r.b(this,void 0,Promise,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.controller.vCall(e,t)];case 1:return[2,n.sent()]}})})},e.prototype.returnCall=function(e){this.controller.returnCall(e)},e.prototype.openPage=function(e,t){this.controller.openPage(i.createElement(e,t))},e.prototype.replacePage=function(e,t){this.controller.replacePage(i.createElement(e,t))},e.prototype.openPageElement=function(e){this.controller.openPage(e)},e.prototype.replacePageElement=function(e){this.controller.replacePage(e)},e.prototype.backPage=function(){this.controller.backPage()},e.prototype.closePage=function(e){this.controller.closePage(e)},e.prototype.ceasePage=function(e){this.controller.ceasePage(e)},e.prototype.removeCeased=function(){this.controller.removeCeased()},e.prototype.regConfirmClose=function(e){this.controller.regConfirmClose(e)},e}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(e){return null},t}(c)},function(e,t,n){"use strict";var r=n(57);n.o(r,"CAppBase")&&n.d(t,"CAppBase",function(){return r.CAppBase}),n.o(r,"CBase")&&n.d(t,"CBase",function(){return r.CBase}),n.o(r,"CSub")&&n.d(t,"CSub",function(){return r.CSub}),n.o(r,"EasyDate")&&n.d(t,"EasyDate",function(){return r.EasyDate}),n.o(r,"Edit")&&n.d(t,"Edit",function(){return r.Edit}),n.o(r,"FA")&&n.d(t,"FA",function(){return r.FA}),n.o(r,"Form")&&n.d(t,"Form",function(){return r.Form}),n.o(r,"Image")&&n.d(t,"Image",function(){return r.Image}),n.o(r,"LMR")&&n.d(t,"LMR",function(){return r.LMR}),n.o(r,"List")&&n.d(t,"List",function(){return r.List}),n.o(r,"Muted")&&n.d(t,"Muted",function(){return r.Muted}),n.o(r,"PropGrid")&&n.d(t,"PropGrid",function(){return r.PropGrid}),n.o(r,"SearchBox")&&n.d(t,"SearchBox",function(){return r.SearchBox}),n.o(r,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return r.TabCaptionComponent}),n.o(r,"Tabs")&&n.d(t,"Tabs",function(){return r.Tabs}),n.o(r,"Widget")&&n.d(t,"Widget",function(){return r.Widget}),n.o(r,"emailRegex")&&n.d(t,"emailRegex",function(){return r.emailRegex}),n.o(r,"mobileRegex")&&n.d(t,"mobileRegex",function(){return r.mobileRegex}),n.o(r,"resLang")&&n.d(t,"resLang",function(){return r.resLang}),n.o(r,"start")&&n.d(t,"start",function(){return r.start}),n.o(r,"toUiSelectItems")&&n.d(t,"toUiSelectItems",function(){return r.toUiSelectItems}),n.o(r,"tv")&&n.d(t,"tv",function(){return r.tv}),n.o(r,"userApi")&&n.d(t,"userApi",function(){return r.userApi});var i=n(58);n.o(i,"CAppBase")&&n.d(t,"CAppBase",function(){return i.CAppBase}),n.o(i,"CBase")&&n.d(t,"CBase",function(){return i.CBase}),n.o(i,"CSub")&&n.d(t,"CSub",function(){return i.CSub}),n.o(i,"EasyDate")&&n.d(t,"EasyDate",function(){return i.EasyDate}),n.o(i,"Edit")&&n.d(t,"Edit",function(){return i.Edit}),n.o(i,"FA")&&n.d(t,"FA",function(){return i.FA}),n.o(i,"Form")&&n.d(t,"Form",function(){return i.Form}),n.o(i,"Image")&&n.d(t,"Image",function(){return i.Image}),n.o(i,"LMR")&&n.d(t,"LMR",function(){return i.LMR}),n.o(i,"List")&&n.d(t,"List",function(){return i.List}),n.o(i,"Muted")&&n.d(t,"Muted",function(){return i.Muted}),n.o(i,"PropGrid")&&n.d(t,"PropGrid",function(){return i.PropGrid}),n.o(i,"SearchBox")&&n.d(t,"SearchBox",function(){return i.SearchBox}),n.o(i,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return i.TabCaptionComponent}),n.o(i,"Tabs")&&n.d(t,"Tabs",function(){return i.Tabs}),n.o(i,"Widget")&&n.d(t,"Widget",function(){return i.Widget}),n.o(i,"emailRegex")&&n.d(t,"emailRegex",function(){return i.emailRegex}),n.o(i,"mobileRegex")&&n.d(t,"mobileRegex",function(){return i.mobileRegex}),n.o(i,"resLang")&&n.d(t,"resLang",function(){return i.resLang}),n.o(i,"start")&&n.d(t,"start",function(){return i.start}),n.o(i,"toUiSelectItems")&&n.d(t,"toUiSelectItems",function(){return i.toUiSelectItems}),n.o(i,"tv")&&n.d(t,"tv",function(){return i.tv}),n.o(i,"userApi")&&n.d(t,"userApi",function(){return i.userApi});var o=n(59);n.d(t,"toUiSelectItems",function(){return o.a})},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e){if(void 0!==e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n],o=i.indexOf(":"),a=void 0,s=void 0;o<0?a=Number(i):(a=Number(i.substr(0,o)),s=i.substr(o+1)),t.push({value:a,title:s})}return t}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r=/^[0-9]*$/,i=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(6),a=n.n(o);!function(e){function t(t){var n=e.call(this,t)||this;return n.handleDocumentClick=function(e){!1!==n.state.dropdownOpen&&(n.button&&n.button.contains(e.target)||n.menu&&n.toggle())},n.toggle=function(){n.setState({dropdownOpen:!n.state.dropdownOpen})},n.state={dropdownOpen:!1},n}r.d(t,e),t.prototype.componentWillMount=function(){document.addEventListener("click",this.handleDocumentClick),document.addEventListener("touchstart",this.handleDocumentClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("touchstart",this.handleDocumentClick)},t.prototype.render=function(){var e=this,t=this.props,n=t.icon,r=t.actions,o=t.isRight;void 0===o&&(o=!0);var s=r.some(function(e){return void 0!==e.icon}),u=this.state.dropdownOpen;return i.createElement("div",{className:"dropdown"},i.createElement("button",{ref:function(t){return e.button=t},className:"cursor-pointer dropdown-toggle btn btn-sm","data-toggle":"dropdown","aria-expanded":u,onClick:this.toggle},i.createElement("i",{className:a()("fa","fa-"+(n||"ellipsis-v"))})),i.createElement("div",{ref:function(t){return e.menu=t},className:a()({"dropdown-menu":!0,"dropdown-menu-right":o,show:u})},r.map(function(e,t){var n,r=e.icon,o=e.caption,u=e.action;return void 0===r&&void 0===o?i.createElement("div",{className:"dropdown-divider"}):(!0===s&&(void 0!==r&&(r="fa-"+r),n=i.createElement(i.Fragment,null,i.createElement("i",{className:a()("fa",r,"fa-fw"),"aria-hidden":!0}),"\xa0 ")),void 0===u?i.createElement("h6",{className:"dropdown-header"},n," ",o):i.createElement("a",{className:"dropdown-item",key:t,href:"#",onClick:function(e){e.preventDefault(),u()}},n," ",o))})))}}(i.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(0);function o(e,t){if(!e)return null;var n;switch(typeof e){default:n=e;break;case"string":n=new Date(e);break;case"number":n=new Date(1e3*e)}var r,i,o,a,s,u,c,l=new Date,h=n;r=l.getTime()-h.getTime();var d=h.getHours(),p=h.getMinutes();return i=l.getDate(),o=h.getDate(),a=h.getMonth()+1,s=h.getFullYear(),c=l.getFullYear(),u=!0===t?" "+d+(p<10?":0":":")+p:"",r<-864e5?s===c?a+"\u6708"+o+"\u65e5"+u:s+"\u5e74"+a+"\u6708"+o+"\u65e5"+u:r<864e5?o!==i?(r<0?"\u660e\u5929 ":"\u6628\u5929 ")+u:!0===t?u:"\u4eca\u5929":s===c?a+"\u6708"+o+"\u65e5":s+"\u5e74"+a+"\u6708"+o+"\u65e5"}var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){return o(this.props.date,!1)},t}(i.Component);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){return o(this.props.date,!0)}}(i.Component)},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(6),a=n.n(o),s=n(3);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.icon,r=t.main,o=t.discription,u=t.px,c=t.py;e="string"===typeof o?i.createElement("div",null,o):o;var l=a()("media",void 0===u?"px-0":"px-"+u,void 0===c?"py-2":"py-"+c);return i.createElement("div",{className:l},i.createElement(s.Image,{className:"mr-3 w-4c h-4c",src:n}),i.createElement("div",{className:"media-body"},i.createElement("h5",{className:"mt-0"},r),e))}}(i.Component)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1),i=n(0),o=n(6),a=n.n(o),s=n(5),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key=null,t.onChange=function(e){t.key=e.target.value,void 0!==t.key&&(t.key=t.key.trim(),""===t.key&&(t.key=void 0)),!0!==t.props.allowEmptySearch&&(t.disabled=!t.key)},t.onSubmit=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:if(e.preventDefault(),null===this.key&&(this.key=this.props.initKey||""),!0!==this.props.allowEmptySearch){if(!this.key)return[2];this.input&&(this.input.disabled=!0)}return[4,this.props.onSearch(this.key)];case 1:return t.sent(),this.input&&(this.input.disabled=!1),[2]}})})},t}return r.d(t,e),t.prototype.clear=function(){this.input&&(this.input.value="")},t.prototype.render=function(){var e,t,n=this,r=this.props,o=r.className,s=r.inputClassName,u=r.onFocus,c=r.label,l=r.placeholder,h=r.buttonText,d=r.maxLength;switch(r.size){default:case"sm":e="input-group-sm";break;case"md":e="input-group-md";break;case"lg":e="input-group-lg"}return void 0!==c&&(t=i.createElement("label",{className:"input-group-addon"},c)),i.createElement("form",{className:o,onSubmit:this.onSubmit},i.createElement("div",{className:a()("input-group",e)},t,i.createElement("input",{ref:function(e){return n.input=e},onChange:this.onChange,type:"text",name:"key",onFocus:u,className:a()("form-control",s||"border-primary"),placeholder:l,defaultValue:this.props.initKey,maxLength:d}),i.createElement("div",{className:"input-group-append"},i.createElement("button",{className:"btn btn-primary",type:"submit",disabled:this.disabled},i.createElement("i",{className:"fa fa-search"}),i.createElement("i",{className:"fa"}),h))))},r.c([s.l],t.prototype,"disabled",void 0),t}(i.Component)},function(e,t,n){"use strict";n(44),n(66);var r=n(23);n.d(t,"tv",function(){return r.b});n(47),n(26),n(41),n(32),n(43),n(46),n(45),n(15),n(28);var i=n(67);n.o(i,"CAppBase")&&n.d(t,"CAppBase",function(){return i.CAppBase}),n.o(i,"CBase")&&n.d(t,"CBase",function(){return i.CBase}),n.o(i,"CSub")&&n.d(t,"CSub",function(){return i.CSub}),n.o(i,"Controller")&&n.d(t,"Controller",function(){return i.Controller}),n.o(i,"EasyDate")&&n.d(t,"EasyDate",function(){return i.EasyDate}),n.o(i,"Edit")&&n.d(t,"Edit",function(){return i.Edit}),n.o(i,"FA")&&n.d(t,"FA",function(){return i.FA}),n.o(i,"Form")&&n.d(t,"Form",function(){return i.Form}),n.o(i,"Image")&&n.d(t,"Image",function(){return i.Image}),n.o(i,"LMR")&&n.d(t,"LMR",function(){return i.LMR}),n.o(i,"List")&&n.d(t,"List",function(){return i.List}),n.o(i,"NavView")&&n.d(t,"NavView",function(){return i.NavView}),n.o(i,"Page")&&n.d(t,"Page",function(){return i.Page}),n.o(i,"PropGrid")&&n.d(t,"PropGrid",function(){return i.PropGrid}),n.o(i,"SearchBox")&&n.d(t,"SearchBox",function(){return i.SearchBox}),n.o(i,"TabCaptionComponent")&&n.d(t,"TabCaptionComponent",function(){return i.TabCaptionComponent}),n.o(i,"Tabs")&&n.d(t,"Tabs",function(){return i.Tabs}),n.o(i,"VPage")&&n.d(t,"VPage",function(){return i.VPage}),n.o(i,"View")&&n.d(t,"View",function(){return i.View}),n.o(i,"Widget")&&n.d(t,"Widget",function(){return i.Widget}),n.o(i,"nav")&&n.d(t,"nav",function(){return i.nav}),n.o(i,"start")&&n.d(t,"start",function(){return i.start}),n.o(i,"toUiSelectItems")&&n.d(t,"toUiSelectItems",function(){return i.toUiSelectItems});n(40),n(7),n(18),n(39)},function(e,t,n){"use strict";n(1),n(0),n(44)},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(0),o=function(){return function(){}}(),a=function(e){function t(t,n){var r=e.call(this)||this;return r.renderSubs=function(){return r.subsContainer(r.renderSubItems())},r.main=t,r.sub=n,r}return r.d(t,e),t.prototype.subsContainer=function(e){return i.createElement("div",null,e)},t.prototype.renderSubItems=function(){var e=this,t=this.model.subs;return t?t.map(function(t,n){return i.createElement(e.sub,r.a({key:n},t))}):null},t.prototype.render=function(){var e=this.model.main;return i.createElement(i.Fragment,null,i.createElement(this.main,r.a({},e)),i.createElement(this.renderSubs,null))},t}(o);!function(e){function t(t,n,r){var i=e.call(this)||this;return i.row=t,i.main=n,i.sub=r,i}r.d(t,e),t.prototype.render=function(){var e=this;return i.createElement(i.Fragment,null,this.model.map(function(t,n){var r=new e.row(e.main,e.sub);return r.model=t,i.createElement(i.Fragment,{key:n},r.render())}))}}(o)},function(e,t){},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(5),a=n(6),s=n.n(a),u=n(10),c=n.n(u),l=function(){return function(){}}(),h=function(e){function t(t){var n=e.call(this)||this;return n.func=t,n}return r.d(t,e),t.prototype.check=function(e,t){var n=this.func(t);if(void 0!==n)switch(typeof n){case"undefined":return;case"string":return void e.push(n);default:return void e.push.apply(e,n)}},t}(l),d=function(e){function t(t){var n=e.call(this)||this;return n.res=t,n}return r.d(t,e),t}(l),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.check=function(e,t){switch(typeof t){default:case"boolean":return;case"object":if(null!==t)return;break;case"string":if(t.trim().length>0)return;break;case"number":if(NaN!==t)return;break;case"undefined":}e.push(this.res.required)},t}(d),m=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.minMsg=c.a.template(t.min),i.maxMsg=c.a.template(t.max),i.min=n,i.max=r,i}return r.d(t,e),t.prototype.check=function(e,t){if(void 0!==t&&null!==t){var n=Number(t);NaN===n?e.push(this.res.number):this.checkMore(e,n)}},t.prototype.checkMore=function(e,t){void 0!==this.min&&Number(t)<this.min&&e.push(this.minMsg({min:this.min})),void 0!==this.max&&Number(t)>this.max&&e.push(this.maxMsg({max:this.max}))},t}(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.checkMore=function(t,n){e.prototype.checkMore.call(this,t,n),!1===Number.isInteger(n)&&t.push(this.res.integer)},t}(m),v=n(4),b=function(){function e(e,t,n,r){var o=this;this.errors=[],this.contextErrors=[],this.onInputChange=function(e){o.changeValue(e.target.value,!0)},this.container=Object(v.a)(function(){if(!1===o.visible)return null;var e=o.context,t=e.form;if(!0===e.inNode)return o.render();var n=o.label;return!0===o.itemSchema.required&&!1!==t.props.requiredFlag&&null!==n&&(n=i.createElement(i.Fragment,null,n,"\xa0",i.createElement("span",{className:"text-danger"},"*"))),t.FieldContainer(n,o.render())}),this.context=e;var a=t.name;if(this.name=a,this.itemSchema=t,this.fieldProps=n,this.children=r,this.ui=e.getUiItem(a),void 0===this.ui)this.readOnly=!1,this.disabled=!1,this.visible=!0;else{var s=this.ui,u=s.readOnly,c=s.disabled,l=s.visible;this.readOnly=!0===u,this.disabled=!0===c,this.visible=!(!1===l)}this.value=this.defaultValue=e.getValue(a),this.init()}return Object.defineProperty(e.prototype,"hasError",{get:function(){return this.errors.length+this.contextErrors.length>0},enumerable:!0,configurable:!0}),e.prototype.init=function(){if(this.rules=[],!0===this.itemSchema.required&&this.rules.push(new p(this.context.form.res)),this.buildRules(),void 0!==this.ui){var e=this.ui.rules;if(void 0!==e)if(!1!==Array.isArray(e))for(var t=0,n=e;t<n.length;t++){var r=n[t];this.rules.push(new h(r))}else this.rules.push(new h(e))}},e.prototype.buildRules=function(){},e.prototype.checkRules=function(){for(var e,t=[],n=0,r=this.rules;n<r.length;n++){r[n].check(t,this.value)}0===t.length?this.context.removeErrorWidget(this):(this.context.addErrorWidget(this),(e=this.errors).push.apply(e,t))},Object.defineProperty(e.prototype,"isOk",{get:function(){return 0===this.errors.length},enumerable:!0,configurable:!0}),e.prototype.setError=function(e){var t;void 0!==e&&("string"===typeof e?this.errors.push(e):(t=this.errors).push.apply(t,e))},e.prototype.setContextError=function(e){var t;void 0!==e&&("string"===typeof e?this.contextErrors.push(e):(t=this.contextErrors).push.apply(t,e))},e.prototype.clearError=function(){this.errors.splice(0)},e.prototype.clearContextError=function(){this.contextErrors.splice(0)},e.prototype.parse=function(e){return e},e.prototype.setElementValue=function(e){},e.prototype.setDataValue=function(e){!0!==this.isChanging&&(this.context.initData[this.name]=this.value=this.parse(e))},e.prototype.setValue=function(e){!0!==this.isChanging&&this.changeValue(e,!1)},e.prototype.getValue=function(){return this.context.getValue(this.name)},e.prototype.getReadOnly=function(){return this.readOnly},e.prototype.getDisabled=function(){return this.disabled},e.prototype.getVisible=function(){return this.visible},e.prototype.setReadOnly=function(e){this.readOnly=e},e.prototype.setDisabled=function(e){this.disabled=e},e.prototype.setVisible=function(e){this.visible=e},e.prototype.changeValue=function(e,t){var n,r,i=this.value;void 0!==this.ui&&(n=this.ui.onChanging,r=this.ui.onChanged);var o=!0;void 0!==n&&(this.isChanging=!0,o=n(this.context,this.value,i),this.isChanging=!1),!0===o&&(this.setDataValue(e),!0!==t&&this.setElementValue(e),void 0!==r&&(this.isChanging=!0,r(this.context,this.value,i),this.isChanging=!1))},Object.defineProperty(e.prototype,"className",{get:function(){var e;return!1===this.context.inNode&&(e="form-control"),s()(e,this.context.form.FieldClass,this.ui&&this.ui.className)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var e;if(void 0===this.ui)e=this.name;else{var t=this.ui.label;e=null===t?null:t||this.name}return e},enumerable:!0,configurable:!0}),e.prototype.renderTemplet=function(){if(void 0!==this.children)return i.createElement(i.Fragment,null,this.children);if(void 0!==this.ui){var e=this.ui.Templet;return"function"===typeof e?e(this.value):e}},e.prototype.renderErrors=function(){var e=this.errors.concat(this.contextErrors);if(0===e.length)return null;var t=!0===this.context.inNode?"span":"div";return e.map(function(e){return i.createElement(t,{key:e,className:"text-danger d-inline-block my-2 ml-3"},i.createElement(i.Fragment,null,i.createElement("i",{className:"fa fa-exclamation-circle"})," \xa0",e))})},r.c([o.l],e.prototype,"errors",void 0),r.c([o.l],e.prototype,"contextErrors",void 0),r.c([o.e],e.prototype,"hasError",null),r.c([o.l],e.prototype,"visible",void 0),r.c([o.e],e.prototype,"isOk",null),e}(),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="text",t.onKeyDown=function(e){return r.b(t,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return this.internalOnKeyDown(e),13!==e.keyCode?[2]:void 0===(t=this.context.form.props.onEnter)?[2]:(this.changeValue(e.currentTarget.value,!0),this.input.blur(),[4,t(this.name,this.context)]);case 1:return void 0!==(n=r.sent())&&this.context.setError(this.name,n),[2]}})})},t}return r.d(t,e),t.prototype.setElementValue=function(e){null!==this.input&&(this.input.value=e)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.ui&&this.ui.placeholder||this.name},enumerable:!0,configurable:!0}),t.prototype.internalOnKeyDown=function(e){},t.prototype.onBlur=function(e){this.onInputChange(e),this.checkRules(),this.context.checkContextRules()},t.prototype.onFocus=function(e){this.clearError(),this.context.removeErrorWidget(this),this.context.clearErrors()},t.prototype.onChange=function(e){},t.prototype.setReadOnly=function(e){null!==this.input&&(this.input.readOnly=this.readOnly=e)},t.prototype.setDisabled=function(e){null!==this.input&&(this.input.disabled=this.disabled=e)},t.prototype.render=function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,i.createElement(i.Fragment,null,i.createElement("input",{ref:function(t){return e.input=t},className:s()(this.className,n),type:this.inputType,defaultValue:this.value,onChange:function(t){return e.onChange(t)},placeholder:this.placeholder,readOnly:this.readOnly,disabled:this.disabled,onKeyDown:this.onKeyDown,onFocus:function(t){return e.onFocus(t)},onBlur:function(t){return e.onBlur(t)},maxLength:this.itemSchema.maxLength}),this.renderErrors())},t}(b),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInputChange=function(e){t.setValue(e.currentTarget.value)},t}return r.d(t,e),t.prototype.setElementValue=function(e){this.input.value=e},t.prototype.setReadOnly=function(e){this.input.readOnly=this.readOnly=e},t.prototype.setDisabled=function(e){this.input.disabled=this.disabled=e},t.prototype.render=function(){var e=this,t=this.renderTemplet();if(void 0!==t)return t;var n={};return!0===this.hasError?n["is-invalid"]=!0:n["required-item"]=!0===this.itemSchema.required,i.createElement("textarea",{ref:function(t){return e.input=t},className:s()(this.className,n),rows:this.ui&&this.ui.rows,maxLength:this.itemSchema.maxLength,defaultValue:this.defaultValue,onChange:this.onInputChange})},t}(b),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="password",t}return r.d(t,e),t}(y),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="url",t}return r.d(t,e),t}(y),C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="email",t}return r.d(t,e),t}(y),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="number",t}return r.d(t,e),t.prototype.buildRules=function(){e.prototype.buildRules.call(this);var t=this.context.form.res,n=this.itemSchema,r=n.min,i=n.max;this.rules.push("integer"===this.itemSchema.type?new m(t,r,i):new f(t,r,i))},t.prototype.parse=function(e){if(void 0!==e&&null!==e)return Number(e)},t}(y),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="number",t}return r.d(t,e),t.prototype.isValidKey=function(e){return 46===e||8===e||37===e||39===e||e>=48&&e<=57||e>=96&&e<=105||109===e||189===e},t.prototype.internalOnKeyDown=function(e){var t=e.keyCode;event.returnValue=this.isValidKey(t)},t}(k),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="date",t}return r.d(t,e),t}(y),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="datetime",t}return r.d(t,e),t}(y),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="time",t}return r.d(t,e),t}(y),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="month",t}return r.d(t,e),t}(y),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInputChange=function(e){t.setDataValue(!0===e.target.checked?t.trueValue:t.falseValue)},t.onClick=function(){t.context.clearErrors()},t}return r.d(t,e),t.prototype.init=function(){if(e.prototype.init.call(this),void 0!==this.ui){var t=this.ui,n=t.trueValue,r=t.falseValue;this.trueValue=void 0===n||n,this.falseValue=void 0!==r&&r}else this.trueValue=!0,this.falseValue=!1},t.prototype.setElementValue=function(e){this.input.checked=e===this.trueValue},t.prototype.setReadOnly=function(e){this.input.readOnly=this.readOnly=e},t.prototype.setDisabled=function(e){this.input.disabled=this.disabled=e},t.prototype.render=function(){var e=this,t=s()(this.className,"form-check-inline p-0"),n=i.createElement("input",{ref:function(t){return e.input=t},className:"align-self-center",type:"checkbox",defaultChecked:this.defaultValue,onChange:this.onInputChange,onClick:this.onClick});return!0===this.context.inNode?i.createElement("label",{className:t},n," ",this.ui&&this.ui.label||this.name):i.createElement("div",{className:t},i.createElement("label",{className:"w-100 h-100 mb-0 d-flex justify-content-center"},n))},t}(b),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onInputChange=function(e){t.setDataValue(e.target.value)},t}return r.d(t,e),t.prototype.setElementValue=function(e){this.select.value=e},t.prototype.setReadOnly=function(e){this.select.disabled=this.readOnly=!e},t.prototype.setDisabled=function(e){this.select.disabled=this.disabled=e},t.prototype.render=function(){var e=this;if(!0===this.readOnly){var t=this.ui.list.find(function(t){return t.value===e.value}),n=void 0===t?"(???)":t.title;return i.createElement("span",{className:"form-control w-min-6c"},n)}return i.createElement("select",{ref:function(t){return e.select=t},className:s()(this.className,"form-control"),defaultValue:this.defaultValue,onChange:this.onInputChange},this.ui.list.map(function(e,t){var n=e.title,r=e.value;return i.createElement("option",{className:void 0,key:t,value:r},n||r)}))},r.c([o.l],t.prototype,"readOnly",void 0),t}(b),A={height:"auto"},V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputs={},t}return r.d(t,e),t.prototype.setElementValue=function(e){for(var t in this.inputs){var n=this.inputs[t];n.checked=e===n.value}},t.prototype.setReadOnly=function(e){for(var t in this.readOnly=e,this.inputs)this.inputs[t].readOnly=e},t.prototype.setDisabled=function(e){for(var t in this.disabled=e,this.inputs)this.inputs[t].disabled=e},t.prototype.render=function(){var e,t=this,n=this.ui,r=n.defaultValue,o=n.list,a=this.context,u=a.isRow;a.inNode;!0===u&&(e=this.context.rowKey);var c=s()(this.className,"py-0");return i.createElement("span",{className:c,style:A},o.map(function(n,o){var a=n.value,s=n.title,u=t.name;return void 0!==e&&(u+="-"+e),i.createElement("label",{key:o,className:"form-radio-inline"},i.createElement("input",{ref:function(e){return t.inputs[o]=e},type:"radio",name:u,value:a,defaultChecked:(t.defaultValue||r)===a,onChange:t.onInputChange}),s||a)}))},t}(b),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputType="range",t}return r.d(t,e),t.prototype.setReadOnly=function(e){this.input.readOnly=this.readOnly=e},t.prototype.setDisabled=function(e){this.input.disabled=this.disabled=e},t.prototype.render=function(){var e=this,t=this.ui,n=t.min,r=t.max,o=t.step;return i.createElement(i.Fragment,null,i.createElement("input",{ref:function(t){return e.input=t},className:s()(this.className,"form-control","w-min-6c"),type:this.inputType,defaultValue:this.defaultValue,onChange:this.onInputChange,max:r,min:n,step:o}))},t}(b),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return void 0===(e=this.ui&&this.ui.pickId)?(alert("no pickId defined!"),[2]):[4,e(this.context,this.name,this.value)];case 1:return t=n.sent(),this.setDataValue(t),this.clearError(),this.clearContextError(),this.checkRules(),[2]}})})},t}return r.d(t,e),t.prototype.setReadOnly=function(e){this.readOnly=e},t.prototype.setDisabled=function(e){this.disabled=e},t.prototype.render=function(){var e,t;void 0!==this.ui&&(e=this.ui.placeholder,t=this.ui.Templet);var n,r={"form-control":!0,"required-item":!0===this.itemSchema.required,"cursor-pointer":!0,"is-invalid":this.hasError};return void 0===this.value||null===this.value?(n=e||"placeholder",r["text-muted"]=!0):n=void 0===t?i.createElement(i.Fragment,null,this.value):"function"===typeof t?t(this.value):t,i.createElement(i.Fragment,null,i.createElement("div",{className:s()(r),onClick:this.onClick},n),this.renderErrors())},r.c([o.l],t.prototype,"value",void 0),t}(b),j=function(e,t,n){return i.createElement("span",{className:"text-danger"},"!!data type ",e," only support ",(n||[]).join(", "),", can't use ui ",t,"!!")},R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return this.clearError(),this.clearContextError(),e=this.itemSchema,t=e.name,"submit"!==e.type?[3,2]:[4,this.context.submit(t)];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.observerRender=Object(v.a)(function(){var e,n,r,o=t.itemSchema,a=o.name,s=o.type;if(void 0!==t.ui){var u=t.ui.widget;if("button"!==u)return j(s,u,["button"]);e=t.ui.Templet,n=t.ui.className,r=t.ui.label}var c,l=t.context,h=l.form,d=l.hasError,p=t.context,m="submit"===s&&d;c=void 0!==t.children?t.children:"function"===typeof e?e():void 0!==e?e:r;var f=i.createElement("button",{className:n,type:"button",disabled:m,onClick:t.onClick},c||a);return!0===p.inNode?i.createElement(i.Fragment,null,f,t.renderErrors()):i.createElement("div",{className:h.ButtonClass},i.createElement("div",null,t.renderErrors()),f)}),t}return r.d(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.render=function(){return i.createElement(this.observerRender,null)},t}(b),L=function(){function e(e,t,n,r,o){var a,s=this;if(this.widgets={},this.errors=[],this.errorWidgets=[],this.renderErrors=Object(v.a)(function(){var e=s.errors;return 0===e.length?null:i.createElement(i.Fragment,null,e.map(function(e){return i.createElement("span",{key:e,className:"text-danger inline-block my-1 ml-3"},i.createElement("i",{className:"fa fa-exclamation-circle"})," \xa0",e)}))}),this.form=e,this.uiSchema=t,this.initData=n,this.inNode=r,this.isRow=o,void 0!==t){var u=t.rules;void 0!==u&&(this.rules=[],!1===Array.isArray(u)?this.rules.push(u):(a=this.rules).push.apply(a,u))}}return e.prototype.getArrRowContexts=function(e){void 0===this.subContexts&&(this.subContexts={});var t=this.subContexts[name];return void 0===t&&(this.subContexts[name]=t={}),t},Object.defineProperty(e.prototype,"arrName",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.getValue=function(e){return this.initData[e]},e.prototype.setValue=function(e,t){this.initData[e]=t;var n=this.widgets[e];void 0!==n&&n.setValue(t)},e.prototype.getDisabled=function(e){var t=this.widgets[e];if(void 0!==t)return t.getDisabled()},e.prototype.setDisabled=function(e,t){var n=this.widgets[e];void 0!==n&&n.setDisabled(t)},e.prototype.getReadOnly=function(e){var t=this.widgets[e];void 0!==t&&t.getReadOnly()},e.prototype.setReadOnly=function(e,t){var n=this.widgets[e];void 0!==n&&n.setReadOnly(t)},e.prototype.getVisible=function(e){var t=this.widgets[e];void 0!==t&&t.getVisible()},e.prototype.setVisible=function(e,t){var n=this.widgets[e];void 0!==n&&n.setVisible(t)},e.prototype.submit=function(e){return r.b(this,void 0,void 0,function(){var t,n,i,o,a,s;return r.e(this,function(r){switch(r.label){case 0:if(this.checkRules(),!0===this.hasError){for(t="",n=0,i=this.errorWidgets;n<i.length;n++)o=i[n],t+=o.name+":\n"+o.errors.join("\n");return console.error(t),[2]}return void 0===(a=this.form.props.onButtonClick)?(alert("button "+e+" clicked. you should define form onButtonClick"),[2]):[4,a(e,this)];case 1:return void 0===(s=r.sent())?[2]:(this.setError(e,s),[2])}})})},e.prototype.checkFieldRules=function(){for(var e in this.widgets)this.widgets[e].checkRules();if(void 0!==this.subContexts)for(var e in this.subContexts){var t=this.subContexts[e];for(var n in t)t[n].checkFieldRules()}},e.prototype.checkContextRules=function(){var e;if(this.clearErrors(),void 0!==this.rules){for(var t=0,n=this.rules;t<n.length;t++){var r=(0,n[t])(this);if(void 0!==r)if(!0===Array.isArray(r))(e=this.errors).push.apply(e,r);else if("string"===typeof r)this.errors.push(r);else for(var i in r)this.setError(i,r[i])}if(void 0!==this.subContexts)for(var i in this.subContexts){var o=this.subContexts[i];for(var a in o){var s=o[a];s.clearErrors(),s.checkContextRules()}}}},e.prototype.setError=function(e,t){var n=this.widgets[e];void 0!==n&&(n.setContextError(t),this.addErrorWidget(n))},e.prototype.clearContextErrors=function(){for(var e in this.widgets){var t=this.widgets[e];void 0!==t&&t.clearContextError()}},e.prototype.clearWidgetsErrors=function(){for(var e in this.widgets){var t=this.widgets[e];void 0!==t&&t.clearError()}},e.prototype.checkRules=function(){this.clearErrors(),this.clearWidgetsErrors(),this.checkFieldRules(),!0!==this.hasError&&this.checkContextRules()},e.prototype.addErrorWidget=function(e){this.errorWidgets.findIndex(function(t){return t===e})<0&&this.errorWidgets.push(e)},e.prototype.removeErrorWidget=function(e){var t=this.errorWidgets.findIndex(function(t){return t===e});t>=0&&this.errorWidgets.splice(t,1)},e.prototype.checkHasError=function(){if(!0===this.errorWidgets.length+this.errors.length>0)return!0;if(void 0===this.subContexts)return!1;for(var e in this.subContexts){var t=this.subContexts[e];for(var n in t)if(!0===t[n].hasError)return!0}return!1},Object.defineProperty(e.prototype,"hasError",{get:function(){return this.checkHasError()},enumerable:!0,configurable:!0}),e.prototype.clearErrors=function(){this.errors.splice(0),this.errorWidgets.splice(0),this.clearContextErrors()},r.c([o.l],e.prototype,"errors",void 0),r.c([o.l],e.prototype,"errorWidgets",void 0),r.c([o.e],e.prototype,"hasError",null),e}(),M=1,D=function(e){function t(t,n,r,i){var o,a=this,s=t.uiSchema;if(void 0!==s){var u=s.items;void 0!==u&&(o=u[n.name])}return(a=e.call(this,t.form,o,r,i,!0)||this).parentContext=t,a.arrSchema=n,a.rowKey=M++,a.data=r,a}return r.d(t,e),t.prototype.getItemSchema=function(e){return this.arrSchema.itemSchemas[e]},t.prototype.getUiItem=function(e){if(void 0!==this.uiSchema){var t=this.uiSchema.items;if(void 0!==t)return t[e]}},Object.defineProperty(t.prototype,"arrName",{get:function(){return this.arrSchema.name},enumerable:!0,configurable:!0}),t.prototype.clearErrors=function(){e.prototype.clearErrors.call(this),this.parentContext.clearErrors()},Object.defineProperty(t.prototype,"parentData",{get:function(){return this.parentContext.data},enumerable:!0,configurable:!0}),t}(L),B=function(e){function t(t,n){return e.call(this,t,t.uiSchema,t.data,n,!1)||this}return r.d(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.form.data},enumerable:!0,configurable:!0}),t.prototype.getItemSchema=function(e){return this.form.itemSchemas[e]},t.prototype.getUiItem=function(e){var t=this.form.uiSchema;if(void 0!==t){var n=t.items;if(void 0!==n)return n[e]}},t}(L),U=i.createContext({}),W=Object(v.a)(function(e){var t,n,r,o,a=e.parentContext,u=e.arrSchema,c=e.children,l=u.name,h=u.arr,d=a.initData[l],p=a.form,m=a.getArrRowContexts(l),f=a.getUiItem(l),b=l,y=p.ArrContainer,g=p.RowContainer,w=p.RowSeperator,E=p.uiSchema;if(void 0!==E){var C=E.selectable,k=E.deletable,P=E.restorable;!0!==n&&(n=C),!0!==r&&(r=k),!0!==o&&(o=P)}if(void 0!==f){var N=f.widget,S=f.label,x=f.selectable,T=f.deletable,I=f.restorable,F=f.ArrContainer,A=f.RowContainer,V=f.RowSeperator;if(void 0!==x&&(n=x),void 0!==T&&(r=T),void 0!==I&&(o=I),void 0!==F&&(y=F),void 0!==A&&(g=A),void 0!==V&&(w=V),t=f.Templet,"arr"!==N)return j(u.type,N,["arr"]);b=S||b}var q=!0;return y(b,i.createElement(i.Fragment,null,d.map(function(e,l){var p,f,b=void 0;if(!1===q?b=w:q=!1,void 0!==c)p=new D(a,u,e,!0),f=i.createElement(i.Fragment,null,c);else{var y=typeof t;"function"===y?(p=new D(a,u,e,!0),f=i.createElement(Object(v.a)(t),e)):"object"===y?(p=new D(a,u,e,!0),f=t):(p=new D(a,u,e,!1),f=i.createElement(i.Fragment,null,h.map(function(e,t){return i.createElement(i.Fragment,{key:e.name},J(p,e,void 0))})))}var E,C,k=p.rowKey;if(m[k]=p,!0===n){E=i.createElement("div",{className:"form-row-checkbox"},i.createElement("input",{type:"checkbox",onClick:function(t){var n=t.target.checked;e.$isSelected=n;var r=e.$source;void 0!==r&&(r.$isSelected=n),p.clearErrors()},defaultChecked:e.$isSelected}))}var P=!(void 0===e.$isDeleted||!1===e.$isDeleted);if(!0===r){var N=P?"fa-undo":"fa-trash";C=i.createElement("div",{className:"form-row-edit text-info",onClick:function(){if(!0===o){e.$isDeleted=!P;var t=e.$source;void 0!==t&&(t.$isDeleted=!P)}else{var n=d.indexOf(e);n>=0&&d.splice(n,1)}p.clearErrors()}},i.createElement("i",{className:s()("fa",N,"fa-fw")}))}var S=!0===n||!0===r?function(t){return i.createElement("fieldset",{disabled:P},i.createElement("div",{className:s()("d-flex",{deleted:P,"row-selected":e.$isSelected})},E,i.createElement("div",{className:!0===n&&!0===r?"form-row-content":"form-row-content-1"},t),C))}:function(e){return e};return i.createElement(U.Provider,{key:k,value:p},b,g(S(i.createElement(i.Fragment,null,i.createElement(p.renderErrors,null),f))))})))}),z=n(22),H=n(33),K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(){return r.b(t,void 0,void 0,function(){var e,t;return r.e(this,function(n){switch(n.label){case 0:return[4,(e=new H.a(this.itemSchema,this.ui,this.ui.label,this.value)).start()];case 1:return null!==(t=n.sent())&&(this.setValue(t),this.imageSrc=t),[4,e.end()];case 2:return n.sent(),[2]}})})},t.observerRender=Object(v.a)(function(){var e,n=["bg-white p-1 d-flex justify-content-center"];return t.readOnly||t.disabled||(n.push("cursor-pointer"),e=t.onClick),i.createElement("div",{className:s()(n),onClick:e},i.createElement(z.a,{src:t.imageSrc,className:"w-4c h-4c"}))}),t}return r.d(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.imageSrc=this.value},t.prototype.render=function(){return i.createElement(this.observerRender,null)},r.c([o.l],t.prototype,"imageSrc",void 0),t}(b),Q={id:{dataTypes:["id"],widget:O},text:{dataTypes:["integer","number","string"],widget:y},textarea:{dataTypes:["string"],widget:g},password:{dataTypes:["string"],widget:w},date:{dataTypes:["date"],widget:N},datetime:{dataTypes:["date"],widget:S},time:{dataTypes:["date"],widget:x},month:{dataTypes:["date"],widget:T},select:{dataTypes:["integer","number","string","date","boolean"],widget:F},url:{dataTypes:["string"],widget:E},email:{dataTypes:["string"],widget:C},number:{dataTypes:["integer","number"],widget:k},updown:{dataTypes:["integer","number"],widget:P},color:{},checkbox:{dataTypes:["boolean","integer","number"],widget:I},image:{dataTypes:["string"],widget:K},checkboxes:{},radio:{dataTypes:["integer","number","string","date","boolean"],widget:V},range:{dataTypes:["integer"],widget:q},button:{dataTypes:["button","submit"],widget:R}};function J(e,t,n,r){if(void 0===e)return null;if(void 0!==t){var o,a=t.name,s=t.type;switch(s){case"arr":var u=e.getItemSchema(a);return i.createElement(W,{parentContext:e,arrSchema:u,children:n})}var c=e.getUiItem(a);if(void 0===c)o=p(s);else{var l=c.widget;switch(l){default:if(void 0!==l)o=Q[l].widget;void 0===o&&(o=p(s));break;case"custom":o=c.WidgetClass;break;case"group":return i.createElement("span",null,"impletment group")}}e.isRow;var h=e.widgets,d=new o(e,t,r,n);return h[a]=d,i.createElement(d.container,null)}function p(e){switch(e){default:return y;case"id":return O;case"integer":return P;case"number":return k;case"string":return y;case"date":return N;case"boolean":return I;case"button":case"submit":return R}}}n(54);var G={_:{required:"required",number:"not valid number",integer:"not valid integer",min:"min value is ${min}",max:"max value is ${max}"},zh:{_:{required:"\u5fc5\u987b\u586b",number:"\u9700\u8981\u6570\u5b57",integer:"\u9700\u8981\u6574\u6570",min:"\u4e0d\u80fd\u5c0f\u4e8e${min}",max:"\u4e0d\u80fd\u5927\u4e8e${max}"}}},X=n(27),Z=function(e){function t(t){var n=e.call(this,t)||this;n.watch=function(){void 0!==n.props.formData&&n.calcSelectOrDelete()},n.DefaultContainer=function(e){return i.createElement("form",{className:s()(n.props.className),onSubmit:function(e){return e.preventDefault()}},e)},n.DefaultFieldContainer=function(e,t){var r=n.props.fieldLabelSize;if(r>0){var o=void 0;null===e?r=0:o=i.createElement("label",{className:s()("col-sm-"+r,"col-form-label")},e);var a="col-sm-"+(12-r);return i.createElement("div",{className:"form-group row"},o,i.createElement("div",{className:a},t))}return i.createElement("div",{className:"form-group"},null===e?null:i.createElement("label",{className:"col-form-label"},e),t)},n.DefaultFieldClass=void 0,n.DefaultButtonClass="text-center py-2",n.DefaultRes=Object(X.a)(G),n.ArrContainer=function(e,t){return i.createElement("div",null,i.createElement("div",{className:s()("small text-muted text-center bg-light py-1 px-3 mt-4 mb-1")},e),t)},n.RowContainer=function(e){var t=s()({"py-3":!0});return i.createElement("div",{className:t},e)},n.RowSeperator=i.createElement("div",{className:"border border-gray border-top"});var r=t.schema,a=t.uiSchema,u=(t.formData,t.Container),c=t.FieldContainer,l=t.FieldClass,h=t.ButtonClass,d=t.res;n.Container=u||n.DefaultContainer,n.FieldContainer=c||n.DefaultFieldContainer,n.FieldClass=void 0!==l&&""!==l&&null!==l?l:n.DefaultFieldClass,n.res=d||n.DefaultRes,n.ButtonClass=h||n.DefaultButtonClass,n.schema=r,n.itemSchemas={};for(var p=0,m=n.schema;p<m.length;p++){var f=m[p];n.itemSchemas[f.name]=f}return n.uiSchema=a,n.disposer=Object(o.d)(n.watch),n.data={},n}return r.d(t,e),t.prototype.renderContent=function(){var e=this;this.initData(this.props.formData);var t,n=this.props.children;return void 0!==n?(this.formContext=new B(this,!0),i.createElement(i.Fragment,null,n)):(void 0!==this.uiSchema&&(t=this.uiSchema.Templet),void 0!==t?(this.formContext=new B(this,!0),"function"===typeof t?t(this.data):t):(this.formContext=new B(this,!1),i.createElement(i.Fragment,null,this.schema.map(function(t,r){return i.createElement(i.Fragment,{key:r},J(e.formContext,t,n))}))))},t.prototype.initData=function(e){void 0===e&&(e={});for(var t=0,n=this.schema;t<n.length;t++){var r=n[t];this.initDataItem(r,this.data,e)}},t.prototype.initDataItem=function(e,t,n){var r=e.name,i=e.type;if("button"!==i)if("arr"===i){var a=e,s=a.arr;if(void 0!==s){for(var u=a.itemSchemas={},c=0,l=s;c<l.length;c++){u[(g=l[c]).name]=g}var h=n[r];void 0===h?h=[]:!1===Array.isArray(h)&&(h=[h]);for(var d=[],p=0,m=h;p<m.length;p++){for(var f=m[p],v={$source:f,$isSelected:f.$isSelected,$isDeleted:f.$isDeleted},b=0,y=s;b<y.length;b++){var g=y[b];this.initDataItem(g,v,f)}d.push(v)}t[r]=Object(o.l)(d)}}else t[r]=n[r]},t.prototype.calcSelectOrDelete=function(){for(var e=0,t=this.schema;e<t.length;e++){var n=t[e];this.arrItemOperated(n)}},t.prototype.arrItemOperated=function(e){var t=e.name;if("arr"===e.type&&void 0!==this.data){var n=this.data[t];if(void 0!==n)for(var r=e.arr,i=0,o=n;i<o.length;i++){var a=o[i],s=a.$source;if(void 0!==s){var u=s.$isSelected,c=s.$isDeleted;a.$isSelected=u,a.$isDeleted=c;for(var l=0,h=r;l<h.length;l++){var d=h[l];this.arrItemOperated(d)}}}}},t.prototype.componentDidMount=function(){var e=this.props.beforeShow;void 0!==e&&e(this.formContext)},t.prototype.componentWillUnmount=function(){void 0!==this.disposer&&this.disposer()},t.prototype.render=function(){var e=this.renderContent();return i.createElement(U.Provider,{value:this.formContext},i.createElement(this.formContext.renderErrors,null),this.Container(e))},t.prototype.buttonClick=function(e){return r.b(this,void 0,void 0,function(){var t,n;return r.e(this,function(r){switch(r.label){case 0:return this.formContext.checkRules(),!0===this.formContext.hasError?[2]:void 0===(t=this.formContext.form.props.onButtonClick)?(alert("you should define form onButtonClick"),[2]):[4,t(e,this.formContext)];case 1:return void 0===(n=r.sent())?[2]:(this.formContext.setError(e,n),[2])}})})},t}(i.Component);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.name,n=e.children,r=this.context;if(void 0===r)return i.createElement("span",{className:"text-danger"},"!only in Form!");var o=r.getItemSchema(t),a=J(r,o,n,this.props);return void 0===a?i.createElement("span",{className:"text-danger"},"!!",t," is not defined!!"):a},t.contextType=U}(i.Component);n.d(t,"a",function(){return Z}),n.d(t,"b",function(){return b})},function(e,t,n){"use strict";var r=n(1),i=n(3),o=n(20),a=n(8),s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.userAppUnits=function(e){return r.b(this,void 0,Promise,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,this.get("tie/user-app-units",{app:e})];case 1:return[2,t.sent()]}})})},t}(a.b))("tv/",void 0),u=n(0),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){var n=i.nav.user,r=n?n.name:"[\u672a\u767b\u5f55]",o=t.controller.uqsMan,a=o.appOwner,s=o.appName;return u.createElement(i.Page,{header:"APP\u65e0\u6cd5\u8fd0\u884c",logout:!0},u.createElement("div",{className:"m-3 text-danger container"},u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u767b\u5f55\u7528\u6237"),u.createElement("div",{className:"col-sm text-body"},r)),u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"App"),u.createElement("div",{className:"col-sm text-body"},a+"/"+s)),u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u9884\u8bbe\u5c0f\u53f7"),u.createElement("div",{className:"col-sm text-body"},e||u.createElement("small",{className:""},"[\u65e0\u9884\u8bbe\u5c0f\u53f7]"))),u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u53ef\u80fd\u539f\u56e0",u.createElement(i.FA,{name:"exclamation-triangle"})),u.createElement("div",{className:"col-sm text-body"},u.createElement("ul",{className:"p-0"},u.createElement("li",null,"\u6ca1\u6709\u5c0f\u53f7\u8fd0\u884c ",s),u.createElement("li",null,"\u7528\u6237 ",u.createElement("b",null,r)," \u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4e00\u4e2a\u8fd0\u884c",s,"\u7684\u5c0f\u53f7"),e&&u.createElement("li",null,"\u9884\u8bbe\u5c0f\u53f7 ",u.createElement("b",null,e)," \u6ca1\u6709\u8fd0\u884cApp ",s)))),u.createElement("div",{className:"form-group row"},u.createElement("div",{className:"col-sm-3 font-weight-bold"},"\u5c0f\u53f7",e),u.createElement("div",{className:"col-sm text-body"},"\u9884\u8bbe\u5c0f\u53f7\u5b9a\u4e49\u5728 public/unit.json \u6587\u4ef6\u4e2d\u3002 \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u6587\u4ef6\u7684\u7a0b\u5e8f\uff0c\u53ea\u80fd\u7531url\u76f4\u63a5\u542f\u52a8\u3002 \u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95eeapp\u4e4b\u540e\uff0c\u4f1a\u7f13\u5b58\u5728localStorage\u91cc\u3002",u.createElement("br",null),"\u5982\u679c\u8981\u5220\u53bb\u7f13\u5b58\u7684\u9884\u5b9a\u4e49Unit\uff0clogout\u7136\u540e\u518dlogin\u3002"))))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderRow=function(e,t){var n=e.id,r=e.nick,o=e.name;return u.createElement(i.LMR,{className:"px-3 py-2",right:"id: "+n},u.createElement("div",null,r||o))},t.onRowClick=function(e){return r.b(t,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return a.g.unit=e.id,[4,this.controller.start()];case 1:return t.sent(),[2]}})})},t.page=function(){return u.createElement(i.Page,{header:"\u9009\u62e9\u5c0f\u53f7",logout:!0},u.createElement(i.List,{items:t.controller.appUnits,item:{render:t.renderRow,onClick:t.onRowClick}}))},t}return r.d(t,e),t.prototype.open=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){return this.openPage(this.page),[2]})})},t}(i.VPage),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return u.createElement(i.Page,{header:"ERROR"},u.createElement("div",{className:"m-3"},u.createElement("div",null,"Load Uqs \u53d1\u751f\u9519\u8bef\uff1a"),e.map(function(e,t){return u.createElement("div",{key:t},e)})))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return u.createElement(i.Page,{header:"App start error!"},u.createElement("pre",null,"string"===typeof e?e:e.message))},t}return r.d(t,e),t.prototype.open=function(e){return r.b(this,void 0,void 0,function(){return r.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(i.VPage),p=function(e){function t(t){var n=e.call(this,void 0)||this,r=t.appName,i=t.version,a=t.tvs;if(n.name=r,void 0===r)throw'appName like "owner/app" must be defined in MainConfig';return n.version=i,n.uqs={},n.uqsMan=new o.a(n.name,a),n}return r.d(t,e),t.prototype.beforeStart=function(){return r.b(this,void 0,Promise,function(){var e,t,n,o,u;return r.e(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,this.load()];case 1:return e=r.sent(),t=a.g.predefinedUnit,void 0!==(n=i.nav.user)&&n.id>0?(o=this,[4,s.userAppUnits(this.uqsMan.id)]):[3,3];case 2:switch(o.appUnits=r.sent(),this.appUnits.length){case 0:return this.showUnsupport(t),[2,!1];case 1:if(void 0===(u=this.appUnits[0].id)||u<0||void 0!==t&&u!=t)return this.showUnsupport(t),[2,!1];a.g.unit=u;break;default:if(t>0&&void 0!==this.appUnits.find(function(e){return e.id===t})){a.g.unit=t;break}return this.openVPage(l),[2,!1]}r.label=3;case 3:return void 0!==e?(this.openVPage(h),[2,!1]):[2,!0];case 4:return r.sent(),this.openVPage(d),[2,!1];case 5:return[2]}})})},t.prototype.load=function(){return r.b(this,void 0,Promise,function(){var e,t,n,i,o,s,u,c,l,h;return r.e(this,function(r){switch(r.label){case 0:return e=this.uqsMan,t=e.appOwner,n=e.appName,i=this.uqsMan.localData,(o=i.get())&&o.version===this.version?[3,2]:[4,Object(a.k)(t,n)];case 1:for((o=r.sent()).version=this.version,i.set(o),s=0,u=o.uqs;s<u.length;s++)u[s].newVersion=!0;r.label=2;case 2:return c=o.id,l=o.uqs,this.uqsMan.id=c,[4,this.uqsMan.init(l)];case 3:return r.sent(),[4,this.uqsMan.load()];case 4:return 0===(h=r.sent()).length&&(h.push.apply(h,this.uqsMan.setTuidImportsLocal()),0===h.length)?(this.uqsMan.writeUQs(this.uqs),[2]):[2,h]}})})},t.prototype.showUnsupport=function(e){i.nav.clear(),this.openVPage(c,e)},t}(i.Controller);function m(e,t){return r.b(this,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,new e(t).start()];case 1:return n.sent(),[2]}})})}var f=function(e){function t(t){var n=e.call(this,void 0)||this;return n.cApp=t,n.uqs=t.uqs,n.init(),n}return r.d(t,e),t.prototype.init=function(){},t.prototype.newC=function(e){return new e(this.cApp)},t.prototype.newSub=function(e){return new e(this)},t}(i.Controller),v=function(e){function t(t){var n=e.call(this,t.cApp)||this;return n.owner=t,n}return r.d(t,e),t}(f);n.d(t,"a",function(){return p}),n.d(t,"d",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return v})},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(4),a=n(9),s=n(14),u=n(21),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.newValue=e.target.value;var n=t.value;t.isChanged=t.newValue!=n},t.onBlur=function(e){t.verifyValue()},t.onFocus=function(){t.error=void 0},t.page=Object(o.a)(function(e){var n=e.resolve,r=(e.reject,i.createElement("button",{className:"btn btn-sm btn-success",disabled:!t.isChanged,onClick:function(){t.verifyValue(),void 0===t.error&&n(t.newValue)}},"\u4fdd\u5b58"));return i.createElement(s.a,{header:"\u66f4\u6539"+t.label,right:r},i.createElement("div",{className:"m-3"},i.createElement("input",{type:"text",onChange:t.onChange,onBlur:t.onBlur,onFocus:t.onFocus,className:"form-control",defaultValue:t.value}),t.uiItem&&i.createElement("div",{className:"small muted m-2"},t.uiItem.placeholder),t.error&&i.createElement("div",{className:"text-danger"},t.error)))}),t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return[2,new Promise(function(t,n){var r=i.createElement(e.page,{resolve:t,reject:n});a.b.push(r,n)})]})})},t}(u.a),l=n(33),h=n(22),d=function(e){function t(t,n,r,a){var u=e.call(this,t,n,r,a)||this;return u.onChange=function(e){u.newValue=e;var t=u.value;u.isChanged=u.newValue!=t},u.page=Object(o.a)(function(e){var t=e.resolve,n=(e.reject,u.itemSchema.name),r=u.uiItem.list,o=i.createElement("button",{className:"btn btn-sm btn-success",disabled:!u.isChanged,onClick:function(){u.verifyValue(),void 0===u.error&&t(u.newValue)}},"\u4fdd\u5b58"),a=r?r.map(function(e,t){var r=e.title,o=e.value;return i.createElement("label",{key:t,className:"px-3 py-2 cursor-pointer"},i.createElement("input",{name:n,type:"radio",value:o,onClick:function(){return u.onChange(o)},defaultChecked:o===u.value})," ",r||o," \xa0")}):i.createElement(i.Fragment,null,"no list defined");return i.createElement(s.a,{header:"\u66f4\u6539"+u.label,right:o},i.createElement("div",{className:"m-3"},a))}),void 0===u.value&&(u.value=n.defaultValue),u}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return[2,new Promise(function(t,n){var r=i.createElement(e.page,{resolve:t,reject:n});a.b.push(r,n)})]})})},t}(u.a),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.newValue=e;var n=t.value;t.isChanged=t.newValue!=n},t.page=Object(o.a)(function(e){var n=e.resolve,r=(e.reject,t.uiItem.list),o=r?r.map(function(e,r){var o=e.title,a=e.value;return i.createElement("div",{key:r,className:"px-3 py-2 cursor-pointer bg-white mb-1",onClick:function(){t.onChange(a),n(t.newValue)}},o||a)}):i.createElement(i.Fragment,null,"no list defined");return i.createElement(s.a,{header:"\u66f4\u6539"+t.label},i.createElement("div",{className:"my-3"},o))}),t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return[2,new Promise(function(t,n){var r=i.createElement(e.page,{resolve:t,reject:n});a.b.push(r,n)})]})})},t}(u.a),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.newValue=e;var n=t.value;t.isChanged=t.newValue!=n},t.page=Object(o.a)(function(e){return i.createElement(s.a,{header:"\u66f4\u6539"+t.label},"ddd")}),t}return r.d(t,e),t.prototype.internalStart=function(){return r.b(this,void 0,Promise,function(){var e=this;return r.e(this,function(t){return[2,new Promise(function(t,n){return r.b(e,void 0,void 0,function(){var e,n;return r.e(this,function(r){switch(r.label){case 0:return void 0===(e=this.uiItem.pickId)?(alert("IdItemEdit.pickId = undefined"),[2]):[4,e(void 0,void 0,this.value)];case 1:return n=r.sent(),this.onChange(n.id),t(n),[2]}})})})]})})},t.prototype.internalEnd=function(){return r.b(this,void 0,Promise,function(){return r.e(this,function(e){return[2]})})},t}(u.a),f=function(e){function t(t){var n=e.call(this,t)||this;n.defaultSepClassName="border-top edit-sep-light-gray",n.defaultRowContainerClassName="d-flex px-3 py-2 bg-white align-items-center",n.renderRow=function(e,t){var o,a,s=e.name,u=e.type,c=e.required,l=n.uiSchema[s];if(void 0===l)a=s;else{a=l.label;var d=l.Templet;if(void 0!==d)o="function"===typeof d?i.createElement("b",null,d(t)):i.createElement("b",null,d);else if(void 0!==t)switch(l.widget){case"radio":case"select":var p=l.list;o=i.createElement("b",null,p.find(function(e){return e.value===t}).title);break;case"id":o=i.createElement("b",null,"no templet for ",s,"=",t)}}if(void 0===o)switch(u){default:o=t?i.createElement("b",null,t):i.createElement("small",{className:"text-muted"},"(\u65e0)");break;case"image":o=i.createElement(h.a,{className:"w-4c h-4c",src:t})}var m=!0===c&&i.createElement("span",{className:"text-danger"},"*");return i.createElement("div",{className:n.rowContainerClassName,onClick:function(){return r.b(n,void 0,void 0,function(){return r.e(this,function(n){switch(n.label){case 0:return[4,this.rowClick(e,l,a,t)];case 1:return[2,n.sent()]}})})}},i.createElement("div",{className:"w-6c"},a," ",m),i.createElement("div",{className:"flex-fill d-flex justify-content-end"},o),!0!==n.props.stopEdit&&i.createElement("div",{className:"w-2c text-right"},i.createElement("i",{className:"fa fa-angle-right"})))},n.rowClick=function(e,t,i,o){return r.b(n,void 0,void 0,function(){var n,a,s,u,h;return r.e(this,function(r){switch(r.label){case 0:return n=this.props,a=n.onItemChanged,s=n.onItemClick,!0===n.stopEdit?[2]:void 0===s?[3,2]:[4,s(e,t,o)];case 1:return r.sent(),[2];case 2:if(void 0===(h=function(e,t,n,r){var i;if(void 0!==t)switch(t.widget){default:break;case"id":i=m;break;case"text":i=c;break;case"image":i=l.a;break;case"radio":i=d;break;case"select":i=p}if(void 0===i)switch(e.type){case"string":i=c;break;case"image":i=l.a}if(void 0===i)return;return new i(e,t,n,r)}(e,t,i,o)))return alert("undefined: let itemEdit:ItemEdit = createItemEdit(itemSchema, uiItem, label, value);"),[2];r.label=3;case 3:return r.trys.push([3,9,,10]),[4,h.start()];case 4:return(u=r.sent())==o?[3,7]:void 0!==a?[3,5]:(alert(e.name+" value changed, new: "+u+", pre: "+o),this.props.data[e.name]=u,[3,7]);case 5:return[4,a(e,u,o)];case 6:r.sent(),r.label=7;case 7:return[4,h.end()];case 8:return r.sent(),[3,10];case 9:return r.sent(),console.log("no value changed"),[3,10];case 10:return[2]}})})};var o=t.topBorderClassName,a=t.bottomBorderClassName,s=t.sepClassName,u=t.rowContainerClassName,f=t.uiSchema,v=t.stopEdit;return n.topBorder=i.createElement("div",{className:o||n.defaultSepClassName}),n.bottomBorder=i.createElement("div",{className:a||n.defaultSepClassName}),n.rowContainerClassName=u||n.defaultRowContainerClassName,!0!==v&&(n.rowContainerClassName+=" cursor-pointer"),n.sep=i.createElement("div",{className:s||n.defaultSepClassName}),n.uiSchema=f&&f.items||{},n}return r.d(t,e),t.prototype.render=function(){var e=[],t=this.props.schema,n=t.length;e.push(this.topBorder);for(var r=0;r<n;r++){var o=t[r];r>0&&e.push(this.sep);var a=this.props.data[o.name];e.push(this.renderRow(o,a))}return e.push(this.bottomBorder),i.createElement("div",null,e.map(function(e,t){return i.createElement(i.Fragment,{key:t},e)}))},t=r.c([o.a],t)}(i.Component);n.d(t,"a",function(){return f})},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(6),a=n.n(o),s=n(4),u=n(5),c=function(){function e(e){this.list=e}return Object.defineProperty(e.prototype,"isPaged",{get:function(){var e=this.list.props.items;return null!==e&&void 0!==e&&!1===Array.isArray(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this.list.props.items;return null===e?null:void 0!==e?!0===Array.isArray(e)?e:e.items:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){var e=this.list.props.items;if(null===e)return!1;if(void 0===e)return!0;var t=e;return void 0!==t.items&&t.loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){},enumerable:!0,configurable:!0}),e.prototype.updateProps=function(e){},e.prototype.renderContent=function(e,t){var n=this.list.props.item.render;return void 0===n?i.createElement("div",{className:"px-3 py-2"},JSON.stringify(e)):n(e,t)},r.c([u.e],e.prototype,"loading",null),e}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(e,n){var r=t.list.props.item,a=r.className,s=r.key,u=r.onClick;return i.createElement("li",{key:void 0===s?n:s(e),className:o("va-row-clickable",a),onClick:function(){return u&&u(e)}},t.renderContent(e,n))},t}return r.d(t,e),t}(c),h=n(16),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(e,n){var r=t.list.props.item,a=r.className,s=r.key;r.render;if("string"===typeof e){var u=o("va-list-gap","px-3","pt-1");return i.createElement("li",{key:Object(h.a)(),className:u},e)}return i.createElement("li",{key:void 0===s?n:s(e),className:o(a)},t.renderContent(e,n))},t}return r.d(t,e),t}(c),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(e,n){var r=t.list.props.item,o=r.className,s=r.key,u=(r.render,r.onSelect,e.labelId),c=e.selected;return i.createElement("li",{key:void 0===s?n:s(e),className:a()(o)},i.createElement("div",{className:"d-flex align-items-center px-3"},i.createElement("input",{ref:function(e){e&&(t.input=e,e.checked=c)},className:"",type:"checkbox",value:"",id:u,defaultChecked:c,onChange:function(n){t.onSelect(e,n.target.checked)}}),i.createElement("label",{className:"",style:{flex:1,marginBottom:0},htmlFor:u},t.renderContent(e.item,n))))},t}return r.d(t,e),t.prototype.buildItems=function(){console.log("buildItems in selectable.tsx");var e,t=this.list.props,n=t.items,r=t.selectedItems,i=t.compare;return void 0===n?this._items=void 0:null===n?this._items=null:(e=!0===Array.isArray(n)?n:n.items,this._selectedItems=r,this._items=void 0===r?e.map(function(e){return{selected:!1,item:e,labelId:Object(h.a)()}}):void 0===i?e.map(function(e){return{selected:void 0!==r.find(function(t){return t===e}),item:e,labelId:Object(h.a)()}}):e.map(function(e){return{selected:void 0!==r.find(function(t){return i(e,t)}),item:e,labelId:Object(h.a)()}}))},Object.defineProperty(t.prototype,"items",{get:function(){return this.buildItems(),this._items},enumerable:!0,configurable:!0}),t.prototype.selectAll=function(){this._items&&this._items.forEach(function(e){return e.selected=!0})},t.prototype.unselectAll=function(){this._items&&this._items.forEach(function(e){return e.selected=!1})},t.prototype.updateProps=function(e){e.selectedItems!==this._selectedItems&&this.buildItems()},t.prototype.onSelect=function(e,t){e.selected=t;var n=this._items.some(function(e){return e.selected});this.list.props.item.onSelect(e.item,t,n)},Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this._items.filter(function(e){return!0===e.selected}).map(function(e){return e.item})},enumerable:!0,configurable:!0}),r.c([u.l],t.prototype,"_items",void 0),r.c([u.e],t.prototype,"items",null),t}(c);n(104);n.d(t,"a",function(){return m});var m=function(e){function t(t){var n=e.call(this,t)||this;n._$scroll=function(e){console.log("############### items scroll to "+e)};var r=n.props.item,i=r.onClick;return void 0!==r.onSelect?n.selectable=n.listBase=new p(n):n.listBase=void 0!==i?new l(n):new d(n),n}return r.d(t,e),t.prototype.componentWillUpdate=function(e,t,n){this.listBase.updateProps(e)},t.prototype.selectAll=function(){this.selectable&&this.selectable.selectAll()},t.prototype.unselectAll=function(){this.selectable&&this.selectable.unselectAll()},Object.defineProperty(t.prototype,"selectedItems",{get:function(){return this.listBase.selectedItems},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.header,o=t.footer,s=t.before,u=t.loading,c=t.none;t.item,t.selectedItems;void 0===s&&(s="before"),void 0===u&&(u="loading"),void 0===c&&(c="none");var l,h=this.listBase,d=(h.isPaged,h.items);h.loading;function p(e,t){if(e)switch(typeof e){default:case"string":return i.createElement("li",{className:"va-list-"+t},e);case"function":return i.createElement("li",{className:"va-list-"+t},e());case"object":return i.createElement("li",null,e)}}return l=null===d?p(s,"before"):void 0===d?p(u,"loading"):0===d.length?p(c,"none"):d.map(function(t,n){return e.listBase.render(t,n)}),i.createElement("ul",{className:a()("va-list",n)},p(r,"header"),l,p(o,"footer"))},t=r.c([s.a],t)}(i.Component)},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(6),a=n.n(o),s=function(){function e(){}return e.prototype.setValues=function(e){},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(e){return i.createElement("div",{key:"_b_"+e,className:""},i.createElement("div",{className:"w-100"},i.createElement("div",{style:{borderTop:"1px solid #f0f0f0"}})))},t}(s),c=function(e){function t(t){var n=e.call(this)||this;return n.param=t,n}return r.d(t,e),t.prototype.render=function(e){var t;switch(this.param){default:t="py-2";break;case"=":t="py-1";break;case"-":t="pb-1"}var n=a()(t);return i.createElement("div",{key:"_g_"+e,className:n,style:{backgroundColor:"#f0f0f0"}})},t}(s),l=function(e){function t(t,n){var r=e.call(this)||this;return r.gridProps=t,r.prop=n,r.col=!0===t.labelFixLeft?"col":"col-sm",r}return r.d(t,e),t.prototype.render=function(e){var t=this.prop,n=t.onClick,r=t.bk,o=a()({"cursor-pointer":void 0!==n,"bg-white":void 0===r,row:!0});return i.createElement("div",{key:e,className:o,onClick:n},this.renderLabel(),this.renderProp())},t.prototype.renderLabel=function(){var e=this.prop.label;return void 0===e?null:i.createElement("label",{className:this.col+"-3 col-form-label"},e)},t.prototype.renderProp=function(){var e,t,n=this.prop.label;switch(this.gridProps.alignValue){case"left":e="justify-content-start";break;case"center":e="justify-content-center";break;case"right":e="justify-content-end"}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}var r=this.col+(void 0===n?"-12":"-9"),o=a()(e,t,r,"d-flex");return i.createElement("div",{className:o},this.renderPropBody())},t.prototype.renderPropBody=function(){return i.createElement("div",{className:"form-control-plaintext"},this.renderPropContent())},t.prototype.renderPropContent=function(){return this.content},t}(s),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.setValues=function(e){this.content=void 0===e?void 0:e[this.prop.name]},t}(l),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.setValues=function(e){this.content=void 0===e?void 0:e[this.prop.name]},t}(l),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.setValues=function(e){if(void 0===e)this.content=void 0;else{var t=this.prop.list;this.content="string"===typeof t?e[t]:void 0}},t.prototype.renderPropBody=function(){var e=this.prop,t=e.list,n=e.row,r="string"===typeof t?this.content:t;return void 0===r?i.createElement("div",null):i.createElement("div",{className:"w-100"},r.map(function(e,t){return i.createElement(i.Fragment,{key:t},0===t?null:i.createElement("div",{style:{width:"100%",borderBottom:"1px solid #f0f0f0"}}),i.createElement(n,e))}))},t}(l),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.renderPropBody=function(){return this.prop.component},t.prototype.renderProp=function(){var e,t,n,r=this.prop,o=r.label,s=r.full;switch(this.gridProps.alignValue){case"left":e="justify-content-start";break;case"center":e="justify-content-center";break;case"right":e="justify-content-end"}switch(this.prop.vAlign){case"top":t="align-items-start";break;default:case"center":t="align-items-center";break;case"bottom":t="align-items-end";break;case"stretch":t="align-items-stretch"}n=!0!==s?this.col+(void 0===o?"-12":"-9"):"w-100";var u=a()(e,t,n,"d-flex");return i.createElement("div",{className:u},this.renderPropBody())},t}(l),f=function(){function e(e,t){this.gridProps=e,this.props=t,this.buildRows()}return e.prototype.buildRows=function(){this.rows=[];for(var e=!0,t=0,n=this.props;t<n.length;t++){var r=n[t];if("string"===typeof r)this.rows.push(new c(r)),e=!0;else{e||this.rows.push(new u);var i=void 0;switch(r.type){default:continue;case"string":i=new h(this.gridProps,r);break;case"number":i=new d(this.gridProps,r);break;case"list":i=new p(this.gridProps,r);break;case"component":i=new m(this.gridProps,r)}this.rows.push(i),e=!1}}},e.prototype.setValues=function(e){for(var t=0,n=this.rows;t<n.length;t++){n[t].setValues(e)}},e.prototype.render=function(){return this.rows.map(function(e,t){return e.render(String(t))})},e}(),v=n(4),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.d(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.rows,r=e.values,o=new f(this.props,n);o.setValues(r);var s=a()("container-fluid",t);return i.createElement("div",{className:s},o.render())},t=r.c([v.a],t)}(i.Component);n.d(t,"a",function(){return b})},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(5),a=n(4),s=n(6),u=n.n(s),c=(n(102),function(){function e(){}return Object.defineProperty(e.prototype,"content",{get:function(){return!0!==this.selected?this._content:void 0!==this._content?this._content:this._content=this.contentBuilder()},enumerable:!0,configurable:!0}),e.prototype.start=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return void 0!==this._content?[2]:void 0===this.load?[2]:[4,this.load()];case 1:return e.sent(),[2]}})})},r.c([o.l],e.prototype,"selected",void 0),e}()),l=function(e,t,n){return i.createElement("div",{className:"d-flex justify-content-center align-items-center flex-column cursor-pointer "+n},i.createElement("div",null,i.createElement("i",{className:"fa fa-lg fa-"+t})),i.createElement("small",null,e))},h=function(e){function t(t){var n=e.call(this,t)||this;n.tabClick=function(e){return r.b(n,void 0,void 0,function(){return r.e(this,function(t){switch(t.label){case 0:return[4,e.start()];case 1:return t.sent(),this.selectedTab.selected=!1,e.selected=!0,this.selectedTab=e,[2]}})})};var i=n.props,o=i.size,a=i.tabs,s=i.tabBack,u=i.contentBack,l=i.sep,h=i.selected;return n.size=o||"md",n.tabs=a.map(function(e){var t=new c;return t.name=e.name,t.selected=!1,t.caption=e.caption,t.contentBuilder=e.content,t.notify=e.notify,t.load=e.load,t}),n.tabBack=s||"bg-light",n.contentBack=u,n.sep=l||"border-top border-gray",void 0!==h&&(n.selectedTab=n.tabs.find(function(e){return e.name===h})),void 0===n.selectedTab&&(n.selectedTab=n.tabs[0]),n.selectedTab.selected=!0,n}return r.d(t,e),t.prototype.componentWillMount=function(){return r.b(this,void 0,void 0,function(){return r.e(this,function(e){switch(e.label){case 0:return void 0===this.tabs?[2]:0===this.tabs.length?[2]:[4,this.tabs[0].start()];case 1:return e.sent(),[2]}})})},t.prototype.showTab=function(e){var t=this.tabs.find(function(t){return t.name===e});void 0!==t&&(void 0!==this.selectedTab&&(this.selectedTab.selected=!1),t.selected=!0,this.selectedTab=t)},t.prototype.render=function(){var e=this,t=u()("tab","tab-"+this.size),n=i.createElement("div",{className:u()(this.contentBack,"tab-content")},this.tabs.map(function(e,t){var n={display:!0===e.selected?void 0:"none"};return i.createElement("div",{key:t,style:n},e.content)})),r=i.createElement("div",{className:u()(this.tabBack,this.sep,"tab-tabs")},this.tabs.map(function(t,n){var r,o=t.selected,a=t.caption,s=t.notify;if(void 0!==s){var u=s.get();void 0!==u&&(u>0?r=i.createElement("u",null,u>99?"99+":u):u<0&&(r=i.createElement("u",{className:"dot"})))}return i.createElement("div",{key:n,className:"",onClick:function(){return e.tabClick(t)}},i.createElement("div",{className:"align-self-center"},r,a(o)))}));return i.createElement("div",{className:t},"top"===this.props.tabPosition?i.createElement(i.Fragment,null,r,n):i.createElement(i.Fragment,null,n,r))},r.c([o.l],t.prototype,"selectedTab",void 0),r.c([o.l],t.prototype,"tabs",void 0),t=r.c([a.a],t)}(i.Component);n.d(t,"a",function(){return l}),n.d(t,"b",function(){return h})},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(5),a=n(3),s=n(34);!function(e){function t(t){var n=e.call(this,t)||this;n.schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],n.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},n.onItemChanged=function(e,t,i){return r.b(n,void 0,void 0,function(){var n;return r.e(this,function(r){switch(r.label){case 0:return n=e.name,[4,s.a.userSetProp(n,t)];case 1:return r.sent(),this.data[n]=t,a.nav.user[n]=t,a.nav.saveLocalUser(),[2]}})})};var i=a.nav.user,o=i.nick,u=i.icon;return n.data={nick:o,icon:u},n}r.d(t,e),t.prototype.render=function(){return i.createElement(a.Page,{header:"\u4e2a\u4eba\u4fe1\u606f"},i.createElement(a.Edit,{schema:this.schema,uiSchema:this.uiSchema,data:this.data,onItemChanged:this.onItemChanged}))},r.c([o.l],t.prototype,"data",void 0)}(i.Component);n.d(t,"a",function(){return s.a})},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(8),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reApi=function(){return r.b(t,void 0,void 0,function(){var e,t,n,i,a,s;return r.e(this,function(r){switch(r.label){case 0:return this.props.clearError(),e=this.props,t=e.channel,n=e.url,i=e.options,a=e.resolve,s=e.reject,[4,Object(o.n)(t,n,i,a,s)];case 1:return r.sent(),[2]}})})},t.close=function(){return r.b(t,void 0,void 0,function(){return r.e(this,function(e){return this.props.clearError(),[2]})})},t}return r.d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.error,r=t.url;if("object"===typeof n){var o=[];for(var a in n)o.push(i.createElement("li",{key:a},i.createElement("label",null,a),i.createElement("div",null,n[a])));e=i.createElement("ul",null,o)}else e=i.createElement("div",null,n);return i.createElement("li",null,i.createElement("article",{className:"page-container"},i.createElement("section",null,i.createElement("div",{className:"va-error"},i.createElement("div",null,"\u7f51\u7edc\u51fa\u73b0\u95ee\u9898"),i.createElement("div",null,"\u70b9\u51fb\u91cd\u65b0\u8bbf\u95ee"),i.createElement("div",null,"url: ",r),e,i.createElement("div",{className:"p-3"},i.createElement("button",{type:"button",onClick:this.reApi},"\u91cd\u65b0API"),i.createElement("button",{type:"button",onClick:this.close},"\u5173\u95ed"))))))},t}(i.Component);t.a=a},,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAABz1SURBVHja1Ht5eBzVle+5tXb1JnWrtcuSbNmSjY2RWcxmiIGEDIEJMEmALB8fecMkhJdMlknCy3skE4YhkH0jTDIZAsO8gQyEhLwQJiFgMEsMBizvkixrX1otqffu6q6qW/e+c6sleZNsky//pP2VW6rl1j3b7/zOuVeEcw47128B3zndAIzB4ocA0LEpUDtWAcfzUsAPUlUYiCJD4Ze/AZbJgtLSAtwqg7Z2DZCaGsCh8DmC5yywX3sDuOMASybBTaVAX9cFbjaH1yXgpgmsWARjy0Xg33opgE8DbtvgJmZg2Y8Yt2wBy+UBJAlO64MTIqoKPJf7YOnNXV8/f7SnVYG/lA8KyUslcEdHPSFO9xmQlag7l/x4OZdfIU795QgsrGUYINfVAqeuZ/FT3S+8hqWz77EHhy5Jq1LxL0tgDCsSMEBqqAeeyZ2WWzuzs808lf4KI0Sa0aT4X5bAntAIEsK6rgsVwICTx3wqfRufTa4pIEZkm2NDpyuwUKUsnAQPesoXLULe4jMM+DEPkfkxRSAG8Mh548474indWsPHqsPLuDRZ/EIAfAedit8u4+tTuhovVocfO1bgEwYgAp2vc4aGbkKtBtWu1dvkjrbvmS/+kQmE9lyK4EOEcHEvQZdjmQwiMxWxcy0CzAc5pTJQ+v+Iz/cIyLKY8GX43//AwYPgMsrL9nbURZBI0ll4fS+O+T28VjqZ1bz3Vt59oj7Q8t5ZSa6iI2N3SaVSlOF7Mwp5yyHkmSMCs0qASz4fAgKtqIgQPzdLH3X6Dr0XdI3JK5pfZvkiE0iJL2zBmNqC6WUN3t+P9/4RNHUSheaEOuBMTl2GqegGFATkttYDxrouwiYnrqej418DRekiqgJSKPhjIpPtck30QRyzGzSN4/tDpxJYpEiR9o6JYQ/By+CMjgsEl8C2vkDHJy+RMQVmZXCnNfIq3jWzKLCwijMwjHm1CaTq6oV8vJoVCp1cyK7pE1K46hnn0CC4E5NXcc7uwTfXsHyuzMxypzMy+qRslj4mogaNbrj5wpmACpRbmvKha646ZI+O3mYPj30DJxuUNC2jdnY8TCcm70RlWSyZ6ncz2QOsVHwSBTJPGcMuXR6whBc59HI6NHordylqW4EZXUrkA8arflqJGk9gIkvA8gUov/EWaKs7PA0Sv389KxQbOQ4ihwIjbnz6MOEsjNb4Ki+a3UpT4yVqe1un1bPnZzQx24iTkLmLSEqkNaxorhSTkiIRlc4l7yi98PJKls0GcczDJBT8RzkafZROTnnehMr6KnqQD8MmiYounDKvLiesiC7OY2x45EvpXLbej8Ji+ELcJ+9QDKOHmkU4JoaJonjoh25XcRlVbcL4q0IXoeiGL7izcyU5HGzAeIySfMECx7nCGR59N1ptVNa0e/E7KUKa5bKbkGHVEU0DdCsfutmZgGFAdB2kcOgFbV3no55rIgvzAFCSBr14XDiWFXbp69680Sg4Z12amftcNp28LCMTqMZ7kwq3Erry32CVC4xxOAGlOXNBaW4CuTYWLu/bfw4UCgKXTElVd+I58b46KRBQEAF9bjJ9l9zSPKKsaPkoJvYXZNsCFakmWuo8jGVjgRl5VtdVzm0HpeRbpGBgE/7co52xDuNN86zsIe/JPkhnl1QGKsw60CuIiCwr6u1sNvnpMaCkWtJBQQHHwlqf0dD4NHrmIv4v+IcAi050iprKFd4mSdK53mQVZVquqtotydJ7rYO9j9L4dJVkGHnOERFVZRKBKYJT+RzG5nl4r4bx3YWuSTwcUJW0HI38GM/vJmgF5MFr7AN9Zwjr43nk58Z8PiVLI7K4JksntbwIRZaY2SL1HfrspJn1F3QV6ogKyOD5uCH/X0VREqgNDGfliMC8XP4OL5nPIHX7FE3MyOWdb651c/l6MQ+5oX4nc90Wa9+B+91kqg7d55MkGv0UWmecDg1f6AwcflwKh7+MYNdEZ2dX4QRavXjSdQuF+pYcqb6dBIMD81RPwXR0Jf7sBwEiboVEiAxxjFuLOMX7nYFBvOYIxVYEl44cooiZd/MWJV+4J1vIrxivq4a22noIOAyGg3oKve8ZfCtwvE8cR1A6X7jVC6dYzUfQEjKz6TsxRsNSdbgkRaMPOYcPb2KZ3ArJb7yCk9uJSpmSDeOvmeO8T0wWh0qCrh4mtnIBuvMqhtZVamufxee/gQKKd824cykQaQoR/CqWTJ+Fb91RsW7WEw4V61VSnnHRxe3+Q+CmMyA11gHD6krE6mLRgEpyEWcQE2qgULwXXfnioaYohDd1w+p9wzBuFWFyRdcvo21tg+Q4KlNBacMYw4m3InHoQO3d6bk1gYR+5oZ/xbjejmVhqyDszLK24IsRdCCHsN+F8TjMSnILouNK4rob3aJ5JsYkw3tMydCfQytTtDDQqalX0CI3codV82LR7ybnLpZCodeOZmDOyNhRQCRXhETXt/oGgMUTINfXgxKLzisth/dPSGpby53aTPIjQ0EdrCsugfMQmtyhEak3ZuSaNN8PjLJjnQAHXvqKRv7eTadvwuQdFAaXI5EiKuA/0RUR4Uqu1r3xv52h0a+w6cR5KFCV5PerxKX3I2Jvk+rr36GuaDZ4Pv88y+WSnPExSZXLiMLPQrnsuSiO96Kk619kth0WbIiXrH4mCAJDIFgudgWqitAQltW1ebeWK+6MliaG73bSf/i2ObsE/Stir3QzeTbyxq5r9ykUzDXrfnDJdG5/rrYBGJFOFBhT0K8x9fwBf9KIJGMODtiYZkwPeMRBaQKteTcPBqqgYMrIkhhaKuO9PBR8g0SqCbIyjq72LI7x7OKkPSAVwCMn8NzDR+VT4k3+eH8Tz2G6EqxJpDi+THpi5fLHlLJ1j8OZr6cpOhGtq7un7cXXr0nH49LeiLZ9JVceN5n7lZFE/ElOyIETBRaT4lywHHOhFDuhSKgIn61onx17uC73zi+HpicWHHxJ2ojWZ6k0onegAkrHP4cKRmZ3GyRmvsHLpdBbATmNqfDOc225zZlO3NwXC0LNed0/X3No4sp4If/F4ZLyMj61hMCnKLMWBVmYgHC1gN+LJ49AHN0a+pOKexwikwa3iARlOYKBXoFx/TE+NvlNKWcGX5cda1RRP3tD1j7gm8v8YoI5oezaNb9ZX9+yJrjr0C2zdvEQ0+p2k+NSnnLKtoplV+whhAyFvOLb19gIgXvu9HpQ+Qce9DoR6OJvX3AhmKiy8sVKnSuel5Wl7pNYqfR30vT0tyGTC+wyCJQ2n//vN+bpM/LhoQeyqVTbxPoOvqKzKxp+7pXLCslUtNAS2a5mCwWJwGkKLGgiap0Oj4o8Dfo5m0CqqwNraKRyHfMoMi2I3v9NcHbtgRKCizVwGGMQgdGnn56wSGxcUWrySqW5zH0EXf1j0lzyXqSogR6Nw8yF5/7npZGmf9CnDt5ZKpXeP2KgqwcCpH7XgYshmYKMJkM5UvViiQp6dyqBF9wWBRCJ38t98nw8zVtQTE6S5+leNgfq2k7wXXIRqKvaIfuVr3mxuKTnCrIhxvNATbCkvFepSeIcX1LYBnzms2rZvh2zRrAnJLPJLRc+dF5rxydqduy+qTg0/KmcxMHG51cOjAKzMQOgC2fCftu/etUewPGP97pjBUaNg654nJp4lE5dahJBzMl/Vy4UxsGxf7GooFQK5OveAz4kBPQ7P4JFEJtnRpi3AZkPMFSQiHuey1cQnCxNK7kstdCZ2W/7LHoDRQW+pFiFQaL8042z5reDAzsuKM7O/NCViF/Ms4tJYOL4ObRsddmB2YC+vUTpHrWq6gR8XERpwXUJ8lsPHV26RDzLmBHImTJ17x4YHnhn8be/+TQg+T8WSbkX58ql58Ga4UkAUXXNJT1mpDU2ACAJccxSJfWIppwoHpbADebQd0jl8j2+dP7iPCq/pzaQHAwE77o+7f6wZt+hbpPaP3E5q+JITGqQtiddC/okCpuYDDldhilmPa4VclksKE5AemURdYVbLdSax90kkj8dGT2TlK1/s1xncz+3nvbNJJ5QlgAYPjMDWl0UYCxeIeylSgNDpBpRogmrkuVKQUKQYrEbMV7vVG1nXUKTYBsvvVFq67jvA2PZX9X6jE0Flv8ZA2kD4RIY6JBZy4T9jdXQrBpQPTYDfRF9gNfWvo5exDGEYUmm5fV5teWBBq1f6yaT98nJ9Oa0Lpet6vAjxaEhDB++VIYBL4IRSC7B2sRZsOGpEbwOefj/1E3789ym/j6w3RcM6YnGtq67biprfcyyu4vMehDZWrfQlQ8ZVN4sQE/XCrv54i3krOdeV8edEoz6g09gldbr0qU7mxUuvVwnn1Qk4KZ5NTNL79GwiM9pEGe6voMI6y7TwWyiHC4G9YiwJ0drDHD2LrlU+oxetv4q4zqwS4fp14PKjwOMfP0aJWL5y+ZFKdP8PpflTcjtwMBhU9SCV6u14brW1kc3HJq4vjQydMYBjfUnqPU4mYov212tcOnamuWbZrbd4MzO3kpENwTHcKqrh1QOJYIF//HyCP2IPHCRScA11FP3jQGaERM+rJbLn6Zlq+kQofBHH30+79fvXaX6n/8rW4NgvviJVDr1JUbICh3foKKjTPIyvB7zv95+/gX/a8PBkXOc/b0rRkO6le5c+Uhd0L9fPomelfl6ePkcaDtXMeqcjxQeiThAzrZ2uXOzWfn4OBftRhSiy5WBh6KnWvNR0MWvV8zC7SSb2xonLvT7pMN7DennBvH/4CotPLtJ8VcVndLtyeHhO3CSVX58hGKt8QYvwa4a/1Od1ZFPXODI77KnZu6ec0rGVPemwsXXXTsUzQm85icXWPDXZQXmfAsRhTviiVea+TRuIRIqx4UkRYk7ygzWlbBgDy0rqGjOb0Xyf7Ni2ddlsHrq9UOuV5V+XZDY/ZcbtTvbiQaNstY1k0n+Ey/Z70f1ScJikxStqtJ+uaPtXy/VAt9duX/ootJI8uvUKhvja9qhtq096Pvtc9fEZxJPS7KydDPw/3xm3sKi47D0J4KTW7NQmIu40P1+2QjoRGHHarEkE2hPYVFO6DwTJcfGOCFRRN+vSqXSDQgn9Qg+QIN+iJ259leXxxN/79f0XHPJkQlnH8mkk59nheIGWeRvPN7Swdxv6E8EytI9N9SvGqjKFz80R+2vU6Y0DvrQCI110LF3AHoG+1qGFR7A4nFJgd+9YGHRuFu6LoU6e2CwRqSShRYJE+QED36UwBZe25CnEEGmQ0Xlh+ypODEJxdaWCjqTSuBQagd8rlsfFp6CQBnG+6KHRq/SOdyitNQcKKTjH8aa+ibM0YbgBV4Kw3e1xhpfW0PI5/1VWlodHf9qMp3+Ilc1Y1ZikEVbbBiYwpRfhpnm2EEzEsoqLju5S5PjimSPR4u4dtmZeKlZwAuft1htKuf48zI/kpIQoJAc1GAeJLJaaQHiNQmLjhr8vSQzTB9FkQnMg3WhL5fNTKLFcq7vsHin4TKJZtJ1RVX9rjQ6WsICIXB0mSneybBmjiVS3WoweBPV3YsL8ekbiddVkEDlDFowljS3DHFDTmdDwW1E08qcnSKGldUrj5VXVaDcsxfcdJrysiWIsyeIjJqLGYHmoKFrqHmPjgmXM7CCCiOlc4PasR6CrE1PJEGNT0N5ZSs4ujJVIPC/34wGHkyazm3rSuyWWLEcI5RJDi0EZMHRQQb3KNARuEEdO+qkkj9c4CaK4C3oOXn0JluVoKZE4SDhO+bAfUGlTqVbcjKBj89ZmPhB71odtqYSq51cTvE6jMLFcEKK5Vzg6mqUuY4pXJshm9JOtuznWUmCkMuhtexCOhiCfU5xMKcpX9gdNv64Lqt9c0Uy12GLrRRozaBY4xI9LVk+pv72JovfPlSJjUL1gJUprO2Kn58srkuUp5xCNPp4F5OTrOicvMW9uCZzDLNCrc7Mvo9NxT+FMeivNAFQcahRLV9oDfi0dWpz04SEdbCLrk/6D6PA0pFSm2DVQUgYKalYghHccsaVpfyGIgUaxVo6gTGH0Dso818Nb+zKGhOzP4kMDK/OR8KQwTEj8USlxXMU/RTMSgDlJFiwQ6ejoY41/7xVNrrp9PC6vSH96Quq6n5xtquCK518zdUT2J2aPtEquXwLS8y0eG3YhfJNcG7G9VCu+DeBTQ1/kBrqgM7NQbF3AF3bQ2bkp+QyVjL/GvP3Cnt4tJOUSjl8eIgXCgctn2+7wtjLmyWDFRHVTUw1JUPfljh7/W2+ZOaBmGV1FrZ0l4p9A8zYdzAgChFvOvjuBN47rBNz0Cc/2wrBL29Vq1q0g/13vloTGGtf0fLrhvHZK7YZUk+C2eMyLF1bf2aReJgnLtoRTX0TLT+NQjQc4+6ibi8Wb6Rm8Q2Z0p+5rruQhrq4bd0hhIUii1UUOeX1mokinecm5lzQtVlSy35dJPw76AKHznUk6KUMbF17vhCr/pyvf+iXoUOD44Vg4D9cw/dBlbEzuKjSkHBMNNe+1Ufsf77Qlrd1lXiTsr/vm7slu029eMvkRfHsJw8k9kZ31Rq35AlfVuBFC9uDQ0tdG8OKYw4UpWGJRemI1XvobnkmOcRsS7Rgz2Tp7AOYhLcc0/dSlKMW112ZF80Gpzzxccnv76Kx2O2Kovau6R+BaZ8BTFN/xxrqHyO9Ax+QOlpHzJWtDwVHJr8mcaYyHHONasTriP+pFrO4idDSwyPM2pAzNNiwp7/JnJxujjfF3iRVxpiRTFaaEydNS+HwUmijIc1SuegaSPIJNaubmGly51J3yc0Nj6E0N2HNuwUlPLbsO/pn0dKVKlUTKxa3Et13HwsaNyNCZzuH4yDpfpfXq0/SdOZmlkx/gG5Y+4/gsL8hExMXMny/byZ1dqAm+h3Xdq50bHt9EM+tLqHTjE+SOLVpXA/8PNDYMEpiNUuvVR0tsO/ss5ZC1wlr1+5xJ5nqIr4lNCasx+FSNzG7BVOE5P1OTr7pgy+s8Qoik05tBah+rxUJ/wf3+6BKcAWV7Ceh4G55du4S3aZcbaj7FovHH8EHA+htTXQ68Vkxjo6aS2O1NKMSvIAFfyQ0adfVbldopcVzqg0rYk13qWNWCod2S4av0vpZTgpKJb7IppbWKDIpTF1Y6fD53nulWxkmVvnGZGOsur+uCijmfsSBCU7pNvyOQCZzFd64gwRDvQthoiCA+HAug0g09q9fyZuitVDAcnKstvoprmm7KTI3iteXO46sHuYLJx7ZfLUcDNYTw++1Y06rb328sDjPEtYuPVhLbuPF/nGg2QU9IdqL/v1mlOVccR+dioMzPumwgplS0IJmIX+25dKULCs7xDN6ZTsQ7CQW7WmofrC7uf33DTkT+sLaYbe58WFd1aiGKU3z+ZY9Fl3a2t+31HxX4XGht2CtyG+7ty7KRxMn2NNQNT3M7Ts3Fegr/bq8Osj170cyxQ4mXJvS2szQ4KqspkJXtozPoG1DIVVKpcA2fDU0i/SkVO51ZIkNuZa0X2KH9PWdX3tnrKm/fvvOB3qsvJm68KxvocJ3czit7VQLoBVaeoEkhxXBPMs61YYsNt/aIYu7CdCNAga0Nrf+rvvw2KMxpA1zqlGtFIpJVyIdfnw1WhDSIyNaCr9ZXXtlpd9xmSAdLoFOWZHq9WjELqaTfL9KfuGXlc9cWSTMyE8+vK+Y2VS69spd77z2ut+AQ0/bEBUuXRtbylWHMceOuqXS2uWFRYKC/4TbYnmDh4Q0knhcmKKSgo4Lkf7Ry9xy6SFTlsOBDD3ftaywAK4514Zev5xjazfOVRs6FgA6KLbDnf4Bx+trE2JBtMblAZqRUsnS5uZVO1pjdZaz7aVv9bn2lfEVMdjokHUjjz1+Naatn56OsBd+6PqlufT8uQwJBA9CKvPu5RbKZERFS1ehf2XTGM1mJltSua5qkMM6FqoiBzP0jrJltWGp1ybSkSQW3ZG27pWcxH6NvgLR8C/PuuD8Z8INjaC+1gOSWdaUSHXMyU9ArlAciMXoHFdkP75ZrTLLHy+PT95IVXkz6AZszDmQf34721ulFthp7ib+8CLTWqbhRfz6fxGJXI3u2bkcMAknhHDwX/pp4d8P2dIWw3LWb/IHb+go0XV0YZfNkQYKojSzkQn9qKzr90k+n+P6dPAXTdAbGxFMyq18eORSEUKzZbNYH58qc9UfRfdWyMh4p8CFPHqUISkQKlrwVkTfI7ev+J1yqp21x7u02t623PUe2We8Zu3b3ykKf2814ugVVPwdQYU3JnOmXdcU32OVnpjB46z2FS8oQ/HfOsVCgBwV/wJYKCG02YXhzUXXmVZNqN7TC/WmA7bY/M1ZO1a13UVNYWW/vtsIhh2SzlPZccCPITNNS3AwoILYLTeGJVq6pfZRIxhMEw5vT2BpHrKXiOOVru7byI/QhuM2xnGxGqGFOGzt9lU91B5tzT85lwJJ07fTWORJks/dfPS+SBHz6E3SmGsFLCxBfZN5MKYzWEdXgYuVEmQLm9WypSZUMpktm8+H6uqAmPZ6LEnlXrBh7Nz1+bW1TQH/71+UehrDr8o1Nf8ldhq9DXkrAtOJ8eUWbpNseCwuUbebLZWaxGo8ajs4l1mr+QKt9T7jwHvWnwNBrHIKqn6/Npu8VC0W2110a6+BACJVMTLu17TDiOCbLAJRRwNXxLZhXENSmU+WUTe9iruvo67lYIvia5k2zUtfIuV8Sle+u4XKMy3DUz98JaCWaGfH3cFgaO7tLtF6PkrE4tkSBw42Z4eC38ciPy0tsyJY+VuEcic1zfcVDZ1s2Hg2+NFjLJ/2Rjbs/57YGyAhyRC7HMRK4UzYbzactbH/by0DLnA1zESKWDW5ns3MPSBZVuOkT6bqxvXPdbevyTqJmXekC9lVgSu23re1YeW/NL114F2v7H3LGWmquSMYrvqDLLZFKsppH0eIh7w8zJl+48VSNPhv1cnc5zXOCTseIMTiF+OyOzZ+g15T81ui6W/VtLTC9N49YNbFfjpXEzmv5uDhD8mUEYcziBh+uanIzg46YNmcrXEJvRoc53IZqWYRlbxPhT+0UfKzdoeQ2cT0VrlYMjYqgWsDJfvqHgMunOve/ONotPoBmRBGKnz+bX08gX8fCyy/0602aPna637UdWjs8ob+4XOIono18Qn7IEvOep7N3ovM7G9hbm68um8IYrruWFZ5D4bD+zC3Ir/TIDydDMNc5t4SVqWoKbH3cD7GCfRV+1LVPv2nl42l0tmuyI2O67w/hIFAn31h8ytu0Zo6o+O7Gy+//JuBQNBllMKf8vEEXl1Vs+wNLlolHAyP1vkiT7nDE+f4LAccrdKdJEfzaSwynInJd5GXX73DGRq+Q6qurnEpvV3KF29FM/i4XOm9sErBIZ7RFni4QIdR0W3v3ji5OVMupnsHb4UDvf+gZXPVSXzsgF+a3O/K98Zk+Ufezj3Glk2lpyXwZStWn5Q6IhLDRNB8YnRdx9aGXQeu8LkK2DLx6CQ/an1ZTKS0d99H5aqqemRoTZw6FwnrextL+PLFhiueVwhsGE+ujCYzPzGtcrtllWBEB3evyp/NhrRvaGX+IvyJQp4gcJmeqtNHgPqN/qm2plvihw9/aZUDH63D/C+MIpZYvP7xAhurqvJjXnw/Eb0wBCvRfRT5lx2X2MgiDycecnZRCWjfQDCBjHRaV+CwLu2ZDfseMV3nMYPzOP0zCPu2/qrF+5sG4BNZVfpC3pBfjxatmxq5fEmIsqCOMCt7m8MrUlC815rfeKZzF1SEanV+TwifDwbJ22HBwMbrFgJfllAaD6szk5zuTKrsKRbwvaSp6rAijEHgz/Z5W3/GIxiNwrlZlskjvT7y9GFNuSJI4TKfWV4b8ilnIMWLIFsCS/MVMy7dqUdipprOxKoYOUuzbZ+3BCJVdk45KKypKVDU1WSSll/KMvosM4xByxGlHmR9Qil/Jqse/fn/AgwAOY4uqSLnKwwAAAAASUVORK5CYII="},function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.ee7cd8ed.svg"},function(e,t,n){e.exports=n(112)},,,,,function(e,t,n){},,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(29),o=n(1),a=(n(87),n(2)),s=function(e){return r.createElement(r.Fragment,null," ",e.chineseName," ")},u="http://www.jkchemical.com/static/Structure/",c="http://www.jkchemical.com/static/Structure/999.png";function l(e){var t=e.style,n=e.className,i=e.chemicalId;return r.createElement(a.Image,{src:i&&u+i.substr(0,3)+"/"+i+".png",style:t,className:n,altImage:c})}function h(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 text-muted pr-0"},e,":"),r.createElement("div",{className:"col-8"},t))}var d={salesTask:{salesTask:function(e){var t=e.desciption,n=e.customer,i=e.type,o=e.sourceid;return r.createElement(r.Fragment,null,Object(a.tv)(t),Object(a.tv)(n),Object(a.tv)(i),Object(a.tv)(o))}},common:{address:function(e){var t=e.country,n=e.province,i=e.city,o=e.county;return r.createElement(r.Fragment,null,Object(a.tv)(t),Object(a.tv)(n,void 0,void 0,function(){return r.createElement(r.Fragment,null)}),Object(a.tv)(i,void 0,void 0,function(){return r.createElement(r.Fragment,null)}),Object(a.tv)(o,void 0,void 0,function(){return r.createElement(r.Fragment,null)}))},country:s,province:s,city:s,county:s,currency:function(e){return r.createElement(r.Fragment,null," ",e.name," ")}},warehouse:{warehouse:function(e){var t=e.name;return r.createElement("div",null,t)}},product:{productx:function(e){var t=e,n=t.brand,i=t.description,o=t.CAS,s=t.purity,u=t.molecularFomula,c=t.molecularWeight,d=t.origin,p=t.imageUrl;return r.createElement("div",{className:"row d-flex"},r.createElement("div",{className:"col-12"},r.createElement("div",{className:"row py-2"},r.createElement("div",{className:"col-12"},r.createElement("strong",null,i))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(l,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},h("CAS",o),h("\u7eaf\u5ea6",s),h("\u5206\u5b50\u5f0f",u),h("\u5206\u5b50\u91cf",c),h("\u4ea7\u54c1\u7f16\u53f7",d),Object(a.tv)(n,function(e){return r.createElement(r.Fragment,null,h("\u54c1\u724c",e.name))}))))))},packx:function(e){var t=e.radiox,n=e.radioy,i=e.unit;return 1!==t?r.createElement(r.Fragment,null,t," * ",n,i):r.createElement(r.Fragment,null,n,i)},productCategory:function(e){e.children;return r.createElement(r.Fragment,null,"aaa")}}},p=n(79),m=n.n(p),f=r.createElement("div",{className:"d-flex align-items-center"},r.createElement("img",{className:"h-3c position-absolute",src:m.a}),r.createElement("div",{className:"h3 flex-fill text-center"},r.createElement("span",{className:"text-primary mr-3"},"\u8f7b\u4ee3\u7406"))),v=n(5),b=function(e){return!0===e?"text-primary":"text-muted"},y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.render=function(e){var n=t.controller,i=n.cSalesTask,o=n.cCustomer,s=n.cProduct,u=n.cMe,c=n.cMessage,l=[{name:"home",label:"\u4efb\u52a1",content:i.tab,icon:"home",notify:void 0},{name:"member",label:"\u5ba2\u6237",content:o.tab,icon:"vcard"},{name:"member",label:"\u4ea7\u54c1",content:s.tab,icon:"flask"},{name:"member",label:"\u6211\u7684",content:u.tab,icon:"user",load:u.load,notify:c.count}].map(function(e){var t=e.name,n=e.label,r=e.icon;return{name:t,caption:function(e){return Object(a.TabCaptionComponent)(n,r,b(e))},content:e.content,notify:e.notify,load:e.load}});return r.createElement(a.Page,{header:!1},r.createElement(a.Tabs,{tabs:l}))},t.count=v.l.box(0),t.calcSum=function(){t.count.set(0)},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.calcSum(),this.openPage(this.render),[2]})})},t}(a.VPage),g=n(4),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t}(a.CBase),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t}(a.CSub),C=n(10),k=n.n(C),P=function(){function e(e){this.entities=[],this.schemaLoaded=!1,this.cApp=e}return e.prototype.loadSchemas=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return!0===this.schemaLoaded?[2]:[4,Promise.all(this.entities)];case 1:return e.sent(),this.schemaLoaded=!0,[2]}})})},e.prototype.load=function(e){return o.b(this,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.loadSchemas()];case 1:return n.sent(),t=this.initData(),[4,this.loadToData(e,t)];case 2:return n.sent(),[2,t]}})})},e}(),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.loadToData=function(e,t){return o.b(this,void 0,Promise,function(){var n;return o.e(this,function(r){switch(r.label){case 0:return[4,this.cApp.uqs.product.Brand.load(e)];case 1:return n=r.sent(),t.id=n.id,t.name=n.name,[2]}})})},t.prototype.initData=function(){return{}},t}(P),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.loadToData=function(e,t){return o.b(this,void 0,Promise,function(){var n,r,i,a,s,u,c,l,h;return o.e(this,function(o){switch(o.label){case 0:return[4,this.cApp.uqs.product.ProductX.load(e)];case 1:return n=o.sent(),k.a.merge(t,n),r=new N(this.cApp),i=t,[4,r.load(t.brand.id)];case 2:return i.brand=o.sent(),[4,this.cApp.uqs.product.ProductChemical.obj({product:e})];case 3:return(a=o.sent())&&(s=a.chemical,u=a.purity,c=a.CAS,l=a.molecularFomula,h=a.molecularWeight,t.chemical=s,t.purity=u,t.CAS=c,t.molecularFomula=l,t.molecularWeight=h),t.packs=[],n.packx.forEach(function(e){t.packs.push(e)}),[2]}})})},t.prototype.initData=function(){return{}},t}(P),x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getagentPrices=function(e,n){return o.b(t,void 0,void 0,function(){var t,r,i;return o.e(this,function(o){for(t=0;t<e.length;t++)if(r=e[t],r.pack,i=r.agentprice,n)return[2,i];return[2]})})},t.getFutureDeliveryTimeDescription=function(e,n){return o.b(t,void 0,void 0,function(){var t,r,i,a,s;return o.e(this,function(o){switch(o.label){case 0:return[4,this.cApp.uqs.product.GetFutureDeliveryTime.table({product:e,salesRegion:n})];case 1:return(t=o.sent()).length>0?(r=t[0],i=r.minValue,a=r.maxValue,s=r.unit,r.deliveryTimeDescription,[2,i+(a>i?"~"+a:"")+" "+s]):[2]}})})},t}return o.d(t,e),t.prototype.initData=function(){return{main:{},subs:[]}},t.prototype.loadToData=function(e,t){return o.b(this,void 0,Promise,function(){var n,r,i,a,s,u,c,l,h,d,p,m,f,v,b,y,g,w=this;return o.e(this,function(o){switch(o.label){case 0:return n=this.cApp.uqs.product,r=new S(this.cApp),i=t,[4,r.load(e)];case 1:return i.main=o.sent(),a=this.cApp,s=a.currentSalesRegion,u=a.currentLanguage,c=s.id,[4,n.PriceX.table({product:e,salesRegion:c})];case 2:return l=o.sent(),[4,n.AgentPrice.table({product:e,salesRegion:c})];case 3:return h=o.sent(),t.subs=l,d=[],t.subs.forEach(function(t){d.push(w.cApp.uqs.warehouse.GetInventoryAllocation.table({product:e,pack:t.pack,salesRegion:s})),d.push(w.cApp.uqs.promotion.GetPromotionPack.obj({product:e,pack:t.pack,salesRegion:s,language:u}))}),[4,Promise.all(d)];case 4:return p=o.sent(),[4,this.getFutureDeliveryTimeDescription(e,c)];case 5:for(m=o.sent(),f=0;f<t.subs.length;f++)for(t.subs[f].futureDeliveryTimeDescription=m,t.subs[f].inventoryAllocation=p[2*f],this.getagentPrices(h,t.subs[f].pack.id),v=p[2*f+1],(b=v&&v.discount)&&(t.subs[f].promotionPrice=Math.round((1-b)*t.subs[f].retail)),y=0;y<h.length;y++)g=h[y].pack.id,t.subs[f].pack.id==g&&(t.subs[f].agentPrice=h[y].agentPrice);return[2]}})})},t}(P),T=n(6),I=n.n(T),F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onScrollBottom=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return[2]})})},t.onSalesTaskClick=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){return t={id:e.id,type:e.type,biz:e.biz,description:e.description,remindDate:null,deadline:e.deadline,customer:e.customer},this.controller.showTaskDetailEdit(t),[2]})})},t.onSalesTaskAdd=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.showSelectTaskType()];case 1:return e.sent(),[2]}})})},t.renderSalesTask=function(e,n){var i=e.bizName,o=e.deadline,s=e.biz,u=e.customer,c=e.type,l=(e.typeName,e.priorty),h=I()({"my-1 mr-3":!0,"text-danger":l>0,"text-info":!(l>0)}),d=r.createElement("div",{className:h},t.controller.getTaskIcon(i)),p=r.createElement("div",{className:"text-right"},o&&r.createElement("small",{className:"text-muted"},"\u65f6\u9650\uff1a",r.createElement(a.EasyDate,{date:o})));return r.createElement(a.LMR,{className:"px-3 py-2",left:d},r.createElement(a.LMR,{className:"",right:p},r.createElement("div",{className:"font-weight-bold"},Object(a.tv)(u,function(e){return r.createElement(r.Fragment,null,e.name)}))),r.createElement(a.LMR,{className:"",right:r.createElement("div",{className:"text-muted"},r.createElement("small",null,Object(a.tv)(c,function(e){return r.createElement(r.Fragment,null,e.description)})))},r.createElement("div",{className:"text-muted"},r.createElement("small",null,Object(a.tv)(s,function(e){return r.createElement(r.Fragment,null,e.description)})))))},t.page=Object(g.a)(function(){var e=t.controller.tasks;if(void 0===e)return null;var n=r.createElement("div",{className:"my-3 mx-2",style:{color:"#888"}},"\u65e0\u4efb\u52a1"),i=r.createElement("div",{onClick:t.onSalesTaskAdd,className:"cursor-pointer px-3 py-2"},r.createElement(a.FA,{name:"plus"})),o=(r.createElement("div",null," \u9500\u552e\u52a9\u624b"),{render:t.renderSalesTask,onClick:t.onSalesTaskClick}),s=e.tasksNow,u=e.dateTasksList;return r.createElement(a.Page,{header:"\u9500\u552e\u52a9\u624b",onScrollBottom:t.onScrollBottom,right:i,headerClassName:"bg-primary pl-3"},0==s.length&&0==u.length&&n,s.length>0&&r.createElement(a.List,{before:"",none:n,items:s,item:o}),u.map(function(e,t){var i=e.date,s=e.list;return 0===s.length?null:r.createElement(r.Fragment,{key:t},r.createElement("div",{className:"small text-muted pt-3 px-3 pb-2 text-center"},r.createElement(a.EasyDate,{date:i})),r.createElement(a.List,{before:"",none:n,items:s,item:o}))}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t}(a.VPage),A=I()("w-100 py-3","cursor-pointer"),V=r.createElement("div",{className:"w-2c text-right"},r.createElement("i",{className:"fa fa-chevron-right"})),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(e){var t=this,n=this.controller.cSalesTask,i=n.showCustomerDetail,s=(n.showTaskHistory,e.type),u=e.biz,c=e.customer,l=e.description,h=e.deadline,d=(e.id,[{type:"component",name:"type",component:r.createElement(a.LMR,{className:A,left:r.createElement("div",{className:"mr-2 "}," ",r.createElement(a.FA,{name:"bookmark-o",className:"text-info mr-2 pt-1"})," ")},r.createElement("span",{className:"font-weight-bold mr-3 my-3"},Object(a.tv)(s,function(e){return r.createElement(r.Fragment,null,e.description)})," "),"  ",Object(a.tv)(u,function(e){return r.createElement(r.Fragment,null,e.description)}))},{type:"component",name:"customer",component:r.createElement(a.LMR,{className:A,onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,i(c.id)];case 1:return[2,e.sent()]}})})},left:r.createElement("div",{className:"mr-2"}," ",r.createElement(a.FA,{name:"user",className:"text-info mr-2 pt-1"})," "),right:V},Object(a.tv)(c,function(e){return r.createElement(r.Fragment,null,e.name)}))}]);return h&&d.push({type:"component",name:"deadline",component:r.createElement(a.LMR,{className:"w-100 py-3",left:r.createElement("div",{className:"mr-2"}," ",r.createElement(a.FA,{name:"clock-o",className:"text-info mr-2 pt-1 "})," ")},r.createElement(a.EasyDate,{date:h}))}),l&&d.push({type:"component",name:"description",component:r.createElement("div",{className:"w-100 py-3"},l)}),r.createElement(a.PropGrid,{className:"my-2",rows:d,values:e})},t}(a.View),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemss="cursor-pointer my-2 w-100",t}return o.d(t,e),t.prototype.render=function(e){var t=this,n=this.controller.cSalesTask.showCustomerDetail,i=e.customer,s=[{type:"component",name:"customer",component:r.createElement(a.LMR,{className:this.itemss,onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,n(i.id)];case 1:return[2,e.sent()]}})})},left:r.createElement("div",null," ",r.createElement(a.FA,{name:"user",className:"text-info mr-2 pt-1 "})," "),right:r.createElement("div",{className:"text-right"},r.createElement("i",{className:"fa fa-chevron-right"}))},Object(a.tv)(i,function(e){return r.createElement(r.Fragment,null,e.name)}))}];return r.createElement(a.PropGrid,{className:"my-2",rows:s,values:e})},t}(a.View),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(e){var t=this,n=this.controller.cSalesTask,i=n.showTaskComplet,a=n.showTaskExtension,s=n.showTaskInvalid,u={id:e.id,type:e.type,biz:e.biz,description:null,remindDate:null,deadline:null,customer:e.customer};return r.createElement("div",{className:"d-flex px-1"},r.createElement("div",{className:"flex-grow-1 align-self-center justify-content-start"},r.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,i(u)];case 1:return[2,e.sent()]}})})}},"\xa0\u5904\u7406\xa0")),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,a(u)];case 1:return[2,e.sent()]}})})}},"\u5ef6\u8fdf"),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,s(u)];case 1:return[2,e.sent()]}})})}},"\u53d6\u6d88"))},t}(a.View),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.render=function(e){var t=this.controller.cSalesTask.getCommonType(e.biz.obj.name).taskCommonType.completuiSchema,n=e.fields;return void 0===n?r.createElement(r.Fragment,null):r.createElement("div",{className:"w-100"},n.map(function(e,n){var i,o=e.fieldName,s=e.value,u=t.items[o],c=u.label,l=u.list,h=r.createElement("div",{className:""},r.createElement(a.FA,{name:"caret-right",className:"small text-info",fixWidth:!0}),c||o);return l&&(i=l.find(function(e){return e.value===s})),r.createElement("div",{className:"row bg-white py-2",key:n},r.createElement("div",{className:"col-4 align-self-center"},h),r.createElement("div",{className:"col-8"},i?i.title:s," "))}))},t}(a.View),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(g.a)(function(e){return t.render(e)}),t.onCompletionTask=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){var e,t;return o.e(this,function(r){switch(r.label){case 0:return e=this.controller.taskCommonType.completSchema,t=e.map(function(e,t){var r=e.name;return{fieldName:r,value:n.form.data[r]}}),this.task.fields=t,[4,this.controller.cSalesTask.finishTask(this.task)];case 1:return r.sent(),this.closePage(2),[2]}})})},t.onCreateProduct=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.cSalesTask.showPorductSelect(this.task)];case 1:return e.sent(),[2]}})})},t.onCreateProject=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.cSalesTask.showCreateProject(this.task)];case 1:return e.sent(),[2]}})})},t.onCreateProjectPack=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.cSalesTask.showPorductPackSelect(this.task)];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.task=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){var t=this;this.task=e;var n=this.controller.taskCommonType,i=n.completSchema,s=n.completuiSchema,u=this.controller.cSalesTask,c=u.showTaskProductDetail,l=u.showTaskProjectDetail,h=u.showTaskProjectPackDetail,d="bg-white row my-1 py-2";return r.createElement("div",{className:"mx-3"},r.createElement(a.Form,{ref:function(e){return t.form=e},schema:i,uiSchema:s,onButtonClick:this.onFormButtonClick,requiredFlag:!1}),r.createElement(a.LMR,{className:d,right:r.createElement("div",{onClick:this.onCreateProduct,className:"mr-3"},r.createElement(a.FA,{name:"plus"}))},r.createElement("div",{className:"w-100 ml-3",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,c(this.task)];case 1:return[2,e.sent()]}})})}},"\u4ea7\u54c1\u5217\u8868 ",r.createElement("span",{className:"fa-stack"}))),r.createElement(a.LMR,{className:d,right:r.createElement("div",{onClick:this.onCreateProjectPack,className:"mr-3"},r.createElement(a.FA,{name:"plus"}))},r.createElement("div",{className:"w-100 ml-3",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,h(this.task)];case 1:return[2,e.sent()]}})})}},"\u5305\u88c5\u5217\u8868 ",r.createElement("span",{className:"fa-stack"}))),r.createElement(a.LMR,{className:d,right:r.createElement("div",{onClick:this.onCreateProject,className:"mr-3"},r.createElement(a.FA,{name:"plus"}))},r.createElement("div",{className:"w-100 ml-3",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,l(this.task)];case 1:return[2,e.sent()]}})})}},"\u9879\u76ee\u5217\u8868 ",r.createElement("span",{className:"fa-stack"}))),r.createElement("button",{type:"button",className:"btn btn-primary w-100  my-3",onClick:this.onCompletionTask},"\u63d0\u4ea4"))},t}(a.VPage),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon="plus",t.renderDetailValues=function(e){var n=t,i=n.caption,o=n.renderDetailTop,s=n.renderDetailContent;return r.createElement(a.Page,{header:i,headerClassName:"bg-primary"},o(e),s(e))},t.renderDetailEdit=function(e){var n=t,i=n.caption,o=n.renderDetailTop,s=n.renderActionsBottom,u=n.renderDetailContent;return r.createElement(a.Page,{header:i,footer:s(e),headerClassName:"bg-primary"},o(e),u(e))},t.renderDetailTop=function(e){return t.renderView(q,e)},t.renderDetailContent=function(e){return t.renderView(R,e)},t.renderActionsBottom=function(e){return t.renderView(j,e)},t.renderComplet=function(e){var n=t.caption;return r.createElement(a.Page,{header:n,headerClassName:"bg-primary"},t.renderCompletContent(e))},t.renderCompletContent=function(e){return t.renderView(L,e)},t.renderCreateTop=function(e){return t.renderView(O,e)},t}return o.d(t,e),t.prototype.showDetailFromId=function(e){return o.b(this,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.cSalesTask.loadTask(e)];case 1:return t=n.sent(),this.openPage(this.renderDetailValues(t)),[2]}})})},t.prototype.showDetailEdit=function(e){return o.b(this,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.cSalesTask.loadTask(e.id)];case 1:return t=n.sent(),e.fields=t.fields,this.openPage(this.renderDetailEdit(e)),[2]}})})},t.prototype.showComplet=function(e){return o.b(this,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.cSalesTask.loadTask(e.id)];case 1:return t=n.sent(),this.openPage(this.renderComplet(t)),[2]}})})},t.prototype.showCreate=function(e){return o.b(this,void 0,Promise,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,e.biz.assure()];case 1:return t.sent(),this.openPage(r.createElement(a.Page,{header:"biz.name"},"\u6ca1\u6709\u7ee7\u627fshowCreate\uff01")),[2]}})})},t}(a.Controller),D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAddTask=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.task.description=void 0,this.task.deadline=void 0,this.controller.getCTaskType(this.task.biz.name).showCreate(this.task),[2]})})},t.onFinishTask=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.task.priorty=0,[4,this.controller.createAndFinishTask(this.task)];case 1:return e.sent(),this.closePage(),[2]}})})},t.page=Object(g.a)(function(e){return t.render(e)}),t.itemss="cursor-pointer my-2 w-100",t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.task=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){var t=this,n=this.controller.cApp.cSalesTask.showCustomerDetail,i=e.customer,s=e.type,u=e.biz,c=[{type:"component",name:"type",component:r.createElement(a.LMR,{className:this.itemss,left:r.createElement("div",null," ",r.createElement(a.FA,{name:"bookmark-o",className:"text-info mr-2 pt-1"})," ")},r.createElement("span",{className:"font-weight-bold mr-3"},Object(a.tv)(s,function(e){return r.createElement(r.Fragment,null,e.description)})," "),"  ",Object(a.tv)(u,function(e){return r.createElement(r.Fragment,null,e.description)}))},{type:"component",name:"customer",component:r.createElement(a.LMR,{className:this.itemss,onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,n(i.id)];case 1:return[2,e.sent()]}})})},left:r.createElement("div",null," ",r.createElement(a.FA,{name:"user",className:"text-info mr-2 pt-1 "})," "),right:r.createElement("div",{className:"text-right"},r.createElement("i",{className:"fa fa-chevron-right"}))},Object(a.tv)(i,function(e){return r.createElement(r.Fragment,null,e.name)}))}],l=r.createElement("div",{className:"d-flex px-1"},r.createElement("div",{className:"flex-grow-1 align-self-center justify-content-start"},r.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onAddTask},"\xa0\u65b0\u5efa\xa0")),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:this.onFinishTask},"\u5904\u7406")),h=r.createElement("div",null,this.task.biz.description,"\xa0");return r.createElement(a.Page,{header:h,footer:l,headerClassName:"bg-primary"},r.createElement(a.PropGrid,{className:"my-2",rows:c,values:e}))},t}(a.VPage),B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAddSalesTask=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){var e,t,r,i;return o.e(this,function(o){switch(o.label){case 0:return e=n.form.data,t=e.description,r=e.priorty,i=e.deadline,this.task.description=t,this.task.priorty=r,this.task.deadline=i,[4,this.controller.cSalesTask.createTask(n.form.data,this.task)];case 1:return o.sent(),this.closePage(5),[2]}})})},t.page=Object(g.a)(function(e){return t.render(e)}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.task=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){var t=this,n=this.controller.taskCommonType,i=n.schema,o=n.uiSchema,s=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onAddSalesTask},"\u4fdd\u5b58");return r.createElement(a.Page,{header:this.controller.caption,footer:s,headerClassName:"bg-primary"},r.createElement("div",{className:"App-container container text-left"},this.controller.renderCreateTop(e),r.createElement(a.Form,{ref:function(e){return t.form=e},className:"my-3",schema:i,uiSchema:o,onButtonClick:this.onFormButtonClick,requiredFlag:!1})))},t}(a.VPage),U=function(e){function t(t,n){var r=e.call(this,n)||this;return r.showCrateCheck=function(e){return o.b(r,void 0,void 0,function(){return o.e(this,function(t){return this.openVPage(D,e),[2]})})},r.taskCommonType=t,r.icon=t.icon,r.caption=t.caption,r}return o.d(t,e),t.prototype.internalStart=function(e){},t.prototype.showCreate=function(e){return o.b(this,void 0,Promise,function(){return o.e(this,function(t){return this.openVPage(B,e),[2]})})},t}(M),W={caption:"\u7ec4\u5408\u8425\u9500",icon:r.createElement(a.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},z={caption:"\u4ea7\u54c1\u8bd5\u7528",icon:r.createElement(a.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},H={caption:"\u5927\u989d\u8ba2\u5355\u53d6\u6d88",icon:r.createElement(a.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},K={caption:"\u5927\u989d\u8ba2\u5355\u8ddf\u8e2a",icon:r.createElement(a.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},Q={caption:"\u5ba2\u6237\u8ba1\u5212\u672a\u8fbe\u6807",icon:r.createElement(a.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},J={caption:"\u5355\u4e00\u4ea7\u54c1\u91cd\u590d\u91c7\u8d2d",icon:r.createElement(a.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u7ed3\u6848",defaultValue:1,list:[{value:0,title:"\u6210\u529f"},{value:1,title:"\u5931\u8d25"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},G={caption:"\u5927\u5305\u88c5\u62a5\u4ef7\u8ddf\u8e2a",icon:r.createElement(a.FA,{name:"shopping-bag",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}],radioClassName:"w-min-6c d-inline-block"},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u4e22\u5355\u539f\u56e0",defaultValue:1,list:[{value:0,title:"\u8d27\u671f"},{value:1,title:"\u4ef7\u683c"},{value:1,title:"\u8d28\u91cf"},{value:1,title:"\u8d44\u8d28"},{value:1,title:"\u53d1\u7968"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},X={caption:"\u8bd5\u5242\u62a5\u4ef7\u8ddf\u8e2a",icon:r.createElement(a.FA,{name:"shopping-bag",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u4e22\u5355\u539f\u56e0",defaultValue:1,list:[{value:0,title:"\u8d27\u671f"},{value:1,title:"\u4ef7\u683c"},{value:1,title:"\u8d28\u91cf"},{value:1,title:"\u8d44\u8d28"},{value:1,title:"\u53d1\u7968"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},Z={caption:"\u8ba2\u5355\u50ac\u7b7e\u8fd4",icon:r.createElement(a.FA,{name:"shopping-bag",size:"lg",fixWidth:!0}),schema:[{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1},{name:"description",type:"string",required:!1}],uiSchema:{items:{priorty:{widget:"radio",label:"\u91cd\u8981\u6027",defaultValue:0,list:[{value:0,title:"\u4e00\u822c"},{value:1,title:"\u91cd\u8981"}]},deadline:{widget:"date",label:"\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},description:{widget:"text",label:"\u5907\u6ce8",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5907\u6ce8"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},completSchema:[{name:"result",type:"string",required:!1}],completuiSchema:{items:{result:{widget:"radio",label:"\u4e22\u5355\u539f\u56e0",defaultValue:1,list:[{value:0,title:"\u8d27\u671f"},{value:1,title:"\u4ef7\u683c"},{value:1,title:"\u8d28\u91cf"},{value:1,title:"\u8d44\u8d28"},{value:1,title:"\u53d1\u7968"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},Y={caption:"\u5ba2\u6237\u5f00\u53d1",icon:r.createElement(a.FA,{name:"address-book",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"name",type:"string",required:!1},{name:"telephone",type:"number",required:!1},{name:"email",type:"string",required:!1},{name:"wechat",type:"string",required:!1},{name:"teacher",type:"string",required:!1},{name:"potential",type:"string",required:!1},{name:"research",type:"string",required:!1}],completuiSchema:{items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},_={caption:"\u65b0\u5ba2\u6237\u5f00\u53d1",icon:r.createElement(a.FA,{name:"address-book",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"name",type:"string",required:!1},{name:"telephone",type:"number",required:!1},{name:"email",type:"string",required:!1},{name:"wechat",type:"string",required:!1},{name:"teacher",type:"string",required:!1},{name:"potential",type:"string",required:!1},{name:"research",type:"string",required:!1}],completuiSchema:{items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},$={reagent:X,nonreagent:G,signback:Z,bagorder:K,bagordercancel:H,marketing:W,notuptostandard:Q,repeatpurchase:J,trial:z,customerdev:Y,customerinfodev:{caption:"\u5ba2\u6237\u4fe1\u606f\u5f00\u53d1",icon:r.createElement(a.FA,{name:"address-book",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"name",type:"string",required:!1},{name:"telephone",type:"number",required:!1},{name:"email",type:"string",required:!1},{name:"wechat",type:"string",required:!1},{name:"teacher",type:"string",required:!1},{name:"potential",type:"string",required:!1},{name:"research",type:"string",required:!1}],completuiSchema:{items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},newcustomerdev:_,graduation:{caption:"\u6bd5\u4e1a\u6e05\u6d17",icon:r.createElement(a.FA,{name:"address-book",size:"lg",fixWidth:!0}),schema:[{name:"description",type:"string",required:!1},{name:"priorty",type:"number",required:!1},{name:"deadline",type:"string",required:!1}],uiSchema:{items:{description:{widget:"text",label:"\u5185\u5bb9",placeholder:"\u8bf7\u586b\u5199\u4efb\u52a1\u5185\u5bb9"},priorty:{widget:"checkbox",label:"\u91cd\u8981\u6027",placeholder:"\u91cd\u8981\u6027"},deadline:{widget:"date",label:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4",placeholder:"\u8981\u6c42\u5b8c\u6210\u65f6\u95f4"},submit:{widget:"button",label:"\u63d0\u4ea4"},description2:{widget:"radio",label:"\u63cf\u8ff02",defaultValue:1,list:[{value:0,title:"\u5973"},{value:1,title:"\u7537"}]}}},completSchema:[{name:"name",type:"string",required:!1},{name:"telephone",type:"number",required:!1},{name:"email",type:"string",required:!1},{name:"wechat",type:"string",required:!1},{name:"teacher",type:"string",required:!1},{name:"potential",type:"string",required:!1},{name:"research",type:"string",required:!1}],completuiSchema:{items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]},submit:{widget:"button",label:"\u63d0\u4ea4"}}}},newcustomer:_};var ee=[{name:"resulttype",type:"string",required:!1},{name:"date",type:"string",required:!0},{name:"result",type:"string",required:!1}],te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dateVisible=!1,t.list=[{value:1,title:"\u660e\u5929"},{value:2,title:"\u540e\u5929"}],t.onChange=function(e){var n=e.currentTarget.value;t.dateVisible="0"===n;var r=new Date;if("1"===n){r.setDate(r.getDate()+1);var i=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();t.setValue(i)}else if("2"===n){r.setDate(r.getDate()+2);i=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();t.setValue(i)}},t.onDateChange=function(e){t.setValue(e.currentTarget.value)},t.render=function(){return r.createElement("div",{className:"form-control",style:{height:"auto"}},t.list.map(function(e,n){return r.createElement("label",{className:"my-1"},r.createElement("input",{type:"radio",value:e.value,name:"a",onChange:t.onChange})," ",e.title," \xa0 ")}),r.createElement("div",null,r.createElement("label",{className:"my-1"},r.createElement("input",{type:"radio",value:0,name:"a",onChange:t.onChange})," \u65e5\u671f \xa0 "),t.dateVisible&&r.createElement("input",{type:"date",defaultValue:(new Date).toDateString(),onChange:t.onDateChange})))},t}return o.d(t,e),o.c([v.l],t.prototype,"dateVisible",void 0),t}(a.Widget),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{resulttype:{visible:!1},date:{widget:"custom",label:"\u63d0\u9192\u65e5\u671f",WidgetClass:te},result:{widget:"textarea",label:"\u5907\u6ce8",placeholder:"\u8bf7\u8f93\u5165\u5904\u7406\u7ed3\u679c\uff01",rows:12},submit:{widget:"button",label:"\u63d0\u4ea4"}}},t.onExtensionTask=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){var e,t,r,i;return o.e(this,function(o){switch(o.label){case 0:return e=n.form.data,t=e.result,r=e.resulttype,i=e.date,[4,this.controller.extensionTask(this.task,t,r,i)];case 1:return o.sent(),this.closePage(2),[2]}})})},t.page=Object(g.a)(function(e){var n=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:t.onExtensionTask},"\u63d0\u4ea4");return r.createElement(a.Page,{header:"\u63a8\u8fdf",footer:n,headerClassName:"bg-primary"},r.createElement("div",{className:"App-container container text-left"},r.createElement(a.Form,{ref:function(e){return t.form=e},className:"my-3",schema:ee,uiSchema:t.uiSchema,onButtonClick:t.onFormButtonClick})))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.task=e,this.openPage(this.page,e),[2]})})},t}(a.VPage),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderHistory=function(e,t){var n=e.date,i=e.status,o=e.principal,s=e.result,u=r.createElement("small",{className:"text-muted"},o.id!==a.nav.user.id&&r.createElement("span",{className:"text-muted small"}),Object(a.tv)(i,function(e){return e.name})," ");return r.createElement("div",{className:"d-block p-3"},r.createElement(a.LMR,{left:r.createElement("small",{className:"text-muted"},r.createElement(a.EasyDate,{date:n})," "),right:r.createElement("small",{className:"text-muted"},u)}),r.createElement("div",null,s))},t.page=Object(g.a)(function(e){var n=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u672a\u5904\u7406\u3011");return r.createElement(a.Page,{header:"\u5904\u7406\u8be6\u60c5"},r.createElement(a.List,{before:"",none:n,items:e.tasks,item:{render:t.renderHistory}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(a.VPage),ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderList=function(e,n){var i=e.description,o=e.name,s=r.createElement("div",{className:"text-info mr-3"},t.controller.owner.getTaskIcon(o));return r.createElement(a.LMR,{className:"px-3 py-2",left:s},r.createElement("div",{className:"font-weight-bold"},i))},t.onClickTaskType=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.selectTaskType(e)];case 1:return t.sent(),[2]}})})},t.ai=function(){var e=t.controller.cApp.cCustomer,n=(r.createElement(a.LMR,{className:"p-3 bg-white mb-1 cursor-pointer",left:r.createElement(a.FA,{className:"text-success mr-3 mt-1",name:"android",size:"lg",fixWidth:!0}),onClick:t.controller.aiClick},r.createElement("div",{className:"font-weight-bold"},"\u5e2e\u6211\u627e\u627e\u673a\u4f1a")),r.createElement(a.LMR,{className:"p-3 bg-white mb-1 cursor-pointer",left:r.createElement(a.FA,{className:"text-success mr-3 mt-1",name:"vcard",size:"lg",fixWidth:!0}),onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,e.showSelectCustomerUnit()];case 1:return[2,t.sent()]}})})}},r.createElement("div",{className:"font-weight-bold"},"\u65b0\u5efa\u5ba2\u6237")));return r.createElement("div",null,n)},t.page=function(e){var n=t.controller.tasktypelist,i=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u65e0\u4efb\u52a1\u7c7b\u578b\uff01");return r.createElement(a.Page,{header:"\u65b0\u5efa\u4efb\u52a1",headerClassName:"bg-primary"},t.ai(),r.createElement(a.List,{none:i,items:n,item:{render:t.renderList,onClick:t.onClickTaskType}}))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(a.VPage),oe={uqSalesTask:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/salestask",uqCustomer:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/customer",uqProduct:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/product",uqCommon:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/common",uqPromotion:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/promotion",uqWarehouse:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/warehouse",appIcon:"http://101.200.46.56/imgs/Bear-icon.png",headerClass:"bg-primary py-1"},ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItem=function(e,t){e.bizName;var n=e.deadline,i=e.biz,o=e.customer,s=e.type,u=(e.typeName,e.priorty),c=I()({"my-1 mr-3":!0,"text-danger":u>0,"text-info":!(u>0)}),l=r.createElement("div",{className:c}),h=r.createElement("div",{className:"text-right"},n&&r.createElement("small",{className:"text-muted"},"\u65f6\u9650\uff1a",r.createElement(a.EasyDate,{date:n})));return r.createElement(a.LMR,{className:"px-3 py-2",left:l},r.createElement(a.LMR,{className:"",right:h},r.createElement("div",{className:"font-weight-bold"},Object(a.tv)(o,function(e){return r.createElement(r.Fragment,null,e.name)}))),r.createElement(a.LMR,{className:"",right:r.createElement("div",{className:"text-muted"},r.createElement("small",null,Object(a.tv)(s,function(e){return r.createElement(r.Fragment,null,e.description)})))},r.createElement("div",{className:"text-muted"},r.createElement("small",null,Object(a.tv)(i,function(e){return r.createElement(r.Fragment,null,e.description)})))))},t.onClickJKTask=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.showJkTaskDetail(e)];case 1:return t.sent(),[2]}})})},t.page=Object(g.a)(function(){var e=t.controller.pageMyJKTask,n=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u6b63\u5728\u7b79\u5907\u4e2d");return r.createElement(a.Page,{header:"AI",headerClassName:oe.headerClass},r.createElement(a.List,{none:n,items:e,item:{render:t.renderItem,onClick:t.onClickJKTask}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},o.c([v.l],t.prototype,"finished",void 0),t}(a.VPage),se="w-100 py-3",ue=I()(se,"cursor-pointer"),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCancel=function(){t.closePage()},t.onCreate=function(){t.controller.createTask(t.task),t.closePage(3)},t.page=Object(g.a)(function(){var e=t.task,n=e.type,i=e.biz,o=e.customer,s=e.deadline,u=e.description,c=[{type:"component",name:"type",component:r.createElement(a.LMR,{className:ue,left:r.createElement("div",{className:"mr-2 "}," ",r.createElement(a.FA,{name:"bookmark-o",className:"text-info mr-2 pt-1"})," ")},r.createElement("span",{className:"font-weight-bold mr-3 my-3"},Object(a.tv)(n,function(e){return r.createElement(r.Fragment,null,e.description)})," "),"  ",Object(a.tv)(i,function(e){return r.createElement(r.Fragment,null,e.description)}))},{type:"component",name:"customer",component:r.createElement(a.LMR,{className:ue,onClick:null,left:r.createElement("div",{className:"mr-2"}," ",r.createElement(a.FA,{name:"user",className:"text-info mr-2 pt-1"})," ")},Object(a.tv)(o,function(e){return r.createElement(r.Fragment,null,e.name)}))}];s&&c.push({type:"component",name:"deadline",component:r.createElement(a.LMR,{className:se,left:r.createElement("div",{className:"mr-2"}," ",r.createElement(a.FA,{name:"clock-o",className:"text-info mr-2 pt-1 "})," ")},r.createElement(a.EasyDate,{date:s}))}),u&&c.push({type:"component",name:"description",component:r.createElement("div",{className:"w-100 py-3"},u)});var l=r.createElement("div",{className:"flex-grow-1 align-self-center justify-content-start"},r.createElement("button",{type:"button",className:"btn btn-primary",onClick:t.onCreate},"\xa0\u6dfb\u52a0\xa0")),h=r.createElement("div",null,r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center"},"\u64a4\u9500"),r.createElement("button",{type:"button",className:"btn btn-outline-info ml-2 align-self-center",onClick:t.onCancel},"\u53d6\u6d88"));return r.createElement(a.Page,{header:"\u4efb\u52a1\u8be6\u7ec6",headerClassName:oe.headerClass},r.createElement(a.PropGrid,{className:"my-2",rows:c,values:t.task}),r.createElement(a.LMR,{className:" mx-3 ",left:l,right:h}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.task=e,this.openPage(this.page),[2]})})},o.c([v.l],t.prototype,"task",void 0),t}(a.VPage),le=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(a.PageItems),he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectTaskType=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.task={id:null,type:e,biz:null,description:null,remindDate:null,deadline:null,customer:null},this.owner.cSalesTaskBiz.start(this.task),[2]})})},t.returnTaskType=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return this.returnCall(e),[2]})})},t.aiClick=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.pageMyJKTask=new le(this.uqs.salesTask.SearchJKTask),this.pageMyJKTask.first({key:void 0}),this.openVPage(ae),[2]})})},t.showJkTaskDetail=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.searchCustomerRelation(e.customer.id)];case 1:return t.sent(),this.openVPage(ce,e),[2]}})})},t.createTask=function(e){return o.b(t,void 0,void 0,function(){var t,n,r;return o.e(this,function(i){switch(i.label){case 0:return t=e.id,n=e.customer,r=n.obj.name,[4,this.uqs.salesTask.ImportTask.submit({task:t,customername:r,organization:this.organization.id,organizationName:this.organization.name})];case 1:return i.sent(),[4,this.owner.searchTaskByKey("")];case 2:return i.sent(),[2]}})})},t.searchCustomerRelation=function(e){return o.b(t,void 0,void 0,function(){var t,n,r;return o.e(this,function(i){switch(i.label){case 0:return{id:e},[4,this.uqs.salesTask.getCustomerOrganization.query({customerId:e})];case 1:return(t=i.sent())&&t.ret.length>0?(n=t.ret[0].organization,r=this,[4,this.uqs.salesTask.Organization.load(n)]):[3,3];case 2:r.organization=i.sent(),i.label=3;case 3:return[2]}})})},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return this.pageMyJKTask=null,this.customerid=e,[4,this.searchByKey("")];case 1:return t.sent(),this.openVPage(ie,e),[2]}})})},t.prototype.searchByKey=function(e){return o.b(this,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return t=this,[4,this.uqs.salesTask.TaskType.search(e,0,100)];case 1:return t.tasktypelist=n.sent(),[2]}})})},o.c([v.l],t.prototype,"tasktypelist",void 0),o.c([v.l],t.prototype,"pageMyJKTask",void 0),o.c([v.l],t.prototype,"organization",void 0),t}(E),de=function(){function e(e){this.tasksNow=v.l.array([],{deep:!0}),this.dateTasksList=v.l.array([],{deep:!0});for(var t=0,n=e;t<n.length;t++){var r=n[t];this.add(r)}}return e.prototype.postPone=function(e,t){this.remove(t);var n=k.a.clone(t);n.remindDate=e,this.add(n)},e.prototype.add=function(e){var t=e.remindDate;if(t){var n=this.dateTasksList.find(function(e){return e.date.getTime()===t.getTime()});void 0===n?(n={date:t,list:[e]},this.dateTasksList.push(n)):n.list.push(e)}else this.tasksNow.push(e)},e.prototype.remove=function(e){var t=this.tasksNow.findIndex(function(t){return t.id===e.id});if(t>=0)this.tasksNow.splice(t,1);else for(var n=this.dateTasksList.length,r=0;r<n;r++){var i=this.dateTasksList[r].list;if((t=i.findIndex(function(t){return t.id===e.id}))>=0)return i.splice(t,1),void(0===i.length&&this.dateTasksList.splice(r,1))}},o.c([v.l],e.prototype,"tasksNow",void 0),o.c([v.l],e.prototype,"dateTasksList",void 0),e}(),pe=[{name:"resulttype",type:"id",required:!1},{name:"result",type:"string",required:!1}],me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{resulttype:{visible:!1},result:{widget:"textarea",label:"\u539f\u56e0",placeholder:"\u8bf7\u8f93\u5165\u53d6\u6d88\u539f\u56e0\uff01",rows:12},submit:{widget:"button",label:"\u63d0\u4ea4"}}},t.onInvalidTask=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){var e,t,r;return o.e(this,function(i){switch(i.label){case 0:return e=n.form.data,t=e.result,r=e.resulttype,[4,this.controller.onInvalidTask(this.task,t,r)];case 1:return i.sent(),this.closePage(2),[2]}})})},t.page=Object(g.a)(function(e){var n=r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:t.onInvalidTask},"\u63d0\u4ea4");return r.createElement(a.Page,{header:"\u53d6\u6d88",footer:n,headerClassName:"bg-primary"},r.createElement("div",{className:"App-container container text-left"},r.createElement(a.Form,{ref:function(e){return t.form=e},className:"my-3",schema:pe,uiSchema:t.uiSchema,onButtonClick:t.onFormButtonClick})))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.task=e,this.openPage(this.page,e),[2]})})},t}(a.VPage),fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderHistory=function(e,t){var n=e.task,i=e.date,o=e.status;e.biz,e.result;return r.createElement("div",{className:"d-block p-3"},r.createElement(a.LMR,null,r.createElement("div",null,r.createElement("small",{className:"text-muted"},r.createElement(a.EasyDate,{date:i})," ")),r.createElement(a.LMR,{right:r.createElement("small",null,"  ",Object(a.tv)(o,function(e){return e.name})),left:r.createElement("div",null,r.createElement("span",null,r.createElement(a.FA,{name:"user",className:"mr-3 text-info"})),Object(a.tv)(n,function(e){return Object(a.tv)(e.customer,function(e){return e.name})}))}),r.createElement(a.LMR,{right:r.createElement("small",null,Object(a.tv)(n,function(e){return Object(a.tv)(e.type,function(e){return e.description||"#"})})),left:r.createElement("small",null,Object(a.tv)(n,function(e){return Object(a.tv)(e.biz,function(e){return e.description||"#"})}))})))},t.onTaskClick=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.controller.showDetailFromId(e.task.obj),[2]})})},t.page=Object(g.a)(function(){var e=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u65e0\u8bb0\u5f55\u3011");return r.createElement(a.Page,{header:"\u5df2\u5b8c\u6210\u4efb\u52a1",headerClassName:oe.headerClass},r.createElement(a.List,{before:"",none:e,items:t.tasks,item:{render:t.renderHistory,onClick:t.onTaskClick}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return e.length>0?this.tasks=e:this.tasks=null,this.openPage(this.page),[2]})})},t}(a.VPage),ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderHistory=function(e,t){var n=e.task,i=e.date,o=e.status;e.principal,e.result;return r.createElement("div",{className:"d-block p-3"},r.createElement(a.LMR,{className:"small",left:r.createElement("small",{className:"text-muted"},r.createElement(a.EasyDate,{date:i})),right:r.createElement("small",null,Object(a.tv)(o,function(e){return e.name}))}),r.createElement(a.LMR,{left:r.createElement("small",null,Object(a.tv)(n,function(e){return Object(a.tv)(e.biz,function(e){return e.description})})),right:r.createElement("small",null,Object(a.tv)(n,function(e){return Object(a.tv)(e.type,function(e){return e.description})}))}))},t.onSalesTaskClick=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.controller.showTaskDetailEdit(e.task.obj),[2]})})},t.page=Object(g.a)(function(){var e=r.createElement("div",{className:"m-3 text-muted small"},"\u3010\u65e0\u8bb0\u5f55\u3011");return r.createElement(a.Page,{header:"\u4ea4\u6d41\u8bb0\u5f55",headerClassName:oe.headerClass},r.createElement(a.List,{before:"",none:e,items:t.tasks,item:{render:t.renderHistory,onClick:t.onSalesTaskClick}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return e.length>0?this.tasks=e:this.tasks=null,this.openPage(this.page),[2]})})},t}(a.VPage),be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItem=function(e,n){var i=e.biz,o=e.type,s=r.createElement("div",{className:"text-info mr-3"},Object(a.tv)(o,function(e){return t.controller.owner.getTaskIcon(i.obj.name)}));return r.createElement(a.LMR,{className:"px-3 py-2",left:s},r.createElement("div",{className:"font-weight-bold"},Object(a.tv)(i,function(e){return e.description})))},t.onClickTaskBiz=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.selectTaskBiz(e)];case 1:return t.sent(),[2]}})})},t.page=function(){var e=t.controller,n=e.taskType,i=e.taskBizs,o=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u6b63\u5728\u7b79\u5907\u4e2d");return r.createElement(a.Page,{header:n.description||n.name,headerClassName:"bg-primary"},r.createElement(a.List,{none:o,items:i,item:{render:t.renderItem,onClick:t.onClickTaskBiz}}))},t}return o.d(t,e),t.prototype.open=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t}(a.VPage),ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectTaskBiz=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.task.biz=e.biz.obj,this.cApp.cCustomer.showSelectCustomer(this.task),[2]})})},t.returnTaskBiz=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return this.returnCall(e),[2]})})},t.aiClick=function(){t.openVPage(ae)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return this.task=e,this.taskType=e.type,[4,this.getBizFromTaskTypeId(this.taskType)];case 1:return t.sent(),this.openVPage(be),[2]}})})},t.prototype.getBizFromTaskTypeId=function(e){return o.b(this,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.TaskBiz.query({type:e})];case 1:return t=n.sent(),this.taskBizs=t.ret,[2]}})})},t}(E),ge="http://www.jkchemical.com/static/Structure/",we="http://www.jkchemical.com/static/Structure/999.png";function Ee(e){var t=e.style,n=e.className,i=e.chemicalId;return r.createElement(a.Image,{src:i&&ge+i.substr(0,3)+"/"+i+".png",style:t,className:n,altImage:we})}var Ce=[{name:"note",type:"string",required:!1}],ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{note:{widget:"textarea",label:"\u5907\u6ce8",placeholder:""},submit:{widget:"button",label:"\u63d0\u4ea4"}}},t.page=Object(g.a)(function(e){return t.render(e)}),t.onCreateTaskProduct=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.createproduct.note=n.data.note,[4,this.controller.createTaskProduct(this.createproduct)];case 1:return e.sent(),this.closePage(2),[2]}})})},t.renderBrand=function(e){return t.productPropItem("\u54c1\u724c",e.name)},t.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},t.productItem=function(e){var n=e.product,i=n.brand,o=n.description,s=n.descriptionC,u=n.CAS,c=n.purity,l=n.molecularFomula,h=n.molecularWeight,d=n.origin,p=n.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,o)),r.createElement("div",null,s)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(Ee,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},t.productPropItem("CAS",u),t.productPropItem("\u7eaf\u5ea6",c),t.productPropItem("\u5206\u5b50\u5f0f",l),t.productPropItem("\u5206\u5b50\u91cf",h),t.productPropItem("\u4ea7\u54c1\u7f16\u53f7",d),Object(a.tv)(i,t.renderBrand)))))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.createproduct=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){var t=this;return r.createElement(a.Page,{header:"\u6dfb\u52a0\u4ea7\u54c1",footer:null,headerClassName:"bg-primary"},r.createElement("div",{className:"mx-3"},this.productItem(e),r.createElement(a.Form,{ref:function(e){return t.form=e},schema:Ce,uiSchema:this.uiSchema,onButtonClick:this.onFormButtonClick,requiredFlag:!1}),r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onCreateTaskProduct},"\u6dfb\u52a0")))},t}(a.VPage),Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(g.a)(function(){return t.render()}),t.renderBrand=function(e){return t.productPropItem("\u54c1\u724c",e.name)},t.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},t.renderItem=function(e,n){return Object(a.tv)(e.product,function(e){var n=e.brand,i=e.description,o=e.descriptionC,s=e.CAS,u=e.purity,c=e.molecularFomula,l=e.molecularWeight,h=e.origin,d=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,i)),r.createElement("div",null,o)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(Ee,{chemicalId:d,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},t.productPropItem("CAS",s),t.productPropItem("\u7eaf\u5ea6",u),t.productPropItem("\u5206\u5b50\u5f0f",c),t.productPropItem("\u5206\u5b50\u91cf",l),t.productPropItem("\u4ea7\u54c1\u7f16\u53f7",h),Object(a.tv)(n,t.renderBrand)))))})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.products=e,this.openPage(this.page),[2]})})},t.prototype.render=function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u65e0\u4ea7\u54c1");return r.createElement(a.Page,{header:"\u4ea7\u54c1\u8be6\u60c5",headerClassName:"bg-primary"},r.createElement("div",null,r.createElement(a.List,{before:"",none:e,items:this.products,item:{render:this.renderItem}})))},t}(a.VPage),Ne=[{name:"note",type:"string",required:!1}],Se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{note:{widget:"textarea",label:"\u5907\u6ce8",placeholder:""},submit:{widget:"button",label:"\u63d0\u4ea4"}}},t.page=Object(g.a)(function(e){return t.render(e)}),t.onCreateTaskProject=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.createTaskProject(this.task,n.data.note)];case 1:return e.sent(),this.closePage(),[2]}})})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.task=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){var t=this;return r.createElement(a.Page,{header:"\u6dfb\u52a0\u9879\u76ee",footer:null,headerClassName:"bg-primary"},r.createElement("div",{className:"mx-3"},r.createElement(a.Form,{ref:function(e){return t.form=e},schema:Ne,uiSchema:this.uiSchema,onButtonClick:this.onFormButtonClick,requiredFlag:!1}),r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:this.onCreateTaskProject},"\u6dfb\u52a0")))},t}(a.VPage),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(g.a)(function(){return t.render()}),t.renderItem=function(e,t){return Object(a.tv)(e.project,function(e){var t=e.name;return r.createElement("div",{className:"px-3"},t)})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.projects=e,this.openPage(this.page),[2]})})},t.prototype.render=function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u65e0\u9879\u76ee");return r.createElement(a.Page,{header:"\u9879\u76ee\u8be6\u60c5",headerClassName:"bg-primary py-1"},r.createElement(a.List,{before:"",none:e,items:this.projects,item:{render:this.renderItem}}))},t}(a.VPage),Te=n(48),Ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderBrand=function(e){return t.productPropItem("\u54c1\u724c",e.name)},t.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},t.renderProduct=function(e,n){var i=e.brand,o=e.description,s=e.descriptionC,u=e.CAS,c=e.purity,l=e.molecularFomula,h=e.molecularWeight,d=e.origin,p=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,o)),r.createElement("div",null,s)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(Ee,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},t.productPropItem("CAS",u),t.productPropItem("\u7eaf\u5ea6",c),t.productPropItem("\u5206\u5b50\u5f0f",l),t.productPropItem("\u5206\u5b50\u91cf",h),t.productPropItem("\u4ea7\u54c1\u7f16\u53f7",d),Object(a.tv)(i,t.renderBrand)))))},t.onScrollBottom=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.pageProduct.more()];case 1:return e.sent(),[2]}})})},t.onSelectItem=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){return t=this.controller.cApp.cSalesTask.showPorductSelectDetail,this.createproduct.product=e,t(this.createproduct),[2]})})},t.page=Object(g.a)(function(e){var n=t.controller,i=n.pageProduct,o=(n.returnProduct,r.createElement("div",{className:"cursor-pointer "},r.createElement(a.FA,{name:"plus"})),r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u641c\u7d22\u5230\u4ea7\u54c1"));return r.createElement(a.Page,{header:"\u6dfb\u52a0\u4ea7\u54c1",onScrollBottom:t.onScrollBottom,headerClassName:"bg-primary py-1"},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2 ",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u54c1\u540d\u3001\u7f16\u53f7\u3001CAS\u3001MDL\u7b49"}),r.createElement(a.List,{before:"",none:o,items:i,item:{render:t.renderProduct,onClick:t.onSelectItem}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.createproduct=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t}(a.VPage),Fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderBrand=function(e){return t.productPropItem("\u54c1\u724c",e.name)},t.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},t.renderProduct=function(e,n){var i=t.controller.showProductDetail,s=e.brand,u=e.description,c=e.descriptionC,l=e.CAS,h=e.purity,d=e.molecularFomula,p=e.molecularWeight,m=e.origin,f=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,i(e)];case 1:return[2,t.sent()]}})})}},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,u)),r.createElement("div",null,c)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(Ee,{chemicalId:f,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},t.productPropItem("CAS",l),t.productPropItem("\u7eaf\u5ea6",h),t.productPropItem("\u5206\u5b50\u5f0f",d),t.productPropItem("\u5206\u5b50\u91cf",p),t.productPropItem("\u4ea7\u54c1\u7f16\u53f7",m),Object(a.tv)(s,t.renderBrand)))))},t.onScrollBottom=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.pageProduct.more()];case 1:return e.sent(),[2]}})})},t.page=Object(g.a)(function(e){var n=t.controller.pageProduct,i=(r.createElement("div",{className:"cursor-pointer "},r.createElement(a.FA,{name:"plus"})),r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u641c\u7d22\u5230\u4ea7\u54c1"));return r.createElement(a.Page,{header:"\u4ea7\u54c1",onScrollBottom:t.onScrollBottom,headerClassName:"bg-primary py-1 px-3"},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2 ",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u54c1\u540d\u3001\u7f16\u53f7\u3001CAS\u3001MDL\u7b49"}),r.createElement(a.List,{before:"",none:i,items:n,item:{render:t.renderProduct,onClick:null}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t}(a.VPage),Ae=[{name:"pack",type:"object"},{name:"retail",type:"number"},{name:"vipPrice",type:"number"},{name:"agentPrice",type:"number"},{name:"promotionPrice",type:"number"},{name:"currency",type:"string"}],Ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderProduct=function(e){var n=e.brand,i=e.description,o=e.descriptionC,a=e.CAS,s=e.purity,u=e.molecularFomula,c=e.molecularWeight,l=e.origin,h=e.imageUrl;return r.createElement("div",{className:"mb-3 px-2"},r.createElement("div",{className:"py-2"},r.createElement("strong",null,i)),r.createElement("div",null,o),r.createElement("div",{className:"row mt-3"},r.createElement("div",{className:"col-sm-3"},r.createElement(Ee,{chemicalId:h,className:"w-100"})),r.createElement("div",{className:"col-sm-9"},r.createElement("div",{className:"row"},t.item("CAS",a),t.item("\u7eaf\u5ea6",s),t.item("\u5206\u5b50\u5f0f",u),t.item("\u5206\u5b50\u91cf",c),t.item("\u4ea7\u54c1\u7f16\u53f7",l),Re(n)))))},t.item=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4"},t))},t.arrTemplet=function(e){var t=e.pack,n=e.retail,i=e.promotionPrice,o=e.agentPrice,s=e.inventoryAllocation,u=e.futureDeliveryTimeDescription,c=null,l=null;if(n){var h=i,d=void 0;h?d=r.createElement("small",{className:"text-muted"},r.createElement("del",null,"\uffe5",n)):h=n,c=r.createElement("div",{className:"text-right row"},r.createElement("div",null,r.createElement("span",{className:"text-muted h5"},d),"\xa0 \xa0",r.createElement("span",{className:"text-danger"},"\uffe5 ",r.createElement("span",{className:"h5"},h)))),c=h&&r.createElement("span",null,r.createElement("span",{className:"text-warning small"},r.createElement("strong",{className:"small"},"\u76ee"))," ",r.createElement("span",{className:"text-right h5 text-danger"},r.createElement("span",{className:"small pt-1"},"\uffe5"),h)),l=o&&r.createElement("span",null,r.createElement("span",{className:"text-warning small"},r.createElement("strong",{className:"small"},"\u4ee3"))," ",r.createElement("span",{className:"text-right h5 text-danger"},r.createElement("span",{className:"small pt-1"},"\uffe5"),o))}else c=r.createElement("small",null,"\u8bf7\u8be2\u4ef7");var p=r.createElement(r.Fragment,null);return p=s&&s.length>0?s.map(function(e,t){var n=e.warehouse,i=e.quantity,o=e.deliveryTimeDescription;return r.createElement("div",{key:t,className:"text-success"},Object(a.tv)(n,function(e){return r.createElement(r.Fragment,null,e.name)}),": ",i,o)}):r.createElement("div",null,u&&"\u671f\u8d27: "+u),r.createElement("div",{className:"px-2"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-5"},r.createElement("div",{className:"h5"},r.createElement("b",null,Object(a.tv)(t,function(e){return r.createElement("div",null,e.radioy,e.unit)}))),r.createElement("div",null,p)),r.createElement("div",{className:"col-4"},l),r.createElement("div",{className:"col-3"},c)))},t.uiSchema={Templet:t.arrTemplet},t.renderPack=function(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"sep-product-select"}),r.createElement(a.Form,{className:"my-3",schema:Ae,uiSchema:t.uiSchema,formData:e}))},t.page=Object(g.a)(function(e){var n=new Te.ViewMainSubs(t.renderProduct,t.renderPack);return n.model=e,r.createElement(a.Page,{header:"\u4ea7\u54c1\u660e\u7ec6",headerClassName:oe.headerClass},r.createElement("div",{className:"px-2 py-2 bg-white mb-3"},n.render()))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.product=e.main,this.openPage(this.page,e),[2]})})},t}(a.VPage),qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderBrand=function(e){return t.productPropItem("\u54c1\u724c",e.name)},t.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},t.renderProduct=function(e,n){var i=e.brand,o=e.description,s=e.descriptionC,u=e.CAS,c=e.purity,l=e.molecularFomula,h=e.molecularWeight,d=e.origin,p=e.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,o)),r.createElement("div",null,s)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(Ee,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},t.productPropItem("CAS",u),t.productPropItem("\u7eaf\u5ea6",c),t.productPropItem("\u5206\u5b50\u5f0f",l),t.productPropItem("\u5206\u5b50\u91cf",h),t.productPropItem("\u4ea7\u54c1\u7f16\u53f7",d),Object(a.tv)(i,t.renderBrand)))))},t.onScrollBottom=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.pageProduct.more()];case 1:return e.sent(),[2]}})})},t.onSelectItem=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){return t=this.controller.cApp.cSalesTask.showPorductPackSelectDetail,this.createproduct.product=e,t(this.createproduct),[2]})})},t.page=Object(g.a)(function(e){var n=t.controller,i=n.pageProduct,o=(n.returnProduct,r.createElement("div",{className:"cursor-pointer "},r.createElement(a.FA,{name:"plus"})),r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u641c\u7d22\u5230\u4ea7\u54c1"));return r.createElement(a.Page,{header:"\u9009\u62e9\u5305\u88c5",onScrollBottom:t.onScrollBottom,headerClassName:"bg-primary py-1"},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2 ",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u54c1\u540d\u3001\u7f16\u53f7\u3001CAS\u3001MDL\u7b49"}),r.createElement(a.List,{before:"",none:o,items:i,item:{render:t.renderProduct,onClick:t.onSelectItem}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.createproduct=e,this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t}(a.VPage),Oe=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchProductQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchProductQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.seq},t}(a.PageItems),je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.searchByKey=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return this.pageProduct=new Oe(this.uqs.product.SearchProduct),[4,this.pageProduct.first({keyWord:e,salesRegion:1})];case 1:return t.sent(),[2]}})})},t.returnProduct=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return this.returnCall(e),[2]})})},t.showProductDetail=function(e){return o.b(t,void 0,Promise,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,new x(this.cApp).load(e.id)];case 1:return t=n.sent(),this.openVPage(Ve,t),[2]}})})},t.showProductSelect=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return this.openVPage(Ie,e),[2]})})},t.showProductPackSelect=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return this.openVPage(qe,e),[2]})})},t.render=Object(g.a)(function(){return t.pageProduct=null,t.renderView(Fe)}),t.tab=function(){return r.createElement(t.render,null)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){var t;return o.e(this,function(n){return t=this.cApp,t.currentSalesRegion,t.currentLanguage,this.pageProduct=null,this.openVPage(Ie,e),[2]})})},o.c([v.l],t.prototype,"pageProduct",void 0),o.c([v.l],t.prototype,"customerlist",void 0),t}(w);function Re(e){return Le("\u54c1\u724c",e.name)}function Le(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))}var Me=[{name:"pack",type:"object"},{name:"retail",type:"number"},{name:"vipPrice",type:"number"},{name:"promotionPrice",type:"number"},{name:"currency",type:"string"}],De=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pack=[],t.renderProduct=function(e){var n=e.brand,i=e.description,o=e.descriptionC,a=e.CAS,s=e.purity,u=e.molecularFomula,c=e.molecularWeight,l=e.origin,h=e.imageUrl;return r.createElement("div",{className:"mb-3 px-2"},r.createElement("div",{className:"py-2"},r.createElement("strong",null,i)),r.createElement("div",null,o),r.createElement("div",{className:"row mt-3"},r.createElement("div",{className:"col-sm-3"},r.createElement(Ee,{chemicalId:h,className:"w-100"})),r.createElement("div",{className:"col-sm-9"},r.createElement("div",{className:"row"},t.item("CAS",a),t.item("\u7eaf\u5ea6",s),t.item("\u5206\u5b50\u5f0f",u),t.item("\u5206\u5b50\u91cf",c),t.item("\u4ea7\u54c1\u7f16\u53f7",l),Re(n)))))},t.item=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4"},t))},t.arrTemplet=function(e){var n=e.pack,i=e.retail,o=e.promotionPrice,s=e.inventoryAllocation,u=e.futureDeliveryTimeDescription,c=null;if(i){var l=o,h=void 0;l?h=r.createElement("small",{className:"text-muted"},r.createElement("del",null,"\uffe5",i)):l=i,c=r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-6 pb-2 d-flex justify-content-end align-items-center"},r.createElement("small",{className:"text-muted"},h),"\xa0 \xa0",r.createElement("span",{className:"text-danger"},"\uffe5 ",r.createElement("span",{className:"h5"},l))))}else c=r.createElement("small",null,"\u8bf7\u8be2\u4ef7");var d=r.createElement(r.Fragment,null);return d=s&&s.length>0?s.map(function(e,t){var n=e.warehouse,i=e.quantity,o=e.deliveryTimeDescription;return r.createElement("div",{key:t,className:"text-success"},Object(a.tv)(n,function(e){return r.createElement(r.Fragment,null,e.name)}),": ",i,o)}):r.createElement("div",null,u&&"\u671f\u8d27: "+u),r.createElement("div",{className:"px-2"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-6"},r.createElement("div",null,r.createElement("input",{type:"checkbox",name:"productpack",onChange:t.onChangePack,value:n.id}),r.createElement("b",null,Object(a.tv)(n,function(e){return r.createElement("div",null,e.radioy,e.unit)}))),r.createElement("div",null,d)),r.createElement("div",{className:"col-6"},c)))},t.onChangePack=function(e){var n=e.currentTarget,r=n.value;n.checked?t.addArr(r):t.removeArr(r)},t.uiSchema={Templet:t.arrTemplet},t.renderPack=function(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"sep-product-select"}),r.createElement(a.Form,{className:"my-3",schema:Me,uiSchema:t.uiSchema,formData:e}))},t.onCreateTaskProductPack=function(e){return o.b(t,void 0,void 0,function(){var e,t,n;return o.e(this,function(r){switch(r.label){case 0:return e=this.controller,t=e.createTaskProjectPack,(n=e.createproduct).pack=this.pack,[4,t(n)];case 1:return r.sent(),[2]}})})},t.page=Object(g.a)(function(e){var n=new Te.ViewMainSubs(t.renderProduct,t.renderPack);return n.model=e,r.createElement(a.Page,{header:"\u6dfb\u52a0\u4ea7\u54c1\u5305\u88c5",headerClassName:oe.headerClass},r.createElement("div",{className:"px-2 py-2 bg-white mb-3"},n.render()),r.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:t.onCreateTaskProductPack},"\u6dfb\u52a0"))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.product=e.main,this.openPage(this.page,e),[2]})})},t.prototype.removeArr=function(e){for(var t=0;t<this.pack.length;t++)this.pack[t]==e&&(this.pack.splice(t,1),t--)},t.prototype.addArr=function(e){this.pack.push(e)},t}(a.VPage),Be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(g.a)(function(){return t.render()}),t.renderBrand=function(e){return t.productPropItem("\u54c1\u724c",e.name)},t.productPropItem=function(e,t){return null===t||void 0===t?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"col-4 col-sm-2 col-lg-4 text-muted pr-0 small"},e),r.createElement("div",{className:"col-8 col-sm-4 col-lg-8"},t))},t.renderItem=function(e,n){return Object(a.tv)(e.product,function(n){var i=n.brand,o=n.description,s=n.descriptionC,u=n.CAS,c=n.purity,l=n.molecularFomula,h=n.molecularWeight,d=n.origin,p=n.imageUrl;return r.createElement("div",{className:"d-block mb-4 px-2"},r.createElement("div",{className:"py-2"},r.createElement("div",null,r.createElement("strong",null,o)),r.createElement("div",null,s)),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-3"},r.createElement(Ee,{chemicalId:p,className:"w-100"})),r.createElement("div",{className:"col-9"},r.createElement("div",{className:"row"},t.productPropItem("CAS",u),t.productPropItem("\u7eaf\u5ea6",c),t.productPropItem("\u5206\u5b50\u5f0f",l),t.productPropItem("\u5206\u5b50\u91cf",h),t.productPropItem("\u4ea7\u54c1\u7f16\u53f7",d),Object(a.tv)(i,t.renderBrand)))),r.createElement("div",null,Object(a.tv)(e.pack,function(e){return r.createElement("div",null,e.radioy,e.unit)})))})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.products=e,this.openPage(this.page),[2]})})},t.prototype.render=function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u65e0\u4ea7\u54c1\u5305\u88c5");return r.createElement(a.Page,{header:"\u4ea7\u54c1\u5305\u88c5\u8be6\u60c5",headerClassName:"bg-primary"},r.createElement("div",null,r.createElement(a.List,{before:"",none:e,items:this.products,item:{render:this.renderItem}})))},t}(a.VPage),Ue=(function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchsalestskQuery=t,n}o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchsalestskQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id}}(a.PageItems),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.taskTypes={},t.searchTaskByKey=function(e){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.salesTask.SearchTask.table({})];case 1:return e=t.sent(),this.tasks=new de(e),[2]}})})},t.loadTask=function(e){return o.b(t,void 0,void 0,function(){var t,n;return o.e(this,function(r){switch(r.label){case 0:return[4,this.uqs.salesTask.Task.load(e)];case 1:return t=r.sent(),n=t,[4,this.searchTaskCompletion(e)];case 2:return n.fields=r.sent(),[2,t]}})})},t.searchTaskCompletion=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.salesTask.SearchTaskCompletion.table({taskid:e})];case 1:return[2,t.sent()]}})})},t.showTaskHistory=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.SearchHistoryTask.table({taskid:e})];case 1:return t=n.sent(),this.openVPage(re,{tasks:t}),[2]}})})},t.showEmployeeHistory=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.salesTask.SearchHistoryTaskByEmployee.table({})];case 1:return e=t.sent(),this.openVPage(fe,{tasks:e}),[2]}})})},t.showCustomerHistory=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.SearchHistoryTaskByCustomer.table({customerid:e})];case 1:return t=n.sent(),this.openVPage(ve,t),[2]}})})},t.showTaskDetailEdit=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){return e.biz.obj?e.biz.obj.name:e.biz.name,void 0!==(t=this.getCTaskType(e.biz.obj.name))&&t.showDetailEdit(e),[2]})})},t.showDetailFromId=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.getCTaskType(e.biz.obj.name).showDetailFromId(e.id),[2]})})},t.showTaskComplet=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){return t=e.biz.obj?e.biz.obj.name:e.biz.name,this.getCTaskType(t).showComplet(e),[2]})})},t.createAndFinishTask=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.createTasks(e)];case 1:return t=n.sent(),[4,this.showTaskComplet(t)];case 2:return n.sent(),[2]}})})},t.showTaskExtension=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.openVPage(ne,e),[2]})})},t.showTaskInvalid=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.openVPage(me,e),[2]})})},t.onInvalidTask=function(e,n,r){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(r){switch(r.label){case 0:return t={taskid:e.id,resulttype:"Inval",result:n},[4,this.uqs.salesTask.CompletionTask.submit(t)];case 1:return r.sent(),this.tasks.remove(e),[2]}})})},t.showPorductSelect=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){return t=this.cApp.cProduct,this.createproduct={task:e,product:void 0,pack:void 0,note:void 0},t.showProductSelect(this.createproduct),[2]})})},t.showPorductSelectDetail=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.createproduct=e,this.openVPage(ke,this.createproduct),[2]})})},t.createTaskProduct=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i,a;return o.e(this,function(o){return this.createproduct=e,t=this.createproduct,n=t.product,r=t.task,i=(i=t.note)||void 0,a={taskid:r.id,productid:n.id,note:i},this.uqs.salesTask.CreateTaskProduct.submit(a),[2]})})},t.showTaskProductDetail=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.SearchTaskProduct.table({taskid:e.id})];case 1:return t=n.sent(),[4,this.openVPage(Pe,t)];case 2:return n.sent(),[2]}})})},t.showPorductPackSelect=function(e){return o.b(t,void 0,void 0,function(){var t,n;return o.e(this,function(r){return t=this.cApp.cProduct,n={task:e,product:void 0,pack:void 0,note:void 0},t.showProductPackSelect(n),[2]})})},t.showPorductPackSelectDetail=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return this.createproduct=e,[4,new x(this.cApp).load(e.product.id)];case 1:return t=n.sent(),this.openVPage(De,t),[2]}})})},t.createTaskProjectPack=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i,a,s,u,c,l=this;return o.e(this,function(o){switch(o.label){case 0:return this.createproduct=e,t=this.createproduct,n=t.task,r=t.product,i=t.note,a=t.pack,s=r.id,u=n.id,c=[],a.forEach(function(e){c.push(l.uqs.salesTask.CreateTaskProductPack.submit({task:u,product:s,pack:e,note:i}))}),[4,Promise.all(c)];case 1:return o.sent(),this.closePage(2),[2]}})})},t.showTaskProjectPackDetail=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.SearchTaskProductPack.table({taskid:e.id})];case 1:return t=n.sent(),this.openVPage(Be,t),[2]}})})},t.showCreateProject=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.openVPage(Se,e),[2]})})},t.createTaskProject=function(e,n){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(r){switch(r.label){case 0:return t={taskid:e.id,note:n},[4,this.uqs.salesTask.CreateTaskProject.submit(t)];case 1:return r.sent(),[2]}})})},t.showTaskProjectDetail=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.SearchTaskProject.table({taskid:e.id})];case 1:return t=n.sent(),this.openVPage(xe,t),[2]}})})},t.showSelectTaskType=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.cSelectType.start()];case 1:return e.sent(),[2]}})})},t.showCrateCheck=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.openVPage(D,e),[2]})})},t.createTask=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.createTasks(n)];case 1:return e.sent(),[4,this.searchTaskByKey("")];case 2:return e.sent(),[2]}})})},t.createTasks=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i,a,s,u,c,l,h,d;return o.e(this,function(o){switch(o.label){case 0:return t=e.customer,n=e.type,r=e.biz,i=e.description,a=e.priorty,s=e.deadline,u=t.id,c=n.id,l=r.id,h={id:void 0,description:i=i||void 0,customer:u,type:c,biz:l,sourceID:"",sourceType:"",sourceNo:"",priorty:a=a?1:0,deadline:s=s||void 0},[4,this.uqs.salesTask.AddTask.submit(h)];case 1:return d=o.sent(),e.id=d.id,[2,e]}})})},t.showCustomerDetail=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.cApp.cCustomer.showCustomerDetail(e),[2]})})},t.render=Object(g.a)(function(){return t.isLogined?t.renderView(F):r.createElement("div",{className:"d-flex h-100 flex-column align-items-center justify-content-center"},r.createElement("div",{className:"flex-fill"}),r.createElement("button",{className:"btn btn-success w-20c",onClick:function(){return a.nav.showLogin(t.loginCallback,!0)}},r.createElement(a.FA,{name:"sign-out",size:"lg"})," \u8bf7\u767b\u5f55"),r.createElement("div",{className:"flex-fill"}),r.createElement("div",{className:"flex-fill"}))}),t.loginCallback=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return a.nav.pop(),[4,this.internalStart(void 0)];case 1:return e.sent(),[2]}})})},t.tab=function(){return r.createElement(t.render,null)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return this.cSelectType=this.newSub(he),this.cSalesTaskBiz=this.newSub(ye),this.taskTypes=function(e){var t={};for(var n in $){var r,i=$[n];"function"===typeof i?((r=t[n]=new i(void 0)).cSalesTask=e,r.caption||(r.caption=n)):(r=t[n]=new U(i,void 0)).cSalesTask=e}return t}(this),[4,this.searchTaskByKey(e)];case 1:return t.sent(),[2]}})})},t.prototype.getTaskIcon=function(e){var t=this.taskTypes[e];return void 0===t?"qualify"==e?r.createElement(a.FA,{name:"address-book",size:"lg",fixWidth:!0}):"legend"==e?r.createElement(a.FA,{name:"newspaper-o",size:"lg",fixWidth:!0}):r.createElement(a.FA,{name:"shopping-bag",size:"lg",fixWidth:!0}):t.icon},t.prototype.getCTaskType=function(e){return this.taskTypes[e]},t.prototype.getCommonType=function(e){return this.getCTaskType(e)},t.prototype.finishTask=function(e){return o.b(this,void 0,void 0,function(){var t,n,r,i;return o.e(this,function(o){switch(o.label){case 0:return t=e.id,n=e.fields,r=e.type,i={taskid:t,resulttype:"compl",result:"\u5b8c\u7ed3",fields:n},"qualify"!=r.obj.name?[3,2]:[4,this.uqs.salesTask.CompletionCustomerInfoTask.submit(i)];case 1:return o.sent(),[3,4];case 2:return[4,this.uqs.salesTask.CompletionTask.submit(i)];case 3:o.sent(),o.label=4;case 4:return this.tasks.remove(e),this.closePage(2),[2]}})})},t.prototype.extensionTask=function(e,t,n,r){return o.b(this,void 0,void 0,function(){var n;return o.e(this,function(i){switch(i.label){case 0:return n={taskid:e.id,result:t,remindDate:r},[4,this.uqs.salesTask.ExtensionTask.submit(n)];case 1:return i.sent(),this.tasks.postPone(r,e),[2]}})})},o.c([v.l],t.prototype,"tasks",void 0),o.c([v.l],t.prototype,"createproduct",void 0),t}(w)),We=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backLevel=0,t.page=function(e){return t.backLevel++,r.createElement(a.Page,{header:"\u9009\u62e9\u6240\u5728\u7701\u5e02"},r.createElement("div",{className:"row no-gutters"},e.items.map(function(e){return t.renderPCC(e,t.onProvinceClick)})))},t.renderPCC=function(e,t){var n=e.id,i=e.chineseName;return r.createElement("div",{key:n,className:"col-6 col-md-4 col-lg-3 cursor-pointer"},r.createElement("div",{className:"pt-1 pb-1 px-2",onClick:function(){return t(e)},style:{border:"1px solid #eeeeee",marginRight:"-1px",marginBottom:"-1px"}},r.createElement("span",{className:"ml-1 align-middle"},r.createElement(a.FA,{name:"chevron-right",className:"text-info small"}),"\xa0 ",i)))},t.onProvinceClick=function(e){return o.b(t,void 0,void 0,function(){var t,n,i=this;return o.e(this,function(o){switch(o.label){case 0:return this.provinceId=e.id,[4,this.controller.getProvinceCities(this.provinceId)];case 1:return(t=o.sent())?1!==(n=t.length)?[3,3]:[4,this.onCityClick(t[0])]:[3,4];case 2:return o.sent(),[2];case 3:return n>0?(this.backLevel++,this.openPageElement(r.createElement(a.Page,{header:"\u9009\u62e9\u6240\u5728\u57ce\u5e02"},r.createElement("div",{className:"row no-gutters"},t.map(function(e){return i.renderPCC(e,i.onCityClick)})))),[2]):[3,5];case 4:this.closePage(1),this.saveAddress(),o.label=5;case 5:return[2]}})})},t.onCityClick=function(e){return o.b(t,void 0,void 0,function(){var t,n=this;return o.e(this,function(i){switch(i.label){case 0:return this.cityId=e.id,[4,this.controller.getCityCounties(this.cityId)];case 1:return(t=i.sent())&&t.length>0?(this.backLevel++,this.openPageElement(r.createElement(a.Page,{header:"\u9009\u62e9\u6240\u5728\u533a\u53bf"},r.createElement("div",{className:"row no-gutters"},t.map(function(e){return n.renderPCC(e,n.onCountyClick)}))))):(this.closePage(2),this.saveAddress()),[2]}})})},t.onCountyClick=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.countyId=e.id,this.closePage(this.backLevel),this.saveAddress(),[2]})})},t.saveAddress=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.saveAddress(43,this.provinceId,this.cityId,this.countyId)];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.getCountryProvince(43)];case 1:return e=t.sent(),this.openPage(this.page,{items:e}),[2]}})})},t}(a.VPage),ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getCountryProvince=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.common.GetCountryProvinces.table({country:e})];case 1:return[2,t.sent()]}})})},t.getProvinceCities=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.common.GetProvinceCities.table({province:e})];case 1:return[2,t.sent()]}})})},t.getCityCounties=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.common.GetCityCounties.table({city:e})];case 1:return[2,t.sent()]}})})},t.saveAddress=function(e,n,r,i){return o.b(t,void 0,Promise,function(){var t,a,s;return o.e(this,function(o){switch(o.label){case 0:return[4,(t=this.uqs.common.Address).save(void 0,{country:e,province:n,city:r,county:i})];case 1:return a=o.sent(),s=a&&t.boxId(a.id),this.returnCall(s),[2]}})})},t}return o.d(t,e),t.prototype.internalStart=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openVPage(We),[2]})})},t}(w),He=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCustomer=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.selectCustomer(e)];case 1:return t.sent(),[2]}})})},t.page=Object(g.a)(function(e){var n=t.controller.pageCustomer,i=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8bf7\u641c\u7d22\u5ba2\u6237\uff01");return r.createElement(a.Page,{header:"\u9009\u62e9\u5ba2\u6237",headerClassName:"bg-primary"},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(a.List,{before:"",none:i,items:n,item:{render:t.renderCustomer,onClick:t.onClickCustomer}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.renderCustomer=function(e,t){var n=e.name;return r.createElement(a.LMR,{className:"px-3 py-2 ",left:r.createElement(a.FA,{name:"user",className:" my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold"}),r.createElement("div",null,n))},t}(a.VPage);function Ke(e){return e&&!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(e)?"\u624b\u673a\u53f7\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function Qe(e){return e&&!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(e)?"Email\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function Je(e){return e&&!/(^[\-0-9][0-9]*(.[0-9]+)?)$/.test(e)?"\u91d1\u989d\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function Ge(e){return e&&e.length>50?"\u59d3\u540d\u6700\u591a50\u4e2a\u5b57\uff01":void 0}var Xe=[{name:"name",type:"string"},{name:"telephone",type:"number"},{name:"email",type:"string"},{name:"wechat",type:"string"},{name:"teacher",type:"string"},{name:"potential",type:"string"},{name:"research",type:"string"},{name:"addressString",type:"string"}],Ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",rules:Ge},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd",rules:Ke},gender:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u7537"},{value:1,title:"\u5973"}]},birthDay:{widget:"datetime",label:"\u751f\u65e5",placeholder:"\u8bf7\u8f93\u5165\u751f\u65e5"},email:{widget:"text",label:"\u90ae\u7bb1",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1",rules:Qe},wechat:{widget:"text",label:"\u5fae\u4fe1",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"},teacher:{widget:"text",label:"\u8001\u5e08",placeholder:"\u8bf7\u8f93\u5165\u8001\u5e08"},addressString:{widget:"text",label:"\u5730\u5740",placeholder:"\u8bf7\u8f93\u5730\u5740"},potential:{widget:"radio",label:"\u6f5c\u529b\u503c",defaultValue:1,list:[{value:0,title:"\u5c0f\u4e8e10\u4e07"},{value:1,title:"10\u4e07-30\u4e07"},{value:2,title:"\u5927\u4e8e30\u4e07"}]},research:{widget:"radio",label:"\u7814\u7a76\u65b9\u5411",defaultValue:1,list:[{value:0,title:"\u6709\u673a"},{value:1,title:"\u5316\u5b66"},{value:1,title:"\u5206\u6790"},{value:1,title:"\u6750\u6599"}]}}},t.onItemChanged=function(e,n,r){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(r){switch(r.label){case 0:return t=e.name,this.customer[t]=n,[4,this.controller.updateMyCustomer(this.customer)];case 1:return r.sent(),[2]}})})},t.page=Object(g.a)(function(e){var n=t.controller.cApp,i=n.cSalesTask,s=n.cCustomerUnit,u=n.cCustomer,c=i.showCustomerHistory,l=e.id,h=e.unit,d=s.showCustomerUnitDetail,p=(u.showInnerCustomerSelect,t.controller),m=(p.innerCustomer,p.IsOccupy),f=[{type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-3",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,d(h)];case 1:return[2,e.sent()]}})})},left:r.createElement("div",null," ",r.createElement("small",null,r.createElement(a.FA,{name:"university",className:"text-info"}))," \xa0",Object(a.tv)(h,function(e){return e.name})),right:r.createElement("div",{className:"w-2c text-right"}," ",r.createElement("i",{className:"fa fa-chevron-right small"}))})},{type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-3",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,c(l)];case 1:return[2,e.sent()]}})})},left:r.createElement("div",null," ",r.createElement("small",null,r.createElement(a.FA,{name:"hand-o-right",className:"text-info"}))," \xa0\u6c9f\u901a\u8bb0\u5f55"),right:r.createElement("div",{className:"w-2c text-right"}," ",r.createElement("i",{className:"fa fa-chevron-right small "}))})}],v=r.createElement("span",null,"\u5ba2\u6237\u8be6\u60c5");return 1==m.code&&(v=r.createElement("span",null,"\u5ba2\u6237\u8be6\u60c5\uff08\u88ab\u5360\u7528\uff09")),r.createElement(a.Page,{header:v,headerClassName:oe.headerClass},r.createElement(a.PropGrid,{className:"my-2",rows:f,values:t.customer,alignValue:"right"}),r.createElement(a.Edit,{schema:Xe,uiSchema:t.uiSchema,data:t.customer,onItemChanged:t.onItemChanged}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.customer=e,this.openPage(this.page,e),[2]})})},o.c([v.l],t.prototype,"customer",void 0),t}(a.VPage),Ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCustomer=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.showCustomerDetail(e.id)];case 1:return t.sent(),[2]}})})},t.page=Object(g.a)(function(e){var n=t.controller,i=n.pageCustomer,s=n.showSelectCustomerUnit,u=n.showCustomerSearch,c=t.controller.cApp.cCustomerUnit.showCustomerSearchByUnit,l=r.createElement("div",{className:"cursor-pointer py-2"},r.createElement("span",{onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,u(null)];case 1:return[2,e.sent()]}})})}},r.createElement(a.FA,{name:"search"})),"\xa0\xa0\xa0\xa0\xa0\xa0",r.createElement("span",{onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,s()];case 1:return[2,e.sent()]}})})}},r.createElement(a.FA,{name:"plus"}))),h=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u627e\u5230\u5ba2\u6237\uff01"),d=r.createElement("span",null,"\u5ba2\u6237"),p=[{type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-3",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return[2,e.sent()]}})})},left:r.createElement("div",null," ",r.createElement("small",null,r.createElement(a.FA,{name:"university",className:"text-info"}))," \xa0\u5ba2\u6237\u5355\u4f4d"),right:r.createElement("div",{className:"w-2c text-right"}," ",r.createElement("i",{className:"fa fa-chevron-right small"}))})}];return r.createElement(a.Page,{header:d,onScrollBottom:t.onScrollBottom,headerClassName:"bg-primary py-1 px-3",right:l},r.createElement(a.PropGrid,{className:"my-2",rows:p,values:void 0,alignValue:"right"}),r.createElement(a.List,{before:"",none:h,items:i,item:{render:t.renderCustomer,onClick:t.onClickCustomer}}))}),t.onScrollBottom=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.pageCustomer.more()];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t.prototype.renderCustomer=function(e,t){var n,i=e.name,o=e.unit;n=1==e.IsOccupy?r.createElement(a.FA,{name:"user",className:" my-2 mr-3 text-danger"}):r.createElement(a.FA,{name:"user",className:" my-2 mr-3 text-info"});var s=r.createElement("div",null,n,r.createElement("span",{className:"font-weight-bold"},i)),u=r.createElement("div",{className:"text-muted  my-2 mr-3 "},r.createElement("small",null," ",Object(a.tv)(o,function(e){return e.name})));return r.createElement(a.LMR,{className:"px-3 py-2 ",left:s,right:u})},t}(a.VPage),_e=[{name:"Name",type:"string",required:!0},{name:"Salutation",type:"string",required:!1},{name:"telephone",type:"string",required:!0},{name:"Gender",type:"number",required:!1},{name:"BirthDay",type:"date",required:!1},{name:"submit",type:"submit"}],$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{Name:{widget:"text",label:"\u59d3\u540d",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d",rules:Ge},Salutation:{widget:"text",label:"\u79f0\u8c13",placeholder:"\u8bf7\u8f93\u5165\u79f0\u8c13"},telephone:{widget:"text",label:"\u7535\u8bdd",placeholder:"\u8bf7\u8f93\u5165\u7535\u8bdd\u53f7\u7801",rules:Ke},Gender:{widget:"radio",label:"\u6027\u522b",placeholder:"\u6027\u522b",defaultValue:1,list:Object(a.toUiSelectItems)(["1:\u7537","2:\u5973"]),radioClassName:"w-min-6c d-inline-block"},BirthDay:{widget:"date",label:"\u751f\u65e5",placeholder:""},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary w-8c"}}},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.createMyCustomer(n.data,this.customerunit)];case 1:return e.sent(),[2]}})})},t.itemss="cursor-pointer mx-3 my-2 w-100",t.page=Object(g.a)(function(){var e=[{type:"component",name:"unit",component:r.createElement(a.LMR,{className:t.itemss,left:r.createElement("div",null," ",r.createElement(a.FA,{name:"university",className:"text-info mr-2 pt-1 "})," ")},t.customerunit.name)}];return r.createElement(a.Page,{header:"\u65b0\u5efa\u5ba2\u6237",headerClassName:oe.headerClass},r.createElement(a.PropGrid,{className:"my-2",rows:e,values:null}),r.createElement(a.Form,{ref:function(e){return t.form=e},className:"my-3 mx-3",schema:_e,uiSchema:t.uiSchema,onButtonClick:t.onFormButtonClick,requiredFlag:!1}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.customerunit=e,this.openPage(this.page),[2]})})},t}(a.VPage),et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.comeBack=function(){t.controller.searchByKey(""),t.closePage(3)},t.page=Object(g.a)(function(){var e;return 1==t.result&&(e=r.createElement("span",{className:"text-danger"}," \u5ba2\u6237\u5df2\u88ab\u5176\u4ed6\u8f7b\u4ee3\u7406\u5360\u7528\uff0c\u8ddf\u8e2a\u6b64\u5ba2\u6237\u65e0\u6cd5\u83b7\u53d6\u7ee9\u6548\uff01")),r.createElement(a.Page,{header:"\u65b0\u5efa\u5ba2\u6237",headerClassName:"bg-primary py-1 px-3"},r.createElement("div",{className:"w-100 text-center m-3 text-muted"},"\u5ba2\u6237\u6dfb\u52a0\u6210\u529f\uff0c\u8bf7\u5728\u5ba2\u6237\u641c\u7d22\u9875\u9762\u67e5\u770b\u8be6\u60c5\uff01",r.createElement("br",null),e),r.createElement("div",{className:"w-100 text-center"},r.createElement("label",{className:"text-success",onClick:t.comeBack}," \u8fd4\u56de")))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.result=e,this.openPage(this.page),[2]})})},t}(a.VPage),tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCustomer=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.returnCustomer(e)];case 1:return t.sent(),this.closePage(),[2]}})})},t.page=Object(g.a)(function(e){var n=t.controller.pageCustomer,i=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8bf7\u641c\u7d22\u5ba2\u6237\uff01");return r.createElement(a.Page,{header:"\u9009\u62e9\u5ba2\u6237",headerClassName:"bg-primary"},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(a.List,{before:"",none:i,items:n,item:{render:t.renderCustomer,onClick:t.onClickCustomer}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.renderCustomer=function(e,t){var n=e.name;return r.createElement(a.LMR,{className:"px-3 py-2 ",left:r.createElement(a.FA,{name:"user",className:" my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold"}),r.createElement("div",null,n))},t}(a.VPage),nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCustomer=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.showCustomerDetail(e.id)];case 1:return t.sent(),[2]}})})},t.page=Object(g.a)(function(e){var n=t.controller,i=n.pageCustomerSearch,s=n.showSelectCustomerUnit,u=(r.createElement("div",{className:"cursor-pointer py-2"},r.createElement("span",{onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,s()];case 1:return[2,e.sent()]}})})}},r.createElement(a.FA,{name:"plus"}))),r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u672a\u627e\u5230\u5ba2\u6237\uff01"));return r.createElement(a.Page,{header:"\u641c\u7d22\u5ba2\u6237",onScrollBottom:t.onScrollBottom,headerClassName:"bg-primary py-1"},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2  ",size:"md",onSearch:function(e){return t.controller.searchCustomerByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(a.List,{before:"",none:u,items:i,item:{render:t.renderCustomer,onClick:t.onClickCustomer}}))}),t.onScrollBottom=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.pageCustomerSearch.more()];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t.prototype.renderCustomer=function(e,t){var n=e.name,i=e.unit,o=r.createElement("div",null,r.createElement(a.FA,{name:"user",className:" my-2 mr-3 text-info"})," ",r.createElement("span",{className:"font-weight-bold"},n)),s=r.createElement("div",{className:"text-muted  my-2 mr-3 "},r.createElement("small",null," ",Object(a.tv)(i,function(e){return e.name})));return r.createElement(a.LMR,{className:"px-3 py-2 ",left:o,right:s})},t}(a.VPage),rt=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=11,n.searchCustomerQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchCustomerQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(a.PageItems),it=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=11,n.searchCustomerQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchCustomerQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(a.PageItems),ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.searchByKey=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.pageCustomer=new rt(this.uqs.salesTask.searchMyCustomer),this.pageCustomer.first({key:e}),[2]})})},t.searchCustomerByKey=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.pageCustomerSearch=new it(this.uqs.salesTask.searchMyCustomer),this.pageCustomerSearch.first({key:e}),[2]})})},t.loadCustomerDetail=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.salesTask.MyCustomer.load(e)];case 1:return[2,t.sent()]}})})},t.showCustomerDetail=function(e){return o.b(t,void 0,void 0,function(){var t,n,r;return o.e(this,function(i){switch(i.label){case 0:return[4,this.loadCustomerDetail(e)];case 1:return t=i.sent(),[4,this.uqs.salesTask.MyCustomerIsOccupy.query({mycustomer:t.id})];case 2:return n=i.sent(),this.IsOccupy=n.ret[0],[4,this.uqs.salesTask.CustomerMyCustomerMap.query({mycustomer:t.id})];case 3:return(r=i.sent()).ret.length>0?this.innerCustomer=r.ret[0].customer:this.innerCustomer=null,this.openVPage(Ze,t),[2]}})})},t.showSelectCustomer=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.searchByKey(""),this.task=e,this.openVPage(He),[2]})})},t.showCustomerSearch=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return null==e?this.pageCustomerSearch=null:this.searchCustomerByKey(e),this.openVPage(nt),[2]})})},t.selectCustomer=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return this.task.customer=e,this.cApp.cSalesTask.showCrateCheck(this.task),[2]})})},t.returnCustomer=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return this.returnCall(e),[2]})})},t.showCreateCustomer=function(e){t.openVPage($e,e)},t.showSelectCustomerUnit=function(){t.cApp.cCustomerUnit.start()},t.createMyCustomer=function(e,n){return o.b(t,void 0,void 0,function(){var t,r,i;return o.e(this,function(o){switch(o.label){case 0:return t={unit:n.id,no:void 0,name:e.Name,firstName:"",lastName:"",telephone:e.telephone,gender:e.Gender?1:e.Gender,salutation:e.Salutation,birthDay:e.BirthDay},[4,this.uqs.salesTask.CreateMyCustomer.submit(t)];case 1:return r=o.sent(),i=r.code,this.openVPage(et,i),[2]}})})},t.updateMyCustomer=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.salesTask.MyCustomer.save(e.id,e)];case 1:return t.sent(),[2]}})})},t.showInnerCustomerSelect=function(e){return o.b(t,void 0,void 0,function(){var t,n;return o.e(this,function(r){switch(r.label){case 0:return t=this.cApp.cWebUser,n=this,[4,t.call()];case 1:return n.innerCustomer=r.sent(),[4,this.createWebUserMyCustomerMap(this.innerCustomer.id,e)];case 2:return r.sent(),[2]}})})},t.createWebUserMyCustomerMap=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.salesTask.UpateCustomerMyCustomerMap.submit({mycustomer:n,customer:e})];case 1:return t.sent(),[2]}})})},t.pickAddress=function(e,n,r){return o.b(t,void 0,Promise,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.newC(ze).call()];case 1:return[2,e.sent()]}})})},t.render=Object(g.a)(function(){return t.renderView(Ye)}),t.tab=function(){return t.searchByKey(""),r.createElement(t.render,null)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.pageCustomer=null,this.task=e,this.searchByKey(""),this.openVPage(tt),[2]})})},o.c([v.l],t.prototype,"pageCustomer",void 0),o.c([v.l],t.prototype,"pageCustomerSearch",void 0),o.c([v.l],t.prototype,"innerCustomer",void 0),o.c([v.l],t.prototype,"IsOccupy",void 0),t}(w);var at=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(g.a)(function(){var e=t.controller.cApp,n=e.cSalesTask,i=(e.cMessage,e.cCoupon),s=n.showEmployeeHistory,u=t.controller,c=u.showTeam,l=(u.showAchievement,u.achievement),h=u.showSet;t.salesAmont=l[0],null==t.salesAmont&&(t.salesAmont={oneSaleVolume:0,twoSaleVolume:0,threeSaleVolume:0,oneAchievement:0,twoAchievement:0,threeAchievement:0,teamCount:0,customerCount:0,activeCustomerCount:0});var d=t.salesAmont,p=(d.oneSaleVolume,d.twoSaleVolume,d.threeSaleVolume,d.oneAchievement,d.twoAchievement,d.threeAchievement,d.teamCount,d.customerCount,d.activeCustomerCount,[{type:"component",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-2 my-2 "},r.createElement("table",{className:"w-100 "},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:"w-4"},r.createElement("div",{className:"text-center",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,i.showCreateCoupon()];case 1:return[2,e.sent()]}})})}},r.createElement(a.FA,{name:"th-large",className:"text-warning",fixWidth:!0,size:"lg"}),r.createElement("br",null),r.createElement("small",null,r.createElement("small",null,"\xa0\u4f18\u60e0\u7801\xa0")))),r.createElement("td",{className:"w-4"},r.createElement("div",{className:"text-center",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,s()];case 1:return[2,e.sent()]}})})}},r.createElement(a.FA,{name:"tag",className:"text-info",fixWidth:!0,size:"lg"}),r.createElement("br",null),r.createElement("small",null,r.createElement("small",null,"\u5b8c\u6210\u4efb\u52a1")))),r.createElement("td",{className:"w-4"},r.createElement("div",{className:"text-center",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return[2,e.sent()]}})})}},r.createElement(a.FA,{name:"sitemap",className:"text-info",fixWidth:!0,size:"lg"}),r.createElement("br",null),r.createElement("small",null,r.createElement("small",null,"\xa0\xa0\u56e2\u961f\xa0\xa0")))),r.createElement("td",{className:"w-4"},r.createElement("div",{className:"text-center",onClick:h},r.createElement(a.FA,{name:"cog",className:"text-info",fixWidth:!0,size:"lg"}),r.createElement("br",null),r.createElement("small",null,r.createElement("small",null,"\xa0\xa0\u8bbe\u7f6e\xa0\xa0"))))))))}]);return r.createElement("div",{className:"bg-white"},t.achievement(),t.meInfo(),r.createElement(a.PropGrid,{className:"",rows:p,values:null,alignValue:"right"}))}),t}return o.d(t,e),t.prototype.open=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t.prototype.render=function(e){var t=this.controller,n=t.user,i=t.inviteCode;return this.user=n,this.inviteCode=i,r.createElement(this.page,null)},t.prototype.userSpan=function(e,t){return t?r.createElement(r.Fragment,null,r.createElement("b",null,t," \xa0 ",r.createElement("small",{className:"muted"},e))):r.createElement("b",null,e)},t.prototype.meInfo=function(){var e=this,t=this.controller.user;if(void 0===t)return null;t.id;var n,i,s=t.name,u=t.nick,c=t.icon,l=this.controller,h=l.showMeDetail,d=l.showMessage,p=(l.showSet,this.controller.cApp.cMessage.count.get()),m=function(){return o.b(e,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,h()];case 1:return[2,e.sent()]}})})};p>0&&(n="cursor-pointer",i=p<100?r.createElement("u",null,p):r.createElement("u",null,"99+"));var f=this.salesAmont,v=f.teamCount,b=f.customerCount,y=f.activeCustomerCount;return r.createElement("div",{className:"toggle cursor-pointer px-2 py-2 w-100",style:{backgroundColor:"#f0f0f0",marginRight:"-1px",marginBottom:"-1px"}},r.createElement(a.LMR,{left:r.createElement("div",{onClick:m}," ",r.createElement(a.Image,{className:"w-3c h-3c mr-3",src:c})," "),right:r.createElement("div",{className:I()("jk-cart ml-1 mr-2",n),onClick:function(){return o.b(e,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return[2,e.sent()]}})})}},r.createElement(a.FA,{className:"fa-lg",name:"envelope-o"}),i)},r.createElement("div",{onClick:m,className:"  "},r.createElement("div",null,this.userSpan(s,u)),r.createElement("div",{className:"small"},r.createElement("span",null,"\u9080\u8bf7\u7801:")," ",this.inviteCode))),r.createElement(a.LMR,{className:"cursor-pointer w-100 pt-1"},r.createElement("table",{className:"w-100 text-center"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{className:"text-center"},r.createElement("div",null,v),r.createElement("small",null,r.createElement("small",null,r.createElement("small",null,"\xa0\xa0\xa0\xa0\u56e2\u961f\xa0\xa0\xa0\xa0"))))),r.createElement("td",null,r.createElement("div",{className:"text-center"},r.createElement("div",null,b),r.createElement("small",null,r.createElement("small",null,r.createElement("small",null,"\xa0\xa0\xa0\xa0\u5ba2\u6237\xa0\xa0\xa0\xa0"))))),r.createElement("td",null,r.createElement("div",{className:"text-center"},r.createElement("div",null,y),r.createElement("small",null,r.createElement("small",null,r.createElement("small",null,"\u6d3b\u8dc3\u5ba2\u6237"))))))))))},t.prototype.achievement=function(){var e=this,t=this.salesAmont,n=t.oneAchievement,i=t.twoAchievement,a=t.threeAchievement,s=function(t,n){return r.createElement("div",{className:"cursor-pointer",onClick:function(){return o.b(e,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.showAchievementDetail(t)];case 1:return[2,e.sent()]}})})}},n<=.001?r.createElement("div",{className:"h5"}," - "):r.createElement("div",{className:"h5"},r.createElement("strong",null,n)," ",r.createElement("span",{className:"h6"},r.createElement("small",null,"\u5143"))),r.createElement("div",{className:"h6"},r.createElement("small",null,t,"\u7c7b\u6536\u76ca")))};return r.createElement("div",{className:"toggle rounded text-center text-white bg-primary pt-5 pb-3"},r.createElement("div",{className:"py-4"},r.createElement("div",{className:"text-warning"},r.createElement("span",{className:"h1"},n+i+a),r.createElement("small",null," \u5143")),r.createElement("h6",{className:"text-warning"},r.createElement("small",null,"\u7d2f\u8ba1\u6536\u76ca"))),r.createElement("div",{className:"d-flex justify-content-around"},s("A",n),s("B",i),s("C",a)))},t}(a.VPage),st=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=[{name:"icon",type:"image"},{name:"nick",type:"string"}],t.uiSchema={items:{icon:{widget:"image",label:"\u5934\u50cf"},nick:{widget:"text",label:"\u6635\u79f0",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"}}},t.onItemChanged=function(e,n,r){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(r){switch(r.label){case 0:return t=e.name,[4,a.userApi.userSetProp(t,n)];case 1:return r.sent(),this.data[t]=n,a.nav.user[t]=n,[2]}})})},t.page=function(){return r.createElement(a.Page,{header:"\u4e2a\u4eba\u4fe1\u606f",headerClassName:"bg-primary py-1"},r.createElement(a.Edit,{schema:t.schema,uiSchema:t.uiSchema,data:t.data,onItemChanged:t.onItemChanged}),r.createElement(a.LMR,{className:"d-flex px-3 py-2 bg-white align-items-center cursor-pointer",right:t.controller.inviteCode},"\u9080\u8bf7\u7801"))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){var e,t,n;return o.e(this,function(r){return e=a.nav.user,t=e.nick,n=e.icon,this.data={nick:t,icon:n},this.openPage(this.page),[2]})})},o.c([v.l],t.prototype,"data",void 0),t}(a.VPage);function ut(e,t,n,i,o){return r.createElement(a.LMR,{className:"cursor-pointer w-100 py-2 my-2 align-items-center  ",onClick:o,left:r.createElement(a.FA,{name:e,className:"mr-3 "+t,fixWidth:!0,size:"lg"}),right:r.createElement("div",{className:"w-2c text-right"}," ",r.createElement("i",{className:"fa fa-chevron-right"}))},n,r.createElement("span",{className:" ml-3"},i))}var ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(g.a)(function(e){var n,i,s,u,c,l=t.salesAmont,h=l.oneSaleVolume,d=(l.twoSaleVolume,l.threeSaleVolume,l.oneAchievement),p=l.twoAchievement,m=l.threeAchievement,f=[{type:"component",component:(n="cny",i="text-warning",s="\u9500\u552e\u91d1\u989d",u=h,c=void 0,r.createElement(a.LMR,{className:"cursor-pointer w-100 py-2 my-2 align-items-center  ",onClick:c,left:r.createElement(a.FA,{name:n,className:"mr-3 "+i,fixWidth:!0,size:"lg"}),right:r.createElement("div",{className:"w-2c text-right"})},s,r.createElement("span",{className:" ml-3"},u)))},{type:"component",component:ut("gg","text-info","A\u7c7b\u7ee9\u6548",d,function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.showAchievementDetail("A")];case 1:return[2,e.sent()]}})})})},{type:"component",component:ut("gg","text-danger","B\u7c7b\u7ee9\u6548",p,function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.showAchievementDetail("B")];case 1:return[2,e.sent()]}})})})},{type:"component",component:ut("gg","text-warning","C\u7c7b\u7ee9\u6548",m,function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.showAchievementDetail("C")];case 1:return[2,e.sent()]}})})})}];return r.createElement(a.Page,{header:"\u6211\u7684\u4e1a\u7ee9",headerClassName:oe.headerClass},r.createElement(a.PropGrid,{className:"",rows:f,values:null,alignValue:"right"}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.salesAmont=e[0],null==this.salesAmont&&(this.salesAmont={oneSaleVolume:0,twoSaleVolume:0,threeSaleVolume:0,oneAchievement:0,twoAchievement:0,threeAchievement:0}),this.openPage(this.page,e),[2]})})},t}(a.VPage),lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logout=function(){a.nav.showLogout()},t.page=function(){var e=r.createElement("button",{type:"button",className:"btn btn-danger flex-grow-1 mx-3 my-1 w-100",onClick:t.logout},r.createElement(a.FA,{name:"sign-out",size:"lg"})," \u9000\u51fa");return r.createElement(a.Page,{header:"\u8bbe\u7f6e",headerClassName:oe.headerClass,footer:e})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t}(a.VPage),ht=function(e){return!0===e?"text-primary":"text-muted"},dt=function(e){return function(t){return r.createElement("span",{className:ht(t)},e)}},pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.achievementsA=[],t.tabs=[{name:"a",caption:dt("A\u7c7b\u4e1a\u7ee9"),content:function(){return r.createElement(a.List,{items:t.achievementsA,item:{render:t.renderItem},none:"\u65e0\u4e1a\u7ee9"})},load:function(){return o.b(t,void 0,void 0,function(){var e,t,n,r;return o.e(this,function(i){switch(i.label){case 0:return t=(e=(r=this.achievementsA).push).apply,n=[r],[4,this.controller.searchAchievementDetail(1)];case 1:return t.apply(e,n.concat([i.sent()])),[2]}})})}},{name:"b",caption:dt("B\u7c7b\u4e1a\u7ee9"),content:function(){return r.createElement(a.List,{items:t.achievementsB,item:{render:t.renderItem},none:"\u65e0\u4e1a\u7ee9"})},load:function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return e=this,[4,this.controller.searchAchievementDetail(2)];case 1:return e.achievementsB=t.sent(),[2]}})})}},{name:"c",caption:dt("C\u7c7b\u4e1a\u7ee9"),content:function(){return r.createElement(a.List,{items:t.achievementsC,item:{render:t.renderItem},none:"\u65e0\u4e1a\u7ee9"})},load:function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return e=this,[4,this.controller.searchAchievementDetail(3)];case 1:return e.achievementsC=t.sent(),[2]}})})}}],t.page=Object(g.a)(function(){return r.createElement(a.Page,{header:"\u6211\u7684\u4e1a\u7ee9",headerClassName:oe.headerClass},r.createElement(a.Tabs,{tabs:t.tabs,tabPosition:"top"}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.currentState=e,this.openPage(this.page),[2]})})},t.prototype.renderItem=function(e,t){var n=e.date,i=(e.mycustomer,e.Amount),o=r.createElement("small",{className:"text-muted"},r.createElement(a.EasyDate,{date:n})),s=r.createElement("small",{className:"text-muted"},r.createElement("div",{className:"px-3"}," ",i," ",r.createElement(a.FA,{name:"cny",className:"text-warning"})));return r.createElement("div",{className:"d-block"},r.createElement("div",null,r.createElement(a.LMR,{className:"px-3 py-2 ",left:o,right:s})))},o.c([v.l],t.prototype,"achievementsA",void 0),o.c([v.l],t.prototype,"achievementsB",void 0),o.c([v.l],t.prototype,"achievementsC",void 0),t}(a.VPage),mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.load=function(){return o.b(t,void 0,void 0,function(){var e,t,n,r;return o.e(this,function(i){switch(i.label){case 0:return e=this,[4,this.uqs.salesTask.SearchPosition.table({})];case 1:return e.position=i.sent(),t=String(this.position[0].code+1e8),n=t.substr(1,4),r=t.substr(5),this.inviteCode=n+" "+r,[4,this.onComputeAchievement()];case 2:return i.sent(),1,[2]}})})},t.showMeDetail=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.openVPage(st),[2]})})},t.searchPosition=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.uqs.salesTask.SearchPosition.table({})];case 1:return[2,e.sent()]}})})},t.showTeam=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.cApp.cTeam.start()];case 1:return e.sent(),[2]}})})},t.showAchievement=function(){return o.b(t,void 0,void 0,function(){var e,t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.ComputeAchievement.submit({})];case 1:return n.sent(),e={user:this.user.id},[4,this.uqs.salesTask.SearchAchievement.table(e)];case 2:return t=n.sent(),this.openVPage(ct,t),[2]}})})},t.showAchievementDetail=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.openVPage(pt,e),[2]})})},t.searchAchievementDetail=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return t={types:e},[4,this.uqs.salesTask.SearchAchievementHistory.table(t)];case 1:return[2,n.sent()]}})})},t.showMessage=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.cApp.cMessage.start()];case 1:return e.sent(),[2]}})})},t.showSet=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.openVPage(lt),[2]})})},t.onComputeAchievement=function(){return o.b(t,void 0,void 0,function(){var e,t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.ComputeAchievement.submit({})];case 1:return n.sent(),e={user:this.user.id},t=this,[4,this.uqs.salesTask.SearchAchievement.table(e)];case 2:return t.achievement=n.sent(),[2]}})})},t.render=function(){return t.renderView(at)},t.tab=function(){return r.createElement(t.render,null)},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.load()];case 1:return t.sent(),a.nav.clear(),this.openVPage(at,e),[2]}})})},o.c([v.l],t.prototype,"achievement",void 0),t}(w),ft=[{name:"invitacode",type:"string",required:!0,maxLength:8},{name:"submit",type:"submit"}],vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{invitacode:{widget:"text",label:"\u9080\u8bf7\u7801",placeholder:"\u8bf7\u8f93\u5165\u9080\u8bf7\u7801"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary w-8c"}}},t.onCreatePosition=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.form?[4,this.form.buttonClick("submit")]:[2];case 1:return e.sent(),[2]}})})},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.createPosition(n.form.data)];case 1:return e.sent(),[2]}})})},t.onEnter=function(e,n){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){switch(t.label){case 0:return"invitacode"!==e?[3,2]:[4,this.onCreatePosition()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.page=Object(g.a)(function(e){return r.createElement(a.Page,{header:"\u8f7b\u4ee3\u7406",headerClassName:"bg-primary py-1 px-3",logout:!0,back:"none"},r.createElement(a.Form,{ref:function(e){return t.form=e},className:"m-3",schema:ft,uiSchema:t.uiSchema,onButtonClick:t.onFormButtonClick,requiredFlag:!1,onEnter:t.onEnter}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.render=function(e){return r.createElement(this.page,null)},t}(a.VPage),bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return r.createElement(a.Page,{header:"\u901a\u8fc7",headerClassName:oe.headerClass},r.createElement("div",{className:"p-5 text-center"},r.createElement("p",{className:"text-primary mb-5"},"\u6b22\u8fce\u52a0\u5165\u8f7b\u4ee3\u7406\u4f53\u7cfb\u3002 \xa0 ",r.createElement(a.FA,{name:"hand-peace-o",size:"2x",className:"text-danger"})),r.createElement("button",{className:"btn btn-outline-primary w-6c",onClick:t.controller.startApp},"\u5f00\u59cb\u4f53\u9a8c")))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(a.VPage),yt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return r.createElement(a.Page,{header:"\u65e0\u6cd5\u901a\u8fc7",back:"none",headerClassName:oe.headerClass},r.createElement("div",{className:"p-5 text-center"},r.createElement("p",{className:"text-primary mb-5"},r.createElement(a.FA,{name:"minus-circle",size:"2x",className:"text-danger"}),r.createElement("br",null),r.createElement("br",null),"\u65e0\u6548\u7684\u9080\u8bf7\u7801"),r.createElement("button",{className:"btn btn-outline-primary w-6c",onClick:t.controller.startApp},"\u8fd4\u56de")))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.openPage(this.page,e)];case 1:return t.sent(),[2]}})})},t}(a.VPage),gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=function(e){return r.createElement(a.Page,{header:"\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56",headerClassName:oe.headerClass},r.createElement("div",{className:"p-4 text-center"},r.createElement("p",{className:"mb-5 pl-2 "},r.createElement("p",{className:"text-left"},r.createElement("span",{className:"text-muted small"},"VS.20190827"),r.createElement("br",null)),r.createElement("p",{className:"text-left"},"\u767e\u7075\u5a01\u5316\u5b66\u6280\u672f\u6709\u9650\u516c\u53f8 \uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u672c\u516c\u53f8\u201d\uff09\u63d0\u4f9b\u3002\u7528\u6237\u5728\u767b\u5f55\u672c\u7f51\u7ad9\u540e\uff0c\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\uff0c\u5982\u60a8\u4e0d\u540c\u610f\u6709\u5173\u6761\u6b3e\u6216\u672c\u7f51\u7ad9\u5bf9\u5176\u8fdb\u884c\u7684\u4fee\u6539\uff0c\u8bf7\u505c\u6b62\u4f7f\u7528\u672c\u7f51\u7ad9\u63d0\u4f9b\u7684\u670d\u52a1\u3002\u60a8\u4e00\u65e6\u4f7f\u7528\u672c\u7f51\u7ad9\u63d0\u4f9b\u7684\u5185\u5bb9\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6d4f\u89c8\u7f51\u7ad9\u4fe1\u606f\u3001\u4e0b\u8f7d\u7f51\u7ad9\u5185\u5bb9\u3001\u4f7f\u7528\u7f51\u7ad9\u63d0\u4f9b\u7684\u7b2c\u4e09\u65b9\u7f51\u7ad9\u94fe\u63a5\u7b49\uff0c\u5373\u89c6\u4e3a\u60a8\u5df2\u4e86\u89e3\u5e76\u5b8c\u5168\u540c\u610f\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u4e2d\u7684\u6240\u6709\u6761\u6b3e\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e00\u3001\u7f51\u7ad9\u4f7f\u7528"),r.createElement("br",null),"\u9664\u975e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u8bb8\u53ef\u6216\u5f81\u5f97\u672c\u516c\u53f8\u540c\u610f\uff0c\u672c\u7f51\u7ad9\u7684\u4fe1\u606f\u53ca\u5176\u4efb\u4f55\u7ec4\u6210\u90e8\u5206\u4e0d\u5f97\u88ab\u91cd\u65b0\u7f16\u8f91\u3001\u590d\u5236\u3001\u4eff\u5236\u3001\u6284\u88ad\uff0c\u6216\u4e3a\u4efb\u4f55\u672a\u7ecf\u672c\u516c\u53f8\u5141\u8bb8\u7684\u5546\u4e1a\u76ee\u7684\u6240\u4f7f\u7528\u3002\u5982\u679c\u672c\u516c\u53f8\u786e\u5b9a\u5ba2\u6237\u884c\u4e3a\u8fdd\u6cd5\u6216\u6709\u635f\u672c\u7f51\u7ad9\u548c\u672c\u516c\u53f8\u7684\u5408\u6cd5\u5229\u76ca\uff0c\u5219\u672c\u516c\u53f8\u4fdd\u7559\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u62d2\u7edd\u63d0\u4f9b\u670d\u52a1\u3001\u51bb\u7ed3\u6216\u5220\u9664\u4f1a\u5458\u5e10\u6237\u3001\u91c7\u53d6\u76f8\u5173\u6cd5\u5f8b\u63aa\u65bd\u7684\u6743\u5229\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e8c\u3001\u94fe\u63a5"),r.createElement("br",null),"\uff08\u4e00\uff09\u672c\u7f51\u7ad9\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u94fe\u63a5",r.createElement("br",null),"\u5fc5\u8981\u65f6\uff0c\u672c\u7f51\u7ad9\u5c06\u63d0\u4f9b\u5bf9\u7b2c\u4e09\u65b9\u7ecf\u8425\u7684\u5176\u4ed6\u7f51\u7ad9\u7684\u8d85\u7ea7\u94fe\u63a5\u6216\u6307\u5f15\u670d\u52a1\uff0c\u6216\u8005\u901a\u8fc7\u5e27\u8054\u53ca\u5176\u4ed6\u65b9\u5f0f\u5728\u672c\u7f51\u7ad9\u4e0a\u63d0\u4f9b\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u5185\u5bb9\uff0c\u6b64\u201c\u5185\u5bb9\u201d\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u672c\u7f51\u7ad9\u4e0a\u5305\u542b\u6216\u53ef\u83b7\u5f97\u7684\u4efb\u4f55\u6750\u6599\u3001\u6587\u4ef6\u3001\u4fe1\u606f\u3001\u56fe\u7247\u3001\u56fe\u8868\u3001\u6807\u8bc6\u3001\u8bbe\u8ba1\u4ee5\u53ca\u672c\u7f51\u7ad9\u4e0a\u63d0\u4f9b\u7684\u4efb\u4f55\u5176\u4ed6\u4fe1\u606f\u3002",r.createElement("br",null),"\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u94fe\u63a5\u4ec5\u4e3a\u4f9b\u60a8\u65b9\u4fbf\u4e4b\u7528\u3002\u672c\u516c\u53f8\u4fdd\u7559\u5728\u4efb\u4f55\u65f6\u95f4\u7ec8\u6b62\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u94fe\u63a5\u7684\u6743\u5229\u3002\u6240\u94fe\u63a5\u7f51\u7ad9\u3001\u7f51\u7ad9\u4e0a\u7684\u5185\u5bb9\u53ca\u5176\u63cf\u8ff0\u6216\u63d0\u4f9b\u7684\u4ea7\u54c1\u4e0e\u670d\u52a1\u5747\u4e0d\u53d7\u672c\u516c\u53f8\u7684\u63a7\u5236\uff0c\u56e0\u6b64\u672c\u516c\u53f8\u4e0d\u5bf9\u4efb\u4f55\u8be5\u7b49\u7f51\u7ad9\u53ca\u5176\u4e0a\u7684\u5185\u5bb9\u3001\u4ea7\u54c1\u6216\u670d\u52a1\uff08\u5305\u62ec\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u8fdb\u4e00\u6b65\u94fe\u63a5\uff09\u8d1f\u8d23\u3002\u60a8\u4e00\u65e6\u51b3\u5b9a\u767b\u5f55\u6216\u4f7f\u7528\u4efb\u4f55\u6240\u94fe\u63a5\u7684\u7f51\u7ad9\uff0c\u5e94\u5f53\u6ce8\u610f\u53ef\u80fd\u4f1a\u53d7\u5230\u9002\u7528\u4e8e\u8be5\u7f51\u7ad9\u7684\u4efb\u4f55\u6761\u6b3e\u548c\u6761\u4ef6\u7684\u9650\u5236\uff0c\u540c\u65f6\u81ea\u884c\u91c7\u53d6\u9884\u9632\u63aa\u65bd\u4ee5\u4fbf\u5728\u767b\u5f55\u6216\u4f7f\u7528\u8be5\u7f51\u7ad9\u65f6\u907f\u514d\u75c5\u6bd2\u6216\u5176\u4ed6\u7834\u574f\u6027\u56e0\u7d20\u3002\u5bf9\u4e8e\u60a8\u767b\u5f55\u6216\u4f7f\u7528\u6240\u94fe\u63a5\u7f51\u7ad9\u6240\u4ea7\u751f\u7684\u4efb\u4f55\u635f\u5931\uff0c\u7531\u60a8\u81ea\u884c\u627f\u62c5\u3002",r.createElement("br",null),"\u672c\u516c\u53f8\u5bf9\u4e8e\u4efb\u4f55\u6240\u94fe\u63a5\u7f51\u7ad9\u6216\u5176\u4e0a\u6240\u663e\u793a\u7684\u5185\u5bb9\u3001\u63cf\u8ff0\u6216\u63d0\u4f9b\u7684\u4efb\u4f55\u4ea7\u54c1\u6216\u670d\u52a1\u4e0d\u4f5c\u4efb\u4f55\u4fdd\u8bc1\u6216\u9648\u8ff0\uff0c\u5e76\u4e14\u4e0d\u5bf9\u5176\u4f5c\u51fa\u4efb\u4f55\u8ba4\u53ef\u3001\u5efa\u8bae\u3001\u6279\u51c6\u6216\u4ecb\u7ecd\u3002\u9664\u975e\u672c\u516c\u53f8\u53e6\u884c\u660e\u786e\u89c4\u5b9a\u6216\u540c\u610f\uff0c\u672c\u516c\u53f8\u5c06\u4e0d\u662f\u60a8\u4e0e\u4efb\u4f55\u88ab\u94fe\u63a5\u7f51\u7ad9\u7684\u63d0\u4f9b\u8005\u4e4b\u95f4\u8fbe\u6210\u7684\u4efb\u4f55\u534f\u8bae\u7684\u5f53\u4e8b\u65b9\u3002\u672c\u516c\u53f8\u4e0d\u5bf9\u56e0\u4efb\u4f55\u88ab\u94fe\u63a5\u7f51\u7ad9\u4e0a\u63d0\u4f9b\u7684\u5185\u5bb9\u3001\u4ea7\u54c1\u3001\u670d\u52a1\u7b49\u5b58\u5728\u7684\u4efb\u4f55\u4e2d\u65ad\u3001\u5ef6\u8fdf\u3001\u6f0f\u6d1e\u6216\u758f\u5ffd\u6240\u5bfc\u81f4\u7684\u4efb\u4f55\u635f\u5bb3\u6216\u635f\u5931\uff08\u65e0\u8bba\u8be5\u635f\u5bb3\u6216\u635f\u5931\u662f\u76f4\u63a5\u3001\u95f4\u63a5\u3001\u7279\u522b\u6216\u662f\u5076\u7136\u7684\uff09\u8d1f\u8d23\u3002\u672c\u7f51\u7ad9\u4e0a\u51fa\u73b0\u5bf9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u7684\u94fe\u63a5\u5e76\u4e0d\u8868\u793a\u672c\u516c\u53f8\u6216\u672c\u7f51\u7ad9\u4e0e\u5176\u76f8\u5173\u8054\uff0c\u6216\u5df2\u83b7\u5f97\u5408\u6cd5\u6388\u6743\u4f7f\u7528\u88ab\u94fe\u63a5\u7f51\u7ad9\u4e2d\u663e\u793a\u7684\u6216\u53ef\u901a\u8fc7\u5176\u94fe\u63a5\u5230\u7684\u4efb\u4f55\u5546\u6807\u3001\u5546\u53f7\u3001\u6807\u8bc6\u6216\u8457\u4f5c\u6743\u3002",r.createElement("br",null),"\uff08\u4e8c\uff09\u7b2c\u4e09\u65b9\u7f51\u7ad9\u5bf9\u672c\u7f51\u7ad9\u7684\u94fe\u63a5",r.createElement("br",null),"\u7b2c\u4e09\u65b9\u7f51\u7ad9\u5bf9\u672c\u7f51\u7ad9\u7684\u94fe\u63a5\uff0c\u5e76\u4e0d\u5fc5\u7136\u8868\u793a\u672c\u516c\u53f8\u5bf9\u7b2c\u4e09\u65b9\u4f5c\u51fa\u4e86\u67d0\u79cd\u8ba4\u53ef\u3001\u6388\u6743\u3001\u8d5e\u52a9\uff0c\u6216\u8868\u660e\u5176\u5c5e\u4e8e\u672c\u516c\u53f8\u7684\u5173\u8054\u4f01\u4e1a\u3001\u5408\u8d44\u4f01\u4e1a\u3001\u5408\u4f5c\u4f01\u4e1a\u6216\u4e1a\u52a1\u4f19\u4f34\u3002\u5728\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u672c\u516c\u53f8\u5e76\u672a\u610f\u8bc6\u5230\u7b2c\u4e09\u65b9\u5df2\u63d0\u4f9b\u5bf9\u672c\u7f51\u7ad9\u7684\u94fe\u63a5\u3002",r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e09\u3001\u77e5\u8bc6\u4ea7\u6743\u4fdd\u62a4"),r.createElement("br",null),"\u672c\u7f51\u7ad9\u6240\u8f7d\u8ff0\u7684\u57df\u540d\u3001\u5546\u6807\u3001\u5546\u53f7\u3001\u4fe1\u606f\u3001\u6587\u5b57\u3001\u56fe\u5f62\u3001\u56fe\u50cf\u3001\u58f0\u97f3\u3001\u94fe\u63a5\u3001\u8f6f\u4ef6\u53ca\u6240\u6709\u5176\u5b83\u5185\u5bb9\u5747\u7531\u672c\u516c\u53f8\u3001\u5176\u5185\u5bb9\u63d0\u4f9b\u5546\u53ca\u7b2c\u4e09\u65b9\u8bb8\u53ef\u4eba\u63d0\u4f9b\u3002\u4e0a\u8ff0\u5185\u5bb9\u7684\u77e5\u8bc6\u4ea7\u6743\u4f9d\u5177\u4f53\u60c5\u51b5\u5206\u522b\u4e3a\u672c\u516c\u53f8\u3001\u5176\u5185\u5bb9\u63d0\u4f9b\u5546\u53ca\u7b2c\u4e09\u65b9\u8bb8\u53ef\u4eba\u6240\u62e5\u6709\u3002 \u9664\u6cd5\u5f8b\u53e6\u6709\u89c4\u5b9a\u6216\u53cc\u65b9\u53e6\u6709\u7ea6\u5b9a\u5916\uff0c\u672a\u7ecf\u672c\u516c\u53f8\u548c/\u6216\u5176\u4ed6\u6743\u5229\u4eba\u4e8b\u5148\u8bb8\u53ef\uff0c\u4efb\u4f55\u4eba\u4e0d\u5f97\u4ee5\u4efb\u4f55\u5f62\u5f0f\u901a\u8fc7\u4efb\u4f55\u65b9\u5f0f\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u7535\u5b50\u3001\u673a\u68b0\u590d\u5370\u6216\u5f55\u5236\u7b49\u65b9\u5f0f\uff09\u590d\u5236\u3001\u5c55\u793a\u3001\u4fee\u6539\u3001\u8f6c\u8ba9\u3001\u5206\u53d1\u3001\u91cd\u65b0\u53d1\u5e03\u3001\u4e0b\u8f7d\u3001\u5f20\u8d34\u6216\u4f20\u8f93\u672c\u7f51\u7ad9\u7684\u5185\u5bb9\u3002 \u672a\u7ecf\u672c\u516c\u53f8\u6216\u5546\u6807\u6743\u4eba\u4e8b\u5148\u8bb8\u53ef\uff0c\u4efb\u4f55\u5355\u4f4d\u53ca\u4e2a\u4eba\u4e0d\u5f97\u4ee5\u4efb\u4f55\u65b9\u5f0f\u6216\u7406\u7531\u5bf9\u672c\u7f51\u7ad9\u7684\u5546\u6807\u3001\u5546\u53f7\u6216\u6807\u8bc6\u7684\u4efb\u4f55\u90e8\u5206\u8fdb\u884c\u4f7f\u7528\u3001\u590d\u5236\u3001\u4fee\u6539\u3001\u4f20\u64ad\u6216\u4e0e\u5176\u5b83\u4ea7\u54c1\u6346\u7ed1\u4f7f\u7528\u3002",r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u56db\u3001\u514d\u8d23\u58f0\u660e"),r.createElement("br",null),"\u672c\u7f51\u7ad9\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\uff0c\u5177\u5907\u4e00\u5b9a\u7684\u51c6\u786e\u6027\u3001\u6709\u6548\u6027\u548c\u5b8c\u6574\u6027\uff0c\u4f46\u56e0\u6570\u636e\u5e9e\u5927\uff0c\u4e14\u53d7\u6570\u636e\u6765\u6e90\u7684\u4e0d\u786e\u5b9a\u6027\u5f71\u54cd\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u7edd\u5bf9\u7684\u51c6\u786e\u6027\u3001\u6709\u6548\u6027\u548c\u5b8c\u6574\u6027\u3002\u672c\u516c\u53f8\u53ca\u5176\u5458\u5de5\u4e00\u6982\u6bcb\u987b\u4ee5\u4efb\u4f55\u65b9\u5f0f\u5c31\u4efb\u4f55\u4fe1\u606f\u4f20\u9012\u6216\u4f20\u9001\u7684\u5931\u8bef\u3001\u4e0d\u51c6\u786e\u6216\u9519\u8bef\u5bf9\u7528\u6237\u6216\u4efb\u4f55\u5176\u4ed6\u4eba\u58eb\u8d1f\u4efb\u4f55\u76f4\u63a5\u6216\u95f4\u63a5\u7684\u8d23\u4efb\u3002\u5728\u6cd5\u5f8b\u5141\u8bb8\u7684\u8303\u56f4\u5185\uff0c\u672c\u516c\u53f8\u4e0d\u627f\u62c5\u7528\u6237\u6216\u4efb\u4f55\u4eba\u58eb\u5c31\u4f7f\u7528\u6216\u672a\u80fd\u4f7f\u7528\u672c\u7f51\u7ad9\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\u6216\u4efb\u4f55\u94fe\u63a5\u6216\u9879\u76ee\u6240\u5f15\u81f4\u7684\u4efb\u4f55\u76f4\u63a5\u3001\u95f4\u63a5\u3001\u9644\u5e26\u3001\u4ece\u5c5e\u3001\u7279\u6b8a\u3001\u60e9\u7f5a\u6027\u7684\u635f\u5bb3\u8d54\u507f\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6536\u76ca\u3001\u9884\u671f\u5229\u6da6\u7684\u635f\u5931\u6216\u5931\u53bb\u7684\u4e1a\u52a1\u3001\u672a\u5b9e\u73b0\u9884\u671f\u7684\u8282\u51cf\uff09\u3002\u672c\u516c\u53f8\u4fdd\u7559\u81ea\u884c\u51b3\u5b9a\u66f4\u6b63\u672c\u7f51\u7ad9\u4e2d\u4efb\u4f55\u90e8\u5206\u7684\u4efb\u4f55\u9519\u8bef\u6216\u9057\u6f0f\u7684\u6743\u5229\u3002\u672c\u516c\u53f8\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u95f4\u5bf9\u672c\u7f51\u7ad9\u3001\u672c\u7f51\u7ad9\u4e0a\u63cf\u8ff0\u7684\u5185\u5bb9\u548c\u4ea7\u54c1\u3001\u9879\u76ee\u3001\u670d\u52a1\u6216\u4ef7\u683c\u4f5c\u51fa\u4efb\u4f55\u5176\u4ed6\u4fee\u6539\u800c\u65e0\u9700\u901a\u77e5\u3002 \u672c\u7f51\u7ad9\u3001\u672c\u7f51\u7ad9\u4e0a\u7684\u4fe1\u606f\u548c\u5185\u5bb9\u4ee5\u53ca\u5728\u672c\u7f51\u7ad9\u4e0a\u53ef\u83b7\u5f97\u7684\u8f6f\u4ef6\u548c\u6750\u6599\u5747\u201c\u4f9d\u539f\u6837\u201d\u63d0\u4f9b\u800c\u4e0d\u5305\u542b\u660e\u793a\u6216\u6697\u793a\u7684\u4efb\u4f55\u6027\u8d28\u7684\u9648\u8ff0\u6216\u4fdd\u8bc1\u3002\u5728\u6cd5\u5f8b\u8bb8\u53ef\u7684\u6700\u5927\u9650\u5ea6\u5185\uff0c\u672c\u516c\u53f8\u58f0\u660e\u4e0d\u4f5c\u51fa\u4efb\u4f55\u660e\u793a\u6216\u6697\u793a\u7684\u9648\u8ff0\u548c\u4fdd\u8bc1\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6709\u5173\u5b89\u5168\u6027\u3001\u51c6\u786e\u6027\u3001\u5b8c\u6574\u6027\u3001\u9002\u9500\u6027\u3001\u65e0\u4fb5\u6743\u3001\u9002\u5408\u4efb\u4f55\u7279\u522b\u76ee\u7684\u6216\u6ca1\u6709\u8ba1\u7b97\u673a\u75c5\u6bd2\u7684\u4fdd\u8bc1\u3002\u60a8\u5e94\u4e3a\u4f7f\u7528\u672c\u7f51\u7ad9\u627f\u62c5\u5168\u90e8\u8d23\u4efb\u548c\u98ce\u9669\u3002 \u5982\u53d1\u751f\u4ee5\u4e0b\u60c5\u51b5\uff0c\u672c\u7f51\u7ad9\u4e0d\u5bf9\u7528\u6237\u7684\u76f4\u63a5\u6216\u95f4\u63a5\u635f\u5931\u627f\u62c5\u6cd5\u5f8b\u8d23\u4efb\uff1a",r.createElement("br",null),"1. \u8425\u4e1a\u4e2d\u65ad\u3002",r.createElement("br",null),"2. \u65e0\u6cd5\u767b\u5f55\u672c\u7f51\u7ad9\uff0c\u6216\u767b\u5f55\u672c\u7f51\u7ad9\u5ef6\u8fdf\u6216\u4e2d\u65ad\u3002",r.createElement("br",null),"3. \u6570\u636e\u65e0\u6cd5\u4f20\u9001\u3001\u9519\u8bef\u4f20\u9001\u3001\u6bc1\u635f\u3001\u706d\u5931\u6216\u5176\u4ed6\u4fee\u6539\u3002",r.createElement("br",null),"4. \u56e0\u5904\u7406\u672c\u7f51\u7ad9\u4e0a\u5bf9\u5176\u5b83\u7f51\u7ad9\u7684\u94fe\u63a5\u6216\u672c\u7f51\u7ad9\u4e0a\u5b58\u5728\u5bf9\u5176\u5b83\u7f51\u7ad9\u7684\u94fe\u63a5\u6240\u906d\u53d7\u7684\u4efb\u4f55\u79cd\u7c7b\u7684\u635f\u5931\u6216\u635f\u5bb3\u3002",r.createElement("br",null),"5. \u5c31\u5ba2\u6237\u4f7f\u7528\u672c\u7f51\u7ad9\uff08\u5305\u62ec\u94fe\u63a5\u5230\u7b2c\u4e09\u65b9\u7f51\u7ad9\u6216\u81ea\u7b2c\u4e09\u65b9\u7f51\u7ad9\u94fe\u63a5\uff09\u800c\u53ef\u80fd\u4ea7\u751f\u7684\u8ba1\u7b97\u673a\u75c5\u6bd2\u3001\u7cfb\u7edf\u5931\u7075\u6216\u529f\u80fd\u7d0a\u4e71\u3002",r.createElement("br",null),"6. \u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u7b2c\u56db\u6761\u4e2d\u89c4\u5b9a\u7684\u516d\u79cd\u60c5\u5f62\u6240\u5f15\u8d77\u7684\u7528\u6237\u4e2a\u4eba\u8d44\u6599\u7684\u62ab\u9732\u6216\u6cc4\u9732\u3002",r.createElement("br",null),"7. \u56e0\u4e0d\u53ef\u6297\u529b\u6216\u672c\u516c\u53f8\u65e0\u6cd5\u5408\u7406\u63a7\u5236\u7684\u5176\u4ed6\u539f\u56e0\u6240\u5bfc\u81f4\u7684\u7528\u6237\u635f\u5931\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e94\u3001\u670d\u52a1\u53d8\u66f4\u3001\u4e2d\u65ad\u6216\u7ec8\u6b62"),r.createElement("br",null),"1. \u5982\u56e0\u7cfb\u7edf\u7ef4\u62a4\u6216\u5347\u7ea7\u7684\u9700\u8981\u800c\u9700\u6682\u505c\u7f51\u7edc\u670d\u52a1\uff0c\u767e\u7075\u5a01\u5c06\u5c3d\u53ef\u80fd\u4e8b\u5148\u8fdb\u884c\u901a\u544a\u3002",r.createElement("br",null),"2. \u5982\u53d1\u751f\u4e0b\u5217\u4efb\u4f55\u4e00\u79cd\u60c5\u5f62\uff0c\u767e\u7075\u5a01\u6709\u6743\u968f\u65f6\u4e2d\u65ad\u6216\u7ec8\u6b62\u5411\u7528\u6237\u63d0\u4f9b\u672c\u534f\u8bae\u9879\u4e0b\u7684\u7f51\u7edc\u670d\u52a1\u800c\u65e0\u9700\u901a\u77e5\u7528\u6237\uff1a",r.createElement("br",null),"(a) \u7528\u6237\u63d0\u4f9b\u7684\u8d44\u6599\u4e0d\u771f\u5b9e\uff1b",r.createElement("br",null),"(b) \u7528\u6237\u8fdd\u53cd\u672c\u534f\u8bae\u4e2d\u89c4\u5b9a\u7684\u4f7f\u7528\u89c4\u5219\u3002",r.createElement("br",null),"3. \u9664\u524d\u6b3e\u6240\u8ff0\u60c5\u5f62\u5916\uff0c\u767e\u7075\u5a01\u540c\u65f6\u4fdd\u7559\u5728\u4e0d\u4e8b\u5148\u901a\u77e5\u7528\u6237\u7684\u60c5\u51b5\u4e0b\u968f\u65f6\u4e2d\u65ad\u6216\u7ec8\u6b62\u90e8\u5206\u6216\u5168\u90e8\u7f51\u7edc\u670d\u52a1\u7684\u6743\u5229\uff0c\u5bf9\u4e8e\u6240\u6709\u670d\u52a1\u7684\u4e2d\u65ad\u6216\u7ec8\u6b62\u800c\u9020\u6210\u7684\u4efb\u4f55\u635f\u5931\uff0c\u767e\u7075\u5a01\u65e0\u9700\u5bf9\u7528\u6237\u6216\u4efb\u4f55\u7b2c\u4e09\u65b9\u627f\u62c5\u4efb\u4f55\u8d23\u4efb\u3002",r.createElement("br",null),"4. \u7528\u6237\u82e5\u53cd\u5bf9\u4efb\u4f55\u670d\u52a1\u6761\u6b3e\u7684\u5efa\u8bae\u6216\u5bf9\u540e\u6765\u7684\u6761\u6b3e\u4fee\u6539\u6709\u5f02\u8bae\uff0c\u6216\u5bf9\u7f51\u7edc\u670d\u52a1\u4e0d\u6ee1\uff0c\u7528\u6237\u53ea\u6709\u4ee5\u4e0b\u8ffd\u7d22\u6743\uff1a",r.createElement("br",null),"(a) \u4e0d\u518d\u4f7f\u7528\u767e\u7075\u5a01\u63d0\u4f9b\u7684\u7f51\u7edc\u670d\u52a1\u3002",r.createElement("br",null),"(b) \u901a\u544a\u767e\u7075\u5a01\u505c\u6b62\u4f7f\u7528\u767e\u7075\u5a01\u7684\u7f51\u7edc\u670d\u52a1\uff0c\u5f97\u5230\u767e\u7075\u5a01\u786e\u8ba4\u540e\uff0c\u7528\u6237\u4f7f\u7528\u7f51\u7edc\u670d\u52a1\u7684\u6743\u5229\u9a6c\u4e0a\u4e2d\u6b62\u3002\u4ece\u5373\u65f6\u8d77\uff0c\u767e\u7075\u5a01\u4e0d\u518d\u5bf9\u7528\u6237\u627f\u62c5\u4efb\u4f55\u4e49\u52a1\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u516d\u3001\u5173\u4e8eCookies"),r.createElement("br",null),"\u767e\u7075\u5a01\u5728\u60a8\u7684\u8bbe\u5907\u4e0a\u653e\u7f6e\u5c0f\u6570\u636e\u6587\u4ef6\uff08\u201ccookies\u201d\uff09\u4ee5\u589e\u5f3a\u7f51\u7ad9\u7684\u529f\u80fd\u3002 \u8fd9\u662f\u5927\u591a\u6570\u5546\u4e1a\u7f51\u7ad9\u7684\u5e38\u89c1\u505a\u6cd5\u3002 \u8fd9\u4e9b\u6587\u672c\u6587\u4ef6\u5141\u8bb8\u7f51\u7ad9\u5b58\u50a8\u60a8\u7684\u64cd\u4f5c\u548c\u504f\u597d\uff08\u4f8b\u5982\u5730\u7406\u533a\u57df\uff09\uff0c\u4ee5\u4fbf\u60a8\u4ee5\u540e\u7684\u8bbf\u95ee\u66f4\u52a0\u4e2a\u6027\u5316\u548c\u7b80\u5316\u3002 Cookie\u65e8\u5728\u589e\u5f3a\u60a8\u7684\u7528\u6237\u4f53\u9a8c\u3002 \u4f8b\u5982\uff0c\u4ed6\u4eec\u4f1a\u5c06\u5546\u54c1\u5b58\u50a8\u5728\u8d2d\u7269\u8f66\u4e2d\uff0c\u76f4\u5230\u60a8\u4e0b\u6b21\u8bbf\u95ee\u4e3a\u6b62\u3002",r.createElement("br",null),"Cookie\u53d6\u51b3\u4e8e\u6d4f\u89c8\u5668\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u963b\u6b62Cookie\u88ab\u653e\u7f6e\u5728\u60a8\u7684\u8bbe\u5907\u4e0a\u548c/\u6216\u60a8\u53ef\u4ee5\u5728\u8bbf\u95ee\u7f51\u7ad9\u540e\u5220\u9664Cookie\u3002 \u8fd9\u4e9b\u64cd\u4f5c\u4e2d\u7684\u4efb\u4f55\u4e00\u79cd\u90fd\u4f1a\u9650\u5236\u60a8\u7684\u7528\u6237\u4f53\u9a8c\u5e76\u5bfc\u81f4J\uff06K\u7f51\u7ad9\u65e0\u6cd5\u6309\u9884\u671f\u8fd0\u884c\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e03\u3001\u4e2a\u4eba\u4fe1\u606f\u548c\u9690\u79c1\u653f\u7b56"),r.createElement("br",null),"1)\t\u767e\u7075\u5a01\u6536\u96c6\u7684\u4fe1\u606f",r.createElement("br",null),"\u672c\u516c\u53f8\u5c06\u6536\u96c6\u60a8\u7528\u6237\u8d44\u6599\u4e2d\u7684\u67d0\u4e9b\u4fe1\u606f\uff0c\u4ee5\u6ee1\u8db3\u6cd5\u5f8b\u548c\u4e1a\u52a1\u8981\u6c42\u3002\u6b64\u4fe1\u606f\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u60a8\u7684\u59d3\u540d\u548c\u8054\u7cfb\u4fe1\u606f\u3002\u5f53\u7136\uff0c\u60a8\u53ea\u4f1a\u5411\u767e\u7075\u5a01\u63d0\u4f9b\u51c6\u786e\u7684\u4fe1\u606f\uff0c\u5e76\u4e14\u60a8\u5bf9\u4e0e\u60a8\u7684\u7528\u6237\u4e2a\u4eba\u8d44\u6599\u5e10\u6237\u76f8\u5173\u7684\u6240\u6709\u6d3b\u52a8\u8d1f\u5168\u90e8\u8d23\u4efb\u3002\u60a8\u540c\u610f\u5728\u4fe1\u606f\u53d1\u751f\u4efb\u4f55\u53d8\u5316\u65f6\u66f4\u65b0\u60a8\u7684\u4e2a\u4eba\u8d44\u6599\u4fe1\u606f\u3002\u60a8\u6709\u8d23\u4efb\u4fdd\u5bc6\u60a8\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5e76\u7acb\u5373\u901a\u77e5\u6211\u4eec\u6709\u4efb\u4f55\u8fdd\u53cd\u6b64\u4fdd\u5bc6\u89c4\u5b9a\u7684\u884c\u4e3a\u3002",r.createElement("br",null),"\u767e\u7075\u5a01\u53ef\u80fd\u4f1a\u6536\u96c6\u6709\u5173\u5176\u5ba2\u6237\u548c\u7f51\u7ad9\u7528\u6237\u7684\u6c47\u603b\u7edf\u8ba1\u6570\u636e\uff0c\u4f9b\u5176\u5185\u90e8\u4f7f\u7528\uff1b\u53ef\u80fd\u4f1a\u4f7f\u7528\u7f51\u7ad9\u7528\u6237\u548c/\u6216\u5ba2\u6237\u4fe1\u606f\u6765\u63d0\u4f9b\u76f8\u5173\u4fe1\u606f\u3001\u4fc3\u9500\u548c\u5956\u52b1\u3002",r.createElement("br",null),"\u901a\u8fc7cookie\u53ef\u80fd\u4f1a\u6536\u96c6\u53e6\u5916\u4e00\u4e9b\u4fe1\u606f\uff08\u53c2\u89c1\u4e0a\u6587\u7b2c\u516d\u8282\uff09\u3002",r.createElement("br",null),r.createElement("br",null),"2)\t\u4fe1\u606f\u5b89\u5168",r.createElement("br",null),"\u672c\u516c\u53f8\u4e0d\u4f1a\u51fa\u552e\u60a8\u7684\u4fe1\u606f\uff0c\u4e5f\u4e0d\u4f1a\u4e0e\u4efb\u4f55\u5176\u4ed6\u4e2a\u4eba\u6216\u4f01\u4e1a\u5171\u4eab\u6216\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u4e3a\u60a8\u63d0\u4f9b\u60a8\u6240\u8981\u6c42\u7684\u4ea7\u54c1\u548c\u670d\u52a1\u3002 \u8fd9\u79cd\u4fe1\u606f\u5171\u4eab\u53ef\u80fd\u6d89\u53ca\uff0c\u4f46\u4e0d\u9650\u4e8e\uff0c\u60a8\u4ece\u767e\u7075\u5a01\u8ba2\u8d2d\u4ea7\u54c1\u7684\u5206\u53d1\u3001\u4ea4\u4ed8\u3001\u5408\u4f5c\u4f19\u4f34\u7684\u6c9f\u901a\u3002 \u672a\u7ecf\u76f8\u5173\u4e2a\u4eba\u8bb8\u53ef\uff0c\u672c\u516c\u53f8\u4e0d\u4f1a\u5411\u4efb\u4f55\u7b2c\u4e09\u65b9\u5206\u4eab\u3001\u51fa\u552e\u6216\u5206\u53d1\u4e0e\u5176\u5ba2\u6237\u3001\u6d88\u8d39\u8005\u6216\u7f51\u7ad9\u7528\u6237\u6709\u5173\u7684\u4efb\u4f55\u4e2a\u4eba\u4fe1\u606f\u3002",r.createElement("br",null),"\u767e\u7075\u5a01\u4f7f\u7528\u5b89\u5168\u5957\u63a5\u5b57\u5c42\uff08SSL\uff09\u8f6f\u4ef6\u534f\u8bae\u5728\u4f20\u8f93\u6570\u636e\u65f6\u52a0\u5bc6\u60a8\u7684\u4fe1\u606f\u3002",r.createElement("br",null),"\u767e\u7075\u5a01\u9075\u5b88\u6240\u6709\u5173\u4e8e\u5176\u5f00\u5c55\u4e1a\u52a1\u7684\u53f8\u6cd5\u7ba1\u8f96\u533a\u5185\u7684\u6570\u636e\u4f20\u8f93\u7684\u56fd\u5bb6\u548c\u56fd\u9645\u534f\u8bae\u3002",r.createElement("br",null),r.createElement("br",null),"3)\t\u8bb8\u53ef",r.createElement("br",null),"\u60a8\u53ef\u4ee5\u9009\u62e9\u9000\u51fa\u767e\u7075\u5a01\u7684\u67d0\u4e9b\u901a\u4fe1\uff08\u4f8b\u5982\uff0c\u901a\u8fc7\u7535\u5b50\u90ae\u4ef6\u53d1\u9001\u4fc3\u9500\u4f18\u60e0\uff09\uff0c\u65b9\u6cd5\u662f\u901a\u8fc7\u60a8\u5728\u7528\u6237\u6863\u6848\u4e2d\u505a\u51fa\u7684\u9009\u62e9\u3002",r.createElement("br",null),"\u60a8\u53ef\u4ee5\u9009\u62e9\u4e0d\u4e0e\u767e\u7075\u5a01\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f46\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u5c06\u65e0\u6cd5\u5efa\u7acb\u7528\u6237\u5e10\u6237\u3002 \u5982\u679c\u6ca1\u6709\u7528\u6237\u5e10\u6237\uff0c\u60a8\u4ecd\u7136\u53ef\u4ee5\u6d4f\u89c8\u7f51\u7ad9\u7684\u5927\u90e8\u5206\u5185\u5bb9\uff0c\u4f46\u65e0\u6cd5\u5728\u7ebf\u8ba2\u8d2d\u6216\u67e5\u770b\u67d0\u4e9b\u9875\u9762\u3002",r.createElement("br",null),"\u60a8\u53ef\u4ee5\u9009\u62e9\u5728\u8ba1\u7b97\u673a\u4e0a\u7981\u7528cookie\uff0c\u4f46cookie\u662f\u7f51\u7ad9\u8bb8\u591a\u65b9\u9762\u529f\u80fd\u7684\u7ec4\u6210\u90e8\u5206\u3002 \u5982\u679c\u60a8\u4e0d\u5141\u8bb8\u4f7f\u7528Cookie\uff0c\u5219\u65e0\u6cd5\u5c06\u5546\u54c1\u6dfb\u52a0\u5230\u8d2d\u7269\u8f66\u6216\u6267\u884c\u4efb\u4f55\u8981\u6c42\u60a8\u767b\u5f55\u7528\u6237\u5e10\u6237\u7684\u529f\u80fd\u3002 \u6b64\u5916\uff0c\u5982\u679c\u6ca1\u6709Cookie\uff0c\u767e\u7075\u5a01\u7f51\u7ad9\u5c06\u65e0\u6cd5\u5b9a\u5236\u60a8\u7684\u7528\u6237\u4f53\u9a8c\uff0c\u4ee5\u53cd\u6620\u60a8\u6240\u5728\u5730\u533a\u7684\u4ea7\u54c1\u548c\u670d\u52a1\u3002",r.createElement("br",null),r.createElement("br",null),"4)\t\u7528\u6237\u9650\u5236",r.createElement("br",null),"\u767e\u7075\u5a01\u4e0d\u541118\u5c81\u4ee5\u4e0b\u7684\u5ba2\u6237\u9500\u552e\u4ea7\u54c1\u6216\u670d\u52a1\u3002 \u672c\u516c\u53f8\u4e0d\u4f1a\u6545\u610f\u6536\u96c6\u3001\u4f7f\u7528\u6216\u900f\u973218\u5c81\u4ee5\u4e0b\u4eba\u58eb\u7684\u4e2a\u4eba\u6570\u636e\u3002",r.createElement("br",null),r.createElement("br",null),"5)\t\u8054\u7cfb\u4fe1\u606f",r.createElement("br",null),"\u767e\u7075\u5a01\u81f4\u529b\u4e8e\u5411\u5ba2\u6237\u4fdd\u8bc1\u6709\u6743\u8bbf\u95ee\u4ed6\u4eec\u7684\u4fe1\u606f\u5e76\u66f4\u6b63\u4ed6\u4eec\u8ba4\u4e3a\u4e0d\u51c6\u786e\u7684\u4efb\u4f55\u4fe1\u606f\u3002 \u5982\u679c\u60a8\u5bf9\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u4efb\u4f55\u7591\u95ee\u6216\u5f02\u8bae\uff0c\u8bf7\u901a\u8fc7privacy@jk-sci.com\u4e0e\u6211\u4eec\u8054\u7cfb\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u516b\u3001\u6761\u6b3e\u4fee\u6539"),r.createElement("br",null),"\u672c\u516c\u53f8\u4fdd\u7559\u5728\u4efb\u4f55\u65f6\u95f4\u81ea\u884c\u4fee\u6539\u3001\u589e\u5220\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u4e2d\u4efb\u4f55\u5185\u5bb9\u7684\u6743\u5229\u3002\u60a8\u6bcf\u6b21\u767b\u5f55\u6216\u4f7f\u7528\u672c\u7f51\u7ad9\u65f6\u5747\u89c6\u4e3a\u540c\u610f\u53d7\u5f53\u65f6\u6709\u6548\u7684\u6761\u6b3e\u7684\u5236\u7ea6\u3002\u56e0\u6b64\uff0c\u60a8\u6bcf\u6b21\u767b\u5f55\u6216\u4f7f\u7528\u672c\u7f51\u7ad9\u65f6\u5e94\u67e5\u770b\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u7684\u65e5\u671f\uff0c\u5e76\u68c0\u67e5\u4e0e\u4e0a\u4e00\u7248\u672c\u7684\u4fee\u6539\u4e4b\u5904\u3002",r.createElement("br",null),r.createElement("br",null),r.createElement("span",{className:"text-info"},"\u4e5d\u3001\u6cd5\u5f8b\u9002\u7528\u4e0e\u53f8\u6cd5\u7ba1\u8f96"),r.createElement("br",null),"\u672c\u300a\u670d\u52a1\u6761\u6b3e\u4e0e\u9690\u79c1\u653f\u7b56\u300b\u7684\u5236\u5b9a\u3001\u6267\u884c\u548c\u89e3\u91ca\u53ca\u4e89\u8bae\u7684\u89e3\u51b3\u5747\u5e94\u9002\u7528\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd\u6cd5\u5f8b\u3002\u53cc\u65b9\u56e0\u4f7f\u7528\u672c\u7f51\u7ad9\u6240\u4ea7\u751f\u7684\u4e89\u8bae\uff0c\u534f\u5546\u4e0d\u6210\u7684\uff0c\u4efb\u4f55\u4e00\u65b9\u53ef\u4ee5\u5411\u672c\u516c\u53f8\u6240\u5728\u5730\u4eba\u6c11\u6cd5\u9662\u63d0\u8d77\u8bc9\u8bbc\u3002",r.createElement("br",null)))))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return this.pa=e,[4,this.openPage(this.page,e)];case 1:return t.sent(),[2]}})})},t}(a.VPage),wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAgreeAgencyClause=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.openVPage(vt,e)];case 1:return t.sent(),[2]}})})},t.showAgencyClauseDetil=function(){t.openVPage(gt)},t.isPosition=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.searchPosition()];case 1:return(e=t.sent())&&e.length>0?[2,!0]:[2,!1]}})})},t.searchPosition=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.uqs.salesTask.SearchPosition.table({})];case 1:return[2,e.sent()]}})})},t.startApp=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.cApp.start()];case 1:return e.sent(),[2]}})})},t.createPosition=function(e){return o.b(t,void 0,void 0,function(){var t,n,r;return o.e(this,function(i){switch(i.label){case 0:return t=(t=e.invitacode).replace(/\s/g,""),!0!==isNaN(t)?[3,2]:[4,this.openVPage(yt)];case 1:return i.sent(),[2];case 2:return[4,this.uqs.salesTask.CreatePosition.submit({invitacode:t})];case 3:return n=i.sent(),r=n.succeed,this.ceasePage(),1!==r?[3,6]:[4,this.uqs.salesTask.$user.save(this.user.id,this.user)];case 4:return i.sent(),[4,this.openVPage(bt,n)];case 5:return i.sent(),[3,8];case 6:return-1!==r?[3,8]:[4,this.openVPage(yt,n)];case 7:i.sent(),i.label=8;case 8:return[2,n]}})})},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return this.user,[4,this.isPosition()];case 1:return t.sent()?[3,3]:(a.nav.clear(),[4,this.openVPage(vt,e)]);case 2:return t.sent(),[3,5];case 3:return[4,this.openVPage(vt,e)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},t}(w),Et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItem=function(e,n){var i=t.controller.showPeerDetail,s=e.children,u=Object(a.tv)(s,function(e){return e.name});return r.createElement(a.LMR,{className:"px-3 py-2 ",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,i(e)];case 1:return[2,t.sent()]}})})},left:r.createElement(a.FA,{name:"user",className:" my-2 mr-3 text-info"}),right:r.createElement("div",{className:"w-2c text-right"}," ",r.createElement("i",{className:"fa fa-chevron-right"}))},r.createElement("div",{className:"font-weight-bold "},t.userSpan(u,e.assigned)))},t.page=function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"},"\u8fd8\u6ca1\u6709\u56e2\u961f\u54e6\uff01\u9a6c\u4e0a\u53d1\u5c55\u56e2\u961f\u5427\uff01\uff01");return r.createElement(a.Page,{header:"\u6211\u7684\u56e2\u961f",headerClassName:"bg-primary py-1"},r.createElement(a.List,{before:"",none:e,items:t.team,item:{render:t.renderItem}}))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.team=e,this.openPage(this.page),[2]})})},t.prototype.userSpan=function(e,t){return t?r.createElement(r.Fragment,null,r.createElement("b",null,t," \xa0 ",r.createElement("small",{className:"muted"},e))):r.createElement("b",null,e)},t}(a.VPage),Ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.schema=[{name:"assigend",type:"string"}],t.uiSchema={items:{assigend:{widget:"text",label:"\u5907\u6ce8\u540d",placeholder:""}}},t.onItemChanged=function(e,n,r){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(r){switch(r.label){case 0:return t=e.name,[4,this.controller.savePeerAssigned(this.peer,n)];case 1:return r.sent(),this.data[t]=n,[2]}})})},t.page=Object(g.a)(function(){return r.createElement(a.Page,{header:"\u7c89\u4e1d\u4fe1\u606f",headerClassName:oe.headerClass},r.createElement(a.Edit,{schema:t.schema,uiSchema:t.uiSchema,data:t.data,onItemChanged:t.onItemChanged}),r.createElement(a.LMR,{className:" bg-white pl-3 py-2",left:r.createElement("div",null,r.createElement("span",null,"\u9500\u91cf"))},r.createElement("div",{className:" w-100 pl-3"},"1000000")))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){var t,n;return o.e(this,function(r){return t=e.assigned,n=e.children,this.peer=n,this.data={assigend:t},this.openPage(this.page),[2]})})},o.c([v.l],t.prototype,"data",void 0),t}(a.VPage),kt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.searchTeam=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.uqs.salesTask.SearchTeam.table({})];case 1:return[2,e.sent()]}})})},t.showPeerDetail=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.openVPage(Ct,e),[2]})})},t.savePeerAssigned=function(e,n){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(r){return t={peer:e.id,Assigned:n},this.uqs.salesTask.SavePeerAssigned.submit(t),[2]})})},t.render=Object(g.a)(function(){return t.renderView(at)}),t.tab=function(){return r.createElement(t.render,null)},t}return o.d(t,e),t.prototype.internalStart=function(){return o.b(this,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.searchTeam()];case 1:return e=t.sent(),this.openVPage(Et,e),[2]}})})},t}(w),Pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItem=function(e,t){var n=e.date,i=e.note,o=e.peer,s=r.createElement("small",{className:"text-muted"},r.createElement(a.EasyDate,{date:n})),u=r.createElement("small",{className:"text-muted"},Object(a.tv)(o,function(e){return e.name}));return r.createElement("div",{className:"d-block p-3"},r.createElement(a.LMR,{left:s,right:u}),r.createElement(a.LMR,null," ",i))},t.page=function(){var e=r.createElement("div",{className:"my-3 mx-2 text-muted"});return r.createElement(a.Page,{header:"\u6d88\u606f",headerClassName:"bg-primary py-1"},r.createElement(a.List,{before:"",none:e,items:t.message,item:{render:t.renderItem}}))},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.message=e,this.openPage(this.page),[2]})})},t}(a.VPage),Nt=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(a.PageItems),St=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.count=v.l.box(0),t.searchNowMessage=function(){return o.b(t,void 0,void 0,function(){var e;return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.salesTask.searchNowMessage.table({})];case 1:return(e=t.sent())&&e.length>0?this.count.set(e[0].count):this.count.set(0),[2]}})})},t.updateNowMessage=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.uqs.salesTask.UpdateNowMessage.submit({})];case 1:return e.sent(),[4,this.searchNowMessage()];case 2:return e.sent(),0,[2]}})})},t.showMessage=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.searchMessage()];case 1:return e.sent(),this.openVPage(Pt,this.pageMessage),[4,this.updateNowMessage()];case 2:return e.sent(),[2]}})})},t.searchMessage=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.pageMessage=new Nt(this.uqs.salesTask.searchMessage),[4,this.pageMessage.first({})];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.searchNowMessage(),[4,this.showMessage()];case 1:return e.sent(),[2]}})})},o.c([v.l],t.prototype,"pageMessage",void 0),t}(w),xt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickRow=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return 1!=this.type?[3,2]:[4,this.controller.showCreateCustomer(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.controller.cApp.cCustomer.showCustomerSearch(e.name)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.page=Object(g.a)(function(){var e,n=t.controller,i=n.pageUnit,s=n.showCreateUnit,u=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u6ca1\u6709\u641c\u7d22\u5230\u5355\u4f4d\uff01");e=1==t.type?r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u65b0\u5efa\u5ba2\u6237\u524d\u5148\u9009\u62e9\u5355\u4f4d\uff0c\u6216\u70b9\u51fb\u53f3\u4e0a\u89d2\u52a0\u53f7\u65b0\u5efa\u5355\u4f4d\uff01"):"";var c=r.createElement("div",{onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,s()];case 1:return[2,e.sent()]}})})},className:"cursor-pointer px-3 py-2"},r.createElement(a.FA,{name:"plus"}));return r.createElement(a.Page,{header:t.title,onScrollBottom:t.onScrollBottom,headerClassName:"bg-primary",right:c},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5355\u4f4d"}),r.createElement(a.List,{before:"",none:u,items:i,item:{render:t.renderItem,onClick:t.onClickRow}}),!i&&e)}),t.onScrollBottom=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.pageUnit.more()];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.type=e,"1"==this.type?this.title="\u65b0\u5efa\u5ba2\u6237":"2"==this.type&&(this.title="\u641c\u7d22\u5ba2\u6237"),this.openPage(this.page),[2]})})},t.prototype.renderItem=function(e,t){var n=e.name;return r.createElement(a.LMR,{className:"px-3 py-1 ",left:r.createElement(a.FA,{name:"university",className:" my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold"}),r.createElement("div",null,n))},t}(a.VPage),Tt=[{name:"Name",type:"string",required:!0},{name:"submit",type:"submit"}],It=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{Name:{widget:"text",label:"\u540d\u79f0",placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d\u540d\u79f0"},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary w-8c"}}},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.createMyCustomerUnit(n.data)];case 1:return e.sent(),[2]}})})},t.page=Object(g.a)(function(e){return r.createElement(a.Page,{header:"\u65b0\u5efa\u5355\u4f4d",headerClassName:oe.headerClass},r.createElement(a.Form,{ref:function(e){return t.form=e},className:"my-3 mx-3",schema:Tt,uiSchema:t.uiSchema,onButtonClick:t.onFormButtonClick,requiredFlag:!1}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t}(a.VPage),Ft=[{name:"name",type:"string"}],At=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{name:{widget:"text",label:"\u5355\u4f4d\u540d\u79f0",placeholder:"\u8bf7\u8f93\u5165\u5355\u4f4d\u540d\u79f0"}}},t.onItemChanged=function(e,n,r){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(r){switch(r.label){case 0:return t=e.name,this.unit[t]=n,[4,this.controller.updateMyCustomerUnit(this.unit)];case 1:return r.sent(),[2]}})})},t.page=Object(g.a)(function(){r.createElement("div",{className:"cursor-pointer py-2 px-3 "},r.createElement(a.FA,{name:"pencil"}));return r.createElement(a.Page,{header:"\u5ba2\u6237\u5355\u4f4d\u8be6\u60c5",headerClassName:oe.headerClass},r.createElement(a.Edit,{schema:Ft,uiSchema:t.uiSchema,data:t.unit,onItemChanged:t.onItemChanged}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.unit=e,this.openPage(this.page),[2]})})},o.c([v.l],t.prototype,"unit",void 0),t}(a.VPage),Vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.comeBack=function(){t.closePage(2)},t.showresult=function(e){return 0===e.code?r.createElement(r.Fragment,null,"\u5355\u4f4d\u5df2\u5b58\u5728\uff0c\u521b\u5efa\u5931\u8d25\uff01"):r.createElement(r.Fragment,null,"\u5355\u4f4d\u6dfb\u52a0\u6210\u529f\uff0c\u8bf7\u5728\u5355\u4f4d\u641c\u7d22\u9875\u9762\u67e5\u770b\u8be6\u60c5\uff01")},t.page=Object(g.a)(function(e){return r.createElement(a.Page,{header:"\u65b0\u5efa\u5355\u4f4d",headerClassName:"bg-primary py-1 px-3"},r.createElement("div",{className:"w-100 text-center m-3 text-muted"},t.showresult(e)),r.createElement("div",{className:"w-100 text-center"},r.createElement("label",{className:"text-success",onClick:t.comeBack}," \u8fd4\u56de")))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t}(a.VPage),qt=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(a.PageItems),Ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showCustomerSearchByUnit=function(){return o.b(t,void 0,Promise,function(){return o.e(this,function(e){return this.pageUnit=null,this.searchByKey(""),this.openVPage(xt,2),[2]})})},t.searchByKey=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.pageUnit=new qt(this.uqs.salesTask.searchMyCustomerUnit),this.pageUnit.first({key:e}),[2]})})},t.showCreateUnit=function(){t.openVPage(It)},t.createMyCustomerUnit=function(e){return o.b(t,void 0,void 0,function(){var t,n;return o.e(this,function(r){switch(r.label){case 0:return t={no:void 0,name:e.Name},[4,this.uqs.salesTask.CreateMyCustomerUnit.submit(t)];case 1:return n=r.sent(),this.openVPage(Vt,n),[2]}})})},t.showCustomerUnitDetail=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.MyCustomerUnit.load(e)];case 1:return t=n.sent(),this.openVPage(At,t),[2]}})})},t.showCreateCustomer=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.cApp.cCustomer.showCreateCustomer(e),[2]})})},t.showCustomerUnitEdit=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.MyCustomerUnit.load(e)];case 1:return t=n.sent(),this.openVPage(At,t),[2]}})})},t.updateMyCustomerUnit=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.uqs.salesTask.MyCustomerUnit.save(e.id,e)];case 1:return t.sent(),this.closePage(),[2]}})})},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.pageUnit=null,this.searchByKey(""),this.openVPage(xt,1),[2]})})},o.c([v.l],t.prototype,"pageUnit",void 0),t}(w),jt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderItem=function(e,n){var i=t.controller.showCouponDetail,s="",u=e.code,c=e.validitydate,l=e.discount,h=e.preferential;u&&(s=(u=String(u+1e8)).substr(1,4)+" "+u.substr(5));var d,p,m=r.createElement("div",null,r.createElement(a.FA,{name:"th-large",className:" my-2 mr-3 text-warning"}),s),f=r.createElement("div",{className:"text-muted"},r.createElement("small",null,"\u6709\u6548\u671f\uff1a",r.createElement(a.EasyDate,{date:c})));return l&&(p=r.createElement("div",null,r.createElement("small",null,"\u6298\u6263\uff1a",r.createElement("span",{className:" mx-3 "},l," \u6298")))),h&&(d=r.createElement("div",{className:"text-muted"},r.createElement("small",null,"\u4f18\u60e0\uff1a",r.createElement("span",{className:"mx-3"},"\uffe5",h)))),r.createElement(a.LMR,{className:"px-3 py-2",onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,i(e.id)];case 1:return[2,t.sent()]}})})}},r.createElement(a.LMR,{left:m,right:f}),r.createElement(a.LMR,{left:p},d))},t.page=Object(g.a)(function(){var e=t.controller,n=e.pageCoupon,i=e.showCreateCoupon,s=(r.createElement("div",{onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,i()];case 1:return[2,e.sent()]}})})},className:"cursor-pointer py-2"},r.createElement(a.FA,{name:"plus"})),r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8fd8\u6ca1\u6709\u4f18\u60e0\u7801\u54e6\uff01\u9a6c\u4e0a\u6dfb\u52a0\u62db\u63fd\u5ba2\u6237\u5427\uff01"));return r.createElement(a.Page,{header:"\u4f18\u60e0\u7801",headerClassName:oe.headerClass},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2  ",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u4f18\u60e0\u7f16\u7801"}),r.createElement(a.List,{before:"",none:s,items:n,item:{render:t.renderItem,onClick:null}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t}(a.VPage),Rt=[{name:"validitydate",type:"date",required:!0},{name:"discount",type:"string",required:!1},{name:"preferential",type:"string",required:!1},{name:"customer",type:"id",required:!1},{name:"submit",type:"submit"}],Lt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dateVisible=!1,t.value=1,t.list=[{value:1,title:"    \u4e00\u5468",name:"b",checked:!0},{value:2,title:"\u4e24\u5468",name:"b"}],t.onChange=function(e){var n=e.currentTarget.value;t.dateVisible="0"===n;var r=new Date;"1"===n?r.setDate(r.getDate()+7):"2"===n&&r.setDate(r.getDate()+14);var i=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();t.setValue(i)},t.render=function(){return r.createElement("div",{className:"form-control",style:{height:"auto"}},t.list.map(function(e,n){var i=e.value,o=e.name,a=e.title,s=e.checked;return r.createElement("label",{className:"my-1 mx-3",key:n},r.createElement("input",{type:"radio",value:i,name:o,checked:s,onChange:t.onChange})," ",a," \xa0")}))},t}return o.d(t,e),o.c([v.l],t.prototype,"dateVisible",void 0),t}(a.Widget),Mt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dateVisible=!1,t.value=.05,t.list=[{value:.05,title:"95    \u6298    ",name:"a",checked:!0},{value:.1,title:"9.0\u6298",name:"a"},{value:.15,title:"85    \u6298    ",name:"a"},{value:.2,title:" 8.0\u6298",name:"a"},{value:.3,title:"7.0\u6298",name:"a"},{value:.4,title:"6.0\u6298",name:"a"}],t.onChange=function(e){var n=e.currentTarget.value;t.dateVisible="0"===n,t.setValue(n)},t.onDateChange=function(e){if(parseInt(e.currentTarget.value)<10){e.target.value;t.setValue(e.currentTarget.value)}else t.setValue(0)},t.render=function(){return r.createElement("div",{className:"form-control",style:{height:"auto"}},t.list.map(function(e,n){var i=e.value,o=e.name,a=e.title,s=e.checked;return r.createElement("label",{key:n,className:"my-1 mx-3"},r.createElement("input",{type:"radio",value:i,name:o,checked:s,onChange:t.onChange})," ",a," \xa0 ")}),r.createElement("div",null,r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("label",{className:"my-1 mx-3"},r.createElement("input",{type:"radio",value:-1,name:"a",onChange:t.onChange})," \u65e0\xa0\xa0\xa0\xa0\xa0\xa0")),r.createElement("td",null,r.createElement("label",{className:"my-1 mx-3"},r.createElement("input",{type:"radio",value:0,name:"a",onChange:t.onChange})," \u5176\u4ed6")),r.createElement("td",null,t.dateVisible&&r.createElement("input",{type:"text",className:"col-xs-4 col-sm-4",onChange:t.onDateChange})))))))},t}return o.d(t,e),o.c([v.l],t.prototype,"dateVisible",void 0),t}(a.Widget),Dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiSchema={items:{validitydate:{widget:"custom",label:"\u6709\u6548\u671f",WidgetClass:Lt},discount:{widget:"custom",label:"\u6298\u6263",WidgetClass:Mt},preferential:{widget:"text",label:"\u4f18\u60e0\u91d1\u989d",placeholder:"\u8bf7\u8f93\u5165\u4f18\u60e0\u91d1\u989d",rules:Je},customer:{widget:"id",label:"\u5ba2\u6237",placeholder:"\u8bf7\u9009\u62e9\u5ba2\u6237",pickId:function(e,n,r){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.showAddCouponCustomer(e,n,r)];case 1:return[2,t.sent()]}})})},Templet:function(e){var t=e.name,n=e.unit;return e?r.createElement("div",null,t,r.createElement("small",{className:" mx-3"},Object(a.tv)(n,function(e){return r.createElement(r.Fragment,null,e.name)}))):r.createElement("small",{className:"text-muted"},"\u8bf7\u9009\u62e9\u5ba2\u6237")}},submit:{widget:"button",label:"\u63d0\u4ea4",className:"btn btn-primary w-8c"}}},t.onFormButtonClick=function(e,n){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.controller.createCoupon(n.data)];case 1:return e.sent(),[2]}})})},t.page=Object(g.a)(function(e){var n=t.controller.cApp.cCoupon,i=r.createElement("div",{onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,n.start()];case 1:return[2,e.sent()]}})})},className:"cursor-pointer py-2 mx-3"},r.createElement(a.FA,{name:"ellipsis-h"}));return r.createElement(a.Page,{header:"\u4ea7\u751f\u4f18\u60e0\u7801",headerClassName:oe.headerClass,right:i},r.createElement(a.Form,{ref:function(e){return t.form=e},className:"my-3 mx-3",schema:Rt,uiSchema:t.uiSchema,onButtonClick:t.onFormButtonClick,requiredFlag:!1}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.openPage(this.page),[2]})})},t}(a.VPage),Bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=Object(g.a)(function(){var e=t.coupon,n=e.code,i=e.validitydate,s=e.discount,u=e.preferential,c=e.isValid,l=e.customer,h=t.controller.invalidCoupon,d="";n&&(d=(n=String(n+1e8)).substr(1,4)+" "+n.substr(5));var p=[{type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-3",left:"\u4f18\u60e0\u7f16\u53f7\uff1a"},r.createElement("div",{className:"mx-3"},d))},{type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-3",left:"\u6709 \u6548 \u671f \uff1a"},r.createElement("div",{className:"mx-3"},r.createElement(a.EasyDate,{date:i})))},{type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-3",left:"\u4f18\u60e0\u529b\u5ea6\uff1a"},r.createElement("div",{className:"mx-3"},"\u6298\u6263\uff1a",s," \u6298  \u91d1\u989d\uff1a",u,"\uffe5"))}];void 0!=l.id&&p.push({type:"component",name:"customer",component:r.createElement(r.Fragment,null,Object(a.tv)(l,function(e){return r.createElement(a.LMR,{className:"cursor-pointer w-100 py-3",left:"\u6307\u5b9a\u5ba2\u6237\uff1a",right:r.createElement("div",null,Object(a.tv)(e.unit,function(e){return e.name}))},r.createElement("div",{className:"mx-3"},e.name))}))}),p.push({type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-3",left:"\u5f53\u524d\u72b6\u6001\uff1a"},r.createElement("div",{className:"mx-3"},"  ",t.renderisValid(c)))},{type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-1",left:r.createElement("div",null,"\u4f7f\u7528\u60c5\u51b5")})},{type:"component",name:"customer",component:r.createElement(a.LMR,{className:"cursor-pointer w-100 py-1"},"\u8ba2\u5355ABC")});var m=r.createElement("button",{onClick:function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,h(this.coupon)];case 1:return[2,e.sent()]}})})},type:"submit",className:"btn btn-danger flex-grow-1 mx-3 my-1"},"\u4f5c\u5e9f");return r.createElement(a.Page,{header:"\u4f18\u60e0\u7801\u8be6\u60c5",headerClassName:oe.headerClass,footer:m},r.createElement(a.PropGrid,{className:"my-2",rows:p,values:t.coupon,alignValue:"right"}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.coupon=e,this.openPage(this.page),[2]})})},t.prototype.renderisValid=function(e){return 1==e?"\u6709\u6548":"\u65e0\u6548"},t}(a.VPage),Ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.comeBack=function(){t.closePage(2)},t.page=Object(g.a)(function(){var e="";t.code&&(t.code=String(t.code),e=t.code.substr(0,4)+" "+t.code.substr(4));return r.createElement(a.Page,{header:"\u4f18\u60e0\u7801",back:"none",headerClassName:"bg-primary py-1 px-3"},r.createElement("div",{className:"w-100 text-center m-3 text-muted"},"\u4f18\u60e0\u7801\u5df2\u751f\u6210\uff0c\u8d76\u5feb\u53d1\u7ed9\u5ba2\u6237\u5427\uff01"),r.createElement("div",{className:"w-100 text-center m-3 fa-2x text-info"},e),r.createElement("div",{className:"w-100 text-center"},r.createElement("label",{className:"text-success",onClick:t.comeBack}," \u8fd4\u56de")))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.code=e,this.openPage(this.page),[2]})})},t}(a.VPage),Wt=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(a.PageItems),zt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.searchByKey=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.pageCoupon=new Wt(this.uqs.salesTask.SearchCoupon),this.pageCoupon.first({key:e}),[2]})})},t.showCouponDetail=function(e){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(n){switch(n.label){case 0:return[4,this.uqs.salesTask.Coupon.load(e)];case 1:return t=n.sent(),this.openVPage(Bt,t),[2]}})})},t.IsCanUseCoupon=function(){return o.b(t,void 0,void 0,function(){var e,t;return o.e(this,function(n){switch(n.label){case 0:return e={code:"36747841",webuser:"47"},[4,this.uqs.salesTask.IsCanUseCoupon.submit(e)];case 1:return t=n.sent(),t,[2]}})})},t.showCreateCoupon=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){return this.openVPage(Dt),[2]})})},t.createCoupon=function(e){return o.b(t,void 0,void 0,function(){var t,n,r,i;return o.e(this,function(o){switch(o.label){case 0:return t=e.customer?e.customer.id:void 0,"-1"==e.discount&&void 0,n={validitydate:e.validitydate,discount:e.discount,preferential:e.preferential,mycustomer:t},[4,this.uqs.salesTask.CreateCoupon.submit(n)];case 1:return r=o.sent(),i=r.code,this.openVPage(Ut,i),[2]}})})},t.invalidCoupon=function(e){return o.b(t,void 0,void 0,function(){var t,n;return o.e(this,function(r){switch(r.label){case 0:return[4,(t=this.uqs.salesTask.Coupon).load(e.id)];case 1:return(n=r.sent()).isValid=2,[4,t.save(n.id,n)];case 2:return r.sent(),[2]}})})},t.showAddCouponCustomer=function(e,n,r){return o.b(t,void 0,Promise,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,this.cApp.cCustomer.call()];case 1:return[2,e.sent()]}})})},t.addCouponCustomer=function(e,n){return o.b(t,void 0,void 0,function(){var t;return o.e(this,function(r){return t={coupon:e.id,customer:n.id},this.uqs.salesTask.AddCouponCustomer.submit(t),this.customers.unshift({coupon:e,customer:n}),this.closePage(),[2]})})},t}return o.d(t,e),t.prototype.internalStart=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return this.pageCoupon=null,[4,this.searchByKey(void 0)];case 1:return e.sent(),this.openVPage(jt),this.IsCanUseCoupon(),[2]}})})},o.c([v.l],t.prototype,"pageCoupon",void 0),o.c([v.l],t.prototype,"customers",void 0),t}(w),Ht=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickCustomer=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){switch(t.label){case 0:return[4,this.controller.returnWebUser(e)];case 1:return t.sent(),this.closePage(),[2]}})})},t.page=Object(g.a)(function(e){var n=t.controller.pageWebUser,i=r.createElement("div",{className:"my-3 mx-2 text-warning"},"\u8bf7\u641c\u7d22\u5ba2\u6237\uff01");return r.createElement(a.Page,{header:"\u9009\u62e9\u5185\u90e8\u5ba2\u6237",headerClassName:"bg-primary"},r.createElement(a.SearchBox,{className:"px-1 w-100  mt-2 mr-2",size:"md",onSearch:function(e){return t.controller.searchByKey(e)},placeholder:"\u641c\u7d22\u5ba2\u6237\u59d3\u540d\u3001\u5355\u4f4d"}),r.createElement(a.List,{before:"",none:i,items:n,item:{render:t.renderCustomer,onClick:t.onClickCustomer}}))}),t}return o.d(t,e),t.prototype.open=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(t){return this.openPage(this.page,e),[2]})})},t.prototype.renderCustomer=function(e,t){var n=e.name;return r.createElement(a.LMR,{className:"px-3 py-2 ",left:r.createElement(a.FA,{name:"user",className:" my-2 mr-3 text-info"})},r.createElement("div",{className:"font-weight-bold"}),r.createElement("div",null,n))},t}(a.VPage),Kt=function(e){function t(t){var n=e.call(this)||this;return n.firstSize=n.pageSize=10,n.searchQuery=t,n}return o.d(t,e),t.prototype.load=function(e,t,n){return o.b(this,void 0,Promise,function(){return o.e(this,function(r){switch(r.label){case 0:return void 0===t&&(t=0),[4,this.searchQuery.page(e,t,n)];case 1:return[2,r.sent()]}})})},t.prototype.setPageStart=function(e){this.pageStart=void 0===e?0:e.id},t}(a.PageItems),Qt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.searchByKey=function(e){return o.b(t,void 0,void 0,function(){return o.e(this,function(t){return this.pageWebUser=new Kt(this.uqs.customer.SearchWebUser),this.pageWebUser.first({key:e}),[2]})})},t.returnWebUser=function(e){return o.b(t,void 0,Promise,function(){return o.e(this,function(t){return this.returnCall(e),[2]})})},t}return o.d(t,e),t.prototype.internalStart=function(e){return o.b(this,void 0,void 0,function(){return o.e(this,function(e){return this.pageWebUser=null,this.openVPage(Ht),[2]})})},o.c([v.l],t.prototype,"pageWebUser",void 0),t}(w),Jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.newC=function(e){return new e(this)},t.prototype.internalStart=function(){return o.b(this,void 0,void 0,function(){var e,t;return o.e(this,function(n){switch(n.label){case 0:return this.cCustomer=this.newC(ot),this.cProduct=this.newC(je),this.cSalesTask=this.newC(Ue),this.cMe=this.newC(mt),this.cTeam=this.newC(kt),this.cStart=this.newC(wt),this.cMessage=this.newC(St),this.cCustomerUnit=this.newC(Ot),this.cCoupon=this.newC(zt),this.cWebUser=this.newC(Qt),e=this,[4,this.uqs.common.SalesRegion.load(1)];case 1:return e.currentSalesRegion=n.sent(),t=this,[4,this.uqs.common.Language.load(197)];case 2:return t.currentLanguage=n.sent(),this.cStart.start(),a.nav.clear(),this.openVPage(y),[2]}})})},t}(a.CAppBase),Gt={appName:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/salestask",version:"1.0.1",tvs:d,loginTop:f};a.nav.setSettings(Gt);var Xt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLogined=function(){return o.b(t,void 0,void 0,function(){return o.e(this,function(e){switch(e.label){case 0:return[4,Object(a.start)(Jt,Gt)];case 1:return e.sent(),[2]}})})},t}return o.d(t,e),t.prototype.render=function(){return r.createElement(a.NavView,{onLogined:this.onLogined})},t}(r.Component),Zt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Yt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(108),n(110);i.render(r.createElement(Xt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="./service-worker.js";Zt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Yt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Yt(e)})}}()}],[[82,4,3]]]);
//# sourceMappingURL=main.12920059.chunk.js.map