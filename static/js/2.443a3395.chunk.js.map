{"version":3,"sources":["tonva/entry/changePassword.tsx"],"names":["ChangePasswordPage","_super","_this","apply","this","arguments","schema","name","type","maxLength","required","uiSchema","items","orgPassword","widget","label","placeholder","newPassword","newPassword1","submit","className","onSubmit","context","tslib__WEBPACK_IMPORTED_MODULE_0__","Promise","_a","data","setError","_net__WEBPACK_IMPORTED_MODULE_3__","undefined","changePassword","_b","sent","_components__WEBPACK_IMPORTED_MODULE_2__","replace","react__WEBPACK_IMPORTED_MODULE_1__","header","back","prototype","render","onButtonClick","fieldLabelSize"],"mappings":"kLAIAA,EAAA,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAA,OAAAD,KAAAE,MAAAC,KAAAC,YAAAD,YACYF,EAAAI,OAAuB,CAC3B,CAACC,KAAK,cAAeC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC9D,CAACH,KAAK,cAAeC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC9D,CAACH,KAAK,eAAgBC,KAAM,SAAUC,UAAW,GAAIC,UAAU,GAC/D,CAACH,KAAK,SAAUC,KAAM,WAElBN,EAAAS,SAAqB,CACzBC,MAAO,CACHC,YAAa,CACTC,OAAQ,WACRC,MAAO,qBACPC,YAAa,8CAEjBC,YAAa,CACTH,OAAQ,WACRC,MAAO,qBACPC,YAAa,8CAEjBE,aAAc,CACVJ,OAAQ,WACRC,MAAO,2BACPC,YAAa,oDAEjBG,OAAQ,CACJL,OAAQ,SACRC,MAAO,eACPK,UAAW,qBAKflB,EAAAmB,SAAW,SAAOd,EAAae,GAAgB,OAAAC,EAAA,EAAArB,OAAA,EAAEsB,QAAO,0EAE5D,OADIC,EAA2CH,EAAQI,KAAlDb,EAAWY,EAAAZ,YAAEI,EAAWQ,EAAAR,YAAEC,EAAYO,EAAAP,aACvCD,IAAgBC,GAChBI,EAAQK,SAAS,eAAgB,sEACjC,KAGM,GADS,IAAIC,EAAA,EAAa,WAAOC,GACdC,eAAe,CAACjB,YAAaA,EAAaI,YAAYA,YACnF,OAAY,IADFc,EAAAC,QAENV,EAAQK,SAAS,cAAe,kCAChC,MAEJM,EAAA,IAAIC,QAAQC,EAAA,cAACF,EAAA,KAAI,CAACG,OAAO,2BAAOC,KAAK,SACjCF,EAAA,qBAAKf,UAAU,qBAAmB,gDAItC,aAaR,OA9DwCG,EAAA,EAAAvB,EAAAC,GAoDpCD,EAAAsC,UAAAC,OAAA,WACI,OAAOJ,EAAA,cAACF,EAAA,KAAI,CAACG,OAAO,4BAChBD,EAAA,cAACF,EAAA,KAAI,CACDb,UAAU,MACVd,OAAQF,KAAKE,OACbK,SAAUP,KAAKO,SACf6B,cAAepC,KAAKiB,SACpBoB,eAAgB,MAGhCzC,EA9DA,CAAwCmC,EAAA","file":"static/js/2.443a3395.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { VPage, Page, Form, ItemSchema, UiSchema, StringSchema, UiTextItem, UiPasswordItem, Context, ButtonSchema, UiButton, nav } from '../components';\r\nimport { CenterAppApi } from '../net';\r\n\r\nexport class ChangePasswordPage extends React.Component {\r\n    private schema: ItemSchema[] = [\r\n        {name:'orgPassword', type: 'string', maxLength: 60, required: true} as StringSchema,\r\n        {name:'newPassword', type: 'string', maxLength: 60, required: true} as StringSchema,\r\n        {name:'newPassword1', type: 'string', maxLength: 60, required: true} as StringSchema,\r\n        {name:'submit', type: 'submit'} as ButtonSchema\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            orgPassword: {\r\n                widget: 'password',\r\n                label: '原密码',\r\n                placeholder: '输入原来的密码'\r\n            } as UiPasswordItem,\r\n            newPassword: {\r\n                widget: 'password',\r\n                label: '新密码',\r\n                placeholder: '输入新设的密码'\r\n            } as UiPasswordItem,\r\n            newPassword1: {\r\n                widget: 'password',\r\n                label: '确认密码', \r\n                placeholder: '再次输入新设密码'\r\n            } as UiPasswordItem,\r\n            submit: {\r\n                widget: 'button',\r\n                label: '提交',\r\n                className: 'btn btn-primary'\r\n            } as UiButton,\r\n        }\r\n    };\r\n\r\n    private onSubmit = async (name:string, context: Context):Promise<any> => {\r\n        let {orgPassword, newPassword, newPassword1} = context.data;\r\n        if (newPassword !== newPassword1) {\r\n            context.setError('newPassword1', '新密码错误，请重新输入');\r\n            return;\r\n        }\r\n        let centerAppApi = new CenterAppApi('tv/', undefined);\r\n        let ret = await centerAppApi.changePassword({orgPassword: orgPassword, newPassword:newPassword});\r\n        if (ret === false) {\r\n            context.setError('orgPassword', '原密码错误');\r\n            return;\r\n        }\r\n        nav.replace(<Page header=\"修改密码\" back=\"close\">\r\n            <div className=\"m-3  text-success\">\r\n                密码修改成功！\r\n            </div>\r\n        </Page>);\r\n        return;\r\n    }\r\n\r\n    render() {\r\n        return <Page header=\"修改密码\">\r\n            <Form\r\n                className=\"m-3\" \r\n                schema={this.schema}\r\n                uiSchema={this.uiSchema}\r\n                onButtonClick={this.onSubmit}\r\n                fieldLabelSize={2} />\r\n        </Page>;\r\n    }\r\n}\r\n"],"sourceRoot":""}